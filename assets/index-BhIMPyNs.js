import{r as N,h as I,i as te,j as s,O as k,E,P as K,x as ne,g as ie,C as oe,f as le,w as ce,R as W,b as L}from"./index-BV80umGB.js";const ue={electronicEPW:{label:"EPW",colors:["#d62728"],dash:"4px",width:1.75,opacity:1,units:"eV"},electronicQE:{label:"QE",colors:["#6baed6"],dash:"solid",width:2.25,opacity:.95,units:"eV"},phononEPW:{label:"EPW",colors:["#d62728"],dash:"solid",width:1.75,opacity:1,units:"eV",showlegend:!1},unknownEntry:{label:"Unknown Data 1",colors:["#2ca02c","#98df8a"],dash:"dot",units:"eV"}},T={yaxis:{showgrid:!1,showline:!1,ticks:"inside",tickfont:{size:14,color:"#333"},title:{font:{size:16,color:"#333"},standoff:10}},xaxis:{showgrid:!0,ticks:"inside",tickfont:{size:14,color:"#333"},title:{font:{size:16,color:"#333"},text:"k-path"}},legend:{orientation:"v",y:.985,x:.985,xanchor:"right",font:{size:14,color:"#333"},bgcolor:"rgba(250, 250, 250, 1.0)",bordercolor:"#ccc",borderwidth:1},margin:{l:65,r:10,t:10,b:50},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]},de={...T,yaxis:{...T.yaxis,title:{...T.yaxis.title,text:"Energy [eV]"}}},fe={...T,margin:{l:65,r:10,t:50,b:40},yaxis:{...T.yaxis,title:{...T.yaxis.title,text:"Energy [meV]"},autorange:!1,rangemode:"nonnegative"},yaxis2:{matches:"y",showticklabels:!1,ticks:"inside",showgrid:!1,rangemode:"nonnegative",autorange:!1,zeroline:!1},xaxis:{ticks:"inside",tickfont:{size:14,color:"#333"},title:{text:"",font:{size:16,color:"#333"}}},xaxis2:{...T.xaxis,title:{...T.xaxis.title,text:"α<sup>2</sup>F(ω)"},showgrid:!1},xaxis3:{overlaying:"x2",side:"top",anchor:"y",title:{text:"λ(ω)",font:{size:16}},showgrid:!1,tickfont:{size:15,color:"#333"},ticks:"inside",tickmode:"auto"},legend2:{orientation:"v",y:.1,x:.585,xanchor:"right",zorder:-100,opacity:0,bgcolor:"rgba(0, 0, 0, 0)"},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:1.25},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]};function he(r,e){r.paths.forEach(a=>{a.values.forEach(n=>{n.forEach((i,o,l)=>{l[o]+=e})})})}function xe(r){const e=r.map(i=>{const o=i.bandsData?.paths;return o?o.reduce((l,t)=>!t.x||t.x.length===0?l:l+(t.x[t.x.length-1]-t.x[0]),0):0}),a=Math.max(...e);return r.map((i,o)=>{const l=i.bandsData?.paths;if(!l)return i;const t=e[o];if(t===0)return i;const u=a/t,x=l.map(d=>!d.x||d.x.length===0?d:{...d,x:d.x.map(y=>y*u)});return{...i,bandsData:{...i.bandsData,paths:x}}})}function pe(r,e=0,a="unknownEntry"){he(r,e);let n=ue[a],i={bandsData:r,traceFormat:{label:`${n.label}`,name:n.label,hovertemplate:`<b>${n.label}</b>: %{y:.3f} ${n.units}<br><extra></extra>`,mode:n.mode,line:{color:n.colors[0],dash:n.dash,width:n.width,opacity:n.opacity}}};return a=="phononEPW"&&(i={bandsData:r,traceFormat:{label:`${n.label}`,name:n.label,hovertemplate:`<b>${n.label}</b>: %{y:.3f} ${n.units}<br><extra></extra>`,mode:n.mode,line:{color:n.colors[0],dash:n.dash,width:n.width,opacity:n.opacity},showlegend:!1}}),i}function R(r,e,a){return!r||typeof e!="number"?null:pe(r,-e,a)}function q(r,e=[]){const[a,n]=N.useState(null),[i,o]=N.useState(!1);return N.useEffect(()=>{let l=!1;async function t(){o(!0);try{const u=await r();l||n(u??null)}catch{l||n(null)}finally{l||o(!1)}}return t(),()=>{l=!0}},e),{data:a,loading:i}}async function ye(r,e){console.log("supercon settings",r);const[a,n,i]=await Promise.all([r.epw_el_band_structure_uuid?I(`${e}-supercon`,r.epw_el_band_structure_uuid):null,r.qe_el_band_structure_uuid?I(`${e}-supercon`,r.qe_el_band_structure_uuid):null,r.epw_ph_band_structure_uuid?I(`${e}-supercon`,r.epw_ph_band_structure_uuid):null]),o=R(a,r.fermi_energy_coarse,"electronicEPW"),l=R(n,r.fermi_energy_coarse,"electronicQE"),t=xe([l,o].filter(Boolean)),u=R(i,0,"phononEPW");return{el:t,ph:u?[u]:[]}}async function ge(r,e){return r.aniso_gap_function_uuid?te(`${e}-supercon`,r.aniso_gap_function_uuid):null}async function me(r,e){return r.a2f_uuid?te(`${e}-supercon`,r.a2f_uuid):null}const be=({childrenLeft:r,childrenRight:e,style:a=null})=>s.jsx("div",{style:a,children:s.jsxs("div",{className:"two-wide-container subsection-shadow overflow-auto rounded",children:[s.jsx("div",{className:"info-col",children:r}),s.jsx("div",{className:"info-col",children:e})]})}),_e=s.jsxs(s.Fragment,{children:["ω",s.jsx("sub",{children:"log"}),s.jsx("span",{style:{marginLeft:"0.10em"}})]}),U=s.jsxs(s.Fragment,{children:["T",s.jsx("sub",{children:"c"}),s.jsx("span",{style:{marginLeft:"0.10em"}})]});function b({value:r,exploreBaseURL:e=E["pbesol-v1-supercon"],uuid:a=null,decimals:n=3,format:i=l=>l,fallback:o=void 0}){let l;if(typeof r=="number"&&!isNaN(r))l=i(Number(r.toFixed(n)));else if(Array.isArray(r))l=i(r.join(" × "));else if(r!=null)l=i(r);else return o;return a?s.jsxs(s.Fragment,{children:[l," ",s.jsx(k,{explore_url:e,uuid:a})]}):l}function we({params:r,superconData:e,style:a={}}){console.log("scD",e);const n=[{key:"Space group number",value:b({value:e.space_group_number,format:t=>`${t}`,fallback:"Unknown Spacegroup"})},{key:"Total energy",value:b({value:e.total_energy,format:t=>`${t} eV`,fallback:"Unknown Total energy"})},{key:"Cell volume",value:b({value:e.cell_volume,format:t=>`${t} Å³`,fallback:"Unknown Spacegroup"})},{key:"Fermi energy",value:b({value:e.fermi_energy_coarse,format:t=>`${t} eV`})},{key:s.jsxs(s.Fragment,{children:["ω",s.jsx("sup",{children:"max"})]}),value:b({value:e.highest_phonon_frequency,uuid:e.uuid,format:t=>`${t} meV`})}],i=[{key:s.jsxs(s.Fragment,{children:["E",s.jsx("sub",{children:"cut"})]}),value:b({value:e.ecut,uuid:e.uuid,format:t=>`${(t/13.605703976).toFixed(0)} Ry`,fallback:"No data"})},{key:"Smearing",value:b({value:e.scf_smearing,uuid:e.uuid,format:t=>`${t} eV`,fallback:"No data"})},{key:s.jsxs(s.Fragment,{children:["DFPT ",s.jsx("b",{children:"k"}),"-grid"]}),value:b({value:e.kgrid_dfpt.mesh,uuid:e.kgrid_dfpt.uuid,format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No DFPT kgrid data"})},{key:s.jsxs(s.Fragment,{children:["DFPT ",s.jsx("b",{children:"q"}),"-grid"]}),value:b({value:e.qgrid_epw_coarse.mesh,uuid:e.qgrid_epw_coarse.uuid,format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No DFPT qgrid data"})}],o=[{key:"Type of anisotropy",value:b({value:e.type,uuid:e.uuid,format:t=>`${t}`})},{key:"Number of Wannier functions",value:b({value:e.number_of_wannier_functions,format:t=>`${t}`})},{key:s.jsxs(s.Fragment,{children:["Coarse ",s.jsx("b",{children:"k"}),"-grid"]}),value:b({value:e.kgrid_epw_coarse.mesh,uuid:e.kgrid_epw_coarse.uuid,format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW coarse kgriddata"})},{key:s.jsxs(s.Fragment,{children:["Coarse ",s.jsx("b",{children:"q"}),"-grid"]}),value:b({value:e.qgrid_epw_coarse.mesh,uuid:e.qgrid_epw_coarse.uuid,format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW coarse qgriddata"})},{key:s.jsxs(s.Fragment,{children:["Fine ",s.jsx("b",{children:"k"}),"-grid"]}),value:b({value:e.kgrid_epw_fine.mesh,uuid:e.kgrid_epw_fine.uuid,format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW fine kgriddata"})},{key:s.jsxs(s.Fragment,{children:["Fine ",s.jsx("b",{children:"q"}),"-grid"]}),value:b({value:e.qgrid_epw_fine.mesh,uuid:e.qgrid_epw_fine.uuid,format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW fine qgriddata"})},{key:"Smearing-q",value:b({value:e.smearing_q,uuid:e.uuid,format:t=>`${t} meV`,fallback:"No data"})},{key:"Fermi window",value:b({value:e.fermi_window,uuid:e.uuid,format:t=>`±${t} eV`,fallback:"No data"})}],l=[{key:_e,value:b({value:e.omega_log,uuid:e.uuid,format:t=>`${t} meV`,fallback:"Not calculated"})},{key:"λ",value:b({value:e.lambda,uuid:e.uuid,format:t=>`${t}`,fallback:"Not calculated"})},{key:s.jsxs(s.Fragment,{children:["Allen-Dynes ",U]}),value:b({value:e.allen_dynes_tc,uuid:e.uuid,format:t=>`${t} K`,fallback:"Not calculated"})},{key:s.jsxs(s.Fragment,{children:["Isotropic ",U]}),value:b({value:e.iso_tc,uuid:e.uuid,format:t=>`${t} K`,fallback:"Not superconducting"})},{key:s.jsxs(s.Fragment,{children:["Δ",s.jsxs("sub",{children:["n",s.jsx("b",{children:"k"})]}),"(0)"]}),value:b({value:e.aniso_info?.delta0,uuid:e.uuid,format:t=>`${t} K`,fallback:"No nk Data"})},{key:s.jsxs(s.Fragment,{children:["Anisotropic ",U]}),value:b({value:e.aniso_info?.Tc,uuid:e.uuid,format:t=>`${t} K`,fallback:"Not superconducting"})}];return s.jsx(be,{style:a,childrenLeft:s.jsxs("div",{children:[s.jsx("b",{children:"General properties"}),s.jsx("ul",{className:"no-bullets",children:n.filter(t=>t.value!==void 0).map((t,u)=>s.jsxs("li",{children:[t.key,": ",t.value]},u))}),s.jsx("b",{children:"Superconducting properties"}),s.jsx("ul",{className:"no-bullets",children:l.filter(t=>t.value!==void 0).map((t,u)=>s.jsxs("li",{children:[t.key,": ",t.value]},u))})]}),childrenRight:s.jsxs("div",{children:[s.jsxs("b",{children:["DFT calculation details"," ",s.jsx(k,{explore_url:E["pbesol-v1-supercon"],uuid:e.pw_uuid})]}),s.jsx("ul",{className:"no-bullets",children:i.filter(t=>t.value!==void 0).map((t,u)=>s.jsxs("li",{children:[t.key,": ",t.value]},u))}),s.jsxs("b",{children:["EPW calculation details"," ",s.jsx(k,{explore_url:E["pbesol-v1-supercon"],uuid:e.epw_uuid})]}),s.jsx("ul",{className:"no-bullets",children:o.filter(t=>t.value!==void 0).map((t,u)=>s.jsxs("li",{children:[t.key,": ",t.value]},u))})]})})}const D={color:"#d62728"},B={xaxis:{title:{text:"T [K]",font:{size:15,color:"#111"}},tickfont:{size:14},showgrid:!1,zeroline:!1,showline:!1,ticks:"inside",rangemode:"nonnegative"},yaxis:{title:{text:"Δ<sub>n<b>k</b></sub>(T) [meV]",font:{size:15,color:"#111"}},tickfont:{size:14},showgrid:!1,zeroline:!1,showline:!1,ticks:"inside",rangemode:"nonnegative"},legend:{visible:!1},margin:{t:10,b:40,l:65,r:2},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]};function je(r,e,a,n=200,i="Analytical Δ(T)"){const o=Array.from({length:n},(t,u)=>u*a/(n-1)),l=o.map(t=>r*Math.sqrt(1-Math.pow(t/a,e)));return{x:o,y:l,name:i,type:"scatter",mode:"lines",hovertemplate:"<b>Value of the fit of BCS gap at %{x:.2f}K:</b> %{y:.3f}<extra></extra>",line:{color:"#b22222",dash:"dash"}}}function ve({gapfuncData:r,loading:e=!1,loadingIconScale:a=8,Tc:n,verts:i,points:o,delta0:l,expo:t,resolution:u=1e3,minXVal:x=0,maxXVal:d=null,minYVal:y=null,maxYVal:_=0}){const w=N.useRef(null);return N.useEffect(()=>{if(!r||!w.current||e)return;const j=w.current,v=i??[],h=Object.entries(r).filter(([m,g])=>Array.isArray(g)).map(([m,g])=>{const S=g.map(([A])=>A),re=g.map(([A,P])=>P),{leftVerts:se,distances:ae}=S.reduce((A,P)=>{const Q=v.filter($=>$<=P);if(!Q.length)A.leftVerts.push(null),A.distances.push(null);else{const $=Math.max(...Q);A.leftVerts.push($),A.distances.push(P-$)}return A},{leftVerts:[],distances:[]});return{x:S,y:re,customdata:ae,text:se,opacity:.8,type:"scatter",mode:"lines",line:{color:D.color},hovertemplate:"<b>Histogram of Δ<sub>nk</sub>(%{text:.1f}K) at %{y:.2f} meV:</b> %{customdata:.2f} <extra></extra>"}}),c=(i||[]).map((m,g)=>({x:[m],y:[(o||[])[g]],name:`point ${g}`,type:"scatter",mode:"markers",hovertemplate:"<b>Weighted average at %{x:.0f}K:</b> %{y:.3f}<extra></extra>",marker:{color:D.color,size:12}}));h.push(...c);const f=je(l,t,n,u);h.push(f);const p={...B,xaxis:{...B.xaxis,range:x!=null&&d!=null?[x,d]:void 0},yaxis:{...B.yaxis,range:y!=null&&_!=null?[y,_]:void 0},shapes:[...B.shapes||[],...v.map(m=>({type:"line",x0:m,x1:m,y0:0,y1:1,yref:"paper",line:{color:"#111",width:1.25},layer:"below"}))]};return K.newPlot(j,h,p,{responsive:!0}),()=>K.purge(j)},[r,i,o,l,t,n,u,x,d,y,_,e]),s.jsx("div",{ref:w,style:{position:"relative",width:"100%",height:"350px",border:e?"2px solid #ccc":"none",borderRadius:e?"8px":"0"},children:e&&s.jsx("div",{style:{width:`${a}%`,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10},children:s.jsx(ne,{})})})}const O={color:"#d62728",dash:"solid",label:"α<sup>2</sup>F(ω)",hoverlabel:"Eliashberg spectral function",lineWidth:1.75,xaxis:"x2",yaxis:"y2"},F={color:"#111",dash:"solid",label:"λ(ω)",hoverlabel:"Cumulative electron-phonon coupling strength",lineWidth:1.75,xaxis:"x3",yaxis:"y2"};function ke({a2f:r,frequency:e,degaussq:a,selectedDegaussIndex:n=-1}){if(!r||!e||!a||a.length===0)return[];const i=n<0?a.length-1:n,o={x:r.map(d=>d[i]),y:e,type:"scatter",mode:"lines",name:O.label,hovertemplate:`<b>${O.hoverlabel} at %{y:.2f} meV:</b> %{y:.3f} <br><extra></extra>`,line:{color:O.color,dash:O.dash,width:O.lineWidth},xaxis:O.xaxis,yaxis:O.yaxis},l=e[1]-e[0];let t=0;const x={x:e.map((d,y)=>{const _=r[y][i];return t+=2*_/d*l,t}),y:e,type:"scatter",mode:"lines",name:F.label,label:`${F.label}`,hovertemplate:`<b>${F.hoverlabel} at %{y:.2f} meV:</b> %{x:.3f}<br><extra></extra>`,line:{color:F.color,dash:F.dash,width:F.lineWidth},xaxis:F.xaxis,yaxis:F.yaxis};return[o,x]}function H(r){const e=r.length,a=r[0].length,n=new Array(a);for(let i=0;i<a;i++){n[i]=new Array(e);for(let o=0;o<e;o++)n[i][o]=r[o][i]}return n}const J=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"];function X(r){return r<J.length?J[r]:`hsl(${r*47%360}, 70%, 50%)`}function Ee(r){const e=new Set;return r.map(n=>{const i=n.name||"",o=!e.has(i);return o&&e.add(i),{...n,legendgroup:i,showlegend:o}})}function Ae(r){const e=[],a=[];let n=null;return r.paths.forEach((i,o)=>{const l=i.x,t=i.values;o>0&&(e.push(null),a.forEach(u=>u.push(null))),l.forEach((u,x)=>{u===n&&(e.push(null),a.forEach(d=>d.push(null))),e.push(u),n=u,t.forEach((d,y)=>{a[y]||(a[y]=[]),a[y].push(d[x])})})}),{xs:e,ys:a}}function Fe(r){const e={GAMMA:"Γ",DELTA:"Δ",SIGMA:"Σ",LAMBDA:"Λ"};Object.keys(e).forEach(n=>{const i=new RegExp(n,"gi");r=r.replace(i,e[n])}),r=r.replace(/\bG\b/g,"Γ"),r=r.replace(/-/g,"—");const a={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};return r=r.replace(/_(.)/g,(n,i)=>a[i]||n),r}function Te(r=td.paths){const e=[0];for(const a of r)a.x.length<3||e.push(a.x[a.x.length-1]);return e}function Ne(r){const e=r.flat(),a=[];a.push(e[0]);for(let n=1;n<e.length-1;n++)e[n]===e[n+1]?(a.push(e[n]),n++):(a.push(e[n]+"|"+e[n+1]),n++);return a.push(e[e.length-1]),a}function M(r,e="x",a="y"){let n=1/0,i=-1/0,o=1/0,l=-1/0;for(const t of r){const u=t.xaxis===e||!t.xaxis&&e==="x",x=t.yaxis===a||!t.yaxis&&a==="y";if(!(!u||!x)){for(const d of t.x??[])typeof d=="number"&&(n=Math.min(n,d),i=Math.max(i,d));for(const d of t.y??[])typeof d=="number"&&(o=Math.min(o,d),l=Math.max(l,d))}}return{x:n===1/0?null:[n,i],y:o===1/0?null:[o,l]}}function C(r,e,a,n={}){return{x:r,y:e,mode:"lines",type:"scatter",name:`Fermi [${a}eV]`,legendgroup:`fermi-${a}`,showlegend:n.showlegend??!0,line:{color:"green",width:1.25,dash:"dash"},...n}}function Oe(r,e,a,n){const i=[...e];if(a&&!n){const{y:o}=M(e);for(const l of r)i.push(C([l,l],[o[0],o[1]],l))}else if(n&&!a){const{x:o}=M(e);for(const l of r)i.push(C([o[0],o[1]],[l,l],l))}else if(n&&a){const{x:o}=M(e,"x2","y"),{x:l}=M(e,"x","y");for(const t of r)i.push(C([l[0],l[1]],[t,t],t)),i.push(C([o[0],o[1]],[t,t],t,{showlegend:!1,xaxis:"x2",yaxis:"y"}))}return i}var G,Z;function ze(){if(Z)return G;Z=1;var r=function(f){return e(f)&&!a(f)};function e(c){return!!c&&typeof c=="object"}function a(c){var f=Object.prototype.toString.call(c);return f==="[object RegExp]"||f==="[object Date]"||o(c)}var n=typeof Symbol=="function"&&Symbol.for,i=n?Symbol.for("react.element"):60103;function o(c){return c.$$typeof===i}function l(c){return Array.isArray(c)?[]:{}}function t(c,f){return f.clone!==!1&&f.isMergeableObject(c)?v(l(c),c,f):c}function u(c,f,p){return c.concat(f).map(function(m){return t(m,p)})}function x(c,f){if(!f.customMerge)return v;var p=f.customMerge(c);return typeof p=="function"?p:v}function d(c){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(c).filter(function(f){return Object.propertyIsEnumerable.call(c,f)}):[]}function y(c){return Object.keys(c).concat(d(c))}function _(c,f){try{return f in c}catch{return!1}}function w(c,f){return _(c,f)&&!(Object.hasOwnProperty.call(c,f)&&Object.propertyIsEnumerable.call(c,f))}function j(c,f,p){var m={};return p.isMergeableObject(c)&&y(c).forEach(function(g){m[g]=t(c[g],p)}),y(f).forEach(function(g){w(c,g)||(_(c,g)&&p.isMergeableObject(f[g])?m[g]=x(g,p)(c[g],f[g],p):m[g]=t(f[g],p))}),m}function v(c,f,p){p=p||{},p.arrayMerge=p.arrayMerge||u,p.isMergeableObject=p.isMergeableObject||r,p.cloneUnlessOtherwiseSpecified=t;var m=Array.isArray(f),g=Array.isArray(c),S=m===g;return S?m?p.arrayMerge(c,f,p):j(c,f,p):t(f,p)}v.all=function(f,p){if(!Array.isArray(f))throw new Error("first argument should be an array");return f.reduce(function(m,g){return v(m,g,p)},{})};var h=v;return G=h,G}var Se=ze();const z=ie(Se),Y={title:"Multi Trace Plot with border",hovermode:"closest",uirevision:!0,shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],margin:{l:55,r:10,t:10,b:45},dragmode:"zoom",xaxis:{title:{text:"x-axis",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"y-axis",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}},legend:{x:1.01,y:1,xanchor:"left",yanchor:"top",orientation:"v"}},Pe=z(Y,{title:"BSPlot",xaxis:{title:{text:"K-path",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}}}),$e=z(Y,{title:"DOSPlot",xaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),Le=z(Y,{title:"DOSPlot",xaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),V={shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:2},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],grid:{rows:1,columns:2,pattern:"independent"},xaxis:{domain:[0,.7],autorange:!0},xaxis2:{title:{text:"Energy [eV]",font:{size:18}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"},domain:[.73,1],autorange:!0,showgrid:!0},yaxis:{autorange:!0},margin:{l:60,r:30,b:40,t:40},showlegend:!0,legend:{}},Be={mode:"lines",dash:"solid",line:{color:"rgba(90, 60, 255, 0.85)",width:1},name:"Band Structure"},Me={name:"DOS",legendgroup:"DOS",showlegend:!0,type:"scatter",mode:"lines",dash:"dash",line:{color:"rgba(90, 60, 255, 0.85)",width:2},fill:"toself"};function Ce(r,e,a={}){const n=[];return e.forEach((i,o)=>{n.push({name:a.name,legendgroup:a.name,showlegend:o===0,...Be,...a,x:r,y:i})}),n}function Ve(r=[],e=[]){return z.all([Pe,{xaxis:{tickvals:e,ticktext:r},yaxis:{}}])}function Ie(r){const a=Ne(r[0].bandsData.path).map(Fe),n=Te(r[0].bandsData.paths),i=Ve(a,n);let o=[];for(const[l,t]of r.entries()){let u=t.traceFormat;(!u||Object.keys(u).length===0)&&(u={name:`Band Structure ${l}`,line:{color:X(l),width:1}});const x=t.bandsData,{xs:d,ys:y}=Ae(x),_=Ce(d,y,u);o.push(..._)}return{bandTraces:o,bandLayout:i}}function We(r="h"){let e;return r==="v"?e=Le:e=$e,e}function Re(r,e="h",a={}){const n=e==="v"?r.y:r.x,i=e==="v"?r.x:r.y;return{...Me,...a,x:n,y:i}}function qe(r,e="h"){const a=[];for(const[i,o]of r.entries()){let l=o.traceFormat;(!l||Object.keys(l).length===0)&&(l={name:`DOS ${i}`,line:{color:X(i),width:2}});const t=o.dosData,u=Re(t,e,l);a.push(u)}const n=We(e);return{dosTraces:a,dosLayout:n}}function Ue(r,e,a,n={},i=1){const o=H(a),l=H(e),t=[];return l.forEach((u,x)=>{const d=o[x],y=new Float64Array(u.length),_=new Float64Array(u.length);for(let h=0;h<u.length;h++){const c=d[h]*i;y[h]=u[h]+c,_[h]=u[h]-c}const w=r.length,j=new Float32Array(w*2),v=new Float32Array(w*2);for(let h=0;h<w;h++)j[h]=r[h],v[h]=_[h],j[2*w-1-h]=r[h],v[2*w-1-h]=y[h];t.push({name:n.name,legendgroup:n.name,type:"scatter",mode:"lines",fill:"toself",...n,showlegend:x===0,x:j,y:v})}),t}function Ge(r,e){for(const a in r)r[a]!==null&&typeof r[a]=="object"&&!Array.isArray(r[a])&&e[a]&&typeof e[a]=="object"&&!Array.isArray(e[a])?e[a]=z(e[a],r[a]):e[a]=r[a]}function Ke(r,{bandsDataArray:e=[],dosDataArray:a=[],fermiLevels:n=[],customTraces:i=[],settings:o={}}){let l=[],t={},u=[],x=[],d={};typeof n=="number"&&(n=[n]);const y=e.length>0,_=a.length>0;if(y){const h=Ie(e);l=h.bandTraces,t=h.bandLayout;for(const[c,f]of e.entries())if(f.hasOwnProperty("projections"))for(const[p,m]of f.projections.entries()){const g=m.traceFormat&&Object.keys(m.traceFormat).length>0?m.traceFormat:{name:`Projection ${p}`,line:{color:X(p),width:0}};u.push(...Ue(f.bandsData.x,f.bandsData.y,m.projData.weights,g))}}if(_){const c=qe(a,y?"v":"h");x=c.dosTraces,d=c.dosLayout}let w={},j=[];if(_&&!y)j=x,w={...d,showlegend:d?.showlegend??!0};else if(y&&!_)j=[...l,...u],w={...t,showlegend:t?.showlegend??!0};else if(_&&y){x=x.map(c=>({...c,xaxis:"x2",yaxis:"y"}));const h=Ee([...u,...x]);j=[...l,...h],w={...V,xaxis:{...V.xaxis||{},...t?.xaxis||{}},xaxis2:{...V.xaxis2||{},...d?.xaxis2||{}},yaxis:{...V.yaxis||{},...t?.yaxis||{},...d?.yaxis||{}}}}for(const h of i)console.log(h),h.target==="dos"?j.push({...h,xaxis:"x2",yaxis:"y"}):h.target==="bands"?j.push({...h,xaxis:"x",yaxis:"y"}):j.push({...h});const v=Oe(n,j,_,y);Ge(o,w),K.react(r,v,w,{displaylogo:!1,responsive:!0})}function ee({bandsDataArray:r,loading:e=!1,loadingIconScale:a=15,dosDataArray:n=void 0,customTraces:i=[],minYval:o=null,maxYval:l=null,layoutOverrides:t=null}){const u=N.useRef(null),x=N.useMemo(()=>{const d={...t??{}};return o!=null&&l!=null&&(d.yaxis={...d.yaxis??{},range:[o,l]}),d},[t,o,l]);return N.useEffect(()=>{e||!u.current||!r||Ke(u.current,{bandsDataArray:r,dosDataArray:n,customTraces:i,settings:x})},[r,n,i,x,e]),s.jsx("div",{ref:u,style:{position:"relative",width:"100%",height:"450px",border:e?"2px solid #ccc":"none",borderRadius:e?"8px":"0"},children:e&&s.jsx("div",{style:{width:`${a}%`,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10},children:s.jsx(ne,{})})})}function Ye({params:r,loadedData:e,superconData:a}){const n=a.supercon,i=r.method,{data:o,loading:l}=q(()=>ye(n,i),[n,i]),{data:t,loading:u}=q(()=>ge(n,i),[n,i]),{data:x}=q(()=>me(n,i),[n,i]),d=o?.el??[],y=o?.ph??[],_=!!d.length,w=!!y.length;return n?s.jsx("div",{children:s.jsxs(oe,{fluid:!0,className:"section-container",children:[s.jsxs("div",{style:{margin:"10px 0px",padding:"20px 0px 10px",borderBottom:"1px solid #c4c4c4"},children:[s.jsx("div",{style:{fontSize:"24px"},children:"Superconductivity estimation"}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px",alignItems:"center"},children:[s.jsx(le,{citationLabels:["MBercxSupercon25"]}),s.jsx(ce,{doi_id:"9w-az",label:"Data DOI"})]})]}),s.jsxs("div",{className:"alert alert-warning",style:{margin:"10px 10px 5px 10px"},role:"alert",children:["This contribution re-relaxes the structure with a different methodology. To see this structure, explore the AiiDA provenance"," ",n.structure_uuid&&s.jsx(k,{explore_url:E["pbesol-v1-supercon"],uuid:n.structure_uuid})]}),s.jsxs("div",{style:{padding:"10px 10px",textAlign:"justify"},children:["This dataset provides results from a high-throughput search for phonon-mediated superconductivity, where electron–phonon interactions and critical temperatures were systematically computed to identify and characterize promising superconducting materials. This frontend section contains the final superconductivity estimation results, as well as the intermediate electronic and vibrational calculated properties. For further details regarding the methodology see the"," ",s.jsx("a",{href:"./#/contributions",target:"_blank",rel:"noopener noreferrer",children:"extended dataset documentation"}),"."]}),s.jsxs(W,{children:[s.jsx(L,{sm:12,md:6,className:"mt-2 mt-md-5",children:s.jsx(we,{params:r,superconData:n})}),s.jsxs(L,{sm:12,md:6,className:"mt-3 mt-md-0",children:[s.jsx("div",{className:"subsection-title",children:"Electronic band structure"}),s.jsxs("div",{className:"mb-3 ms-2",children:["Calculated with Quantum ESPRESSO (QE)"," ",n.qe_el_band_structure_uuid&&s.jsx(k,{explore_url:E["pbesol-v1-supercon"],uuid:n.qe_el_band_structure_uuid})," ","and EPW"," ",n.epw_el_band_structure_uuid&&s.jsx(k,{explore_url:E["pbesol-v1-supercon"],uuid:n.epw_el_band_structure_uuid})]}),s.jsx(ee,{bandsDataArray:_?o.el:null,loading:l,minYval:-10.4,maxYval:10.8,layoutOverrides:de})]})]}),n.epw_ph_band_structure_uuid&&s.jsx(W,{children:s.jsxs(L,{className:"mt-4 mt-lg-0",children:[s.jsx("div",{className:"subsection-title",children:"Phonon bands and electron-phonon interaction"}),s.jsxs("div",{style:{padding:"0px 10px"},children:["Phonon band structure calculated with EPW"," ",n.epw_ph_band_structure_uuid&&s.jsx(k,{explore_url:E[r.method]+"-supercon",uuid:n.epw_ph_band_structure_uuid})," ","Eliashberg spectral function [α²F(ω)], and electron-phonon coupling strength [λ(ω)]"," ",n.a2f_uuid&&s.jsx(k,{explore_url:E[r.method]+"-supercon",uuid:n.a2f_uuid})," "]}),s.jsx(ee,{bandsDataArray:w?o.ph:null,loading:l,loadingIconScale:7,minYval:0,maxYval:n.highest_phonon_frequency+4,dosDataArray:[{dosData:{x:[0],y:[0]},traceFormat:{name:"",legend:"legend2",showlegend:!1,opacity:0}}],layoutOverrides:fe,customTraces:ke({a2f:x?.a2f,frequency:x?.frequency,degaussq:x?.degaussq,lambda:x?.lambda})})]})}),n.aniso_info&&s.jsx(W,{children:s.jsxs(L,{style:{maxWidth:"910px"},children:[s.jsxs("div",{className:"subsection-title",children:["Anisotropic superconducting gap function"," ",n.aniso_gap_function_uuid&&s.jsx(k,{explore_url:E[r.method]+"-supercon",uuid:n.aniso_gap_function_uuid})," "]}),s.jsx(ve,{gapfuncData:t,loading:u,verts:n.aniso_info.temps,points:n.aniso_info.average_deltas,delta0:n.aniso_info.delta0,Tc:n.aniso_info.Tc,expo:n.aniso_info.expo,minXVal:0,maxXVal:null,minYVal:0,maxYVal:null})]})})]})}):s.jsx("div",{className:"empty-supercon-div"})}export{Ye as default};
