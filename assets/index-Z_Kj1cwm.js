const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-mRwp4eQM.js","assets/index-CbG3v9Wg.css","assets/index-baWZ5L4W.js","assets/index-BgREWu2X.css","assets/index-CuZn4RrL.js","assets/index-BkLZGfdv.css"])))=>i.map(i=>d[i]);
function _mergeNamespaces(n,h){for(var s=0;s<h.length;s++){const _=h[s];if(typeof _!="string"&&!Array.isArray(_)){for(const M in _)if(M!=="default"&&!(M in n)){const $=Object.getOwnPropertyDescriptor(_,M);$&&Object.defineProperty(n,M,$.get?$:{enumerable:!0,get:()=>_[M]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))_(M);new MutationObserver(M=>{for(const $ of M)if($.type==="childList")for(const V of $.addedNodes)V.tagName==="LINK"&&V.rel==="modulepreload"&&_(V)}).observe(document,{childList:!0,subtree:!0});function s(M){const $={};return M.integrity&&($.integrity=M.integrity),M.referrerPolicy&&($.referrerPolicy=M.referrerPolicy),M.crossOrigin==="use-credentials"?$.credentials="include":M.crossOrigin==="anonymous"?$.credentials="omit":$.credentials="same-origin",$}function _(M){if(M.ep)return;M.ep=!0;const $=s(M);fetch(M.href,$)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var h=n.default;if(typeof h=="function"){var s=function _(){var M=!1;try{M=this instanceof _}catch{}return M?Reflect.construct(h,arguments,this.constructor):h.apply(this,arguments)};s.prototype=h.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(n).forEach(function(_){var M=Object.getOwnPropertyDescriptor(n,_);Object.defineProperty(s,_,M.get?M:{enumerable:!0,get:function(){return n[_]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var n=Symbol.for("react.element"),h=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),V=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ie=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),Et=Symbol.iterator;function ml(Rd){return Rd===null||typeof Rd!="object"?null:(Rd=Et&&Rd[Et]||Rd["@@iterator"],typeof Rd=="function"?Rd:null)}var rl={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ml=Object.assign,kl={};function _u(Rd,dh,Ih){this.props=Rd,this.context=dh,this.refs=kl,this.updater=Ih||rl}_u.prototype.isReactComponent={},_u.prototype.setState=function(Rd,dh){if(typeof Rd!="object"&&typeof Rd!="function"&&Rd!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Rd,dh,"setState")},_u.prototype.forceUpdate=function(Rd){this.updater.enqueueForceUpdate(this,Rd,"forceUpdate")};function Hu(){}Hu.prototype=_u.prototype;function bu(Rd,dh,Ih){this.props=Rd,this.context=dh,this.refs=kl,this.updater=Ih||rl}var dl=bu.prototype=new Hu;dl.constructor=bu,Ml(dl,_u.prototype),dl.isPureReactComponent=!0;var Tl=Array.isArray,$l=Object.prototype.hasOwnProperty,Bl={current:null},Pu={key:!0,ref:!0,__self:!0,__source:!0};function Il(Rd,dh,Ih){var nd,Yd={},Kh=null,rp=null;if(dh!=null)for(nd in dh.ref!==void 0&&(rp=dh.ref),dh.key!==void 0&&(Kh=""+dh.key),dh)$l.call(dh,nd)&&!Pu.hasOwnProperty(nd)&&(Yd[nd]=dh[nd]);var lh=arguments.length-2;if(lh===1)Yd.children=Ih;else if(1<lh){for(var yp=Array(lh),Cp=0;Cp<lh;Cp++)yp[Cp]=arguments[Cp+2];Yd.children=yp}if(Rd&&Rd.defaultProps)for(nd in lh=Rd.defaultProps,lh)Yd[nd]===void 0&&(Yd[nd]=lh[nd]);return{$$typeof:n,type:Rd,key:Kh,ref:rp,props:Yd,_owner:Bl.current}}function ud(Rd,dh){return{$$typeof:n,type:Rd.type,key:dh,ref:Rd.ref,props:Rd.props,_owner:Rd._owner}}function pd(Rd){return typeof Rd=="object"&&Rd!==null&&Rd.$$typeof===n}function id(Rd){var dh={"=":"=0",":":"=2"};return"$"+Rd.replace(/[=:]/g,function(Ih){return dh[Ih]})}var rh=/\/+/g;function qd(Rd,dh){return typeof Rd=="object"&&Rd!==null&&Rd.key!=null?id(""+Rd.key):dh.toString(36)}function oh(Rd,dh,Ih,nd,Yd){var Kh=typeof Rd;(Kh==="undefined"||Kh==="boolean")&&(Rd=null);var rp=!1;if(Rd===null)rp=!0;else switch(Kh){case"string":case"number":rp=!0;break;case"object":switch(Rd.$$typeof){case n:case h:rp=!0}}if(rp)return rp=Rd,Yd=Yd(rp),Rd=nd===""?"."+qd(rp,0):nd,Tl(Yd)?(Ih="",Rd!=null&&(Ih=Rd.replace(rh,"$&/")+"/"),oh(Yd,dh,Ih,"",function(Cp){return Cp})):Yd!=null&&(pd(Yd)&&(Yd=ud(Yd,Ih+(!Yd.key||rp&&rp.key===Yd.key?"":(""+Yd.key).replace(rh,"$&/")+"/")+Rd)),dh.push(Yd)),1;if(rp=0,nd=nd===""?".":nd+":",Tl(Rd))for(var lh=0;lh<Rd.length;lh++){Kh=Rd[lh];var yp=nd+qd(Kh,lh);rp+=oh(Kh,dh,Ih,yp,Yd)}else if(yp=ml(Rd),typeof yp=="function")for(Rd=yp.call(Rd),lh=0;!(Kh=Rd.next()).done;)Kh=Kh.value,yp=nd+qd(Kh,lh++),rp+=oh(Kh,dh,Ih,yp,Yd);else if(Kh==="object")throw dh=String(Rd),Error("Objects are not valid as a React child (found: "+(dh==="[object Object]"?"object with keys {"+Object.keys(Rd).join(", ")+"}":dh)+"). If you meant to render a collection of children, use an array instead.");return rp}function Ed(Rd,dh,Ih){if(Rd==null)return Rd;var nd=[],Yd=0;return oh(Rd,nd,"","",function(Kh){return dh.call(Ih,Kh,Yd++)}),nd}function Nl(Rd){if(Rd._status===-1){var dh=Rd._result;dh=dh(),dh.then(function(Ih){(Rd._status===0||Rd._status===-1)&&(Rd._status=1,Rd._result=Ih)},function(Ih){(Rd._status===0||Rd._status===-1)&&(Rd._status=2,Rd._result=Ih)}),Rd._status===-1&&(Rd._status=0,Rd._result=dh)}if(Rd._status===1)return Rd._result.default;throw Rd._result}var Gd={current:null},Cd={transition:null},Bu={ReactCurrentDispatcher:Gd,ReactCurrentBatchConfig:Cd,ReactCurrentOwner:Bl};function wh(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:Ed,forEach:function(Rd,dh,Ih){Ed(Rd,function(){dh.apply(this,arguments)},Ih)},count:function(Rd){var dh=0;return Ed(Rd,function(){dh++}),dh},toArray:function(Rd){return Ed(Rd,function(dh){return dh})||[]},only:function(Rd){if(!pd(Rd))throw Error("React.Children.only expected to receive a single React element child.");return Rd}},react_production_min.Component=_u,react_production_min.Fragment=s,react_production_min.Profiler=M,react_production_min.PureComponent=bu,react_production_min.StrictMode=_,react_production_min.Suspense=Y,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bu,react_production_min.act=wh,react_production_min.cloneElement=function(Rd,dh,Ih){if(Rd==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Rd+".");var nd=Ml({},Rd.props),Yd=Rd.key,Kh=Rd.ref,rp=Rd._owner;if(dh!=null){if(dh.ref!==void 0&&(Kh=dh.ref,rp=Bl.current),dh.key!==void 0&&(Yd=""+dh.key),Rd.type&&Rd.type.defaultProps)var lh=Rd.type.defaultProps;for(yp in dh)$l.call(dh,yp)&&!Pu.hasOwnProperty(yp)&&(nd[yp]=dh[yp]===void 0&&lh!==void 0?lh[yp]:dh[yp])}var yp=arguments.length-2;if(yp===1)nd.children=Ih;else if(1<yp){lh=Array(yp);for(var Cp=0;Cp<yp;Cp++)lh[Cp]=arguments[Cp+2];nd.children=lh}return{$$typeof:n,type:Rd.type,key:Yd,ref:Kh,props:nd,_owner:rp}},react_production_min.createContext=function(Rd){return Rd={$$typeof:V,_currentValue:Rd,_currentValue2:Rd,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Rd.Provider={$$typeof:$,_context:Rd},Rd.Consumer=Rd},react_production_min.createElement=Il,react_production_min.createFactory=function(Rd){var dh=Il.bind(null,Rd);return dh.type=Rd,dh},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(Rd){return{$$typeof:oe,render:Rd}},react_production_min.isValidElement=pd,react_production_min.lazy=function(Rd){return{$$typeof:zn,_payload:{_status:-1,_result:Rd},_init:Nl}},react_production_min.memo=function(Rd,dh){return{$$typeof:ie,type:Rd,compare:dh===void 0?null:dh}},react_production_min.startTransition=function(Rd){var dh=Cd.transition;Cd.transition={};try{Rd()}finally{Cd.transition=dh}},react_production_min.unstable_act=wh,react_production_min.useCallback=function(Rd,dh){return Gd.current.useCallback(Rd,dh)},react_production_min.useContext=function(Rd){return Gd.current.useContext(Rd)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(Rd){return Gd.current.useDeferredValue(Rd)},react_production_min.useEffect=function(Rd,dh){return Gd.current.useEffect(Rd,dh)},react_production_min.useId=function(){return Gd.current.useId()},react_production_min.useImperativeHandle=function(Rd,dh,Ih){return Gd.current.useImperativeHandle(Rd,dh,Ih)},react_production_min.useInsertionEffect=function(Rd,dh){return Gd.current.useInsertionEffect(Rd,dh)},react_production_min.useLayoutEffect=function(Rd,dh){return Gd.current.useLayoutEffect(Rd,dh)},react_production_min.useMemo=function(Rd,dh){return Gd.current.useMemo(Rd,dh)},react_production_min.useReducer=function(Rd,dh,Ih){return Gd.current.useReducer(Rd,dh,Ih)},react_production_min.useRef=function(Rd){return Gd.current.useRef(Rd)},react_production_min.useState=function(Rd){return Gd.current.useState(Rd)},react_production_min.useSyncExternalStore=function(Rd,dh,Ih){return Gd.current.useSyncExternalStore(Rd,dh,Ih)},react_production_min.useTransition=function(){return Gd.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var n=requireReact(),h=Symbol.for("react.element"),s=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,M=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$={key:!0,ref:!0,__self:!0,__source:!0};function V(oe,Y,ie){var zn,Et={},ml=null,rl=null;ie!==void 0&&(ml=""+ie),Y.key!==void 0&&(ml=""+Y.key),Y.ref!==void 0&&(rl=Y.ref);for(zn in Y)_.call(Y,zn)&&!$.hasOwnProperty(zn)&&(Et[zn]=Y[zn]);if(oe&&oe.defaultProps)for(zn in Y=oe.defaultProps,Y)Et[zn]===void 0&&(Et[zn]=Y[zn]);return{$$typeof:h,type:oe,key:ml,ref:rl,props:Et,_owner:M.current}}return reactJsxRuntime_production_min.Fragment=s,reactJsxRuntime_production_min.jsx=V,reactJsxRuntime_production_min.jsxs=V,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const dm=getDefaultExportFromCjs(reactExports),React=_mergeNamespaces({__proto__:null,default:dm},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(n){function h(Cd,Bu){var wh=Cd.length;Cd.push(Bu);e:for(;0<wh;){var Rd=wh-1>>>1,dh=Cd[Rd];if(0<M(dh,Bu))Cd[Rd]=Bu,Cd[wh]=dh,wh=Rd;else break e}}function s(Cd){return Cd.length===0?null:Cd[0]}function _(Cd){if(Cd.length===0)return null;var Bu=Cd[0],wh=Cd.pop();if(wh!==Bu){Cd[0]=wh;e:for(var Rd=0,dh=Cd.length,Ih=dh>>>1;Rd<Ih;){var nd=2*(Rd+1)-1,Yd=Cd[nd],Kh=nd+1,rp=Cd[Kh];if(0>M(Yd,wh))Kh<dh&&0>M(rp,Yd)?(Cd[Rd]=rp,Cd[Kh]=wh,Rd=Kh):(Cd[Rd]=Yd,Cd[nd]=wh,Rd=nd);else if(Kh<dh&&0>M(rp,wh))Cd[Rd]=rp,Cd[Kh]=wh,Rd=Kh;else break e}}return Bu}function M(Cd,Bu){var wh=Cd.sortIndex-Bu.sortIndex;return wh!==0?wh:Cd.id-Bu.id}if(typeof performance=="object"&&typeof performance.now=="function"){var $=performance;n.unstable_now=function(){return $.now()}}else{var V=Date,oe=V.now();n.unstable_now=function(){return V.now()-oe}}var Y=[],ie=[],zn=1,Et=null,ml=3,rl=!1,Ml=!1,kl=!1,_u=typeof setTimeout=="function"?setTimeout:null,Hu=typeof clearTimeout=="function"?clearTimeout:null,bu=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function dl(Cd){for(var Bu=s(ie);Bu!==null;){if(Bu.callback===null)_(ie);else if(Bu.startTime<=Cd)_(ie),Bu.sortIndex=Bu.expirationTime,h(Y,Bu);else break;Bu=s(ie)}}function Tl(Cd){if(kl=!1,dl(Cd),!Ml)if(s(Y)!==null)Ml=!0,Nl($l);else{var Bu=s(ie);Bu!==null&&Gd(Tl,Bu.startTime-Cd)}}function $l(Cd,Bu){Ml=!1,kl&&(kl=!1,Hu(Il),Il=-1),rl=!0;var wh=ml;try{for(dl(Bu),Et=s(Y);Et!==null&&(!(Et.expirationTime>Bu)||Cd&&!id());){var Rd=Et.callback;if(typeof Rd=="function"){Et.callback=null,ml=Et.priorityLevel;var dh=Rd(Et.expirationTime<=Bu);Bu=n.unstable_now(),typeof dh=="function"?Et.callback=dh:Et===s(Y)&&_(Y),dl(Bu)}else _(Y);Et=s(Y)}if(Et!==null)var Ih=!0;else{var nd=s(ie);nd!==null&&Gd(Tl,nd.startTime-Bu),Ih=!1}return Ih}finally{Et=null,ml=wh,rl=!1}}var Bl=!1,Pu=null,Il=-1,ud=5,pd=-1;function id(){return!(n.unstable_now()-pd<ud)}function rh(){if(Pu!==null){var Cd=n.unstable_now();pd=Cd;var Bu=!0;try{Bu=Pu(!0,Cd)}finally{Bu?qd():(Bl=!1,Pu=null)}}else Bl=!1}var qd;if(typeof bu=="function")qd=function(){bu(rh)};else if(typeof MessageChannel<"u"){var oh=new MessageChannel,Ed=oh.port2;oh.port1.onmessage=rh,qd=function(){Ed.postMessage(null)}}else qd=function(){_u(rh,0)};function Nl(Cd){Pu=Cd,Bl||(Bl=!0,qd())}function Gd(Cd,Bu){Il=_u(function(){Cd(n.unstable_now())},Bu)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Cd){Cd.callback=null},n.unstable_continueExecution=function(){Ml||rl||(Ml=!0,Nl($l))},n.unstable_forceFrameRate=function(Cd){0>Cd||125<Cd?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ud=0<Cd?Math.floor(1e3/Cd):5},n.unstable_getCurrentPriorityLevel=function(){return ml},n.unstable_getFirstCallbackNode=function(){return s(Y)},n.unstable_next=function(Cd){switch(ml){case 1:case 2:case 3:var Bu=3;break;default:Bu=ml}var wh=ml;ml=Bu;try{return Cd()}finally{ml=wh}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Cd,Bu){switch(Cd){case 1:case 2:case 3:case 4:case 5:break;default:Cd=3}var wh=ml;ml=Cd;try{return Bu()}finally{ml=wh}},n.unstable_scheduleCallback=function(Cd,Bu,wh){var Rd=n.unstable_now();switch(typeof wh=="object"&&wh!==null?(wh=wh.delay,wh=typeof wh=="number"&&0<wh?Rd+wh:Rd):wh=Rd,Cd){case 1:var dh=-1;break;case 2:dh=250;break;case 5:dh=1073741823;break;case 4:dh=1e4;break;default:dh=5e3}return dh=wh+dh,Cd={id:zn++,callback:Bu,priorityLevel:Cd,startTime:wh,expirationTime:dh,sortIndex:-1},wh>Rd?(Cd.sortIndex=wh,h(ie,Cd),s(Y)===null&&Cd===s(ie)&&(kl?(Hu(Il),Il=-1):kl=!0,Gd(Tl,wh-Rd))):(Cd.sortIndex=dh,h(Y,Cd),Ml||rl||(Ml=!0,Nl($l))),Cd},n.unstable_shouldYield=id,n.unstable_wrapCallback=function(Cd){var Bu=ml;return function(){var wh=ml;ml=Bu;try{return Cd.apply(this,arguments)}finally{ml=wh}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var n=requireReact(),h=requireScheduler();function s(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,z=1;z<arguments.length;z++)u+="&args[]="+encodeURIComponent(arguments[z]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _=new Set,M={};function $(a,u){V(a,u),V(a+"Capture",u)}function V(a,u){for(M[a]=u,a=0;a<u.length;a++)_.add(u[a])}var oe=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Y=Object.prototype.hasOwnProperty,ie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zn={},Et={};function ml(a){return Y.call(Et,a)?!0:Y.call(zn,a)?!1:ie.test(a)?Et[a]=!0:(zn[a]=!0,!1)}function rl(a,u,z,it){if(z!==null&&z.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return it?!1:z!==null?!z.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function Ml(a,u,z,it){if(u===null||typeof u>"u"||rl(a,u,z,it))return!0;if(it)return!1;if(z!==null)switch(z.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function kl(a,u,z,it,Pl,Yl,ad){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=it,this.attributeNamespace=Pl,this.mustUseProperty=z,this.propertyName=a,this.type=u,this.sanitizeURL=Yl,this.removeEmptyString=ad}var _u={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){_u[a]=new kl(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];_u[u]=new kl(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){_u[a]=new kl(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){_u[a]=new kl(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){_u[a]=new kl(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){_u[a]=new kl(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){_u[a]=new kl(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){_u[a]=new kl(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){_u[a]=new kl(a,5,!1,a.toLowerCase(),null,!1,!1)});var Hu=/[\-:]([a-z])/g;function bu(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(Hu,bu);_u[u]=new kl(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(Hu,bu);_u[u]=new kl(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(Hu,bu);_u[u]=new kl(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){_u[a]=new kl(a,1,!1,a.toLowerCase(),null,!1,!1)}),_u.xlinkHref=new kl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){_u[a]=new kl(a,1,!1,a.toLowerCase(),null,!0,!0)});function dl(a,u,z,it){var Pl=_u.hasOwnProperty(u)?_u[u]:null;(Pl!==null?Pl.type!==0:it||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(Ml(u,z,Pl,it)&&(z=null),it||Pl===null?ml(u)&&(z===null?a.removeAttribute(u):a.setAttribute(u,""+z)):Pl.mustUseProperty?a[Pl.propertyName]=z===null?Pl.type===3?!1:"":z:(u=Pl.attributeName,it=Pl.attributeNamespace,z===null?a.removeAttribute(u):(Pl=Pl.type,z=Pl===3||Pl===4&&z===!0?"":""+z,it?a.setAttributeNS(it,u,z):a.setAttribute(u,z))))}var Tl=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$l=Symbol.for("react.element"),Bl=Symbol.for("react.portal"),Pu=Symbol.for("react.fragment"),Il=Symbol.for("react.strict_mode"),ud=Symbol.for("react.profiler"),pd=Symbol.for("react.provider"),id=Symbol.for("react.context"),rh=Symbol.for("react.forward_ref"),qd=Symbol.for("react.suspense"),oh=Symbol.for("react.suspense_list"),Ed=Symbol.for("react.memo"),Nl=Symbol.for("react.lazy"),Gd=Symbol.for("react.offscreen"),Cd=Symbol.iterator;function Bu(a){return a===null||typeof a!="object"?null:(a=Cd&&a[Cd]||a["@@iterator"],typeof a=="function"?a:null)}var wh=Object.assign,Rd;function dh(a){if(Rd===void 0)try{throw Error()}catch(z){var u=z.stack.trim().match(/\n( *(at )?)/);Rd=u&&u[1]||""}return`
`+Rd+a}var Ih=!1;function nd(a,u){if(!a||Ih)return"";Ih=!0;var z=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(lp){var it=lp}Reflect.construct(a,[],u)}else{try{u.call()}catch(lp){it=lp}a.call(u.prototype)}else{try{throw Error()}catch(lp){it=lp}a()}}catch(lp){if(lp&&it&&typeof lp.stack=="string"){for(var Pl=lp.stack.split(`
`),Yl=it.stack.split(`
`),ad=Pl.length-1,nh=Yl.length-1;1<=ad&&0<=nh&&Pl[ad]!==Yl[nh];)nh--;for(;1<=ad&&0<=nh;ad--,nh--)if(Pl[ad]!==Yl[nh]){if(ad!==1||nh!==1)do if(ad--,nh--,0>nh||Pl[ad]!==Yl[nh]){var _h=`
`+Pl[ad].replace(" at new "," at ");return a.displayName&&_h.includes("<anonymous>")&&(_h=_h.replace("<anonymous>",a.displayName)),_h}while(1<=ad&&0<=nh);break}}}finally{Ih=!1,Error.prepareStackTrace=z}return(a=a?a.displayName||a.name:"")?dh(a):""}function Yd(a){switch(a.tag){case 5:return dh(a.type);case 16:return dh("Lazy");case 13:return dh("Suspense");case 19:return dh("SuspenseList");case 0:case 2:case 15:return a=nd(a.type,!1),a;case 11:return a=nd(a.type.render,!1),a;case 1:return a=nd(a.type,!0),a;default:return""}}function Kh(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case Pu:return"Fragment";case Bl:return"Portal";case ud:return"Profiler";case Il:return"StrictMode";case qd:return"Suspense";case oh:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case id:return(a.displayName||"Context")+".Consumer";case pd:return(a._context.displayName||"Context")+".Provider";case rh:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ed:return u=a.displayName||null,u!==null?u:Kh(a.type)||"Memo";case Nl:u=a._payload,a=a._init;try{return Kh(a(u))}catch{}}return null}function rp(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kh(u);case 8:return u===Il?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function lh(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function yp(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Cp(a){var u=yp(a)?"checked":"value",z=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),it=""+a[u];if(!a.hasOwnProperty(u)&&typeof z<"u"&&typeof z.get=="function"&&typeof z.set=="function"){var Pl=z.get,Yl=z.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return Pl.call(this)},set:function(ad){it=""+ad,Yl.call(this,ad)}}),Object.defineProperty(a,u,{enumerable:z.enumerable}),{getValue:function(){return it},setValue:function(ad){it=""+ad},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function vp(a){a._valueTracker||(a._valueTracker=Cp(a))}function mf(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var z=u.getValue(),it="";return a&&(it=yp(a)?a.checked?"true":"false":a.value),a=it,a!==z?(u.setValue(a),!0):!1}function Zp(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function kf(a,u){var z=u.checked;return wh({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:z??a._wrapperState.initialChecked})}function Eg(a,u){var z=u.defaultValue==null?"":u.defaultValue,it=u.checked!=null?u.checked:u.defaultChecked;z=lh(u.value!=null?u.value:z),a._wrapperState={initialChecked:it,initialValue:z,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Gg(a,u){u=u.checked,u!=null&&dl(a,"checked",u,!1)}function Hf(a,u){Gg(a,u);var z=lh(u.value),it=u.type;if(z!=null)it==="number"?(z===0&&a.value===""||a.value!=z)&&(a.value=""+z):a.value!==""+z&&(a.value=""+z);else if(it==="submit"||it==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?fg(a,u.type,z):u.hasOwnProperty("defaultValue")&&fg(a,u.type,lh(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function Rg(a,u,z){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var it=u.type;if(!(it!=="submit"&&it!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,z||u===a.value||(a.value=u),a.defaultValue=u}z=a.name,z!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,z!==""&&(a.name=z)}function fg(a,u,z){(u!=="number"||Zp(a.ownerDocument)!==a)&&(z==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+z&&(a.defaultValue=""+z))}var eg=Array.isArray;function Wg(a,u,z,it){if(a=a.options,u){u={};for(var Pl=0;Pl<z.length;Pl++)u["$"+z[Pl]]=!0;for(z=0;z<a.length;z++)Pl=u.hasOwnProperty("$"+a[z].value),a[z].selected!==Pl&&(a[z].selected=Pl),Pl&&it&&(a[z].defaultSelected=!0)}else{for(z=""+lh(z),u=null,Pl=0;Pl<a.length;Pl++){if(a[Pl].value===z){a[Pl].selected=!0,it&&(a[Pl].defaultSelected=!0);return}u!==null||a[Pl].disabled||(u=a[Pl])}u!==null&&(u.selected=!0)}}function Lg(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(s(91));return wh({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function $g(a,u){var z=u.value;if(z==null){if(z=u.children,u=u.defaultValue,z!=null){if(u!=null)throw Error(s(92));if(eg(z)){if(1<z.length)throw Error(s(93));z=z[0]}u=z}u==null&&(u=""),z=u}a._wrapperState={initialValue:lh(z)}}function Bm(a,u){var z=lh(u.value),it=lh(u.defaultValue);z!=null&&(z=""+z,z!==a.value&&(a.value=z),u.defaultValue==null&&a.defaultValue!==z&&(a.defaultValue=z)),it!=null&&(a.defaultValue=""+it)}function Lm(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function $m(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _d(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?$m(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Zd,xh=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,z,it,Pl){MSApp.execUnsafeLocalFunction(function(){return a(u,z,it,Pl)})}:a})(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(Zd=Zd||document.createElement("div"),Zd.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Zd.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function Fp(a,u){if(u){var z=a.firstChild;if(z&&z===a.lastChild&&z.nodeType===3){z.nodeValue=u;return}}a.textContent=u}var ip={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cf=["Webkit","ms","Moz","O"];Object.keys(ip).forEach(function(a){cf.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),ip[u]=ip[a]})});function Jh(a,u,z){return u==null||typeof u=="boolean"||u===""?"":z||typeof u!="number"||u===0||ip.hasOwnProperty(a)&&ip[a]?(""+u).trim():u+"px"}function lf(a,u){a=a.style;for(var z in u)if(u.hasOwnProperty(z)){var it=z.indexOf("--")===0,Pl=Jh(z,u[z],it);z==="float"&&(z="cssFloat"),it?a.setProperty(z,Pl):a[z]=Pl}}var vf=wh({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uf(a,u){if(u){if(vf[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(s(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(s(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(s(61))}if(u.style!=null&&typeof u.style!="object")throw Error(s(62))}}function Gf(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hm=null;function Vg(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Im=null,qg=null,vm=null;function am(a){if(a=xv(a)){if(typeof Im!="function")throw Error(s(280));var u=a.stateNode;u&&(u=sy(u),Im(a.stateNode,a.type,u))}}function Jg(a){qg?vm?vm.push(a):vm=[a]:qg=a}function pf(){if(qg){var a=qg,u=vm;if(vm=qg=null,am(a),u)for(a=0;a<u.length;a++)am(u[a])}}function ff(a,u){return a(u)}function r0(){}var M0=!1;function wf(a,u,z){if(M0)return a(u,z);M0=!0;try{return ff(a,u,z)}finally{M0=!1,(qg!==null||vm!==null)&&(r0(),pf())}}function Gm(a,u){var z=a.stateNode;if(z===null)return null;var it=sy(z);if(it===null)return null;z=it[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(it=!it.disabled)||(a=a.type,it=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!it;break e;default:a=!1}if(a)return null;if(z&&typeof z!="function")throw Error(s(231,u,typeof z));return z}var h0=!1;if(oe)try{var i0={};Object.defineProperty(i0,"passive",{get:function(){h0=!0}}),window.addEventListener("test",i0,i0),window.removeEventListener("test",i0,i0)}catch{h0=!1}function Tm(a,u,z,it,Pl,Yl,ad,nh,_h){var lp=Array.prototype.slice.call(arguments,3);try{u.apply(z,lp)}catch(Xp){this.onError(Xp)}}var Vm=!1,ym=null,l0=!1,R0=null,p0={onError:function(a){Vm=!0,ym=a}};function j0(a,u,z,it,Pl,Yl,ad,nh,_h){Vm=!1,ym=null,Tm.apply(p0,arguments)}function lg(a,u,z,it,Pl,Yl,ad,nh,_h){if(j0.apply(this,arguments),Vm){if(Vm){var lp=ym;Vm=!1,ym=null}else throw Error(s(198));l0||(l0=!0,R0=lp)}}function sm(a){var u=a,z=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(z=u.return),a=u.return;while(a)}return u.tag===3?z:null}function Cg(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function S0(a){if(sm(a)!==a)throw Error(s(188))}function Kp(a){var u=a.alternate;if(!u){if(u=sm(a),u===null)throw Error(s(188));return u!==a?null:a}for(var z=a,it=u;;){var Pl=z.return;if(Pl===null)break;var Yl=Pl.alternate;if(Yl===null){if(it=Pl.return,it!==null){z=it;continue}break}if(Pl.child===Yl.child){for(Yl=Pl.child;Yl;){if(Yl===z)return S0(Pl),a;if(Yl===it)return S0(Pl),u;Yl=Yl.sibling}throw Error(s(188))}if(z.return!==it.return)z=Pl,it=Yl;else{for(var ad=!1,nh=Pl.child;nh;){if(nh===z){ad=!0,z=Pl,it=Yl;break}if(nh===it){ad=!0,it=Pl,z=Yl;break}nh=nh.sibling}if(!ad){for(nh=Yl.child;nh;){if(nh===z){ad=!0,z=Yl,it=Pl;break}if(nh===it){ad=!0,it=Yl,z=Pl;break}nh=nh.sibling}if(!ad)throw Error(s(189))}}if(z.alternate!==it)throw Error(s(190))}if(z.tag!==3)throw Error(s(188));return z.stateNode.current===z?a:u}function rt(a){return a=Kp(a),a!==null?Uu(a):null}function Uu(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=Uu(a);if(u!==null)return u;a=a.sibling}return null}var Vd=h.unstable_scheduleCallback,Eh=h.unstable_cancelCallback,ph=h.unstable_shouldYield,jp=h.unstable_requestPaint,_p=h.unstable_now,Gp=h.unstable_getCurrentPriorityLevel,of=h.unstable_ImmediatePriority,Bp=h.unstable_UserBlockingPriority,rf=h.unstable_NormalPriority,Rh=h.unstable_LowPriority,xf=h.unstable_IdlePriority,Ng=null,em=null;function Fm(a){if(em&&typeof em.onCommitFiberRoot=="function")try{em.onCommitFiberRoot(Ng,a,void 0,(a.current.flags&128)===128)}catch{}}var Vf=Math.clz32?Math.clz32:Kg,Yg=Math.log,$f=Math.LN2;function Kg(a){return a>>>=0,a===0?32:31-(Yg(a)/$f|0)|0}var If=64,Mm=4194304;function dd(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function f(a,u){var z=a.pendingLanes;if(z===0)return 0;var it=0,Pl=a.suspendedLanes,Yl=a.pingedLanes,ad=z&268435455;if(ad!==0){var nh=ad&~Pl;nh!==0?it=dd(nh):(Yl&=ad,Yl!==0&&(it=dd(Yl)))}else ad=z&~Pl,ad!==0?it=dd(ad):Yl!==0&&(it=dd(Yl));if(it===0)return 0;if(u!==0&&u!==it&&(u&Pl)===0&&(Pl=it&-it,Yl=u&-u,Pl>=Yl||Pl===16&&(Yl&4194240)!==0))return u;if((it&4)!==0&&(it|=z&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=it;0<u;)z=31-Vf(u),Pl=1<<z,it|=a[z],u&=~Pl;return it}function E(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W(a,u){for(var z=a.suspendedLanes,it=a.pingedLanes,Pl=a.expirationTimes,Yl=a.pendingLanes;0<Yl;){var ad=31-Vf(Yl),nh=1<<ad,_h=Pl[ad];_h===-1?((nh&z)===0||(nh&it)!==0)&&(Pl[ad]=E(nh,u)):_h<=u&&(a.expiredLanes|=nh),Yl&=~nh}}function Q(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yl(){var a=If;return If<<=1,(If&4194240)===0&&(If=64),a}function Ln(a){for(var u=[],z=0;31>z;z++)u.push(a);return u}function Cl(a,u,z){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-Vf(u),a[u]=z}function Al(a,u){var z=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var it=a.eventTimes;for(a=a.expirationTimes;0<z;){var Pl=31-Vf(z),Yl=1<<Pl;u[Pl]=0,it[Pl]=-1,a[Pl]=-1,z&=~Yl}}function vl(a,u){var z=a.entangledLanes|=u;for(a=a.entanglements;z;){var it=31-Vf(z),Pl=1<<it;Pl&u|a[it]&u&&(a[it]|=u),z&=~Pl}}var Fl=0;function Ol(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var mu,Xl,Wl,hu,Jl,Gu=!1,Zu=[],rd=null,wd=null,gd=null,jd=new Map,Qd=new Map,ih=[],Hl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Iu(a,u){switch(a){case"focusin":case"focusout":rd=null;break;case"dragenter":case"dragleave":wd=null;break;case"mouseover":case"mouseout":gd=null;break;case"pointerover":case"pointerout":jd.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qd.delete(u.pointerId)}}function Fd(a,u,z,it,Pl,Yl){return a===null||a.nativeEvent!==Yl?(a={blockedOn:u,domEventName:z,eventSystemFlags:it,nativeEvent:Yl,targetContainers:[Pl]},u!==null&&(u=xv(u),u!==null&&Xl(u)),a):(a.eventSystemFlags|=it,u=a.targetContainers,Pl!==null&&u.indexOf(Pl)===-1&&u.push(Pl),a)}function Ud(a,u,z,it,Pl){switch(u){case"focusin":return rd=Fd(rd,a,u,z,it,Pl),!0;case"dragenter":return wd=Fd(wd,a,u,z,it,Pl),!0;case"mouseover":return gd=Fd(gd,a,u,z,it,Pl),!0;case"pointerover":var Yl=Pl.pointerId;return jd.set(Yl,Fd(jd.get(Yl)||null,a,u,z,it,Pl)),!0;case"gotpointercapture":return Yl=Pl.pointerId,Qd.set(Yl,Fd(Qd.get(Yl)||null,a,u,z,it,Pl)),!0}return!1}function eh(a){var u=$0(a.target);if(u!==null){var z=sm(u);if(z!==null){if(u=z.tag,u===13){if(u=Cg(z),u!==null){a.blockedOn=u,Jl(a.priority,function(){Wl(z)});return}}else if(u===3&&z.stateNode.current.memoizedState.isDehydrated){a.blockedOn=z.tag===3?z.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Sh(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var z=Mh(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(z===null){z=a.nativeEvent;var it=new z.constructor(z.type,z);Hm=it,z.target.dispatchEvent(it),Hm=null}else return u=xv(z),u!==null&&Xl(u),a.blockedOn=z,!1;u.shift()}return!0}function Lh(a,u,z){Sh(a)&&z.delete(u)}function Ah(){Gu=!1,rd!==null&&Sh(rd)&&(rd=null),wd!==null&&Sh(wd)&&(wd=null),gd!==null&&Sh(gd)&&(gd=null),jd.forEach(Lh),Qd.forEach(Lh)}function yh(a,u){a.blockedOn===u&&(a.blockedOn=null,Gu||(Gu=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Ah)))}function Nh(a){function u(Pl){return yh(Pl,a)}if(0<Zu.length){yh(Zu[0],a);for(var z=1;z<Zu.length;z++){var it=Zu[z];it.blockedOn===a&&(it.blockedOn=null)}}for(rd!==null&&yh(rd,a),wd!==null&&yh(wd,a),gd!==null&&yh(gd,a),jd.forEach(u),Qd.forEach(u),z=0;z<ih.length;z++)it=ih[z],it.blockedOn===a&&(it.blockedOn=null);for(;0<ih.length&&(z=ih[0],z.blockedOn===null);)eh(z),z.blockedOn===null&&ih.shift()}var sh=Tl.ReactCurrentBatchConfig,Th=!0;function dp(a,u,z,it){var Pl=Fl,Yl=sh.transition;sh.transition=null;try{Fl=1,ap(a,u,z,it)}finally{Fl=Pl,sh.transition=Yl}}function $h(a,u,z,it){var Pl=Fl,Yl=sh.transition;sh.transition=null;try{Fl=4,ap(a,u,z,it)}finally{Fl=Pl,sh.transition=Yl}}function ap(a,u,z,it){if(Th){var Pl=Mh(a,u,z,it);if(Pl===null)ry(a,u,it,Yh,z),Iu(a,it);else if(Ud(Pl,a,u,z,it))it.stopPropagation();else if(Iu(a,it),u&4&&-1<Hl.indexOf(a)){for(;Pl!==null;){var Yl=xv(Pl);if(Yl!==null&&mu(Yl),Yl=Mh(a,u,z,it),Yl===null&&ry(a,u,it,Yh,z),Yl===Pl)break;Pl=Yl}Pl!==null&&it.stopPropagation()}else ry(a,u,it,null,z)}}var Yh=null;function Mh(a,u,z,it){if(Yh=null,a=Vg(it),a=$0(a),a!==null)if(u=sm(a),u===null)a=null;else if(z=u.tag,z===13){if(a=Cg(u),a!==null)return a;a=null}else if(z===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return Yh=a,null}function pp(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gp()){case of:return 1;case Bp:return 4;case rf:case Rh:return 16;case xf:return 536870912;default:return 16}default:return 16}}var Ip=null,gp=null,Xh=null;function Qp(){if(Xh)return Xh;var a,u=gp,z=u.length,it,Pl="value"in Ip?Ip.value:Ip.textContent,Yl=Pl.length;for(a=0;a<z&&u[a]===Pl[a];a++);var ad=z-a;for(it=1;it<=ad&&u[z-it]===Pl[Yl-it];it++);return Xh=Pl.slice(a,1<it?1-it:void 0)}function Wp(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function $p(){return!0}function Hp(){return!1}function Vp(a){function u(z,it,Pl,Yl,ad){this._reactName=z,this._targetInst=Pl,this.type=it,this.nativeEvent=Yl,this.target=ad,this.currentTarget=null;for(var nh in a)a.hasOwnProperty(nh)&&(z=a[nh],this[nh]=z?z(Yl):Yl[nh]);return this.isDefaultPrevented=(Yl.defaultPrevented!=null?Yl.defaultPrevented:Yl.returnValue===!1)?$p:Hp,this.isPropagationStopped=Hp,this}return wh(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var z=this.nativeEvent;z&&(z.preventDefault?z.preventDefault():typeof z.returnValue!="unknown"&&(z.returnValue=!1),this.isDefaultPrevented=$p)},stopPropagation:function(){var z=this.nativeEvent;z&&(z.stopPropagation?z.stopPropagation():typeof z.cancelBubble!="unknown"&&(z.cancelBubble=!0),this.isPropagationStopped=$p)},persist:function(){},isPersistent:$p}),u}var Op={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jp=Vp(Op),Df=wh({},Op,{view:0,detail:0}),tm=Vp(Df),og,tg,Zf,Xf=wh({},Df,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Zf&&(Zf&&a.type==="mousemove"?(og=a.screenX-Zf.screenX,tg=a.screenY-Zf.screenY):tg=og=0,Zf=a),og)},movementY:function(a){return"movementY"in a?a.movementY:tg}}),Nf=Vp(Xf),ag=wh({},Xf,{dataTransfer:0}),vg=Vp(ag),Pg=wh({},Df,{relatedTarget:0}),cg=Vp(Pg),kg=wh({},Op,{animationName:0,elapsedTime:0,pseudoElement:0}),Bf=Vp(kg),Tg=wh({},Op,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),gg=Vp(Tg),ve=wh({},Op,{data:0}),zu=Vp(ve),el={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Md(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Od[a])?!!u[a]:!1}function jh(){return Md}var ch=wh({},Df,{key:function(a){if(a.key){var u=el[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=Wp(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Bd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jh,charCode:function(a){return a.type==="keypress"?Wp(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Wp(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Dp=Vp(ch),Ch=wh({},Xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tp=Vp(Ch),bg=wh({},Df,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jh}),Ff=Vp(bg),zp=wh({},Op,{propertyName:0,elapsedTime:0,pseudoElement:0}),Om=Vp(zp),Zg=wh({},Xf,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Qf=Vp(Zg),hm=[9,13,27,32],mg=oe&&"CompositionEvent"in window,Np=null;oe&&"documentMode"in document&&(Np=document.documentMode);var jf=oe&&"TextEvent"in window&&!Np,rm=oe&&(!mg||Np&&8<Np&&11>=Np),Sf=" ",lm=!1;function Sg(a,u){switch(a){case"keyup":return hm.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pg(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Bg=!1;function v0(a,u){switch(a){case"compositionend":return pg(u);case"keypress":return u.which!==32?null:(lm=!0,Sf);case"textInput":return a=u.data,a===Sf&&lm?null:a;default:return null}}function nv(a,u){if(Bg)return a==="compositionend"||!mg&&Sg(a,u)?(a=Qp(),Xh=gp=Ip=null,Bg=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return rm&&u.locale!=="ko"?null:u.data;default:return null}}var Cm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _v(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!Cm[a.type]:u==="textarea"}function ov(a,u,z,it){Jg(it),u=iy(u,"onChange"),0<u.length&&(z=new Jp("onChange","change",null,z,it),a.push({event:z,listeners:u}))}var H0=null,av=null;function Ly(a){j2(a,0)}function zv(a){var u=Rv(a);if(mf(u))return a}function S1(a,u){if(a==="change")return u}var Ev=!1;if(oe){var Iy;if(oe){var h1="oninput"in document;if(!h1){var W1=document.createElement("div");W1.setAttribute("oninput","return;"),h1=typeof W1.oninput=="function"}Iy=h1}else Iy=!1;Ev=Iy&&(!document.documentMode||9<document.documentMode)}function _0(){H0&&(H0.detachEvent("onpropertychange",sv),av=H0=null)}function sv(a){if(a.propertyName==="value"&&zv(av)){var u=[];ov(u,av,a,Vg(a)),wf(Ly,u)}}function g2(a,u,z){a==="focusin"?(_0(),H0=u,av=z,H0.attachEvent("onpropertychange",sv)):a==="focusout"&&_0()}function k0(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return zv(av)}function e1(a,u){if(a==="click")return zv(u)}function Oy(a,u){if(a==="input"||a==="change")return zv(u)}function m2(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var lv=typeof Object.is=="function"?Object.is:m2;function $1(a,u){if(lv(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var z=Object.keys(a),it=Object.keys(u);if(z.length!==it.length)return!1;for(it=0;it<z.length;it++){var Pl=z[it];if(!Y.call(u,Pl)||!lv(a[Pl],u[Pl]))return!1}return!0}function v2(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function q1(a,u){var z=v2(a);a=0;for(var it;z;){if(z.nodeType===3){if(it=a+z.textContent.length,a<=u&&it>=u)return{node:z,offset:u-a};a=it}e:{for(;z;){if(z.nextSibling){z=z.nextSibling;break e}z=z.parentNode}z=void 0}z=v2(z)}}function Q0(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?Q0(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function p1(){for(var a=window,u=Zp();u instanceof a.HTMLIFrameElement;){try{var z=typeof u.contentWindow.location.href=="string"}catch{z=!1}if(z)a=u.contentWindow;else break;u=Zp(a.document)}return u}function _1(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function zy(a){var u=p1(),z=a.focusedElem,it=a.selectionRange;if(u!==z&&z&&z.ownerDocument&&Q0(z.ownerDocument.documentElement,z)){if(it!==null&&_1(z)){if(u=it.start,a=it.end,a===void 0&&(a=u),"selectionStart"in z)z.selectionStart=u,z.selectionEnd=Math.min(a,z.value.length);else if(a=(u=z.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var Pl=z.textContent.length,Yl=Math.min(it.start,Pl);it=it.end===void 0?Yl:Math.min(it.end,Pl),!a.extend&&Yl>it&&(Pl=it,it=Yl,Yl=Pl),Pl=q1(z,Yl);var ad=q1(z,it);Pl&&ad&&(a.rangeCount!==1||a.anchorNode!==Pl.node||a.anchorOffset!==Pl.offset||a.focusNode!==ad.node||a.focusOffset!==ad.offset)&&(u=u.createRange(),u.setStart(Pl.node,Pl.offset),a.removeAllRanges(),Yl>it?(a.addRange(u),a.extend(ad.node,ad.offset)):(u.setEnd(ad.node,ad.offset),a.addRange(u)))}}for(u=[],a=z;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<u.length;z++)a=u[z],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var E3=oe&&"documentMode"in document&&11>=document.documentMode,E1=null,U0=null,A1=null,y2=!1;function t1(a,u,z){var it=z.window===z?z.document:z.nodeType===9?z:z.ownerDocument;y2||E1==null||E1!==Zp(it)||(it=E1,"selectionStart"in it&&_1(it)?it={start:it.selectionStart,end:it.selectionEnd}:(it=(it.ownerDocument&&it.ownerDocument.defaultView||window).getSelection(),it={anchorNode:it.anchorNode,anchorOffset:it.anchorOffset,focusNode:it.focusNode,focusOffset:it.focusOffset}),A1&&$1(A1,it)||(A1=it,it=iy(U0,"onSelect"),0<it.length&&(u=new Jp("onSelect","select",null,u,z),a.push({event:u,listeners:it}),u.target=E1)))}function f1(a,u){var z={};return z[a.toLowerCase()]=u.toLowerCase(),z["Webkit"+a]="webkit"+u,z["Moz"+a]="moz"+u,z}var Nv={animationend:f1("Animation","AnimationEnd"),animationiteration:f1("Animation","AnimationIteration"),animationstart:f1("Animation","AnimationStart"),transitionend:f1("Transition","TransitionEnd")},Y1={},K1={};oe&&(K1=document.createElement("div").style,"AnimationEvent"in window||(delete Nv.animationend.animation,delete Nv.animationiteration.animation,delete Nv.animationstart.animation),"TransitionEvent"in window||delete Nv.transitionend.transition);function M1(a){if(Y1[a])return Y1[a];if(!Nv[a])return a;var u=Nv[a],z;for(z in u)if(u.hasOwnProperty(z)&&z in K1)return Y1[a]=u[z];return a}var Z1=M1("animationend"),X1=M1("animationiteration"),Q1=M1("animationstart"),Ny=M1("transitionend"),mv=new Map,x2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function r1(a,u){mv.set(a,u),$(u,[a])}for(var J1=0;J1<x2.length;J1++){var By=x2[J1],Av=By.toLowerCase(),w2=By[0].toUpperCase()+By.slice(1);r1(Av,"on"+w2)}r1(Z1,"onAnimationEnd"),r1(X1,"onAnimationIteration"),r1(Q1,"onAnimationStart"),r1("dblclick","onDoubleClick"),r1("focusin","onFocus"),r1("focusout","onBlur"),r1(Ny,"onTransitionEnd"),V("onMouseEnter",["mouseout","mouseover"]),V("onMouseLeave",["mouseout","mouseover"]),V("onPointerEnter",["pointerout","pointerover"]),V("onPointerLeave",["pointerout","pointerover"]),$("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$("onBeforeInput",["compositionend","keypress","textInput","paste"]),$("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var i1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A3=new Set("cancel close invalid load scroll toggle".split(" ").concat(i1));function V2(a,u,z){var it=a.type||"unknown-event";a.currentTarget=z,lg(it,u,void 0,a),a.currentTarget=null}function j2(a,u){u=(u&4)!==0;for(var z=0;z<a.length;z++){var it=a[z],Pl=it.event;it=it.listeners;e:{var Yl=void 0;if(u)for(var ad=it.length-1;0<=ad;ad--){var nh=it[ad],_h=nh.instance,lp=nh.currentTarget;if(nh=nh.listener,_h!==Yl&&Pl.isPropagationStopped())break e;V2(Pl,nh,lp),Yl=_h}else for(ad=0;ad<it.length;ad++){if(nh=it[ad],_h=nh.instance,lp=nh.currentTarget,nh=nh.listener,_h!==Yl&&Pl.isPropagationStopped())break e;V2(Pl,nh,lp),Yl=_h}}}if(l0)throw a=R0,l0=!1,R0=null,a}function Qm(a,u){var z=u[np];z===void 0&&(z=u[np]=new Set);var it=a+"__bubble";z.has(it)||(C2(u,a,2,!1),z.add(it))}function Hy(a,u,z){var it=0;u&&(it|=4),C2(z,a,it,u)}var ey="_reactListening"+Math.random().toString(36).slice(2);function ty(a){if(!a[ey]){a[ey]=!0,_.forEach(function(z){z!=="selectionchange"&&(A3.has(z)||Hy(z,!1,a),Hy(z,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[ey]||(u[ey]=!0,Hy("selectionchange",!1,u))}}function C2(a,u,z,it){switch(pp(u)){case 1:var Pl=dp;break;case 4:Pl=$h;break;default:Pl=ap}z=Pl.bind(null,u,z,a),Pl=void 0,!h0||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(Pl=!0),it?Pl!==void 0?a.addEventListener(u,z,{capture:!0,passive:Pl}):a.addEventListener(u,z,!0):Pl!==void 0?a.addEventListener(u,z,{passive:Pl}):a.addEventListener(u,z,!1)}function ry(a,u,z,it,Pl){var Yl=it;if((u&1)===0&&(u&2)===0&&it!==null)e:for(;;){if(it===null)return;var ad=it.tag;if(ad===3||ad===4){var nh=it.stateNode.containerInfo;if(nh===Pl||nh.nodeType===8&&nh.parentNode===Pl)break;if(ad===4)for(ad=it.return;ad!==null;){var _h=ad.tag;if((_h===3||_h===4)&&(_h=ad.stateNode.containerInfo,_h===Pl||_h.nodeType===8&&_h.parentNode===Pl))return;ad=ad.return}for(;nh!==null;){if(ad=$0(nh),ad===null)return;if(_h=ad.tag,_h===5||_h===6){it=Yl=ad;continue e}nh=nh.parentNode}}it=it.return}wf(function(){var lp=Yl,Xp=Vg(z),ef=[];e:{var Yp=mv.get(a);if(Yp!==void 0){var zf=Jp,qf=a;switch(a){case"keypress":if(Wp(z)===0)break e;case"keydown":case"keyup":zf=Dp;break;case"focusin":qf="focus",zf=cg;break;case"focusout":qf="blur",zf=cg;break;case"beforeblur":case"afterblur":zf=cg;break;case"click":if(z.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":zf=Nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":zf=vg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":zf=Ff;break;case Z1:case X1:case Q1:zf=Bf;break;case Ny:zf=Om;break;case"scroll":zf=tm;break;case"wheel":zf=Qf;break;case"copy":case"cut":case"paste":zf=gg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":zf=tp}var Kf=(u&4)!==0,u0=!Kf&&a==="scroll",Qh=Kf?Yp!==null?Yp+"Capture":null:Yp;Kf=[];for(var Oh=lp,op;Oh!==null;){op=Oh;var df=op.stateNode;if(op.tag===5&&df!==null&&(op=df,Qh!==null&&(df=Gm(Oh,Qh),df!=null&&Kf.push(R1(Oh,df,op)))),u0)break;Oh=Oh.return}0<Kf.length&&(Yp=new zf(Yp,qf,null,z,Xp),ef.push({event:Yp,listeners:Kf}))}}if((u&7)===0){e:{if(Yp=a==="mouseover"||a==="pointerover",zf=a==="mouseout"||a==="pointerout",Yp&&z!==Hm&&(qf=z.relatedTarget||z.fromElement)&&($0(qf)||qf[yv]))break e;if((zf||Yp)&&(Yp=Xp.window===Xp?Xp:(Yp=Xp.ownerDocument)?Yp.defaultView||Yp.parentWindow:window,zf?(qf=z.relatedTarget||z.toElement,zf=lp,qf=qf?$0(qf):null,qf!==null&&(u0=sm(qf),qf!==u0||qf.tag!==5&&qf.tag!==6)&&(qf=null)):(zf=null,qf=lp),zf!==qf)){if(Kf=Nf,df="onMouseLeave",Qh="onMouseEnter",Oh="mouse",(a==="pointerout"||a==="pointerover")&&(Kf=tp,df="onPointerLeave",Qh="onPointerEnter",Oh="pointer"),u0=zf==null?Yp:Rv(zf),op=qf==null?Yp:Rv(qf),Yp=new Kf(df,Oh+"leave",zf,z,Xp),Yp.target=u0,Yp.relatedTarget=op,df=null,$0(Xp)===lp&&(Kf=new Kf(Qh,Oh+"enter",qf,z,Xp),Kf.target=op,Kf.relatedTarget=u0,df=Kf),u0=df,zf&&qf)t:{for(Kf=zf,Qh=qf,Oh=0,op=Kf;op;op=W0(op))Oh++;for(op=0,df=Qh;df;df=W0(df))op++;for(;0<Oh-op;)Kf=W0(Kf),Oh--;for(;0<op-Oh;)Qh=W0(Qh),op--;for(;Oh--;){if(Kf===Qh||Qh!==null&&Kf===Qh.alternate)break t;Kf=W0(Kf),Qh=W0(Qh)}Kf=null}else Kf=null;zf!==null&&U2(ef,Yp,zf,Kf,!1),qf!==null&&u0!==null&&U2(ef,u0,qf,Kf,!0)}}e:{if(Yp=lp?Rv(lp):window,zf=Yp.nodeName&&Yp.nodeName.toLowerCase(),zf==="select"||zf==="input"&&Yp.type==="file")var Yf=S1;else if(_v(Yp))if(Ev)Yf=Oy;else{Yf=k0;var dg=g2}else(zf=Yp.nodeName)&&zf.toLowerCase()==="input"&&(Yp.type==="checkbox"||Yp.type==="radio")&&(Yf=e1);if(Yf&&(Yf=Yf(a,lp))){ov(ef,Yf,z,Xp);break e}dg&&dg(a,Yp,lp),a==="focusout"&&(dg=Yp._wrapperState)&&dg.controlled&&Yp.type==="number"&&fg(Yp,"number",Yp.value)}switch(dg=lp?Rv(lp):window,a){case"focusin":(_v(dg)||dg.contentEditable==="true")&&(E1=dg,U0=lp,A1=null);break;case"focusout":A1=U0=E1=null;break;case"mousedown":y2=!0;break;case"contextmenu":case"mouseup":case"dragend":y2=!1,t1(ef,z,Xp);break;case"selectionchange":if(E3)break;case"keydown":case"keyup":t1(ef,z,Xp)}var ig;if(mg)e:{switch(a){case"compositionstart":var Dg="onCompositionStart";break e;case"compositionend":Dg="onCompositionEnd";break e;case"compositionupdate":Dg="onCompositionUpdate";break e}Dg=void 0}else Bg?Sg(a,z)&&(Dg="onCompositionEnd"):a==="keydown"&&z.keyCode===229&&(Dg="onCompositionStart");Dg&&(rm&&z.locale!=="ko"&&(Bg||Dg!=="onCompositionStart"?Dg==="onCompositionEnd"&&Bg&&(ig=Qp()):(Ip=Xp,gp="value"in Ip?Ip.value:Ip.textContent,Bg=!0)),dg=iy(lp,Dg),0<dg.length&&(Dg=new zu(Dg,a,null,z,Xp),ef.push({event:Dg,listeners:dg}),ig?Dg.data=ig:(ig=pg(z),ig!==null&&(Dg.data=ig)))),(ig=jf?v0(a,z):nv(a,z))&&(lp=iy(lp,"onBeforeInput"),0<lp.length&&(Xp=new zu("onBeforeInput","beforeinput",null,z,Xp),ef.push({event:Xp,listeners:lp}),Xp.data=ig))}j2(ef,u)})}function R1(a,u,z){return{instance:a,listener:u,currentTarget:z}}function iy(a,u){for(var z=u+"Capture",it=[];a!==null;){var Pl=a,Yl=Pl.stateNode;Pl.tag===5&&Yl!==null&&(Pl=Yl,Yl=Gm(a,z),Yl!=null&&it.unshift(R1(a,Yl,Pl)),Yl=Gm(a,u),Yl!=null&&it.push(R1(a,Yl,Pl))),a=a.return}return it}function W0(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function U2(a,u,z,it,Pl){for(var Yl=u._reactName,ad=[];z!==null&&z!==it;){var nh=z,_h=nh.alternate,lp=nh.stateNode;if(_h!==null&&_h===it)break;nh.tag===5&&lp!==null&&(nh=lp,Pl?(_h=Gm(z,Yl),_h!=null&&ad.unshift(R1(z,_h,nh))):Pl||(_h=Gm(z,Yl),_h!=null&&ad.push(R1(z,_h,nh)))),z=z.return}ad.length!==0&&a.push({event:u,listeners:ad})}var Cf=/\r\n?/g,cm=/\u0000|\uFFFD/g;function b2(a){return(typeof a=="string"?a:""+a).replace(Cf,`
`).replace(cm,"")}function ny(a,u,z){if(u=b2(u),b2(a)!==u&&z)throw Error(s(425))}function oy(){}var D0=null,S2=null;function Gy(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var J0=typeof setTimeout=="function"?setTimeout:void 0,ay=typeof clearTimeout=="function"?clearTimeout:void 0,W2=typeof Promise=="function"?Promise:void 0,Vy=typeof queueMicrotask=="function"?queueMicrotask:typeof W2<"u"?function(a){return W2.resolve(null).then(a).catch($2)}:J0;function $2(a){setTimeout(function(){throw a})}function _2(a,u){var z=u,it=0;do{var Pl=z.nextSibling;if(a.removeChild(z),Pl&&Pl.nodeType===8)if(z=Pl.data,z==="/$"){if(it===0){a.removeChild(Pl),Nh(u);return}it--}else z!=="$"&&z!=="$?"&&z!=="$!"||it++;z=Pl}while(z);Nh(u)}function vv(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function q2(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var z=a.data;if(z==="$"||z==="$!"||z==="$?"){if(u===0)return a;u--}else z==="/$"&&u++}a=a.previousSibling}return null}var k1=Math.random().toString(36).slice(2),Mv="__reactFiber$"+k1,T1="__reactProps$"+k1,yv="__reactContainer$"+k1,np="__reactEvents$"+k1,Y2="__reactListeners$"+k1,E2="__reactHandles$"+k1;function $0(a){var u=a[Mv];if(u)return u;for(var z=a.parentNode;z;){if(u=z[yv]||z[Mv]){if(z=u.alternate,u.child!==null||z!==null&&z.child!==null)for(a=q2(a);a!==null;){if(z=a[Mv])return z;a=q2(a)}return u}a=z,z=a.parentNode}return null}function xv(a){return a=a[Mv]||a[yv],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Rv(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(s(33))}function sy(a){return a[T1]||null}var A2=[],F1=-1;function Bv(a){return{current:a}}function jm(a){0>F1||(a.current=A2[F1],A2[F1]=null,F1--)}function qm(a,u){F1++,A2[F1]=a.current,a.current=u}var q0={},L0=Bv(q0),I0=Bv(!1),Hv=q0;function g1(a,u){var z=a.type.contextTypes;if(!z)return q0;var it=a.stateNode;if(it&&it.__reactInternalMemoizedUnmaskedChildContext===u)return it.__reactInternalMemoizedMaskedChildContext;var Pl={},Yl;for(Yl in z)Pl[Yl]=u[Yl];return it&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=Pl),Pl}function T0(a){return a=a.childContextTypes,a!=null}function F0(){jm(I0),jm(L0)}function K2(a,u,z){if(L0.current!==q0)throw Error(s(168));qm(L0,u),qm(I0,z)}function Z2(a,u,z){var it=a.stateNode;if(u=u.childContextTypes,typeof it.getChildContext!="function")return z;it=it.getChildContext();for(var Pl in it)if(!(Pl in u))throw Error(s(108,rp(a)||"Unknown",Pl));return wh({},z,it)}function jy(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||q0,Hv=L0.current,qm(L0,a),qm(I0,I0.current),!0}function X2(a,u,z){var it=a.stateNode;if(!it)throw Error(s(169));z?(a=Z2(a,u,Hv),it.__reactInternalMemoizedMergedChildContext=a,jm(I0),jm(L0),qm(L0,a)):jm(I0),qm(I0,z)}var cv=null,ly=!1,M2=!1;function Q2(a){cv===null?cv=[a]:cv.push(a)}function J2(a){ly=!0,Q2(a)}function n1(){if(!M2&&cv!==null){M2=!0;var a=0,u=Fl;try{var z=cv;for(Fl=1;a<z.length;a++){var it=z[a];do it=it(!0);while(it!==null)}cv=null,ly=!1}catch(Pl){throw cv!==null&&(cv=cv.slice(a+1)),Vd(of,n1),Pl}finally{Fl=u,M2=!1}}return null}var o1=[],P1=0,m1=null,Uy=0,ev=[],uv=0,v1=null,Gv=1,Vv="";function y1(a,u){o1[P1++]=Uy,o1[P1++]=m1,m1=a,Uy=u}function e3(a,u,z){ev[uv++]=Gv,ev[uv++]=Vv,ev[uv++]=v1,v1=a;var it=Gv;a=Vv;var Pl=32-Vf(it)-1;it&=~(1<<Pl),z+=1;var Yl=32-Vf(u)+Pl;if(30<Yl){var ad=Pl-Pl%5;Yl=(it&(1<<ad)-1).toString(32),it>>=ad,Pl-=ad,Gv=1<<32-Vf(u)+Pl|z<<Pl|it,Vv=Yl+a}else Gv=1<<Yl|z<<Pl|it,Vv=a}function cy(a){a.return!==null&&(y1(a,1),e3(a,1,0))}function a1(a){for(;a===m1;)m1=o1[--P1],o1[P1]=null,Uy=o1[--P1],o1[P1]=null;for(;a===v1;)v1=ev[--uv],ev[uv]=null,Vv=ev[--uv],ev[uv]=null,Gv=ev[--uv],ev[uv]=null}var O0=null,c0=null,Jm=!1,dv=null;function R2(a,u){var z=G0(5,null,null,0);z.elementType="DELETED",z.stateNode=u,z.return=a,u=a.deletions,u===null?(a.deletions=[z],a.flags|=16):u.push(z)}function k2(a,u){switch(a.tag){case 5:var z=a.type;return u=u.nodeType!==1||z.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,O0=a,c0=vv(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,O0=a,c0=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(z=v1!==null?{id:Gv,overflow:Vv}:null,a.memoizedState={dehydrated:u,treeContext:z,retryLane:1073741824},z=G0(18,null,null,0),z.stateNode=u,z.return=a,a.child=z,O0=a,c0=null,!0):!1;default:return!1}}function uy(a){return(a.mode&1)!==0&&(a.flags&128)===0}function D1(a){if(Jm){var u=c0;if(u){var z=u;if(!k2(a,u)){if(uy(a))throw Error(s(418));u=vv(z.nextSibling);var it=O0;u&&k2(a,u)?R2(it,z):(a.flags=a.flags&-4097|2,Jm=!1,O0=a)}}else{if(uy(a))throw Error(s(418));a.flags=a.flags&-4097|2,Jm=!1,O0=a}}}function L1(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;O0=a}function I1(a){if(a!==O0)return!1;if(!Jm)return L1(a),Jm=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!Gy(a.type,a.memoizedProps)),u&&(u=c0)){if(uy(a))throw T2(),Error(s(418));for(;u;)R2(a,u),u=vv(u.nextSibling)}if(L1(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var z=a.data;if(z==="/$"){if(u===0){c0=vv(a.nextSibling);break e}u--}else z!=="$"&&z!=="$!"&&z!=="$?"||u++}a=a.nextSibling}c0=null}}else c0=O0?vv(a.stateNode.nextSibling):null;return!0}function T2(){for(var a=c0;a;)a=vv(a.nextSibling)}function jv(){c0=O0=null,Jm=!1}function Wy(a){dv===null?dv=[a]:dv.push(a)}var dy=Tl.ReactCurrentBatchConfig;function O1(a,u,z){if(a=z.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(z._owner){if(z=z._owner,z){if(z.tag!==1)throw Error(s(309));var it=z.stateNode}if(!it)throw Error(s(147,a));var Pl=it,Yl=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===Yl?u.ref:(u=function(ad){var nh=Pl.refs;ad===null?delete nh[Yl]:nh[Yl]=ad},u._stringRef=Yl,u)}if(typeof a!="string")throw Error(s(284));if(!z._owner)throw Error(s(290,a))}return a}function x1(a,u){throw a=Object.prototype.toString.call(u),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function $y(a){var u=a._init;return u(a._payload)}function qy(a){function u(Qh,Oh){if(a){var op=Qh.deletions;op===null?(Qh.deletions=[Oh],Qh.flags|=16):op.push(Oh)}}function z(Qh,Oh){if(!a)return null;for(;Oh!==null;)u(Qh,Oh),Oh=Oh.sibling;return null}function it(Qh,Oh){for(Qh=new Map;Oh!==null;)Oh.key!==null?Qh.set(Oh.key,Oh):Qh.set(Oh.index,Oh),Oh=Oh.sibling;return Qh}function Pl(Qh,Oh){return Qh=Kv(Qh,Oh),Qh.index=0,Qh.sibling=null,Qh}function Yl(Qh,Oh,op){return Qh.index=op,a?(op=Qh.alternate,op!==null?(op=op.index,op<Oh?(Qh.flags|=2,Oh):op):(Qh.flags|=2,Oh)):(Qh.flags|=1048576,Oh)}function ad(Qh){return a&&Qh.alternate===null&&(Qh.flags|=2),Qh}function nh(Qh,Oh,op,df){return Oh===null||Oh.tag!==6?(Oh=G1(op,Qh.mode,df),Oh.return=Qh,Oh):(Oh=Pl(Oh,op),Oh.return=Qh,Oh)}function _h(Qh,Oh,op,df){var Yf=op.type;return Yf===Pu?Xp(Qh,Oh,op.props.children,df,op.key):Oh!==null&&(Oh.elementType===Yf||typeof Yf=="object"&&Yf!==null&&Yf.$$typeof===Nl&&$y(Yf)===Oh.type)?(df=Pl(Oh,op.props),df.ref=O1(Qh,Oh,op),df.return=Qh,df):(df=b1(op.type,op.key,op.props,null,Qh.mode,df),df.ref=O1(Qh,Oh,op),df.return=Qh,df)}function lp(Qh,Oh,op,df){return Oh===null||Oh.tag!==4||Oh.stateNode.containerInfo!==op.containerInfo||Oh.stateNode.implementation!==op.implementation?(Oh=Sy(op,Qh.mode,df),Oh.return=Qh,Oh):(Oh=Pl(Oh,op.children||[]),Oh.return=Qh,Oh)}function Xp(Qh,Oh,op,df,Yf){return Oh===null||Oh.tag!==7?(Oh=Zv(op,Qh.mode,df,Yf),Oh.return=Qh,Oh):(Oh=Pl(Oh,op),Oh.return=Qh,Oh)}function ef(Qh,Oh,op){if(typeof Oh=="string"&&Oh!==""||typeof Oh=="number")return Oh=G1(""+Oh,Qh.mode,op),Oh.return=Qh,Oh;if(typeof Oh=="object"&&Oh!==null){switch(Oh.$$typeof){case $l:return op=b1(Oh.type,Oh.key,Oh.props,null,Qh.mode,op),op.ref=O1(Qh,null,Oh),op.return=Qh,op;case Bl:return Oh=Sy(Oh,Qh.mode,op),Oh.return=Qh,Oh;case Nl:var df=Oh._init;return ef(Qh,df(Oh._payload),op)}if(eg(Oh)||Bu(Oh))return Oh=Zv(Oh,Qh.mode,op,null),Oh.return=Qh,Oh;x1(Qh,Oh)}return null}function Yp(Qh,Oh,op,df){var Yf=Oh!==null?Oh.key:null;if(typeof op=="string"&&op!==""||typeof op=="number")return Yf!==null?null:nh(Qh,Oh,""+op,df);if(typeof op=="object"&&op!==null){switch(op.$$typeof){case $l:return op.key===Yf?_h(Qh,Oh,op,df):null;case Bl:return op.key===Yf?lp(Qh,Oh,op,df):null;case Nl:return Yf=op._init,Yp(Qh,Oh,Yf(op._payload),df)}if(eg(op)||Bu(op))return Yf!==null?null:Xp(Qh,Oh,op,df,null);x1(Qh,op)}return null}function zf(Qh,Oh,op,df,Yf){if(typeof df=="string"&&df!==""||typeof df=="number")return Qh=Qh.get(op)||null,nh(Oh,Qh,""+df,Yf);if(typeof df=="object"&&df!==null){switch(df.$$typeof){case $l:return Qh=Qh.get(df.key===null?op:df.key)||null,_h(Oh,Qh,df,Yf);case Bl:return Qh=Qh.get(df.key===null?op:df.key)||null,lp(Oh,Qh,df,Yf);case Nl:var dg=df._init;return zf(Qh,Oh,op,dg(df._payload),Yf)}if(eg(df)||Bu(df))return Qh=Qh.get(op)||null,Xp(Oh,Qh,df,Yf,null);x1(Oh,df)}return null}function qf(Qh,Oh,op,df){for(var Yf=null,dg=null,ig=Oh,Dg=Oh=0,A0=null;ig!==null&&Dg<op.length;Dg++){ig.index>Dg?(A0=ig,ig=null):A0=ig.sibling;var Pm=Yp(Qh,ig,op[Dg],df);if(Pm===null){ig===null&&(ig=A0);break}a&&ig&&Pm.alternate===null&&u(Qh,ig),Oh=Yl(Pm,Oh,Dg),dg===null?Yf=Pm:dg.sibling=Pm,dg=Pm,ig=A0}if(Dg===op.length)return z(Qh,ig),Jm&&y1(Qh,Dg),Yf;if(ig===null){for(;Dg<op.length;Dg++)ig=ef(Qh,op[Dg],df),ig!==null&&(Oh=Yl(ig,Oh,Dg),dg===null?Yf=ig:dg.sibling=ig,dg=ig);return Jm&&y1(Qh,Dg),Yf}for(ig=it(Qh,ig);Dg<op.length;Dg++)A0=zf(ig,Qh,Dg,op[Dg],df),A0!==null&&(a&&A0.alternate!==null&&ig.delete(A0.key===null?Dg:A0.key),Oh=Yl(A0,Oh,Dg),dg===null?Yf=A0:dg.sibling=A0,dg=A0);return a&&ig.forEach(function(c1){return u(Qh,c1)}),Jm&&y1(Qh,Dg),Yf}function Kf(Qh,Oh,op,df){var Yf=Bu(op);if(typeof Yf!="function")throw Error(s(150));if(op=Yf.call(op),op==null)throw Error(s(151));for(var dg=Yf=null,ig=Oh,Dg=Oh=0,A0=null,Pm=op.next();ig!==null&&!Pm.done;Dg++,Pm=op.next()){ig.index>Dg?(A0=ig,ig=null):A0=ig.sibling;var c1=Yp(Qh,ig,Pm.value,df);if(c1===null){ig===null&&(ig=A0);break}a&&ig&&c1.alternate===null&&u(Qh,ig),Oh=Yl(c1,Oh,Dg),dg===null?Yf=c1:dg.sibling=c1,dg=c1,ig=A0}if(Pm.done)return z(Qh,ig),Jm&&y1(Qh,Dg),Yf;if(ig===null){for(;!Pm.done;Dg++,Pm=op.next())Pm=ef(Qh,Pm.value,df),Pm!==null&&(Oh=Yl(Pm,Oh,Dg),dg===null?Yf=Pm:dg.sibling=Pm,dg=Pm);return Jm&&y1(Qh,Dg),Yf}for(ig=it(Qh,ig);!Pm.done;Dg++,Pm=op.next())Pm=zf(ig,Qh,Dg,Pm.value,df),Pm!==null&&(a&&Pm.alternate!==null&&ig.delete(Pm.key===null?Dg:Pm.key),Oh=Yl(Pm,Oh,Dg),dg===null?Yf=Pm:dg.sibling=Pm,dg=Pm);return a&&ig.forEach(function(Xv){return u(Qh,Xv)}),Jm&&y1(Qh,Dg),Yf}function u0(Qh,Oh,op,df){if(typeof op=="object"&&op!==null&&op.type===Pu&&op.key===null&&(op=op.props.children),typeof op=="object"&&op!==null){switch(op.$$typeof){case $l:e:{for(var Yf=op.key,dg=Oh;dg!==null;){if(dg.key===Yf){if(Yf=op.type,Yf===Pu){if(dg.tag===7){z(Qh,dg.sibling),Oh=Pl(dg,op.props.children),Oh.return=Qh,Qh=Oh;break e}}else if(dg.elementType===Yf||typeof Yf=="object"&&Yf!==null&&Yf.$$typeof===Nl&&$y(Yf)===dg.type){z(Qh,dg.sibling),Oh=Pl(dg,op.props),Oh.ref=O1(Qh,dg,op),Oh.return=Qh,Qh=Oh;break e}z(Qh,dg);break}else u(Qh,dg);dg=dg.sibling}op.type===Pu?(Oh=Zv(op.props.children,Qh.mode,df,op.key),Oh.return=Qh,Qh=Oh):(df=b1(op.type,op.key,op.props,null,Qh.mode,df),df.ref=O1(Qh,Oh,op),df.return=Qh,Qh=df)}return ad(Qh);case Bl:e:{for(dg=op.key;Oh!==null;){if(Oh.key===dg)if(Oh.tag===4&&Oh.stateNode.containerInfo===op.containerInfo&&Oh.stateNode.implementation===op.implementation){z(Qh,Oh.sibling),Oh=Pl(Oh,op.children||[]),Oh.return=Qh,Qh=Oh;break e}else{z(Qh,Oh);break}else u(Qh,Oh);Oh=Oh.sibling}Oh=Sy(op,Qh.mode,df),Oh.return=Qh,Qh=Oh}return ad(Qh);case Nl:return dg=op._init,u0(Qh,Oh,dg(op._payload),df)}if(eg(op))return qf(Qh,Oh,op,df);if(Bu(op))return Kf(Qh,Oh,op,df);x1(Qh,op)}return typeof op=="string"&&op!==""||typeof op=="number"?(op=""+op,Oh!==null&&Oh.tag===6?(z(Qh,Oh.sibling),Oh=Pl(Oh,op),Oh.return=Qh,Qh=Oh):(z(Qh,Oh),Oh=G1(op,Qh.mode,df),Oh.return=Qh,Qh=Oh),ad(Qh)):z(Qh,Oh)}return u0}var kv=qy(!0),wv=qy(!1),hy=Bv(null),py=null,w1=null,Tv=null;function Yy(){Tv=w1=py=null}function Ky(a){var u=hy.current;jm(hy),a._currentValue=u}function fy(a,u,z){for(;a!==null;){var it=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,it!==null&&(it.childLanes|=u)):it!==null&&(it.childLanes&u)!==u&&(it.childLanes|=u),a===z)break;a=a.return}}function tv(a,u){py=a,Tv=w1=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&u)!==0&&(xd=!0),a.firstContext=null)}function Y0(a){var u=a._currentValue;if(Tv!==a)if(a={context:a,memoizedValue:u,next:null},w1===null){if(py===null)throw Error(s(308));w1=a,py.dependencies={lanes:0,firstContext:a}}else w1=w1.next=a;return u}var Uv=null;function z1(a){Uv===null?Uv=[a]:Uv.push(a)}function F2(a,u,z,it){var Pl=u.interleaved;return Pl===null?(z.next=z,z1(u)):(z.next=Pl.next,Pl.next=z),u.interleaved=z,Fv(a,it)}function Fv(a,u){a.lanes|=u;var z=a.alternate;for(z!==null&&(z.lanes|=u),z=a,a=a.return;a!==null;)a.childLanes|=u,z=a.alternate,z!==null&&(z.childLanes|=u),z=a,a=a.return;return z.tag===3?z.stateNode:null}var s1=!1;function Zy(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f0(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function e0(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function Wv(a,u,z){var it=a.updateQueue;if(it===null)return null;if(it=it.shared,(Bh&2)!==0){var Pl=it.pending;return Pl===null?u.next=u:(u.next=Pl.next,Pl.next=u),it.pending=u,Fv(a,z)}return Pl=it.interleaved,Pl===null?(u.next=u,z1(it)):(u.next=Pl.next,Pl.next=u),it.interleaved=u,Fv(a,z)}function N1(a,u,z){if(u=u.updateQueue,u!==null&&(u=u.shared,(z&4194240)!==0)){var it=u.lanes;it&=a.pendingLanes,z|=it,u.lanes=z,vl(a,z)}}function Xy(a,u){var z=a.updateQueue,it=a.alternate;if(it!==null&&(it=it.updateQueue,z===it)){var Pl=null,Yl=null;if(z=z.firstBaseUpdate,z!==null){do{var ad={eventTime:z.eventTime,lane:z.lane,tag:z.tag,payload:z.payload,callback:z.callback,next:null};Yl===null?Pl=Yl=ad:Yl=Yl.next=ad,z=z.next}while(z!==null);Yl===null?Pl=Yl=u:Yl=Yl.next=u}else Pl=Yl=u;z={baseState:it.baseState,firstBaseUpdate:Pl,lastBaseUpdate:Yl,shared:it.shared,effects:it.effects},a.updateQueue=z;return}a=z.lastBaseUpdate,a===null?z.firstBaseUpdate=u:a.next=u,z.lastBaseUpdate=u}function Qy(a,u,z,it){var Pl=a.updateQueue;s1=!1;var Yl=Pl.firstBaseUpdate,ad=Pl.lastBaseUpdate,nh=Pl.shared.pending;if(nh!==null){Pl.shared.pending=null;var _h=nh,lp=_h.next;_h.next=null,ad===null?Yl=lp:ad.next=lp,ad=_h;var Xp=a.alternate;Xp!==null&&(Xp=Xp.updateQueue,nh=Xp.lastBaseUpdate,nh!==ad&&(nh===null?Xp.firstBaseUpdate=lp:nh.next=lp,Xp.lastBaseUpdate=_h))}if(Yl!==null){var ef=Pl.baseState;ad=0,Xp=lp=_h=null,nh=Yl;do{var Yp=nh.lane,zf=nh.eventTime;if((it&Yp)===Yp){Xp!==null&&(Xp=Xp.next={eventTime:zf,lane:0,tag:nh.tag,payload:nh.payload,callback:nh.callback,next:null});e:{var qf=a,Kf=nh;switch(Yp=u,zf=z,Kf.tag){case 1:if(qf=Kf.payload,typeof qf=="function"){ef=qf.call(zf,ef,Yp);break e}ef=qf;break e;case 3:qf.flags=qf.flags&-65537|128;case 0:if(qf=Kf.payload,Yp=typeof qf=="function"?qf.call(zf,ef,Yp):qf,Yp==null)break e;ef=wh({},ef,Yp);break e;case 2:s1=!0}}nh.callback!==null&&nh.lane!==0&&(a.flags|=64,Yp=Pl.effects,Yp===null?Pl.effects=[nh]:Yp.push(nh))}else zf={eventTime:zf,lane:Yp,tag:nh.tag,payload:nh.payload,callback:nh.callback,next:null},Xp===null?(lp=Xp=zf,_h=ef):Xp=Xp.next=zf,ad|=Yp;if(nh=nh.next,nh===null){if(nh=Pl.shared.pending,nh===null)break;Yp=nh,nh=Yp.next,Yp.next=null,Pl.lastBaseUpdate=Yp,Pl.shared.pending=null}}while(!0);if(Xp===null&&(_h=ef),Pl.baseState=_h,Pl.firstBaseUpdate=lp,Pl.lastBaseUpdate=Xp,u=Pl.shared.interleaved,u!==null){Pl=u;do ad|=Pl.lane,Pl=Pl.next;while(Pl!==u)}else Yl===null&&(Pl.shared.lanes=0);bf|=ad,a.lanes=ad,a.memoizedState=ef}}function t3(a,u,z){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var it=a[u],Pl=it.callback;if(Pl!==null){if(it.callback=null,it=z,typeof Pl!="function")throw Error(s(191,Pl));Pl.call(it)}}}var gy={},Pv=Bv(gy),my=Bv(gy),vy=Bv(gy);function $v(a){if(a===gy)throw Error(s(174));return a}function yy(a,u){switch(qm(vy,u),qm(my,a),qm(Pv,gy),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:_d(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=_d(u,a)}jm(Pv),qm(Pv,u)}function B1(){jm(Pv),jm(my),jm(vy)}function r3(a){$v(vy.current);var u=$v(Pv.current),z=_d(u,a.type);u!==z&&(qm(my,a),qm(Pv,z))}function P2(a){my.current===a&&(jm(Pv),jm(my))}var zm=Bv(0);function l1(a){for(var u=a;u!==null;){if(u.tag===13){var z=u.memoizedState;if(z!==null&&(z=z.dehydrated,z===null||z.data==="$?"||z.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var H1=[];function Jy(){for(var a=0;a<H1.length;a++)H1[a]._workInProgressVersionPrimary=null;H1.length=0}var xy=Tl.ReactCurrentDispatcher,ot=Tl.ReactCurrentBatchConfig,Me=0,m=null,l=null,d=null,x=!1,v=!1,y=0,w=0;function S(){throw Error(s(321))}function c(a,u){if(u===null)return!1;for(var z=0;z<u.length&&z<a.length;z++)if(!lv(a[z],u[z]))return!1;return!0}function F(a,u,z,it,Pl,Yl){if(Me=Yl,m=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,xy.current=a===null||a.memoizedState===null?Sl:st,a=z(it,Pl),v){Yl=0;do{if(v=!1,y=0,25<=Yl)throw Error(s(301));Yl+=1,d=l=null,u.updateQueue=null,xy.current=U,a=z(it,Pl)}while(v)}if(xy.current=cl,u=l!==null&&l.next!==null,Me=0,d=l=m=null,x=!1,u)throw Error(s(300));return a}function b(){var a=y!==0;return y=0,a}function R(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return d===null?m.memoizedState=d=a:d=d.next=a,d}function B(){if(l===null){var a=m.alternate;a=a!==null?a.memoizedState:null}else a=l.next;var u=d===null?m.memoizedState:d.next;if(u!==null)d=u,l=a;else{if(a===null)throw Error(s(310));l=a,a={memoizedState:l.memoizedState,baseState:l.baseState,baseQueue:l.baseQueue,queue:l.queue,next:null},d===null?m.memoizedState=d=a:d=d.next=a}return d}function O(a,u){return typeof u=="function"?u(a):u}function P(a){var u=B(),z=u.queue;if(z===null)throw Error(s(311));z.lastRenderedReducer=a;var it=l,Pl=it.baseQueue,Yl=z.pending;if(Yl!==null){if(Pl!==null){var ad=Pl.next;Pl.next=Yl.next,Yl.next=ad}it.baseQueue=Pl=Yl,z.pending=null}if(Pl!==null){Yl=Pl.next,it=it.baseState;var nh=ad=null,_h=null,lp=Yl;do{var Xp=lp.lane;if((Me&Xp)===Xp)_h!==null&&(_h=_h.next={lane:0,action:lp.action,hasEagerState:lp.hasEagerState,eagerState:lp.eagerState,next:null}),it=lp.hasEagerState?lp.eagerState:a(it,lp.action);else{var ef={lane:Xp,action:lp.action,hasEagerState:lp.hasEagerState,eagerState:lp.eagerState,next:null};_h===null?(nh=_h=ef,ad=it):_h=_h.next=ef,m.lanes|=Xp,bf|=Xp}lp=lp.next}while(lp!==null&&lp!==Yl);_h===null?ad=it:_h.next=nh,lv(it,u.memoizedState)||(xd=!0),u.memoizedState=it,u.baseState=ad,u.baseQueue=_h,z.lastRenderedState=it}if(a=z.interleaved,a!==null){Pl=a;do Yl=Pl.lane,m.lanes|=Yl,bf|=Yl,Pl=Pl.next;while(Pl!==a)}else Pl===null&&(z.lanes=0);return[u.memoizedState,z.dispatch]}function D(a){var u=B(),z=u.queue;if(z===null)throw Error(s(311));z.lastRenderedReducer=a;var it=z.dispatch,Pl=z.pending,Yl=u.memoizedState;if(Pl!==null){z.pending=null;var ad=Pl=Pl.next;do Yl=a(Yl,ad.action),ad=ad.next;while(ad!==Pl);lv(Yl,u.memoizedState)||(xd=!0),u.memoizedState=Yl,u.baseQueue===null&&(u.baseState=Yl),z.lastRenderedState=Yl}return[Yl,it]}function H(){}function C(a,u){var z=m,it=B(),Pl=u(),Yl=!lv(it.memoizedState,Pl);if(Yl&&(it.memoizedState=Pl,xd=!0),it=it.queue,_t(j.bind(null,z,it,a),[a]),it.getSnapshot!==u||Yl||d!==null&&d.memoizedState.tag&1){if(z.flags|=2048,se(9,L.bind(null,z,it,Pl,u),void 0,null),up===null)throw Error(s(349));(Me&30)!==0||A(z,u,Pl)}return Pl}function A(a,u,z){a.flags|=16384,a={getSnapshot:u,value:z},u=m.updateQueue,u===null?(u={lastEffect:null,stores:null},m.updateQueue=u,u.stores=[a]):(z=u.stores,z===null?u.stores=[a]:z.push(a))}function L(a,u,z,it){u.value=z,u.getSnapshot=it,Z(u)&&nl(a)}function j(a,u,z){return z(function(){Z(u)&&nl(a)})}function Z(a){var u=a.getSnapshot;a=a.value;try{var z=u();return!lv(a,z)}catch{return!0}}function nl(a){var u=Fv(a,1);u!==null&&Am(u,a,1,-1)}function Pe(a){var u=R();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:O,lastRenderedState:a},u.queue=a,a=a.dispatch=gu.bind(null,m,a),[u.memoizedState,a]}function se(a,u,z,it){return a={tag:a,create:u,destroy:z,deps:it,next:null},u=m.updateQueue,u===null?(u={lastEffect:null,stores:null},m.updateQueue=u,u.lastEffect=a.next=a):(z=u.lastEffect,z===null?u.lastEffect=a.next=a:(it=z.next,z.next=a,a.next=it,u.lastEffect=a)),a}function q(){return B().memoizedState}function ol(a,u,z,it){var Pl=R();m.flags|=a,Pl.memoizedState=se(1|u,z,void 0,it===void 0?null:it)}function nt(a,u,z,it){var Pl=B();it=it===void 0?null:it;var Yl=void 0;if(l!==null){var ad=l.memoizedState;if(Yl=ad.destroy,it!==null&&c(it,ad.deps)){Pl.memoizedState=se(u,z,Yl,it);return}}m.flags|=a,Pl.memoizedState=se(1|u,z,Yl,it)}function In(a,u){return ol(8390656,8,a,u)}function _t(a,u){return nt(2048,8,a,u)}function Fn(a,u){return nt(4,2,a,u)}function al(a,u){return nt(4,4,a,u)}function sl(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function ce(a,u,z){return z=z!=null?z.concat([a]):null,nt(4,4,sl.bind(null,u,a),z)}function ll(){}function ul(a,u){var z=B();u=u===void 0?null:u;var it=z.memoizedState;return it!==null&&u!==null&&c(u,it[1])?it[0]:(z.memoizedState=[a,u],a)}function fl(a,u){var z=B();u=u===void 0?null:u;var it=z.memoizedState;return it!==null&&u!==null&&c(u,it[1])?it[0]:(a=a(),z.memoizedState=[a,u],a)}function bl(a,u,z){return(Me&21)===0?(a.baseState&&(a.baseState=!1,xd=!0),a.memoizedState=z):(lv(z,u)||(z=yl(),m.lanes|=z,bf|=z,a.baseState=!0),u)}function El(a,u){var z=Fl;Fl=z!==0&&4>z?z:4,a(!0);var it=ot.transition;ot.transition={};try{a(!1),u()}finally{Fl=z,ot.transition=it}}function Ul(){return B().memoizedState}function ql(a,u,z){var it=km(a);if(z={lane:it,action:z,hasEagerState:!1,eagerState:null,next:null},Bn(a))il(u,z);else if(z=F2(a,u,z,it),z!==null){var Pl=Ug();Am(z,a,it,Pl),X(z,u,it)}}function gu(a,u,z){var it=km(a),Pl={lane:it,action:z,hasEagerState:!1,eagerState:null,next:null};if(Bn(a))il(u,Pl);else{var Yl=a.alternate;if(a.lanes===0&&(Yl===null||Yl.lanes===0)&&(Yl=u.lastRenderedReducer,Yl!==null))try{var ad=u.lastRenderedState,nh=Yl(ad,z);if(Pl.hasEagerState=!0,Pl.eagerState=nh,lv(nh,ad)){var _h=u.interleaved;_h===null?(Pl.next=Pl,z1(u)):(Pl.next=_h.next,_h.next=Pl),u.interleaved=Pl;return}}catch{}finally{}z=F2(a,u,Pl,it),z!==null&&(Pl=Ug(),Am(z,a,it,Pl),X(z,u,it))}}function Bn(a){var u=a.alternate;return a===m||u!==null&&u===m}function il(a,u){v=x=!0;var z=a.pending;z===null?u.next=u:(u.next=z.next,z.next=u),a.pending=u}function X(a,u,z){if((z&4194240)!==0){var it=u.lanes;it&=a.pendingLanes,z|=it,u.lanes=z,vl(a,z)}}var cl={readContext:Y0,useCallback:S,useContext:S,useEffect:S,useImperativeHandle:S,useInsertionEffect:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useDeferredValue:S,useTransition:S,useMutableSource:S,useSyncExternalStore:S,useId:S,unstable_isNewReconciler:!1},Sl={readContext:Y0,useCallback:function(a,u){return R().memoizedState=[a,u===void 0?null:u],a},useContext:Y0,useEffect:In,useImperativeHandle:function(a,u,z){return z=z!=null?z.concat([a]):null,ol(4194308,4,sl.bind(null,u,a),z)},useLayoutEffect:function(a,u){return ol(4194308,4,a,u)},useInsertionEffect:function(a,u){return ol(4,2,a,u)},useMemo:function(a,u){var z=R();return u=u===void 0?null:u,a=a(),z.memoizedState=[a,u],a},useReducer:function(a,u,z){var it=R();return u=z!==void 0?z(u):u,it.memoizedState=it.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},it.queue=a,a=a.dispatch=ql.bind(null,m,a),[it.memoizedState,a]},useRef:function(a){var u=R();return a={current:a},u.memoizedState=a},useState:Pe,useDebugValue:ll,useDeferredValue:function(a){return R().memoizedState=a},useTransition:function(){var a=Pe(!1),u=a[0];return a=El.bind(null,a[1]),R().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,z){var it=m,Pl=R();if(Jm){if(z===void 0)throw Error(s(407));z=z()}else{if(z=u(),up===null)throw Error(s(349));(Me&30)!==0||A(it,u,z)}Pl.memoizedState=z;var Yl={value:z,getSnapshot:u};return Pl.queue=Yl,In(j.bind(null,it,Yl,a),[a]),it.flags|=2048,se(9,L.bind(null,it,Yl,z,u),void 0,null),z},useId:function(){var a=R(),u=up.identifierPrefix;if(Jm){var z=Vv,it=Gv;z=(it&~(1<<32-Vf(it)-1)).toString(32)+z,u=":"+u+"R"+z,z=y++,0<z&&(u+="H"+z.toString(32)),u+=":"}else z=w++,u=":"+u+"r"+z.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},st={readContext:Y0,useCallback:ul,useContext:Y0,useEffect:_t,useImperativeHandle:ce,useInsertionEffect:Fn,useLayoutEffect:al,useMemo:fl,useReducer:P,useRef:q,useState:function(){return P(O)},useDebugValue:ll,useDeferredValue:function(a){var u=B();return bl(u,l.memoizedState,a)},useTransition:function(){var a=P(O)[0],u=B().memoizedState;return[a,u]},useMutableSource:H,useSyncExternalStore:C,useId:Ul,unstable_isNewReconciler:!1},U={readContext:Y0,useCallback:ul,useContext:Y0,useEffect:_t,useImperativeHandle:ce,useInsertionEffect:Fn,useLayoutEffect:al,useMemo:fl,useReducer:D,useRef:q,useState:function(){return D(O)},useDebugValue:ll,useDeferredValue:function(a){var u=B();return l===null?u.memoizedState=a:bl(u,l.memoizedState,a)},useTransition:function(){var a=D(O)[0],u=B().memoizedState;return[a,u]},useMutableSource:H,useSyncExternalStore:C,useId:Ul,unstable_isNewReconciler:!1};function re(a,u){if(a&&a.defaultProps){u=wh({},u),a=a.defaultProps;for(var z in a)u[z]===void 0&&(u[z]=a[z]);return u}return u}function Ft(a,u,z,it){u=a.memoizedState,z=z(it,u),z=z==null?u:wh({},u,z),a.memoizedState=z,a.lanes===0&&(a.updateQueue.baseState=z)}var ls={isMounted:function(a){return(a=a._reactInternals)?sm(a)===a:!1},enqueueSetState:function(a,u,z){a=a._reactInternals;var it=Ug(),Pl=km(a),Yl=e0(it,Pl);Yl.payload=u,z!=null&&(Yl.callback=z),u=Wv(a,Yl,Pl),u!==null&&(Am(u,a,Pl,it),N1(u,a,Pl))},enqueueReplaceState:function(a,u,z){a=a._reactInternals;var it=Ug(),Pl=km(a),Yl=e0(it,Pl);Yl.tag=1,Yl.payload=u,z!=null&&(Yl.callback=z),u=Wv(a,Yl,Pl),u!==null&&(Am(u,a,Pl,it),N1(u,a,Pl))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var z=Ug(),it=km(a),Pl=e0(z,it);Pl.tag=2,u!=null&&(Pl.callback=u),u=Wv(a,Pl,it),u!==null&&(Am(u,a,it,z),N1(u,a,it))}};function _l(a,u,z,it,Pl,Yl,ad){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(it,Yl,ad):u.prototype&&u.prototype.isPureReactComponent?!$1(z,it)||!$1(Pl,Yl):!0}function Ll(a,u,z){var it=!1,Pl=q0,Yl=u.contextType;return typeof Yl=="object"&&Yl!==null?Yl=Y0(Yl):(Pl=T0(u)?Hv:L0.current,it=u.contextTypes,Yl=(it=it!=null)?g1(a,Pl):q0),u=new u(z,Yl),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=ls,a.stateNode=u,u._reactInternals=a,it&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=Pl,a.__reactInternalMemoizedMaskedChildContext=Yl),u}function zl(a,u,z,it){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(z,it),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(z,it),u.state!==a&&ls.enqueueReplaceState(u,u.state,null)}function yu(a,u,z,it){var Pl=a.stateNode;Pl.props=z,Pl.state=a.memoizedState,Pl.refs={},Zy(a);var Yl=u.contextType;typeof Yl=="object"&&Yl!==null?Pl.context=Y0(Yl):(Yl=T0(u)?Hv:L0.current,Pl.context=g1(a,Yl)),Pl.state=a.memoizedState,Yl=u.getDerivedStateFromProps,typeof Yl=="function"&&(Ft(a,u,Yl,z),Pl.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof Pl.getSnapshotBeforeUpdate=="function"||typeof Pl.UNSAFE_componentWillMount!="function"&&typeof Pl.componentWillMount!="function"||(u=Pl.state,typeof Pl.componentWillMount=="function"&&Pl.componentWillMount(),typeof Pl.UNSAFE_componentWillMount=="function"&&Pl.UNSAFE_componentWillMount(),u!==Pl.state&&ls.enqueueReplaceState(Pl,Pl.state,null),Qy(a,z,Pl,it),Pl.state=a.memoizedState),typeof Pl.componentDidMount=="function"&&(a.flags|=4194308)}function Vu(a,u){try{var z="",it=u;do z+=Yd(it),it=it.return;while(it);var Pl=z}catch(Yl){Pl=`
Error generating stack: `+Yl.message+`
`+Yl.stack}return{value:a,source:u,stack:Pl,digest:null}}function od(a,u,z){return{value:a,source:null,stack:z??null,digest:u??null}}function Ad(a,u){try{console.error(u.value)}catch(z){setTimeout(function(){throw z})}}var vd=typeof WeakMap=="function"?WeakMap:Map;function fd(a,u,z){z=e0(-1,z),z.tag=3,z.payload={element:null};var it=u.value;return z.callback=function(){Wf||(Wf=!0,wm=it),Ad(a,u)},z}function Kl(a,u,z){z=e0(-1,z),z.tag=3;var it=a.type.getDerivedStateFromError;if(typeof it=="function"){var Pl=u.value;z.payload=function(){return it(Pl)},z.callback=function(){Ad(a,u)}}var Yl=a.stateNode;return Yl!==null&&typeof Yl.componentDidCatch=="function"&&(z.callback=function(){Ad(a,u),typeof it!="function"&&(im===null?im=new Set([this]):im.add(this));var ad=u.stack;this.componentDidCatch(u.value,{componentStack:ad!==null?ad:""})}),z}function vu(a,u,z){var it=a.pingCache;if(it===null){it=a.pingCache=new vd;var Pl=new Set;it.set(u,Pl)}else Pl=it.get(u),Pl===void 0&&(Pl=new Set,it.set(u,Pl));Pl.has(z)||(Pl.add(z),a=bv.bind(null,a,u,z),u.then(a,a))}function Rl(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function Wu(a,u,z,it,Pl){return(a.mode&1)===0?(a===u?a.flags|=65536:(a.flags|=128,z.flags|=131072,z.flags&=-52805,z.tag===1&&(z.alternate===null?z.tag=17:(u=e0(-1,1),u.tag=2,Wv(z,u,1))),z.lanes|=1),a):(a.flags|=65536,a.lanes=Pl,a)}var cd=Tl.ReactCurrentOwner,xd=!1;function Td(a,u,z,it){u.child=a===null?wv(u,null,z,it):kv(u,a.child,z,it)}function Pd(a,u,z,it,Pl){z=z.render;var Yl=u.ref;return tv(u,Pl),it=F(a,u,z,it,Yl,Pl),z=b(),a!==null&&!xd?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~Pl,yd(a,u,Pl)):(Jm&&z&&cy(u),u.flags|=1,Td(a,u,it,Pl),u.child)}function Hd(a,u,z,it,Pl){if(a===null){var Yl=z.type;return typeof Yl=="function"&&!by(Yl)&&Yl.defaultProps===void 0&&z.compare===null&&z.defaultProps===void 0?(u.tag=15,u.type=Yl,$d(a,u,Yl,it,Pl)):(a=b1(z.type,null,it,u,u.mode,Pl),a.ref=u.ref,a.return=u,u.child=a)}if(Yl=a.child,(a.lanes&Pl)===0){var ad=Yl.memoizedProps;if(z=z.compare,z=z!==null?z:$1,z(ad,it)&&a.ref===u.ref)return yd(a,u,Pl)}return u.flags|=1,a=Kv(Yl,it),a.ref=u.ref,a.return=u,u.child=a}function $d(a,u,z,it,Pl){if(a!==null){var Yl=a.memoizedProps;if($1(Yl,it)&&a.ref===u.ref)if(xd=!1,u.pendingProps=it=Yl,(a.lanes&Pl)!==0)(a.flags&131072)!==0&&(xd=!0);else return u.lanes=a.lanes,yd(a,u,Pl)}return Dd(a,u,z,it,Pl)}function Wd(a,u,z){var it=u.pendingProps,Pl=it.children,Yl=a!==null?a.memoizedState:null;if(it.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},qm(Uf,Ep),Ep|=z;else{if((z&1073741824)===0)return a=Yl!==null?Yl.baseLanes|z:z,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,qm(Uf,Ep),Ep|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},it=Yl!==null?Yl.baseLanes:z,qm(Uf,Ep),Ep|=it}else Yl!==null?(it=Yl.baseLanes|z,u.memoizedState=null):it=z,qm(Uf,Ep),Ep|=it;return Td(a,u,Pl,z),u.child}function mh(a,u){var z=u.ref;(a===null&&z!==null||a!==null&&a.ref!==z)&&(u.flags|=512,u.flags|=2097152)}function Dd(a,u,z,it,Pl){var Yl=T0(z)?Hv:L0.current;return Yl=g1(u,Yl),tv(u,Pl),z=F(a,u,z,it,Yl,Pl),it=b(),a!==null&&!xd?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~Pl,yd(a,u,Pl)):(Jm&&it&&cy(u),u.flags|=1,Td(a,u,z,Pl),u.child)}function bh(a,u,z,it,Pl){if(T0(z)){var Yl=!0;jy(u)}else Yl=!1;if(tv(u,Pl),u.stateNode===null)Sd(a,u),Ll(u,z,it),yu(u,z,it,Pl),it=!0;else if(a===null){var ad=u.stateNode,nh=u.memoizedProps;ad.props=nh;var _h=ad.context,lp=z.contextType;typeof lp=="object"&&lp!==null?lp=Y0(lp):(lp=T0(z)?Hv:L0.current,lp=g1(u,lp));var Xp=z.getDerivedStateFromProps,ef=typeof Xp=="function"||typeof ad.getSnapshotBeforeUpdate=="function";ef||typeof ad.UNSAFE_componentWillReceiveProps!="function"&&typeof ad.componentWillReceiveProps!="function"||(nh!==it||_h!==lp)&&zl(u,ad,it,lp),s1=!1;var Yp=u.memoizedState;ad.state=Yp,Qy(u,it,ad,Pl),_h=u.memoizedState,nh!==it||Yp!==_h||I0.current||s1?(typeof Xp=="function"&&(Ft(u,z,Xp,it),_h=u.memoizedState),(nh=s1||_l(u,z,nh,it,Yp,_h,lp))?(ef||typeof ad.UNSAFE_componentWillMount!="function"&&typeof ad.componentWillMount!="function"||(typeof ad.componentWillMount=="function"&&ad.componentWillMount(),typeof ad.UNSAFE_componentWillMount=="function"&&ad.UNSAFE_componentWillMount()),typeof ad.componentDidMount=="function"&&(u.flags|=4194308)):(typeof ad.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=it,u.memoizedState=_h),ad.props=it,ad.state=_h,ad.context=lp,it=nh):(typeof ad.componentDidMount=="function"&&(u.flags|=4194308),it=!1)}else{ad=u.stateNode,f0(a,u),nh=u.memoizedProps,lp=u.type===u.elementType?nh:re(u.type,nh),ad.props=lp,ef=u.pendingProps,Yp=ad.context,_h=z.contextType,typeof _h=="object"&&_h!==null?_h=Y0(_h):(_h=T0(z)?Hv:L0.current,_h=g1(u,_h));var zf=z.getDerivedStateFromProps;(Xp=typeof zf=="function"||typeof ad.getSnapshotBeforeUpdate=="function")||typeof ad.UNSAFE_componentWillReceiveProps!="function"&&typeof ad.componentWillReceiveProps!="function"||(nh!==ef||Yp!==_h)&&zl(u,ad,it,_h),s1=!1,Yp=u.memoizedState,ad.state=Yp,Qy(u,it,ad,Pl);var qf=u.memoizedState;nh!==ef||Yp!==qf||I0.current||s1?(typeof zf=="function"&&(Ft(u,z,zf,it),qf=u.memoizedState),(lp=s1||_l(u,z,lp,it,Yp,qf,_h)||!1)?(Xp||typeof ad.UNSAFE_componentWillUpdate!="function"&&typeof ad.componentWillUpdate!="function"||(typeof ad.componentWillUpdate=="function"&&ad.componentWillUpdate(it,qf,_h),typeof ad.UNSAFE_componentWillUpdate=="function"&&ad.UNSAFE_componentWillUpdate(it,qf,_h)),typeof ad.componentDidUpdate=="function"&&(u.flags|=4),typeof ad.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof ad.componentDidUpdate!="function"||nh===a.memoizedProps&&Yp===a.memoizedState||(u.flags|=4),typeof ad.getSnapshotBeforeUpdate!="function"||nh===a.memoizedProps&&Yp===a.memoizedState||(u.flags|=1024),u.memoizedProps=it,u.memoizedState=qf),ad.props=it,ad.state=qf,ad.context=_h,it=lp):(typeof ad.componentDidUpdate!="function"||nh===a.memoizedProps&&Yp===a.memoizedState||(u.flags|=4),typeof ad.getSnapshotBeforeUpdate!="function"||nh===a.memoizedProps&&Yp===a.memoizedState||(u.flags|=1024),it=!1)}return Dh(a,u,z,it,Yl,Pl)}function Dh(a,u,z,it,Pl,Yl){mh(a,u);var ad=(u.flags&128)!==0;if(!it&&!ad)return Pl&&X2(u,z,!1),yd(a,u,Yl);it=u.stateNode,cd.current=u;var nh=ad&&typeof z.getDerivedStateFromError!="function"?null:it.render();return u.flags|=1,a!==null&&ad?(u.child=kv(u,a.child,null,Yl),u.child=kv(u,null,nh,Yl)):Td(a,u,nh,Yl),u.memoizedState=it.state,Pl&&X2(u,z,!0),u.child}function vh(a){var u=a.stateNode;u.pendingContext?K2(a,u.pendingContext,u.pendingContext!==u.context):u.context&&K2(a,u.context,!1),yy(a,u.containerInfo)}function Gh(a,u,z,it,Pl){return jv(),Wy(Pl),u.flags|=256,Td(a,u,z,it),u.child}var Ql={dehydrated:null,treeContext:null,retryLane:0};function Ku(a){return{baseLanes:a,cachePool:null,transitions:null}}function gl(a,u,z){var it=u.pendingProps,Pl=zm.current,Yl=!1,ad=(u.flags&128)!==0,nh;if((nh=ad)||(nh=a!==null&&a.memoizedState===null?!1:(Pl&2)!==0),nh?(Yl=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(Pl|=1),qm(zm,Pl&1),a===null)return D1(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((u.mode&1)===0?u.lanes=1:a.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(ad=it.children,a=it.fallback,Yl?(it=u.mode,Yl=u.child,ad={mode:"hidden",children:ad},(it&1)===0&&Yl!==null?(Yl.childLanes=0,Yl.pendingProps=ad):Yl=K0(ad,it,0,null),a=Zv(a,it,z,null),Yl.return=u,a.return=u,Yl.sibling=a,u.child=Yl,u.child.memoizedState=Ku(z),u.memoizedState=Ql,a):Dl(u,ad));if(Pl=a.memoizedState,Pl!==null&&(nh=Pl.dehydrated,nh!==null))return Mu(a,u,ad,it,nh,Pl,z);if(Yl){Yl=it.fallback,ad=u.mode,Pl=a.child,nh=Pl.sibling;var _h={mode:"hidden",children:it.children};return(ad&1)===0&&u.child!==Pl?(it=u.child,it.childLanes=0,it.pendingProps=_h,u.deletions=null):(it=Kv(Pl,_h),it.subtreeFlags=Pl.subtreeFlags&14680064),nh!==null?Yl=Kv(nh,Yl):(Yl=Zv(Yl,ad,z,null),Yl.flags|=2),Yl.return=u,it.return=u,it.sibling=Yl,u.child=it,it=Yl,Yl=u.child,ad=a.child.memoizedState,ad=ad===null?Ku(z):{baseLanes:ad.baseLanes|z,cachePool:null,transitions:ad.transitions},Yl.memoizedState=ad,Yl.childLanes=a.childLanes&~z,u.memoizedState=Ql,it}return Yl=a.child,a=Yl.sibling,it=Kv(Yl,{mode:"visible",children:it.children}),(u.mode&1)===0&&(it.lanes=z),it.return=u,it.sibling=null,a!==null&&(z=u.deletions,z===null?(u.deletions=[a],u.flags|=16):z.push(a)),u.child=it,u.memoizedState=null,it}function Dl(a,u){return u=K0({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function Vl(a,u,z,it){return it!==null&&Wy(it),kv(u,a.child,null,z),a=Dl(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function Mu(a,u,z,it,Pl,Yl,ad){if(z)return u.flags&256?(u.flags&=-257,it=od(Error(s(422))),Vl(a,u,ad,it)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(Yl=it.fallback,Pl=u.mode,it=K0({mode:"visible",children:it.children},Pl,0,null),Yl=Zv(Yl,Pl,ad,null),Yl.flags|=2,it.return=u,Yl.return=u,it.sibling=Yl,u.child=it,(u.mode&1)!==0&&kv(u,a.child,null,ad),u.child.memoizedState=Ku(ad),u.memoizedState=Ql,Yl);if((u.mode&1)===0)return Vl(a,u,ad,null);if(Pl.data==="$!"){if(it=Pl.nextSibling&&Pl.nextSibling.dataset,it)var nh=it.dgst;return it=nh,Yl=Error(s(419)),it=od(Yl,it,void 0),Vl(a,u,ad,it)}if(nh=(ad&a.childLanes)!==0,xd||nh){if(it=up,it!==null){switch(ad&-ad){case 4:Pl=2;break;case 16:Pl=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Pl=32;break;case 536870912:Pl=268435456;break;default:Pl=0}Pl=(Pl&(it.suspendedLanes|ad))!==0?0:Pl,Pl!==0&&Pl!==Yl.retryLane&&(Yl.retryLane=Pl,Fv(a,Pl),Am(it,a,Pl,-1))}return E0(),it=od(Error(s(421))),Vl(a,u,ad,it)}return Pl.data==="$?"?(u.flags|=128,u.child=a.child,u=e2.bind(null,a),Pl._reactRetry=u,null):(a=Yl.treeContext,c0=vv(Pl.nextSibling),O0=u,Jm=!0,dv=null,a!==null&&(ev[uv++]=Gv,ev[uv++]=Vv,ev[uv++]=v1,Gv=a.id,Vv=a.overflow,v1=u),u=Dl(u,it.children),u.flags|=4096,u)}function Nu(a,u,z){a.lanes|=u;var it=a.alternate;it!==null&&(it.lanes|=u),fy(a.return,u,z)}function ed(a,u,z,it,Pl){var Yl=a.memoizedState;Yl===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:it,tail:z,tailMode:Pl}:(Yl.isBackwards=u,Yl.rendering=null,Yl.renderingStartTime=0,Yl.last=it,Yl.tail=z,Yl.tailMode=Pl)}function sd(a,u,z){var it=u.pendingProps,Pl=it.revealOrder,Yl=it.tail;if(Td(a,u,it.children,z),it=zm.current,(it&2)!==0)it=it&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Nu(a,z,u);else if(a.tag===19)Nu(a,z,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}it&=1}if(qm(zm,it),(u.mode&1)===0)u.memoizedState=null;else switch(Pl){case"forwards":for(z=u.child,Pl=null;z!==null;)a=z.alternate,a!==null&&l1(a)===null&&(Pl=z),z=z.sibling;z=Pl,z===null?(Pl=u.child,u.child=null):(Pl=z.sibling,z.sibling=null),ed(u,!1,Pl,z,Yl);break;case"backwards":for(z=null,Pl=u.child,u.child=null;Pl!==null;){if(a=Pl.alternate,a!==null&&l1(a)===null){u.child=Pl;break}a=Pl.sibling,Pl.sibling=z,z=Pl,Pl=a}ed(u,!0,z,null,Yl);break;case"together":ed(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Sd(a,u){(u.mode&1)===0&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function yd(a,u,z){if(a!==null&&(u.dependencies=a.dependencies),bf|=u.lanes,(z&u.childLanes)===0)return null;if(a!==null&&u.child!==a.child)throw Error(s(153));if(u.child!==null){for(a=u.child,z=Kv(a,a.pendingProps),u.child=z,z.return=u;a.sibling!==null;)a=a.sibling,z=z.sibling=Kv(a,a.pendingProps),z.return=u;z.sibling=null}return u.child}function bd(a,u,z){switch(u.tag){case 3:vh(u),jv();break;case 5:r3(u);break;case 1:T0(u.type)&&jy(u);break;case 4:yy(u,u.stateNode.containerInfo);break;case 10:var it=u.type._context,Pl=u.memoizedProps.value;qm(hy,it._currentValue),it._currentValue=Pl;break;case 13:if(it=u.memoizedState,it!==null)return it.dehydrated!==null?(qm(zm,zm.current&1),u.flags|=128,null):(z&u.child.childLanes)!==0?gl(a,u,z):(qm(zm,zm.current&1),a=yd(a,u,z),a!==null?a.sibling:null);qm(zm,zm.current&1);break;case 19:if(it=(z&u.childLanes)!==0,(a.flags&128)!==0){if(it)return sd(a,u,z);u.flags|=128}if(Pl=u.memoizedState,Pl!==null&&(Pl.rendering=null,Pl.tail=null,Pl.lastEffect=null),qm(zm,zm.current),it)break;return null;case 22:case 23:return u.lanes=0,Wd(a,u,z)}return yd(a,u,z)}var Kd,Jd,th,Hh;Kd=function(a,u){for(var z=u.child;z!==null;){if(z.tag===5||z.tag===6)a.appendChild(z.stateNode);else if(z.tag!==4&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===u)break;for(;z.sibling===null;){if(z.return===null||z.return===u)return;z=z.return}z.sibling.return=z.return,z=z.sibling}},Jd=function(){},th=function(a,u,z,it){var Pl=a.memoizedProps;if(Pl!==it){a=u.stateNode,$v(Pv.current);var Yl=null;switch(z){case"input":Pl=kf(a,Pl),it=kf(a,it),Yl=[];break;case"select":Pl=wh({},Pl,{value:void 0}),it=wh({},it,{value:void 0}),Yl=[];break;case"textarea":Pl=Lg(a,Pl),it=Lg(a,it),Yl=[];break;default:typeof Pl.onClick!="function"&&typeof it.onClick=="function"&&(a.onclick=oy)}uf(z,it);var ad;z=null;for(lp in Pl)if(!it.hasOwnProperty(lp)&&Pl.hasOwnProperty(lp)&&Pl[lp]!=null)if(lp==="style"){var nh=Pl[lp];for(ad in nh)nh.hasOwnProperty(ad)&&(z||(z={}),z[ad]="")}else lp!=="dangerouslySetInnerHTML"&&lp!=="children"&&lp!=="suppressContentEditableWarning"&&lp!=="suppressHydrationWarning"&&lp!=="autoFocus"&&(M.hasOwnProperty(lp)?Yl||(Yl=[]):(Yl=Yl||[]).push(lp,null));for(lp in it){var _h=it[lp];if(nh=Pl?.[lp],it.hasOwnProperty(lp)&&_h!==nh&&(_h!=null||nh!=null))if(lp==="style")if(nh){for(ad in nh)!nh.hasOwnProperty(ad)||_h&&_h.hasOwnProperty(ad)||(z||(z={}),z[ad]="");for(ad in _h)_h.hasOwnProperty(ad)&&nh[ad]!==_h[ad]&&(z||(z={}),z[ad]=_h[ad])}else z||(Yl||(Yl=[]),Yl.push(lp,z)),z=_h;else lp==="dangerouslySetInnerHTML"?(_h=_h?_h.__html:void 0,nh=nh?nh.__html:void 0,_h!=null&&nh!==_h&&(Yl=Yl||[]).push(lp,_h)):lp==="children"?typeof _h!="string"&&typeof _h!="number"||(Yl=Yl||[]).push(lp,""+_h):lp!=="suppressContentEditableWarning"&&lp!=="suppressHydrationWarning"&&(M.hasOwnProperty(lp)?(_h!=null&&lp==="onScroll"&&Qm("scroll",a),Yl||nh===_h||(Yl=[])):(Yl=Yl||[]).push(lp,_h))}z&&(Yl=Yl||[]).push("style",z);var lp=Yl;(u.updateQueue=lp)&&(u.flags|=4)}},Hh=function(a,u,z,it){z!==it&&(u.flags|=4)};function sp(a,u){if(!Jm)switch(a.tailMode){case"hidden":u=a.tail;for(var z=null;u!==null;)u.alternate!==null&&(z=u),u=u.sibling;z===null?a.tail=null:z.sibling=null;break;case"collapsed":z=a.tail;for(var it=null;z!==null;)z.alternate!==null&&(it=z),z=z.sibling;it===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:it.sibling=null}}function xp(a){var u=a.alternate!==null&&a.alternate.child===a.child,z=0,it=0;if(u)for(var Pl=a.child;Pl!==null;)z|=Pl.lanes|Pl.childLanes,it|=Pl.subtreeFlags&14680064,it|=Pl.flags&14680064,Pl.return=a,Pl=Pl.sibling;else for(Pl=a.child;Pl!==null;)z|=Pl.lanes|Pl.childLanes,it|=Pl.subtreeFlags,it|=Pl.flags,Pl.return=a,Pl=Pl.sibling;return a.subtreeFlags|=it,a.childLanes=z,u}function Pp(a,u,z){var it=u.pendingProps;switch(a1(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xp(u),null;case 1:return T0(u.type)&&F0(),xp(u),null;case 3:return it=u.stateNode,B1(),jm(I0),jm(L0),Jy(),it.pendingContext&&(it.context=it.pendingContext,it.pendingContext=null),(a===null||a.child===null)&&(I1(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,dv!==null&&(Hg(dv),dv=null))),Jd(a,u),xp(u),null;case 5:P2(u);var Pl=$v(vy.current);if(z=u.type,a!==null&&u.stateNode!=null)th(a,u,z,it,Pl),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!it){if(u.stateNode===null)throw Error(s(166));return xp(u),null}if(a=$v(Pv.current),I1(u)){it=u.stateNode,z=u.type;var Yl=u.memoizedProps;switch(it[Mv]=u,it[T1]=Yl,a=(u.mode&1)!==0,z){case"dialog":Qm("cancel",it),Qm("close",it);break;case"iframe":case"object":case"embed":Qm("load",it);break;case"video":case"audio":for(Pl=0;Pl<i1.length;Pl++)Qm(i1[Pl],it);break;case"source":Qm("error",it);break;case"img":case"image":case"link":Qm("error",it),Qm("load",it);break;case"details":Qm("toggle",it);break;case"input":Eg(it,Yl),Qm("invalid",it);break;case"select":it._wrapperState={wasMultiple:!!Yl.multiple},Qm("invalid",it);break;case"textarea":$g(it,Yl),Qm("invalid",it)}uf(z,Yl),Pl=null;for(var ad in Yl)if(Yl.hasOwnProperty(ad)){var nh=Yl[ad];ad==="children"?typeof nh=="string"?it.textContent!==nh&&(Yl.suppressHydrationWarning!==!0&&ny(it.textContent,nh,a),Pl=["children",nh]):typeof nh=="number"&&it.textContent!==""+nh&&(Yl.suppressHydrationWarning!==!0&&ny(it.textContent,nh,a),Pl=["children",""+nh]):M.hasOwnProperty(ad)&&nh!=null&&ad==="onScroll"&&Qm("scroll",it)}switch(z){case"input":vp(it),Rg(it,Yl,!0);break;case"textarea":vp(it),Lm(it);break;case"select":case"option":break;default:typeof Yl.onClick=="function"&&(it.onclick=oy)}it=Pl,u.updateQueue=it,it!==null&&(u.flags|=4)}else{ad=Pl.nodeType===9?Pl:Pl.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=$m(z)),a==="http://www.w3.org/1999/xhtml"?z==="script"?(a=ad.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof it.is=="string"?a=ad.createElement(z,{is:it.is}):(a=ad.createElement(z),z==="select"&&(ad=a,it.multiple?ad.multiple=!0:it.size&&(ad.size=it.size))):a=ad.createElementNS(a,z),a[Mv]=u,a[T1]=it,Kd(a,u,!1,!1),u.stateNode=a;e:{switch(ad=Gf(z,it),z){case"dialog":Qm("cancel",a),Qm("close",a),Pl=it;break;case"iframe":case"object":case"embed":Qm("load",a),Pl=it;break;case"video":case"audio":for(Pl=0;Pl<i1.length;Pl++)Qm(i1[Pl],a);Pl=it;break;case"source":Qm("error",a),Pl=it;break;case"img":case"image":case"link":Qm("error",a),Qm("load",a),Pl=it;break;case"details":Qm("toggle",a),Pl=it;break;case"input":Eg(a,it),Pl=kf(a,it),Qm("invalid",a);break;case"option":Pl=it;break;case"select":a._wrapperState={wasMultiple:!!it.multiple},Pl=wh({},it,{value:void 0}),Qm("invalid",a);break;case"textarea":$g(a,it),Pl=Lg(a,it),Qm("invalid",a);break;default:Pl=it}uf(z,Pl),nh=Pl;for(Yl in nh)if(nh.hasOwnProperty(Yl)){var _h=nh[Yl];Yl==="style"?lf(a,_h):Yl==="dangerouslySetInnerHTML"?(_h=_h?_h.__html:void 0,_h!=null&&xh(a,_h)):Yl==="children"?typeof _h=="string"?(z!=="textarea"||_h!=="")&&Fp(a,_h):typeof _h=="number"&&Fp(a,""+_h):Yl!=="suppressContentEditableWarning"&&Yl!=="suppressHydrationWarning"&&Yl!=="autoFocus"&&(M.hasOwnProperty(Yl)?_h!=null&&Yl==="onScroll"&&Qm("scroll",a):_h!=null&&dl(a,Yl,_h,ad))}switch(z){case"input":vp(a),Rg(a,it,!1);break;case"textarea":vp(a),Lm(a);break;case"option":it.value!=null&&a.setAttribute("value",""+lh(it.value));break;case"select":a.multiple=!!it.multiple,Yl=it.value,Yl!=null?Wg(a,!!it.multiple,Yl,!1):it.defaultValue!=null&&Wg(a,!!it.multiple,it.defaultValue,!0);break;default:typeof Pl.onClick=="function"&&(a.onclick=oy)}switch(z){case"button":case"input":case"select":case"textarea":it=!!it.autoFocus;break e;case"img":it=!0;break e;default:it=!1}}it&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return xp(u),null;case 6:if(a&&u.stateNode!=null)Hh(a,u,a.memoizedProps,it);else{if(typeof it!="string"&&u.stateNode===null)throw Error(s(166));if(z=$v(vy.current),$v(Pv.current),I1(u)){if(it=u.stateNode,z=u.memoizedProps,it[Mv]=u,(Yl=it.nodeValue!==z)&&(a=O0,a!==null))switch(a.tag){case 3:ny(it.nodeValue,z,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&ny(it.nodeValue,z,(a.mode&1)!==0)}Yl&&(u.flags|=4)}else it=(z.nodeType===9?z:z.ownerDocument).createTextNode(it),it[Mv]=u,u.stateNode=it}return xp(u),null;case 13:if(jm(zm),it=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Jm&&c0!==null&&(u.mode&1)!==0&&(u.flags&128)===0)T2(),jv(),u.flags|=98560,Yl=!1;else if(Yl=I1(u),it!==null&&it.dehydrated!==null){if(a===null){if(!Yl)throw Error(s(318));if(Yl=u.memoizedState,Yl=Yl!==null?Yl.dehydrated:null,!Yl)throw Error(s(317));Yl[Mv]=u}else jv(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;xp(u),Yl=!1}else dv!==null&&(Hg(dv),dv=null),Yl=!0;if(!Yl)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=z,u):(it=it!==null,it!==(a!==null&&a.memoizedState!==null)&&it&&(u.child.flags|=8192,(u.mode&1)!==0&&(a===null||(zm.current&1)!==0?qp===0&&(qp=3):E0())),u.updateQueue!==null&&(u.flags|=4),xp(u),null);case 4:return B1(),Jd(a,u),a===null&&ty(u.stateNode.containerInfo),xp(u),null;case 10:return Ky(u.type._context),xp(u),null;case 17:return T0(u.type)&&F0(),xp(u),null;case 19:if(jm(zm),Yl=u.memoizedState,Yl===null)return xp(u),null;if(it=(u.flags&128)!==0,ad=Yl.rendering,ad===null)if(it)sp(Yl,!1);else{if(qp!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(ad=l1(a),ad!==null){for(u.flags|=128,sp(Yl,!1),it=ad.updateQueue,it!==null&&(u.updateQueue=it,u.flags|=4),u.subtreeFlags=0,it=z,z=u.child;z!==null;)Yl=z,a=it,Yl.flags&=14680066,ad=Yl.alternate,ad===null?(Yl.childLanes=0,Yl.lanes=a,Yl.child=null,Yl.subtreeFlags=0,Yl.memoizedProps=null,Yl.memoizedState=null,Yl.updateQueue=null,Yl.dependencies=null,Yl.stateNode=null):(Yl.childLanes=ad.childLanes,Yl.lanes=ad.lanes,Yl.child=ad.child,Yl.subtreeFlags=0,Yl.deletions=null,Yl.memoizedProps=ad.memoizedProps,Yl.memoizedState=ad.memoizedState,Yl.updateQueue=ad.updateQueue,Yl.type=ad.type,a=ad.dependencies,Yl.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),z=z.sibling;return qm(zm,zm.current&1|2),u.child}a=a.sibling}Yl.tail!==null&&_p()>xm&&(u.flags|=128,it=!0,sp(Yl,!1),u.lanes=4194304)}else{if(!it)if(a=l1(ad),a!==null){if(u.flags|=128,it=!0,z=a.updateQueue,z!==null&&(u.updateQueue=z,u.flags|=4),sp(Yl,!0),Yl.tail===null&&Yl.tailMode==="hidden"&&!ad.alternate&&!Jm)return xp(u),null}else 2*_p()-Yl.renderingStartTime>xm&&z!==1073741824&&(u.flags|=128,it=!0,sp(Yl,!1),u.lanes=4194304);Yl.isBackwards?(ad.sibling=u.child,u.child=ad):(z=Yl.last,z!==null?z.sibling=ad:u.child=ad,Yl.last=ad)}return Yl.tail!==null?(u=Yl.tail,Yl.rendering=u,Yl.tail=u.sibling,Yl.renderingStartTime=_p(),u.sibling=null,z=zm.current,qm(zm,it?z&1|2:z&1),u):(xp(u),null);case 22:case 23:return y0(),it=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==it&&(u.flags|=8192),it&&(u.mode&1)!==0?(Ep&1073741824)!==0&&(xp(u),u.subtreeFlags&6&&(u.flags|=8192)):xp(u),null;case 24:return null;case 25:return null}throw Error(s(156,u.tag))}function Up(a,u){switch(a1(u),u.tag){case 1:return T0(u.type)&&F0(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return B1(),jm(I0),jm(L0),Jy(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 5:return P2(u),null;case 13:if(jm(zm),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(s(340));jv()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return jm(zm),null;case 4:return B1(),null;case 10:return Ky(u.type._context),null;case 22:case 23:return y0(),null;case 24:return null;default:return null}}var fp=!1,zh=!1,kp=typeof WeakSet=="function"?WeakSet:Set,qh=null;function bp(a,u){var z=a.ref;if(z!==null)if(typeof z=="function")try{z(null)}catch(it){Zm(a,u,it)}else z.current=null}function wp(a,u,z){try{z()}catch(it){Zm(a,u,it)}}var Sp=!1;function mp(a,u){if(D0=Th,a=p1(),_1(a)){if("selectionStart"in a)var z={start:a.selectionStart,end:a.selectionEnd};else e:{z=(z=a.ownerDocument)&&z.defaultView||window;var it=z.getSelection&&z.getSelection();if(it&&it.rangeCount!==0){z=it.anchorNode;var Pl=it.anchorOffset,Yl=it.focusNode;it=it.focusOffset;try{z.nodeType,Yl.nodeType}catch{z=null;break e}var ad=0,nh=-1,_h=-1,lp=0,Xp=0,ef=a,Yp=null;t:for(;;){for(var zf;ef!==z||Pl!==0&&ef.nodeType!==3||(nh=ad+Pl),ef!==Yl||it!==0&&ef.nodeType!==3||(_h=ad+it),ef.nodeType===3&&(ad+=ef.nodeValue.length),(zf=ef.firstChild)!==null;)Yp=ef,ef=zf;for(;;){if(ef===a)break t;if(Yp===z&&++lp===Pl&&(nh=ad),Yp===Yl&&++Xp===it&&(_h=ad),(zf=ef.nextSibling)!==null)break;ef=Yp,Yp=ef.parentNode}ef=zf}z=nh===-1||_h===-1?null:{start:nh,end:_h}}else z=null}z=z||{start:0,end:0}}else z=null;for(S2={focusedElem:a,selectionRange:z},Th=!1,qh=u;qh!==null;)if(u=qh,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,qh=a;else for(;qh!==null;){u=qh;try{var qf=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(qf!==null){var Kf=qf.memoizedProps,u0=qf.memoizedState,Qh=u.stateNode,Oh=Qh.getSnapshotBeforeUpdate(u.elementType===u.type?Kf:re(u.type,Kf),u0);Qh.__reactInternalSnapshotBeforeUpdate=Oh}break;case 3:var op=u.stateNode.containerInfo;op.nodeType===1?op.textContent="":op.nodeType===9&&op.documentElement&&op.removeChild(op.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(df){Zm(u,u.return,df)}if(a=u.sibling,a!==null){a.return=u.return,qh=a;break}qh=u.return}return qf=Sp,Sp=!1,qf}function af(a,u,z){var it=u.updateQueue;if(it=it!==null?it.lastEffect:null,it!==null){var Pl=it=it.next;do{if((Pl.tag&a)===a){var Yl=Pl.destroy;Pl.destroy=void 0,Yl!==void 0&&wp(u,z,Yl)}Pl=Pl.next}while(Pl!==it)}}function _f(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var z=u=u.next;do{if((z.tag&a)===a){var it=z.create;z.destroy=it()}z=z.next}while(z!==u)}}function Lp(a){var u=a.ref;if(u!==null){var z=a.stateNode;switch(a.tag){case 5:a=z;break;default:a=z}typeof u=="function"?u(a):u.current=a}}function Ef(a){var u=a.alternate;u!==null&&(a.alternate=null,Ef(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[Mv],delete u[T1],delete u[np],delete u[Y2],delete u[E2])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Lf(a){return a.tag===5||a.tag===3||a.tag===4}function rg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Lf(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ng(a,u,z){var it=a.tag;if(it===5||it===6)a=a.stateNode,u?z.nodeType===8?z.parentNode.insertBefore(a,u):z.insertBefore(a,u):(z.nodeType===8?(u=z.parentNode,u.insertBefore(a,z)):(u=z,u.appendChild(a)),z=z._reactRootContainer,z!=null||u.onclick!==null||(u.onclick=oy));else if(it!==4&&(a=a.child,a!==null))for(ng(a,u,z),a=a.sibling;a!==null;)ng(a,u,z),a=a.sibling}function gf(a,u,z){var it=a.tag;if(it===5||it===6)a=a.stateNode,u?z.insertBefore(a,u):z.appendChild(a);else if(it!==4&&(a=a.child,a!==null))for(gf(a,u,z),a=a.sibling;a!==null;)gf(a,u,z),a=a.sibling}var Rf=null,yf=!1;function cp(a,u,z){for(z=z.child;z!==null;)_g(a,u,z),z=z.sibling}function _g(a,u,z){if(em&&typeof em.onCommitFiberUnmount=="function")try{em.onCommitFiberUnmount(Ng,z)}catch{}switch(z.tag){case 5:zh||bp(z,u);case 6:var it=Rf,Pl=yf;Rf=null,cp(a,u,z),Rf=it,yf=Pl,Rf!==null&&(yf?(a=Rf,z=z.stateNode,a.nodeType===8?a.parentNode.removeChild(z):a.removeChild(z)):Rf.removeChild(z.stateNode));break;case 18:Rf!==null&&(yf?(a=Rf,z=z.stateNode,a.nodeType===8?_2(a.parentNode,z):a.nodeType===1&&_2(a,z),Nh(a)):_2(Rf,z.stateNode));break;case 4:it=Rf,Pl=yf,Rf=z.stateNode.containerInfo,yf=!0,cp(a,u,z),Rf=it,yf=Pl;break;case 0:case 11:case 14:case 15:if(!zh&&(it=z.updateQueue,it!==null&&(it=it.lastEffect,it!==null))){Pl=it=it.next;do{var Yl=Pl,ad=Yl.destroy;Yl=Yl.tag,ad!==void 0&&((Yl&2)!==0||(Yl&4)!==0)&&wp(z,u,ad),Pl=Pl.next}while(Pl!==it)}cp(a,u,z);break;case 1:if(!zh&&(bp(z,u),it=z.stateNode,typeof it.componentWillUnmount=="function"))try{it.props=z.memoizedProps,it.state=z.memoizedState,it.componentWillUnmount()}catch(nh){Zm(z,u,nh)}cp(a,u,z);break;case 21:cp(a,u,z);break;case 22:z.mode&1?(zh=(it=zh)||z.memoizedState!==null,cp(a,u,z),zh=it):cp(a,u,z);break;default:cp(a,u,z)}}function wl(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var z=a.stateNode;z===null&&(z=a.stateNode=new kp),u.forEach(function(it){var Pl=Cy.bind(null,a,it);z.has(it)||(z.add(it),it.then(Pl,Pl))})}}function pl(a,u){var z=u.deletions;if(z!==null)for(var it=0;it<z.length;it++){var Pl=z[it];try{var Yl=a,ad=u,nh=ad;e:for(;nh!==null;){switch(nh.tag){case 5:Rf=nh.stateNode,yf=!1;break e;case 3:Rf=nh.stateNode.containerInfo,yf=!0;break e;case 4:Rf=nh.stateNode.containerInfo,yf=!0;break e}nh=nh.return}if(Rf===null)throw Error(s(160));_g(Yl,ad,Pl),Rf=null,yf=!1;var _h=Pl.alternate;_h!==null&&(_h.return=null),Pl.return=null}catch(lp){Zm(Pl,u,lp)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)Yu(u,a),u=u.sibling}function Yu(a,u){var z=a.alternate,it=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(pl(u,a),Ju(a),it&4){try{af(3,a,a.return),_f(3,a)}catch(Kf){Zm(a,a.return,Kf)}try{af(5,a,a.return)}catch(Kf){Zm(a,a.return,Kf)}}break;case 1:pl(u,a),Ju(a),it&512&&z!==null&&bp(z,z.return);break;case 5:if(pl(u,a),Ju(a),it&512&&z!==null&&bp(z,z.return),a.flags&32){var Pl=a.stateNode;try{Fp(Pl,"")}catch(Kf){Zm(a,a.return,Kf)}}if(it&4&&(Pl=a.stateNode,Pl!=null)){var Yl=a.memoizedProps,ad=z!==null?z.memoizedProps:Yl,nh=a.type,_h=a.updateQueue;if(a.updateQueue=null,_h!==null)try{nh==="input"&&Yl.type==="radio"&&Yl.name!=null&&Gg(Pl,Yl),Gf(nh,ad);var lp=Gf(nh,Yl);for(ad=0;ad<_h.length;ad+=2){var Xp=_h[ad],ef=_h[ad+1];Xp==="style"?lf(Pl,ef):Xp==="dangerouslySetInnerHTML"?xh(Pl,ef):Xp==="children"?Fp(Pl,ef):dl(Pl,Xp,ef,lp)}switch(nh){case"input":Hf(Pl,Yl);break;case"textarea":Bm(Pl,Yl);break;case"select":var Yp=Pl._wrapperState.wasMultiple;Pl._wrapperState.wasMultiple=!!Yl.multiple;var zf=Yl.value;zf!=null?Wg(Pl,!!Yl.multiple,zf,!1):Yp!==!!Yl.multiple&&(Yl.defaultValue!=null?Wg(Pl,!!Yl.multiple,Yl.defaultValue,!0):Wg(Pl,!!Yl.multiple,Yl.multiple?[]:"",!1))}Pl[T1]=Yl}catch(Kf){Zm(a,a.return,Kf)}}break;case 6:if(pl(u,a),Ju(a),it&4){if(a.stateNode===null)throw Error(s(162));Pl=a.stateNode,Yl=a.memoizedProps;try{Pl.nodeValue=Yl}catch(Kf){Zm(a,a.return,Kf)}}break;case 3:if(pl(u,a),Ju(a),it&4&&z!==null&&z.memoizedState.isDehydrated)try{Nh(u.containerInfo)}catch(Kf){Zm(a,a.return,Kf)}break;case 4:pl(u,a),Ju(a);break;case 13:pl(u,a),Ju(a),Pl=a.child,Pl.flags&8192&&(Yl=Pl.memoizedState!==null,Pl.stateNode.isHidden=Yl,!Yl||Pl.alternate!==null&&Pl.alternate.memoizedState!==null||(Tf=_p())),it&4&&wl(a);break;case 22:if(Xp=z!==null&&z.memoizedState!==null,a.mode&1?(zh=(lp=zh)||Xp,pl(u,a),zh=lp):pl(u,a),Ju(a),it&8192){if(lp=a.memoizedState!==null,(a.stateNode.isHidden=lp)&&!Xp&&(a.mode&1)!==0)for(qh=a,Xp=a.child;Xp!==null;){for(ef=qh=Xp;qh!==null;){switch(Yp=qh,zf=Yp.child,Yp.tag){case 0:case 11:case 14:case 15:af(4,Yp,Yp.return);break;case 1:bp(Yp,Yp.return);var qf=Yp.stateNode;if(typeof qf.componentWillUnmount=="function"){it=Yp,z=Yp.return;try{u=it,qf.props=u.memoizedProps,qf.state=u.memoizedState,qf.componentWillUnmount()}catch(Kf){Zm(it,z,Kf)}}break;case 5:bp(Yp,Yp.return);break;case 22:if(Yp.memoizedState!==null){md(ef);continue}}zf!==null?(zf.return=Yp,qh=zf):md(ef)}Xp=Xp.sibling}e:for(Xp=null,ef=a;;){if(ef.tag===5){if(Xp===null){Xp=ef;try{Pl=ef.stateNode,lp?(Yl=Pl.style,typeof Yl.setProperty=="function"?Yl.setProperty("display","none","important"):Yl.display="none"):(nh=ef.stateNode,_h=ef.memoizedProps.style,ad=_h!=null&&_h.hasOwnProperty("display")?_h.display:null,nh.style.display=Jh("display",ad))}catch(Kf){Zm(a,a.return,Kf)}}}else if(ef.tag===6){if(Xp===null)try{ef.stateNode.nodeValue=lp?"":ef.memoizedProps}catch(Kf){Zm(a,a.return,Kf)}}else if((ef.tag!==22&&ef.tag!==23||ef.memoizedState===null||ef===a)&&ef.child!==null){ef.child.return=ef,ef=ef.child;continue}if(ef===a)break e;for(;ef.sibling===null;){if(ef.return===null||ef.return===a)break e;Xp===ef&&(Xp=null),ef=ef.return}Xp===ef&&(Xp=null),ef.sibling.return=ef.return,ef=ef.sibling}}break;case 19:pl(u,a),Ju(a),it&4&&wl(a);break;case 21:break;default:pl(u,a),Ju(a)}}function Ju(a){var u=a.flags;if(u&2){try{e:{for(var z=a.return;z!==null;){if(Lf(z)){var it=z;break e}z=z.return}throw Error(s(160))}switch(it.tag){case 5:var Pl=it.stateNode;it.flags&32&&(Fp(Pl,""),it.flags&=-33);var Yl=rg(a);gf(a,Yl,Pl);break;case 3:case 4:var ad=it.stateNode.containerInfo,nh=rg(a);ng(a,nh,ad);break;default:throw Error(s(161))}}catch(_h){Zm(a,a.return,_h)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function hd(a,u,z){qh=a,$u(a)}function $u(a,u,z){for(var it=(a.mode&1)!==0;qh!==null;){var Pl=qh,Yl=Pl.child;if(Pl.tag===22&&it){var ad=Pl.memoizedState!==null||fp;if(!ad){var nh=Pl.alternate,_h=nh!==null&&nh.memoizedState!==null||zh;nh=fp;var lp=zh;if(fp=ad,(zh=_h)&&!lp)for(qh=Pl;qh!==null;)ad=qh,_h=ad.child,ad.tag===22&&ad.memoizedState!==null?ld(Pl):_h!==null?(_h.return=ad,qh=_h):ld(Pl);for(;Yl!==null;)qh=Yl,$u(Yl),Yl=Yl.sibling;qh=Pl,fp=nh,zh=lp}Xu(a)}else(Pl.subtreeFlags&8772)!==0&&Yl!==null?(Yl.return=Pl,qh=Yl):Xu(a)}}function Xu(a){for(;qh!==null;){var u=qh;if((u.flags&8772)!==0){var z=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:zh||_f(5,u);break;case 1:var it=u.stateNode;if(u.flags&4&&!zh)if(z===null)it.componentDidMount();else{var Pl=u.elementType===u.type?z.memoizedProps:re(u.type,z.memoizedProps);it.componentDidUpdate(Pl,z.memoizedState,it.__reactInternalSnapshotBeforeUpdate)}var Yl=u.updateQueue;Yl!==null&&t3(u,Yl,it);break;case 3:var ad=u.updateQueue;if(ad!==null){if(z=null,u.child!==null)switch(u.child.tag){case 5:z=u.child.stateNode;break;case 1:z=u.child.stateNode}t3(u,ad,z)}break;case 5:var nh=u.stateNode;if(z===null&&u.flags&4){z=nh;var _h=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":_h.autoFocus&&z.focus();break;case"img":_h.src&&(z.src=_h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var lp=u.alternate;if(lp!==null){var Xp=lp.memoizedState;if(Xp!==null){var ef=Xp.dehydrated;ef!==null&&Nh(ef)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}zh||u.flags&512&&Lp(u)}catch(Yp){Zm(u,u.return,Yp)}}if(u===a){qh=null;break}if(z=u.sibling,z!==null){z.return=u.return,qh=z;break}qh=u.return}}function md(a){for(;qh!==null;){var u=qh;if(u===a){qh=null;break}var z=u.sibling;if(z!==null){z.return=u.return,qh=z;break}qh=u.return}}function ld(a){for(;qh!==null;){var u=qh;try{switch(u.tag){case 0:case 11:case 15:var z=u.return;try{_f(4,u)}catch(_h){Zm(u,z,_h)}break;case 1:var it=u.stateNode;if(typeof it.componentDidMount=="function"){var Pl=u.return;try{it.componentDidMount()}catch(_h){Zm(u,Pl,_h)}}var Yl=u.return;try{Lp(u)}catch(_h){Zm(u,Yl,_h)}break;case 5:var ad=u.return;try{Lp(u)}catch(_h){Zm(u,ad,_h)}}}catch(_h){Zm(u,u.return,_h)}if(u===a){qh=null;break}var nh=u.sibling;if(nh!==null){nh.return=u.return,qh=nh;break}qh=u.return}}var Ld=Math.ceil,zd=Tl.ReactCurrentDispatcher,gh=Tl.ReactCurrentOwner,ep=Tl.ReactCurrentBatchConfig,Bh=0,up=null,Uh=null,hp=0,Ep=0,Uf=Bv(0),qp=0,Ag=null,bf=0,Ig=0,yg=0,pm=null,Mg=null,Tf=0,xm=1/0,jg=null,Wf=!1,wm=null,im=null,fm=!1,Rm=null,n0=0,ug=0,nm=null,Og=-1,Xg=0;function Ug(){return(Bh&6)!==0?_p():Og!==-1?Og:Og=_p()}function km(a){return(a.mode&1)===0?1:(Bh&2)!==0&&hp!==0?hp&-hp:dy.transition!==null?(Xg===0&&(Xg=yl()),Xg):(a=Fl,a!==0||(a=window.event,a=a===void 0?16:pp(a.type)),a)}function Am(a,u,z,it){if(50<ug)throw ug=0,nm=null,Error(s(185));Cl(a,z,it),((Bh&2)===0||a!==up)&&(a===up&&((Bh&2)===0&&(Ig|=z),qp===4&&gm(a,hp)),um(a,it),z===1&&Bh===0&&(u.mode&1)===0&&(xm=_p()+500,ly&&n1()))}function um(a,u){var z=a.callbackNode;W(a,u);var it=f(a,a===up?hp:0);if(it===0)z!==null&&Eh(z),a.callbackNode=null,a.callbackPriority=0;else if(u=it&-it,a.callbackPriority!==u){if(z!=null&&Eh(z),u===1)a.tag===0?J2(g0.bind(null,a)):Q2(g0.bind(null,a)),Vy(function(){(Bh&6)===0&&n1()}),z=null;else{switch(Ol(it)){case 1:z=of;break;case 4:z=Bp;break;case 16:z=rf;break;case 536870912:z=xf;break;default:z=rf}z=qv(z,o0.bind(null,a))}a.callbackPriority=u,a.callbackNode=z}}function o0(a,u){if(Og=-1,Xg=0,(Bh&6)!==0)throw Error(s(327));var z=a.callbackNode;if(rv()&&a.callbackNode!==z)return null;var it=f(a,a===up?hp:0);if(it===0)return null;if((it&30)!==0||(it&a.expiredLanes)!==0||u)u=Qg(a,it);else{u=it;var Pl=Bh;Bh|=2;var Yl=x0();(up!==a||hp!==u)&&(jg=null,xm=_p()+500,Xm(a,u));do try{t0();break}catch(nh){Ym(a,nh)}while(!0);Yy(),zd.current=Yl,Bh=Pl,Uh!==null?u=0:(up=null,hp=0,u=qp)}if(u!==0){if(u===2&&(Pl=Q(a),Pl!==0&&(it=Pl,u=bm(a,Pl))),u===1)throw z=Ag,Xm(a,0),gm(a,it),um(a,_p()),z;if(u===6)gm(a,it);else{if(Pl=a.current.alternate,(it&30)===0&&!P0(Pl)&&(u=Qg(a,it),u===2&&(Yl=Q(a),Yl!==0&&(it=Yl,u=bm(a,Yl))),u===1))throw z=Ag,Xm(a,0),gm(a,it),um(a,_p()),z;switch(a.finishedWork=Pl,a.finishedLanes=it,u){case 0:case 1:throw Error(s(345));case 2:om(a,Mg,jg);break;case 3:if(gm(a,it),(it&130023424)===it&&(u=Tf+500-_p(),10<u)){if(f(a,0)!==0)break;if(Pl=a.suspendedLanes,(Pl&it)!==it){Ug(),a.pingedLanes|=a.suspendedLanes&Pl;break}a.timeoutHandle=J0(om.bind(null,a,Mg,jg),u);break}om(a,Mg,jg);break;case 4:if(gm(a,it),(it&4194240)===it)break;for(u=a.eventTimes,Pl=-1;0<it;){var ad=31-Vf(it);Yl=1<<ad,ad=u[ad],ad>Pl&&(Pl=ad),it&=~Yl}if(it=Pl,it=_p()-it,it=(120>it?120:480>it?480:1080>it?1080:1920>it?1920:3e3>it?3e3:4320>it?4320:1960*Ld(it/1960))-it,10<it){a.timeoutHandle=J0(om.bind(null,a,Mg,jg),it);break}om(a,Mg,jg);break;case 5:om(a,Mg,jg);break;default:throw Error(s(329))}}}return um(a,_p()),a.callbackNode===z?o0.bind(null,a):null}function bm(a,u){var z=pm;return a.current.memoizedState.isDehydrated&&(Xm(a,u).flags|=256),a=Qg(a,u),a!==2&&(u=Mg,Mg=z,u!==null&&Hg(u)),a}function Hg(a){Mg===null?Mg=a:Mg.push.apply(Mg,a)}function P0(a){for(var u=a;;){if(u.flags&16384){var z=u.updateQueue;if(z!==null&&(z=z.stores,z!==null))for(var it=0;it<z.length;it++){var Pl=z[it],Yl=Pl.getSnapshot;Pl=Pl.value;try{if(!lv(Yl(),Pl))return!1}catch{return!1}}}if(z=u.child,u.subtreeFlags&16384&&z!==null)z.return=u,u=z;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function gm(a,u){for(u&=~yg,u&=~Ig,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var z=31-Vf(u),it=1<<z;a[z]=-1,u&=~it}}function g0(a){if((Bh&6)!==0)throw Error(s(327));rv();var u=f(a,0);if((u&1)===0)return um(a,_p()),null;var z=Qg(a,u);if(a.tag!==0&&z===2){var it=Q(a);it!==0&&(u=it,z=bm(a,it))}if(z===1)throw z=Ag,Xm(a,0),gm(a,u),um(a,_p()),z;if(z===6)throw Error(s(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,om(a,Mg,jg),um(a,_p()),null}function a0(a,u){var z=Bh;Bh|=1;try{return a(u)}finally{Bh=z,Bh===0&&(xm=_p()+500,ly&&n1())}}function Nm(a){Rm!==null&&Rm.tag===0&&(Bh&6)===0&&rv();var u=Bh;Bh|=1;var z=ep.transition,it=Fl;try{if(ep.transition=null,Fl=1,a)return a()}finally{Fl=it,ep.transition=z,Bh=u,(Bh&6)===0&&n1()}}function y0(){Ep=Uf.current,jm(Uf)}function Xm(a,u){a.finishedWork=null,a.finishedLanes=0;var z=a.timeoutHandle;if(z!==-1&&(a.timeoutHandle=-1,ay(z)),Uh!==null)for(z=Uh.return;z!==null;){var it=z;switch(a1(it),it.tag){case 1:it=it.type.childContextTypes,it!=null&&F0();break;case 3:B1(),jm(I0),jm(L0),Jy();break;case 5:P2(it);break;case 4:B1();break;case 13:jm(zm);break;case 19:jm(zm);break;case 10:Ky(it.type._context);break;case 22:case 23:y0()}z=z.return}if(up=a,Uh=a=Kv(a.current,null),hp=Ep=u,qp=0,Ag=null,yg=Ig=bf=0,Mg=pm=null,Uv!==null){for(u=0;u<Uv.length;u++)if(z=Uv[u],it=z.interleaved,it!==null){z.interleaved=null;var Pl=it.next,Yl=z.pending;if(Yl!==null){var ad=Yl.next;Yl.next=Pl,it.next=ad}z.pending=it}Uv=null}return a}function Ym(a,u){do{var z=Uh;try{if(Yy(),xy.current=cl,x){for(var it=m.memoizedState;it!==null;){var Pl=it.queue;Pl!==null&&(Pl.pending=null),it=it.next}x=!1}if(Me=0,d=l=m=null,v=!1,y=0,gh.current=null,z===null||z.return===null){qp=1,Ag=u,Uh=null;break}e:{var Yl=a,ad=z.return,nh=z,_h=u;if(u=hp,nh.flags|=32768,_h!==null&&typeof _h=="object"&&typeof _h.then=="function"){var lp=_h,Xp=nh,ef=Xp.tag;if((Xp.mode&1)===0&&(ef===0||ef===11||ef===15)){var Yp=Xp.alternate;Yp?(Xp.updateQueue=Yp.updateQueue,Xp.memoizedState=Yp.memoizedState,Xp.lanes=Yp.lanes):(Xp.updateQueue=null,Xp.memoizedState=null)}var zf=Rl(ad);if(zf!==null){zf.flags&=-257,Wu(zf,ad,nh,Yl,u),zf.mode&1&&vu(Yl,lp,u),u=zf,_h=lp;var qf=u.updateQueue;if(qf===null){var Kf=new Set;Kf.add(_h),u.updateQueue=Kf}else qf.add(_h);break e}else{if((u&1)===0){vu(Yl,lp,u),E0();break e}_h=Error(s(426))}}else if(Jm&&nh.mode&1){var u0=Rl(ad);if(u0!==null){(u0.flags&65536)===0&&(u0.flags|=256),Wu(u0,ad,nh,Yl,u),Wy(Vu(_h,nh));break e}}Yl=_h=Vu(_h,nh),qp!==4&&(qp=2),pm===null?pm=[Yl]:pm.push(Yl),Yl=ad;do{switch(Yl.tag){case 3:Yl.flags|=65536,u&=-u,Yl.lanes|=u;var Qh=fd(Yl,_h,u);Xy(Yl,Qh);break e;case 1:nh=_h;var Oh=Yl.type,op=Yl.stateNode;if((Yl.flags&128)===0&&(typeof Oh.getDerivedStateFromError=="function"||op!==null&&typeof op.componentDidCatch=="function"&&(im===null||!im.has(op)))){Yl.flags|=65536,u&=-u,Yl.lanes|=u;var df=Kl(Yl,nh,u);Xy(Yl,df);break e}}Yl=Yl.return}while(Yl!==null)}Km(z)}catch(Yf){u=Yf,Uh===z&&z!==null&&(Uh=z=z.return);continue}break}while(!0)}function x0(){var a=zd.current;return zd.current=cl,a===null?cl:a}function E0(){(qp===0||qp===3||qp===2)&&(qp=4),up===null||(bf&268435455)===0&&(Ig&268435455)===0||gm(up,hp)}function Qg(a,u){var z=Bh;Bh|=2;var it=x0();(up!==a||hp!==u)&&(jg=null,Xm(a,u));do try{Sm();break}catch(Pl){Ym(a,Pl)}while(!0);if(Yy(),Bh=z,zd.current=it,Uh!==null)throw Error(s(261));return up=null,hp=0,qp}function Sm(){for(;Uh!==null;)m0(Uh)}function t0(){for(;Uh!==null&&!ph();)m0(Uh)}function m0(a){var u=C1(a.alternate,a,Ep);a.memoizedProps=a.pendingProps,u===null?Km(a):Uh=u,gh.current=null}function Km(a){var u=a;do{var z=u.alternate;if(a=u.return,(u.flags&32768)===0){if(z=Pp(z,u,Ep),z!==null){Uh=z;return}}else{if(z=Up(z,u),z!==null){z.flags&=32767,Uh=z;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{qp=6,Uh=null;return}}if(u=u.sibling,u!==null){Uh=u;return}Uh=u=a}while(u!==null);qp===0&&(qp=5)}function om(a,u,z){var it=Fl,Pl=ep.transition;try{ep.transition=null,Fl=1,w0(a,u,z,it)}finally{ep.transition=Pl,Fl=it}return null}function w0(a,u,z,it){do rv();while(Rm!==null);if((Bh&6)!==0)throw Error(s(327));z=a.finishedWork;var Pl=a.finishedLanes;if(z===null)return null;if(a.finishedWork=null,a.finishedLanes=0,z===a.current)throw Error(s(177));a.callbackNode=null,a.callbackPriority=0;var Yl=z.lanes|z.childLanes;if(Al(a,Yl),a===up&&(Uh=up=null,hp=0),(z.subtreeFlags&2064)===0&&(z.flags&2064)===0||fm||(fm=!0,qv(rf,function(){return rv(),null})),Yl=(z.flags&15990)!==0,(z.subtreeFlags&15990)!==0||Yl){Yl=ep.transition,ep.transition=null;var ad=Fl;Fl=1;var nh=Bh;Bh|=4,gh.current=null,mp(a,z),Yu(z,a),zy(S2),Th=!!D0,S2=D0=null,a.current=z,hd(z),jp(),Bh=nh,Fl=ad,ep.transition=Yl}else a.current=z;if(fm&&(fm=!1,Rm=a,n0=Pl),Yl=a.pendingLanes,Yl===0&&(im=null),Fm(z.stateNode),um(a,_p()),u!==null)for(it=a.onRecoverableError,z=0;z<u.length;z++)Pl=u[z],it(Pl.value,{componentStack:Pl.stack,digest:Pl.digest});if(Wf)throw Wf=!1,a=wm,wm=null,a;return(n0&1)!==0&&a.tag!==0&&rv(),Yl=a.pendingLanes,(Yl&1)!==0?a===nm?ug++:(ug=0,nm=a):ug=0,n1(),null}function rv(){if(Rm!==null){var a=Ol(n0),u=ep.transition,z=Fl;try{if(ep.transition=null,Fl=16>a?16:a,Rm===null)var it=!1;else{if(a=Rm,Rm=null,n0=0,(Bh&6)!==0)throw Error(s(331));var Pl=Bh;for(Bh|=4,qh=a.current;qh!==null;){var Yl=qh,ad=Yl.child;if((qh.flags&16)!==0){var nh=Yl.deletions;if(nh!==null){for(var _h=0;_h<nh.length;_h++){var lp=nh[_h];for(qh=lp;qh!==null;){var Xp=qh;switch(Xp.tag){case 0:case 11:case 15:af(8,Xp,Yl)}var ef=Xp.child;if(ef!==null)ef.return=Xp,qh=ef;else for(;qh!==null;){Xp=qh;var Yp=Xp.sibling,zf=Xp.return;if(Ef(Xp),Xp===lp){qh=null;break}if(Yp!==null){Yp.return=zf,qh=Yp;break}qh=zf}}}var qf=Yl.alternate;if(qf!==null){var Kf=qf.child;if(Kf!==null){qf.child=null;do{var u0=Kf.sibling;Kf.sibling=null,Kf=u0}while(Kf!==null)}}qh=Yl}}if((Yl.subtreeFlags&2064)!==0&&ad!==null)ad.return=Yl,qh=ad;else e:for(;qh!==null;){if(Yl=qh,(Yl.flags&2048)!==0)switch(Yl.tag){case 0:case 11:case 15:af(9,Yl,Yl.return)}var Qh=Yl.sibling;if(Qh!==null){Qh.return=Yl.return,qh=Qh;break e}qh=Yl.return}}var Oh=a.current;for(qh=Oh;qh!==null;){ad=qh;var op=ad.child;if((ad.subtreeFlags&2064)!==0&&op!==null)op.return=ad,qh=op;else e:for(ad=Oh;qh!==null;){if(nh=qh,(nh.flags&2048)!==0)try{switch(nh.tag){case 0:case 11:case 15:_f(9,nh)}}catch(Yf){Zm(nh,nh.return,Yf)}if(nh===ad){qh=null;break e}var df=nh.sibling;if(df!==null){df.return=nh.return,qh=df;break e}qh=nh.return}}if(Bh=Pl,n1(),em&&typeof em.onPostCommitFiberRoot=="function")try{em.onPostCommitFiberRoot(Ng,a)}catch{}it=!0}return it}finally{Fl=z,ep.transition=u}}return!1}function Cv(a,u,z){u=Vu(z,u),u=fd(a,u,1),a=Wv(a,u,1),u=Ug(),a!==null&&(Cl(a,1,u),um(a,u))}function Zm(a,u,z){if(a.tag===3)Cv(a,a,z);else for(;u!==null;){if(u.tag===3){Cv(u,a,z);break}else if(u.tag===1){var it=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof it.componentDidCatch=="function"&&(im===null||!im.has(it))){a=Vu(z,a),a=Kl(u,a,1),u=Wv(u,a,1),a=Ug(),u!==null&&(Cl(u,1,a),um(u,a));break}}u=u.return}}function bv(a,u,z){var it=a.pingCache;it!==null&&it.delete(u),u=Ug(),a.pingedLanes|=a.suspendedLanes&z,up===a&&(hp&z)===z&&(qp===4||qp===3&&(hp&130023424)===hp&&500>_p()-Tf?Xm(a,0):yg|=z),um(a,u)}function wy(a,u){u===0&&((a.mode&1)===0?u=1:(u=Mm,Mm<<=1,(Mm&130023424)===0&&(Mm=4194304)));var z=Ug();a=Fv(a,u),a!==null&&(Cl(a,u,z),um(a,z))}function e2(a){var u=a.memoizedState,z=0;u!==null&&(z=u.retryLane),wy(a,z)}function Cy(a,u){var z=0;switch(a.tag){case 13:var it=a.stateNode,Pl=a.memoizedState;Pl!==null&&(z=Pl.retryLane);break;case 19:it=a.stateNode;break;default:throw Error(s(314))}it!==null&&it.delete(u),wy(a,z)}var C1;C1=function(a,u,z){if(a!==null)if(a.memoizedProps!==u.pendingProps||I0.current)xd=!0;else{if((a.lanes&z)===0&&(u.flags&128)===0)return xd=!1,bd(a,u,z);xd=(a.flags&131072)!==0}else xd=!1,Jm&&(u.flags&1048576)!==0&&e3(u,Uy,u.index);switch(u.lanes=0,u.tag){case 2:var it=u.type;Sd(a,u),a=u.pendingProps;var Pl=g1(u,L0.current);tv(u,z),Pl=F(null,u,it,a,Pl,z);var Yl=b();return u.flags|=1,typeof Pl=="object"&&Pl!==null&&typeof Pl.render=="function"&&Pl.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,T0(it)?(Yl=!0,jy(u)):Yl=!1,u.memoizedState=Pl.state!==null&&Pl.state!==void 0?Pl.state:null,Zy(u),Pl.updater=ls,u.stateNode=Pl,Pl._reactInternals=u,yu(u,it,a,z),u=Dh(null,u,it,!0,Yl,z)):(u.tag=0,Jm&&Yl&&cy(u),Td(null,u,Pl,z),u=u.child),u;case 16:it=u.elementType;e:{switch(Sd(a,u),a=u.pendingProps,Pl=it._init,it=Pl(it._payload),u.type=it,Pl=u.tag=Yv(it),a=re(it,a),Pl){case 0:u=Dd(null,u,it,a,z);break e;case 1:u=bh(null,u,it,a,z);break e;case 11:u=Pd(null,u,it,a,z);break e;case 14:u=Hd(null,u,it,re(it.type,a),z);break e}throw Error(s(306,it,""))}return u;case 0:return it=u.type,Pl=u.pendingProps,Pl=u.elementType===it?Pl:re(it,Pl),Dd(a,u,it,Pl,z);case 1:return it=u.type,Pl=u.pendingProps,Pl=u.elementType===it?Pl:re(it,Pl),bh(a,u,it,Pl,z);case 3:e:{if(vh(u),a===null)throw Error(s(387));it=u.pendingProps,Yl=u.memoizedState,Pl=Yl.element,f0(a,u),Qy(u,it,null,z);var ad=u.memoizedState;if(it=ad.element,Yl.isDehydrated)if(Yl={element:it,isDehydrated:!1,cache:ad.cache,pendingSuspenseBoundaries:ad.pendingSuspenseBoundaries,transitions:ad.transitions},u.updateQueue.baseState=Yl,u.memoizedState=Yl,u.flags&256){Pl=Vu(Error(s(423)),u),u=Gh(a,u,it,z,Pl);break e}else if(it!==Pl){Pl=Vu(Error(s(424)),u),u=Gh(a,u,it,z,Pl);break e}else for(c0=vv(u.stateNode.containerInfo.firstChild),O0=u,Jm=!0,dv=null,z=wv(u,null,it,z),u.child=z;z;)z.flags=z.flags&-3|4096,z=z.sibling;else{if(jv(),it===Pl){u=yd(a,u,z);break e}Td(a,u,it,z)}u=u.child}return u;case 5:return r3(u),a===null&&D1(u),it=u.type,Pl=u.pendingProps,Yl=a!==null?a.memoizedProps:null,ad=Pl.children,Gy(it,Pl)?ad=null:Yl!==null&&Gy(it,Yl)&&(u.flags|=32),mh(a,u),Td(a,u,ad,z),u.child;case 6:return a===null&&D1(u),null;case 13:return gl(a,u,z);case 4:return yy(u,u.stateNode.containerInfo),it=u.pendingProps,a===null?u.child=kv(u,null,it,z):Td(a,u,it,z),u.child;case 11:return it=u.type,Pl=u.pendingProps,Pl=u.elementType===it?Pl:re(it,Pl),Pd(a,u,it,Pl,z);case 7:return Td(a,u,u.pendingProps,z),u.child;case 8:return Td(a,u,u.pendingProps.children,z),u.child;case 12:return Td(a,u,u.pendingProps.children,z),u.child;case 10:e:{if(it=u.type._context,Pl=u.pendingProps,Yl=u.memoizedProps,ad=Pl.value,qm(hy,it._currentValue),it._currentValue=ad,Yl!==null)if(lv(Yl.value,ad)){if(Yl.children===Pl.children&&!I0.current){u=yd(a,u,z);break e}}else for(Yl=u.child,Yl!==null&&(Yl.return=u);Yl!==null;){var nh=Yl.dependencies;if(nh!==null){ad=Yl.child;for(var _h=nh.firstContext;_h!==null;){if(_h.context===it){if(Yl.tag===1){_h=e0(-1,z&-z),_h.tag=2;var lp=Yl.updateQueue;if(lp!==null){lp=lp.shared;var Xp=lp.pending;Xp===null?_h.next=_h:(_h.next=Xp.next,Xp.next=_h),lp.pending=_h}}Yl.lanes|=z,_h=Yl.alternate,_h!==null&&(_h.lanes|=z),fy(Yl.return,z,u),nh.lanes|=z;break}_h=_h.next}}else if(Yl.tag===10)ad=Yl.type===u.type?null:Yl.child;else if(Yl.tag===18){if(ad=Yl.return,ad===null)throw Error(s(341));ad.lanes|=z,nh=ad.alternate,nh!==null&&(nh.lanes|=z),fy(ad,z,u),ad=Yl.sibling}else ad=Yl.child;if(ad!==null)ad.return=Yl;else for(ad=Yl;ad!==null;){if(ad===u){ad=null;break}if(Yl=ad.sibling,Yl!==null){Yl.return=ad.return,ad=Yl;break}ad=ad.return}Yl=ad}Td(a,u,Pl.children,z),u=u.child}return u;case 9:return Pl=u.type,it=u.pendingProps.children,tv(u,z),Pl=Y0(Pl),it=it(Pl),u.flags|=1,Td(a,u,it,z),u.child;case 14:return it=u.type,Pl=re(it,u.pendingProps),Pl=re(it.type,Pl),Hd(a,u,it,Pl,z);case 15:return $d(a,u,u.type,u.pendingProps,z);case 17:return it=u.type,Pl=u.pendingProps,Pl=u.elementType===it?Pl:re(it,Pl),Sd(a,u),u.tag=1,T0(it)?(a=!0,jy(u)):a=!1,tv(u,z),Ll(u,it,Pl),yu(u,it,Pl,z),Dh(null,u,it,!0,a,z);case 19:return sd(a,u,z);case 22:return Wd(a,u,z)}throw Error(s(156,u.tag))};function qv(a,u){return Vd(a,u)}function M3(a,u,z,it){this.tag=a,this.key=z,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=it,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function G0(a,u,z,it){return new M3(a,u,z,it)}function by(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Yv(a){if(typeof a=="function")return by(a)?1:0;if(a!=null){if(a=a.$$typeof,a===rh)return 11;if(a===Ed)return 14}return 2}function Kv(a,u){var z=a.alternate;return z===null?(z=G0(a.tag,u,a.key,a.mode),z.elementType=a.elementType,z.type=a.type,z.stateNode=a.stateNode,z.alternate=a,a.alternate=z):(z.pendingProps=u,z.type=a.type,z.flags=0,z.subtreeFlags=0,z.deletions=null),z.flags=a.flags&14680064,z.childLanes=a.childLanes,z.lanes=a.lanes,z.child=a.child,z.memoizedProps=a.memoizedProps,z.memoizedState=a.memoizedState,z.updateQueue=a.updateQueue,u=a.dependencies,z.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},z.sibling=a.sibling,z.index=a.index,z.ref=a.ref,z}function b1(a,u,z,it,Pl,Yl){var ad=2;if(it=a,typeof a=="function")by(a)&&(ad=1);else if(typeof a=="string")ad=5;else e:switch(a){case Pu:return Zv(z.children,Pl,Yl,u);case Il:ad=8,Pl|=8;break;case ud:return a=G0(12,z,u,Pl|2),a.elementType=ud,a.lanes=Yl,a;case qd:return a=G0(13,z,u,Pl),a.elementType=qd,a.lanes=Yl,a;case oh:return a=G0(19,z,u,Pl),a.elementType=oh,a.lanes=Yl,a;case Gd:return K0(z,Pl,Yl,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case pd:ad=10;break e;case id:ad=9;break e;case rh:ad=11;break e;case Ed:ad=14;break e;case Nl:ad=16,it=null;break e}throw Error(s(130,a==null?a:typeof a,""))}return u=G0(ad,z,u,Pl),u.elementType=a,u.type=it,u.lanes=Yl,u}function Zv(a,u,z,it){return a=G0(7,a,it,u),a.lanes=z,a}function K0(a,u,z,it){return a=G0(22,a,it,u),a.elementType=Gd,a.lanes=z,a.stateNode={isHidden:!1},a}function G1(a,u,z){return a=G0(6,a,null,u),a.lanes=z,a}function Sy(a,u,z){return u=G0(4,a.children!==null?a.children:[],a.key,u),u.lanes=z,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function R3(a,u,z,it,Pl){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ln(0),this.expirationTimes=Ln(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ln(0),this.identifierPrefix=it,this.onRecoverableError=Pl,this.mutableSourceEagerHydrationData=null}function t2(a,u,z,it,Pl,Yl,ad,nh,_h){return a=new R3(a,u,z,nh,_h),u===1?(u=1,Yl===!0&&(u|=8)):u=0,Yl=G0(3,null,null,u),a.current=Yl,Yl.stateNode=a,Yl.memoizedState={element:it,isDehydrated:z,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zy(Yl),a}function i3(a,u,z){var it=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bl,key:it==null?null:""+it,children:a,containerInfo:u,implementation:z}}function r2(a){if(!a)return q0;a=a._reactInternals;e:{if(sm(a)!==a||a.tag!==1)throw Error(s(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(T0(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(s(171))}if(a.tag===1){var z=a.type;if(T0(z))return Z2(a,z,u)}return u}function i2(a,u,z,it,Pl,Yl,ad,nh,_h){return a=t2(z,it,!0,a,Pl,Yl,ad,nh,_h),a.context=r2(null),z=a.current,it=Ug(),Pl=km(z),Yl=e0(it,Pl),Yl.callback=u??null,Wv(z,Yl,Pl),a.current.lanes=Pl,Cl(a,Pl,it),um(a,it),a}function _y(a,u,z,it){var Pl=u.current,Yl=Ug(),ad=km(Pl);return z=r2(z),u.context===null?u.context=z:u.pendingContext=z,u=e0(Yl,ad),u.payload={element:a},it=it===void 0?null:it,it!==null&&(u.callback=it),a=Wv(Pl,u,ad),a!==null&&(Am(a,Pl,ad,Yl),N1(a,Pl,ad)),ad}function Ey(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function D2(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var z=a.retryLane;a.retryLane=z!==0&&z<u?z:u}}function n2(a,u){D2(a,u),(a=a.alternate)&&D2(a,u)}function n3(){return null}var L2=typeof reportError=="function"?reportError:function(a){console.error(a)};function o2(a){this._internalRoot=a}Ay.prototype.render=o2.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(s(409));_y(a,u,null,null)},Ay.prototype.unmount=o2.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;Nm(function(){_y(null,a,null,null)}),u[yv]=null}};function Ay(a){this._internalRoot=a}Ay.prototype.unstable_scheduleHydration=function(a){if(a){var u=hu();a={blockedOn:null,target:a,priority:u};for(var z=0;z<ih.length&&u!==0&&u<ih[z].priority;z++);ih.splice(z,0,a),z===0&&eh(a)}};function a2(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s2(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function I2(){}function o3(a,u,z,it,Pl){if(Pl){if(typeof it=="function"){var Yl=it;it=function(){var lp=Ey(ad);Yl.call(lp)}}var ad=i2(u,it,a,0,null,!1,!1,"",I2);return a._reactRootContainer=ad,a[yv]=ad.current,ty(a.nodeType===8?a.parentNode:a),Nm(),ad}for(;Pl=a.lastChild;)a.removeChild(Pl);if(typeof it=="function"){var nh=it;it=function(){var lp=Ey(_h);nh.call(lp)}}var _h=t2(a,0,!1,null,null,!1,!1,"",I2);return a._reactRootContainer=_h,a[yv]=_h.current,ty(a.nodeType===8?a.parentNode:a),Nm(function(){_y(u,_h,z,it)}),_h}function My(a,u,z,it,Pl){var Yl=z._reactRootContainer;if(Yl){var ad=Yl;if(typeof Pl=="function"){var nh=Pl;Pl=function(){var _h=Ey(ad);nh.call(_h)}}_y(u,ad,a,Pl)}else ad=o3(z,u,a,Pl,it);return Ey(ad)}mu=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var z=dd(u.pendingLanes);z!==0&&(vl(u,z|1),um(u,_p()),(Bh&6)===0&&(xm=_p()+500,n1()))}break;case 13:Nm(function(){var it=Fv(a,1);if(it!==null){var Pl=Ug();Am(it,a,1,Pl)}}),n2(a,1)}},Xl=function(a){if(a.tag===13){var u=Fv(a,134217728);if(u!==null){var z=Ug();Am(u,a,134217728,z)}n2(a,134217728)}},Wl=function(a){if(a.tag===13){var u=km(a),z=Fv(a,u);if(z!==null){var it=Ug();Am(z,a,u,it)}n2(a,u)}},hu=function(){return Fl},Jl=function(a,u){var z=Fl;try{return Fl=a,u()}finally{Fl=z}},Im=function(a,u,z){switch(u){case"input":if(Hf(a,z),u=z.name,z.type==="radio"&&u!=null){for(z=a;z.parentNode;)z=z.parentNode;for(z=z.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<z.length;u++){var it=z[u];if(it!==a&&it.form===a.form){var Pl=sy(it);if(!Pl)throw Error(s(90));mf(it),Hf(it,Pl)}}}break;case"textarea":Bm(a,z);break;case"select":u=z.value,u!=null&&Wg(a,!!z.multiple,u,!1)}},ff=a0,r0=Nm;var Ry={usingClientEntryPoint:!1,Events:[xv,Rv,sy,Jg,pf,a0]},V1={findFiberByHostInstance:$0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l2={bundleType:V1.bundleType,version:V1.version,rendererPackageName:V1.rendererPackageName,rendererConfig:V1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tl.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=rt(a),a===null?null:a.stateNode},findFiberByHostInstance:V1.findFiberByHostInstance||n3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ky=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ky.isDisabled&&ky.supportsFiber)try{Ng=ky.inject(l2),em=ky}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ry,reactDom_production_min.createPortal=function(a,u){var z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a2(u))throw Error(s(200));return i3(a,u,null,z)},reactDom_production_min.createRoot=function(a,u){if(!a2(a))throw Error(s(299));var z=!1,it="",Pl=L2;return u!=null&&(u.unstable_strictMode===!0&&(z=!0),u.identifierPrefix!==void 0&&(it=u.identifierPrefix),u.onRecoverableError!==void 0&&(Pl=u.onRecoverableError)),u=t2(a,1,!1,null,null,z,!1,it,Pl),a[yv]=u.current,ty(a.nodeType===8?a.parentNode:a),new o2(u)},reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=rt(u),a=a===null?null:a.stateNode,a},reactDom_production_min.flushSync=function(a){return Nm(a)},reactDom_production_min.hydrate=function(a,u,z){if(!s2(u))throw Error(s(200));return My(null,a,u,!0,z)},reactDom_production_min.hydrateRoot=function(a,u,z){if(!a2(a))throw Error(s(405));var it=z!=null&&z.hydratedSources||null,Pl=!1,Yl="",ad=L2;if(z!=null&&(z.unstable_strictMode===!0&&(Pl=!0),z.identifierPrefix!==void 0&&(Yl=z.identifierPrefix),z.onRecoverableError!==void 0&&(ad=z.onRecoverableError)),u=i2(u,null,a,1,z??null,Pl,!1,Yl,ad),a[yv]=u.current,ty(a),it)for(a=0;a<it.length;a++)z=it[a],Pl=z._getVersion,Pl=Pl(z._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[z,Pl]:u.mutableSourceEagerHydrationData.push(z,Pl);return new Ay(u)},reactDom_production_min.render=function(a,u,z){if(!s2(u))throw Error(s(200));return My(null,a,u,!1,z)},reactDom_production_min.unmountComponentAtNode=function(a){if(!s2(a))throw Error(s(40));return a._reactRootContainer?(Nm(function(){My(null,null,a,!1,function(){a._reactRootContainer=null,a[yv]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=a0,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,u,z,it){if(!s2(z))throw Error(s(200));if(a==null||a._reactInternals===void 0)throw Error(s(38));return My(a,u,z,!1,it)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(h){console.error(h)}}return n(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var n=requireReactDom();return client.createRoot=n.createRoot,client.hydrateRoot=n.hydrateRoot,client}var clientExports=requireClient();const ReactDOM$1=getDefaultExportFromCjs(clientExports),scriptRel="modulepreload",assetsURL=function(n){return"/"+n},seen={},__vitePreload=function(h,s,_){let M=Promise.resolve();if(s&&s.length>0){let Y=function(ie){return Promise.all(ie.map(zn=>Promise.resolve(zn).then(Et=>({status:"fulfilled",value:Et}),Et=>({status:"rejected",reason:Et}))))};document.getElementsByTagName("link");const V=document.querySelector("meta[property=csp-nonce]"),oe=V?.nonce||V?.getAttribute("nonce");M=Y(s.map(ie=>{if(ie=assetsURL(ie),ie in seen)return;seen[ie]=!0;const zn=ie.endsWith(".css"),Et=zn?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${ie}"]${Et}`))return;const ml=document.createElement("link");if(ml.rel=zn?"stylesheet":scriptRel,zn||(ml.as="script"),ml.crossOrigin="",ml.href=ie,oe&&ml.setAttribute("nonce",oe),document.head.appendChild(ml),zn)return new Promise((rl,Ml)=>{ml.addEventListener("load",rl),ml.addEventListener("error",()=>Ml(new Error(`Unable to preload CSS for ${ie}`)))})}))}function $(V){const oe=new Event("vite:preloadError",{cancelable:!0});if(oe.payload=V,window.dispatchEvent(oe),!oe.defaultPrevented)throw V}return M.then(V=>{for(const oe of V||[])oe.status==="rejected"&&$(oe.reason);return h().catch($)})};var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(n){for(var h=1;h<arguments.length;h++){var s=arguments[h];for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(n[_]=s[_])}return n},_extends$4.apply(this,arguments)}var Action;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createHashHistory(n){n===void 0&&(n={});function h(M,$){let{pathname:V="/",search:oe="",hash:Y=""}=parsePath(M.location.hash.substr(1));return!V.startsWith("/")&&!V.startsWith(".")&&(V="/"+V),createLocation("",{pathname:V,search:oe,hash:Y},$.state&&$.state.usr||null,$.state&&$.state.key||"default")}function s(M,$){let V=M.document.querySelector("base"),oe="";if(V&&V.getAttribute("href")){let Y=M.location.href,ie=Y.indexOf("#");oe=ie===-1?Y:Y.slice(0,ie)}return oe+"#"+(typeof $=="string"?$:createPath($))}function _(M,$){warning(M.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify($)+")")}return getUrlBasedHistory(h,s,_,n)}function invariant(n,h){if(n===!1||n===null||typeof n>"u")throw new Error(h)}function warning(n,h){if(!n){typeof console<"u"&&console.warn(h);try{throw new Error(h)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(n,h){return{usr:n.state,key:n.key,idx:h}}function createLocation(n,h,s,_){return s===void 0&&(s=null),_extends$4({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof h=="string"?parsePath(h):h,{state:s,key:h&&h.key||_||createKey()})}function createPath(n){let{pathname:h="/",search:s="",hash:_=""}=n;return s&&s!=="?"&&(h+=s.charAt(0)==="?"?s:"?"+s),_&&_!=="#"&&(h+=_.charAt(0)==="#"?_:"#"+_),h}function parsePath(n){let h={};if(n){let s=n.indexOf("#");s>=0&&(h.hash=n.substr(s),n=n.substr(0,s));let _=n.indexOf("?");_>=0&&(h.search=n.substr(_),n=n.substr(0,_)),n&&(h.pathname=n)}return h}function getUrlBasedHistory(n,h,s,_){_===void 0&&(_={});let{window:M=document.defaultView,v5Compat:$=!1}=_,V=M.history,oe=Action.Pop,Y=null,ie=zn();ie==null&&(ie=0,V.replaceState(_extends$4({},V.state,{idx:ie}),""));function zn(){return(V.state||{idx:null}).idx}function Et(){oe=Action.Pop;let _u=zn(),Hu=_u==null?null:_u-ie;ie=_u,Y&&Y({action:oe,location:kl.location,delta:Hu})}function ml(_u,Hu){oe=Action.Push;let bu=createLocation(kl.location,_u,Hu);s&&s(bu,_u),ie=zn()+1;let dl=getHistoryState(bu,ie),Tl=kl.createHref(bu);try{V.pushState(dl,"",Tl)}catch($l){if($l instanceof DOMException&&$l.name==="DataCloneError")throw $l;M.location.assign(Tl)}$&&Y&&Y({action:oe,location:kl.location,delta:1})}function rl(_u,Hu){oe=Action.Replace;let bu=createLocation(kl.location,_u,Hu);s&&s(bu,_u),ie=zn();let dl=getHistoryState(bu,ie),Tl=kl.createHref(bu);V.replaceState(dl,"",Tl),$&&Y&&Y({action:oe,location:kl.location,delta:0})}function Ml(_u){let Hu=M.location.origin!=="null"?M.location.origin:M.location.href,bu=typeof _u=="string"?_u:createPath(_u);return bu=bu.replace(/ $/,"%20"),invariant(Hu,"No window.location.(origin|href) available to create URL for href: "+bu),new URL(bu,Hu)}let kl={get action(){return oe},get location(){return n(M,V)},listen(_u){if(Y)throw new Error("A history only accepts one active listener");return M.addEventListener(PopStateEventType,Et),Y=_u,()=>{M.removeEventListener(PopStateEventType,Et),Y=null}},createHref(_u){return h(M,_u)},createURL:Ml,encodeLocation(_u){let Hu=Ml(_u);return{pathname:Hu.pathname,search:Hu.search,hash:Hu.hash}},push:ml,replace:rl,go(_u){return V.go(_u)}};return kl}var ResultType;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ResultType||(ResultType={}));function matchRoutes(n,h,s){return s===void 0&&(s="/"),matchRoutesImpl(n,h,s)}function matchRoutesImpl(n,h,s,_){let M=typeof h=="string"?parsePath(h):h,$=stripBasename(M.pathname||"/",s);if($==null)return null;let V=flattenRoutes(n);rankRouteBranches(V);let oe=null;for(let Y=0;oe==null&&Y<V.length;++Y){let ie=decodePath($);oe=matchRouteBranch(V[Y],ie)}return oe}function flattenRoutes(n,h,s,_){h===void 0&&(h=[]),s===void 0&&(s=[]),_===void 0&&(_="");let M=($,V,oe)=>{let Y={relativePath:oe===void 0?$.path||"":oe,caseSensitive:$.caseSensitive===!0,childrenIndex:V,route:$};Y.relativePath.startsWith("/")&&(invariant(Y.relativePath.startsWith(_),'Absolute route path "'+Y.relativePath+'" nested under path '+('"'+_+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),Y.relativePath=Y.relativePath.slice(_.length));let ie=joinPaths([_,Y.relativePath]),zn=s.concat(Y);$.children&&$.children.length>0&&(invariant($.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+ie+'".')),flattenRoutes($.children,h,zn,ie)),!($.path==null&&!$.index)&&h.push({path:ie,score:computeScore(ie,$.index),routesMeta:zn})};return n.forEach(($,V)=>{var oe;if($.path===""||!((oe=$.path)!=null&&oe.includes("?")))M($,V);else for(let Y of explodeOptionalSegments($.path))M($,V,Y)}),h}function explodeOptionalSegments(n){let h=n.split("/");if(h.length===0)return[];let[s,..._]=h,M=s.endsWith("?"),$=s.replace(/\?$/,"");if(_.length===0)return M?[$,""]:[$];let V=explodeOptionalSegments(_.join("/")),oe=[];return oe.push(...V.map(Y=>Y===""?$:[$,Y].join("/"))),M&&oe.push(...V),oe.map(Y=>n.startsWith("/")&&Y===""?"/":Y)}function rankRouteBranches(n){n.sort((h,s)=>h.score!==s.score?s.score-h.score:compareIndexes(h.routesMeta.map(_=>_.childrenIndex),s.routesMeta.map(_=>_.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=n=>n==="*";function computeScore(n,h){let s=n.split("/"),_=s.length;return s.some(isSplat)&&(_+=splatPenalty),h&&(_+=indexRouteValue),s.filter(M=>!isSplat(M)).reduce((M,$)=>M+(paramRe.test($)?dynamicSegmentValue:$===""?emptySegmentValue:staticSegmentValue),_)}function compareIndexes(n,h){return n.length===h.length&&n.slice(0,-1).every((_,M)=>_===h[M])?n[n.length-1]-h[h.length-1]:0}function matchRouteBranch(n,h,s){let{routesMeta:_}=n,M={},$="/",V=[];for(let oe=0;oe<_.length;++oe){let Y=_[oe],ie=oe===_.length-1,zn=$==="/"?h:h.slice($.length)||"/",Et=matchPath({path:Y.relativePath,caseSensitive:Y.caseSensitive,end:ie},zn),ml=Y.route;if(!Et)return null;Object.assign(M,Et.params),V.push({params:M,pathname:joinPaths([$,Et.pathname]),pathnameBase:normalizePathname(joinPaths([$,Et.pathnameBase])),route:ml}),Et.pathnameBase!=="/"&&($=joinPaths([$,Et.pathnameBase]))}return V}function matchPath(n,h){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,_]=compilePath(n.path,n.caseSensitive,n.end),M=h.match(s);if(!M)return null;let $=M[0],V=$.replace(/(.)\/+$/,"$1"),oe=M.slice(1);return{params:_.reduce((ie,zn,Et)=>{let{paramName:ml,isOptional:rl}=zn;if(ml==="*"){let kl=oe[Et]||"";V=$.slice(0,$.length-kl.length).replace(/(.)\/+$/,"$1")}const Ml=oe[Et];return rl&&!Ml?ie[ml]=void 0:ie[ml]=(Ml||"").replace(/%2F/g,"/"),ie},{}),pathname:$,pathnameBase:V,pattern:n}}function compilePath(n,h,s){h===void 0&&(h=!1),s===void 0&&(s=!0),warning(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let _=[],M="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(V,oe,Y)=>(_.push({paramName:oe,isOptional:Y!=null}),Y?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(_.push({paramName:"*"}),M+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?M+="\\/*$":n!==""&&n!=="/"&&(M+="(?:(?=\\/|$))"),[new RegExp(M,h?void 0:"i"),_]}function decodePath(n){try{return n.split("/").map(h=>decodeURIComponent(h).replace(/\//g,"%2F")).join("/")}catch(h){return warning(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+h+").")),n}}function stripBasename(n,h){if(h==="/")return n;if(!n.toLowerCase().startsWith(h.toLowerCase()))return null;let s=h.endsWith("/")?h.length-1:h.length,_=n.charAt(s);return _&&_!=="/"?null:n.slice(s)||"/"}function resolvePath(n,h){h===void 0&&(h="/");let{pathname:s,search:_="",hash:M=""}=typeof n=="string"?parsePath(n):n;return{pathname:s?s.startsWith("/")?s:resolvePathname(s,h):h,search:normalizeSearch(_),hash:normalizeHash(M)}}function resolvePathname(n,h){let s=h.replace(/\/+$/,"").split("/");return n.split("/").forEach(M=>{M===".."?s.length>1&&s.pop():M!=="."&&s.push(M)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(n,h,s,_){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+h+"` field ["+JSON.stringify(_)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(n){return n.filter((h,s)=>s===0||h.route.path&&h.route.path.length>0)}function getResolveToMatches(n,h){let s=getPathContributingMatches(n);return h?s.map((_,M)=>M===s.length-1?_.pathname:_.pathnameBase):s.map(_=>_.pathnameBase)}function resolveTo(n,h,s,_){_===void 0&&(_=!1);let M;typeof n=="string"?M=parsePath(n):(M=_extends$4({},n),invariant(!M.pathname||!M.pathname.includes("?"),getInvalidPathError("?","pathname","search",M)),invariant(!M.pathname||!M.pathname.includes("#"),getInvalidPathError("#","pathname","hash",M)),invariant(!M.search||!M.search.includes("#"),getInvalidPathError("#","search","hash",M)));let $=n===""||M.pathname==="",V=$?"/":M.pathname,oe;if(V==null)oe=s;else{let Et=h.length-1;if(!_&&V.startsWith("..")){let ml=V.split("/");for(;ml[0]==="..";)ml.shift(),Et-=1;M.pathname=ml.join("/")}oe=Et>=0?h[Et]:"/"}let Y=resolvePath(M,oe),ie=V&&V!=="/"&&V.endsWith("/"),zn=($||V===".")&&s.endsWith("/");return!Y.pathname.endsWith("/")&&(ie||zn)&&(Y.pathname+="/"),Y}const joinPaths=n=>n.join("/").replace(/\/\/+/g,"/"),normalizePathname=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,normalizeHash=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function isRouteErrorResponse(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(n){for(var h=1;h<arguments.length;h++){var s=arguments[h];for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(n[_]=s[_])}return n},_extends$3.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(n,h){let{relative:s}=h===void 0?{}:h;useInRouterContext()||invariant(!1);let{basename:_,navigator:M}=reactExports.useContext(NavigationContext),{hash:$,pathname:V,search:oe}=useResolvedPath(n,{relative:s}),Y=V;return _!=="/"&&(Y=V==="/"?_:joinPaths([_,V])),M.createHref({pathname:Y,search:oe,hash:$})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(n){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(n)}function useNavigate(){let{isDataRoute:n}=reactExports.useContext(RouteContext);return n?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let n=reactExports.useContext(DataRouterContext),{basename:h,future:s,navigator:_}=reactExports.useContext(NavigationContext),{matches:M}=reactExports.useContext(RouteContext),{pathname:$}=useLocation(),V=JSON.stringify(getResolveToMatches(M,s.v7_relativeSplatPath)),oe=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{oe.current=!0}),reactExports.useCallback(function(ie,zn){if(zn===void 0&&(zn={}),!oe.current)return;if(typeof ie=="number"){_.go(ie);return}let Et=resolveTo(ie,JSON.parse(V),$,zn.relative==="path");n==null&&h!=="/"&&(Et.pathname=Et.pathname==="/"?h:joinPaths([h,Et.pathname])),(zn.replace?_.replace:_.push)(Et,zn.state,zn)},[h,_,V,$,n])}function useParams(){let{matches:n}=reactExports.useContext(RouteContext),h=n[n.length-1];return h?h.params:{}}function useResolvedPath(n,h){let{relative:s}=h===void 0?{}:h,{future:_}=reactExports.useContext(NavigationContext),{matches:M}=reactExports.useContext(RouteContext),{pathname:$}=useLocation(),V=JSON.stringify(getResolveToMatches(M,_.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(n,JSON.parse(V),$,s==="path"),[n,V,$,s])}function useRoutes(n,h){return useRoutesImpl(n,h)}function useRoutesImpl(n,h,s,_){useInRouterContext()||invariant(!1);let{navigator:M}=reactExports.useContext(NavigationContext),{matches:$}=reactExports.useContext(RouteContext),V=$[$.length-1],oe=V?V.params:{};V&&V.pathname;let Y=V?V.pathnameBase:"/";V&&V.route;let ie=useLocation(),zn;if(h){var Et;let _u=typeof h=="string"?parsePath(h):h;Y==="/"||(Et=_u.pathname)!=null&&Et.startsWith(Y)||invariant(!1),zn=_u}else zn=ie;let ml=zn.pathname||"/",rl=ml;if(Y!=="/"){let _u=Y.replace(/^\//,"").split("/");rl="/"+ml.replace(/^\//,"").split("/").slice(_u.length).join("/")}let Ml=matchRoutes(n,{pathname:rl}),kl=_renderMatches(Ml&&Ml.map(_u=>Object.assign({},_u,{params:Object.assign({},oe,_u.params),pathname:joinPaths([Y,M.encodeLocation?M.encodeLocation(_u.pathname).pathname:_u.pathname]),pathnameBase:_u.pathnameBase==="/"?Y:joinPaths([Y,M.encodeLocation?M.encodeLocation(_u.pathnameBase).pathname:_u.pathnameBase])})),$,s,_);return h&&kl?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$3({pathname:"/",search:"",hash:"",state:null,key:"default"},zn),navigationType:Action.Pop}},kl):kl}function DefaultErrorComponent(){let n=useRouteError(),h=isRouteErrorResponse(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,M={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},h),s?reactExports.createElement("pre",{style:M},s):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,s){return s.location!==h.location||s.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:s.error,location:s.location,revalidation:h.revalidation||s.revalidation}}componentDidCatch(h,s){console.error("React Router caught the following error during render",h,s)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(n){let{routeContext:h,match:s,children:_}=n,M=reactExports.useContext(DataRouterContext);return M&&M.static&&M.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(M.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:h},_)}function _renderMatches(n,h,s,_){var M;if(h===void 0&&(h=[]),s===void 0&&(s=null),_===void 0&&(_=null),n==null){var $;if(!s)return null;if(s.errors)n=s.matches;else if(($=_)!=null&&$.v7_partialHydration&&h.length===0&&!s.initialized&&s.matches.length>0)n=s.matches;else return null}let V=n,oe=(M=s)==null?void 0:M.errors;if(oe!=null){let zn=V.findIndex(Et=>Et.route.id&&oe?.[Et.route.id]!==void 0);zn>=0||invariant(!1),V=V.slice(0,Math.min(V.length,zn+1))}let Y=!1,ie=-1;if(s&&_&&_.v7_partialHydration)for(let zn=0;zn<V.length;zn++){let Et=V[zn];if((Et.route.HydrateFallback||Et.route.hydrateFallbackElement)&&(ie=zn),Et.route.id){let{loaderData:ml,errors:rl}=s,Ml=Et.route.loader&&ml[Et.route.id]===void 0&&(!rl||rl[Et.route.id]===void 0);if(Et.route.lazy||Ml){Y=!0,ie>=0?V=V.slice(0,ie+1):V=[V[0]];break}}}return V.reduceRight((zn,Et,ml)=>{let rl,Ml=!1,kl=null,_u=null;s&&(rl=oe&&Et.route.id?oe[Et.route.id]:void 0,kl=Et.route.errorElement||defaultErrorElement,Y&&(ie<0&&ml===0?(warningOnce("route-fallback"),Ml=!0,_u=null):ie===ml&&(Ml=!0,_u=Et.route.hydrateFallbackElement||null)));let Hu=h.concat(V.slice(0,ml+1)),bu=()=>{let dl;return rl?dl=kl:Ml?dl=_u:Et.route.Component?dl=reactExports.createElement(Et.route.Component,null):Et.route.element?dl=Et.route.element:dl=zn,reactExports.createElement(RenderedRoute,{match:Et,routeContext:{outlet:zn,matches:Hu,isDataRoute:s!=null},children:dl})};return s&&(Et.route.ErrorBoundary||Et.route.errorElement||ml===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:kl,error:rl,children:bu(),routeContext:{outlet:null,matches:Hu,isDataRoute:!0}}):bu()},null)}var DataRouterHook$1=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(DataRouterHook$1||{}),DataRouterStateHook$1=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(DataRouterStateHook$1||{});function useDataRouterContext$1(n){let h=reactExports.useContext(DataRouterContext);return h||invariant(!1),h}function useDataRouterState(n){let h=reactExports.useContext(DataRouterStateContext);return h||invariant(!1),h}function useRouteContext(n){let h=reactExports.useContext(RouteContext);return h||invariant(!1),h}function useCurrentRouteId(n){let h=useRouteContext(),s=h.matches[h.matches.length-1];return s.route.id||invariant(!1),s.route.id}function useRouteError(){var n;let h=reactExports.useContext(RouteErrorContext),s=useDataRouterState(),_=useCurrentRouteId();return h!==void 0?h:(n=s.errors)==null?void 0:n[_]}function useNavigateStable(){let{router:n}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),h=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{s.current=!0}),reactExports.useCallback(function(M,$){$===void 0&&($={}),s.current&&(typeof M=="number"?n.navigate(M):n.navigate(M,_extends$3({fromRouteId:h},$)))},[n,h])}const alreadyWarned$1={};function warningOnce(n,h,s){alreadyWarned$1[n]||(alreadyWarned$1[n]=!0)}function logV6DeprecationWarnings(n,h){n?.v7_startTransition,n?.v7_relativeSplatPath}function Route(n){invariant(!1)}function Router(n){let{basename:h="/",children:s=null,location:_,navigationType:M=Action.Pop,navigator:$,static:V=!1,future:oe}=n;useInRouterContext()&&invariant(!1);let Y=h.replace(/^\/*/,"/"),ie=reactExports.useMemo(()=>({basename:Y,navigator:$,static:V,future:_extends$3({v7_relativeSplatPath:!1},oe)}),[Y,oe,$,V]);typeof _=="string"&&(_=parsePath(_));let{pathname:zn="/",search:Et="",hash:ml="",state:rl=null,key:Ml="default"}=_,kl=reactExports.useMemo(()=>{let _u=stripBasename(zn,Y);return _u==null?null:{location:{pathname:_u,search:Et,hash:ml,state:rl,key:Ml},navigationType:M}},[Y,zn,Et,ml,rl,Ml,M]);return kl==null?null:reactExports.createElement(NavigationContext.Provider,{value:ie},reactExports.createElement(LocationContext.Provider,{children:s,value:kl}))}function Routes(n){let{children:h,location:s}=n;return useRoutes(createRoutesFromChildren(h),s)}new Promise(()=>{});function createRoutesFromChildren(n,h){h===void 0&&(h=[]);let s=[];return reactExports.Children.forEach(n,(_,M)=>{if(!reactExports.isValidElement(_))return;let $=[...h,M];if(_.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(_.props.children,$));return}_.type!==Route&&invariant(!1),!_.props.index||!_.props.children||invariant(!1);let V={id:_.props.id||$.join("-"),caseSensitive:_.props.caseSensitive,element:_.props.element,Component:_.props.Component,index:_.props.index,path:_.props.path,loader:_.props.loader,action:_.props.action,errorElement:_.props.errorElement,ErrorBoundary:_.props.ErrorBoundary,hasErrorBoundary:_.props.ErrorBoundary!=null||_.props.errorElement!=null,shouldRevalidate:_.props.shouldRevalidate,handle:_.props.handle,lazy:_.props.lazy};_.props.children&&(V.children=createRoutesFromChildren(_.props.children,$)),s.push(V)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(n){for(var h=1;h<arguments.length;h++){var s=arguments[h];for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(n[_]=s[_])}return n},_extends$2.apply(this,arguments)}function _objectWithoutPropertiesLoose$7(n,h){if(n==null)return{};var s={},_=Object.keys(n),M,$;for($=0;$<_.length;$++)M=_[$],!(h.indexOf(M)>=0)&&(s[M]=n[M]);return s}function isModifiedEvent(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function shouldProcessLinkClick(n,h){return n.button===0&&(!h||h==="_self")&&!isModifiedEvent(n)}const _excluded$6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_excluded2$1=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),START_TRANSITION="startTransition",startTransitionImpl=React[START_TRANSITION];function HashRouter(n){let{basename:h,children:s,future:_,window:M}=n,$=reactExports.useRef();$.current==null&&($.current=createHashHistory({window:M,v5Compat:!0}));let V=$.current,[oe,Y]=reactExports.useState({action:V.action,location:V.location}),{v7_startTransition:ie}=_||{},zn=reactExports.useCallback(Et=>{ie&&startTransitionImpl?startTransitionImpl(()=>Y(Et)):Y(Et)},[Y,ie]);return reactExports.useLayoutEffect(()=>V.listen(zn),[V,zn]),reactExports.useEffect(()=>logV6DeprecationWarnings(_),[_]),reactExports.createElement(Router,{basename:h,children:s,location:oe.location,navigationType:oe.action,navigator:V,future:_})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(h,s){let{onClick:_,relative:M,reloadDocument:$,replace:V,state:oe,target:Y,to:ie,preventScrollReset:zn,viewTransition:Et}=h,ml=_objectWithoutPropertiesLoose$7(h,_excluded$6),{basename:rl}=reactExports.useContext(NavigationContext),Ml,kl=!1;if(typeof ie=="string"&&ABSOLUTE_URL_REGEX.test(ie)&&(Ml=ie,isBrowser))try{let dl=new URL(window.location.href),Tl=ie.startsWith("//")?new URL(dl.protocol+ie):new URL(ie),$l=stripBasename(Tl.pathname,rl);Tl.origin===dl.origin&&$l!=null?ie=$l+Tl.search+Tl.hash:kl=!0}catch{}let _u=useHref(ie,{relative:M}),Hu=useLinkClickHandler(ie,{replace:V,state:oe,target:Y,preventScrollReset:zn,relative:M,viewTransition:Et});function bu(dl){_&&_(dl),dl.defaultPrevented||Hu(dl)}return reactExports.createElement("a",_extends$2({},ml,{href:Ml||_u,onClick:kl||$?_:bu,ref:s,target:Y}))}),NavLink$1=reactExports.forwardRef(function(h,s){let{"aria-current":_="page",caseSensitive:M=!1,className:$="",end:V=!1,style:oe,to:Y,viewTransition:ie,children:zn}=h,Et=_objectWithoutPropertiesLoose$7(h,_excluded2$1),ml=useResolvedPath(Y,{relative:Et.relative}),rl=useLocation(),Ml=reactExports.useContext(DataRouterStateContext),{navigator:kl,basename:_u}=reactExports.useContext(NavigationContext),Hu=Ml!=null&&useViewTransitionState(ml)&&ie===!0,bu=kl.encodeLocation?kl.encodeLocation(ml).pathname:ml.pathname,dl=rl.pathname,Tl=Ml&&Ml.navigation&&Ml.navigation.location?Ml.navigation.location.pathname:null;M||(dl=dl.toLowerCase(),Tl=Tl?Tl.toLowerCase():null,bu=bu.toLowerCase()),Tl&&_u&&(Tl=stripBasename(Tl,_u)||Tl);const $l=bu!=="/"&&bu.endsWith("/")?bu.length-1:bu.length;let Bl=dl===bu||!V&&dl.startsWith(bu)&&dl.charAt($l)==="/",Pu=Tl!=null&&(Tl===bu||!V&&Tl.startsWith(bu)&&Tl.charAt(bu.length)==="/"),Il={isActive:Bl,isPending:Pu,isTransitioning:Hu},ud=Bl?_:void 0,pd;typeof $=="function"?pd=$(Il):pd=[$,Bl?"active":null,Pu?"pending":null,Hu?"transitioning":null].filter(Boolean).join(" ");let id=typeof oe=="function"?oe(Il):oe;return reactExports.createElement(Link,_extends$2({},Et,{"aria-current":ud,className:pd,ref:s,style:id,to:Y,viewTransition:ie}),typeof zn=="function"?zn(Il):zn)});var DataRouterHook;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(n){let h=reactExports.useContext(DataRouterContext);return h||invariant(!1),h}function useLinkClickHandler(n,h){let{target:s,replace:_,state:M,preventScrollReset:$,relative:V,viewTransition:oe}=h===void 0?{}:h,Y=useNavigate(),ie=useLocation(),zn=useResolvedPath(n,{relative:V});return reactExports.useCallback(Et=>{if(shouldProcessLinkClick(Et,s)){Et.preventDefault();let ml=_!==void 0?_:createPath(ie)===createPath(zn);Y(n,{replace:ml,state:M,preventScrollReset:$,relative:V,viewTransition:oe})}},[ie,Y,zn,_,M,s,n,$,V,oe])}function useViewTransitionState(n,h){h===void 0&&(h={});let s=reactExports.useContext(ViewTransitionContext);s==null&&invariant(!1);let{basename:_}=useDataRouterContext(DataRouterHook.useViewTransitionState),M=useResolvedPath(n,{relative:h.relative});if(!s.isTransitioning)return!1;let $=stripBasename(s.currentLocation.pathname,_)||s.currentLocation.pathname,V=stripBasename(s.nextLocation.pathname,_)||s.nextLocation.pathname;return matchPath(M.pathname,V)!=null||matchPath(M.pathname,$)!=null}var dist$1={},Navbar={};const mcloud_logo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABPCAYAAAAQlxDmAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QgeDQk2h9q0aQAADmpJREFUeNrtXXuYU9W1/61zkgzDc2ByMuM45GR4fDyGZHiM16uFXm2V6idWKWpLa6Gg9oHaa1Xwtra0Kn0/KKKoxVKxLVKq9T7Ui9ZPvNZXZQAzmaBYYJLMMDBJEMSBYSY5Z90/Mthz9jxIhuRMBrP+y87JPnvt317PvfYOUKACFahABSpQz0SDefDbAFupe9SIU5/ldkeiOhZrKwCRQwpWw5FsK50tMc1hovMATAagArAJjx4mpn0gfQcTvZXU+IWZTfGWAhBnSIGxzlqWaBmAawCM6EcXDEIdM/8mkXBsqm1pOVEAIu2ZAwVU50IQ3QbGeVns+igYj9mIfzY1HD9YAKIP8o8tm0ayvg6MOWmy0Anw8S4Vla7EfECM770Tia27DtAKQBiobhbsjphyLwh3ALD38ti7BLykE79qk7TX2k8Wx42qhgFpd+XIkiQVVUPCJwmYDeAiAEN66W8HSbTU2xitLwABoK6iwumwJ/7cNWkitRGwWSfp0ZpQ698zNvKVI8foUtH1TLgJwLQeHjlOoEXecPQvH2sgGsaWnqdL0tMAzhW+0pjwoI7E92eEjh7NitpzO68kojUAqrrZJcL9vlDsWwToHzsggu4xUzWSXwUwWvhqD4GWesPR17P9zncnOUd0nqQfAri1+2Twz73h+IqPFRDBcaPdmmZ7A0CF8NWT8gksyXVgFnA75zHRHwCMEmTjDl84/quPBRBBRRmuDcXLAGYJDv8vfeHoCqvUw9uqMkMCngegmFQi8/yaSPx/rJwTaSCA0IrxQE8g1ISjd1qpo6eHY7tYlz4F0PuGZpmIngiMdY0/q4EIVLnmgrBIkMstvnB0QHRzTVNrA0j/HIAOQ/MwlviBsxaIf0yYUMQ6PySoxD2dnfYlA+WtAIAvFP8/ZtwlNF/mdyvXnJVAnEgeWwpgnFFLEWhpPuR/fJHYWjBeMQkqYdUWQD6rgKibBTtYv0vw3R/MhYvaT69Fl3XcACBpaJ40xWONVFgGhD2mXEUg1dDULhH9CHlE1c2xvQQ8ZlosjNvOLtVEWGxmkDd6G6OtyDPSZP45zInA8+s9pZPPCiACqms+AfNMQMj8O+QhTd8ffw/gOnPATWuD1XAMWiCCHqXcr7p+wcDmbi/WZTkfgWCAQDRUEOdLtDblLb9HuWzQRdZ+1XkjgdaitxQ0owng+b5IfEe+gFA3C3ZHXHkEwJI+HnvWnnQsnnLgwOG8lwi/R1lMoPXofR8AIIwF0StvV5X+S74A4Tis/PE0IADAFQlb5zN1s3rdM8kPIOrdo0YTo6eo9CSAhNA2VNKlhzkP0vEB1TUfjGt7+OrDHtr+1R53ZdWbouwDodwFwk8MTUdZ58V7muLPVldD1tqUmwCsgSFQIuYfMOTXBgwFCcOYtTVG95qB1ySdFnubovuCHqVcY34IoKsNv2odQcM8VaHQybwDom7c6FEOzbYbxtQ289d8kfhvTGCpyloAtyB/6YRMGF8dih36iLeKiqEOW+JdEMYaY4yaSGxN3qimf0yYUFSvKrc4NNvbEPYXNMn2Qjf0mZ9HflO9EQQAqG1pOQEiMQWyut6j/Cmglk4ZUCC2AHK9qtzcnvhgH4C1ADziMzLr54htOqE8z4HobXzndNMojOsYUkO96tp0JqnzfqumYKUyQZOxEcCFp3HMX+hUYvNqd6QM9S5PSYnM9u0AJghPHgawB2ArE4CUmnSa2m0umL/qi8TXf2TMq1xzWeetp5mz40y03BeKPkwA5xwIv8e5kJjWAxiWrqgD+G8QO8D0RQCVwjBWy8Oj/1EdROeA6CG3cxaIngVQZo7t8BQDbxNjIghfQvfyzt5oa7Fd+/zEve8fyxkQ9W7nTSB6uAe19iEBaxm8G6DbANSm2eV+bzg2cSD3IwwB6Po0H08Q8w9ZojAxbuBU/ZRIO9kmXV6zrzWadRvhV13LQPRI99/RE0mdJ3vDsbt94fgfNUpcCkIgzZTC7oEGIbUipWDaIIA+743E7/GFYo95w7E5BFoAoFl4biYl9Vd2TihXsgpEwO26lMD3C1LUDsJSXzj6RWPF9YzQ0aPFNm02A7/tIYgTRXIaD9DeuWB1p6ajEHRJn+0NR582NnrD0b+QRLXixhKASXJC+9O2NFQapaeOysaBeDvAY8wRJ33GF46+0acUjS9zIaF/koDxXW/8NwCXC2JxnS8S+/NAgcCAVK8qOwiYbmhuIcIDrEMHiEH42+l4TeWqnFuEwO+jwogzB0J1/hWgS0ySIOEyX2PslX4y/SIBF/+zjcOJhGPqQG2ZBjyurzPzQ8ZhSkxzpkWiGUf7wWo4tDblP4XFxkzSBX2VjJ5WJfhV1wIBBBBwS39A6PqtbtPw1a7cU1cbqUX2zh8MBAg7xzormPmn5kHS+v6AAADVQXTKJ3BdyhU39Mj6Q32pYOl0AZvE/GPBv/4vbzi24UyYr26O7QVhjSC+3/RXOSdZDYRNovsAjDQ0HWGZvndG/MVibUzSV2B2QmY09FEV0icQU9zOy5kw0dDUYZPt/56NCWhLFt0DYL+hqYiY1luZiW1QnRcDWGpeELwiXZezL6oJtb4JYKOpb+p9/7tPIHSiJWZh4N9NbTwYzsYkXNjc3E6g5YIBmROwqJZoG2DTQauF5h17wvGsbeEypPtgrgq5oLf9716B2OUpKSHgSlPeSJYezuZkdJ1J2CoYkV8FFWV4roFwupVlAGqM606X9GXZPEFUE25tZIE/1qVFGQFhY9snYD6545/WGPVne0JkDbcaDTeASn0or8wlCEGPUs6EewUD/ej0xsNv5cA33mh+TY+HcXoHgonmCB3+by4mpbo5thfgHwmG+/agR5meKyC01MaUsRz/YLEtuTwX7yoq5udhlrLauoqKoenbCOZaM5K0PVcT06YN+YVguGWNsToXhjvgcV4kbokyeGUmCbpMaPKe+IcA3jM02e0OzZeBsaYy0yqS9YZcAXFhc3M7MYve2EUB1bkwm++pmwU7p/bTjQC/6QvHNyCXRGgQYqmyTLymUpOIdRQdzuVYvZH4MwQ8JXCwut49anS23mGPK8sBqjYm8HSWb8x10pEYMfNn3ZkJECUmkT5w4ChyTEmS7wRgTHO4AEdWDLf/3DGVBHxbaH5keuRQELknYe64JBMgjAc3UFlZ6cj1aGeEDoXAdI8g1t/MRu0T2aS1AIxu8QHHEP6OFTGLDioSnJGODIy1uZ5nCJ0cbcWgix0j1wjGTZJ16ZdnYrgDVa653TKiTN/pMqQ5JzJnrcFMx9IHQkLI5O9LPNmKQU/cu7eDddwIw54vA7MDbueN/emv0eMZwjqvE6bmpZpI9HELU1qTBI+0Mf04gk2rEhLkmVaNuqYp9jeIhptoVX8M9zE+fgdO7YV0mSJodJtVvHSVZprcVclG76UNhAS8ISBziYUrCJzUvgXAeNbaReRYlUkfuzzlHgIEO0Brfc2tAav4cLyvXCDYpsaezoX0IRHSNnOkjU8HqlxllknFgfebGXSv2Wzha37VmbZkytDXADBGsS2OIfr3rVxQpPMXBB5eyijF4Yu07gewy5h+0nW+wUomEs7orwHabZxbAtals8cdcDvngfmz5sXEd1hloIHUdRMMWigEc09lBETXwB8XOrm1pzxJrqh2BxJE+s0wFWvR+QG3s88F8XplZTGnLj8xG+hQfLOVC6mzXfqGEI8dOhyO/TVjIIba9A0Ajhiayh2OTktF2xuKvwzQJsFw/9g/vszV229GyB3fhekYMXUSNEuLnv3njqkE8d1CSPDri837E+kBkUqE8WpBTG5vcLs+YSVTNujLARh971Ipqa/rcQI8ZeczsELIMaz2hg+/Y5mjAUhklzfAvAUbldvxYB/OUd/UlRltNNkKwqadY50VVjE2NRw/yIyVArML/KpydzcvifUnYawjYjRxu3SflQun3uNaCcalQlR3V1837qQVrQbcrkuZeKsJOEIgaZM/PXPvoZgVzG0DbKUeZScYXoGFTSRhI2u6B6lz26VCOuGamnD0KctAUJWbAfHEFL/oDcfn9lWYnHbaIKAqqxi4W2jeq8t8RepIrAV6V3UtIPCTmcRTvnDsPKvUUYOq3NvDHB0kiWac7kx52qWO08KxldT9mO4ESaPtfo/zC5bYCu3ktsyceH7JinEFPUp5QFWe6QGEYwyel87B/rSBIECXhscWA3ha+GokMT1RryrP1ruds3LJsE5DMkxxSCU5BUBRhterzts1xjsQy0iBDyDhyppwfGea85sZbQHkKapyPwPLeunwVZ3wqGaTn8um/Xi9srJ4mNyxRbzBAKlc/+tInbkQtyBPSExz+1u11xv/kzxltcT6lwB8WYgTTlGzJNG8TIot+p9adruuZ+J16P3SWwbwLoAgg0NE1P8yFcYwMK4yHiTsopc7E/Zra1ta4inX1bmQmP4gSHqSga0S+B0m0s9AHEtAPAnATMEtFem5zoR98akx5RwIoOuCxKR8P4iuwgCQRnLVjNChkNmgOx8n0JcHYDgxZrrTF4n+PtNjWxnZiJ6oev+RiC8Sv1pims3AM7D2wMkxEYQUQ5LVtxq3MGiFYwiPr4lEH+8PCGcsESLtrjpHTeqJRQCuAKgWOb79qyeJqFedvwfo+hxPfitALxLrm+OR+Nbe0hYDBoTJgR83elRRQp7IRFUskZN0HtlvE0GkADyJgMtgPn3zcqecvLp2/5EPAKDerVwLwmZB0g8y8ByBw2Dq32FJiTsBOgpdaiLmxmlN0f39XfmWA5Gb1IGyBIwN3VYn85sgUgBcYOKJsJ3bpYtrWluP5ztvg+6vbQKq8iQDC9J4tE3WMCNV0pn/JA02IDoS9kXEON0VEkfA0vzBAsKglIhTeZ2AqixDKqg03oPRAcYTxLTK2xTdN5h4GtT/unUqzwOgPEncnuhwNOXrfwgVqEAFKlCBCtRf+n97Y2CaOfCNbwAAAABJRU5ErkJggg==",mcloud_logo$1=Object.freeze(Object.defineProperty({__proto__:null,default:mcloud_logo},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(mcloud_logo$1);var hasRequiredNavbar;function requireNavbar(){if(hasRequiredNavbar)return Navbar;hasRequiredNavbar=1,Object.defineProperty(Navbar,"__esModule",{value:!0}),Navbar.default=void 0;var n=_(require$$1$1),h=s(requireReact());function s(Y,ie){if(typeof WeakMap=="function")var zn=new WeakMap,Et=new WeakMap;return(s=function(ml,rl){if(!rl&&ml&&ml.__esModule)return ml;var Ml,kl,_u={__proto__:null,default:ml};if(ml===null||typeof ml!="object"&&typeof ml!="function")return _u;if(Ml=rl?Et:zn){if(Ml.has(ml))return Ml.get(ml);Ml.set(ml,_u)}for(const Hu in ml)Hu!=="default"&&{}.hasOwnProperty.call(ml,Hu)&&((kl=(Ml=Object.defineProperty)&&Object.getOwnPropertyDescriptor(ml,Hu))&&(kl.get||kl.set)?Ml(_u,Hu,kl):_u[Hu]=ml[Hu]);return _u})(Y,ie)}function _(Y){return Y&&Y.__esModule?Y:{default:Y}}const M={learn:{name:"LEARN",link:"https://www.materialscloud.org/learn"},work:{name:"WORK",link:"https://www.materialscloud.org/work"},discover:{name:"DISCOVER",link:"https://www.materialscloud.org/discover"},explore:{name:"EXPLORE",link:"https://www.materialscloud.org/explore"},archive:{name:"ARCHIVE",link:"https://www.materialscloud.org/archive"}},$={policies:{name:"Policies",link:"https://www.materialscloud.org/policies"},dmp:{name:"Data Management Plan",link:"https://www.materialscloud.org/dmp"},terms:{name:"Terms of Use",link:"https://www.materialscloud.org/termssummary"},infrastructure:{name:"Infrastructure",link:"https://www.materialscloud.org/infrastructure"},team:{name:"Team & Contact",link:"https://www.materialscloud.org/team"},partners:{name:"Partners",link:"https://www.materialscloud.org/home#partners"},restapi:{name:"Connect your REST API",link:"https://www.materialscloud.org/explore/connect"}},V=Y=>{let{activeSection:ie}=Y;const[zn,Et]=(0,h.useState)(!1),ml=(0,h.useRef)(null);(0,h.useEffect)(()=>{function kl(_u){ml.current&&!ml.current.contains(_u.target)&&Et(!1)}return document.addEventListener("mousedown",kl),()=>document.removeEventListener("mousedown",kl)},[]);const rl=()=>Et(kl=>!kl),Ml="dropdown-content"+(zn?" dropdown-open":"");return h.default.createElement("div",{ref:ml,className:"more-dropdown"},h.default.createElement("span",{className:"more-btn",onClick:rl},"More ",h.default.createElement("i",{className:"fa fa-caret-down"})),h.default.createElement("div",{className:Ml},Object.keys($).map((kl,_u)=>{const{link:Hu,name:bu}=$[kl],dl=kl===ie?"active":"";return h.default.createElement("a",{key:_u,className:dl,href:Hu},bu)})))},oe=Y=>{let{activeSection:ie}=Y;return h.default.createElement("div",{className:"mc-navbar"},h.default.createElement("a",{className:"mc-navbrand",href:"https://www.materialscloud.org/home"},h.default.createElement("img",{src:n.default,height:"50",alt:"MC logo"})),Object.keys(M).map((zn,Et)=>{let ml="mc-navlink";return zn===ie&&(ml+=" active"),h.default.createElement("a",{key:Et,className:ml,href:M[zn].link},M[zn].name)}),h.default.createElement(V,{activeSection:ie}))};return Navbar.default=oe,Navbar}var Breadcrumbs={},hasRequiredBreadcrumbs;function requireBreadcrumbs(){if(hasRequiredBreadcrumbs)return Breadcrumbs;hasRequiredBreadcrumbs=1,Object.defineProperty(Breadcrumbs,"__esModule",{value:!0}),Breadcrumbs.default=void 0;var n=h(requireReact());function h(_){return _&&_.__esModule?_:{default:_}}const s=_=>{let{breadcrumbsPath:M}=_;return n.default.createElement("ul",{className:"mc-breadcrumb"},M.map(($,V)=>n.default.createElement("li",{key:V},n.default.createElement("a",{href:$.link},$.name))))};return Breadcrumbs.default=s,Breadcrumbs}var hasRequiredDist$1;function requireDist$1(){if(hasRequiredDist$1)return dist$1;hasRequiredDist$1=1,Object.defineProperty(dist$1,"__esModule",{value:!0}),dist$1.default=void 0;var n=_(requireReact()),h=_(requireNavbar()),s=_(requireBreadcrumbs());function _($){return $&&$.__esModule?$:{default:$}}const M=$=>{let{activeSection:V,breadcrumbsPath:oe}=$;return n.default.createElement("div",null,n.default.createElement(h.default,{activeSection:V}),n.default.createElement(s.default,{breadcrumbsPath:oe}))};return dist$1.default=M,dist$1}var distExports$1=requireDist$1();const MaterialsCloudHeader=getDefaultExportFromCjs(distExports$1);var dist={},PTable={},classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hasRequiredClassnames;function requireClassnames(){return hasRequiredClassnames||(hasRequiredClassnames=1,(function(n){(function(){var h={}.hasOwnProperty;function s(){for(var $="",V=0;V<arguments.length;V++){var oe=arguments[V];oe&&($=M($,_(oe)))}return $}function _($){if(typeof $=="string"||typeof $=="number")return $;if(typeof $!="object")return"";if(Array.isArray($))return s.apply(null,$);if($.toString!==Object.prototype.toString&&!$.toString.toString().includes("[native code]"))return $.toString();var V="";for(var oe in $)h.call($,oe)&&$[oe]&&(V=M(V,oe));return V}function M($,V){return V?$?$+" "+V:$+V:$}n.exports?(s.default=s,n.exports=s):window.classNames=s})()})(classnames)),classnames.exports}var classnamesExports=requireClassnames();const classNames=getDefaultExportFromCjs(classnamesExports),DEFAULT_BREAKPOINTS=["xxl","xl","lg","md","sm","xs"],DEFAULT_MIN_BREAKPOINT="xs",ThemeContext=reactExports.createContext({prefixes:{},breakpoints:DEFAULT_BREAKPOINTS,minBreakpoint:DEFAULT_MIN_BREAKPOINT}),{Consumer,Provider}=ThemeContext;function useBootstrapPrefix(n,h){const{prefixes:s}=reactExports.useContext(ThemeContext);return n||s[h]||h}function useBootstrapBreakpoints(){const{breakpoints:n}=reactExports.useContext(ThemeContext);return n}function useBootstrapMinBreakpoint(){const{minBreakpoint:n}=reactExports.useContext(ThemeContext);return n}function useIsRTL(){const{dir:n}=reactExports.useContext(ThemeContext);return n==="rtl"}const PopoverHeader=reactExports.forwardRef(({className:n,bsPrefix:h,as:s="div",..._},M)=>(h=useBootstrapPrefix(h,"popover-header"),jsxRuntimeExports.jsx(s,{ref:M,className:classNames(n,h),..._})));PopoverHeader.displayName="PopoverHeader";const PopoverBody=reactExports.forwardRef(({className:n,bsPrefix:h,as:s="div",..._},M)=>(h=useBootstrapPrefix(h,"popover-body"),jsxRuntimeExports.jsx(s,{ref:M,className:classNames(n,h),..._})));PopoverBody.displayName="PopoverBody";function getOverlayDirection(n,h){let s=n;return n==="left"?s=h?"end":"start":n==="right"&&(s=h?"start":"end"),s}function getInitialPopperStyles(n="absolute"){return{position:n,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Popover=reactExports.forwardRef(({bsPrefix:n,placement:h="right",className:s,style:_,children:M,body:$,arrowProps:V,hasDoneInitialMeasure:oe,popper:Y,show:ie,...zn},Et)=>{const ml=useBootstrapPrefix(n,"popover"),rl=useIsRTL(),[Ml]=h?.split("-")||[],kl=getOverlayDirection(Ml,rl);let _u=_;return ie&&!oe&&(_u={..._,...getInitialPopperStyles(Y?.strategy)}),jsxRuntimeExports.jsxs("div",{ref:Et,role:"tooltip",style:_u,"x-placement":Ml,className:classNames(s,ml,Ml&&`bs-popover-${kl}`),...zn,children:[jsxRuntimeExports.jsx("div",{className:"popover-arrow",...V}),$?jsxRuntimeExports.jsx(PopoverBody,{children:M}):M]})});Popover.displayName="Popover";const Popover$1=Object.assign(Popover,{Header:PopoverHeader,Body:PopoverBody,POPPER_OFFSET:[0,8]}),Popover$2=Object.freeze(Object.defineProperty({__proto__:null,default:Popover$1},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(Popover$2);function or$1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vt={exports:{}},at={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rr$1;function Qn$1(){if(Rr$1)return at;Rr$1=1;var n=dm,h=Symbol.for("react.element"),s=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,M=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$={key:!0,ref:!0,__self:!0,__source:!0};function V(oe,Y,ie){var zn,Et={},ml=null,rl=null;ie!==void 0&&(ml=""+ie),Y.key!==void 0&&(ml=""+Y.key),Y.ref!==void 0&&(rl=Y.ref);for(zn in Y)_.call(Y,zn)&&!$.hasOwnProperty(zn)&&(Et[zn]=Y[zn]);if(oe&&oe.defaultProps)for(zn in Y=oe.defaultProps,Y)Et[zn]===void 0&&(Et[zn]=Y[zn]);return{$$typeof:h,type:oe,key:ml,ref:rl,props:Et,_owner:M.current}}return at.Fragment=s,at.jsx=V,at.jsxs=V,at}Vt.exports=Qn$1();var k=Vt.exports;const $n$1="_button_qg5kh_1",Zn$1={button:$n$1};function Fa$1(n){return k.jsx("button",{className:Zn$1.button,children:"TEST"})}const eo$1="_archive_doicitation_5woyi_1",to$1="_doi_badge_5woyi_8",ro$1="_doi_left_5woyi_12",no$1="_doi_right_5woyi_28",xt={archive_doicitation:eo$1,doi_badge:to$1,doi_left:ro$1,doi_right:no$1};function Ba$1(n){return k.jsx("div",{className:xt.archive_doicitation,children:k.jsxs("span",{className:xt.doi_badge,children:[k.jsx("span",{className:xt.doi_left,children:"DOI"}),k.jsx("a",{href:`https://doi.org/10.24435/materialscloud:${n.doi_id}`,className:xt.doi_right,target:"_blank",children:`10.24435/materialscloud:${n.doi_id}`})]})})}function Wt(n,h){if(n.contains)return n.contains(h);if(n.compareDocumentPosition)return n===h||!!(n.compareDocumentPosition(h)&16)}var Jt={exports:{}},Bt$1,jr$1;function ir$1(){if(jr$1)return Bt$1;jr$1=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Bt$1=n,Bt$1}var Nt$1,Fr$1;function co$1(){if(Fr$1)return Nt$1;Fr$1=1;var n=ir$1();function h(){}function s(){}return s.resetWarningCache=h,Nt$1=function(){function _(V,oe,Y,ie,zn,Et){if(Et!==n){var ml=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw ml.name="Invariant Violation",ml}}_.isRequired=_;function M(){return _}var $={array:_,bigint:_,bool:_,func:_,number:_,object:_,string:_,symbol:_,any:_,arrayOf:M,element:_,elementType:_,instanceOf:M,node:_,objectOf:M,oneOf:M,oneOfType:M,shape:M,exact:M,checkPropTypes:s,resetWarningCache:h};return $.PropTypes=$,$},Nt$1}Jt.exports=co$1()();var po$1=Jt.exports;const N$1=or$1(po$1);function on(){const n=reactExports.useRef(!0),h=reactExports.useRef(()=>n.current);return reactExports.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),h.current}function vo$1(n){const h=reactExports.useRef(n);return h.current=n,h}function mo$1(n){const h=vo$1(n);reactExports.useEffect(()=>()=>h.current(),[])}const Gt=2**31-1;function an(n,h,s){const _=s-Date.now();n.current=_<=Gt?setTimeout(h,_):setTimeout(()=>an(n,h,s),Gt)}function ho$1(){const n=on(),h=reactExports.useRef();return mo$1(()=>clearTimeout(h.current)),reactExports.useMemo(()=>{const s=()=>clearTimeout(h.current);function _(M,$=0){n()&&(s(),$<=Gt?h.current=setTimeout(M,$):an(h,M,Date.now()+$))}return{set:_,clear:s,handleRef:h}},[])}var sn=function(){},bo$1=sn;const un$1=or$1(bo$1);function wo$1(n,h){if(n==null)return{};var s={},_=Object.keys(n),M,$;for($=0;$<_.length;$++)M=_[$],!(h.indexOf(M)>=0)&&(s[M]=n[M]);return s}function xo$1(n,h,s){var _=reactExports.useRef(n!==void 0),M=reactExports.useState(h),$=M[0],V=M[1],oe=n!==void 0,Y=_.current;return _.current=oe,!oe&&Y&&$!==h&&V(h),[oe?n:$,reactExports.useCallback(function(ie){for(var zn=arguments.length,Et=new Array(zn>1?zn-1:0),ml=1;ml<zn;ml++)Et[ml-1]=arguments[ml];s&&s.apply(void 0,[ie].concat(Et)),V(ie)},[s])]}function qt$1(n,h){return qt$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,_){return s.__proto__=_,s},qt$1(n,h)}function Eo$1(n,h){n.prototype=Object.create(h.prototype),n.prototype.constructor=n,qt$1(n,h)}const Br$1=n=>!n||typeof n=="function"?n:h=>{n.current=h};function Ao$1(n,h){const s=Br$1(n),_=Br$1(h);return M=>{s&&s(M),_&&_(M)}}function tt(n,h){return reactExports.useMemo(()=>Ao$1(n,h),[n,h])}var cn$1={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var h={}.hasOwnProperty;function s(){for(var $="",V=0;V<arguments.length;V++){var oe=arguments[V];oe&&($=M($,_(oe)))}return $}function _($){if(typeof $=="string"||typeof $=="number")return $;if(typeof $!="object")return"";if(Array.isArray($))return s.apply(null,$);if($.toString!==Object.prototype.toString&&!$.toString.toString().includes("[native code]"))return $.toString();var V="";for(var oe in $)h.call($,oe)&&$[oe]&&(V=M(V,oe));return V}function M($,V){return V?$?$+" "+V:$+V:$}n.exports?(s.default=s,n.exports=s):window.classNames=s})()})(cn$1);var Oo$1=cn$1.exports;const Ye$1=or$1(Oo$1);function Ir$1(){return reactExports.useState(null)}var Lr$1=Object.prototype.hasOwnProperty;function Hr(n,h,s){for(s of n.keys())if(lt(s,h))return s}function lt(n,h){var s,_,M;if(n===h)return!0;if(n&&h&&(s=n.constructor)===h.constructor){if(s===Date)return n.getTime()===h.getTime();if(s===RegExp)return n.toString()===h.toString();if(s===Array){if((_=n.length)===h.length)for(;_--&&lt(n[_],h[_]););return _===-1}if(s===Set){if(n.size!==h.size)return!1;for(_ of n)if(M=_,M&&typeof M=="object"&&(M=Hr(h,M),!M)||!h.has(M))return!1;return!0}if(s===Map){if(n.size!==h.size)return!1;for(_ of n)if(M=_[0],M&&typeof M=="object"&&(M=Hr(h,M),!M)||!lt(_[1],h.get(M)))return!1;return!0}if(s===ArrayBuffer)n=new Uint8Array(n),h=new Uint8Array(h);else if(s===DataView){if((_=n.byteLength)===h.byteLength)for(;_--&&n.getInt8(_)===h.getInt8(_););return _===-1}if(ArrayBuffer.isView(n)){if((_=n.byteLength)===h.byteLength)for(;_--&&n[_]===h[_];);return _===-1}if(!s||typeof n=="object"){_=0;for(s in n)if(Lr$1.call(n,s)&&++_&&!Lr$1.call(h,s)||!(s in h)||!lt(n[s],h[s]))return!1;return Object.keys(h).length===_}}return n!==n&&h!==h}function Ro$1(n){const h=on();return[n[0],reactExports.useCallback(s=>{if(h())return n[1](s)},[h,n[1]])]}var de$1="top",be="bottom",we="right",pe$1="left",ar="auto",ht=[de$1,be,we,pe$1],Qe$1="start",vt="end",To$1="clippingParents",ln$1="viewport",ut="popper",Co$1="reference",Nr=ht.reduce(function(n,h){return n.concat([h+"-"+Qe$1,h+"-"+vt])},[]),fn$1=[].concat(ht,[ar]).reduce(function(n,h){return n.concat([h,h+"-"+Qe$1,h+"-"+vt])},[]),So$1="beforeRead",ko$1="read",Po$1="afterRead",jo$1="beforeMain",Do$1="main",_o$1="afterMain",Mo$1="beforeWrite",Fo$1="write",Bo$1="afterWrite",Io$1=[So$1,ko$1,Po$1,jo$1,Do$1,_o$1,Mo$1,Fo$1,Bo$1];function xe(n){return n.split("-")[0]}function me(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var h=n.ownerDocument;return h&&h.defaultView||window}return n}function He$1(n){var h=me(n).Element;return n instanceof h||n instanceof Element}function Ee$1(n){var h=me(n).HTMLElement;return n instanceof h||n instanceof HTMLElement}function sr$1(n){if(typeof ShadowRoot>"u")return!1;var h=me(n).ShadowRoot;return n instanceof h||n instanceof ShadowRoot}var Le=Math.max,Ct$1=Math.min,Xe$1=Math.round;function zt$1(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(h){return h.brand+"/"+h.version}).join(" "):navigator.userAgent}function dn$1(){return!/^((?!chrome|android).)*safari/i.test(zt$1())}function $e$1(n,h,s){h===void 0&&(h=!1),s===void 0&&(s=!1);var _=n.getBoundingClientRect(),M=1,$=1;h&&Ee$1(n)&&(M=n.offsetWidth>0&&Xe$1(_.width)/n.offsetWidth||1,$=n.offsetHeight>0&&Xe$1(_.height)/n.offsetHeight||1);var V=He$1(n)?me(n):window,oe=V.visualViewport,Y=!dn$1()&&s,ie=(_.left+(Y&&oe?oe.offsetLeft:0))/M,zn=(_.top+(Y&&oe?oe.offsetTop:0))/$,Et=_.width/M,ml=_.height/$;return{width:Et,height:ml,top:zn,right:ie+Et,bottom:zn+ml,left:ie,x:ie,y:zn}}function ur$1(n){var h=$e$1(n),s=n.offsetWidth,_=n.offsetHeight;return Math.abs(h.width-s)<=1&&(s=h.width),Math.abs(h.height-_)<=1&&(_=h.height),{x:n.offsetLeft,y:n.offsetTop,width:s,height:_}}function pn$1(n,h){var s=h.getRootNode&&h.getRootNode();if(n.contains(h))return!0;if(s&&sr$1(s)){var _=h;do{if(_&&n.isSameNode(_))return!0;_=_.parentNode||_.host}while(_)}return!1}function De(n){return n?(n.nodeName||"").toLowerCase():null}function Ce$1(n){return me(n).getComputedStyle(n)}function Lo$1(n){return["table","td","th"].indexOf(De(n))>=0}function _e$1(n){return((He$1(n)?n.ownerDocument:n.document)||window.document).documentElement}function kt$1(n){return De(n)==="html"?n:n.assignedSlot||n.parentNode||(sr$1(n)?n.host:null)||_e$1(n)}function Ur(n){return!Ee$1(n)||Ce$1(n).position==="fixed"?null:n.offsetParent}function Ho$1(n){var h=/firefox/i.test(zt$1()),s=/Trident/i.test(zt$1());if(s&&Ee$1(n)){var _=Ce$1(n);if(_.position==="fixed")return null}var M=kt$1(n);for(sr$1(M)&&(M=M.host);Ee$1(M)&&["html","body"].indexOf(De(M))<0;){var $=Ce$1(M);if($.transform!=="none"||$.perspective!=="none"||$.contain==="paint"||["transform","perspective"].indexOf($.willChange)!==-1||h&&$.willChange==="filter"||h&&$.filter&&$.filter!=="none")return M;M=M.parentNode}return null}function yt$1(n){for(var h=me(n),s=Ur(n);s&&Lo$1(s)&&Ce$1(s).position==="static";)s=Ur(s);return s&&(De(s)==="html"||De(s)==="body"&&Ce$1(s).position==="static")?h:s||Ho$1(n)||h}function cr(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ft(n,h,s){return Le(n,Ct$1(h,s))}function No$1(n,h,s){var _=ft(n,h,s);return _>s?s:_}function vn$1(){return{top:0,right:0,bottom:0,left:0}}function mn$1(n){return Object.assign({},vn$1(),n)}function hn$1(n,h){return h.reduce(function(s,_){return s[_]=n,s},{})}var Uo$1=function(n,h){return n=typeof n=="function"?n(Object.assign({},h.rects,{placement:h.placement})):n,mn$1(typeof n!="number"?n:hn$1(n,ht))};function Yo$1(n){var h,s=n.state,_=n.name,M=n.options,$=s.elements.arrow,V=s.modifiersData.popperOffsets,oe=xe(s.placement),Y=cr(oe),ie=[pe$1,we].indexOf(oe)>=0,zn=ie?"height":"width";if(!(!$||!V)){var Et=Uo$1(M.padding,s),ml=ur$1($),rl=Y==="y"?de$1:pe$1,Ml=Y==="y"?be:we,kl=s.rects.reference[zn]+s.rects.reference[Y]-V[Y]-s.rects.popper[zn],_u=V[Y]-s.rects.reference[Y],Hu=yt$1($),bu=Hu?Y==="y"?Hu.clientHeight||0:Hu.clientWidth||0:0,dl=kl/2-_u/2,Tl=Et[rl],$l=bu-ml[zn]-Et[Ml],Bl=bu/2-ml[zn]/2+dl,Pu=ft(Tl,Bl,$l),Il=Y;s.modifiersData[_]=(h={},h[Il]=Pu,h.centerOffset=Pu-Bl,h)}}function Vo$1(n){var h=n.state,s=n.options,_=s.element,M=_===void 0?"[data-popper-arrow]":_;M!=null&&(typeof M=="string"&&(M=h.elements.popper.querySelector(M),!M)||pn$1(h.elements.popper,M)&&(h.elements.arrow=M))}const Wo$1={name:"arrow",enabled:!0,phase:"main",fn:Yo$1,effect:Vo$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ze(n){return n.split("-")[1]}var Jo$1={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Go$1(n,h){var s=n.x,_=n.y,M=h.devicePixelRatio||1;return{x:Xe$1(s*M)/M||0,y:Xe$1(_*M)/M||0}}function Yr(n){var h,s=n.popper,_=n.popperRect,M=n.placement,$=n.variation,V=n.offsets,oe=n.position,Y=n.gpuAcceleration,ie=n.adaptive,zn=n.roundOffsets,Et=n.isFixed,ml=V.x,rl=ml===void 0?0:ml,Ml=V.y,kl=Ml===void 0?0:Ml,_u=typeof zn=="function"?zn({x:rl,y:kl}):{x:rl,y:kl};rl=_u.x,kl=_u.y;var Hu=V.hasOwnProperty("x"),bu=V.hasOwnProperty("y"),dl=pe$1,Tl=de$1,$l=window;if(ie){var Bl=yt$1(s),Pu="clientHeight",Il="clientWidth";if(Bl===me(s)&&(Bl=_e$1(s),Ce$1(Bl).position!=="static"&&oe==="absolute"&&(Pu="scrollHeight",Il="scrollWidth")),Bl=Bl,M===de$1||(M===pe$1||M===we)&&$===vt){Tl=be;var ud=Et&&Bl===$l&&$l.visualViewport?$l.visualViewport.height:Bl[Pu];kl-=ud-_.height,kl*=Y?1:-1}if(M===pe$1||(M===de$1||M===be)&&$===vt){dl=we;var pd=Et&&Bl===$l&&$l.visualViewport?$l.visualViewport.width:Bl[Il];rl-=pd-_.width,rl*=Y?1:-1}}var id=Object.assign({position:oe},ie&&Jo$1),rh=zn===!0?Go$1({x:rl,y:kl},me(s)):{x:rl,y:kl};if(rl=rh.x,kl=rh.y,Y){var qd;return Object.assign({},id,(qd={},qd[Tl]=bu?"0":"",qd[dl]=Hu?"0":"",qd.transform=($l.devicePixelRatio||1)<=1?"translate("+rl+"px, "+kl+"px)":"translate3d("+rl+"px, "+kl+"px, 0)",qd))}return Object.assign({},id,(h={},h[Tl]=bu?kl+"px":"",h[dl]=Hu?rl+"px":"",h.transform="",h))}function qo$1(n){var h=n.state,s=n.options,_=s.gpuAcceleration,M=_===void 0?!0:_,$=s.adaptive,V=$===void 0?!0:$,oe=s.roundOffsets,Y=oe===void 0?!0:oe,ie={placement:xe(h.placement),variation:Ze(h.placement),popper:h.elements.popper,popperRect:h.rects.popper,gpuAcceleration:M,isFixed:h.options.strategy==="fixed"};h.modifiersData.popperOffsets!=null&&(h.styles.popper=Object.assign({},h.styles.popper,Yr(Object.assign({},ie,{offsets:h.modifiersData.popperOffsets,position:h.options.strategy,adaptive:V,roundOffsets:Y})))),h.modifiersData.arrow!=null&&(h.styles.arrow=Object.assign({},h.styles.arrow,Yr(Object.assign({},ie,{offsets:h.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Y})))),h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-placement":h.placement})}const zo$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:qo$1,data:{}};var At={passive:!0};function Ko$1(n){var h=n.state,s=n.instance,_=n.options,M=_.scroll,$=M===void 0?!0:M,V=_.resize,oe=V===void 0?!0:V,Y=me(h.elements.popper),ie=[].concat(h.scrollParents.reference,h.scrollParents.popper);return $&&ie.forEach(function(zn){zn.addEventListener("scroll",s.update,At)}),oe&&Y.addEventListener("resize",s.update,At),function(){$&&ie.forEach(function(zn){zn.removeEventListener("scroll",s.update,At)}),oe&&Y.removeEventListener("resize",s.update,At)}}const Qo$1={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ko$1,data:{}};var Xo$1={left:"right",right:"left",bottom:"top",top:"bottom"};function Rt$1(n){return n.replace(/left|right|bottom|top/g,function(h){return Xo$1[h]})}var $o$1={start:"end",end:"start"};function Vr(n){return n.replace(/start|end/g,function(h){return $o$1[h]})}function lr$1(n){var h=me(n),s=h.pageXOffset,_=h.pageYOffset;return{scrollLeft:s,scrollTop:_}}function fr$1(n){return $e$1(_e$1(n)).left+lr$1(n).scrollLeft}function Zo$1(n,h){var s=me(n),_=_e$1(n),M=s.visualViewport,$=_.clientWidth,V=_.clientHeight,oe=0,Y=0;if(M){$=M.width,V=M.height;var ie=dn$1();(ie||!ie&&h==="fixed")&&(oe=M.offsetLeft,Y=M.offsetTop)}return{width:$,height:V,x:oe+fr$1(n),y:Y}}function ei(n){var h,s=_e$1(n),_=lr$1(n),M=(h=n.ownerDocument)==null?void 0:h.body,$=Le(s.scrollWidth,s.clientWidth,M?M.scrollWidth:0,M?M.clientWidth:0),V=Le(s.scrollHeight,s.clientHeight,M?M.scrollHeight:0,M?M.clientHeight:0),oe=-_.scrollLeft+fr$1(n),Y=-_.scrollTop;return Ce$1(M||s).direction==="rtl"&&(oe+=Le(s.clientWidth,M?M.clientWidth:0)-$),{width:$,height:V,x:oe,y:Y}}function dr$1(n){var h=Ce$1(n),s=h.overflow,_=h.overflowX,M=h.overflowY;return/auto|scroll|overlay|hidden/.test(s+M+_)}function yn$1(n){return["html","body","#document"].indexOf(De(n))>=0?n.ownerDocument.body:Ee$1(n)&&dr$1(n)?n:yn$1(kt$1(n))}function dt$1(n,h){var s;h===void 0&&(h=[]);var _=yn$1(n),M=_===((s=n.ownerDocument)==null?void 0:s.body),$=me(_),V=M?[$].concat($.visualViewport||[],dr$1(_)?_:[]):_,oe=h.concat(V);return M?oe:oe.concat(dt$1(kt$1(V)))}function Kt(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function ti(n,h){var s=$e$1(n,!1,h==="fixed");return s.top=s.top+n.clientTop,s.left=s.left+n.clientLeft,s.bottom=s.top+n.clientHeight,s.right=s.left+n.clientWidth,s.width=n.clientWidth,s.height=n.clientHeight,s.x=s.left,s.y=s.top,s}function Wr(n,h,s){return h===ln$1?Kt(Zo$1(n,s)):He$1(h)?ti(h,s):Kt(ei(_e$1(n)))}function ri$1(n){var h=dt$1(kt$1(n)),s=["absolute","fixed"].indexOf(Ce$1(n).position)>=0,_=s&&Ee$1(n)?yt$1(n):n;return He$1(_)?h.filter(function(M){return He$1(M)&&pn$1(M,_)&&De(M)!=="body"}):[]}function ni(n,h,s,_){var M=h==="clippingParents"?ri$1(n):[].concat(h),$=[].concat(M,[s]),V=$[0],oe=$.reduce(function(Y,ie){var zn=Wr(n,ie,_);return Y.top=Le(zn.top,Y.top),Y.right=Ct$1(zn.right,Y.right),Y.bottom=Ct$1(zn.bottom,Y.bottom),Y.left=Le(zn.left,Y.left),Y},Wr(n,V,_));return oe.width=oe.right-oe.left,oe.height=oe.bottom-oe.top,oe.x=oe.left,oe.y=oe.top,oe}function gn$1(n){var h=n.reference,s=n.element,_=n.placement,M=_?xe(_):null,$=_?Ze(_):null,V=h.x+h.width/2-s.width/2,oe=h.y+h.height/2-s.height/2,Y;switch(M){case de$1:Y={x:V,y:h.y-s.height};break;case be:Y={x:V,y:h.y+h.height};break;case we:Y={x:h.x+h.width,y:oe};break;case pe$1:Y={x:h.x-s.width,y:oe};break;default:Y={x:h.x,y:h.y}}var ie=M?cr(M):null;if(ie!=null){var zn=ie==="y"?"height":"width";switch($){case Qe$1:Y[ie]=Y[ie]-(h[zn]/2-s[zn]/2);break;case vt:Y[ie]=Y[ie]+(h[zn]/2-s[zn]/2);break}}return Y}function mt(n,h){h===void 0&&(h={});var s=h,_=s.placement,M=_===void 0?n.placement:_,$=s.strategy,V=$===void 0?n.strategy:$,oe=s.boundary,Y=oe===void 0?To$1:oe,ie=s.rootBoundary,zn=ie===void 0?ln$1:ie,Et=s.elementContext,ml=Et===void 0?ut:Et,rl=s.altBoundary,Ml=rl===void 0?!1:rl,kl=s.padding,_u=kl===void 0?0:kl,Hu=mn$1(typeof _u!="number"?_u:hn$1(_u,ht)),bu=ml===ut?Co$1:ut,dl=n.rects.popper,Tl=n.elements[Ml?bu:ml],$l=ni(He$1(Tl)?Tl:Tl.contextElement||_e$1(n.elements.popper),Y,zn,V),Bl=$e$1(n.elements.reference),Pu=gn$1({reference:Bl,element:dl,placement:M}),Il=Kt(Object.assign({},dl,Pu)),ud=ml===ut?Il:Bl,pd={top:$l.top-ud.top+Hu.top,bottom:ud.bottom-$l.bottom+Hu.bottom,left:$l.left-ud.left+Hu.left,right:ud.right-$l.right+Hu.right},id=n.modifiersData.offset;if(ml===ut&&id){var rh=id[M];Object.keys(pd).forEach(function(qd){var oh=[we,be].indexOf(qd)>=0?1:-1,Ed=[de$1,be].indexOf(qd)>=0?"y":"x";pd[qd]+=rh[Ed]*oh})}return pd}function oi(n,h){h===void 0&&(h={});var s=h,_=s.placement,M=s.boundary,$=s.rootBoundary,V=s.padding,oe=s.flipVariations,Y=s.allowedAutoPlacements,ie=Y===void 0?fn$1:Y,zn=Ze(_),Et=zn?oe?Nr:Nr.filter(function(Ml){return Ze(Ml)===zn}):ht,ml=Et.filter(function(Ml){return ie.indexOf(Ml)>=0});ml.length===0&&(ml=Et);var rl=ml.reduce(function(Ml,kl){return Ml[kl]=mt(n,{placement:kl,boundary:M,rootBoundary:$,padding:V})[xe(kl)],Ml},{});return Object.keys(rl).sort(function(Ml,kl){return rl[Ml]-rl[kl]})}function ii(n){if(xe(n)===ar)return[];var h=Rt$1(n);return[Vr(n),h,Vr(h)]}function ai$1(n){var h=n.state,s=n.options,_=n.name;if(!h.modifiersData[_]._skip){for(var M=s.mainAxis,$=M===void 0?!0:M,V=s.altAxis,oe=V===void 0?!0:V,Y=s.fallbackPlacements,ie=s.padding,zn=s.boundary,Et=s.rootBoundary,ml=s.altBoundary,rl=s.flipVariations,Ml=rl===void 0?!0:rl,kl=s.allowedAutoPlacements,_u=h.options.placement,Hu=xe(_u),bu=Hu===_u,dl=Y||(bu||!Ml?[Rt$1(_u)]:ii(_u)),Tl=[_u].concat(dl).reduce(function(nd,Yd){return nd.concat(xe(Yd)===ar?oi(h,{placement:Yd,boundary:zn,rootBoundary:Et,padding:ie,flipVariations:Ml,allowedAutoPlacements:kl}):Yd)},[]),$l=h.rects.reference,Bl=h.rects.popper,Pu=new Map,Il=!0,ud=Tl[0],pd=0;pd<Tl.length;pd++){var id=Tl[pd],rh=xe(id),qd=Ze(id)===Qe$1,oh=[de$1,be].indexOf(rh)>=0,Ed=oh?"width":"height",Nl=mt(h,{placement:id,boundary:zn,rootBoundary:Et,altBoundary:ml,padding:ie}),Gd=oh?qd?we:pe$1:qd?be:de$1;$l[Ed]>Bl[Ed]&&(Gd=Rt$1(Gd));var Cd=Rt$1(Gd),Bu=[];if($&&Bu.push(Nl[rh]<=0),oe&&Bu.push(Nl[Gd]<=0,Nl[Cd]<=0),Bu.every(function(nd){return nd})){ud=id,Il=!1;break}Pu.set(id,Bu)}if(Il)for(var wh=Ml?3:1,Rd=function(nd){var Yd=Tl.find(function(Kh){var rp=Pu.get(Kh);if(rp)return rp.slice(0,nd).every(function(lh){return lh})});if(Yd)return ud=Yd,"break"},dh=wh;dh>0;dh--){var Ih=Rd(dh);if(Ih==="break")break}h.placement!==ud&&(h.modifiersData[_]._skip=!0,h.placement=ud,h.reset=!0)}}const si={name:"flip",enabled:!0,phase:"main",fn:ai$1,requiresIfExists:["offset"],data:{_skip:!1}};function Jr(n,h,s){return s===void 0&&(s={x:0,y:0}),{top:n.top-h.height-s.y,right:n.right-h.width+s.x,bottom:n.bottom-h.height+s.y,left:n.left-h.width-s.x}}function Gr(n){return[de$1,we,be,pe$1].some(function(h){return n[h]>=0})}function ui$1(n){var h=n.state,s=n.name,_=h.rects.reference,M=h.rects.popper,$=h.modifiersData.preventOverflow,V=mt(h,{elementContext:"reference"}),oe=mt(h,{altBoundary:!0}),Y=Jr(V,_),ie=Jr(oe,M,$),zn=Gr(Y),Et=Gr(ie);h.modifiersData[s]={referenceClippingOffsets:Y,popperEscapeOffsets:ie,isReferenceHidden:zn,hasPopperEscaped:Et},h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-reference-hidden":zn,"data-popper-escaped":Et})}const ci$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ui$1};function li$1(n,h,s){var _=xe(n),M=[pe$1,de$1].indexOf(_)>=0?-1:1,$=typeof s=="function"?s(Object.assign({},h,{placement:n})):s,V=$[0],oe=$[1];return V=V||0,oe=(oe||0)*M,[pe$1,we].indexOf(_)>=0?{x:oe,y:V}:{x:V,y:oe}}function fi(n){var h=n.state,s=n.options,_=n.name,M=s.offset,$=M===void 0?[0,0]:M,V=fn$1.reduce(function(zn,Et){return zn[Et]=li$1(Et,h.rects,$),zn},{}),oe=V[h.placement],Y=oe.x,ie=oe.y;h.modifiersData.popperOffsets!=null&&(h.modifiersData.popperOffsets.x+=Y,h.modifiersData.popperOffsets.y+=ie),h.modifiersData[_]=V}const di={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:fi};function pi(n){var h=n.state,s=n.name;h.modifiersData[s]=gn$1({reference:h.rects.reference,element:h.rects.popper,placement:h.placement})}const vi={name:"popperOffsets",enabled:!0,phase:"read",fn:pi,data:{}};function mi(n){return n==="x"?"y":"x"}function hi(n){var h=n.state,s=n.options,_=n.name,M=s.mainAxis,$=M===void 0?!0:M,V=s.altAxis,oe=V===void 0?!1:V,Y=s.boundary,ie=s.rootBoundary,zn=s.altBoundary,Et=s.padding,ml=s.tether,rl=ml===void 0?!0:ml,Ml=s.tetherOffset,kl=Ml===void 0?0:Ml,_u=mt(h,{boundary:Y,rootBoundary:ie,padding:Et,altBoundary:zn}),Hu=xe(h.placement),bu=Ze(h.placement),dl=!bu,Tl=cr(Hu),$l=mi(Tl),Bl=h.modifiersData.popperOffsets,Pu=h.rects.reference,Il=h.rects.popper,ud=typeof kl=="function"?kl(Object.assign({},h.rects,{placement:h.placement})):kl,pd=typeof ud=="number"?{mainAxis:ud,altAxis:ud}:Object.assign({mainAxis:0,altAxis:0},ud),id=h.modifiersData.offset?h.modifiersData.offset[h.placement]:null,rh={x:0,y:0};if(Bl){if($){var qd,oh=Tl==="y"?de$1:pe$1,Ed=Tl==="y"?be:we,Nl=Tl==="y"?"height":"width",Gd=Bl[Tl],Cd=Gd+_u[oh],Bu=Gd-_u[Ed],wh=rl?-Il[Nl]/2:0,Rd=bu===Qe$1?Pu[Nl]:Il[Nl],dh=bu===Qe$1?-Il[Nl]:-Pu[Nl],Ih=h.elements.arrow,nd=rl&&Ih?ur$1(Ih):{width:0,height:0},Yd=h.modifiersData["arrow#persistent"]?h.modifiersData["arrow#persistent"].padding:vn$1(),Kh=Yd[oh],rp=Yd[Ed],lh=ft(0,Pu[Nl],nd[Nl]),yp=dl?Pu[Nl]/2-wh-lh-Kh-pd.mainAxis:Rd-lh-Kh-pd.mainAxis,Cp=dl?-Pu[Nl]/2+wh+lh+rp+pd.mainAxis:dh+lh+rp+pd.mainAxis,vp=h.elements.arrow&&yt$1(h.elements.arrow),mf=vp?Tl==="y"?vp.clientTop||0:vp.clientLeft||0:0,Zp=(qd=id?.[Tl])!=null?qd:0,kf=Gd+yp-Zp-mf,Eg=Gd+Cp-Zp,Gg=ft(rl?Ct$1(Cd,kf):Cd,Gd,rl?Le(Bu,Eg):Bu);Bl[Tl]=Gg,rh[Tl]=Gg-Gd}if(oe){var Hf,Rg=Tl==="x"?de$1:pe$1,fg=Tl==="x"?be:we,eg=Bl[$l],Wg=$l==="y"?"height":"width",Lg=eg+_u[Rg],$g=eg-_u[fg],Bm=[de$1,pe$1].indexOf(Hu)!==-1,Lm=(Hf=id?.[$l])!=null?Hf:0,$m=Bm?Lg:eg-Pu[Wg]-Il[Wg]-Lm+pd.altAxis,_d=Bm?eg+Pu[Wg]+Il[Wg]-Lm-pd.altAxis:$g,Zd=rl&&Bm?No$1($m,eg,_d):ft(rl?$m:Lg,eg,rl?_d:$g);Bl[$l]=Zd,rh[$l]=Zd-eg}h.modifiersData[_]=rh}}const yi$1={name:"preventOverflow",enabled:!0,phase:"main",fn:hi,requiresIfExists:["offset"]};function gi(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function bi$1(n){return n===me(n)||!Ee$1(n)?lr$1(n):gi(n)}function wi$1(n){var h=n.getBoundingClientRect(),s=Xe$1(h.width)/n.offsetWidth||1,_=Xe$1(h.height)/n.offsetHeight||1;return s!==1||_!==1}function xi(n,h,s){s===void 0&&(s=!1);var _=Ee$1(h),M=Ee$1(h)&&wi$1(h),$=_e$1(h),V=$e$1(n,M,s),oe={scrollLeft:0,scrollTop:0},Y={x:0,y:0};return(_||!_&&!s)&&((De(h)!=="body"||dr$1($))&&(oe=bi$1(h)),Ee$1(h)?(Y=$e$1(h,!0),Y.x+=h.clientLeft,Y.y+=h.clientTop):$&&(Y.x=fr$1($))),{x:V.left+oe.scrollLeft-Y.x,y:V.top+oe.scrollTop-Y.y,width:V.width,height:V.height}}function Ei(n){var h=new Map,s=new Set,_=[];n.forEach(function($){h.set($.name,$)});function M($){s.add($.name);var V=[].concat($.requires||[],$.requiresIfExists||[]);V.forEach(function(oe){if(!s.has(oe)){var Y=h.get(oe);Y&&M(Y)}}),_.push($)}return n.forEach(function($){s.has($.name)||M($)}),_}function Ai$1(n){var h=Ei(n);return Io$1.reduce(function(s,_){return s.concat(h.filter(function(M){return M.phase===_}))},[])}function Oi$1(n){var h;return function(){return h||(h=new Promise(function(s){Promise.resolve().then(function(){h=void 0,s(n())})})),h}}function Ri$1(n){var h=n.reduce(function(s,_){var M=s[_.name];return s[_.name]=M?Object.assign({},M,_,{options:Object.assign({},M.options,_.options),data:Object.assign({},M.data,_.data)}):_,s},{});return Object.keys(h).map(function(s){return h[s]})}var qr={placement:"bottom",modifiers:[],strategy:"absolute"};function zr$1(){for(var n=arguments.length,h=new Array(n),s=0;s<n;s++)h[s]=arguments[s];return!h.some(function(_){return!(_&&typeof _.getBoundingClientRect=="function")})}function Ti$1(n){n===void 0&&(n={});var h=n,s=h.defaultModifiers,_=s===void 0?[]:s,M=h.defaultOptions,$=M===void 0?qr:M;return function(V,oe,Y){Y===void 0&&(Y=$);var ie={placement:"bottom",orderedModifiers:[],options:Object.assign({},qr,$),modifiersData:{},elements:{reference:V,popper:oe},attributes:{},styles:{}},zn=[],Et=!1,ml={state:ie,setOptions:function(kl){var _u=typeof kl=="function"?kl(ie.options):kl;Ml(),ie.options=Object.assign({},$,ie.options,_u),ie.scrollParents={reference:He$1(V)?dt$1(V):V.contextElement?dt$1(V.contextElement):[],popper:dt$1(oe)};var Hu=Ai$1(Ri$1([].concat(_,ie.options.modifiers)));return ie.orderedModifiers=Hu.filter(function(bu){return bu.enabled}),rl(),ml.update()},forceUpdate:function(){if(!Et){var kl=ie.elements,_u=kl.reference,Hu=kl.popper;if(zr$1(_u,Hu)){ie.rects={reference:xi(_u,yt$1(Hu),ie.options.strategy==="fixed"),popper:ur$1(Hu)},ie.reset=!1,ie.placement=ie.options.placement,ie.orderedModifiers.forEach(function(Il){return ie.modifiersData[Il.name]=Object.assign({},Il.data)});for(var bu=0;bu<ie.orderedModifiers.length;bu++){if(ie.reset===!0){ie.reset=!1,bu=-1;continue}var dl=ie.orderedModifiers[bu],Tl=dl.fn,$l=dl.options,Bl=$l===void 0?{}:$l,Pu=dl.name;typeof Tl=="function"&&(ie=Tl({state:ie,options:Bl,name:Pu,instance:ml})||ie)}}}},update:Oi$1(function(){return new Promise(function(kl){ml.forceUpdate(),kl(ie)})}),destroy:function(){Ml(),Et=!0}};if(!zr$1(V,oe))return ml;ml.setOptions(Y).then(function(kl){!Et&&Y.onFirstUpdate&&Y.onFirstUpdate(kl)});function rl(){ie.orderedModifiers.forEach(function(kl){var _u=kl.name,Hu=kl.options,bu=Hu===void 0?{}:Hu,dl=kl.effect;if(typeof dl=="function"){var Tl=dl({state:ie,name:_u,instance:ml,options:bu}),$l=function(){};zn.push(Tl||$l)}})}function Ml(){zn.forEach(function(kl){return kl()}),zn=[]}return ml}}const Ci$1=Ti$1({defaultModifiers:[ci$1,vi,zo$1,Qo$1,di,si,yi$1,Wo$1]}),Si$1=["enabled","placement","strategy","modifiers"];function ki$1(n,h){if(n==null)return{};var s={},_=Object.keys(n),M,$;for($=0;$<_.length;$++)M=_[$],!(h.indexOf(M)>=0)&&(s[M]=n[M]);return s}const Pi$1={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},ji$1={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:n})=>()=>{const{reference:h,popper:s}=n.elements;if("removeAttribute"in h){const _=(h.getAttribute("aria-describedby")||"").split(",").filter(M=>M.trim()!==s.id);_.length?h.setAttribute("aria-describedby",_.join(",")):h.removeAttribute("aria-describedby")}},fn:({state:n})=>{var h;const{popper:s,reference:_}=n.elements,M=(h=s.getAttribute("role"))==null?void 0:h.toLowerCase();if(s.id&&M==="tooltip"&&"setAttribute"in _){const $=_.getAttribute("aria-describedby");if($&&$.split(",").indexOf(s.id)!==-1)return;_.setAttribute("aria-describedby",$?`${$},${s.id}`:s.id)}}},Di$1=[];function _i$1(n,h,s={}){let{enabled:_=!0,placement:M="bottom",strategy:$="absolute",modifiers:V=Di$1}=s,oe=ki$1(s,Si$1);const Y=reactExports.useRef(V),ie=reactExports.useRef(),zn=reactExports.useCallback(()=>{var _u;(_u=ie.current)==null||_u.update()},[]),Et=reactExports.useCallback(()=>{var _u;(_u=ie.current)==null||_u.forceUpdate()},[]),[ml,rl]=Ro$1(reactExports.useState({placement:M,update:zn,forceUpdate:Et,attributes:{},styles:{popper:{},arrow:{}}})),Ml=reactExports.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:_u})=>{const Hu={},bu={};Object.keys(_u.elements).forEach(dl=>{Hu[dl]=_u.styles[dl],bu[dl]=_u.attributes[dl]}),rl({state:_u,styles:Hu,attributes:bu,update:zn,forceUpdate:Et,placement:_u.placement})}}),[zn,Et,rl]),kl=reactExports.useMemo(()=>(lt(Y.current,V)||(Y.current=V),Y.current),[V]);return reactExports.useEffect(()=>{!ie.current||!_||ie.current.setOptions({placement:M,strategy:$,modifiers:[...kl,Ml,Pi$1]})},[$,M,Ml,_,kl]),reactExports.useEffect(()=>{if(!(!_||n==null||h==null))return ie.current=Ci$1(n,h,Object.assign({},oe,{placement:M,strategy:$,modifiers:[...kl,ji$1,Ml]})),()=>{ie.current!=null&&(ie.current.destroy(),ie.current=void 0,rl(_u=>Object.assign({},_u,{attributes:{},styles:{popper:{}}})))}},[_,n,h]),ml}const pr$1=!!(typeof window<"u"&&window.document&&window.document.createElement);var Qt$1=!1,Xt$1=!1;try{var Ut$1={get passive(){return Qt$1=!0},get once(){return Xt$1=Qt$1=!0}};pr$1&&(window.addEventListener("test",Ut$1,Ut$1),window.removeEventListener("test",Ut$1,!0))}catch{}function Mi$1(n,h,s,_){if(_&&typeof _!="boolean"&&!Xt$1){var M=_.once,$=_.capture,V=s;!Xt$1&&M&&(V=s.__once||function oe(Y){this.removeEventListener(h,oe,$),s.call(this,Y)},s.__once=V),n.addEventListener(h,V,Qt$1?_:$)}n.addEventListener(h,s,_)}function Fi$1(n,h,s,_){var M=_&&typeof _!="boolean"?_.capture:_;n.removeEventListener(h,s,M),s.__once&&n.removeEventListener(h,s.__once,M)}function Ie$1(n,h,s,_){return Mi$1(n,h,s,_),function(){Fi$1(n,h,s,_)}}function Pt$1(n){return n&&n.ownerDocument||document}function Bi$1(n){const h=reactExports.useRef(n);return reactExports.useEffect(()=>{h.current=n},[n]),h}function et(n){const h=Bi$1(n);return reactExports.useCallback(function(...s){return h.current&&h.current(...s)},[h])}const Kr=()=>{};function Ii$1(n){return n.button===0}function Li$1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}const Tt=n=>n&&("current"in n?n.current:n),Qr={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Hi$1(n,h=Kr,{disabled:s,clickTrigger:_="click"}={}){const M=reactExports.useRef(!1),$=reactExports.useRef(!1),V=reactExports.useCallback(ie=>{const zn=Tt(n);un$1(!!zn,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),M.current=!zn||Li$1(ie)||!Ii$1(ie)||!!Wt(zn,ie.target)||$.current,$.current=!1},[n]),oe=et(ie=>{const zn=Tt(n);zn&&Wt(zn,ie.target)&&($.current=!0)}),Y=et(ie=>{M.current||h(ie)});reactExports.useEffect(()=>{var ie,zn;if(s||n==null)return;const Et=Pt$1(Tt(n)),ml=Et.defaultView||window;let rl=(ie=ml.event)!=null?ie:(zn=ml.parent)==null?void 0:zn.event,Ml=null;Qr[_]&&(Ml=Ie$1(Et,Qr[_],oe,!0));const kl=Ie$1(Et,_,V,!0),_u=Ie$1(Et,_,bu=>{if(bu===rl){rl=void 0;return}Y(bu)});let Hu=[];return"ontouchstart"in Et.documentElement&&(Hu=[].slice.call(Et.body.children).map(bu=>Ie$1(bu,"mousemove",Kr))),()=>{Ml?.(),kl(),_u(),Hu.forEach(bu=>bu())}},[n,s,_,V,oe,Y])}function Ni$1(n){return n.code==="Escape"||n.keyCode===27}const Ui$1=()=>{};function Yi$1(n,h,{disabled:s,clickTrigger:_}={}){const M=h||Ui$1;Hi$1(n,M,{disabled:s,clickTrigger:_});const $=et(V=>{Ni$1(V)&&M(V)});reactExports.useEffect(()=>{if(s||n==null)return;const V=Pt$1(Tt(n));let oe=(V.defaultView||window).event;const Y=Ie$1(V,"keyup",ie=>{if(ie===oe){oe=void 0;return}$(ie)});return()=>{Y()}},[n,s,$])}const bn=reactExports.createContext(pr$1?window:void 0);bn.Provider;function Vi$1(){return reactExports.useContext(bn)}const Yt=(n,h)=>pr$1?n==null?(h||Pt$1()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function Xr(n,h){const s=Vi$1(),[_,M]=reactExports.useState(()=>Yt(n,s?.document));if(!_){const $=Yt(n);$&&M($)}return reactExports.useEffect(()=>{},[h,_]),reactExports.useEffect(()=>{const $=Yt(n);$!==_&&M($)},[n,_]),_}function Wi$1(n){const h={};return Array.isArray(n)?(n?.forEach(s=>{h[s.name]=s}),h):n||h}function Ji$1(n={}){return Array.isArray(n)?n:Object.keys(n).map(h=>(n[h].name=h,n[h]))}function Gi$1({enabled:n,enableEvents:h,placement:s,flip:_,offset:M,fixed:$,containerPadding:V,arrowElement:oe,popperConfig:Y={}}){var ie,zn,Et,ml;const rl=Wi$1(Y.modifiers);return Object.assign({},Y,{placement:s,enabled:n,strategy:$?"fixed":Y.strategy,modifiers:Ji$1(Object.assign({},rl,{eventListeners:{enabled:h,options:(ie=rl.eventListeners)==null?void 0:ie.options},preventOverflow:Object.assign({},rl.preventOverflow,{options:Object.assign({padding:V},(zn=rl.preventOverflow)==null?void 0:zn.options)}),offset:{options:Object.assign({offset:M},(Et=rl.offset)==null?void 0:Et.options)},arrow:Object.assign({},rl.arrow,{enabled:!!oe,options:Object.assign({},(ml=rl.arrow)==null?void 0:ml.options,{element:oe})}),flip:Object.assign({enabled:!!_},rl.flip)}))})}const qi$1=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",zi$1=typeof document<"u",$t$1=zi$1||qi$1?reactExports.useLayoutEffect:reactExports.useEffect;function Ki$1({children:n,in:h,onExited:s,mountOnEnter:_,unmountOnExit:M}){const $=reactExports.useRef(null),V=reactExports.useRef(h),oe=et(s);reactExports.useEffect(()=>{h?V.current=!0:oe($.current)},[h,oe]);const Y=tt($,n.ref),ie=reactExports.cloneElement(n,{ref:Y});return h?ie:M||!V.current&&_?null:ie}function Qi$1({in:n,onTransition:h}){const s=reactExports.useRef(null),_=reactExports.useRef(!0),M=et(h);return $t$1(()=>{if(!s.current)return;let $=!1;return M({in:n,element:s.current,initial:_.current,isStale:()=>$}),()=>{$=!0}},[n,M]),$t$1(()=>(_.current=!1,()=>{_.current=!0}),[]),s}function Xi$1({children:n,in:h,onExited:s,onEntered:_,transition:M}){const[$,V]=reactExports.useState(!h);h&&$&&V(!1);const oe=Qi$1({in:!!h,onTransition:ie=>{const zn=()=>{ie.isStale()||(ie.in?_?.(ie.element,ie.initial):(V(!0),s?.(ie.element)))};Promise.resolve(M(ie)).then(zn,Et=>{throw ie.in||V(!0),Et})}}),Y=tt(oe,n.ref);return $&&!h?null:reactExports.cloneElement(n,{ref:Y})}function $i$1(n,h,s){return n?k.jsx(n,Object.assign({},s)):h?k.jsx(Xi$1,Object.assign({},s,{transition:h})):k.jsx(Ki$1,Object.assign({},s))}const wn=reactExports.forwardRef((n,h)=>{const{flip:s,offset:_,placement:M,containerPadding:$,popperConfig:V={},transition:oe,runTransition:Y}=n,[ie,zn]=Ir$1(),[Et,ml]=Ir$1(),rl=tt(zn,h),Ml=Xr(n.container),kl=Xr(n.target),[_u,Hu]=reactExports.useState(!n.show),bu=_i$1(kl,ie,Gi$1({placement:M,enableEvents:!!n.show,containerPadding:$||5,flip:s,offset:_,arrowElement:Et,popperConfig:V}));n.show&&_u&&Hu(!1);const dl=(...id)=>{Hu(!0),n.onExited&&n.onExited(...id)},Tl=n.show||!_u;if(Yi$1(ie,n.onHide,{disabled:!n.rootClose||n.rootCloseDisabled,clickTrigger:n.rootCloseEvent}),!Tl)return null;const{onExit:$l,onExiting:Bl,onEnter:Pu,onEntering:Il,onEntered:ud}=n;let pd=n.children(Object.assign({},bu.attributes.popper,{style:bu.styles.popper,ref:rl}),{popper:bu,placement:M,show:!!n.show,arrowProps:Object.assign({},bu.attributes.arrow,{style:bu.styles.arrow,ref:ml})});return pd=$i$1(oe,Y,{in:!!n.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:pd,onExit:$l,onExiting:Bl,onExited:dl,onEnter:Pu,onEntering:Il,onEntered:ud}),Ml?ReactDOM.createPortal(pd,Ml):null});wn.displayName="Overlay";function $r(n,h){return n.classList?!!h&&n.classList.contains(h):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+h+" ")!==-1}const Zi$1=["xxl","xl","lg","md","sm","xs"],ea$1="xs",xn=reactExports.createContext({prefixes:{},breakpoints:Zi$1,minBreakpoint:ea$1});function Ne(n,h){const{prefixes:s}=reactExports.useContext(xn);return n||s[h]||h}function En(){const{dir:n}=reactExports.useContext(xn);return n==="rtl"}const An=reactExports.forwardRef(({className:n,bsPrefix:h,as:s="div",..._},M)=>(h=Ne(h,"popover-header"),k.jsx(s,{ref:M,className:Ye$1(n,h),..._})));An.displayName="PopoverHeader";const vr$1=reactExports.forwardRef(({className:n,bsPrefix:h,as:s="div",..._},M)=>(h=Ne(h,"popover-body"),k.jsx(s,{ref:M,className:Ye$1(n,h),..._})));vr$1.displayName="PopoverBody";function On(n,h){let s=n;return n==="left"?s=h?"end":"start":n==="right"&&(s=h?"start":"end"),s}function Rn(n="absolute"){return{position:n,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const ta$1=reactExports.forwardRef(({bsPrefix:n,placement:h="right",className:s,style:_,children:M,body:$,arrowProps:V,hasDoneInitialMeasure:oe,popper:Y,show:ie,...zn},Et)=>{const ml=Ne(n,"popover"),rl=En(),[Ml]=h?.split("-")||[],kl=On(Ml,rl);let _u=_;return ie&&!oe&&(_u={..._,...Rn(Y?.strategy)}),k.jsxs("div",{ref:Et,role:"tooltip",style:_u,"x-placement":Ml,className:Ye$1(s,ml,Ml&&`bs-popover-${kl}`),...zn,children:[k.jsx("div",{className:"popover-arrow",...V}),$?k.jsx(vr$1,{children:M}):M]})}),Zt$1=Object.assign(ta$1,{Header:An,Body:vr$1,POPPER_OFFSET:[0,8]}),Tn=reactExports.forwardRef(({bsPrefix:n,placement:h="right",className:s,style:_,children:M,arrowProps:$,hasDoneInitialMeasure:V,popper:oe,show:Y,...ie},zn)=>{n=Ne(n,"tooltip");const Et=En(),[ml]=h?.split("-")||[],rl=On(ml,Et);let Ml=_;return Y&&!V&&(Ml={..._,...Rn(oe?.strategy)}),k.jsxs("div",{ref:zn,style:Ml,role:"tooltip","x-placement":ml,className:Ye$1(s,n,`bs-tooltip-${rl}`),...ie,children:[k.jsx("div",{className:"tooltip-arrow",...$}),k.jsx("div",{className:`${n}-inner`,children:M})]})});Tn.displayName="Tooltip";const Cn=Object.assign(Tn,{TOOLTIP_OFFSET:[0,6]});function ra$1(n){const h=reactExports.useRef(null),s=Ne(void 0,"popover"),_=Ne(void 0,"tooltip"),M=reactExports.useMemo(()=>({name:"offset",options:{offset:()=>{if(n)return n;if(h.current){if($r(h.current,s))return Zt$1.POPPER_OFFSET;if($r(h.current,_))return Cn.TOOLTIP_OFFSET}return[0,0]}}}),[n,s,_]);return[h,[M]]}const Zr={disabled:!1},Sn$1=dm.createContext(null);var oa$1=function(n){return n.scrollTop},ct="unmounted",Fe="exited",je="entering",Be="entered",er$1="exiting",Se$1=(function(n){Eo$1(h,n);function h(_,M){var $;$=n.call(this,_,M)||this;var V=M,oe=V&&!V.isMounting?_.enter:_.appear,Y;return $.appearStatus=null,_.in?oe?(Y=Fe,$.appearStatus=je):Y=Be:_.unmountOnExit||_.mountOnEnter?Y=ct:Y=Fe,$.state={status:Y},$.nextCallback=null,$}h.getDerivedStateFromProps=function(_,M){var $=_.in;return $&&M.status===ct?{status:Fe}:null};var s=h.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(_){var M=null;if(_!==this.props){var $=this.state.status;this.props.in?$!==je&&$!==Be&&(M=je):($===je||$===Be)&&(M=er$1)}this.updateStatus(!1,M)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var _=this.props.timeout,M,$,V;return M=$=V=_,_!=null&&typeof _!="number"&&(M=_.exit,$=_.enter,V=_.appear!==void 0?_.appear:$),{exit:M,enter:$,appear:V}},s.updateStatus=function(_,M){if(_===void 0&&(_=!1),M!==null)if(this.cancelNextCallback(),M===je){if(this.props.unmountOnExit||this.props.mountOnEnter){var $=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);$&&oa$1($)}this.performEnter(_)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Fe&&this.setState({status:ct})},s.performEnter=function(_){var M=this,$=this.props.enter,V=this.context?this.context.isMounting:_,oe=this.props.nodeRef?[V]:[ReactDOM.findDOMNode(this),V],Y=oe[0],ie=oe[1],zn=this.getTimeouts(),Et=V?zn.appear:zn.enter;if(!_&&!$||Zr.disabled){this.safeSetState({status:Be},function(){M.props.onEntered(Y)});return}this.props.onEnter(Y,ie),this.safeSetState({status:je},function(){M.props.onEntering(Y,ie),M.onTransitionEnd(Et,function(){M.safeSetState({status:Be},function(){M.props.onEntered(Y,ie)})})})},s.performExit=function(){var _=this,M=this.props.exit,$=this.getTimeouts(),V=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!M||Zr.disabled){this.safeSetState({status:Fe},function(){_.props.onExited(V)});return}this.props.onExit(V),this.safeSetState({status:er$1},function(){_.props.onExiting(V),_.onTransitionEnd($.exit,function(){_.safeSetState({status:Fe},function(){_.props.onExited(V)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(_,M){M=this.setNextCallback(M),this.setState(_,M)},s.setNextCallback=function(_){var M=this,$=!0;return this.nextCallback=function(V){$&&($=!1,M.nextCallback=null,_(V))},this.nextCallback.cancel=function(){$=!1},this.nextCallback},s.onTransitionEnd=function(_,M){this.setNextCallback(M);var $=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),V=_==null&&!this.props.addEndListener;if(!$||V){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var oe=this.props.nodeRef?[this.nextCallback]:[$,this.nextCallback],Y=oe[0],ie=oe[1];this.props.addEndListener(Y,ie)}_!=null&&setTimeout(this.nextCallback,_)},s.render=function(){var _=this.state.status;if(_===ct)return null;var M=this.props,$=M.children;M.in,M.mountOnEnter,M.unmountOnExit,M.appear,M.enter,M.exit,M.timeout,M.addEndListener,M.onEnter,M.onEntering,M.onEntered,M.onExit,M.onExiting,M.onExited,M.nodeRef;var V=wo$1(M,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return dm.createElement(Sn$1.Provider,{value:null},typeof $=="function"?$(_,V):dm.cloneElement(dm.Children.only($),V))},h})(dm.Component);Se$1.contextType=Sn$1;Se$1.propTypes={};function ze$1(){}Se$1.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ze$1,onEntering:ze$1,onEntered:ze$1,onExit:ze$1,onExiting:ze$1,onExited:ze$1};Se$1.UNMOUNTED=ct;Se$1.EXITED=Fe;Se$1.ENTERING=je;Se$1.ENTERED=Be;Se$1.EXITING=er$1;function ia$1(n){var h=Pt$1(n);return h&&h.defaultView||window}function aa$1(n,h){return ia$1(n).getComputedStyle(n,h)}var sa$1=/([A-Z])/g;function ua$1(n){return n.replace(sa$1,"-$1").toLowerCase()}var ca$1=/^ms-/;function Ot(n){return ua$1(n).replace(ca$1,"-ms-")}var la$1=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function fa$1(n){return!!(n&&la$1.test(n))}function kn(n,h){var s="",_="";if(typeof h=="string")return n.style.getPropertyValue(Ot(h))||aa$1(n).getPropertyValue(Ot(h));Object.keys(h).forEach(function(M){var $=h[M];!$&&$!==0?n.style.removeProperty(Ot(M)):fa$1(M)?_+=M+"("+$+") ":s+=Ot(M)+": "+$+";"}),_&&(s+="transform: "+_+";"),n.style.cssText+=";"+s}function da$1(n,h,s,_){if(_===void 0&&(_=!0),n){var M=document.createEvent("HTMLEvents");M.initEvent(h,s,_),n.dispatchEvent(M)}}function pa$1(n){var h=kn(n,"transitionDuration")||"",s=h.indexOf("ms")===-1?1e3:1;return parseFloat(h)*s}function va$1(n,h,s){s===void 0&&(s=5);var _=!1,M=setTimeout(function(){_||da$1(n,"transitionend",!0)},h+s),$=Ie$1(n,"transitionend",function(){_=!0},{once:!0});return function(){clearTimeout(M),$()}}function ma$1(n,h,s,_){s==null&&(s=pa$1(n)||0);var M=va$1(n,s,_),$=Ie$1(n,"transitionend",h);return function(){M(),$()}}function en$1(n,h){const s=kn(n,h)||"",_=s.indexOf("ms")===-1?1e3:1;return parseFloat(s)*_}function ha$1(n,h){const s=en$1(n,"transitionDuration"),_=en$1(n,"transitionDelay"),M=ma$1(n,$=>{$.target===n&&(M(),h($))},s+_)}function ya$1(n){n.offsetHeight}function St(n){return n&&"setState"in n?ReactDOM.findDOMNode(n):n??null}const ga$1=dm.forwardRef(({onEnter:n,onEntering:h,onEntered:s,onExit:_,onExiting:M,onExited:$,addEndListener:V,children:oe,childRef:Y,...ie},zn)=>{const Et=reactExports.useRef(null),ml=tt(Et,Y),rl=Bl=>{ml(St(Bl))},Ml=Bl=>Pu=>{Bl&&Et.current&&Bl(Et.current,Pu)},kl=reactExports.useCallback(Ml(n),[n]),_u=reactExports.useCallback(Ml(h),[h]),Hu=reactExports.useCallback(Ml(s),[s]),bu=reactExports.useCallback(Ml(_),[_]),dl=reactExports.useCallback(Ml(M),[M]),Tl=reactExports.useCallback(Ml($),[$]),$l=reactExports.useCallback(Ml(V),[V]);return k.jsx(Se$1,{ref:zn,...ie,onEnter:kl,onEntered:Hu,onEntering:_u,onExit:bu,onExited:Tl,onExiting:dl,addEndListener:$l,nodeRef:Et,children:typeof oe=="function"?(Bl,Pu)=>oe(Bl,{...Pu,ref:rl}):dm.cloneElement(oe,{ref:rl})})}),ba$1={[je]:"show",[Be]:"show"},tr$1=reactExports.forwardRef(({className:n,children:h,transitionClasses:s={},onEnter:_,...M},$)=>{const V={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...M},oe=reactExports.useCallback((Y,ie)=>{ya$1(Y),_?.(Y,ie)},[_]);return k.jsx(ga$1,{ref:$,addEndListener:ha$1,...V,onEnter:oe,childRef:h.ref,children:(Y,ie)=>reactExports.cloneElement(h,{...ie,className:Ye$1("fade",n,h.props.className,ba$1[Y],s[Y])})})});tr$1.displayName="Fade";function wa$1(n,h){const{ref:s}=n,{ref:_}=h;n.ref=s.__wrapped||(s.__wrapped=M=>s(St(M))),h.ref=_.__wrapped||(_.__wrapped=M=>_(St(M)))}const Pn=reactExports.forwardRef(({children:n,transition:h=tr$1,popperConfig:s={},rootClose:_=!1,placement:M="top",show:$=!1,...V},oe)=>{const Y=reactExports.useRef({}),[ie,zn]=reactExports.useState(null),[Et,ml]=ra$1(V.offset),rl=tt(oe,Et),Ml=h===!0?tr$1:h||void 0,kl=et(_u=>{zn(_u),s==null||s.onFirstUpdate==null||s.onFirstUpdate(_u)});return $t$1(()=>{ie&&V.target&&(Y.current.scheduleUpdate==null||Y.current.scheduleUpdate())},[ie,V.target]),reactExports.useEffect(()=>{$||zn(null)},[$]),k.jsx(wn,{...V,ref:rl,popperConfig:{...s,modifiers:ml.concat(s.modifiers||[]),onFirstUpdate:kl},transition:Ml,rootClose:_,placement:M,show:$,children:(_u,{arrowProps:Hu,popper:bu,show:dl})=>{var Tl,$l;wa$1(_u,Hu);const Bl=bu?.placement,Pu=Object.assign(Y.current,{state:bu?.state,scheduleUpdate:bu?.update,placement:Bl,outOfBoundaries:(bu==null||(Tl=bu.state)==null||($l=Tl.modifiersData.hide)==null?void 0:$l.isReferenceHidden)||!1,strategy:s.strategy}),Il=!!ie;return typeof n=="function"?n({..._u,placement:Bl,show:dl,...!h&&dl&&{className:"show"},popper:Pu,arrowProps:Hu,hasDoneInitialMeasure:Il}):reactExports.cloneElement(n,{..._u,placement:Bl,arrowProps:Hu,popper:Pu,hasDoneInitialMeasure:Il,className:Ye$1(n.props.className,!h&&dl&&"show"),style:{...n.props.style,..._u.style}})}})});Pn.displayName="Overlay";function xa$1(n){return n&&typeof n=="object"?n:{show:n,hide:n}}function tn$1(n,h,s){const[_]=h,M=_.currentTarget,$=_.relatedTarget||_.nativeEvent[s];(!$||$!==M)&&!Wt(M,$)&&n(...h)}N$1.oneOf(["click","hover","focus"]);const mr$1=({trigger:n=["hover","focus"],overlay:h,children:s,popperConfig:_={},show:M,defaultShow:$=!1,onToggle:V,delay:oe,placement:Y,flip:ie=Y&&Y.indexOf("auto")!==-1,...zn})=>{const Et=reactExports.useRef(null),ml=tt(Et,s.ref),rl=ho$1(),Ml=reactExports.useRef(""),[kl,_u]=xo$1(M,$,V),Hu=xa$1(oe),{onFocus:bu,onBlur:dl,onClick:Tl}=typeof s!="function"?reactExports.Children.only(s).props:{},$l=Ed=>{ml(St(Ed))},Bl=reactExports.useCallback(()=>{if(rl.clear(),Ml.current="show",!Hu.show){_u(!0);return}rl.set(()=>{Ml.current==="show"&&_u(!0)},Hu.show)},[Hu.show,_u,rl]),Pu=reactExports.useCallback(()=>{if(rl.clear(),Ml.current="hide",!Hu.hide){_u(!1);return}rl.set(()=>{Ml.current==="hide"&&_u(!1)},Hu.hide)},[Hu.hide,_u,rl]),Il=reactExports.useCallback((...Ed)=>{Bl(),bu?.(...Ed)},[Bl,bu]),ud=reactExports.useCallback((...Ed)=>{Pu(),dl?.(...Ed)},[Pu,dl]),pd=reactExports.useCallback((...Ed)=>{_u(!kl),Tl?.(...Ed)},[Tl,_u,kl]),id=reactExports.useCallback((...Ed)=>{tn$1(Bl,Ed,"fromElement")},[Bl]),rh=reactExports.useCallback((...Ed)=>{tn$1(Pu,Ed,"toElement")},[Pu]),qd=n==null?[]:[].concat(n),oh={ref:$l};return qd.indexOf("click")!==-1&&(oh.onClick=pd),qd.indexOf("focus")!==-1&&(oh.onFocus=Il,oh.onBlur=ud),qd.indexOf("hover")!==-1&&(oh.onMouseOver=id,oh.onMouseOut=rh),k.jsxs(k.Fragment,{children:[typeof s=="function"?s(oh):reactExports.cloneElement(s,oh),k.jsx(Pn,{...zn,show:kl,onHide:Pu,flip:ie,placement:Y,popperConfig:_,target:Et.current,children:h})]})},Ea$1="_help_button_1s4g5_1",Aa$1={help_button:Ea$1};function Ia$1(n){let h=k.jsx("div",{className:Aa$1.help_button,children:"?"});return n.popover!=null&&(h=k.jsx(mr$1,{trigger:"click",rootClose:!0,placement:n.placement,overlay:n.popover,children:h})),h}const Oa$1="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='36.012337'%20height='31.802971'%20viewBox='0%200%2036.012336%2031.802972'%20id='svg9098'%20version='1.1'%20inkscape:version='0.91%20r13725'%20sodipodi:docname='mclogo-split-rotate-v9.svg'%3e%3cdefs%20id='defs9100'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='11.2'%20inkscape:cx='14.890099'%20inkscape:cy='23.051314'%20inkscape:document-units='px'%20inkscape:current-layer='g9'%20showgrid='false'%20units='px'%20inkscape:window-width='1680'%20inkscape:window-height='940'%20inkscape:window-x='0'%20inkscape:window-y='1'%20inkscape:window-maximized='1'%20fit-margin-top='3'%20fit-margin-left='3'%20fit-margin-right='3'%20fit-margin-bottom='5'%20/%3e%3cmetadata%20id='metadata9103'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(3.0066849,-1015.2422)'%3e%3cg%20id='mctriangle'%20transform='matrix(1.1533275,0,0,1.1556928,-379.094,391.20844)'%3e%3cg%20transform='translate(2975.41,266.50511)'%20style='display:inline;stroke:%23d21f15;stroke-width:0.86616874;stroke-opacity:1'%20id='layer6'%20/%3e%3cg%20id='g9'%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.49344,550.22655%20C%20334.49344,546.23874%20337.72144,543.00587%20341.70205,543.00587%20345.68227,543.00587%20348.90912,546.23874%20348.90912,550.22655'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88989985;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9220'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.49344,550.41953%20C%20331.53412,550.41953%20329.1333,552.88285%20329.1333,555.92274%20329.1333,558.96264%20331.53412,561.42596%20334.49344,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9224'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20348.90912,550.41953%20C%20351.86844,550.41953%20354.26926,552.88285%20354.26926,555.92274%20354.26926,558.96264%20351.86844,561.42596%20348.90912,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9228'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.45731,561.42596%20348.92565,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9232'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.49344,550.22655%20C%20334.49344,546.23874%20337.72144,543.00587%20341.70205,543.00587%20345.68227,543.00587%20348.90912,546.23874%20348.90912,550.22655'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88989985;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9236'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.49344,550.41953%20C%20331.53412,550.41953%20329.1333,552.88285%20329.1333,555.92274%20329.1333,558.96264%20331.53412,561.42596%20334.49344,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9240'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20348.90912,550.41953%20C%20351.86844,550.41953%20354.26926,552.88285%20354.26926,555.92274%20354.26926,558.96264%20351.86844,561.42596%20348.90912,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9244'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.45731,561.42596%20348.92565,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9248'%20/%3e%3cellipse%20ry='0.25958455'%20rx='0.26011693'%20cy='553.91522'%20cx='341.70126'%20id='ref'%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate'%20/%3e%3cpath%20id='mctriangleonly'%20d='M%20335.13723,550.18801%20338.41923,555.66439%20341.70129,561.14077%20344.98332,555.66439%20348.26535,550.18801%20341.70129,550.18801%20Z'%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:%23d21f15;stroke-width:0.91575587;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate'%20inkscape:connector-curvature='0'%20/%3e%3ccircle%20cy='550.02032'%20cx='348.39252'%20id='circle7840-5'%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:%23ffffff;fill-opacity:1;fill-rule:nonzero;stroke:%23d21f15;stroke-width:0.88349211;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate'%20r='1.4070433'%20/%3e%3ccircle%20cy='550.02032'%20cx='335.01007'%20id='circle7842-0'%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:%23ffffff;fill-opacity:1;fill-rule:nonzero;stroke:%23d21f15;stroke-width:0.88349211;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate'%20r='1.4070433'%20/%3e%3ccircle%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:%23ffffff;fill-opacity:1;fill-rule:nonzero;stroke:%23d21f15;stroke-width:0.88349211;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate'%20id='circle7844-5'%20cx='341.70132'%20cy='561.30841'%20r='1.4070433'%20/%3e%3ccircle%20r='1.4070433'%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:%23ffffff;fill-opacity:1;fill-rule:nonzero;stroke:%23d21f15;stroke-width:0.88349211;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate;filter-blend-mode:normal;filter-gaussianBlur-deviation:0'%20id='movingcircle'%20cx='335.01007'%20cy='550.02032'%3e%3canimateTransform%20id='anim1'%20repeatCount='indefinite'%20begin='0s'%20dur='1s'%20values='0.0%200.0;13.38245%200.0;6.69125%2011.28809;0.0%200.0'%20type='translate'%20attributeName='transform'%20/%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function La$1(){return k.jsx("div",{style:{background:"transparent",border:"none",textAlign:"center"},children:k.jsx("img",{src:Oa$1,alt:"Materials Cloud spinner",style:{width:"100%",minWidth:"20px",maxWidth:"200px",height:"auto"}})})}const Ra$1=["as","disabled"];function Ta$1(n,h){if(n==null)return{};var s={},_=Object.keys(n),M,$;for($=0;$<_.length;$++)M=_[$],!(h.indexOf(M)>=0)&&(s[M]=n[M]);return s}function Ca$1(n){return!n||n.trim()==="#"}function jn({tagName:n,disabled:h,href:s,target:_,rel:M,role:$,onClick:V,tabIndex:oe=0,type:Y}){n||(s!=null||_!=null||M!=null?n="a":n="button");const ie={tagName:n};if(n==="button")return[{type:Y||"button",disabled:h},ie];const zn=ml=>{if((h||n==="a"&&Ca$1(s))&&ml.preventDefault(),h){ml.stopPropagation();return}V?.(ml)},Et=ml=>{ml.key===" "&&(ml.preventDefault(),zn(ml))};return n==="a"&&(s||(s="#"),h&&(s=void 0)),[{role:$??"button",disabled:void 0,tabIndex:h?void 0:oe,href:s,target:n==="a"?_:void 0,"aria-disabled":h||void 0,rel:n==="a"?M:void 0,onClick:zn,onKeyDown:Et},ie]}const Sa$2=reactExports.forwardRef((n,h)=>{let{as:s,disabled:_}=n,M=Ta$1(n,Ra$1);const[$,{tagName:V}]=jn(Object.assign({tagName:s,disabled:_},M));return k.jsx(V,Object.assign({},M,$,{ref:h}))});Sa$2.displayName="Button";const Dn=reactExports.forwardRef(({as:n,bsPrefix:h,variant:s="primary",size:_,active:M=!1,disabled:$=!1,className:V,...oe},Y)=>{const ie=Ne(h,"btn"),[zn,{tagName:Et}]=jn({tagName:n,disabled:$,...oe}),ml=Et;return k.jsx(ml,{...zn,...oe,ref:Y,disabled:$,className:Ye$1(V,ie,M&&"active",s&&`${ie}-${s}`,_&&`${ie}-${_}`,oe.href&&$&&"disabled")})});Dn.displayName="Button";const ka$1="_download_dropdown_menu_23m9j_1",Pa$1={download_dropdown_menu:ka$1};function Ha$1(n){var h=`${n.aiida_rest_url}/nodes/${n.uuid}/download`,s=k.jsx(Zt$1,{children:k.jsx(Zt$1.Body,{style:{padding:"5px 0px"},children:k.jsxs("ul",{className:Pa$1.download_dropdown_menu,children:[k.jsx("li",{children:k.jsx("a",{href:`${h}?download_format=chemdoodle`,children:"ChemDoodle"})}),k.jsx("li",{children:k.jsx("a",{href:`${h}?download_format=cif`,children:"CIF"})}),k.jsx("li",{children:k.jsx("a",{href:`${h}?download_format=xsf`,children:"XSF"})}),k.jsx("li",{children:k.jsx("a",{href:`${h}?download_format=xyz`,children:"XYZ"})})]})})});return k.jsx(mr$1,{trigger:"click",rootClose:!0,placement:"bottom",overlay:s,children:k.jsx(Dn,{size:"sm",style:{margin:"4px",padding:"2px 7px"},title:"Download",children:k.jsx("span",{className:"bi bi-download"})})})}const ja$1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIoAAACACAYAAADUHPECAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAdTAAAHUwAGRbQIfAAAAB3RJTUUH4QoMEAcil62xzQAAGc9JREFUeNrtnXl8XVW1x7/r3JvcJC1tgdKWUqADs0CTAk6AAh+GgAzyBBUUKQ8R6GDx4Ud9j6YVWkCeAio2pSLqQxyK4gTSBBApVJDCo4lMMjQpHaAphVI6ZLrnrPfHOjeEtknOvfece8/N5/0+H/j00yb77L3P7+y99tpr/ZYwyKFzRgMCquAIeDoCmARMBmqAQ4B9gD2B3YCU/6udwBbgbWAd8BLwT+A54BUcbxOeYz8pINe1FXuokUKK3YGooHNHgwco4MgwVKcAJwPHAQdhxCjPstlu4B3gFeAx4GFgBcpmxJ4l8wcnYQYdUXT2aDIvDWFf4CzgM8DRwLCQH/ce8CzwO5D7cHQ1nv2DzBtchBk0RFGaoO60DEnGAhcAFwOHAYmIH+8BLwB3Ab/GtiqY14hQXeypCQWDgig6Z4zZIFABfBq4CjgGcArcFQ94Bvg+8EegHRSZt6HYU5Q3Sp4oWjfaSCJyAPCfwOeAIUXu1jZgMXAjyGuoh8wvbbKUNFG0bjSgAnIqcAMwpdh92gErgP/CcxtxElrKdkvJEkXrRoE6ZYheDFwH7F3sPvWB9cBckJ+BdpcqWUqSKLaSkAJmAdcQ/mkmbGwBrsdsl85SJEvJEUVnjwKRcuA/gDqgqth9CojtwHyEm1HtKjUDt9Cngrygc0aBagK4HFtJSoUk+H39L5TLURI6e3Sx+5MVSooodFeA43wamAsMLXZ3csBQYC4i51BeWot5yfTWt0uqsWPnQcXuT554GTvGN5eKvVISK4rW7Q0wAvg2pU8SgIOBa4EROntUsfsSCLEnin59GIgIMBU4o9j9CRFnAFNRFX+1jDViTxQqK0Hdw4CZQFmxuxMiyoCZOM5haPwtgPgTBZLAlcDEENpygUbgX8UelI+J/tiSxe7IQIg1UfwleQpwXojN3g2cA9wGbCz2GIHzEK3RujHF7ke/iDVRsPCALwJhb+KvYA6787Fb3o4ijnG0P8aoQyHyQmyJot/eB2xpPjPstv0jaRp4FPgScBmwHDJhRwXHWaAT9Zr4GrWxJQpeB8BpwP5RNC/z2jKE2YLI3cC52JVAaxFGuz9wKhVFeHJAxJcomqwETo+6jzKvDbrTAG/wescNGGHuAN4t4Ggd4HS6qCzgM7PuYFwxCYuSjxxy40YjzP4VAM14OgMLpVwCdBVovFMI52QXCWJJFN9bOQUoqNuyZzsSuoAG4EJgBtBcgMfvBRyldfH01MaSKHgIFjVflJOAzN8A6oFtP3dgcbjzyQRNR4MkcDTixNL7Fk+iJKgEPlTMLsj8t3qnXKzCTczBCHMXlqYRBQ5DvVjaKfEkCrIHsG+xewG9tiPHUyzC/nLsSP037IgdJvb1xx47xJQo7AnEasJk/npofQ/MOfcn4LOY0+6lwTzuDOJKlL0gfl4Fubs9Y+wCbMR1bsOuA24BwggsqfDHHjvElSjDiPFNsVznb0dlLsCrqHwDu4/6HRYbmyvKiGmgeFyJUkHM7z4A5NoN/gqjLrAMYSrw78AyLKE9WySI4UoK8SVKghIK05R5beB6oGwj6SwGfoipHmTdFDH9QOIaB5HG9AhiD50z2npaloBu90DS3uXAF8jNWegR/kkqFMSVKNuxCYvl1wWg3xoLSTdD55F0uxdiQUiH5NGsS342TmSIK1Hexfb4VJ7tRIdyFzwqsIvLr2ICPfnOZxewqdhD2xXiSpS3sC8rvrk7yuEI38SOx7uF1Op24hF1txPiasy+DcQ95/JQLEIuLJLgjzkXIzhyxJMowiZgVbG70T+0AQtDCBOtqMZy64knUbSrC1NgjDO2YOoEYW4Vz9GRKlT8S1aIJ1HssPM0JuEZT5SnQHgC+FVILXYCT1Oei58uesSSKDJvI0ATsLZQz9SrD0LrRhM0a0/q1oCdzBYCr4bQhTVAk9ywvlBDzgqxJAoAyjrgyYI8qm4UVG0GZDdgZFBJCrmuDZSXgdvJ31H2JGiUgVF5Ib5EQbuBvxBhzGqvFSQJfBL0buB7IFV+YnyQVhRLKnsqj650AveBE0uvLMSZKFIOlnfzQhTNa93ozOgPBbkFu/k9Gzgf0TOQYLaCzN8Aohsww3Zbjt15AXgsziZZbIki89ZCp9cG/JZwE7PUX0VG4XE1lik4Exjp/3sVcBWaGKV1AUNDLMn8AeD+HPrjAfewzWuTebE8GQMxJgoASVHgHsIxFsFuZoZgsa+/A25i13orHwG+iHqBbrBlXhso24EfYCqQ2eAVlN/GXYEp1kSRGzaApy3Az7ALszDGezUWIH08fV86JoErkOTBgZPHU4B6y4FfEPzm2wXuxPVa5TvxdkTHmigACIq92KdDGu9BBHO7HwhMA8qslMsA3axrA8QFFhE8jvYp4G4ciX1IReyJYsai+ya2TWwu8OMvAP24r7MfrK+etxJYwMARbpuBm/C89XJ9vFcTKAGiAKBlYMbiTyms4sBIrADDbjo3oGHrOGCChI/381Me8BOUBpy4XuDvMKxidyAIZN6bYP6U7wKPFPjxp4GcTWewOgy+Yfs2dlzuK1Hsr8D3gC5/bLFHSRAFMpom8ibwDeDFAj66EphFWfvYwKJ8ZS4gD2FH7x3xgo1B1pdStbCSIQoAqQ7wWIFtB68X8MlHAVN9dcoBIXM3AtqBBVn3dsu/DlxFwmuie2sBu58/SoooMvtdO7hu6XoICz9cU6BHO8BlqB4eVG3A0ji8FZhdhd/XmXSmH6Y7gXzn/4kSKeTaNhhaDpL4M3AF8FqBHj0e8+CW6zWBPbYecCdwLzANGXIfqSRyfTxviPtDyREF/Eqg6oLrPIDVDfxHgR59PsgJJIIlB8i8DaCyGriUJ469H91eskUpS5Io4C/tSReQJ7A8mruI/lZtBPA1VIcHFrwRVWAzxy5D5pXeStIzjGJ3IF/o7L1AHLA7nC8BX8O8qlGhE5jOe4fcKT9YWuzhFwwlT5QM7OjqAN7hmJzW+UQnIdEMnI3q6lIvKhkUJbv17Ajb+12A51H5KlYU+24sRyhsHIFp08Y2kzFsDJoVpTd09hiwe7ZyTDTw01g1iwMJTy3gNeAsmdcWF139SDEoiQJ+HGxmeJUpaO/cGxMQ/AQWbzIJ25qCEqcDS85aiUl0/Q1YKvPaotJzixUGLVF6wy9Y2fuvhgFjMV3XCcA4TH1gGLYKgd0tvYdl763FFK1bgDcok/fothvlUj3uZouCEWXykipEFFA8twySHppwkbRDsjuNV2bmUremeeH0aGKM9dtjwN2FSIIobHZgqDg4noM4gpdw8bZ4JCrZKQ6pWyGZQOZHdKFXvzLTMcCxx4tgl87d9KSMC3BlYTSMIyNKdWMFiiIfKFqkkOxGuyodTaiD44m44nmu5yUSfQfvNNVGV/xC68ZYIL0AbgISrh233TJwOvHfUrQrx8IWP+52hylQAUFQEnbPpIDrkhSP9I6vzv/daZMi6WKoRKlpMHKAjUkdrRCV0djyPhGTBN0b2B0LHnSwo8o2bP9fh+UctwCrsXRNFyCZTvPMmbHNZsgei1aC23v6JQE6EtgPs5/GA/tgSpFV2DLoYbbSJuBNf45W2pxpmzHbVm0gVNKEQpSaxkq0JwpMh4EcgemFHAschtWkGRLweS5mG6zB8o8fBx5OptMtg4IoC1vef5dCOXAA8HHMyJ6MfUzDCHb0VmArpkj5IvB3my99HmRLz4+EQJi8iDK5oQrBo6m2g+qGionAp7Cj6BTM3R0GuoBpyXT6zpImSv1KMistwh7AiZiS5LHYyhGWT+sdYAUWC/MAm8a0sPt6s8OuzJ0wORFlygMpPEdISDeulh2EVbD6LBa4HLbdsww4L5lOt5UsURa0ZGZlD+xDmgocQ7QKkB6W5rIYuBsSryIueALTJ2TdWNYv1YxUEGUv4CJM8juqWsTbgIsduPfZCA3ayLBwpRmkSjlCLRZwdRyF19B9GbgD4S6Ut3LZjrJa7iY3VuA5iCgnAr8G/ptoC1bfp7CkJNeR+lZQB2Aiwg+w2+0TKY7Q8sHATSi/Bk5CPIf6lqwaCLSiVDc4QDkqDBHlCiyJKmgWd65YD5yr8I/mgKtJdUMFCDSdVuTVp74FSDjg1gLXYaGUccF64GZMgWErLjBzYF/MgCtK9V/K8J2Ve4vyfeB6oieJJX2JPJ0VSWCoQLn/5+LAvtQUuNOxDMc4kQRgDPYObwXGkgDqVw34S/0S5cN/HoYfzTURy4C7lMJIer5kz9Ms0kilDKhTpQ4YUr2kCGQxkgwBZgPfocAVzLJAOfYuFwETwYNb+5dm6ZconSYnNhFbps6iMC7/bmBB2ulqCbqFGCn0WH/w3wTmAEMKurIs7CHJXCylpKpwD88JgpUKXgRMItV/cGCfRKlurECUfbCK46cUcACPA79JaDCbr8bskt2wE8WemLE4C+EbQGpyQwEKatW3AJICvgXM4v2LxVLAydg7HueTfZfYJVGqGytQZThwI6bMXCi8B9yKOO80nxYs/DVtt8LnAKf2+usUZnBfiuIc2RDhezNHmoPqZVihp1IiSQa1wA0ow/s6De1ElOqHKgGSYl/o5ylsKMIfVHkYL5hpUtOQIoGOxXJ8dlw6hgBzRPSURJQC3VoG6KlYce24bzd9QbB3PQshSf3qnX5gJ6JouwfKGdjkF/LMvxb4oTh0NJ0+8GpS/RQ4goMyFbsy2BVGA/MVb0Ik9kr9SpD0BKyCaVwN16CwLVuptXvHD+IDRKluSCHlsh/2dRSytp0H/BSkqWlFQB/IO5W4Kh9i4NjVo4CrQcoP+dOI8Hr8+y2gWm5tx+4InCv2AOoguS/1rR/4hx6iVC+tQIUEJh5T6IH/E7gT1ONbA/9wdWMliJZjmXvjB/hxAb4IesqQVHt4PV7XBuKcYm0PKhyNZWAmetsr768o2xVRORrLvAvDLllHsNzgTuC23Ts6VgcOUPI8gBOwlIwgGA58zUV2nxLGFrToVUg4u2N23PAQ5moL8C8Kq/3SFxxgKmhNbwGhHqKoxUZ8BfPchYFlwL9hubf9KSU9InDvOxXBjrFHNlSCyAgs0WtEFv05DjjLdUNQweqsAPNBHB/SXLVhtQhnY7G5xcZYjAs9NqoD5v4WpAZzqoUFj5T+LzAduBB4kJ3FhTdhruTNzbXBtoWOsgqwnJ0Ts+xPCrhEEjKi+pE8VpWbWyDZPRy4hHC91GtJjr8RC0O4AytuVUycg0g1Cyx+11YUwQE+R9g1d7slgW0tD5A5fsHzvX7iHmDpioBbTs2SFJXd7fthtkkuL+nDwCc0nwzlKgFbST4S6lyBQ7oVzF6b4c9XAxEqdw+AUViMkUPmf6KMwxKkQkdTbQfvmXt4kyC3Y+rQN2E69wuymwhxBL6MZerlgirgM0gex34lia1o4ftMpk2CaRPx56QRuAAjTXPozwqGTyEyFsCpbqhEbf+OLO6/5USlqbYDz2y1VkSvAc5D3BeCGrDVDRWoUIPt5fmEDX5CBj4p9QPdH/hkVHMFGFnaOwHeRbgD247mU8BqIz4OAI6jfiWOqiYxf3/kzrXm2k5LvVBxgTfACWTlVz9YjlrY4Fex+NJ8MA74aE1jDguC3YV8FAuAjhZXH2qE8RRgFcgc7HDwC+yUVAiUASejkkiKMAaL3ywYss3TkXQSHO8U7MvKF0ngeBV+SbbHUcXB7JPCaX5O90MW61sVeBqRr6B6L2bvFaIvxyCMcbB0iui/kBxR01COOt6e2HF4WFjN4nkjsv4tYQTRfFQDv+xpE2yFUTqAP4F8FvMKB1XJzhX7A4clgRrCrbQZLkQF5fOYHRXm4MeRfUXQoZifI+zE9HXs6oJlV5g2ARa0grARlR8iugQLcL+IaO6bdgOqk9gJIrY6KaqJcViF8jBtqOFY9mJ2BS4dZy2uXhTFMHGd4If2TLqFJZO9iiffxNE/Yjbcpwj3ROYARzpY+mKcsQUz4ML0WJYB+538TNa/5wHtof9n20n2LuMrJ9p2JLjAMpBLsFPhk4R7HTApSXgu+6jwbmJ7x01uVcUDmJc3DMktAfZ+6KgsL7UuH1/sudg1pk+AH60CR7chLEZZim1FX8GOuPlijEN4qZ+RoKm2A6+qAuA5RWZiHssl5K8AueeUhyoHjz7MjPFmv9g6sh4n+V3slFiPVabPB7s7lEBU1oraDsqTabDA64ewu6NpwLPkXh20Sl2NrW2WM6b725HXDaa7Pwu7nrkf2J5jq1UOhfQJ5IHlJ6dprm33ZTV4F5MOv5D+y530hzIcHTwryo6YNgl/Y01j1TwuAn5Mbh9WMoktViXxZR3RmDJhHk8cHD0GuweZkmNzrmoOBmSpYEGrKRioArIfZuSeS25Klm4Ss7zj60chI9Djjxsm4OhlmCJAPhmL7Q7xL9GWNW573VSjbMZGYG7/GUA1uQektSexoKJYEmXqPdA8PJVRztpd7dp7GnBkCM1vSqVSXlA/V0lgQatf1lDKQE9A9SrsHi/fFJJ3k5jq4bhij3FHTF5SwQoBB00BJ6mFHYapBtDmBawV2IOFraARRSt6HszIUZn99la7PKzcDtsrD0d0OvZRhRUgvyGJFRvKdZ8PHdUNVYBHd1opS0q1qszA4j9GhPiYNLBm+UlZeuKvGA8LV2f3O0EgAuU5mA53vgqdCXAVhLG0V34J4TLCDxlZlQSew87bRT0B1PylHE1ktP9kXFlSLsFyifeP4HFbMUHB7LCwdQwWoR6swGAwCMpG0ulFWGhoMNS3ZDxJQxHOxtz3xxD+wUSB55JAE3a+DnPwWaF6SYVftZ5hIOf4gz6K6MgbNENgRziYw+/gkPuzChMmGpgoC1b6mrOaBDnWn6taovOHbQOaklgM63qKcOfTk72nkgQ9HrNDTiVabTNszLox699S3kJoInyiDOzbuL3Fd2QIeHowyBVYnaJw45x3xpsozycRVqM0UUCiTDalBAQPD+cwEb0S+1JHFuDxHrBMO73sHU9lnd2kU3/H7psK53uqX5lxzY/E04xXOmyy9oUViK5Nalo7JSGPYM6YyAdf3VCRuScdrTgXicVShHFxFRQbgWVSlWDgYuc7oLMKEu4yv43oc40zTjO0EtteZmFyo4XypnvAI7jalXSGOGiHPoopIecbj9onqht7CDIEi5mYhaU8FLrmzXKUl5tOycF/MnN/qG/5F7AcSwCLBplUTg9B+DB2GXoOFjhVSKwDHmVkCmfFCe2o8ioRVSivWVLpJ5ipg30NP8W0zT5O4UmSBv6A4+SRhKztwO/JejkKiPfzfSfi6PX+s75A4UkCdkfUwgX79ixh3ZjVfW6oHRLUczxE5QBVyYTrBSxHHgleBBqtwkbug8Jybl4iHA9xplH1SbIHZgNNJ/f8pTCwBfgN/gdhCWACII8DYVZTVFz2FJXpwJ+Br1NcknjALzWhbzSdkUfy3bSJ0N39JuQQxd/fXFnm4+nYy7mN4pIE4FEsfxzwidJU24GaE2oR4eWMHIHJa98KHFrkQYO5AX6DF8JFYDKh2At9Pt+mfAwHbgF+henlFUO0uDe2AIsQtvmZi++fchKAKg9jX38YOAKTpij2oMFSNBeUO92rm8MQK55+ACSc1WSdEtsn9sKM4xFFnKPe+CPwCO77C2YPUZ6tbQehHVM1fr3YPQ0ZjcDibi/EU6VN4mK/7cGEVcAtqLYz432vxQf8Js21HTheogn4HtFXJS8UVgPXo2xeURvikGxJ3oypQOdyHRBHdAI3k3CaezIUfews9ieeCvwc24NLHe3ADcDyptMjiDuZNhE8We4/I0Tdr6JhMfBzdhF/sRNRVpzejgpbgW/Ty+otQbjAj1HuIpecmaAQFPgfTPwmDtJauWIZprq9lSt3rufT5+1s9YOV4OlR/iR8qNijyAGLUaYDb0eymvSG+T9GYqkRQXXl4oQXgYtRfWbHLSeDPu92tMtFXclIa71c7JFkifuAryMFIAlk7JWNmHL1/cUefJZ4BZiOyjNI347yPonSfGYXTtIDkaVYxllYPoMoocC9GLnXRlkGdydYaudakOnAH4hyuwsPLwCXk+BRRGHa+D5/sN/b4hWndYIqgj6GRb0/VuyR9YMu4CfAdIU1VQWpFrMDOpOArsbCAH5C8fTXgmAZcAkqj9JNZlXsE4EiyKxChSIWlngtFjtShDfRJ94CvouyEGHrqOF78ODH3ihOT360KiMkNRRb2a4m+uCibNCJnW7mAquCVmMPHGp4VGMK1+IVh2KixVdj0hHFhAJPANeB9zA4XkG3m/5Q3wIiCVRPwSTjP0aR45IxRYhbMPfHVkTY1QlnV8ipSuk2t4MhTkUNpoJ0DuEpIWWDNcCdIHeAvgFKU5gOtTCQqX+jjMU0+y+lOOpWW7CrmZvBXQGJAbeaHZETw6v9rQiLbT0ZM3ZPoDCJZG9idxF3OKJNnjqKaPELTvaFH7X4lqAKJvr8ZSzrIeq6jGAEWYqV3fsriDkFsyQJ5LEUHtFYScJTvwUZCnocpot6AvbVhLnMdmHHuPuB32JKSelYVCQNip6oNUni6BGYv+VMrBxwmPaeYjKjj2C2yGNYJL3l/8zMLTQ675dZYzq1gCKqSRU5ECPLScBk7MsZkuWzPEwnrRULO3wYeHKv7VXr3qoy5YZU0uOpk+N8qNgFfrwautM2E+1JqEyPxeRIT8VUtcdjIQfZxi5vA97AhIv/BiwFeQXUovAUk8PIA6F99VMaU6gHKpkmNSXIODXVySnA4f5EjPIno9KfkLQ/0E1Y2shrWFJaM8qLKrpe/GRyD/hnXIzVfHH7SvD8uXJU8GQMcAiWTH4kFnC+NxbxVoUfCYIlS2/GUoFXYf6tJuA5RNeg4htqYqevK8JJrvg/1r/N4lnuwIgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMTAtMTJUMTY6MDc6MzQrMDI6MDB1PnpAAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTEwLTEyVDE2OjA3OjM0KzAyOjAwBGPC/AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=";function Na$1(n){var h=`${n.explore_url}/details/${n.uuid}?nodeType=NODE`;return k.jsx(mr$1,{placement:"bottom",overlay:k.jsxs(Cn,{className:"explore_btn_tooltip",children:["Browse provenance",k.jsx("br",{}),n.uuid]}),children:k.jsx("a",{href:h,target:"_blank",children:k.jsx("img",{src:ja$1,className:"explore_btn_aiida_logo"})})})}function Ua$1(n){return n.split(/(\d+)/).map((h,s)=>h.match(/\d+/)?k.jsx("sub",{children:h},s):h)}function Ya$1(n){let h=!1;return k.jsx("span",{children:n.split("").map((s,_)=>s=="_"?(h=!0,null):h?(h=!1,k.jsx("sub",{children:s},_)):s)})}const main=Object.freeze(Object.defineProperty({__proto__:null,DoiBadge:Ba$1,ExploreButton:Na$1,HelpButton:Ia$1,McloudSpinner:La$1,StructDownloadButton:Ha$1,TestButton:Fa$1,formatChemicalFormula:Ua$1,formatSpaceGroupSymbol:Ya$1},Symbol.toStringTag,{value:"Module"})),require$$8=getAugmentedNamespace(main);var ptable_data={},hasRequiredPtable_data;function requirePtable_data(){return hasRequiredPtable_data||(hasRequiredPtable_data=1,Object.defineProperty(ptable_data,"__esModule",{value:!0}),ptable_data.elementsInfo=ptable_data.elementClassColors=void 0,ptable_data.elementsInfo=[{sym:"X",class:"X"},{sym:"H",class:"H"},{sym:"He",class:"noble"},{sym:"Li",class:"alkali"},{sym:"Be",class:"alkaline_earth"},{sym:"B",class:"semimetal"},{sym:"C",class:"nonmetal"},{sym:"N",class:"nonmetal"},{sym:"O",class:"nonmetal"},{sym:"F",class:"halogen"},{sym:"Ne",class:"noble"},{sym:"Na",class:"alkali"},{sym:"Mg",class:"alkaline_earth"},{sym:"Al",class:"post_transition"},{sym:"Si",class:"semimetal"},{sym:"P",class:"nonmetal"},{sym:"S",class:"nonmetal"},{sym:"Cl",class:"halogen"},{sym:"Ar",class:"noble"},{sym:"K",class:"alkali"},{sym:"Ca",class:"alkaline_earth"},{sym:"Sc",class:"transition"},{sym:"Ti",class:"transition"},{sym:"V",class:"transition"},{sym:"Cr",class:"transition"},{sym:"Mn",class:"transition"},{sym:"Fe",class:"transition"},{sym:"Co",class:"transition"},{sym:"Ni",class:"transition"},{sym:"Cu",class:"transition"},{sym:"Zn",class:"transition"},{sym:"Ga",class:"post_transition"},{sym:"Ge",class:"semimetal"},{sym:"As",class:"semimetal"},{sym:"Se",class:"nonmetal"},{sym:"Br",class:"halogen"},{sym:"Kr",class:"noble"},{sym:"Rb",class:"alkali"},{sym:"Sr",class:"alkaline_earth"},{sym:"Y",class:"transition"},{sym:"Zr",class:"transition"},{sym:"Nb",class:"transition"},{sym:"Mo",class:"transition"},{sym:"Tc",class:"transition"},{sym:"Ru",class:"transition"},{sym:"Rh",class:"transition"},{sym:"Pd",class:"transition"},{sym:"Ag",class:"transition"},{sym:"Cd",class:"transition"},{sym:"In",class:"post_transition"},{sym:"Sn",class:"post_transition"},{sym:"Sb",class:"semimetal"},{sym:"Te",class:"semimetal"},{sym:"I",class:"halogen"},{sym:"Xe",class:"noble"},{sym:"Cs",class:"alkali"},{sym:"Ba",class:"alkaline_earth"},{sym:"La",class:"lanthanoid"},{sym:"Ce",class:"lanthanoid"},{sym:"Pr",class:"lanthanoid"},{sym:"Nd",class:"lanthanoid"},{sym:"Pm",class:"lanthanoid"},{sym:"Sm",class:"lanthanoid"},{sym:"Eu",class:"lanthanoid"},{sym:"Gd",class:"lanthanoid"},{sym:"Tb",class:"lanthanoid"},{sym:"Dy",class:"lanthanoid"},{sym:"Ho",class:"lanthanoid"},{sym:"Er",class:"lanthanoid"},{sym:"Tm",class:"lanthanoid"},{sym:"Yb",class:"lanthanoid"},{sym:"Lu",class:"lanthanoid"},{sym:"Hf",class:"transition"},{sym:"Ta",class:"transition"},{sym:"W",class:"transition"},{sym:"Re",class:"transition"},{sym:"Os",class:"transition"},{sym:"Ir",class:"transition"},{sym:"Pt",class:"transition"},{sym:"Au",class:"transition"},{sym:"Hg",class:"transition"},{sym:"Tl",class:"post_transition"},{sym:"Pb",class:"post_transition"},{sym:"Bi",class:"post_transition"},{sym:"Po",class:"post_transition"},{sym:"At",class:"halogen"},{sym:"Rn",class:"noble"},{sym:"Fr",class:"alkali"},{sym:"Ra",class:"alkaline_earth"},{sym:"Ac",class:"actinoid"},{sym:"Th",class:"actinoid"},{sym:"Pa",class:"actinoid"},{sym:"U",class:"actinoid"},{sym:"Np",class:"actinoid"},{sym:"Pu",class:"actinoid"},{sym:"Am",class:"actinoid"},{sym:"Cm",class:"actinoid"},{sym:"Bk",class:"actinoid"},{sym:"Cf",class:"actinoid"},{sym:"Es",class:"actinoid"},{sym:"Fm",class:"actinoid"},{sym:"Md",class:"actinoid"},{sym:"No",class:"actinoid"},{sym:"Lr",class:"actinoid"},{sym:"Rf",class:"transition"},{sym:"Db",class:"transition"},{sym:"Sg",class:"transition"},{sym:"Bh",class:"transition"},{sym:"Hs",class:"transition"},{sym:"Mt",class:"X"},{sym:"Ds",class:"X"},{sym:"Rg",class:"X"},{sym:"Cn",class:"X"},{sym:"Nh",class:"X"},{sym:"Fl",class:"X"},{sym:"Mc",class:"X"},{sym:"Lv",class:"X"},{sym:"Ts",class:"X"},{sym:"Og",class:"X"}],ptable_data.elementClassColors={X:"rgb(220, 220, 220)",H:"rgb(220, 105, 105)",noble:"rgb(196, 205, 255)",alkali:"rgb(209, 146, 146)",alkaline_earth:"rgb(209, 189, 146)",semimetal:"rgb(189, 214, 163)",nonmetal:"rgb(214, 163, 190)",halogen:"rgb(210, 214, 163)",post_transition:"rgb(163, 178, 214)",transition:"rgb(169, 196, 212)",lanthanoid:"rgb(237, 184, 255)",actinoid:"rgb(191, 150, 255)"}),ptable_data}var utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1,Object.defineProperty(utils,"__esModule",{value:!0}),utils.RGB_Log_Blend=void 0;const n=(h,s,_)=>{var M=parseInt,$=Math.round,V=1-h,[oe,Y,ie,zn]=s.split(","),[Et,ml,rl,Ml]=_.split(","),kl=zn||Ml,_u=kl?","+(zn?Ml?$((parseFloat(zn)*V+parseFloat(Ml)*h)*1e3)/1e3+")":zn:Ml):")";return"rgb"+(kl?"a(":"(")+$((V*M(oe[3]==="a"?oe.slice(5):oe.slice(4))**2+h*M(Et[3]==="a"?Et.slice(5):Et.slice(4))**2)**.5)+","+$((V*M(Y)**2+h*M(ml)**2)**.5)+","+$((V*M(ie)**2+h*M(rl)**2)**.5)+_u};return utils.RGB_Log_Blend=n,utils}var hasRequiredPTable;function requirePTable(){if(hasRequiredPTable)return PTable;hasRequiredPTable=1,Object.defineProperty(PTable,"__esModule",{value:!0}),PTable.default=PTable.Element=void 0;var n=$(requireReact()),h=$(require$$1),s=require$$8,_=requirePtable_data(),M=requireUtils();function $(ml){return ml&&ml.__esModule?ml:{default:ml}}class V extends n.default.Component{constructor(rl){super(rl),this.handleOnClick=this.handleOnClick.bind(this),this.symbol=_.elementsInfo[this.props.num].sym;let Ml=_.elementsInfo[this.props.num].class;this.color=_.elementClassColors[Ml]}handleOnClick(){this.props.disabled&&this.props.selection===0||this.props.onSelectionChange!=null&&this.props.onSelectionChange({element:this.symbol})}render(){let rl=`pt_element pt_element-${this.props.num}`;return this.props.disabled&&this.props.selection===0?rl+=" pt_element-disabled":rl+=` pt_element-state${this.props.selection}`,this.props.doc||(rl+=" nondoc"),this.props.num>=57&&this.props.num<=71&&(rl+=" lanthanide"),n.default.createElement("div",{className:rl,style:{backgroundColor:(0,M.RGB_Log_Blend)(.5,this.color,"rgb(220, 220, 220)")},onClick:this.handleOnClick},n.default.createElement("div",{className:"elem_num"},this.props.num),n.default.createElement("div",{className:"elem_sym"},this.symbol))}}PTable.Element=V;const oe=n.default.createElement(h.default,{id:"popover-basic"},n.default.createElement(h.default.Header,{as:"h3"},"Filtering mode help"),n.default.createElement(h.default.Body,{style:{textAlign:"justify"}},n.default.createElement("b",null,"Include/exclude elements"),n.default.createElement("br",null),"The green selected elements must be included, while the red elements must not be included in the formula. For example",n.default.createElement("div",{className:"doc-elements"},n.default.createElement(V,{num:14,disabled:!1,onSelectionChange:null,selection:1,doc:!0}),n.default.createElement(V,{num:8,disabled:!1,onSelectionChange:null,selection:2,doc:!0})),"filters for materials that contain Si and any other elements except O.",n.default.createElement("br",null),n.default.createElement("b",null,"Only selected elements"),n.default.createElement("br",null),"Only the selected elements are allowed in the resulting chemical formula. For example",n.default.createElement("div",{className:"doc-elements"},n.default.createElement(V,{num:14,disabled:!1,onSelectionChange:null,selection:1,doc:!0}),n.default.createElement(V,{num:8,disabled:!1,onSelectionChange:null,selection:1,doc:!0})),"only allows for formulas in the form of Si",n.default.createElement("sub",null,"x"),"O",n.default.createElement("sub",null,"y"),"."));class Y extends n.default.Component{render(){return n.default.createElement("div",{className:"selection_mode_outer"},n.default.createElement("div",{className:"selection_mode_inner",onChange:rl=>this.props.onSelectionChange({mode:rl.target.value})},n.default.createElement("div",{style:{marginBottom:"2px"}},"Elements filtering mode:"),n.default.createElement("label",{className:"selection_mode_control"},n.default.createElement("input",{type:"radio",name:"sel_mode",value:"include",defaultChecked:!0}),"Include/exclude"),n.default.createElement("label",{className:"selection_mode_control"},n.default.createElement("input",{type:"radio",name:"sel_mode",value:"exact"}),"Only selected")),n.default.createElement(s.HelpButton,{popover:oe,placement:"bottom"}))}}function ie(ml,rl){let Ml=new Set(ml),kl=rl[1],_u=rl[2],Hu=[...kl].every(dl=>Ml.has(dl)),bu=[...Ml].every(dl=>!_u.has(dl));return Hu&&bu}function zn(ml,rl){let Ml=new Set,kl={1:new Set,2:new Set};for(const[_u,Hu]of Object.entries(rl.elements))kl[Hu].add(_u);return ml.forEach(_u=>{ie(_u.elem_array,kl)&&(Ml=new Set([...Ml,..._u.elem_array]))}),Ml}let Et=class extends n.default.Component{makeElements=(rl,Ml)=>{let kl=[];for(let _u=rl;_u<=Ml;_u++){let Hu=_.elementsInfo[_u].sym,bu=0;Hu in this.props.filter.elements&&(bu=this.props.filter.elements[Hu]),kl.push(n.default.createElement(V,{key:_u,num:_u,disabled:!this.enabledElems.has(Hu),onSelectionChange:this.props.onSelectionChange,selection:bu,doc:!1}))}return kl};render(){return this.enabledElems=zn(this.props.rows,this.props.filter),n.default.createElement("div",{className:"ptable_outer"},n.default.createElement("div",{className:"ptable"},n.default.createElement(Y,{onSelectionChange:this.props.onSelectionChange,filter:this.props.filter}),this.makeElements(1,56),this.makeElements(72,88),this.makeElements(104,118),this.makeElements(57,71),this.makeElements(89,103)))}};return PTable.default=Et,PTable}var MaterialDataGrid={},main_cjs,hasRequiredMain_cjs;function requireMain_cjs(){if(hasRequiredMain_cjs)return main_cjs;hasRequiredMain_cjs=1;var n=Object.defineProperty,h=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,_=Object.prototype.hasOwnProperty,M=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},$=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of s(t))!_.call(e,o)&&o!==r&&n(e,o,{get:()=>t[o],enumerable:!(i=h(t,o))||i.enumerable});return e},V=e=>$(n({},"__esModule",{value:!0}),e),oe={};M(oe,{ALWAYS_SYNC_GLOBAL_EVENTS:()=>ix,AbstractHeaderCellCtrl:()=>sl,AgAbstractField:()=>E2,AgAbstractInputField:()=>$0,AgAbstractLabel:()=>Y2,AgCheckbox:()=>xv,AgCheckboxSelector:()=>Rv,AgColumn:()=>Wl,AgColumnGroup:()=>Mh,AgInputDateField:()=>u,AgInputNumberField:()=>H1,AgInputNumberFieldSelector:()=>Jy,AgInputTextArea:()=>a2,AgInputTextField:()=>zm,AgInputTextFieldSelector:()=>l1,AgPickerField:()=>Zy,AgPromise:()=>F0,AgProvidedColumnGroup:()=>Ng,AgRadioButton:()=>Fv,AgSelect:()=>f0,AgSelectSelector:()=>e0,AgToggleButton:()=>O3,AgToggleButtonSelector:()=>dx,AnimateShowChangeCellRenderer:()=>T1,AnimateSlideCellRenderer:()=>yv,AnimationFrameService:()=>n3,AriaAnnouncementService:()=>pC,AutoScrollService:()=>I1,AutoWidthCalculator:()=>lx,BarColumnLabelPlacement:()=>_C,BaseComponentWrapper:()=>I5,BaseCreator:()=>MC,BaseGridSerializingSession:()=>RC,BeanStub:()=>Rh,BodyDropPivotTarget:()=>yd,BodyDropTarget:()=>wp,CellComp:()=>by,CellCtrl:()=>bm,CellNavigationService:()=>c3,CellPositionUtils:()=>bx,CellRangeType:()=>Ig,ChangedPath:()=>nx,ChartMappings:()=>Wx,CheckboxCellEditor:()=>nh,CheckboxCellRenderer:()=>sy,CheckboxSelectionComponent:()=>Uh,ClientSideRowModelModule:()=>AC,ClientSideRowModelSteps:()=>L2,ColumnApplyStateService:()=>Iu,ColumnAutosizeService:()=>ih,ColumnFactory:()=>Gu,ColumnKeyCreator:()=>Jl,ColumnModel:()=>rd,ColumnMoveService:()=>Ud,ColumnNameService:()=>Th,ColumnSizeService:()=>$h,CommunityFeaturesModule:()=>Ow,Component:()=>cm,ComponentUtil:()=>Df,Context:()=>dv,CssClassManager:()=>Xf,CsvCreator:()=>FC,CsvExportModule:()=>LC,CtrlsService:()=>Cx,DataTypeService:()=>B2,DateCellEditor:()=>Pl,DateFilter:()=>Z,DateStringCellEditor:()=>ad,Downloader:()=>kC,DragAndDropService:()=>L1,DragService:()=>Wy,DragSourceType:()=>D1,Environment:()=>Sx,EventService:()=>Ex,ExcelFactoryMode:()=>R2,ExpansionService:()=>o2,ExpressionService:()=>xC,FakeHScrollComp:()=>Xu,FakeVScrollComp:()=>Ld,FilterManager:()=>hy,FilterWrapperComp:()=>py,FocusService:()=>$3,FuncColsService:()=>Hl,GROUP_AUTO_COLUMN_ID:()=>Vf,Grid:()=>M5,GridBodyComp:()=>Sy,GridBodyCtrl:()=>G0,GridComp:()=>u2,GridCoreCreator:()=>Nw,GridCoreModule:()=>aC,GridCtrl:()=>z2,GridHeaderComp:()=>_g,GridHeaderCtrl:()=>sd,GridOptionsService:()=>uC,GridSerializer:()=>DC,GroupInstanceIdCreator:()=>pp,HeaderCellCtrl:()=>af,HeaderFilterCellComp:()=>Ku,HeaderFilterCellCtrl:()=>ll,HeaderGroupCellCtrl:()=>Ef,HeaderNavigationDirection:()=>Nu,HeaderNavigationService:()=>ed,HeaderPositionUtils:()=>dC,HeaderRowComp:()=>Mu,HeaderRowContainerComp:()=>cp,HeaderRowContainerCtrl:()=>ng,HeaderRowCtrl:()=>rg,HeaderRowType:()=>Vl,HorizontalDirection:()=>uy,HorizontalResizeService:()=>Ey,InfiniteRowModelModule:()=>GC,KeyCode:()=>np,LargeTextCellEditor:()=>I2,LayoutCssClasses:()=>pl,LocalEventService:()=>Y,LocaleService:()=>hC,ManagedFocusFeature:()=>tv,MenuService:()=>Ay,ModuleNames:()=>ie,ModuleRegistry:()=>c0,MouseEventService:()=>i2,MoveColumnFeature:()=>bp,NavigationService:()=>_y,NumberCellEditor:()=>a,NumberFilter:()=>l,NumberSequence:()=>t1,OverlayWrapperComponent:()=>Ju,PinnedRowModel:()=>cx,PivotResultColsService:()=>dp,PopupComponent:()=>q0,PopupEditorWrapper:()=>o3,PopupService:()=>px,PositionableFeature:()=>Ky,PropertyKeys:()=>Op,ProvidedFilter:()=>F2,RefPlaceholder:()=>Cf,ResizeObserverService:()=>n2,RowContainerComp:()=>b1,RowContainerCtrl:()=>Cy,RowCtrl:()=>gm,RowDragComp:()=>dy,RowHighlightPosition:()=>T2,RowModelHelperService:()=>Bw,RowNode:()=>wv,RowNodeBlock:()=>D3,RowNodeBlockLoader:()=>L3,RowNodeSorter:()=>fC,RowPositionUtils:()=>V3,RowRenderer:()=>F3,RowType:()=>PC,ScalarFilter:()=>Xy,ScrollVisibleService:()=>t2,SelectCellEditor:()=>My,SelectableService:()=>mC,SelectionHandleType:()=>bf,ServerSideTransactionResultStatus:()=>P3,SetLeftFeature:()=>nl,SimpleFilter:()=>N1,SortController:()=>yC,SortIndicatorComp:()=>Vy,SortIndicatorSelector:()=>$2,StandardMenuFactory:()=>D2,StylingService:()=>I3,TabGuardClassNames:()=>s3,TabGuardComp:()=>z3,TabGuardCtrl:()=>l3,TabGuardFeature:()=>hx,TextCellEditor:()=>l2,TextFilter:()=>y,TextFloatingFilter:()=>fd,TooltipFeature:()=>W0,TooltipStateManager:()=>iy,TouchListener:()=>J0,UserComponentFactory:()=>cy,UserComponentRegistry:()=>T0,ValueCache:()=>wC,ValueService:()=>CC,VanillaFrameworkOverrides:()=>N3,VerticalDirection:()=>k2,VisibleColsService:()=>Ip,XmlFactory:()=>aS,ZipContainer:()=>Uw,_ColumnFilterModule:()=>Td,_CommunityMenuApiModule:()=>rC,_CsrmSsrmSharedApiModule:()=>bC,_CsvExportCoreModule:()=>jw,_EditCoreModule:()=>Xv,_EmptyBean:()=>tg,_FilterCoreModule:()=>cd,_FloatingFilterModule:()=>$d,_ReadOnlyFloatingFilterModule:()=>Wd,_RowNodeBlockModule:()=>ux,_SsrmInfiniteSharedApiModule:()=>SC,_addFocusableContainerListener:()=>nC,_areEqual:()=>Gm,_bindCellRendererToHtmlElement:()=>y2,_capitalise:()=>Ah,_clearElement:()=>_0,_cloneObject:()=>Q,_combineAttributesAndGridOptions:()=>tm,_compose:()=>Il,_createIcon:()=>oy,_createIconNoSpan:()=>D0,_debounce:()=>$l,_defaultComparator:()=>Cd,_defineModule:()=>ul,_doOnce:()=>Et,_errorOnce:()=>Ml,_escapeString:()=>yh,_exists:()=>pd,_existsAndNotEmpty:()=>M0,_flatten:()=>Cg,_forEachReverse:()=>Kp,_formatNumberCommas:()=>R,_formatNumberTwoDecimalPlacesAndCommas:()=>b,_fuzzySuggestions:()=>I0,_getAbsoluteHeight:()=>S1,_getAbsoluteWidth:()=>Ev,_getActiveDomElement:()=>Hf,_getAllValuesInObject:()=>Ln,_getAriaPosInSet:()=>Bf,_getCtrlForEventTarget:()=>_p,_getDocument:()=>kf,_getFillHandle:()=>Gf,_getGlobalGridOption:()=>E5,_getGrandTotalRow:()=>$g,_getGroupAggFiltering:()=>Lg,_getGroupSelection:()=>pf,_getGroupSelectsDescendants:()=>ff,_getGroupTotalRowCallback:()=>Bm,_getHeaderCheckbox:()=>xh,_getHeaderClassesFromColDef:()=>q,_getInnerHeight:()=>Ly,_getInnerWidth:()=>zv,_getIsRowSelectable:()=>qg,_getRowContainerOptions:()=>Sm,_getRowHeightAsNumber:()=>Cp,_getRowHeightForNode:()=>lh,_getRowIdCallback:()=>_d,_getRowSelectionMode:()=>vm,_getSuppressMultiRanges:()=>Jh,_getToolPanelClassesFromColDef:()=>ol,_includes:()=>sm,_insertArrayIntoArray:()=>j0,_insertIntoArray:()=>p0,_isAnimateRows:()=>fg,_isCellSelectionEnabled:()=>lf,_isClientSideRowModel:()=>Rd,_isColumnsSortingCoupledToGroup:()=>Wg,_isDomLayout:()=>Ih,_isElementInEventPath:()=>Gp,_isEventFromPrintableCharacter:()=>$v,_isGetRowHeightFunction:()=>Kh,_isGroupMultiAutoColumn:()=>Lm,_isGroupUseEntireRow:()=>$m,_isIOSUserAgent:()=>Av,_isMultiRowSelection:()=>am,_isNodeOrElement:()=>zy,_isNothingFocused:()=>Rg,_isRowSelection:()=>nd,_isServerSideRowModel:()=>dh,_isStopPropagationForAgGrid:()=>ph,_isUsingNewCellSelectionAPI:()=>cf,_isUsingNewRowSelectionAPI:()=>ip,_isVisible:()=>k0,_iterateObject:()=>W,_jsonEquals:()=>Gd,_last:()=>wf,_loadTemplate:()=>e1,_log:()=>ml,_makeNull:()=>ud,_mergeDeep:()=>Cl,_missing:()=>id,_missingOrEmpty:()=>rh,_parseDateTimeFromString:()=>D,_processOnChange:()=>og,_radioCssClass:()=>pg,_removeAriaExpanded:()=>tp,_removeAriaSort:()=>jf,_removeFromArray:()=>ym,_removeFromParent:()=>sv,_removeRepeatsFromArray:()=>Tm,_serialiseDate:()=>B,_setAriaActiveDescendant:()=>Dp,_setAriaChecked:()=>Sf,_setAriaColCount:()=>Qf,_setAriaColIndex:()=>hm,_setAriaColSpan:()=>mg,_setAriaControls:()=>lm,_setAriaDescribedBy:()=>zu,_setAriaDisabled:()=>jh,_setAriaExpanded:()=>Ch,_setAriaHidden:()=>ch,_setAriaLabel:()=>gg,_setAriaLabelledBy:()=>ve,_setAriaLevel:()=>Md,_setAriaPosInSet:()=>Ff,_setAriaRole:()=>cg,_setAriaRowCount:()=>Om,_setAriaRowIndex:()=>Zg,_setAriaSelected:()=>rm,_setAriaSetSize:()=>bg,_setAriaSort:()=>Np,_setDisabled:()=>ov,_setDisplayed:()=>Cm,_setFixedWidth:()=>Q0,_setVisible:()=>_v,_shallowCompare:()=>h0,_stopPropagationForAgGrid:()=>Eh,_toStringOrNull:()=>qd,_unwrapUserComp:()=>a1,_utf8_encode:()=>Lh,_values:()=>Bu,_waitUntil:()=>Pu,_warnOnce:()=>rl,checkboxStyleDefault:()=>rb,colorSchemeDark:()=>WS,colorSchemeDarkBlue:()=>qS,colorSchemeDarkWarm:()=>$S,colorSchemeLight:()=>Yw,colorSchemeLightCold:()=>ib,colorSchemeLightWarm:()=>US,createGrid:()=>A5,createPart:()=>gv,createTheme:()=>XC,getDefaultFloatingFilterType:()=>Sl,getParamType:()=>$C,iconSetAlpine:()=>Kw,iconSetMaterial:()=>ZS,iconSetQuartz:()=>ob,iconSetQuartzBold:()=>t4,iconSetQuartzLight:()=>JS,iconSetQuartzRegular:()=>e4,inputStyleBase:()=>Zw,inputStyleBordered:()=>Kx,inputStyleUnderlined:()=>n4,isColumn:()=>Xl,isColumnControlsCol:()=>Mm,isColumnGroup:()=>Yh,isColumnGroupAutoCol:()=>If,isProvidedColumnGroup:()=>xf,isSelectionUIEvent:()=>sC,paramValueToCss:()=>ZC,provideGlobalGridOptions:()=>_5,tabStyleAlpine:()=>sb,tabStyleBase:()=>ox,tabStyleMaterial:()=>s4,tabStyleQuartz:()=>ab,tabStyleRolodex:()=>lb,themeAlpine:()=>c4,themeBalham:()=>u4,themeQuartz:()=>l4}),main_cjs=V(oe);var Y=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,r){const i=t?this.allAsyncListeners:this.allSyncListeners;let o=i.get(e);return!o&&r&&(o=new Set,i.set(e,o)),o}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,r=!1){this.getListeners(e,r,!0).add(t)}removeEventListener(e,t,r=!1){const i=this.getListeners(e,r,!1);i&&(i.delete(t),i.size===0&&(r?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const r=e.type;if(t&&"event"in e){const K=e.event;K instanceof Event&&(e.eventPath=K.composedPath())}const i=(K,jt)=>K.forEach(Gl=>{if(!jt.has(Gl))return;const Fu=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>Gl(e)):()=>Gl(e);t?this.dispatchAsync(Fu):Fu()}),o=this.getListeners(r,t,!1)??new Set,p=new Set(o);p.size>0&&i(p,o),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(K=>{const jt=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>K(r,e)):()=>K(r,e);t?this.dispatchAsync(jt):jt()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}},ie=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(ie||{}),zn={};function Et(e,t){zn[t]||(e(),zn[t]=!0)}function ml(e,...t){console.log("AG Grid: "+e,...t)}function rl(e,...t){Et(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function Ml(e,...t){Et(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}function kl(e){return!!(e&&e.constructor&&e.call&&e.apply)}function _u(e){Tl(e,400)}var Hu=[],bu=!1;function dl(e){Hu.push(e),!bu&&(bu=!0,window.setTimeout(()=>{const t=Hu.slice();Hu.length=0,bu=!1,t.forEach(r=>r())},0))}function Tl(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(r=>r()),t)}function $l(e,t){let r;return function(...i){const o=this;window.clearTimeout(r),r=window.setTimeout(function(){e.apply(o,i)},t)}}function Bl(e,t){let r=0;return function(...i){const o=this,p=new Date().getTime();p-r<t||(r=p,e.apply(o,i))}}function Pu(e,t,r=100,i){const o=new Date().getTime();let p=null,I=!1;const K=()=>{const jt=new Date().getTime()-o>r;(e()||jt)&&(t(),I=!0,p!=null&&(window.clearInterval(p),p=null),jt&&i&&rl(i))};K(),I||(p=window.setInterval(K,10))}function Il(...e){return t=>e.reduce((r,i)=>i(r),t)}function ud(e){return e==null||e===""?null:e}function pd(e,t=!1){return e!=null&&(e!==""||t)}function id(e){return!pd(e)}function rh(e){return e==null||e.length===0}function qd(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function oh(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Ed(e){if(e!==void 0)return e===null||e===""?!1:Nl(e)}function Nl(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function Gd(e,t){const r=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return r===i}function Cd(e,t,r=!1){const i=e==null,o=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&o)return 0;if(i)return-1;if(o)return 1;function p(I,K){return I>K?1:I<K?-1:0}if(typeof e!="string"||!r)return p(e,t);try{return e.localeCompare(t)}catch{return p(e,t)}}function Bu(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach(r=>t.push(r)),t}return Object.values(e)}function wh(e,t){return e.get("rowModelType")===t}function Rd(e){return wh(e,"clientSide")}function dh(e){return wh(e,"serverSide")}function Ih(e,t){return e.get("domLayout")===t}function nd(e){return vm(e)!==void 0}function Yd(e){return!e.get("suppressAsyncEvents")}function Kh(e){return typeof e.get("getRowHeight")=="function"}function rp(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function lh(e,t,r=!1,i){if(i==null&&(i=e.environment.getDefaultRowHeight()),Kh(e)){if(r)return{height:i,estimated:!0};const I={node:t,data:t.data},K=e.getCallback("getRowHeight")(I);if(vp(K))return K===0&&rl("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,K),estimated:!1}}if(t.detail&&e.get("masterDetail"))return yp(e);const o=e.get("rowHeight");return{height:o&&vp(o)?o:i,estimated:!1}}function yp(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return vp(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function Cp(e){const{environment:t}=e,r=e.get("rowHeight");if(!r||id(r))return t.getDefaultRowHeight();const i=t.refreshRowHeightVariable();return i!==-1?i:(rl("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function vp(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function mf(e,t,r){const i=t[e.getDomDataKey()];return i?i[r]:void 0}function Zp(e,t,r,i){const o=e.getDomDataKey();let p=t[o];id(p)&&(p={},t[o]=p),p[r]=i}function kf(e){let t=null;const r=e.get("getDocument");return r&&pd(r)?t=r():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&pd(t)?t:document}function Eg(e){return kf(e).defaultView||window}function Gg(e){return e.eGridDiv.getRootNode()}function Hf(e){return Gg(e).activeElement}function Rg(e){const t=kf(e),r=Hf(e);return r===null||r===t.body}function fg(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function eg(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Ih(e,"print"))}function Wg(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function Lg(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function $g(e){const t=e.get("grandTotalRow");if(t)return t;if(e.get("groupIncludeTotalFooter"))return"bottom"}function Bm(e){const t=e.get("groupTotalRow");if(typeof t=="function")return e.getCallback("groupTotalRow");if(t)return()=>t;const r=e.get("groupIncludeFooter");if(typeof r=="function"){const i=e.getCallback("groupIncludeFooter");return o=>i(o)?"bottom":void 0}return()=>r?"bottom":void 0}function Lm(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function $m(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function _d(e){const t=e.getCallback("getRowId");return t===void 0?t:r=>{let i=t(r);return typeof i!="string"&&(rl("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}function Zd(e){return e?.checkboxes??!0}function xh(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function Fp(e){return e?.hideDisabledCheckboxes??!1}function ip(e){return typeof e.get("rowSelection")!="string"}function cf(e){return e.get("cellSelection")!==void 0}function Jh(e){const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t?.suppressMultiRanges??!1:!1:e.get("suppressMultiRangeSelection")}function lf(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function vf(e){const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="range":!1:e.get("enableRangeHandle")}function uf(e){const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="fill":!1:e.get("enableFillHandle")}function Gf(e){const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"&&t.handle?.mode==="fill"?t.handle:void 0:{mode:"fill",setFillValue:e.get("fillOperation"),direction:e.get("fillHandleDirection"),suppressClearOnFillReduction:e.get("suppressClearOnFillReduction")}}function Hm(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const r=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return r&&i?!1:r?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function Vg(e){const t=Hm(e);return t===!0||t==="enableSelection"}function Im(e){const t=Hm(e);return t===!0||t==="enableDeselection"}function qg(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function vm(e){const t=e.get("rowSelection");if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t?.mode}function am(e){return vm(e)==="multiRow"}function Jg(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function pf(e){const t=e.get("rowSelection");if(typeof t=="string"){const r=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return r&&i?"filteredDescendants":r?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function ff(e){const t=pf(e);return t==="descendants"||t==="filteredDescendants"}function r0(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function M0(e){return e!=null&&e.length>0}function wf(e){if(!(!e||!e.length))return e[e.length-1]}function Gm(e,t,r){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((i,o)=>r?r(i,t[o]):t[o]===i)}function h0(e,t){return Gm(e,t)}function i0(e){return e.sort((t,r)=>t-r)}function Tm(e,t){if(e)for(let r=e.length-2;r>=0;r--){const i=e[r]===t,o=e[r+1]===t;i&&o&&e.splice(r+1,1)}}function Vm(e,t){const r=e.indexOf(t);r>=0&&(e[r]=e[e.length-1],e.pop())}function ym(e,t){const r=e.indexOf(t);r>=0&&e.splice(r,1)}function l0(e,t){for(let r=0;r<t.length;r++)Vm(e,t[r])}function R0(e,t){for(let r=0;r<t.length;r++)ym(e,t[r])}function p0(e,t,r){e.splice(r,0,t)}function j0(e,t,r){if(!(e==null||t==null))for(let i=t.length-1;i>=0;i--){const o=t[i];p0(e,o,r)}}function lg(e,t,r){R0(e,t),t.slice().reverse().forEach(i=>p0(e,i,r))}function sm(e,t){return e.indexOf(t)>-1}function Cg(e){return e?.flatMap(t=>t)??[]}function S0(e,t){t==null||e==null||t.forEach(r=>e.push(r))}function Kp(e,t){if(e!=null)for(let r=e.length-1;r>=0;r--)t(e[r],r)}var rt="__ag_Grid_Stop_Propagation",Uu=["touchstart","touchend","touchmove","touchcancel","scroll"],Vd={};function Eh(e){e[rt]=!0}function ph(e){return e[rt]===!0}var jp=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r=>{if(typeof Vd[r]=="boolean")return Vd[r];const i=document.createElement(e[r]||"div");return r="on"+r,Vd[r]=r in i}})();function _p(e,t,r){let i=t;for(;i;){const o=mf(e,i,r);if(o)return o;i=i.parentElement}return null}function Gp(e,t){return!t||!e?!1:Bp(t).indexOf(e)>=0}function of(e){const t=[];let r=e.target;for(;r;)t.push(r),r=r.parentElement;return t}function Bp(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():of(t)}function rf(e,t,r,i){const p=sm(Uu,r)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,r,i,p)}var Rh=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,r){this.localEventService||(this.localEventService=new Y),this.localEventService.addEventListener(e,t,r)}removeEventListener(e,t,r){this.localEventService&&this.localEventService.removeEventListener(e,t,r)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const r=[];for(const i in t){const o=t[i];o&&r.push(this._setupListener(e,i,o))}return r}_setupListener(e,t,r){if(this.destroyed)return()=>null;e instanceof HTMLElement?rf(this.getFrameworkOverrides(),e,t,r):e.addEventListener(t,r);const i=()=>(e.removeEventListener(t,r),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(o=>o!==i),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const r=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==r),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const r=e.join("-")+this.propertyListenerId++,i=o=>{if(o.changeSet){if(o.changeSet&&o.changeSet.id===this.lastChangeSetIdLookup[r])return;this.lastChangeSetIdLookup[r]=o.changeSet.id}const p={type:"gridPropertyChanged",changeSet:o.changeSet,source:o.source};t(p)};e.forEach(o=>this.setupGridOptionListener(o,i))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const r=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),r}createBean(e,t,r){return(t||this.stubContext).createBean(e,r)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function xf(e){return e instanceof Ng}var Ng=class extends Rh{constructor(e,t,r,i){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=mu(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=r,this.level=i}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{Xl(t)?e.push(t):xf(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,r=!1;const i=this.findChildrenRemovingPadding();for(let p=0,I=i.length;p<I;p++){const K=i[p];if(!K.isVisible())continue;const jt=K.getColumnGroupShow();jt==="open"?(e=!0,r=!0):jt==="closed"?(t=!0,r=!0):(e=!0,t=!0)}const o=e&&t&&r;this.expandable!==o&&(this.expandable=o,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=r=>{r.forEach(i=>{xf(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},em="ag-Grid-ControlsColumn",Fm=class extends Rh{constructor(){super(...arguments),this.beanName="controlsColService"}isControlsColEnabled(){const{gos:e}=this,t=e.get("rowSelection");if(!t||typeof t!="object")return!1;const r=Zd(t),i=xh(t);return!!(r||i)}createControlsCols(){if(!this.isControlsColEnabled())return[];const{gos:e}=this,t=e.get("selectionColumnDef"),i={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:e.get("enableRtl")?"right":"left",comparator(p,I,K,jt){const Gl=K.isSelected(),Fu=jt.isSelected();return Gl&&Fu?0:Gl?1:-1},editable:!1,suppressFillHandle:!0,...t,colId:`${em}`},o=new Wl(i,null,i.colId,!1);return this.createBean(o),[o]}},Vf="ag-Grid-AutoColumn";function Yg(e){const t=[],r=i=>{for(let o=0;o<i.length;o++){const p=i[o];Xl(p)?t.push(p):xf(p)&&r(p.getChildren())}};return r(e),t}function $f(e){return e.reduce((t,r)=>t+r.getActualWidth(),0)}function Kg(e,t,r){const i={};if(!t)return;Zu(null,t,p=>{i[p.getInstanceId()]=p}),r&&Zu(null,r,p=>{i[p.getInstanceId()]=null});const o=Object.values(i).filter(p=>p!=null);e.destroyBeans(o)}function If(e){return e.getId().startsWith(Vf)}function Mm(e){return e.getColId().startsWith(em)}function dd(e){let t=[];return e instanceof Array?e.some(i=>typeof i!="string")?rl("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):rl("colDef.type should be of type 'string' | 'string[]'"),t}var f=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e,t){const{frameworkOverrides:r,wrappedListeners:i}=this;let o=t;if(r.shouldWrapOutgoing){o=I=>{r.wrapOutgoing(()=>t(I))};let p=i.get(e);p||(p=new Map,i.set(e,p)),p.set(t,o)}return o}wrapGlobal(e){const{frameworkOverrides:t,wrappedGlobalListeners:r}=this;let i=e;return t.shouldWrapOutgoing&&(i=(o,p)=>{t.wrapOutgoing(()=>e(o,p))},r.set(e,i)),i}unwrap(e,t){const{wrappedListeners:r}=this,i=r.get(e);if(i){const o=i.get(t);if(o)return i.delete(t),i.size===0&&r.delete(e),o}return t}unwrapGlobal(e){const{wrappedGlobalListeners:t}=this,r=t.get(e);return r?(t.delete(e),r):e}},E=new Set(["__proto__","constructor","prototype"]);function W(e,t){if(e!=null){if(Array.isArray(e)){for(let r=0;r<e.length;r++)t(r.toString(),e[r]);return}for(const[r,i]of Object.entries(e))E.has(r)||t(r,i)}}function Q(e){const t={},r=Object.keys(e);for(let i=0;i<r.length;i++){if(E.has(r[i]))continue;const o=r[i],p=e[o];t[o]=p}return t}function yl(e,t){if(!e)return;const r=e,i={};return Object.keys(r).forEach(o=>{if(t&&t.indexOf(o)>=0||E.has(o))return;const p=r[o];vl(p)&&p.constructor===Object?i[o]=yl(p):i[o]=p}),i}function Ln(e){if(!e)return[];const t=Object;if(typeof t.values=="function")return t.values(e);const r=[];for(const i in e)e.hasOwnProperty(i)&&e.propertyIsEnumerable(i)&&r.push(e[i]);return r}function Cl(e,t,r=!0,i=!1){pd(t)&&W(t,(o,p)=>{if(E.has(o))return;let I=e[o];I!==p&&(i&&I==null&&p!=null&&typeof p=="object"&&p.constructor===Object&&(I={},e[o]=I),vl(p)&&vl(I)&&!Array.isArray(I)?Cl(I,p,r,i):(r||p!==void 0)&&(e[o]=p))})}function Al(e,t,r){if(!t||!e)return;if(!r)return e[t];const i=t.split(".");let o=e;for(let p=0;p<i.length;p++){if(o==null)return;o=o[i[p]]}return o}function vl(e){return typeof e=="object"&&e!==null}var Fl={resizable:!0,sortable:!0},Ol=0;function mu(){return Ol++}function Xl(e){return e instanceof Wl}var Wl=class extends Rh{constructor(e,t,r,i){super(),this.isColumn=!0,this.instanceId=mu(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new Y,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=r,this.primary=i,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const t=e.sortIndex,r=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):r!==null&&(this.sortIndex=r);const i=e.hide,o=e.initialHide;i!==void 0?this.visible=!i:this.visible=!o,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const p=e.flex,I=e.initialFlex;p!==void 0?this.flex=p:I!==void 0&&(this.flex=I)}setColDef(e,t,r){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",r))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=pd(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=pd(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=pd(this.colDef.tooltipField)||pd(this.colDef.tooltipValueGetter)||pd(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const r=oh(e.width),i=oh(e.initialWidth);return r!=null?t=r:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(id(this.colDef)||id(this.colDef.showRowGroup))return!1;const t=this.colDef.showRowGroup===!0,r=this.colDef.showRowGroup===e;return t||r}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new f(this.frameworkOverrides));const r=this.frameworkEventListenerService?.wrap(e,t)??t;this.columnEventService.addEventListener(e,r)}removeEventListener(e,t){const r=this.frameworkEventListenerService?.unwrap(e,t)??t;this.columnEventService.removeEventListener(e,r)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const t=this.createColumnFunctionCallbackParams(e),r=this.colDef.suppressNavigable;return r(t)}return!1}isCellEditable(e){if(e.group){if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){const t=this.gos.get("rowSelection");if(t&&typeof t!="string"){const r=Mm(this)&&Zd(t);return this.isColumnFunc(e,r)}else return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??Fl[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const r=this.createColumnFunctionCallbackParams(e);return t(r)}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return id(this.sort)}isSorting(){return pd(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,r){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const i=this.createColumnEvent("filterChanged",t);r&&Cl(i,r),this.columnEventService.dispatchEvent(i)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const r=e===!0;this.visible!==r&&(this.visible=r,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let r=!0;for(;e;){if(!e.isPadding()){r=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:r}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(id(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),r=this.colDef.colSpan(t);return Math.max(r,1)}getRowSpan(e){if(id(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),r=this.colDef.rowSpan(t);return Math.max(r,1)}setActualWidth(e,t,r=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),r||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},hu={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},Jl=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=qd(e);let r=0;for(;;){let i;if(e?(i=e,r!==0&&(i+="_"+r)):t?(i=t,r!==0&&(i+="_"+r)):i=r,!this.existingKeys[i])return this.existingKeys[i]=!0,String(i);r++}}},Gu=class extends Rh{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,r,i){const o=new Jl,{existingCols:p,existingGroups:I,existingColKeys:K}=this.extractExistingTreeData(r);o.addExistingKeys(K);const jt=this.recursivelyCreateColumns(e,0,t,p,o,I,i),Gl=this.findMaxDept(jt,0),Fu=this.balanceColumnTree(jt,0,Gl,o);return Zu(null,Fu,(qu,Xd)=>{xf(qu)&&qu.setupExpandable(),qu.setOriginalParent(Xd)}),{columnTree:Fu,treeDept:Gl}}extractExistingTreeData(e){const t=[],r=[],i=[];return e&&Zu(null,e,o=>{if(xf(o)){const p=o;r.push(p)}else{const p=o;i.push(p.getId()),t.push(p)}}),{existingCols:t,existingGroups:r,existingColKeys:i}}balanceTreeForAutoCols(e,t){const r=[],i=this.findDepth(t);return e.forEach(o=>{let p=o;for(let I=i-1;I>=0;I--){const K=new Ng(null,`FAKE_PATH_${o.getId()}}_${I}`,!0,I);this.createBean(K),K.setChildren([p]),p.setOriginalParent(K),p=K}i===0&&o.setOriginalParent(null),r.push(p)}),[r,i]}findDepth(e){let t=0,r=e;for(;r&&r[0]&&xf(r[0]);)t++,r=r[0].getChildren();return t}balanceColumnTree(e,t,r,i){const o=[];for(let p=0;p<e.length;p++){const I=e[p];if(xf(I)){const K=I,jt=this.balanceColumnTree(K.getChildren(),t+1,r,i);K.setChildren(jt),o.push(K)}else{let K,jt;for(let Gl=r-1;Gl>=t;Gl--){const Fu=i.getUniqueKey(null,null),Lu=this.createMergedColGroupDef(null),qu=new Ng(Lu,Fu,!0,t);this.createBean(qu),jt&&jt.setChildren([qu]),jt=qu,K||(K=jt)}if(K&&jt)if(o.push(K),e.some(Fu=>xf(Fu))){jt.setChildren([I]);continue}else{jt.setChildren(e);break}o.push(I)}}return o}findMaxDept(e,t){let r=t;for(let i=0;i<e.length;i++){const o=e[i];if(xf(o)){const p=o,I=this.findMaxDept(p.getChildren(),t+1);r<I&&(r=I)}}return r}recursivelyCreateColumns(e,t,r,i,o,p,I){if(!e)return[];const K=new Array(e.length);for(let jt=0;jt<K.length;jt++){const Gl=e[jt];this.isColumnGroup(Gl)?K[jt]=this.createColumnGroup(r,Gl,t,i,o,p,I):K[jt]=this.createColumn(r,Gl,i,o,I)}return K}createColumnGroup(e,t,r,i,o,p,I){const K=this.createMergedColGroupDef(t),jt=o.getUniqueKey(K.groupId||null,null),Gl=new Ng(K,jt,!1,r);this.createBean(Gl);const Fu=this.findExistingGroup(t,p);Fu&&p.splice(Fu.idx,1);const Lu=Fu?.group;Lu&&Gl.setExpanded(Lu.isExpanded());const qu=this.recursivelyCreateColumns(K.children,r+1,e,i,o,p,I);return Gl.setChildren(qu),Gl}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,r,i,o){const p=this.findExistingColumn(t,r);p&&r?.splice(p.idx,1);let I=p?.column;if(I){const K=this.addColumnDefaultAndTypes(t,I.getColId());I.setColDef(K,t,o),this.applyColumnState(I,K,o)}else{const K=i.getUniqueKey(t.colId,t.field),jt=this.addColumnDefaultAndTypes(t,K);I=new Wl(jt,t,K,e),this.createBean(I)}return this.dataTypeService?.addColumnListeners(I),I}applyColumnState(e,t,r){const i=oh(t.flex);if(i!==void 0&&e.setFlex(i),e.getFlex()<=0){const K=oh(t.width);if(K!=null)e.setActualWidth(K,r);else{const jt=e.getActualWidth();e.setActualWidth(jt,r)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,r):e.setSort(void 0,r));const p=oh(t.sortIndex);p!==void 0&&e.setSortIndex(p);const I=Ed(t.hide);I!==void 0&&e.setVisible(!I,r),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let r=0;r<t.length;r++){const i=t[r].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[r].getId()===e.colId)return{idx:r,column:t[r]};continue}if(e.field!=null){if(i.field===e.field)return{idx:r,column:t[r]};continue}if(i===e)return{idx:r,column:t[r]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){const o=t[i];if(o.getColGroupDef()&&o.getId()===e.groupId)return{idx:i,group:o}}}addColumnDefaultAndTypes(e,t){const r={},i=this.gos.get("defaultColDef");Cl(r,i,!1,!0);const o=this.updateColDefAndGetColumnType(r,e,t);o&&this.assignColumnTypes(o,r),Cl(r,e,!1,!0);const p=this.gos.get("autoGroupColumnDef"),I=Wg(this.gos);return e.rowGroup&&p&&I&&Cl(r,{sort:p.sort,initialSort:p.initialSort},!1,!0),this.dataTypeService?.validateColDef(r),r}updateColDefAndGetColumnType(e,t,r){const i=this.dataTypeService?.updateColDefAndGetColumnType(e,t,r),o=t.type??i??e.type;return e.type=o,o?dd(o):void 0}assignColumnTypes(e,t){if(!e.length)return;const r=Object.assign({},hu),i=this.gos.get("columnTypes")||{};W(i,(o,p)=>{o in r?rl(`the column type '${o}' is a default column type and cannot be overridden.`):(p.type&&rl("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),r[o]=p)}),e.forEach(o=>{const p=r[o.trim()];p?Cl(t,p,!1,!0):rl("colDef.type '"+o+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function Zu(e,t,r){if(t)for(let i=0;i<t.length;i++){const o=t[i];xf(o)&&Zu(o,o.getChildren(),r),r(o,e)}}var rd=class extends Rh{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(wd(t.source))),this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,wd(t.source))}),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(wd(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(wd(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),wd(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){const t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();const r=this.colDefCols?.list,i=this.colDefCols?.tree,o=this.columnFactory.createColumnTree(this.colDefs,!0,i,e);Kg(this.context,this.colDefCols?.tree,o.columnTree);const p=o.columnTree,I=o.treeDept,K=Yg(p),jt={};K.forEach(Gl=>jt[Gl.getId()]=Gl),this.colDefCols={tree:p,treeDepth:I,list:K,map:jt},this.funcColsService.extractCols(e,r),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;const t=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const r=rp(this.gos,this.showingPivotResult);(!e||r)&&this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!Gm(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){const{map:t,list:r,tree:i,treeDepth:o}=e;this.cols={list:r.slice(),map:{...t},tree:i.slice(),treeDepth:o},e.list.some(I=>this.cols?.map[I.getColId()]!==void 0)||(this.lastPivotOrder=null)}else{const{map:t,list:r,tree:i,treeDepth:o}=this.colDefCols;this.cols={list:r.slice(),map:{...t},tree:i.slice(),treeDepth:o}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns(),r=this.controlsColService?.isControlsColEnabled();return this.cols.list.filter(o=>{const p=If(o);if(e){const I=t&&sm(t,o);return p||I||r&&Mm(o)}else return p||o.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),gd(this.cols))}createAutoCols(){const e=$m(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),r=this.funcColsService.getRowGroupColumns(),o=!(r.length>0||this.gos.get("treeData"))||t||e,p=()=>{this.autoCols&&(Kg(this.context,this.autoCols.tree),this.autoCols=null)};if(o||!this.autoColService){p();return}const I=this.autoColService.createAutoCols(r)??[],K=Qd(I,this.autoCols?.list||null),jt=this.cols.treeDepth,Fu=(this.autoCols?this.autoCols.treeDepth:-1)==jt;if(K&&Fu)return;p();const[Lu,qu]=this.columnFactory.balanceTreeForAutoCols(I,this.cols.tree);this.autoCols={list:I,tree:Lu,treeDepth:qu,map:{}};const Xd=Vh=>{if(!Vh)return null;const Zh=Vh.filter(Wh=>!If(Wh));return[...I,...Zh]};this.lastOrder=Xd(this.lastOrder),this.lastPivotOrder=Xd(this.lastPivotOrder)}createControlsCols(){const e=()=>{Kg(this.context,this.controlsCols?.tree),this.controlsCols=null};this.controlsColService||e();const t=this.cols.treeDepth,i=(this.controlsCols?.treeDepth??-1)==t,o=this.controlsColService?.createControlsCols()??[];if(Qd(o,this.controlsCols?.list??[])&&i)return;e();const[I,K]=this.columnFactory.balanceTreeForAutoCols(o,this.cols.tree);this.controlsCols={list:o,tree:I,treeDepth:K,map:{}};const jt=Gl=>{if(!Gl)return null;const Fu=Gl.filter(Lu=>!Mm(Lu));return[...o,...Fu]};this.lastOrder=jt(this.lastOrder),this.lastPivotOrder=jt(this.lastPivotOrder)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),gd(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,r){this.columnApplyStateService.applyColumnState({state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},r)}setColsPinned(e,t,r){if(!this.cols||rh(e))return;if(Ih(this.gos,"print")){rl("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let i;t===!0||t==="left"?i="left":t==="right"?i="right":i=null;const o=[];e.forEach(p=>{if(!p)return;const I=this.getCol(p);I&&I.getPinned()!==i&&(I.setPinned(i),o.push(I))}),o.length&&(this.visibleColsService.refresh(r),this.eventDispatcher.columnPinned(o,r)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,r){let i;xf(e)?i=e.getId():i=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:i,open:t}],r)}getProvidedColGroup(e){let t=null;return Zu(null,this.cols?.tree,r=>{xf(r)&&r.getId()===e&&(t=r)}),t}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const i=this.funcColsService.getRowGroupColumns().findIndex(o=>o.getColId()===e.getColId());return t>i}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,Rd(this.gos)||dh(this.gos)||rl("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map((jt,Gl)=>[jt,Gl]));if(!this.cols.list.some(jt=>t.has(jt)))return;const i=new Map(this.cols.list.map(jt=>[jt,!0])),o=e.filter(jt=>i.has(jt)),p=new Map(o.map(jt=>[jt,!0])),I=this.cols.list.filter(jt=>!p.has(jt)),K=o.slice();I.forEach(jt=>{let Gl=jt.getOriginalParent();if(!Gl){K.push(jt);return}const Fu=[];for(;!Fu.length&&Gl;)Gl.getLeafColumns().forEach(Vh=>{const Zh=K.indexOf(Vh)>=0,Wh=Fu.indexOf(Vh)<0;Zh&&Wh&&Fu.push(Vh)}),Gl=Gl.getOriginalParent();if(!Fu.length){K.push(jt);return}const Lu=Fu.map(Xd=>K.indexOf(Xd)),qu=Math.max(...Lu);p0(K,jt,qu+1)}),this.cols.list=K}sortColsLikeKeys(e){if(this.cols==null)return;let t=[];const r={};e.forEach(o=>{if(r[o])return;const p=this.cols.map[o];p&&(t.push(p),r[o]=!0)});let i=0;if(this.cols.list.forEach(o=>{const p=o.getColId();if(r[p]!=null)return;p.startsWith(Vf)?p0(t,o,i++):t.push(o)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){rl("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(r=>this.cols.list.indexOf(r)<0).length>0||e.sort((r,i)=>{const o=this.cols.list.indexOf(r),p=this.cols.list.indexOf(i);return o-p})}resetColDefIntoCol(e,t){const r=e.getUserProvidedColDef();if(!r)return!1;const i=this.columnFactory.addColumnDefaultAndTypes(r,e.getColId());return e.setColDef(i,r,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,r){lg(this.cols?.list,e,t),this.visibleColsService.refresh(r)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((i,o)=>this.lastOrder.indexOf(i)-this.lastOrder.indexOf(o)):this.lastOrder&&e.sort((i,o)=>this.cols.list.indexOf(i)-this.cols.list.indexOf(o));const t=this.funcColsService.getRowGroupColumns(),r=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,r)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(rl("Pivot mode not available with treeData."),!1):!0}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!rh(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){Kg(this.context,this.colDefCols?.tree),Kg(this.context,this.autoCols?.tree),Kg(this.context,this.controlsCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){const t=this.pivotResultColsService.getPivotResultCols()?.list;return[this.colDefCols?.list??[],this.autoCols?.list??[],this.controlsCols?.list??[],t??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;const{map:r,list:i}=t;if(typeof e=="string"&&r[e])return r[e];for(let o=0;o<i.length;o++)if(jd(i[o],e))return i[o];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols?.list.find(t=>jd(t,e))??null}getAutoCols(){return this.autoCols?.list??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){const e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(const r of t){if(!r)continue;const i=r.getGroupRowCount()||0;for(let o=0;o<i;o++){const p=r.getGroupRowCtrlAtIndex(o),I=e[o];if(p){const K=this.getColumnGroupHeaderRowHeight(p);(I==null||K>I)&&(e[o]=K)}}}return e}getColumnGroupHeaderRowHeight(e){const t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let r=0;const i=e.getHeaderCtrls();for(const o of i){const p=o.getColumn();if(p.isAutoHeaderHeight()){const I=p.getAutoHeaderHeight();I!=null&&I>r&&(r=I)}}return Math.max(t,r)}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),r=this.visibleColsService.getAllCols().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...r)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;const{colIds:t,skipHeader:r}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:r,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",r)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,r){const i=t&&typeof t!="string"?Zd(t):void 0,o=e&&typeof e!="string"?Zd(e):void 0,p=i!==o,I=t&&typeof t!="string"?xh(t):void 0,K=e&&typeof e!="string"?xh(e):void 0;(p||I!==K)&&this.refreshAll(r)}};function wd(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function gd(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function jd(e,t){const r=e===t,i=e.getColDef()===t,o=e.getColId()==t;return r||i||o}function Qd(e,t){return Gm(e,t,(r,i)=>r.getColId()===i.getColId())}var ih=class extends Rh{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:r,skipHeaderGroups:i,stopAtGroup:o,source:p="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;const I=[];let K=-1;const jt=r??this.gos.get("skipHeaderOnAutoSize"),Gl=i??jt;for(;K!==0;){K=0;const Fu=[];t.forEach(Lu=>{if(!Lu)return;const qu=this.columnModel.getCol(Lu);if(!qu||I.indexOf(qu)>=0)return;const Xd=this.autoWidthCalculator.getPreferredWidthForColumn(qu,jt);if(Xd>0){const Vh=this.normaliseColumnWidth(qu,Xd);qu.setActualWidth(Vh,p),I.push(qu),K++}Fu.push(qu)}),Fu.length&&this.visibleColsService.refresh(p)}Gl||this.autoSizeColumnGroupsByColumns(t,p,o),this.eventDispatcher.columnResized(I,!0,"autosizeColumns")}autoSizeColumn(e,t,r){e&&this.autoSizeCols({colKeys:[e],skipHeader:r,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,r){const i=new Set;this.columnModel.getColsForKeys(e).forEach(K=>{let jt=K.getParent();for(;jt&&jt!=r;)jt.isPadding()||i.add(jt),jt=jt.getParent()});let p;const I=[];for(const K of i){for(const jt of this.ctrlsService.getHeaderRowContainerCtrls())if(p=jt.getHeaderCtrlForColumn(K),p)break;p&&p.resizeLeafColumnsToFit(t)}return I}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}const r=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:r,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const r=e.getMinWidth();t<r&&(t=r);const i=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=i),t}},Hl=class extends Rh{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>ym(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>ym(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>ym(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);const r=this.columnModel.getColDefCol(t);return r?[r]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return rh(this.rowGroupCols)}setColumnAggFunc(e,t,r){if(!e)return;const i=this.columnModel.getColDefCol(e);i&&(i.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[i],r))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(r,i)=>this.setRowGroupActive(r,i,t),t)}setRowGroupActive(e,t,r){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,r),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,r),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,r))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,r=>this.setRowGroupActive(!0,r,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,r=>this.setRowGroupActive(!1,r,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,r=>r.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(r,i)=>{i.setPivotActive(r,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,r=>r.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(r,i)=>this.setValueActive(r,i,t),t)}setValueActive(e,t,r){if(e!==t.isValueActive()&&(t.setValueActive(e,r),e&&!t.getAggFunc()&&this.aggFuncService)){const i=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(i)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,r=>this.setValueActive(!0,r,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,r=>this.setValueActive(!1,r,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,r){if(this.isRowGroupEmpty())return;const i=this.rowGroupCols[e],o=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,i),this.eventDispatcher.rowGroupChanged(o,r)}setColList(e,t,r,i,o,p,I){if(!this.columnModel.getCols())return;const K=new Map;t.forEach((Gl,Fu)=>K.set(Gl,Fu)),t.length=0,pd(e)&&e.forEach(Gl=>{const Fu=this.columnModel.getColDefCol(Gl);Fu&&t.push(Fu)}),t.forEach((Gl,Fu)=>{const Lu=K.get(Gl);if(Lu===void 0){K.set(Gl,0);return}i&&Lu!==Fu||K.delete(Gl)}),(this.columnModel.getColDefCols()||[]).forEach(Gl=>{const Fu=t.indexOf(Gl)>=0;p(Fu,Gl)}),o&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(I),this.eventDispatcher.columnChanged(r,[...K.keys()],I)}updateColList(e,t,r,i,o,p,I){if(!e||rh(e))return;let K=!1;const jt=new Set;e.forEach(Gl=>{if(!Gl)return;const Fu=this.columnModel.getColDefCol(Gl);if(Fu){if(jt.add(Fu),r){if(t.indexOf(Fu)>=0)return;t.push(Fu)}else{const Lu=t.indexOf(Fu);if(Lu<0)return;for(let qu=Lu+1;qu<t.length;qu++)jt.add(t[qu]);ym(t,Fu)}o(Fu),K=!0}}),K&&(i&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(I),this.eventDispatcher.genericColumnEvent(p,Array.from(jt),I))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(r,i)=>r.setValueActive(i,e),()=>{},()=>{},r=>{const i=r.aggFunc;if(i===null||i==="")return null;if(i!==void 0)return!!i},r=>r.initialAggFunc!=null&&r.initialAggFunc!=""),this.valueCols.forEach(r=>{const i=r.getColDef();i.aggFunc!=null&&i.aggFunc!=""?r.setAggFunc(i.aggFunc):r.getAggFunc()||r.setAggFunc(i.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(r,i)=>r.setRowGroupActive(i,e),r=>r.rowGroupIndex,r=>r.initialRowGroupIndex,r=>r.rowGroup,r=>r.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(r,i)=>r.setPivotActive(i,e),r=>r.pivotIndex,r=>r.initialPivotIndex,r=>r.pivot,r=>r.initialPivot)}extractColsCommon(e=[],t=[],r,i,o,p,I){const K=[],jt=[];(this.columnModel.getColDefCols()||[]).forEach(qu=>{const Xd=e.indexOf(qu)<0,Vh=qu.getColDef(),Zh=Ed(p(Vh)),Wh=Ed(I(Vh)),Rp=oh(i(Vh)),Tp=oh(o(Vh));let Mp;Zh!==void 0?Mp=Zh:Rp!==void 0?Rp===null?Mp=!1:Mp=Rp>=0:Xd?Wh!==void 0?Mp=Wh:Tp!==void 0?Mp=Tp!=null&&Tp>=0:Mp=!1:Mp=t.indexOf(qu)>=0,Mp&&((Xd?Rp!=null||Tp!=null:Rp!=null)?K.push(qu):jt.push(qu))});const Fu=qu=>{const Xd=i(qu.getColDef()),Vh=o(qu.getColDef());return Xd??Vh};K.sort((qu,Xd)=>{const Vh=Fu(qu),Zh=Fu(Xd);return Vh===Zh?0:Vh<Zh?-1:1});const Lu=[].concat(K);return t.forEach(qu=>{jt.indexOf(qu)>=0&&Lu.push(qu)}),jt.forEach(qu=>{Lu.indexOf(qu)<0&&Lu.push(qu)}),t.forEach(qu=>{Lu.indexOf(qu)<0&&r(qu,!1)}),Lu.forEach(qu=>{t.indexOf(qu)<0&&r(qu,!0)}),Lu}generateColumnStateForRowGroupAndPivotIndexes(e,t){const r={},i=(o,p,I,K,jt,Gl)=>{const Fu=this.columnModel.getColDefCols();if(!p.length||!Fu)return[];const Lu=Object.keys(o),qu=new Set(Lu),Xd=new Set(Lu),Vh=new Set(p.map(Jf=>{const sg=Jf.getColId();return Xd.delete(sg),sg}).concat(Lu)),Zh=[],Wh={};let Rp=0;for(let Jf=0;Jf<Fu.length;Jf++){const sg=Fu[Jf].getColId();Vh.has(sg)&&(Zh.push(sg),Wh[sg]=Rp++)}let Tp=1e3,Mp=!1,Of=0;const zg=Jf=>{const sg=Wh[Jf];for(let mm=Of;mm<sg;mm++){const Um=Zh[mm];Xd.has(Um)&&(o[Um][jt]=Tp++,Xd.delete(Um))}Of=sg};p.forEach(Jf=>{const sg=Jf.getColId();if(qu.has(sg))zg(sg),o[sg][jt]=Tp++;else{const mm=Jf.getColDef();(mm[jt]===null||mm[jt]===void 0&&mm[Gl]==null)&&(Mp||(mm[I]||mm[I]===void 0&&mm[K]?zg(sg):(Xd.forEach(Dy=>{o[Dy][jt]=Tp+Wh[Dy]}),Tp+=Zh.length,Mp=!0)),r[sg]||(r[sg]={colId:sg}),r[sg][jt]=Tp++)}})};return i(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),i(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(r)}},Iu=class extends Rh{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const r=this.columnModel.getColDefCols()||[];if(rh(r))return!1;if(e&&e.state&&!e.state.forEach)return rl("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const i=this.funcColsService.getModifyColumnsNoEventsCallbacks(),o=(K,jt,Gl)=>{const Fu=this.compareColumnStatesAndDispatchEvents(t),Lu=jt.slice(),qu={},Xd={},Vh=[],Zh=[];let Wh=0;const Rp=this.funcColsService.getRowGroupColumns().slice(),Tp=this.funcColsService.getPivotColumns().slice();K.forEach(Jf=>{const sg=Jf.colId||"";if(sg.startsWith(Vf)){Vh.push(Jf),Zh.push(Jf);return}const Um=Gl(sg);Um?(this.syncColumnWithStateItem(Um,Jf,e.defaultState,qu,Xd,!1,t,i),ym(Lu,Um)):(Zh.push(Jf),Wh+=1)});const Mp=Jf=>this.syncColumnWithStateItem(Jf,null,e.defaultState,qu,Xd,!1,t,i);Lu.forEach(Mp),this.funcColsService.sortRowGroupColumns(Fd.bind(this,qu,Rp)),this.funcColsService.sortPivotColumns(Fd.bind(this,Xd,Tp)),this.columnModel.refreshCols(!1);const zg=(this.columnModel.getAutoCols()||[]).slice();return Vh.forEach(Jf=>{const sg=this.columnModel.getAutoCol(Jf.colId);ym(zg,sg),this.syncColumnWithStateItem(sg,Jf,e.defaultState,null,null,!0,t,i)}),zg.forEach(Mp),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),Fu(),{unmatchedAndAutoStates:Zh,unmatchedCount:Wh}};this.columnAnimationService.start();let{unmatchedAndAutoStates:p,unmatchedCount:I}=o(e.state||[],r,K=>this.columnModel.getColDefCol(K));if(p.length>0||pd(e.defaultState)){const jt=this.pivotResultColsService.getPivotResultCols()?.list;I=o(p,jt||[],Gl=>this.pivotResultColsService.getPivotResultCol(Gl)).unmatchedCount}return this.columnAnimationService.finish(),I===0}resetColumnState(e){const t=this.columnModel.getColDefCols();if(rh(t))return;const r=this.columnModel.getColDefColTree(),i=Yg(r),o=[];let p=1e3,I=1e3,K=[];const jt=this.columnModel.getAutoCols();jt&&(K=K.concat(jt)),i&&(K=K.concat(i)),K.forEach(Gl=>{const Fu=this.getColumnStateFromColDef(Gl);id(Fu.rowGroupIndex)&&Fu.rowGroup&&(Fu.rowGroupIndex=p++),id(Fu.pivotIndex)&&Fu.pivot&&(Fu.pivotIndex=I++),o.push(Fu)}),this.applyColumnState({state:o,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(Vh,Zh)=>Vh??Zh??null,r=e.getColDef(),i=t(r.sort,r.initialSort),o=t(r.sortIndex,r.initialSortIndex),p=t(r.hide,r.initialHide),I=t(r.pinned,r.initialPinned),K=t(r.width,r.initialWidth),jt=t(r.flex,r.initialFlex);let Gl=t(r.rowGroupIndex,r.initialRowGroupIndex),Fu=t(r.rowGroup,r.initialRowGroup);Gl==null&&(Fu==null||Fu==!1)&&(Gl=null,Fu=null);let Lu=t(r.pivotIndex,r.initialPivotIndex),qu=t(r.pivot,r.initialPivot);Lu==null&&(qu==null||qu==!1)&&(Lu=null,qu=null);const Xd=t(r.aggFunc,r.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:o,hide:p,pinned:I,width:K,flex:jt,rowGroup:Fu,rowGroupIndex:Gl,pivot:qu,pivotIndex:Lu,aggFunc:Xd}}syncColumnWithStateItem(e,t,r,i,o,p,I,K){if(!e)return;const jt=(Of,zg)=>{const Jf={value1:void 0,value2:void 0};let sg=!1;return t&&(t[Of]!==void 0&&(Jf.value1=t[Of],sg=!0),pd(zg)&&t[zg]!==void 0&&(Jf.value2=t[zg],sg=!0)),!sg&&r&&(r[Of]!==void 0&&(Jf.value1=r[Of]),pd(zg)&&r[zg]!==void 0&&(Jf.value2=r[zg])),Jf},Gl=jt("hide").value1;Gl!==void 0&&e.setVisible(!Gl,I);const Fu=jt("pinned").value1;Fu!==void 0&&e.setPinned(Fu);const Lu=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),qu=jt("flex").value1;if(qu!==void 0&&e.setFlex(qu),qu==null){const Of=jt("width").value1;Of!=null&&Lu!=null&&Of>=Lu&&e.setActualWidth(Of,I)}const Xd=jt("sort").value1;Xd!==void 0&&(Xd==="desc"||Xd==="asc"?e.setSort(Xd,I):e.setSort(void 0,I));const Vh=jt("sortIndex").value1;if(Vh!==void 0&&e.setSortIndex(Vh),p||!e.isPrimary())return;const Zh=jt("aggFunc").value1;Zh!==void 0&&(typeof Zh=="string"?(e.setAggFunc(Zh),e.isValueActive()||(e.setValueActive(!0,I),K.addValueCol(e))):(pd(Zh)&&rl("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,I),K.removeValueCol(e))));const{value1:Wh,value2:Rp}=jt("rowGroup","rowGroupIndex");(Wh!==void 0||Rp!==void 0)&&(typeof Rp=="number"||Wh?(e.isRowGroupActive()||(e.setRowGroupActive(!0,I),K.addGroupCol(e)),i&&typeof Rp=="number"&&(i[e.getId()]=Rp)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,I),K.removeGroupCol(e)));const{value1:Tp,value2:Mp}=jt("pivot","pivotIndex");(Tp!==void 0||Mp!==void 0)&&(typeof Mp=="number"||Tp?(e.isPivotActive()||(e.setPivotActive(!0,I),K.addPivotCol(e)),o&&typeof Mp=="number"&&(o[e.getId()]=Mp)):e.isPivotActive()&&(e.setPivotActive(!1,I),K.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach(r=>{r.colId!=null&&t.push(r.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},r=this.columnGetStateService.getColumnState(),i={};return r.forEach(o=>{i[o.colId]=o}),()=>{const o=this.columnModel.getAllCols(),p=(Zh,Wh,Rp,Tp)=>{const Mp=Wh.map(Tp),Of=Rp.map(Tp);if(Gm(Mp,Of))return;const Jf=new Set(Wh);Rp.forEach(mm=>{Jf.delete(mm)||Jf.add(mm)});const sg=[...Jf];this.eventService.dispatchEvent({type:Zh,columns:sg,column:sg.length===1?sg[0]:null,source:e})},I=Zh=>{const Wh=[];return o.forEach(Rp=>{const Tp=i[Rp.getColId()];Tp&&Zh(Tp,Rp)&&Wh.push(Rp)}),Wh},K=Zh=>Zh.getColId();p("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),K),p("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),K);const Gl=I((Zh,Wh)=>{const Rp=Zh.aggFunc!=null,Tp=Rp!=Wh.isValueActive(),Mp=Rp&&Zh.aggFunc!=Wh.getAggFunc();return Tp||Mp});Gl.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",Gl,e);const Fu=(Zh,Wh)=>Zh.width!=Wh.getActualWidth();this.eventDispatcher.columnResized(I(Fu),!0,e);const Lu=(Zh,Wh)=>Zh.pinned!=Wh.getPinned();this.eventDispatcher.columnPinned(I(Lu),e);const qu=(Zh,Wh)=>Zh.hide==Wh.isVisible();this.eventDispatcher.columnVisible(I(qu),e);const Vh=I((Zh,Wh)=>Zh.sort!=Wh.getSort()||Zh.sortIndex!=Wh.getSortIndex());Vh.length>0&&this.sortController.dispatchSortChangedEvents(e,Vh),this.normaliseColumnMovedEventForColumnState(r,e)}}normaliseColumnMovedEventForColumnState(e,t){const r=this.columnGetStateService.getColumnState(),i={};r.forEach(jt=>i[jt.colId]=jt);const o={};e.forEach(jt=>{i[jt.colId]&&(o[jt.colId]=!0)});const p=e.filter(jt=>o[jt.colId]),I=r.filter(jt=>o[jt.colId]),K=[];I.forEach((jt,Gl)=>{const Fu=p&&p[Gl];if(Fu&&Fu.colId!==jt.colId){const Lu=this.columnModel.getCol(Fu.colId);Lu&&K.push(Lu)}}),K.length&&this.eventDispatcher.columnMoved({movedColumns:K,source:t,finished:!0})}},Fd=(e,t,r,i)=>{const o=e[r.getId()],p=e[i.getId()],I=o!=null,K=p!=null;if(I&&K)return o-p;if(I)return-1;if(K)return 1;const jt=t.indexOf(r),Gl=t.indexOf(i),Fu=jt>=0,Lu=Gl>=0;return Fu&&Lu?jt-Gl:Fu?-1:1},Ud=class extends Rh{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,r){const i=this.columnModel.getCols();if(!i)return;const o=i[e];this.moveColumns([o],t,r)}moveColumns(e,t,r,i=!0){const o=this.columnModel.getCols();if(!o)return;if(t>o.length-e.length){rl("tried to insert columns in invalid location, toIndex = ",t),rl("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();const p=this.columnModel.getColsForKeys(e);this.doesMovePassRules(p,t)&&(this.columnModel.moveInCols(p,t,r),this.eventDispatcher.columnMoved({movedColumns:p,source:r,toIndex:t,finished:i})),this.columnAnimationService.finish()}doesMovePassRules(e,t){const r=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(r)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const i=this.columnModel.getCols().slice();return lg(i,e,t),i}doesMovePassLockedPositions(e){const t=p=>p?p==="left"||p===!0?-1:1:0,r=this.gos.get("enableRtl");let i=r?1:-1,o=!0;return e.forEach(p=>{const I=t(p.getColDef().lockPosition);r?I>i&&(o=!1):I<i&&(o=!1),i=I}),o}doesMovePassMarryChildren(e){let t=!0;const r=this.columnModel.getColTree();return Zu(null,r,i=>{if(!xf(i))return;const o=i,p=o.getColGroupDef();if(!(p&&p.marryChildren))return;const K=[];o.getLeafColumns().forEach(qu=>{const Xd=e.indexOf(qu);K.push(Xd)});const jt=Math.max.apply(Math,K),Gl=Math.min.apply(Math,K),Fu=jt-Gl,Lu=o.getLeafColumns().length-1;Fu>Lu&&(t=!1)}),t}placeLockedColumns(e){const t=[],r=[],i=[];return e.forEach(p=>{const I=p.getColDef().lockPosition;I==="right"?i.push(p):I==="left"||I===!0?t.push(p):r.push(p)}),this.gos.get("enableRtl")?[...i,...r,...t]:[...t,...r,...i]}},eh=/[&<>"']/g,Sh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Lh(e){const t=String.fromCharCode;function r(Lu){const qu=[];if(!Lu)return[];const Xd=Lu.length;let Vh=0,Zh,Wh;for(;Vh<Xd;)Zh=Lu.charCodeAt(Vh++),Zh>=55296&&Zh<=56319&&Vh<Xd?(Wh=Lu.charCodeAt(Vh++),(Wh&64512)==56320?qu.push(((Zh&1023)<<10)+(Wh&1023)+65536):(qu.push(Zh),Vh--)):qu.push(Zh);return qu}function i(Lu){if(Lu>=55296&&Lu<=57343)throw Error("Lone surrogate U+"+Lu.toString(16).toUpperCase()+" is not a scalar value")}function o(Lu,qu){return t(Lu>>qu&63|128)}function p(Lu){if((Lu&4294967168)==0)return t(Lu);let qu="";return(Lu&4294965248)==0?qu=t(Lu>>6&31|192):(Lu&4294901760)==0?(i(Lu),qu=t(Lu>>12&15|224),qu+=o(Lu,6)):(Lu&4292870144)==0&&(qu=t(Lu>>18&7|240),qu+=o(Lu,12),qu+=o(Lu,6)),qu+=t(Lu&63|128),qu}const I=r(e),K=I.length;let jt=-1,Gl,Fu="";for(;++jt<K;)Gl=I[jt],Fu+=p(Gl);return Fu}function Ah(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()}function yh(e,t){if(e==null)return null;const r=e.toString().toString();return t?r:r.replace(eh,i=>Sh[i])}function Nh(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,r=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(r,"$1 $2$3").replace(/\./g," ").split(" ").map(o=>o.substring(0,1).toUpperCase()+(o.length>1?o.substring(1,o.length):"")).join(" ")}function sh(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var Th=class extends Rh{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,r=!1){if(!e)return null;const i=this.getHeaderName(e.getColDef(),e,null,null,t);return r?this.wrapHeaderNameWithAggFunc(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,r){const i=t?t.getColGroupDef():null;return i?this.getHeaderName(i,null,e,t,r):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,r,i,o){const p=e.headerValueGetter;if(p){const I=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:r,providedColumnGroup:i,location:o});return typeof p=="function"?p(I):typeof p=="string"?this.expressionService.evaluate(p,I):(rl("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return Nh(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const r=e.getColDef().pivotValueColumn,i=pd(r);let o=null,p;if(i){const I=this.funcColsService.getValueColumns(),K=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&I.length===1,jt=e.getColDef().pivotTotalColumnIds!==void 0;if(K&&!jt)return t;o=r?r.getAggFunc():null,p=!0}else{const I=e.isValueActive(),K=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();I&&K?(o=e.getAggFunc(),p=!0):p=!1}if(p){const I=typeof o=="string"?o:"func";return`${this.localeService.getLocaleTextFunc()(I,I)}(${t})`}return t}},dp=class extends Rh{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){Kg(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;const r=this.columnModel.getColDefCol(t);let i=null;return this.pivotResultCols.list.forEach(o=>{const p=o.getColDef().pivotKeys,I=o.getColDef().pivotValueColumn;Gm(p,e)&&I===r&&(i=o)}),i}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);const r=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);Kg(this.context,this.pivotResultCols?.tree,r.columnTree);const i=r.columnTree,o=r.treeDept,p=Yg(i),I={};this.pivotResultCols={tree:i,treeDepth:o,list:p,map:I},this.pivotResultCols.list.forEach(jt=>this.pivotResultCols.map[jt.getId()]=jt);const K=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!K)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),r=this.gos.get("processPivotResultColGroupDef");if(!t&&!r)return;const i=o=>{o.forEach(p=>{if(pd(p.children)){const K=p;r&&r(K),i(K.children)}else t&&t(p)})};e&&i(e)}},$h=class extends Rh{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,r,i){const o=[];e.forEach(p=>{const I=this.columnModel.getColDefCol(p.key)||this.columnModel.getCol(p.key);if(!I)return;if(o.push({width:p.newWidth,ratios:[1],columns:[I]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){const jt=this.visibleColsService.getColAfter(I);if(!jt)return;const Gl=I.getActualWidth()-p.newWidth,Fu=jt.getActualWidth()+Gl;o.push({width:Fu,ratios:[1],columns:[jt]})}}),o.length!==0&&this.resizeColumnSets({resizeSets:o,finished:r,source:i})}resizeColumnSets(e){const{resizeSets:t,finished:r,source:i}=e;if(!(!t||t.every(Fu=>this.checkMinAndMaxWidthsForSet(Fu)))){if(r){const Fu=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(Fu,r,i)}return}const p=[],I=[];t.forEach(Fu=>{const{width:Lu,columns:qu,ratios:Xd}=Fu,Vh={},Zh={};qu.forEach(Tp=>I.push(Tp));let Wh=!0,Rp=0;for(;Wh;){if(Rp++,Rp>1e3){Ml("infinite loop in resizeColumnSets");break}Wh=!1;const Tp=[];let Mp=0,Of=Lu;qu.forEach((Jf,sg)=>{if(Zh[Jf.getId()])Of-=Vh[Jf.getId()];else{Tp.push(Jf);const Um=Xd[sg];Mp+=Um}});const zg=1/Mp;Tp.forEach((Jf,sg)=>{const mm=sg===Tp.length-1;let Um;mm?Um=Of:(Um=Math.round(Xd[sg]*Lu*zg),Of-=Um);const _3=Jf.getMinWidth(),Dy=Jf.getMaxWidth();Um<_3?(Um=_3,Zh[Jf.getId()]=!0,Wh=!0):Dy>0&&Um>Dy&&(Um=Dy,Zh[Jf.getId()]=!0,Wh=!0),Vh[Jf.getId()]=Um})}qu.forEach(Tp=>{const Mp=Vh[Tp.getId()];Tp.getActualWidth()!==Mp&&(Tp.setActualWidth(Mp,i),p.push(Tp))})});const K=p.length>0;let jt=[];K&&(jt=this.refreshFlexedColumns({resizingCols:I,skipSetLeft:!0}),this.visibleColsService.setLeftValues(i),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const Gl=I.concat(jt);(K||r)&&this.eventDispatcher.columnResized(Gl,r,i,jt)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:r}=e;let i=0,o=0,p=!0;t.forEach(jt=>{const Gl=jt.getMinWidth();i+=Gl||0;const Fu=jt.getMaxWidth();Fu>0?o+=Fu:p=!1});const I=r>=i,K=!p||r<=o;return I&&K}refreshFlexedColumns(e={}){const t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const r=this.visibleColsService.getCenterCols();let i=-1;if(e.resizingCols){const qu=new Set(e.resizingCols);for(let Xd=r.length-1;Xd>=0;Xd--)if(qu.has(r[Xd])){i=Xd;break}}let o=0,p=[],I=0,K=0;for(let qu=0;qu<r.length;qu++)r[qu].getFlex()&&qu>i?(p.push(r[qu]),K+=r[qu].getFlex(),I+=r[qu].getMinWidth()):o+=r[qu].getActualWidth();if(!p.length)return[];let jt=[];o+I>this.flexViewportWidth&&(p.forEach(qu=>qu.setActualWidth(qu.getMinWidth(),t)),jt=p,p=[]);const Gl=[];let Fu;e:for(;;){Fu=this.flexViewportWidth-o;const qu=Fu/K;for(let Xd=0;Xd<p.length;Xd++){const Vh=p[Xd],Zh=qu*Vh.getFlex();let Wh=0;const Rp=Vh.getMinWidth(),Tp=Vh.getMaxWidth();if(Zh<Rp?Wh=Rp:Zh>Tp&&(Wh=Tp),Wh){Vh.setActualWidth(Wh,t),Vm(p,Vh),K-=Vh.getFlex(),jt.push(Vh),o+=Vh.getActualWidth();continue e}Gl[Xd]=Math.floor(Zh)}break}let Lu=Fu;return p.forEach((qu,Xd)=>{const Vh=Xd<p.length-1?Math.min(Gl[Xd],Lu):Math.max(Gl[Xd],Lu);qu.setActualWidth(Vh,t),jt.push(qu),Lu-=Gl[Xd]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(jt,!0,t,p),p}sizeColumnsToFit(e,t="sizeColumnsToFit",r,i){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,r,i));return}const o={};i&&i?.columnLimits?.forEach(({key:qu,...Xd})=>{o[typeof qu=="string"?qu:qu.getColId()]=Xd});const p=this.visibleColsService.getAllCols(),I=e===$f(p);if(e<=0||!p.length||I)return;const K=[],jt=[];p.forEach(qu=>{qu.getColDef().suppressSizeToFit===!0?jt.push(qu):K.push(qu)});const Gl=K.slice(0);let Fu=!1;const Lu=qu=>{ym(K,qu),jt.push(qu)};for(K.forEach(qu=>{qu.resetActualWidth(t);const Xd=o?.[qu.getId()],Vh=Xd?.minWidth??i?.defaultMinWidth,Zh=Xd?.maxWidth??i?.defaultMaxWidth,Wh=qu.getActualWidth();typeof Vh=="number"&&Wh<Vh?qu.setActualWidth(Vh,t,!0):typeof Zh=="number"&&Wh>Zh&&qu.setActualWidth(Zh,t,!0)});!Fu;){Fu=!0;const qu=e-$f(jt);if(qu<=0)K.forEach(Xd=>{const Vh=o?.[Xd.getId()]?.minWidth??i?.defaultMinWidth;if(typeof Vh=="number"){Xd.setActualWidth(Vh,t,!0);return}Xd.setMinimum(t)});else{const Xd=qu/$f(K);let Vh=qu;for(let Zh=K.length-1;Zh>=0;Zh--){const Wh=K[Zh],Rp=o?.[Wh.getId()],Tp=Rp?.minWidth??i?.defaultMinWidth,Mp=Rp?.maxWidth??i?.defaultMaxWidth,Of=Wh.getMinWidth(),zg=Wh.getMaxWidth(),Jf=typeof Tp=="number"&&Tp>Of?Tp:Of,sg=typeof Mp=="number"&&Mp<zg?Mp:zg;let mm=Math.round(Wh.getActualWidth()*Xd);mm<Jf?(mm=Jf,Lu(Wh),Fu=!1):mm>sg?(mm=sg,Lu(Wh),Fu=!1):Zh===0&&(mm=Vh),Wh.setActualWidth(mm,t,!0),Vh-=mm}}}Gl.forEach(qu=>{qu.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!r&&this.eventDispatcher.columnResized(Gl,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:r,defaultMinWidth:i,defaultMaxWidth:o}=e,p=r?.map(({colId:I,minWidth:K,maxWidth:jt})=>({key:I,minWidth:K,maxWidth:jt}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:o,columnLimits:p})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function ap(e,t){return e+"_"+t}function Yh(e){return e instanceof Mh}var Mh=class extends Rh{constructor(e,t,r,i){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=r,this.providedColumnGroup=e,this.pinned=i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return ap(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{Yh(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=wf(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Xl(t)?e.push(t):Yh(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Xl(t)?e.push(t):Yh(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(r=>{if(Yh(r)&&(!r.displayedChildren||!r.displayedChildren.length))return;switch(r.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(r);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(r);break;default:this.displayedChildren.push(r);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},pp=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let r;return typeof t!="number"?r=0:r=t+1,this.existingIds[e]=r,r}},Ip=class extends Rh{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=Xh(this.treeLeft),this.columnsCenter=Xh(this.treeCenter),this.columnsRight=Xh(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(r=>r.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){const e=$f(this.columnsCenter),t=$f(this.columnsLeft),r=$f(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==r)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=r,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,r;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,r=this.columnsRight?wf(this.columnsRight):null):(t=this.columnsLeft?wf(this.columnsLeft):null,r=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(i=>{i.setLastLeftPinned(i===t,e),i.setFirstRightPinned(i===r,e)})}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter(p=>p.getPinned()=="left"),r=e.filter(p=>p.getPinned()=="right"),i=e.filter(p=>p.getPinned()!="left"&&p.getPinned()!="right"),o=new pp;this.treeLeft=this.createGroups({columns:t,idCreator:o,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:r,idCreator:o,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:i,idCreator:o,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],r=[],i=[];for(const o of e){const p=o.getPinned();p?p===!0||p==="left"?t.push(o):i.push(o):r.push(o)}this.ariaOrderColumns=t.concat(r).concat(i)}getAriaColIndex(e){let t;return Yh(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{Yh(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const r=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(o=>{if(i){let p=$f(o);o.forEach(I=>{p-=I.getActualWidth(),I.setLeft(p,e)})}else{let p=0;o.forEach(I=>{I.setLeft(p,e),p+=I.getActualWidth()})}l0(r,o)}),r.forEach(o=>{o.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,r,i){const o=[];let p=null;for(let I=0;I<t.length;I++){const K=t[I],jt=t.length-I,Gl=Math.min(K.getColSpan(e),jt),Fu=[K];if(Gl>1){const qu=Gl-1;for(let Xd=1;Xd<=qu;Xd++)Fu.push(t[I+Xd]);I+=qu}let Lu;r?(Lu=!1,Fu.forEach(qu=>{r(qu)&&(Lu=!0)})):Lu=!0,Lu&&(o.length===0&&p&&(i&&i(K))&&o.push(p),o.push(K)),p=K}return o}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),r=t.indexOf(e);return r>0?t[r-1]:null}getGroupAtDirection(e,t){const r=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),o=t==="After"?wf(i):i[0],p=`getCol${t}`;for(;;){const I=this[p](o);if(!I)return null;const K=this.getColGroupAtLevel(I,r);if(K!==e)return K}}getColGroupAtLevel(e,t){let r=e.getParent(),i,o;for(;i=r.getProvidedColumnGroup().getLevel(),o=r.getPaddingLevel(),!(i+o<=t);)r=r.getParent();return r}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};gp(this.treeCenter,!1,e),gp(this.treeLeft,!1,e),gp(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllTrees();gp(e,!1,t=>{Yh(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let r=0;r<t.length;r++){const i=this[t[r]]();if(i.length)return e?wf(i):i[0]}return null}getColumnGroup(e,t){if(!e)return null;if(Yh(e))return e;const r=this.getAllTrees(),i=typeof t=="number";let o=null;return gp(r,!1,p=>{if(Yh(p)){const I=p;let K;i?K=e===I.getGroupId()&&t===I.getPartId():K=e===I.getGroupId(),K&&(o=I)}}),o}getColAfter(e){const t=this.getAllCols(),r=t.indexOf(e);return r<t.length-1?t[r+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return $f(this.columnsLeft)}getDisplayedColumnsRightWidth(){return $f(this.columnsRight)}isColAtEdge(e,t){const r=this.getAllCols();if(!r.length)return!1;const i=t==="first";let o;if(Yh(e)){const p=e.getDisplayedLeafColumns();if(!p.length)return!1;o=i?p[0]:wf(p)}else o=e;return(i?r[0]:wf(r))===o}createGroups(e){const{columns:t,idCreator:r,pinned:i,oldDisplayedGroups:o,isStandaloneStructure:p}=e,I=this.mapOldGroupsById(o),K=[];let jt=t;for(;jt.length;){const Gl=jt;jt=[];let Fu=0;const Lu=qu=>{const Xd=Fu;Fu=qu;const Vh=Gl[Xd],Wh=(Yh(Vh)?Vh.getProvidedColumnGroup():Vh).getOriginalParent();if(Wh==null){for(let Tp=Xd;Tp<qu;Tp++)K.push(Gl[Tp]);return}const Rp=this.createColGroup(Wh,r,I,i,p);for(let Tp=Xd;Tp<qu;Tp++)Rp.addChild(Gl[Tp]);jt.push(Rp)};for(let qu=1;qu<Gl.length;qu++){const Xd=Gl[qu],Zh=(Yh(Xd)?Xd.getProvidedColumnGroup():Xd).getOriginalParent(),Wh=Gl[Fu],Tp=(Yh(Wh)?Wh.getProvidedColumnGroup():Wh).getOriginalParent();Zh!==Tp&&Lu(qu)}Fu<Gl.length&&Lu(Gl.length)}return p||this.setupParentsIntoCols(K,null),K}createColGroup(e,t,r,i,o){const p=e.getGroupId(),I=t.getInstanceIdForKey(p),K=ap(p,I);let jt=r[K];return jt&&jt.getProvidedColumnGroup()!==e&&(jt=null),pd(jt)?jt.reset():(jt=new Mh(e,p,I,i),o||this.createBean(jt)),jt}mapOldGroupsById(e){const t={},r=i=>{i.forEach(o=>{if(Yh(o)){const p=o;t[o.getUniqueId()]=p,r(p.getChildren())}})};return e&&r(e),t}setupParentsIntoCols(e,t){e.forEach(r=>{if(r.setParent(t),Yh(r)){const i=r;this.setupParentsIntoCols(i.getChildren(),i)}})}};function gp(e,t,r){if(e)for(let i=0;i<e.length;i++){const o=e[i];if(Yh(o)){const p=t?o.getDisplayedChildren():o.getChildren();gp(p,t,r)}r(o)}}function Xh(e){const t=[];return gp(e,!0,r=>{Xl(r)&&t.push(r)}),t}var Qp=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],Wp=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],$p=[...Qp,...Wp],Hp={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},Vp=class{};Vp.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"],Vp.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"],Vp.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],Vp.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],Vp.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],Vp.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"],Vp.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"],Vp.ALL_PROPERTIES=[...Vp.ARRAY_PROPERTIES,...Vp.OBJECT_PROPERTIES,...Vp.STRING_PROPERTIES,...Vp.NUMBER_PROPERTIES,...Vp.FUNCTION_PROPERTIES,...Vp.BOOLEAN_PROPERTIES,...Vp.OTHER_PROPERTIES];var Op=Vp,Jp=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};Jp.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",Jp.PUBLIC_EVENTS=Qp,Jp.EVENT_CALLBACKS=$p.map(e=>Jp.getCallbackForEvent(e)),Jp.BOOLEAN_PROPERTIES=Op.BOOLEAN_PROPERTIES,Jp.ALL_PROPERTIES=Op.ALL_PROPERTIES,Jp.ALL_PROPERTIES_AND_CALLBACKS=[...Jp.ALL_PROPERTIES,...Jp.EVENT_CALLBACKS],Jp.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Jp.ALL_PROPERTIES_AND_CALLBACKS);var Df=Jp;function tm(e,t){typeof e!="object"&&(e={});const r={...e};return Df.ALL_PROPERTIES_AND_CALLBACKS.forEach(o=>{const p=t[o];typeof p<"u"&&p!==Df.VUE_OMITTED_PROPERTY&&(r[o]=p)}),r}function og(e,t){if(!e)return;const r={};let i=!1;if(Object.keys(e).filter(I=>Df.ALL_PROPERTIES_AND_CALLBACKS_SET.has(I)).forEach(I=>{r[I]=e[I],i=!0}),!i)return;const o={type:"gridOptionsChanged",options:r};t.dispatchEvent(o);const p={type:"componentStateChanged"};W(r,(I,K)=>{p[I]=K}),t.dispatchEvent(p)}var tg=class extends Rh{};function Zf(e,t,r){return r&&e.addDestroyFunc(()=>t.destroyBean(r)),r??e}var Xf=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.addCssClass(i));return}if(this.cssClassStates[e]!==!0&&e.length){const i=this.getGui();i&&i.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.removeCssClass(i));return}if(this.cssClassStates[e]!==!1&&e.length){const i=this.getGui();i&&i.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1){i.forEach(o=>this.addOrRemoveCssClass(o,t));return}}if(this.cssClassStates[e]!==t&&e.length){const i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}};function Nf(e,t,r){r==null||typeof r=="string"&&r==""?vg(e,t):ag(e,t,r)}function ag(e,t,r){e.setAttribute(Pg(t),r.toString())}function vg(e,t){e.removeAttribute(Pg(t))}function Pg(e){return`aria-${e}`}function cg(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function kg(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function Bf(e){return parseInt(e.getAttribute("aria-posinset"),10)}function Tg(e){return e.getAttribute("aria-label")}function gg(e,t){Nf(e,"label",t)}function ve(e,t){Nf(e,"labelledby",t)}function zu(e,t){Nf(e,"describedby",t)}function el(e,t){Nf(e,"live",t)}function Bd(e,t){Nf(e,"atomic",t)}function Od(e,t){Nf(e,"relevant",t)}function Md(e,t){Nf(e,"level",t)}function jh(e,t){Nf(e,"disabled",t)}function ch(e,t){Nf(e,"hidden",t)}function Dp(e,t){Nf(e,"activedescendant",t)}function Ch(e,t){ag(e,"expanded",t)}function tp(e){vg(e,"expanded")}function bg(e,t){ag(e,"setsize",t)}function Ff(e,t){ag(e,"posinset",t)}function zp(e,t){ag(e,"multiselectable",t)}function Om(e,t){ag(e,"rowcount",t)}function Zg(e,t){ag(e,"rowindex",t)}function Qf(e,t){ag(e,"colcount",t)}function hm(e,t){ag(e,"colindex",t)}function mg(e,t){ag(e,"colspan",t)}function Np(e,t){ag(e,"sort",t)}function jf(e){vg(e,"sort")}function rm(e,t){Nf(e,"selected",t)}function Sf(e,t){ag(e,"checked",t===void 0?"mixed":t)}function lm(e,t){Nf(e,"controls",t.id),ve(t,e.id)}function Sg(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}function pg(e,t,r){const i=e.parentElement;let o=i&&i.firstChild;for(;o;)t&&o.classList.toggle(t,o===e),r&&o.classList.toggle(r,o!==e),o=o.nextSibling}var Bg="[tabindex], input, select, button, textarea, [href]",v0="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function nv(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),o=t.call(e,v0),p=k0(e);return i&&!o&&p}function Cm(e,t,r={}){const{skipAriaHidden:i}=r;e.classList.toggle("ag-hidden",!t),i||ch(e,!t)}function _v(e,t,r={}){const{skipAriaHidden:i}=r;e.classList.toggle("ag-invisible",!t),i||ch(e,!t)}function ov(e,t){const r="disabled",i=t?o=>o.setAttribute(r,""):o=>o.removeAttribute(r);i(e),A1(e.querySelectorAll("input"),o=>i(o))}function H0(e,t,r){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof r=="number"){if(++i>r)break}else if(e===r)break}return!1}function av(e){const{height:t,width:r,borderTopWidth:i,borderRightWidth:o,borderBottomWidth:p,borderLeftWidth:I,paddingTop:K,paddingRight:jt,paddingBottom:Gl,paddingLeft:Fu,marginTop:Lu,marginRight:qu,marginBottom:Xd,marginLeft:Vh,boxSizing:Zh}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(r||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(o||"0"),borderBottomWidth:parseFloat(p||"0"),borderLeftWidth:parseFloat(I||"0"),paddingTop:parseFloat(K||"0"),paddingRight:parseFloat(jt||"0"),paddingBottom:parseFloat(Gl||"0"),paddingLeft:parseFloat(Fu||"0"),marginTop:parseFloat(Lu||"0"),marginRight:parseFloat(qu||"0"),marginBottom:parseFloat(Xd||"0"),marginLeft:parseFloat(Vh||"0"),boxSizing:Zh}}function Ly(e){const t=av(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function zv(e){const t=av(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function S1(e){const{height:t,marginBottom:r,marginTop:i}=av(e);return Math.floor(t+r+i)}function Ev(e){const{width:t,marginLeft:r,marginRight:i}=av(e);return Math.floor(t+r+i)}function Iy(e){const t=e.getBoundingClientRect(),{borderTopWidth:r,borderLeftWidth:i,borderRightWidth:o,borderBottomWidth:p}=av(e);return{top:t.top+(r||0),left:t.left+(i||0),right:t.right+(o||0),bottom:t.bottom+(p||0)}}function h1(e,t){let r=e.scrollLeft;return t&&(r=Math.abs(r)),r}function W1(e,t,r){r&&(t*=-1),e.scrollLeft=t}function _0(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function sv(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function g2(e){return!!e.offsetParent}function k0(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!g2(e)||window.getComputedStyle(e).visibility!=="visible")}function e1(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function Oy(e,t,r){r&&r.nextSibling===t||(e.firstChild?r?r.nextSibling?e.insertBefore(t,r.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))}function m2(e,t){for(let r=0;r<t.length;r++){const i=t[r],o=e.children[r];o!==i&&e.insertBefore(i,o)}}function lv(e,t){if(t)for(const[r,i]of Object.entries(t)){if(!r||!r.length||i==null)continue;const o=sh(r),p=i.toString(),I=p.replace(/\s*!important/g,""),K=I.length!=p.length?"important":void 0;e.style.setProperty(o,I,K)}}function $1(e){return e.clientWidth<e.scrollWidth}function v2(e){return e.clientHeight<e.scrollHeight}function q1(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Q0(e,t)}function Q0(e,t){t=_1(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function p1(e,t){t=_1(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function _1(e){return typeof e=="number"?`${e}px`:e}function zy(e){return e instanceof Node||e instanceof HTMLElement}function E3(e){if(e==null)return[];const t=[];return A1(e,r=>t.push(r)),t}function E1(e,t){if(e)for(let r=0;r<e.length;r++){const i=e[r];t(i.name,i.value)}}function U0(e,t,r){r==null||r===""?e.removeAttribute(t):e.setAttribute(t,r.toString())}function A1(e,t){if(e!=null)for(let r=0;r<e.length;r++)t(e[r])}function y2(e,t){e.then(r=>{const i=r.getGui();i!=null&&(typeof i=="object"?t.appendChild(i):t.innerHTML=i)})}var t1=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},f1,Nv,Y1,K1,M1,Z1,X1,Q1,Ny;function mv(){return f1===void 0&&(f1=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),f1}function x2(){if(Nv===void 0)if(mv()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(Nv=e[1]!=null?parseFloat(e[1]):0)}else Nv=0;return Nv}function r1(){if(Y1===void 0){const e=window;Y1=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Y1}function J1(){return K1===void 0&&(K1=/(firefox)/i.test(navigator.userAgent)),K1}function By(){return M1===void 0&&(M1=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),M1}function Av(){return Z1===void 0&&(Z1=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Z1}function w2(){return!mv()||x2()>=15}function i1(e){if(!e)return null;const t=e.tabIndex,r=e.getAttribute("tabIndex");return t===-1&&(r===null||r===""&&!J1())?null:t.toString()}function A3(){if(Ny!==void 0)return Ny;if(!document.body)return-1;let e=1e6;const t=J1()?6e6:1e9,r=document.createElement("div");for(document.body.appendChild(r);;){const i=e*2;if(r.style.height=i+"px",i>t||r.clientHeight!==i)break;e=i}return document.body.removeChild(r),Ny=e,e}function V2(){return document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1)}function j2(){return document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1)}function Qm(){return Q1==null&&Hy(),Q1}function Hy(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let r=t.offsetWidth-t.clientWidth;r===0&&t.clientWidth===0&&(r=null),t.parentNode&&t.parentNode.removeChild(t),r!=null&&(Q1=r,X1=r===0)}function ey(){return X1==null&&Hy(),X1}var ty=1e3,C2=1e3,ry=100,R1=class H2 extends Rh{constructor(t,r,i,o){super(),this.parentComp=t,this.tooltipShowDelayOverride=r,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=o,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){const r=this.gos.get(t);return r<0&&rl(`${t} should not be lower than 0`),Math.max(200,r)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Av()&&(H2.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},ry):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){const r=t.relatedTarget,i=this.parentComp.getGui(),o=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(r)||this.interactionEnabled&&o?.contains(r)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||H2.isLocked)return;let r=0;t&&(r=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),r),this.state=1}isLastTooltipHiddenRecently(){const t=new Date().getTime(),r=H2.lastTooltipHideTime;return t-r<ty}setToDoNothing(t){!t&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const t={...this.parentComp.getTooltipParams()};if(!pd(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const r=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(r)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),H2.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(t,r){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(r);return}const o=r.getGui();this.tooltipComp=r,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&o.classList.add("ag-tooltip-animate"),this.interactionEnabled&&o.classList.add("ag-tooltip-interactive");const p=this.localeService.getLocaleTextFunc(),I=this.popupService.addPopup({eChild:o,ariaLabel:p("ariaLabelTooltip","Tooltip")});if(I&&(this.tooltipPopupDestroyFunc=I.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const K=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:K,columnMoved:K})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(o,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(kf(this.gos),{keydown:K=>{o.contains(K?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(o,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:o,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const t=this.tooltipComp?.getGui(),r=Hf(this.gos);return!!t&&t.contains(r)}onTooltipFocusOut(t){const r=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,r.contains(t.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...t,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...t,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc,r=this.tooltipComp,i=this.tooltipTrigger===0?C2:0;window.setTimeout(()=>{t(),this.destroyBean(r)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){H2.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},ry)}unlockService(){H2.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};R1.isLocked=!1;var iy=R1,W0=class extends Rh{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",r=this.ctrl.getGui();r&&(e!=null&&e!=""?r.setAttribute(t,e):r.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.tooltipManager!=null)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new iy(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?.(),r=e.getColDef?.(),i=e.getRowNode?.();return{location:e.getLocation(),colDef:r,column:t,rowIndex:e.getRowIndex?.(),node:i,data:i?.data,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?.(),hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},U2=new t1,Cf=null,cm=class cb extends Rh{constructor(t,r){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=U2.next(),this.cssClassManager=new Xf(()=>this.eGui),this.componentSelectors=new Map((r??[]).map(i=>[i.selector,i])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,r){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,r))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){const{newTooltipText:r,showDelayOverride:i,hideDelayOverride:o,location:p,shouldDisplayTooltip:I}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==r&&(this.tooltipText=r);const K=()=>this.tooltipText;r!=null&&(this.tooltipFeature=this.createBean(new W0({getTooltipValue:K,getGui:()=>this.getGui(),getLocation:()=>p??"UNKNOWN",getColDef:t?.getColDef,getColumn:t?.getColumn,getTooltipShowDelayOverride:i!=null?()=>i:void 0,getTooltipHideDelayOverride:o!=null?()=>o:void 0,shouldDisplayTooltip:I})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,r,i,o=null){if(r===void 0&&(r=this.getDataRefAttribute(t)),r){const p=this[r];if(p===Cf)this[r]=o??t;else{const I=i&&i[r];!this.suppressDataRefValidation&&!I&&rl(`Issue with data-ref: ${r} on ${this.constructor.name} with ${p}`)}}}createChildComponentsFromTags(t,r){E3(t.childNodes).forEach(o=>{if(!(o instanceof HTMLElement))return;const p=this.createComponentFromElement(o,I=>{I.getGui()&&this.copyAttributesFromNode(o,I.getGui())},r);if(p){if(p.addItems&&o.children.length){this.createChildComponentsFromTags(o,r);const I=Array.prototype.slice.call(o.children);p.addItems(I)}this.swapComponentForNode(p,t,o)}else o.childNodes&&this.createChildComponentsFromTags(o,r)})}createComponentFromElement(t,r,i){const o=t.nodeName,p=this.getDataRefAttribute(t),I=o.indexOf("AG-")===0,K=I?this.componentSelectors.get(o):null;let jt=null;if(K){cb.elementGettingCreated=t;const Gl=i&&p?i[p]:void 0;jt=new K.component(Gl),jt.setParentComponent(this),this.createBean(jt,null,r)}else I&&rl(`Missing selector: ${o}`);return this.applyElementsToComponent(t,p,i,jt),jt}copyAttributesFromNode(t,r){E1(t.attributes,(i,o)=>r.setAttribute(i,o))}swapComponentForNode(t,r,i){const o=t.getGui();r.replaceChild(o,i),r.insertBefore(document.createComment(i.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){const r=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(i=>i.setAttribute("tabindex",r.toString()))}setTemplate(t,r,i){const o=e1(t);this.setTemplateFromElement(o,r,i)}setTemplateFromElement(t,r,i,o=!1){if(this.eGui=t,this.suppressDataRefValidation=o,r)for(let p=0;p<r.length;p++){const I=r[p];this.componentSelectors.set(I.selector,I)}this.wireTemplate(t,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,r){let i=r;return t==null?null:(i||(i=this.eGui),zy(t)?{element:t,parent:i}:{element:t.getGui(),parent:i})}prependChild(t,r){const{element:i,parent:o}=this.getContainerAndElement(t,r)||{};!i||!o||o.insertAdjacentElement("afterbegin",i)}appendChild(t,r){const{element:i,parent:o}=this.getContainerAndElement(t,r)||{};!i||!o||o.appendChild(i)}isDisplayed(){return this.displayed}setVisible(t,r={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:i}=r;_v(this.eGui,t,{skipAriaHidden:i})}}setDisplayed(t,r={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:i}=r;Cm(this.eGui,t,{skipAriaHidden:i});const o={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(o)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,r,i){this.eGui.addEventListener(t,r,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,r))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,r){this.cssClassManager.addOrRemoveCssClass(t,r)}},b2={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},ny=(()=>{const e=new Set(Object.values(b2));return e.add("eye"),e})();function oy(e,t,r){const i=D0(e,t,r);if(i){const{className:p}=i;if(typeof p=="string"&&p.indexOf("ag-icon")>-1||typeof p=="object"&&p["ag-icon"])return i}const o=document.createElement("span");return o.appendChild(i),o}function D0(e,t,r,i){let o=null;const p=r&&r.getColDef().icons;if(p&&(o=p[e]),t&&!o){const I=t.get("icons");I&&(o=I[e])}if(o){let I;if(typeof o=="function")I=o();else if(typeof o=="string")I=o;else throw new Error("icon from grid options needs to be a string or a function");if(typeof I=="string")return e1(I);if(zy(I))return I;rl("iconRenderer should return back a string or a dom object")}else{const I=document.createElement("span");let K=b2[e]??(ny.has(e)?e:void 0);return K||(i?K=e:(rl(`Did not find icon ${e}`),K="")),I.setAttribute("class",`ag-icon ag-icon-${K}`),I.setAttribute("unselectable","on"),cg(I,"presentation"),I}}var S2=class extends cm{constructor(){super(...arguments),this.dragSource=null,this.eIcon=Cf,this.eLabel=Cf}postConstruct(){const e=t=>oy(t,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){_0(this.eIcon);let r=null;e||(e=this.dragSource?.getDefaultIconName?this.dragSource?.getDefaultIconName():"notAllowed"),r=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),!(r===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&r&&this.eIcon.appendChild(r)}setLabel(e){this.eLabel.textContent=yh(e)}};function Gy(e,t,r){if(r===0)return!1;const i=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY);return Math.max(i,o)<=r}var J0=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new Y,this.eElement=e,this.preventMouseClick=t;const r=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),o=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",r,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",o,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",r,{passive:!0}),this.eElement.removeEventListener("touchmove",i,{passive:!0}),this.eElement.removeEventListener("touchend",o,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const r=this.touchStart===t;if(this.touching&&r&&!this.moved){this.moved=!0;const i={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!Gy(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const r={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(r),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function ay(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var W2=`<span class="ag-sort-indicator-container">
        ${ay("Order","order")}
        ${ay("Asc","ascending-icon")}
        ${ay("Desc","descending-icon")}
        ${ay("Mixed","mixed-icon")}
        ${ay("None","none-icon")}
    </span>`,Vy=class extends cm{constructor(e){super(),this.eSortOrder=Cf,this.eSortAsc=Cf,this.eSortDesc=Cf,this.eSortMixed=Cf,this.eSortNone=Cf,e||this.setTemplate(W2)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,r,i,o){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=r,this.eSortMixed=i,this.eSortNone=o}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const r=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",r),this.addManagedEventListeners({newColumnsLoaded:r,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,r){if(t==null)return;const i=D0(e,this.gos,r);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t=e==="asc";Cm(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t=e==="desc";Cm(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),r=e==null;Cm(this.eSortNone,!t&&r,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;Wg(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Cm(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,r=e.some(o=>this.sortController.getDisplaySortIndexForColumn(o)??!1),i=t>=0&&r;Cm(this.eSortOrder,i,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():_0(this.eSortOrder)}},$2={selector:"AG-SORT-INDICATOR",component:Vy},_2=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,vv=class extends cm{constructor(){super(...arguments),this.eFilter=Cf,this.eFilterButton=Cf,this.eSortIndicator=Cf,this.eMenu=Cf,this.eLabel=Cf,this.eText=Cf,this.eSortOrder=Cf,this.eSortAsc=Cf,this.eSortDesc=Cf,this.eSortMixed=Cf,this.eSortNone=Cf,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??_2;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[$2]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=yh(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,r){if(t==null)return;const i=D0(e,this.gos,r);i&&t.appendChild(i)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new J0(this.getGui(),!0),r=this.shouldSuppressMenuHide(),i=r&&pd(this.eMenu),o=i?new J0(this.eMenu,!0):t;if(this.params.enableMenu){const p=i?"tap":"longTap",I=K=>this.params.showColumnMenuAfterMouseClick(K.touchStart);this.addManagedListeners(o,{[p]:I})}if(this.params.enableSorting){const p=I=>{const K=I.touchStart.target;r&&(this.eMenu?.contains(K)||this.eFilterButton?.contains(K))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:p})}if(this.params.enableFilterButton){const p=new J0(this.eFilterButton,!0);this.addManagedListeners(p,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>p.destroy())}this.addDestroyFunc(()=>t.destroy()),i&&this.addDestroyFunc(()=>o.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){sv(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,r=this.menuService.isLegacyMenuEnabled();if(e&&!r){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new Vy(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{const r=this.params.column.isMoving(),o=new Date().getTime()-this.lastMovingChanged<50;if(!(r||o)){const K=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(K)}}});const e=()=>{const t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){const o=!this.funcColsService.getSourceColumnsForGroupColumn(this.params.column)?.every(p=>this.params.column.getSort()==p.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",o)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,r){if(!e)return sv(t),!1;const i=this.params.column;return this.addInIcon("filter",t,i),this.addManagedListeners(i,{filterChanged:r}),r(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Cm(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},q2=class extends cm{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=Cf,this.agClosed=Cf,this.agLabel=Cf}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&rl("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=o=>{if(ph(o))return;const p=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),p,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=o=>{Eh(o)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const r=this.params.columnGroup.getProvidedColumnGroup(),i=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:i,expandableChanged:i})}addTouchAndClickListeners(e,t){const r=new J0(e,!0);this.addManagedListeners(r,{tap:t}),this.addDestroyFunc(()=>r.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();Cm(this.agOpened,t),Cm(this.agClosed,!t)}else Cm(this.agOpened,!1),Cm(this.agClosed,!1)}addInIcon(e,t){const r=D0(e,this.gos,null);r&&t.appendChild(r)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Cm(this.agOpened,!1),Cm(this.agClosed,!1);return}}setupLabel(){const{displayName:e,columnGroup:t}=this.params;if(pd(e)){const r=yh(e,!0);this.agLabel.textContent=r}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},k1="",Mv="",T1=class extends cm{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const r=document.createElement("span");r.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(r),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const r=Math.abs(t),i=e.formatValue(r),o=pd(i)?i:r,p=t>=0;p?this.eDelta.textContent=k1+o:this.eDelta.textContent=Mv+o,this.eDelta.classList.toggle("ag-value-change-delta-up",p),this.eDelta.classList.toggle("ag-value-change-delta-down",!p)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),_0(this.eDelta)}refresh(e,t=!1){const r=e.value;if(r===this.lastValue||(pd(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:pd(e.value)?this.eValue.textContent=r:_0(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof r=="number"&&typeof this.lastValue=="number"){const i=r-this.lastValue;this.showDelta(e,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=r,!0}},yv=class extends cm{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let r=e.value;return id(r)&&(r=""),r===this.lastValue||this.filterManager?.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=r,pd(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:pd(e.value)?this.eCurrent.textContent=r:_0(this.eCurrent),!0)}},np=class{};np.BACKSPACE="Backspace",np.TAB="Tab",np.ENTER="Enter",np.ESCAPE="Escape",np.SPACE=" ",np.LEFT="ArrowLeft",np.UP="ArrowUp",np.RIGHT="ArrowRight",np.DOWN="ArrowDown",np.DELETE="Delete",np.F2="F2",np.PAGE_UP="PageUp",np.PAGE_DOWN="PageDown",np.PAGE_HOME="Home",np.PAGE_END="End",np.A="KeyA",np.C="KeyC",np.D="KeyD",np.V="KeyV",np.X="KeyX",np.Y="KeyY",np.Z="KeyZ";var Y2=class extends cm{constructor(e,t,r){super(t,r),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:r,labelAlignment:i,disabled:o}=this.config;o!=null&&this.setDisabled(o),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),r!=null&&this.setLabelWidth(r),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){_0(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Cm(this.eLabel,!1),cg(this.eLabel,"presentation")):(Cm(this.eLabel,!0),cg(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const r=this.getGui().classList;return r.toggle("ag-label-align-left",e==="left"),r.toggle("ag-label-align-right",e==="right"),r.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(q1(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return ov(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},E2=class extends Y2{constructor(e,t,r,i){super(e,t,r),this.className=i}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:r}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),r!=null&&this.onValueChange(r),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),r=this.getLabel();r==null||r==""||Tg(e)!==null?ve(e,""):ve(e,t??"")}setAriaLabel(e){return gg(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Q0(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},$0=class extends E2{constructor(e,t,r="text",i="input"){super(e,e?.template??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${i} data-ref="eInput" class="ag-input-field-input"></${i}>
                </div>
            </div>`,[],t),this.inputType=r,this.displayFieldTag=i,this.eLabel=Cf,this.eWrapper=Cf,this.eInput=Cf}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return q1(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return U0(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return gg(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return ov(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)U0(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";U0(this.eInput,"autocomplete",t)}return this}},xv=class extends $0{constructor(e,t="ag-checkbox",r="checkbox"){super(e,t,r),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,r){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:r});const i=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),r=this.selected=e.target.checked;this.refreshSelectedClass(r),this.dispatchChange(r,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},Rv={selector:"AG-CHECKBOX",component:xv},sy=class extends cm{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Rv]),this.eCheckbox=Cf}init(e){this.refresh(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),el(t,"polite"),this.addManagedListeners(t,{click:r=>{if(Eh(r),this.eCheckbox.isDisabled())return;const i=this.eCheckbox.getValue();this.onCheckboxChanged(i)},dblclick:r=>{Eh(r)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:r=>{if(r.key===np.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===Hf(this.gos)&&this.eCheckbox.toggle();const i=this.eCheckbox.getValue();this.onCheckboxChanged(i),r.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,r=!0;if(e.node.group&&e.column)if(typeof e.value=="boolean")t=e.value;else{const K=e.column.getColId();K.startsWith(Vf)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[K]!==void 0?t=e.value??void 0:r=!1}else t=e.value??void 0;if(!r){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);const i=e.disabled!=null?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(i);const o=this.localeService.getLocaleTextFunc(),p=Sg(o,t),I=i?p:`${o("ariaToggleCellValue","Press SPACE to toggle cell value")} (${p})`;this.eCheckbox.setInputAriaLabel(I)}onCheckboxChanged(e){const{column:t,node:r,value:i}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:r.data,node:r,rowIndex:r.rowIndex,rowPinned:r.rowPinned,value:i});const o=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:r.data,node:r,rowIndex:r.rowIndex,rowPinned:r.rowPinned,value:i,oldValue:i,newValue:e,valueChanged:o}),o||this.updateCheckbox(this.params)}},A2=class extends cm{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=Cf,this.eLoadingText=Cf}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=D0("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},F1=class extends cm{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>ve(e.eParentOfValue)),ve(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");gg(this.getGui(),t)}setupLoading(e){const r=kf(this.gos).createElement("div");r.classList.add("ag-skeleton-effect");const i=e.node.rowIndex;if(i!=null){const I=75+25*(i%2===0?Math.sin(i):Math.cos(i));r.style.width=`${I}%`}this.getGui().appendChild(r);const p=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");gg(this.getGui(),p)}refresh(e){return!1}destroy(){super.destroy()}},Bv=class extends cm{constructor(){super()}destroy(){super.destroy()}},jm=class extends Bv{init(){const e=ud(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},qm=class extends Bv{init(){const e=ud(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}},q0=class extends cm{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},L0=class extends q0{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=yh(t,!0)}};function I0(e){const{inputValue:t,allSuggestions:r,hideIrrelevant:i,filterByPercentageOfBestMatch:o,addSequentialWeight:p}=e;let I=r.map((Gl,Fu)=>({value:Gl,relevance:g1(t.toLowerCase(),Gl.toLocaleLowerCase(),p),idx:Fu}));if(I.sort((Gl,Fu)=>Fu.relevance-Gl.relevance),i&&(I=I.filter(Gl=>Gl.relevance!==0)),I.length>0&&o&&o>0){const Fu=I[0].relevance*o;I=I.filter(Lu=>Fu-Lu.relevance<0)}const K=[],jt=[];for(const Gl of I)K.push(Gl.value),jt.push(Gl.idx);return{values:K,indices:jt}}function Hv(e){const t=[],r=e.length;for(let i=1;i<=r;i++)for(let o=0;o<=r-i;o++){const p=o+i-1;t.push(e.slice(o,p+1))}return t}function g1(e,t,r=!1){const i=e.replace(/\s/g,""),o=t.replace(/\s/g,""),p=i.length,I=o.length,K=new Array(p+1).fill(null).map(()=>new Array(I+1).fill(0));for(let Lu=0;Lu<=p;Lu+=1)K[Lu][0]=Lu;for(let Lu=0;Lu<=I;Lu+=1)K[0][Lu]=Lu;for(let Lu=1;Lu<=p;Lu++)for(let qu=1;qu<=I;qu++)i[Lu-1]===o[qu-1]?K[Lu][qu]=K[Lu-1][qu-1]:K[Lu][qu]=1+Math.min(K[Lu][qu-1],Math.min(K[Lu-1][qu],K[Lu-1][qu-1]));const jt=K[p][I];let Fu=Math.max(p,I)-jt;if(r){const Lu=Hv(i);for(let qu=0;qu<Lu.length;qu++){const Xd=Lu[qu];o.indexOf(Xd)!==-1&&(Fu+=1,Fu*=Xd.length)}}return Fu}var T0=class extends Rh{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:S2,agColumnHeader:vv,agColumnGroupHeader:q2,agSortIndicator:Vy,agAnimateShowChangeCellRenderer:T1,agAnimateSlideCellRenderer:yv,agLoadingCellRenderer:A2,agSkeletonCellRenderer:F1,agCheckboxCellRenderer:sy,agLoadingOverlay:jm,agNoRowsOverlay:qm,agTooltipComponent:L0},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");e!=null&&W(e,(t,r)=>this.registerJsComponent(t,r))}registerDefaultComponent(e,t,r){this.agGridDefaults[e]=t,r&&(this.agGridDefaultParams[e]=r)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const r=(K,jt,Gl)=>({componentFromFramework:jt,component:K,params:Gl}),i=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(i!=null)return r(i,!0);const o=this.jsComps[t];if(o){const K=this.getFrameworkOverrides().isFrameworkComponent(o);return r(o,K)}const p=this.agGridDefaults[t];if(p)return r(p,!1,this.agGridDefaultParams[t]);const I=this.enterpriseAgDefaultCompsModule[t];return I?this.gos.assertModuleRegistered(I,`AG Grid '${e}' component: ${t}`):Et(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const r=[...Object.keys(this.agGridDefaults).filter(o=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(o)),...Object.keys(this.jsComps)],i=I0({inputValue:t,allSuggestions:r,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;rl(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),i.length>0&&rl(`         Did you mean: [${i.slice(0,3)}]?`),rl(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},F0=class ax{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(r=>this.onDone(r),r=>this.onReject(r))}static all(t){return t.length?new ax(r=>{let i=t.length;const o=new Array(i);t.forEach((p,I)=>{p.then(K=>{o[I]=K,i--,i===0&&r(o)})})}):ax.resolve()}static resolve(t=null){return new ax(r=>r(t))}then(t){return new ax(r=>{this.status===1?r(t(this.resolution)):this.waiters.push(i=>r(t(i)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(r=>r(t))}onReject(t){}},K2={propertyName:"dateComponent",cellRenderer:!1},Z2={propertyName:"dragAndDropImageComponent",cellRenderer:!1},jy={propertyName:"headerComponent",cellRenderer:!1},X2={propertyName:"headerGroupComponent",cellRenderer:!1},cv={propertyName:"cellRenderer",cellRenderer:!0},ly={propertyName:"cellRenderer",cellRenderer:!1},M2={propertyName:"loadingCellRenderer",cellRenderer:!0},Q2={propertyName:"cellEditor",cellRenderer:!1},J2={propertyName:"innerRenderer",cellRenderer:!0},n1={propertyName:"loadingOverlayComponent",cellRenderer:!1},o1={propertyName:"noRowsOverlayComponent",cellRenderer:!1},P1={propertyName:"tooltipComponent",cellRenderer:!1},m1={propertyName:"filter",cellRenderer:!1},Uy={propertyName:"floatingFilterComponent",cellRenderer:!1},ev={propertyName:"toolPanel",cellRenderer:!1},uv={propertyName:"statusPanel",cellRenderer:!1},v1={propertyName:"fullWidthCellRenderer",cellRenderer:!0},Gv={propertyName:"loadingCellRenderer",cellRenderer:!0},Vv={propertyName:"groupRowRenderer",cellRenderer:!0},y1={propertyName:"detailCellRenderer",cellRenderer:!0},e3={propertyName:"menuItem",cellRenderer:!1},cy=class ub extends Rh{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getDragAndDropImageCompDetails(t){return this.getCompDetails(this.gridOptions,Z2,"agDragAndDropImage",t,!0)}getHeaderCompDetails(t,r){return this.getCompDetails(t,jy,"agColumnHeader",r)}getHeaderGroupCompDetails(t){const r=t.columnGroup.getColGroupDef();return this.getCompDetails(r,X2,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,v1,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,Gv,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,Vv,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,y1,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,r){return this.getCompDetails(t,J2,null,r)}getFullWidthGroupRowInnerCellRenderer(t,r){return this.getCompDetails(t,J2,null,r)}getCellRendererDetails(t,r){return this.getCompDetails(t,cv,null,r)}getEditorRendererDetails(t,r){return this.getCompDetails(t,ly,null,r)}getLoadingCellRendererDetails(t,r){return this.getCompDetails(t,M2,"agSkeletonCellRenderer",r,!0)}getCellEditorDetails(t,r){return this.getCompDetails(t,Q2,"agCellEditor",r,!0)}getFilterDetails(t,r,i){return this.getCompDetails(t,m1,i,r,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,K2,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,n1,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,o1,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,P1,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,r){return this.getCompDetails(t,cv,null,r)}getFloatingFilterCompDetails(t,r,i){return this.getCompDetails(t,Uy,i,r)}getToolPanelCompDetails(t,r){return this.getCompDetails(t,ev,null,r,!0)}getStatusPanelCompDetails(t,r){return this.getCompDetails(t,uv,null,r,!0)}getMenuItemCompDetails(t,r){return this.getCompDetails(t,e3,"agMenuItem",r,!0)}getCompDetails(t,r,i,o,p=!1){const{propertyName:I,cellRenderer:K}=r;let{compName:jt,jsComp:Gl,fwComp:Fu,paramsFromSelector:Lu,popupFromSelector:qu,popupPositionFromSelector:Xd}=ub.getCompKeys(this.frameworkOverrides,t,r,o),Vh;const Zh=Mp=>{const Of=this.userComponentRegistry.retrieve(I,Mp);Of&&(Gl=Of.componentFromFramework?void 0:Of.component,Fu=Of.componentFromFramework?Of.component:void 0,Vh=Of.params)};if(jt!=null&&Zh(jt),Gl==null&&Fu==null&&i!=null&&Zh(i),Gl&&K&&!this.agComponentUtils.doesImplementIComponent(Gl)&&(Gl=this.agComponentUtils.adaptFunction(I,Gl)),!Gl&&!Fu){p&&Ml(`Could not find component ${jt}, did you forget to configure this component?`);return}const Wh=this.mergeParamsWithApplicationProvidedParams(t,r,o,Lu,Vh),Rp=Gl==null,Tp=Gl||Fu;return{componentFromFramework:Rp,componentClass:Tp,params:Wh,type:r,popupFromSelector:qu,popupPositionFromSelector:Xd,newAgStackInstance:()=>this.newAgStackInstance(Tp,Rp,Wh,r)}}static getCompKeys(t,r,i,o){const{propertyName:p}=i;let I,K,jt,Gl,Fu,Lu;if(r){const qu=r,Xd=qu[p+"Selector"],Vh=Xd?Xd(o):null,Zh=Wh=>{typeof Wh=="string"?I=Wh:Wh!=null&&Wh!==!0&&(t.isFrameworkComponent(Wh)?jt=Wh:K=Wh)};Vh?(Zh(Vh.component),Gl=Vh.params,Fu=Vh.popup,Lu=Vh.popupPosition):Zh(qu[p])}return{compName:I,jsComp:K,fwComp:jt,paramsFromSelector:Gl,popupFromSelector:Fu,popupPositionFromSelector:Lu}}newAgStackInstance(t,r,i,o){const p=o.propertyName,I=!r;let K;if(I)K=new t;else{const Gl=this.componentMetadataProvider.retrieve(p);K=this.frameworkComponentWrapper.wrap(t,Gl.mandatoryMethodList,Gl.optionalMethodList,o)}const jt=this.initComponent(K,i);return jt==null?F0.resolve(K):jt.then(()=>K)}mergeParamsWithApplicationProvidedParams(t,r,i,o=null,p){const I=this.gos.getGridCommonParams();Cl(I,i),p&&Cl(I,p);const K=t,jt=K&&K[r.propertyName+"Params"];if(typeof jt=="function"){const Gl=jt(i);Cl(I,Gl)}else typeof jt=="object"&&Cl(I,jt);return Cl(I,o),I}initComponent(t,r){if(this.createBean(t),t.init!=null)return t.init(r)}};function a1(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var O0=class Wm{static register(t){Wm.__register(t,!0,void 0)}static registerModules(t){Wm.__registerModules(t,!0,void 0)}static __register(t,r,i){Wm.runVersionChecks(t),i!==void 0?(Wm.areGridScopedModules=!0,Wm.gridModulesMap[i]===void 0&&(Wm.gridModulesMap[i]={}),Wm.gridModulesMap[i][t.moduleName]=t):Wm.globalModulesMap[t.moduleName]=t,Wm.setModuleBased(r)}static __unRegisterGridModules(t){delete Wm.gridModulesMap[t]}static __registerModules(t,r,i){Wm.setModuleBased(r),t&&t.forEach(o=>Wm.__register(o,r,i))}static isValidModuleVersion(t){const[r,i]=t.version.split(".")||[],[o,p]=Wm.currentModuleVersion.split(".")||[];return r===o&&i===p}static runVersionChecks(t){Wm.currentModuleVersion||(Wm.currentModuleVersion=t.version);const r=i=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${i} Please update all modules to the same version.`;if(t.version?Wm.isValidModuleVersion(t)||Ml(r(`'${t.moduleName}' is version ${t.version} but the other modules are version ${Wm.currentModuleVersion}.`)):Ml(r(`'${t.moduleName}' is incompatible.`)),t.validate){const i=t.validate();i.isValid||Ml(`${i.message}`)}}static setModuleBased(t){Wm.moduleBased===void 0?Wm.moduleBased=t:Wm.moduleBased!==t&&(Ml("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),Ml("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){Wm.isBundled=!0}static __assertRegistered(t,r,i){if(this.__isRegistered(t,i))return!0;let o;if(Wm.isBundled)o=`AG Grid: unable to use ${r} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(Wm.moduleBased||Wm.moduleBased===void 0){const p=Object.entries(ie).find(([I,K])=>K===t)?.[0];o=`AG Grid: unable to use ${r} as the ${p} is not registered${Wm.areGridScopedModules?` for gridId: ${i}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${p} } from '${t}';
    
    ModuleRegistry.registerModules([ ${p} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else o=`AG Grid: unable to use ${r} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return Ml(o),!1}static __isRegistered(t,r){return!!Wm.globalModulesMap[t]||!!Wm.gridModulesMap[r]?.[t]}static __getRegisteredModules(t){return[...Bu(Wm.globalModulesMap),...Bu(Wm.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return Bu(Wm.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!Wm.moduleBased}};O0.globalModulesMap={},O0.gridModulesMap={},O0.areGridScopedModules=!1;var c0=O0,Jm=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach(([t,r])=>{this.beans[t]=r}),e.beanClasses.forEach(t=>{const r=new t;r.beanName?this.beans[r.beanName]=r:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(r)}),e.derivedBeans?.forEach(t=>{const{beanName:r,bean:i}=t(this);this.beans[r]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(r=>{r.preWireBeans?.(this.beans),r.wireBeans?.(this.beans)}),e.forEach(r=>r.preConstruct?.()),t&&e.forEach(t),e.forEach(r=>r.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},dv=class extends Jm{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),c0.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},R2=(e=>(e[e.SINGLE_SHEET=0]="SINGLE_SHEET",e[e.MULTI_SHEET=1]="MULTI_SHEET",e))(R2||{}),k2=(e=>(e[e.Up=0]="Up",e[e.Down=1]="Down",e))(k2||{}),uy=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(uy||{}),D1=(e=>(e[e.ToolPanel=0]="ToolPanel",e[e.HeaderCell=1]="HeaderCell",e[e.RowDrag=2]="RowDrag",e[e.ChartPanel=3]="ChartPanel",e[e.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",e))(D1||{}),L1=class extends Rh{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){const r={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:r,dragSource:e}),this.dragService.addDragSource(r)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){const t=this.dragSourceAndParamsList.find(r=>r.dragSource===e);t&&(this.dragService.removeDragSource(t.params),ym(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){if(this.dragSource?.onDragStopped?.(),this.lastDropTarget?.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.clearDragAndDropProperties()}onDragCancel(){this.dragSource?.onDragCancelled?.(),this.lastDropTarget?.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){const r=this.getHorizontalDirection(e),i=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const o=this.dropTargets.filter(I=>this.isMouseOnDropTarget(e,I)),p=this.findCurrentDropTarget(e,o);if(p!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,r,i,t),this.lastDropTarget!==null&&p===null&&this.dragSource?.onGridExit?.(this.dragItem),this.lastDropTarget===null&&p!==null&&this.dragSource?.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(p,e,r,i,t),p&&this.dragAndDropImageComp){const{comp:I,promise:K}=this.dragAndDropImageComp;I?I.setIcon(p.getIconName?p.getIconName():null):K.then(jt=>{jt&&jt.setIcon(p.getIconName?p.getIconName():null)})}this.lastDropTarget=p}else if(p&&p.onDragging){const I=this.createDropTargetEvent(p,e,r,i,t);p.onDragging(I)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,r=[[e.getContainer()]];return t?r.concat(t):r}allContainersIntersect(e,t){for(const r of t){const{width:i,height:o,left:p,right:I,top:K,bottom:jt}=r.getBoundingClientRect();if(i===0||o===0)return!1;const Gl=e.clientX>=p&&e.clientX<I,Fu=e.clientY>=K&&e.clientY<jt;if(!Gl||!Fu)return!1}return!0}isMouseOnDropTarget(e,t){const r=this.getAllContainersFromDropTarget(t);let i=!1;for(const I of r)if(this.allContainersIntersect(e,I)){i=!0;break}const{eElement:o,type:p}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(o)?!1:i&&t.isInterestedIn(p,o)}findCurrentDropTarget(e,t){const r=t.length;if(r===0)return null;if(r===1)return t[0];const o=Gg(this.gos).elementsFromPoint(e.clientX,e.clientY);for(const p of o)for(const I of t)if(Cg(this.getAllContainersFromDropTarget(I)).indexOf(p)!==-1)return I;return null}enterDragTargetIfExists(e,t,r,i,o){if(e&&e.onDragEnter){const p=this.createDropTargetEvent(e,t,r,i,o);e.onDragEnter(p)}}leaveLastTargetIfExists(e,t,r,i){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const p=this.createDropTargetEvent(this.lastDropTarget,e,t,r,i);this.lastDropTarget.onDragLeave(p)}const o=this.getDragAndDropImageComponent();o&&o.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(r=>r.external).find(r=>r.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const r=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=e;return r.contains(i)}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,r=e.clientX;return t===r?null:t>r?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,r=e.clientY;return t===r?null:t>r?0:1}createDropTargetEvent(e,t,r,i,o){const p=e.getContainer(),I=p.getBoundingClientRect(),{dragItem:K,dragSource:jt}=this,Gl=t.clientX-I.left,Fu=t.clientY-I.top;return this.gos.addGridCommonParams({event:t,x:Gl,y:Fu,vDirection:i,hDirection:r,dragSource:jt,fromNudge:o,dragItem:K,dropZoneTarget:p})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();if(!t)return;const r=t.getGui(),o=r.getBoundingClientRect().height,p=V2()-2,I=j2()-2;if(!r.offsetParent)return;const jt=Iy(r.offsetParent),{clientY:Gl,clientX:Fu}=e;let Lu=Gl-jt.top-o/2,qu=Fu-jt.left-10;const Xd=kf(this.gos),Vh=Xd.defaultView||window,Zh=Vh.pageYOffset||Xd.documentElement.scrollTop,Wh=Vh.pageXOffset||Xd.documentElement.scrollLeft;p>0&&qu+r.clientWidth>p+Wh&&(qu=p+Wh-r.clientWidth),qu<0&&(qu=0),I>0&&Lu+r.clientHeight>I+Zh&&(Lu=I+Zh-r.clientHeight),Lu<0&&(Lu=0),r.style.left=`${qu}px`,r.style.top=`${Lu}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp:e}=this.dragAndDropImageComp;if(e){const t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const r=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:r},r.then(i=>{!i||!this.isAlive()||(this.processDragAndDropImageComponent(i),this.dragAndDropImageComp.comp=i)})}processDragAndDropImageComponent(e){const{dragSource:t,mouseEventService:r,environment:i}=this;if(!t)return;const o=e.getGui();o.style.setProperty("position","absolute"),o.style.setProperty("z-index","9999"),r.stampTopLevelGridCompWithGridInstance(o),i.applyThemeClasses(o),e.setIcon(null);let{dragItemName:p}=t;kl(p)&&(p=p()),e.setLabel(p||""),o.style.top="20px",o.style.left="20px";const I=kf(this.gos);let K=null,jt=null;try{K=I.fullscreenElement}catch{}finally{K||(K=Gg(this.gos));const Gl=K.querySelector("body");Gl?jt=Gl:K instanceof ShadowRoot?jt=K:K instanceof Document?jt=K?.documentElement:jt=K}this.dragAndDropImageParent=jt,jt?jt.appendChild(o):rl("Could not find document body, it is needed for drag and drop.")}},I1=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const r=t||this.shouldSkipVerticalScroll();if(r&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),o=this.scrollByTick;this.tickLeft=e.clientX<i.left+o,this.tickRight=e.clientX>i.right-o,this.tickUp=e.clientY<i.top+o&&!r,this.tickDown=e.clientY>i.bottom-o&&!r,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},T2=(e=>(e[e.Above=0]="Above",e[e.Below=1]="Below",e))(T2||{}),jv=class extends Rh{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){Rd(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{const t=e.gridBodyCtrl;this.autoScrollService=new I1({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:r=>t.getScrollFeature().setVerticalScrollPosition(r),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){return!!(this.funcColsService.getRowGroupColumns().length||this.filterManager?.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const i=[...this.selectionService.getSelectedNodes()].sort((o,p)=>o.rowIndex==null||p.rowIndex==null?0:this.getRowIndexNumber(o)-this.getRowIndexNumber(p));if(i.indexOf(t)!==-1)return i}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const r=this.isFromThisGrid(e),i=this.gos.get("rowDragManaged"),o=e.dragItem.rowNodes;i&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!r?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(o[0],t):this.moveRows(o,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(wf(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),r=t&&t.highlighted===1,i=this.mouseEventService.getNormalisedPosition(e).y,o=e.dragItem.rowNodes;let p=r?1:0;if(this.isFromThisGrid(e))o.forEach(I=>{I.rowTop<i&&(p-=1)}),this.moveRows(o,i,p);else{const I=_d(this.gos);let K=this.clientSideRowModel.getRowIndexAtPixel(i)+1;this.clientSideRowModel.getHighlightPosition(i)===0&&K--,this.clientSideRowModel.updateRowData({add:o.filter(jt=>!this.clientSideRowModel.getRowNode(I?.({data:jt.data,level:0,rowPinned:jt.rowPinned})??jt.data.id)).map(jt=>jt.data),addIndex:K})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,r=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,r)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){rl("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){rl("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=i=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",i))}),e.onDragLeave&&(t.onDragLeave=i=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",i))}),e.onDragging&&(t.onDragging=i=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",i))}),e.onDragStop&&(t.onDragStop=i=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",i))}),e.onDragCancel&&(t.onDragCancel=i=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",i))}));const r={isInterestedIn:i=>i===2,getIconName:()=>"move",external:!0,...t};this.dragAndDropService.addDropTarget(r),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(r))}getRowDropZone(e){const t=this.getContainer.bind(this),r=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),o=this.onDragging.bind(this),p=this.onDragStop.bind(this),I=this.onDragCancel.bind(this);let K;return e?K={getContainer:t,onDragEnter:e.onDragEnter?jt=>{r(jt),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",jt))}:r,onDragLeave:e.onDragLeave?jt=>{i(jt),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",jt))}:i,onDragging:e.onDragging?jt=>{o(jt),e.onDragging(this.draggingToRowDragEvent("rowDragMove",jt))}:o,onDragStop:e.onDragStop?jt=>{p(jt),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",jt))}:p,onDragCancel:e.onDragCancel?jt=>{I(jt),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",jt))}:I,fromGrid:!0}:K={getContainer:t,onDragEnter:r,onDragLeave:i,onDragging:o,onDragStop:p,onDragCancel:I,fromGrid:!0},K}draggingToRowDragEvent(e,t){const r=this.mouseEventService.getNormalisedPosition(t).y,i=r>this.pageBoundsService.getCurrentPageHeight();let o=-1,p;i||(o=this.rowModel.getRowIndexAtPixel(r),p=this.rowModel.getRow(o));let I;switch(t.vDirection){case 1:I="down";break;case 0:I="up";break;default:I=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:o,overNode:p,y:r,vDirection:I})}dispatchGridEvent(e,t){const r=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(r)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},Wy=class extends Rh{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,r=e.mouseDownListener;if(t.removeEventListener("mousedown",r),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(r=>r.dragSource===e);t&&(this.removeListener(t),ym(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:r,includeTouch:i,stopPropagationForTouch:o}=e;r.addEventListener("mousedown",t);let p=null;const I=this.gos.get("suppressTouch");i&&!I&&(p=K=>{nv(K.target)||(o&&K.stopPropagation(),this.onTouchStart(e,K))},r.addEventListener("touchstart",p,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:p,touchEnabled:!!i})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const r=t.touches[0];this.touchLastTime=r,this.touchStart=r;const i=jt=>this.onTouchMove(jt,e.eElement),o=jt=>this.onTouchUp(jt,e.eElement),p=jt=>{jt.cancelable&&jt.preventDefault()},I=t.target,K=[{target:Gg(this.gos),type:"touchmove",listener:p,options:{passive:!1}},{target:I,type:"touchmove",listener:i,options:{passive:!0}},{target:I,type:"touchend",listener:o,options:{passive:!0}},{target:I,type:"touchcancel",listener:o,options:{passive:!0}}];this.addTemporaryEvents(K),e.dragStartPixels===0&&this.onCommonMove(r,this.touchStart,e.eElement)}onMouseDown(e,t){const r=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||r._alreadyProcessedByDragService||(r._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const i=Gl=>this.onMouseMove(Gl,e.eElement),o=Gl=>this.onMouseUp(Gl,e.eElement),p=Gl=>Gl.preventDefault(),I=Gl=>{Gl.key===np.ESCAPE&&this.cancelDrag(e.eElement)},K=Gg(this.gos),jt=[{target:K,type:"mousemove",listener:i},{target:K,type:"mouseup",listener:o},{target:K,type:"contextmenu",listener:p},{target:K,type:"keydown",listener:I}];this.addTemporaryEvents(jt),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:r,type:i,listener:o,options:p}=t;r.addEventListener(i,o,p)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:r,type:i,listener:o,options:p}=t;r.removeEventListener(i,o,p)})})}isEventNearStartEvent(e,t){const{dragStartPixels:r}=this.currentDragParams,i=pd(r)?r:4;return Gy(e,t,i)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,r){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:r}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){const r=this.getFirstActiveTouch(e.touches);r&&this.onCommonMove(r,this.touchStart,t)}onMouseMove(e,t){mv()&&kf(this.gos).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),r=e.type==="mousemove";return t&&r&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){return!!e.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let r=this.getFirstActiveTouch(e.changedTouches);r||(r=this.touchLastTime),this.onUpCommon(r,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventService.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},dy=class extends cm{constructor(e,t,r,i,o,p){super(),this.cellValueFn=e,this.rowNode=t,this.column=r,this.customGui=i,this.dragStartPixels=o,this.suppressVisibilityChange=p,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(D0("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new $y(this,this.beans,this.rowNode,this.column):new x1(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&rl("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);const r=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{const i=this.getDragItem(),o=i.rowNodes?.length||1,p=this.getRowDragText(this.column);return p?p(i,o):o===1?this.cellValueFn():`${o} ${r("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},O1=class extends Rh{constructor(e,t,r){super(),this.parent=e,this.rowNode=t,this.column=r}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let r=!0,i=!1;this.column&&(r=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=kl(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,t),this.parent.setVisible(r,t)):(this.parent.setDisplayed(r,t),this.parent.setVisible(!0,t))}}},x1=class extends O1{constructor(e,t,r,i){super(e,r,i),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},$y=class extends O1{constructor(e,t,r,i){super(e,r,i),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),r=t&&t.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),o=this.beans.dragAndDropService.hasExternalDropZones(),p=r&&!o||i;this.setDisplayedOrVisible(p)}},qy=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),kv=class f2{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=f2.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,r){const i=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const o=this.createDataChangedEvent(t,i,r);this.localEventService?.dispatchEvent(o)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,r,i){return{type:"dataChanged",node:this,oldData:r,newData:t,update:i}}getRowIndexString(){return this.rowIndex==null?(Ml("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?f2.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?f2.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new f2(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,r){const i=pd(this.id)?this.createDaemonNode():null,o=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(r),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);const p=this.createDataChangedEvent(t,o,!1);this.localEventService?.dispatchEvent(p)}checkRowSelectable(){const t=qg(this.beans.gos);this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,r){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),r)return;if(ff(this.beans.gos)){const o=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:o??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){const r=_d(this.beans.gos);if(r)if(this.data){const i=this.parent?.getRoute()??[];this.id=r({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(f2.ID_PREFIX_ROW_GROUP)&&Ml(`Row IDs cannot start with ${f2.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,r=!1){this.rowHeight=t,this.rowHeightEstimated=r,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,r){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[r.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=$l(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,r=!0,i=0;const o=this.__autoHeights;if(o==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(K=>{let jt=o[K.getId()];if(jt==null)if(this.beans.columnModel.isColSpanActive()){let Gl=[];switch(K.getPinned()){case"left":Gl=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":Gl=this.beans.visibleColsService.getRightColsForRow(this);break;case null:Gl=this.beans.columnViewportService.getColsWithinViewport(this);break}if(Gl.includes(K)){t=!0;return}jt=-1}else{t=!0;return}else r=!1;jt>i&&(i=jt)}),t)||((r||i<10)&&(i=lh(this.beans.gos,this).height),i==this.rowHeight))return;this.setRowHeight(i),this.beans.rowModel.onRowHeightChangedDebounced?.()}setExpanded(t,r,i){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");const o={...this.createGlobalRowEvent("rowGroupOpened"),expanded:t,event:r||null};this.beans.rowNodeEventThrottle.dispatchExpanded(o,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,r,i){const p=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),I=this.beans.valueService.getValueForDisplay(p,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:p,colDef:p.getColDef(),data:this.data,node:this,oldValue:I,newValue:r,value:r,source:i}),!1;const K=this.beans.valueService.setValue(this,p,r,i);return this.dispatchCellChangedEvent(p,r,I),this.checkRowSelectable(),K}setGroupValue(t,r){const i=this.beans.columnModel.getCol(t);id(this.groupData)&&(this.groupData={});const o=i.getColId(),p=this.groupData[o];p!==r&&(this.groupData[o]=r,this.dispatchCellChangedEvent(i,r,p))}setAggData(t){const r=this.aggData;if(this.aggData=t,this.localEventService){const i=o=>{const p=this.aggData?this.aggData[o]:void 0,I=r?r[o]:void 0;if(p===I)return;const K=this.beans.columnModel.getCol(o);K&&this.dispatchCellChangedEvent(K,p,I)};for(const o in r)i(o);for(const o in t)(!r||!(o in r))&&i(o)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(dh(this.beans.gos)){const i=this.beans.gos.get("treeData"),o=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(i?!!o&&o(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(t,r,i){const o={type:"cellChanged",node:this,column:t,newValue:r,oldValue:i};this.localEventService?.dispatchEvent(o)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(r=>r.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){let t=!1,r=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let i=0;i<this.childrenAfterGroup.length;i++){const o=this.childrenAfterGroup[i];let p=o.isSelected();if(!o.selectable){const I=o.calculateSelectedFromChildren();if(I===null)continue;p=I}switch(p){case!0:t=!0;break;case!1:r=!0;break;default:return}}if(!(t&&r))return t?!0:r?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){this.localEventService?.dispatchEvent({type:t,node:this})}selectThisNode(t,r,i="api"){const o=!this.selectable&&t,p=this.selected===t;if(o||p)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");const I=this.sibling;return I&&I.footer&&I.localEventService&&I.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:r||null,source:i}),!0}setSelected(t,r=!1,i="api"){if(typeof i=="boolean"){rl("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:r,rangeSelect:!1,source:i})}setSelectedParams(t){return this.rowPinned?(rl("cannot select pinned rows"),0):this.id===void 0?(rl("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...t,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(t,r){this.localEventService||(this.localEventService=new Y),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new f(this.beans.frameworkOverrides));const i=this.frameworkEventListenerService?.wrap(t,r)??r;this.localEventService.addEventListener(t,i)}removeEventListener(t,r){if(!this.localEventService)return;const i=this.frameworkEventListenerService?.unwrap(t,r)??r;this.localEventService.removeEventListener(t,i),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(rl("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const t=[];let r=this;for(;r&&r.key!=null;)t.push(r.key),r=r.parent;return t.reverse()}createFooter(){if(this.sibling)return;const t=new f2(this.beans);Object.keys(this).forEach(r=>{qy.has(r)||(t[r]=this[r])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.dispatchRowEvent("firstChildChanged"))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.dispatchRowEvent("draggingChanged"))}setHighlighted(t){this.highlighted!==t&&(this.highlighted=t,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.dispatchRowEvent("uiLevelChanged"))}};kv.ID_PREFIX_ROW_GROUP="row-group-",kv.ID_PREFIX_TOP_PINNED="t-",kv.ID_PREFIX_BOTTOM_PINNED="b-",kv.OBJECT_ID_SEQUENCE=0;var wv=kv,hy=class extends Rh{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:r})=>this.onAdvancedFilterEnabledChanged(r),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",r=>this.setAdvancedFilterModel(r.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){Lg(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:r,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):F0.resolve()).then(()=>{const o={source:t,type:"filterChanged",columns:i};r&&Cl(o,r),this.eventService.dispatchEvent(o),this.columnFilterService?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!Lg(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService?.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return this.columnFilterService?.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){rl("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,r){this.columnFilterService?.setColDefPropertiesForDataType(e,t,r)}},py=class extends cm{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??F0.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){const{column:t,source:r}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(i=>{const o=i.getGui();pd(o)||rl(`getGui method from filter returned ${o}; it should be a DOM element.`),this.appendChild(o),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:r,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(_0(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},w1="ag-resizer-wrapper",Tv=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,Yy=`<div class="${w1}">
        ${Tv("eTopLeft","topLeft")}
        ${Tv("eTop","top")}
        ${Tv("eTopRight","topRight")}
        ${Tv("eRight","right")}
        ${Tv("eBottomRight","bottomRight")}
        ${Tv("eBottom","bottom")}
        ${Tv("eBottomLeft","bottomLeft")}
        ${Tv("eLeft","left")}
    </div>`,Ky=class extends Rh{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,r=t/2-this.getWidth()/2,i=e/2-this.getHeight()/2;this.offsetElement(r,i)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:r,width:i,minHeight:o,height:p,x:I,y:K}=this.config;this.offsetParent||this.setOffsetParent();let jt=0,Gl=0;const Fu=k0(this.element);if(Fu){const Lu=this.findBoundaryElement(),qu=window.getComputedStyle(Lu);if(qu.minWidth!=null){const Xd=Lu.offsetWidth-this.element.offsetWidth;Gl=parseInt(qu.minWidth,10)-Xd}if(qu.minHeight!=null){const Xd=Lu.offsetHeight-this.element.offsetHeight;jt=parseInt(qu.minHeight,10)-Xd}}if(this.minHeight=o||jt,this.minWidth=r||Gl,i&&this.setWidth(i),p&&this.setHeight(p),(!i||!p)&&this.refreshSize(),e)this.center();else if(I||K)this.offsetElement(I,K);else if(Fu&&t){let Lu=this.boundaryEl,qu=!0;if(Lu||(Lu=this.findBoundaryElement(),qu=!1),Lu){const Xd=parseFloat(Lu.style.top),Vh=parseFloat(Lu.style.left);qu?this.offsetElement(isNaN(Vh)?0:Vh,isNaN(Xd)?0:Xd):this.setPosition(Vh,Xd)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const r=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(r),this.moveElementDragListener=r):(this.dragService.removeDragSource(r),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const i=!!e[t],o=this.getResizerElement(t),p={dragStartPixels:0,eElement:o,onDragStart:I=>this.onResizeStart(I,t),onDragging:this.onResize.bind(this),onDragStop:I=>this.onResizeEnd(I,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(p),this.resizeListeners.push(p),o.style.pointerEvents="all"):o.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,r=this.element;let i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)p1(r,e),e=S1(r),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const o=this.getAvailableHeight();o&&e>o&&(e=o)}this.getHeight()!==e&&(i?(r.style.maxHeight="unset",r.style.minHeight="unset"):t?p1(r,e):(r.style.height=`${e}px`,r.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:r}=this.offsetParent;if(!r)return null;const i=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),p=e?this.position.y:i.top,I=e?0:o.top;let K=0;if(t){const Gl=this.element.parentElement;if(Gl){const{bottom:Fu}=Gl.getBoundingClientRect();K=Fu-i.bottom}}return r+I-p-K}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:r}=this.config;let i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Q0(t,e),e=Ev(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:o}=this.offsetParent,p=r?this.position.x:this.element.getBoundingClientRect().left;o&&e+p>o&&(e=o-p)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Q0(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:r}=this.config,i=r?this.boundaryEl:this.element;i&&(this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const r=this.getAvailableHeight();this.element.style.setProperty("max-height",`${r}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:r,isTop:i,anywhereWithin:o,topBuffer:p}=e,I=t.clientX-this.dragStartPosition.x,K=t.clientY-this.dragStartPosition.y,jt=this.shouldSkipX(t,!!r,!!o,I)?0:I,Gl=this.shouldSkipY(t,!!i,p,K)?0:K;return{movementX:jt,movementY:Gl}}shouldSkipX(e,t,r,i){const o=this.element.getBoundingClientRect(),p=this.offsetParent.getBoundingClientRect(),I=this.boundaryEl.getBoundingClientRect(),K=this.config.popup?this.position.x:o.left;let jt=K<=0&&p.left>=e.clientX||p.right<=e.clientX&&p.right<=I.right;return jt?!0:(t?jt=i<0&&e.clientX>K+p.left||i>0&&e.clientX<K+p.left:r?jt=i<0&&e.clientX>I.right||i>0&&e.clientX<K+p.left:jt=i<0&&e.clientX>I.right||i>0&&e.clientX<I.right,jt)}shouldSkipY(e,t,r=0,i){const o=this.element.getBoundingClientRect(),p=this.offsetParent.getBoundingClientRect(),I=this.boundaryEl.getBoundingClientRect(),K=this.config.popup?this.position.y:o.top;let jt=K<=0&&p.top>=e.clientY||p.bottom<=e.clientY&&p.bottom<=I.bottom;return jt?!0:(t?jt=i<0&&e.clientY>K+p.top+r||i>0&&e.clientY<K+p.top:jt=i<0&&e.clientY>I.bottom||i>0&&e.clientY<I.bottom,jt)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const r=new DOMParser().parseFromString(Yy,"text/html").body;e.appendChild(r.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${w1}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:r,forcePopupParentAsOffsetParent:i}=this.config;!r&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(r=>!r.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,r=0;for(let i=0;i<e.length;i++){const o=e[i],p=!!o.style.flex&&o.style.flex!=="0 0 auto";if(o===this.element)continue;let I=this.minHeight||0,K=this.minWidth||0;if(p){const jt=window.getComputedStyle(o);jt.minHeight&&(I=parseInt(jt.minHeight,10)),jt.minWidth&&(K=parseInt(jt.minWidth,10))}else I=o.offsetHeight,K=o.offsetWidth;t+=I,r+=K}return{height:t,width:r}}applySizeToSiblings(e){let t=null;const r=this.getSiblings();if(r){for(let i=0;i<r.length;i++){const o=r[i];o!==t&&(e?o.style.height=`${o.offsetHeight}px`:o.style.width=`${o.offsetWidth}px`,o.style.flex="0 0 auto",o===this.element&&(t=r[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:r}=this.config,{isTop:i,isRight:o,isBottom:p,isLeft:I}=this.currentResizer,K=o||I,jt=p||i,{movementX:Gl,movementY:Fu}=this.calculateMouseMovement({e,isLeft:I,isTop:i}),Lu=this.position.x,qu=this.position.y;let Xd=0,Vh=0;if(K&&Gl){const Zh=I?-1:1,Wh=this.getWidth(),Rp=Wh+Gl*Zh;let Tp=!1;I&&(Xd=Wh-Rp,(Lu+Xd<=0||Rp<=this.minWidth)&&(Tp=!0,Xd=0)),Tp||this.setWidth(Rp)}if(jt&&Fu){const Zh=i?-1:1,Wh=this.getHeight(),Rp=Wh+Fu*Zh;let Tp=!1;i?(Vh=Wh-Rp,(qu+Vh<=0||Rp<=this.minHeight)&&(Tp=!0,Vh=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&Wh<Rp&&this.getMinSizeOfSiblings().height+Rp>this.element.parentElement.offsetHeight&&(Tp=!0),Tp||this.setHeight(Rp)}this.updateDragStartPosition(e.clientX,e.clientY),((t||r)&&Xd||Vh)&&this.offsetElement(Lu+Xd,qu+Vh)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:r}=this.position;let i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());const{movementX:o,movementY:p}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+o,r+p),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},fy=class db extends Rh{constructor(t,r={}){super(),this.eFocusableElement=t,this.callbacks=r,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;const o=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);o&&(o.focus(),i.preventDefault())},...r}}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(db.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:r=>{if(!(r.defaultPrevented||ph(r))){if(this.callbacks.shouldStopEventPropagation(r)){Eh(r);return}r.key===np.TAB?this.callbacks.onTabKeyDown(r):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(r)}}})}};fy.FOCUS_MANAGED_CLASS="ag-focus-managed";var tv=fy,Y0={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function Uv(e,t){return z1(e)?(e.debounceMs!=null&&rl("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function z1(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var F2=class extends cm{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=Cf,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new tv(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Ky(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const r=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(r,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=z1(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=z1(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){const{buttons:r,readOnly:i}=t??{},{buttons:o,readOnly:p}=e;if(i===p&&Gd(r,o))return;const I=o&&o.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(_0(this.eButtonsPanel),this.buttonListeners.forEach(Gl=>Gl()),this.buttonListeners=[]):I&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!I){this.eButtonsPanel&&sv(this.eButtonsPanel);return}const K=document.createDocumentFragment(),jt=Gl=>{let Fu,Lu;switch(Gl){case"apply":Fu=this.translate("applyFilter"),Lu=Vh=>this.onBtApply(!1,!1,Vh);break;case"clear":Fu=this.translate("clearFilter"),Lu=()=>this.onBtClear();break;case"reset":Fu=this.translate("resetFilter"),Lu=()=>this.onBtReset();break;case"cancel":Fu=this.translate("cancelFilter"),Lu=Vh=>{this.onBtCancel(Vh)};break;default:rl("Unknown button type specified");return}const Xd=e1(`<button
                    type="${Gl==="apply"?"submit":"button"}"
                    data-ref="${Gl}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${Fu}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(Xd,{click:Lu})),K.append(Xd)};o.forEach(Gl=>jt(Gl)),this.eButtonsPanel.append(K),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=Uv(this.providedFilterParams,this.getDefaultDebounceMs()),t=$l(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const r=()=>{this.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(r):this.resetUiToDefaults().then(r)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const r=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(r,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,r){r&&r.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:i}=this.providedFilterParams;i&&this.applyActive&&!e&&!t&&this.close(r)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,r=t&&t.key;let i;(r==="Enter"||r==="Space")&&(i={keyboardEvent:t}),this.hidePopup(i),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const r=this.isModelValid(this.getModelFromUi()),i=this.queryForHtmlElement('[data-ref="applyFilterButton"]');i&&ov(i,!r)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:r,gos:i}=this;t?(r.restoreLastSize(),r.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,Y0[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},Fv=class extends xv{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},s1=class extends cm{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case np.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const r=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(r)}break;case np.DOWN:case np.UP:e.preventDefault(),this.navigate(t);break;case np.PAGE_DOWN:case np.PAGE_UP:case np.PAGE_HOME:case np.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===np.DOWN;let r;if(!this.highlightedEl)r=this.itemEls[t?0:this.itemEls.length-1];else{let o=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);o=Math.min(Math.max(o,0),this.itemEls.length-1),r=this.itemEls[o]}this.highlightItem(r)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;const t=this.itemEls.indexOf(this.highlightedEl),r=this.options.length-1,i=this.itemEls[0].clientHeight,o=Math.floor(this.getGui().clientHeight/i);let p=-1;e===np.PAGE_HOME?p=0:e===np.PAGE_END?p=r:e===np.PAGE_DOWN?p=Math.min(t+o,r):e===np.PAGE_UP&&(p=Math.max(t-o,0)),p!==-1&&this.highlightItem(this.itemEls[p])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:r}=e,i=r||t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{sv(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,r)=>{Ff(t,r+1),bg(t,e.length)})}renderOption(e,t){const r=kf(this.gos),i=r.createElement("div");cg(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const o=r.createElement("span");i.appendChild(o),o.textContent=t,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListeners(i,{mouseover:()=>this.highlightItem(i),mousedown:p=>{p.preventDefault(),p.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new W0({getTooltipValue:()=>t,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>o.scrollWidth>o.clientWidth})),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const r=this.options.findIndex(i=>i.value===e);if(r!==-1){const i=this.options[r];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[r]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!k0(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),rm(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:r,clientHeight:i}=t,{offsetTop:o,offsetHeight:p}=e;(o+p>r+i||o<r)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!k0(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),rm(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Zy=class extends E2{constructor(e){if(super(e,e?.template||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Cf,this.eWrapper=Cf,this.eDisplayField=Cf,this.eIcon=Cf,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:r,variableWidth:i,minPickerWidth:o,maxPickerWidth:p}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,r!=null&&this.setPickerMaxHeight(r),o!=null&&this.setPickerMinWidth(o),p!=null&&this.setPickerMaxWidth(p)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:r,inputWidth:i}=this.config;if(r){const o=D0(r,this.gos);o&&this.eIcon.appendChild(o)}i!=null&&this.setInputWidth(i)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Ch(e,!1),this.ariaRole&&cg(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case np.UP:case np.DOWN:case np.ENTER:case np.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case np.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:r,pickerAriaLabelValue:i,modalPicker:o=!0}=this.config,p={modal:o,eChild:e,closeOnEsc:!0,closedCallback:()=>{const qu=Rg(this.gos);this.beforeHidePicker(),qu&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(r,i),anchorToElement:this.eWrapper};e.style.position="absolute";const I=this.popupService.addPopup(p),{maxPickerHeight:K,minPickerWidth:jt,maxPickerWidth:Gl,variableWidth:Fu}=this;Fu?(jt&&(e.style.minWidth=jt),e.style.width=_1(Ev(this.eWrapper)),Gl&&(e.style.maxWidth=Gl)):q1(e,Gl??Ev(this.eWrapper));const Lu=K??`${Ly(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",Lu),this.alignPickerToComponent(),I.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,r=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();Ch(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return q1(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},f0=class extends Zy{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:r}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),r&&t==null&&(this.eDisplayField.textContent=r),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new s1("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),lm(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===np.TAB&&this.hidePicker(),t){case np.ENTER:case np.UP:case np.DOWN:case np.PAGE_UP:case np.PAGE_DOWN:case np.PAGE_HOME:case np.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case np.ESCAPE:super.onKeyDown(e);break;case np.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,r){if(this.value===e||!this.listComponent)return this;if(r||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let o=this.listComponent.getDisplayValue();return o==null&&this.config.placeholder&&(o=this.config.placeholder),this.eDisplayField.textContent=o,this.setTooltip({newTooltipText:o??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},e0={selector:"AG-SELECT",component:f0},Wv=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],r=i=>i.some(o=>e[o]!=null)?!0:(rl(`ignoring FilterOptionDef as it doesn't contain one of '${i}'`),!1);if(!t.every(r)){this.filterOptions=this.filterOptions.filter(i=>i===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:rl("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else rl("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},N1=class extends F2{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:i}=t;return i??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,r)=>{r===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const r=!e.operator,i=!t.operator;if(!r&&i||r&&!i)return!1;let p;if(r){const I=e,K=t;p=this.areSimpleModelsEqual(I,K)}else{const I=e,K=t;p=I.operator===K.operator&&Gm(I.conditions,K.conditions,(jt,Gl)=>this.areSimpleModelsEqual(jt,Gl))}return p}shouldRefresh(e){const t=this.getModel(),r=t?t.conditions??[t]:null,i=e.filterOptions?.map(p=>typeof p=="string"?p:p.displayKey)??this.getDefaultFilterOptions();return!(!(!r||r.every(p=>i.find(I=>I===p.type)!==void 0))||typeof e.maxNumConditions=="number"&&r&&r.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const r=e;let i=r.conditions;i==null&&(i=[],rl("Filter model is missing 'conditions'"));const o=this.validateAndUpdateConditions(i),p=this.getNumConditions();if(o<p)this.removeConditionsAndOperators(o);else if(o>p)for(let K=p;K<o;K++)this.createJoinOperatorPanel(),this.createOption();const I=r.operator==="OR";this.eJoinOperatorsAnd.forEach(K=>K.setValue(!I,!0)),this.eJoinOperatorsOr.forEach(K=>K.setValue(I,!0)),i.forEach((K,jt)=>{this.eTypes[jt].setValue(K.type,!0),this.setConditionIntoUi(K,jt)})}else{const r=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(r.type,!0),this.setConditionIntoUi(r,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),F0.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),rl('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(t==null)return!0;const{operator:r}=t,i=[];if(r){const p=t;i.push(...p.conditions??[])}else i.push(t);return i[r&&r==="OR"?"some":"every"](p=>this.individualConditionPasses(e,p))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Wv,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(rl('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(rl('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(rl('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new f0);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const r=this.getNumConditions()-1;this.forEachPositionInput(r,i=>this.resetInput(i)),this.addChangedListeners(e,r)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),r=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const i=this.eJoinOperatorPanels.length-1,o=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,o),this.resetJoinOperatorOr(r,i,o),this.isReadOnly()||(t.onValueChange(this.listener),r.onValueChange(this.listener))}createJoinOperator(e,t,r){const i=this.createManagedBean(new Fv);return e.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass(`ag-filter-condition-operator-${r}`),t.appendChild(i.getGui()),i}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,r=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:r?this.localeService.getLocaleTextFunc()(r.displayKey,r.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let r=0;r<this.getNumConditions();r++)this.isConditionUiComplete(r)?e=r:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const r=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<r){this.removeConditionsAndOperators(r+1);const i=e+1,o=r-i;o>0&&this.removeConditionsAndOperators(i,o),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,o)=>{const p=this.isConditionDisabled(o,e);i.setDisabled(p||this.filterListOptions.length<=1),o===1&&(ov(this.eJoinOperatorPanels[0],p),this.eJoinOperatorsAnd[0].setDisabled(p),this.eJoinOperatorsOr[0].setDisabled(p))}),this.eConditionBodies.forEach((i,o)=>{Cm(i,this.isConditionBodyVisible(o))});const r=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(i=>{i.setValue(!r,!0)}),this.eJoinOperatorsOr.forEach(i=>{i.setValue(r,!0)}),this.forEachInput((i,o,p,I)=>{this.setElementDisplayed(i,o<I),this.setElementDisabled(i,this.isConditionDisabled(p,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const r=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,r,t),this.removeComponents(this.eJoinOperatorsAnd,r,t),this.removeComponents(this.eJoinOperatorsOr,r,t)}removeElements(e,t,r){this.removeItems(e,t,r).forEach(o=>sv(o))}removeComponents(e,t,r){this.removeItems(e,t,r).forEach(o=>{sv(o.getGui()),this.destroyBean(o)})}removeItems(e,t,r){return r==null?e.splice(t):e.splice(t,r)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{const t=this.getInputs(0)[0];if(!t)return;t instanceof $0&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,r=-1,i=!1;const o=this.getJoinOperator();for(let I=this.getNumConditions()-1;I>=0;I--)if(this.isConditionUiComplete(I))t===-1&&(t=I,r=I);else{const K=I>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(I-1),jt=I<t;(K||jt)&&(this.removeConditionsAndOperators(I,1),i=!0,jt&&r--)}let p=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),p=!0),this.shouldAddNewConditionAtEnd(r===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),p=!0),p&&this.updateConditionStatusesAndValues(r,o),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=r}getPlaceholderText(e,t){let r=this.translate(e);if(kl(this.filterPlaceholder)){const i=this.filterPlaceholder,o=this.eTypes[t].getValue(),p=this.translate(o);r=i({filterOptionKey:o,filterOption:p,placeholder:r})}else typeof this.filterPlaceholder=="string"&&(r=this.filterPlaceholder);return r}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((t,r,i,o)=>{if(!(t instanceof $0))return;const p=r===0&&o>1?"inRangeStart":r===0?"filterOoo":"inRangeEnd",I=r===0&&o>1?e("ariaFilterFromValue","Filter from value"):r===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(p,i)),t.setInputAriaLabel(I)})}setElementValue(e,t,r){e instanceof $0&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof cm&&Cm(e.getGui(),t)}setElementDisabled(e,t){e instanceof cm&&ov(e.getGui(),t)}attachElementOnChange(e,t){e instanceof $0&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,r)=>{this.forEachPositionTypeInput(r,t,e)})}forEachPositionInput(e,t){const r=this.getConditionType(e);this.forEachPositionTypeInput(e,r,t)}forEachPositionTypeInput(e,t,r){const i=this.getNumberOfInputs(t),o=this.getInputs(e);for(let p=0;p<o.length;p++){const I=o[p];I!=null&&r(I,p,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(r=>r==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,r)=>this.resetJoinOperatorAnd(t,r,this.joinOperatorId+r)),this.eJoinOperatorsOr.forEach((t,r)=>this.resetJoinOperatorOr(t,r,this.joinOperatorId+r)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),F0.resolve()}resetType(e){const r=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(r).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,r){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),r)}resetJoinOperatorOr(e,t,r){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),r)}resetJoinOperator(e,t,r,i,o){this.updateJoinOperatorDisabled(e.setValue(r,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${o}`).setLabel(i),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const r=this.mapValuesFromModel(e);this.forEachInput((i,o,p)=>{p===t&&this.setElementValue(i,r[o]!=null?r[o]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,r,i)=>{this.setElementValue(t,r===0&&i===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,r=>{this.attachElementOnChange(r,this.listener)}))}individualConditionPasses(e,t){const r=this.getCellValue(e.node),i=this.mapValuesFromModel(t),o=this.optionsFactory.getCustomOption(t.type),p=this.evaluateCustomFilter(o,i,r);return p??(r==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(i,r,t,e))}evaluateCustomFilter(e,t,r){if(e==null)return;const{predicate:i}=e;if(i!=null&&!t.some(o=>o==null))return i(t,r)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},Xy=class extends N1{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,r){const i=this.comparator(),o=e[0]!=null?i(e[0],t):0;switch(r.type){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const p=i(e[1],t);return this.scalarFilterParams.inRangeInclusive?o>=0&&p<=0:o>0&&p<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return rl('Unexpected type of filter "'+r.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},Qy=65,t3=67,gy=86,Pv=68,my=90,vy=89;function $v(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function yy(e,t,r,i,o){const p=i?i.getColDef().suppressKeyboardEvent:void 0;if(!p)return!1;const I=e.addGridCommonParams({event:t,editing:o,column:i,node:r,data:r.data,colDef:i.getColDef()});return!!(p&&p(I))}function B1(e,t,r,i){const o=i.getDefinition(),p=o&&o.suppressHeaderKeyboardEvent;if(!pd(p))return!1;const I=e.addGridCommonParams({colDef:o,column:i,headerRowIndex:r,event:t});return!!p(I)}function r3(e){const{keyCode:t}=e;let r;switch(t){case Qy:r=np.A;break;case t3:r=np.C;break;case gy:r=np.V;break;case Pv:r=np.D;break;case my:r=np.Z;break;case vy:r=np.Y;break;default:r=e.code}return r}function P2(e,t=!1){return e===np.DELETE?!0:!t&&e===np.BACKSPACE?By():!1}var zm=class extends $0{constructor(e,t="ag-text-field",r="text"){super(e,t,r)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=pd(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=r=>{$v(r)&&r.key&&!e.test(r.key)&&r.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:r=>{const i=r.clipboardData?.getData("text");i&&i.split("").some(o=>!e.test(o))&&r.preventDefault()}})}},l1={selector:"AG-INPUT-TEXT-FIELD",component:zm},H1=class extends zm{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const o=parseFloat(this.eInput.value),p=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==p&&this.setValue(p)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:r,step:i}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof r=="number"&&this.setMax(r),typeof i=="number"&&this.setStep(i)}onWheel(e){Hf(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const i=parseFloat(e).toFixed(this.precision);return parseFloat(i).toString()}const r=String(e).split(".");if(r.length>1){if(r[1].length<=this.precision)return e;if(this.precision>0)return`${r[0]}.${r[1].slice(0,this.precision)}`}return r[0]}setMin(e){return this.min===e?this:(this.min=e,U0(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,U0(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,U0(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(r=>super.setValue(r,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,r){if(pd(r)){let i=this.isScientificNotation(r);if(i&&this.eInput.validity.valid)return e(r);if(!i){r=this.adjustPrecision(r);const o=this.normalizeValue(r);i=r!=o}if(i)return t(r)}return e(r)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},Jy={selector:"AG-INPUT-NUMBER-FIELD",component:H1},xy=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],ot=class{constructor(e,t,r){this.localeService=e,this.optionsFactory=t,this.valueFormatter=r}getModelAsString(e){if(!e)return null;const t=e.operator!=null,r=this.localeService.getLocaleTextFunc();if(t){const i=e,p=(i.conditions??[]).map(K=>this.getModelAsString(K)),I=i.operator==="AND"?"andCondition":"orCondition";return p.join(` ${r(I,Y0[I])} `)}else{if(e.type==="blank"||e.type==="notBlank")return r(e.type,e.type);{const i=e,o=this.optionsFactory.getCustomOption(i.type),{displayKey:p,displayName:I,numberOfInputs:K}=o||{};return p&&I&&K===0?(r(p,I),I):this.conditionToString(i,o)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},Me=class extends ot{conditionToString(e,t){const{numberOfInputs:r}=t||{};return e.type=="inRange"||r===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function m(e){const{allowedCharPattern:t}=e??{};return t??null}var l=class extends Xy{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:r,type:i}=e||{};return[this.processValue(t),this.processValue(r)].slice(0,this.getNumberOfInputs(i))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new Me(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return xy}setElementValue(e,t,r){const i=!r&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,i)}createValueElement(){const e=m(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),cg(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,r,i){const o=this.createManagedBean(i?new zm({allowedCharPattern:i}):new H1);o.addCssClass(`ag-filter-${r}`),o.addCssClass("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(r,i,o,p)=>{i<p&&t.push(this.processValue(this.stringToFloat(r.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=ud(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),r={filterType:this.getFilterType(),type:t},i=this.getValues(e);return i.length>0&&(r.filter=i[0]),i.length>1&&(r.filterTo=i[1]),r}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},d=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],x=class extends ot{conditionToString(e,t){const{numberOfInputs:r}=t||{};return e.type=="inRange"||r===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function v(e){const t=e&&e.trim();return t===""?e:t}var y=class extends N1{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:r})=>{if(r==null)return!1;switch(e){case"contains":return t.indexOf(r)>=0;case"notContains":return t.indexOf(r)<0;case"equals":return t===r;case"notEqual":return t!=r;case"startsWith":return t.indexOf(r)===0;case"endsWith":{const i=t.lastIndexOf(r);return i>=0&&i===t.length-r.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new x(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(rl("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:r,filterText:i})=>e(t,r,i)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),r={filterType:this.getFilterType(),type:t},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(r.filter=i[0]),i.length>1&&(r.filterTo=i[1]),r}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const r=[];return this.forEachPositionInput(e,(i,o,p,I)=>{if(o<I){let K=ud(i.getValue());t&&this.textFilterParams.trimInput&&(K=v(K)??null,i.setValue(K,!0)),r.push(K)}}),r}getDefaultFilterOptions(){return d}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),cg(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,r){const i=this.createManagedBean(new zm);i.addCssClass(`ag-filter-${r}`),i.addCssClass("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:r,type:i}=e||{};return[t||null,r||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,r,i){const o=e.map(qu=>this.formatter(qu))||[],p=this.formatter(t),{api:I,colDef:K,column:jt,context:Gl,textFormatter:Fu}=this.textFilterParams;if(r.type==="blank")return this.isBlank(t);if(r.type==="notBlank")return!this.isBlank(t);const Lu={api:I,colDef:K,column:jt,context:Gl,node:i.node,data:i.data,filterOption:r.type,value:p,textFormatter:Fu};return o.some(qu=>this.matcher({...Lu,filterText:qu}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function w(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=parseInt(e);return isNaN(t)?void 0:t}}function S(e,t=Number.MAX_VALUE){return r=>{const i=w(r);if(!(i==null||i<e||i>t))return i}}function c(e,t){return e.toString().padStart(t,"0")}function F(e,t){const r=[];for(let i=e;i<=t;i++)r.push(i);return r}function b(e,t,r){return typeof e!="number"?"":R(Math.round(e*100)/100,t,r)}function R(e,t,r){return typeof e!="number"?"":e.toString().replace(".",r).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function B(e,t=!0,r="-"){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(o=>c(o,2)).join(r);return t&&(i+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(o=>c(o,2)).join(":")),i}var O=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function P(e,t="YYYY-MM-DD"){const r=c(e.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p={YYYY:()=>r.slice(r.length-4,r.length),YY:()=>r.slice(r.length-2,r.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>i[e.getMonth()],MMM:()=>i[e.getMonth()].slice(0,3),MM:()=>c(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${O(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${O(e.getDate())}`,DD:()=>c(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>o[e.getDay()],ddd:()=>o[e.getDay()].slice(0,3),dd:()=>o[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${O(e.getDay())}`,d:()=>`${e.getDay()}`},I=new RegExp(Object.keys(p).join("|"),"g");return t.replace(I,K=>K in p?p[K]():K)}function D(e){if(!e)return null;const[t,r]=e.split(" ");if(!t)return null;const i=t.split("-").map(Lu=>parseInt(Lu,10));if(i.filter(Lu=>!isNaN(Lu)).length!==3)return null;const[o,p,I]=i,K=new Date(o,p-1,I);if(K.getFullYear()!==o||K.getMonth()!==p-1||K.getDate()!==I)return null;if(!r||r==="00:00:00")return K;const[jt,Gl,Fu]=r.split(":").map(Lu=>parseInt(Lu,10));return jt>=0&&jt<24&&K.setHours(jt),Gl>=0&&Gl<60&&K.setMinutes(Gl),Fu>=0&&Fu<60&&K.setSeconds(Fu),K}var H=class{constructor(e,t,r,i,o){this.alive=!0,this.context=e,this.eParent=i,t.getDateCompDetails(r).newAgStackInstance().then(K=>{if(!this.alive){e.destroyBean(K);return}this.dateComp=K,K&&(i.appendChild(K.getGui()),K.afterGuiAttached&&K.afterGuiAttached(),this.tempValue&&K.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),o?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Cm(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;this.dateComp?.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&this.dateComp?.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&rl("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},C=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],A=class extends ot{constructor(e,t,r){super(t,r),this.dateFilterParams=e}conditionToString(e,t){const{type:r}=e,{numberOfInputs:i}=t||{},o=r=="inRange"||i===2,p=D(e.dateFrom),I=D(e.dateTo),K=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(o){const jt=p!==null?P(p,K):"null",Gl=I!==null?P(I,K):"null";return`${jt}-${Gl}`}return p!=null?P(p,K):`${r}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},L=1e3,j=1/0,Z=class extends Xy{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=L,this.maxValidYear=j,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:r,type:i}=e||{};return[t&&D(t)||null,r&&D(r)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){const r=t;return t==null||r<e?-1:r>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(r,i)=>{if(e[r]!=null)if(isNaN(e[r]))rl(`DateFilter ${r} is not a number`);else return e[r]==null?i:Number(e[r]);return i};this.minValidYear=t("minValidYear",L),this.maxValidYear=t("maxValidYear",j),this.minValidYear>this.maxValidYear&&rl("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:D(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:D(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&rl("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new A(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new H(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return C}createValueElement(){const t=kf(this.gos).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,r,i){const p=kf(this.gos).createElement("div");p.classList.add(`ag-filter-${i}`),p.classList.add(`ag-filter-date-${i}`),t.push(p),e.appendChild(p),r.push(this.createDateCompWrapper(p))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,r){this.removeItems(e,t,r).forEach(o=>o.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((r,i,o,p)=>{o!==e||!t||i>=p||(t=t&&this.isValidDateValue(r.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),r={},i=this.getValues(e);return i.length>0&&(r.dateFrom=B(i[0])),i.length>1&&(r.dateTo=B(i[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...r}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),r=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(r)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(r,i,o,p)=>{i<p&&t.push(r.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},nl=class extends Rh{constructor(e,t,r,i){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=i,this.beans=r}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?wf(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=pd(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),r=e.getOldLeft(),i=this.modifyLeftForPrintLayout(e,r),o=this.modifyLeftForPrintLayout(e,t);this.setLeft(i),this.actualLeft=o,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===o&&this.setLeft(o)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!Ih(this.beans.gos,"print")||e.getPinned()==="left")return t;const i=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){const o=this.beans.visibleColsService.getBodyContainerWidth();return i+o+t}return i+t}setLeft(e){if(pd(e)&&(this.eCell.style.left=`${e}px`),Yh(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&mg(this.ariaEl,t.length)}}},Pe="ag-column-first",se="ag-column-last";function q(e,t,r,i){return id(e)?[]:_t(e.headerClass,e,t,r,i)}function ol(e,t,r,i){return id(e)?[]:_t(e.toolPanelClass,e,t,r,i)}function nt(e,t,r){e.addOrRemoveCssClass(Pe,r.isColAtEdge(t,"first")),e.addOrRemoveCssClass(se,r.isColAtEdge(t,"last"))}function In(e,t,r,i){return t.addGridCommonParams({colDef:e,column:r,columnGroup:i})}function _t(e,t,r,i,o){if(id(e))return[];let p;if(typeof e=="function"){const I=In(t,r,i,o);p=e(I)}else p=e;return typeof p=="string"?[p]:Array.isArray(p)?[...p]:[]}var Fn=0,al=class hb extends Rh{constructor(t,r,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=i,this.beans=r,this.instanceId=t.getUniqueId()+"-"+Fn++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){const t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}shouldStopEventPropagation(t){const{headerRowIndex:r,column:i}=this.focusService.getFocusedHeader();return B1(this.gos,t,r,i)}getWrapperHasFocus(){return Hf(this.gos)===this.eGui}setGui(t,r){this.eGui=t,this.addDomData(r),r.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),r.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){const{wrapperElement:r,checkMeasuringCallback:i,compBean:o}=t,{animationFrameService:p,resizeObserverService:I,columnModel:K,gos:jt}=this.beans,Gl=Zh=>{if(!this.isAlive()||!o.isAlive())return;const{paddingTop:Wh,paddingBottom:Rp,borderBottomWidth:Tp,borderTopWidth:Mp}=av(this.getGui()),Of=Wh+Rp+Tp+Mp,Jf=r.offsetHeight+Of;if(Zh<5){const sg=kf(jt),mm=!sg||!sg.contains(r),Um=Jf==0;if(mm||Um){p.requestAnimationFrame(()=>Gl(Zh+1));return}}K.setColHeaderHeight(this.column,Jf)};let Fu=!1,Lu;const qu=()=>{const Zh=this.column.isAutoHeaderHeight();Zh&&!Fu&&Xd(),!Zh&&Fu&&Vh()},Xd=()=>{Fu=!0,Gl(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),Lu=I.observeResize(r,()=>Gl(0))},Vh=()=>{Fu=!1,Lu&&Lu(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),Lu=void 0};qu(),o.addDestroyFunc(()=>Vh()),o.addManagedListeners(this.column,{widthChanged:()=>Fu&&Gl(0)}),o.addManagedEventListeners({sortChanged:()=>{Fu&&window.setTimeout(()=>Gl(0))}}),i&&i(qu)}onDisplayedColumnsChanged(){const{comp:t,column:r,beans:i,eGui:o}=this;!t||!r||!o||(nt(t,r,i.visibleColsService),hm(o,i.visibleColsService.getAriaColIndex(r)))}addResizeAndMoveKeyboardListeners(t){this.resizeFeature&&t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const t=this.focusService.isHeaderFocusSuppressed();this.eGui&&U0(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){const r=Hf(this.gos),i=t.key===np.LEFT||t.key===np.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),r!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||i)&&(t.preventDefault(),t.stopImmediatePropagation()),!i))return;const o=t.key===np.LEFT!==this.gos.get("enableRtl"),p=uy[o?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const I=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(I,t.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(p)}getViewportAdjustedResizeDiff(t){let r=this.getResizeDiff(t);if(this.column.getPinned()){const o=this.pinnedWidthService.getPinnedLeftWidth(),p=this.pinnedWidthService.getPinnedRightWidth(),I=zv(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(o+p+r>I)if(I>o+p)r=I-o-p;else return 0}return r}getResizeDiff(t){let r=t.key===np.LEFT!==this.gos.get("enableRtl");const i=this.column.getPinned(),o=this.gos.get("enableRtl");return i&&o!==(i==="right")&&(r=!r),(r?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(t){const r=this.getWrapperHasFocus();switch(t.key){case np.PAGE_DOWN:case np.PAGE_UP:case np.PAGE_HOME:case np.PAGE_END:r&&t.preventDefault()}}addDomData(t){const r=hb.DOM_DATA_KEY_HEADER_CTRL;Zp(this.gos,this.eGui,r,this),t.addDestroyFunc(()=>Zp(this.gos,this.eGui,r,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,r,i){const o=t??r;this.gos.get("preventDefaultOnContextMenu")&&o.preventDefault(),this.menuService.isHeaderContextMenuEnabled(i)&&this.menuService.showHeaderContextMenu(i,t,r),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(t,r){this.eventService.dispatchEvent({type:t,column:r})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};al.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var sl=al,ce=class extends Rh{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},ll=class extends sl{constructor(e,t,r){super(e,t,r),this.iconCreated=!1,this.column=e}setComp(e,t,r,i,o){this.comp=e,o=Zf(this,this.beans.context,o),this.eButtonShowMainFilter=r,this.eFloatingFilterBody=i,this.setGui(t,o),this.setupActive(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o),o.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(o)}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,r=!!e.floatingFilter;this.active=t&&r}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=D0("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new tv(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();gg(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(Hf(this.gos)===this.eGui)return;const i=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(i){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),i.focus();return}const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let r=this.column;do if(r=e?t.getColBefore(r):t.getColAfter(r),!r)break;while(!r.getColDef().filter||!r.getColDef().floatingFilter);return r}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case np.UP:case np.DOWN:t||e.preventDefault();case np.LEFT:case np.RIGHT:if(t)return;e.stopPropagation();case np.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case np.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const r=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&H0(e.relatedTarget,"ag-floating-filter");if(r&&i&&e.target===this.eGui){const p=this.lastFocusEvent,I=!!(p&&p.key===np.TAB);if(p&&I){const K=p.shiftKey;this.focusService.focusInto(this.eGui,K)}}const o=this.getRowIndex();this.beans.focusService.setFocusedHeader(o,this.column)}setupHover(e){e.createManagedBean(new ce([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const r=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",r)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){const t=new nl(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,r=i=>{if(i?.source==="filterDestroyed"&&!this.isAlive())return;const o=this.comp.getFloatingFilterComp();o&&o.then(p=>{if(p){const I=t?.getCurrentFloatingFilterParentModel(this.column),K=i?{...i,columns:i.columns??[],source:i.source==="api"?"api":"columnFilter"}:null;p.onParentModelChanged(I,K)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:r}),t?.isFilterActive(this.column)&&r(null)}setupWidth(e){const t=()=>{const r=`${this.column.getActualWidth()}px`;this.comp.setWidth(r)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const r=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const i=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!i?this.updateCompDetails(e,i,r):o.then(p=>{!p||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,i)?this.updateCompDetails(e,i,r):this.updateFloatingFilterParams(i)})}updateCompDetails(e,t,r){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),r&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;const t=e.params;this.comp.getFloatingFilterComp()?.then(r=>{let i=!1;r?.refresh&&typeof r.refresh=="function"&&r.refresh(t)!==null&&(i=!0),!i&&r?.onParamsUpdated&&typeof r.onParamsUpdated=="function"&&r.onParamsUpdated(t)!==null&&rl("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function ul(e){return e}var fl="32.3.9";function bl(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()}function El(e,t,r){return e.filterManager?.getFilterInstance(t,r)}function Ul(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function ql(e,t){const r=e.columnModel.getColDefCol(t);if(r)return e.filterManager?.destroyFilter(r,"api")}function gu(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function Bn(e){return e.filterManager?.getFilterModel()??{}}function il(e,t){return e.filterManager?.getColumnFilterModel(t)??null}function X(e,t,r){return e.filterManager?.setColumnFilterModel(t,r)??Promise.resolve()}function cl(e,t){const r=e.columnModel.getCol(t);if(!r){Ml(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:r,containerType:"columnFilter",positionBy:"auto"})}function Sl(e,t,r){if(t==null)return null;let i=null;const{compName:o,jsComp:p,fwComp:I}=cy.getCompKeys(e,t,m1);return o?i={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[o]:p==null&&I==null&&t.filter===!0&&(i=r()),i}var st={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},U=["january","february","march","april","may","june","july","august","september","october","november","december"],re=class extends Rh{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...this.gos.get("initialState")?.filter?.filterModel??{}}}setFilterModel(e,t="api"){if(this.dataTypeService?.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}const r=[],i=this.getFilterModel(!0);if(e){const o=new Set(Object.keys(e));this.allColumnFilters.forEach((p,I)=>{const K=e[I];r.push(this.setModelOnFilterWrapper(p.filterPromise,K)),o.delete(I)}),o.forEach(p=>{const I=this.columnModel.getColDefCol(p)||this.columnModel.getCol(p);if(!I){rl("setFilterModel() - no column found for colId: "+p);return}if(!I.isFilterAllowed()){rl("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+p);return}const K=this.getOrCreateFilterWrapper(I);if(!K){rl("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+p);return}r.push(this.setModelOnFilterWrapper(K.filterPromise,e[p]))})}else this.allColumnFilters.forEach(o=>{r.push(this.setModelOnFilterWrapper(o.filterPromise,null))});F0.all(r).then(()=>{const o=this.getFilterModel(!0),p=[];this.allColumnFilters.forEach((I,K)=>{const jt=i?i[K]:null,Gl=o?o[K]:null;Gd(jt,Gl)||p.push(I.column)}),p.length>0&&this.filterManager?.onFilterChanged({columns:p,source:t})})}setModelOnFilterWrapper(e,t){return new F0(r=>{e.then(i=>{typeof i.setModel!="function"&&(rl("filter missing setModel method, which is needed for setFilterModel"),r()),(i.setModel(t)||F0.resolve()).then(()=>r())})})}getFilterModel(e){const t={},{allColumnFilters:r,initialFilterModel:i}=this;return r.forEach((o,p)=>{const I=this.getModelFromFilterWrapper(o);pd(I)&&(t[p]=I)}),e||Object.entries(i).forEach(([o,p])=>{pd(p)&&!r.has(o)&&this.columnModel.getCol(o)?.isFilterAllowed()&&(t[o]=p)}),t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?typeof t.getModel!="function"?(rl("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=p=>p?p.isFilterActive?p.isFilterActive():(rl("Filter is missing isFilterActive() method"),!1):!1,t=!!Lg(this.gos),r=p=>{if(!p.isPrimary())return!0;const K=!this.columnModel.isPivotActive();return!p.isValueActive()||!K?!1:this.columnModel.isPivotMode()?!0:t},i=[],o=[];return this.forEachColumnFilter((p,I)=>{e(p)&&(r(I.column)?i.push(p):o.push(p))}).then(()=>{this.activeAggregateFilters=i,this.activeColumnFilters=o})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((r,i)=>i.column.setFilterActive(r.isFilterActive(),e,t))}forEachColumnFilter(e){return F0.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(r=>e(r,t))))}doColumnFiltersPass(e,t,r){const{data:i,aggData:o}=e,p=r?this.activeAggregateFilters:this.activeColumnFilters,I=r?o:i;for(let K=0;K<p.length;K++){const jt=p[K];if(!(jt==null||jt===t)){if(typeof jt.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!jt.doesFilterPass({node:e,data:I}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:r}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",r).then(()=>{this.allColumnFilters.forEach(i=>{i.filterPromise&&i.filterPromise.then(o=>{o&&o!==t&&o.onAnyFilterChanged&&o.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,r)=>{const i=r?this.columnModel.getCol(r):e;return i?this.valueService.getValue(i,t,!0):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(r0(this.gos))t="agSetColumnFilter";else{const r=this.dataTypeService?.getBaseDataType(e);r==="number"?t="agNumberColumnFilter":r==="date"||r==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(r0(this.gos))t="agSetColumnFloatingFilter";else{const r=this.dataTypeService?.getBaseDataType(e);r==="number"?t="agNumberColumnFloatingFilter":r==="date"||r==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const r=this.getDefaultFilter(e),i=e.getColDef();let o;const p={...this.createFilterParams(e,i),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(o,e)(),filterChangedCallback:K=>this.filterChangedCallbackFactory(o,e)(K),doesRowPassOtherFilter:K=>this.filterManager?this.filterManager.doesRowPassOtherFilters(o,K):!0},I=this.userComponentFactory.getFilterDetails(i,p,r);return I?{filterPromise:()=>{const K=I.newAgStackInstance();return K?.then(jt=>{o=jt,t&&(t.filter=jt)}),K},compDetails:I}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:Q(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:r,compDetails:i}=this.createFilterInstance(e,t);return t.filterPromise=r?.()??null,t.compDetails=i,t}onColumnsChanged(){const e=[];this.allColumnFilters.forEach((r,i)=>{let o;r.column.isPrimary()?o=this.columnModel.getColDefCol(i):o=this.columnModel.getCol(i),!(o&&o===r.column)&&(e.push(r.column),this.disposeFilterWrapper(r,"columnChanged"),this.disposeColumnListener(i))});const t=e.every(r=>r.getColDef().filter==="agGroupColumnFilter");e.length>0&&!t?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.columnModel.getAutoCols()?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:r}=this.allColumnFilters.get(e.getColId())??{};return r&&typeof r?.isFilterAllowed=="function"?r.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){const r=jt=>{const Gl=this.getOrCreateFilterWrapper(e)?.filterPromise;Gl?.then(Fu=>{jt(a1(Fu))})},i=e.getColDef(),o={...this.createFilterParams(e,i),filterChangedCallback:()=>r(jt=>this.filterChangedCallbackFactory(jt,e)())},p=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,m1,o);let I=Sl(this.frameworkOverrides,i,()=>this.getDefaultFloatingFilter(e));I==null&&(I="agReadOnlyFloatingFilter");const K={column:e,filterParams:p,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:r,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,K,I)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){const r=e.getColId(),i=this.allColumnFilters.get(r);this.disposeColumnListener(r),delete this.initialFilterModel[r],i&&(this.disposeFilterWrapper(i,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(r=>{this.destroyBean(r),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return r=>{const i=r?.source??"columnFilter",o={filter:e,additionalEventAttributes:r,columns:[t],source:i};this.callOnFilterChangedOutsideRenderCycle(o)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const r=t.column,{compDetails:i}=r.isFilterAllowed()?this.createFilterInstance(r):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,i)){this.destroyFilter(r,"paramsUpdated");return}const o=r.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(r,"paramsUpdated");return}t.filterPromise.then(p=>{(p?.refresh?p.refresh({...this.createFilterParams(r,r.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(p,r),filterChangedCallback:this.filterChangedCallbackFactory(p,r),doesRowPassOtherFilter:K=>this.filterManager?this.filterManager.doesRowPassOtherFilters(p,K):!0,...o}):!0)===!1&&this.destroyFilter(r,"paramsUpdated")})}setColumnFilterWrapper(e,t){const r=e.getColId();this.allColumnFilters.set(r,t),this.allColumnListeners.set(r,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(r)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:r}=e,{componentClass:i}=t;return!(r===i||r?.render&&i?.render&&r.render===i.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(r=>{const i=a1(r);t(i)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(r=>{t(a1(r))})})}getFilterInstanceImpl(e){const t=this.columnModel.getColDefCol(e);return t?this.getOrCreateFilterWrapper(t)?.filterPromise??F0.resolve(null):F0.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:r})=>{this.setColumnFilterModel(e,t).then(()=>r())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let p=()=>{};const I=new Promise(K=>{p=K});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:p}),I}const r=this.columnModel.getColDefCol(e),i=r?this.getOrCreateFilterWrapper(r):null;return i?(p=>new Promise(I=>{p.then(K=>I(K))}))(this.setModelOnFilterWrapper(i.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){const t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,r){const i=r0(this.gos),o=this.localeService.getLocaleTextFunc(),p=I=>{const{filterParams:K}=e;e.filterParams=typeof K=="object"?{...K,...I}:I};switch(t.baseDataType){case"number":{i&&p({comparator:(I,K)=>{const jt=I==null?0:parseInt(I),Gl=K==null?0:parseInt(K);return jt===Gl?0:jt>Gl?1:-1}});break}case"boolean":{p(i?{valueFormatter:I=>pd(I.value)?o(String(I.value),I.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(I,K)=>K,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(I,K)=>K===!1,numberOfInputs:0}]});break}case"date":{i&&p({valueFormatter:I=>{const K=r(I);return pd(K)?K:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(I,K)=>{if(K===1&&I!=null){const jt=U[Number(I)-1];return o(jt,st[jt])}return I??o("blanks","(Blanks)")}});break}case"dateString":{const I=t.dateParser;p(i?{valueFormatter:K=>{const jt=r(K);return pd(jt)?jt:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:K=>{const jt=I(K??void 0);return jt?[String(jt.getFullYear()),String(jt.getMonth()+1),String(jt.getDate())]:null},treeListFormatter:(K,jt)=>{if(jt===1&&K!=null){const Gl=U[Number(K)-1];return o(Gl,st[Gl])}return K??o("blanks","(Blanks)")}}:{comparator:(K,jt)=>{const Gl=I(jt);return jt==null||Gl<K?-1:Gl>K?1:0}});break}case"object":{i?p({valueFormatter:I=>{const K=r(I);return pd(K)?K:o("blanks","(Blanks)")}}):e.filterValueGetter=I=>r({column:I.column,node:I.node,value:this.valueService.getValue(I.column,I.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function Ft(e){return!!e.filterManager?.isAnyFilterPresent()}function ls(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var _l=class extends cm{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[l1]),this.eFloatingFilterText=Cf}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),r=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${r("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const r=t.getModelAsString(e);this.eFloatingFilterText.setValue(r)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},Ll=class extends cm{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let r;t?r=e.conditions[0]:r=e,this.lastType=r.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const r=e;return this.isTypeEditable(r.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new Wv,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const r=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(r)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:r}=t||{};return r==null||r==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),r=this.localeService.getLocaleTextFunc();return`${t} ${r("ariaFilterInput","Filter Input")}`}},zl=class extends Ll{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[l1]),this.eReadOnlyText=Cf,this.eDateWrapper=Cf}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return C}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new A(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const r=e;this.dateComp.setDate(D(r.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Cm(this.eDateWrapper,e),Cm(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=B(e);this.params.parentFilterInstance(r=>{if(r){const i=D(t);r.onFloatingFilterChanged(this.getLastType()||null,i)}})}getDateComponentParams(){const e=Uv(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:$l(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new H(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},yu=class extends cm{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[l1]),this.eDateInput=Cf}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:r=>{r.target===Hf(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),r=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=r&&mv(),t.type=r?"date":"text";const{minValidYear:i,maxValidYear:o,minValidDate:p,maxValidDate:I}=e.filterParams||{};if(p&&i&&rl("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),I&&o&&rl("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),p&&I){const[K,jt]=[p,I].map(Gl=>Gl instanceof Date?Gl:D(Gl));K&&jt&&K.getTime()>jt.getTime()&&rl("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}p?p instanceof Date?t.min=P(p):t.min=p:i&&(t.min=`${i}-01-01`),I?I instanceof Date?t.max=P(I):t.max=I:o&&(t.max=`${o}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return D(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(B(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:r1()||J1()||mv()&&x2()>=14.1}},Vu=class extends Rh{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=Cf,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new zm(this.params?.config));const t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);const r=i=>this.valueChangedListener(i);this.addManagedListeners(t,{input:r,keydown:r})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},od=class extends Ll{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Cf}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=z1(this.params.filterParams),!this.isReadOnly()){const r=Uv(this.params.filterParams,this.getDefaultDebounceMs()),i=$l(this.syncUpWithParentFilter.bind(this),r);this.floatingFilterInputService.setValueChangedListener(i)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();_0(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===np.ENTER;if(this.applyActive&&!t)return;let r=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(r=v(r),this.floatingFilterInputService.setValue(r,!0)),this.params.parentFilterInstance(i=>{i&&i.onFloatingFilterChanged(this.getLastType()||null,r||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},Ad=class extends Rh{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new H1),this.eFloatingFilterTextInput=this.createManagedBean(new zm),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),r=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(r),this.setupListeners(t,i=>this.valueChangedListener(i)),this.setupListeners(r,i=>this.valueChangedListener(i))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},vd=class extends od{init(e){super.init(e),this.filterModelFormatter=new Me(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){m(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return xy}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=m(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Vu({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Ad)}},fd=class extends od{init(e){super.init(e),this.filterModelFormatter=new x(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return d}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new Vu)}};function Kl(e){return!!e.filterManager?.isQuickFilterPresent()}function vu(e){return e.gos.get("quickFilterText")}function Rl(e){e.filterManager?.resetQuickFilterCache()}var Wu=class extends Rh{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){const e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),r=this.columnModel.getColDefCols();let i=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:r)??[];t&&(i=i.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?i:i.filter(o=>o.isVisible()||o.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(r=>t?this.doesRowPassQuickFilterCache(e,r):this.doesRowPassQuickFilterNoCache(e,r))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return pd(e)?Rd(this.gos)?e.toUpperCase():(rl("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){rl(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),r=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,r&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(r=>{const i=this.getQuickFilterTextForColumn(r,e);return pd(i)&&i.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let r;e?(this.checkGenerateQuickFilterAggregateText(t),r=t.quickFilterAggregateText):r=this.getQuickFilterAggregateText(t);const{quickFilterParts:i,matcher:o}=this;return o(i,r)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let r=this.valueService.getValue(e,t,!0);const i=e.getColDef();if(i.getQuickFilterText){const o=this.gos.addGridCommonParams({value:r,node:t,data:t.data,column:e,colDef:i});r=i.getQuickFilterText(o)}return pd(r)?r.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach(r=>{const i=this.getQuickFilterTextForColumn(r,e);pd(i)&&t.push(i)}),t.join(`
`)}},cd={version:fl,moduleName:"@ag-grid-community/filter-core",beans:[hy]},xd={version:fl,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:Ft,onFilterChanged:ls},dependantModules:[cd]},Td={version:fl,moduleName:"@ag-grid-community/column-filter",beans:[re],dependantModules:[cd]},Pd={version:fl,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:bl,getFilterInstance:El,getColumnFilterInstance:Ul,destroyFilter:ql,setFilterModel:gu,getFilterModel:Bn,getColumnFilterModel:il,setColumnFilterModel:X,showColumnFilter:cl},dependantModules:[Td,xd]},Hd={version:fl,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:ll}],dependantModules:[Td]},$d={version:fl,moduleName:"@ag-grid-community/floating-filter",dependantModules:[Hd,Td]},Wd={version:fl,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:_l}],dependantModules:[Hd]},mh={version:fl,moduleName:"@ag-grid-community/simple-filter",dependantModules:[Td],userComponents:[{name:"agTextColumnFilter",classImp:y},{name:"agNumberColumnFilter",classImp:l},{name:"agDateColumnFilter",classImp:Z},{name:"agDateInput",classImp:yu}]},Dd={version:fl,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[mh,Hd],userComponents:[{name:"agTextColumnFloatingFilter",classImp:fd},{name:"agNumberColumnFloatingFilter",classImp:vd},{name:"agDateColumnFloatingFilter",classImp:zl}]},bh={version:fl,moduleName:"@ag-grid-community/quick-filter-core",beans:[Wu],dependantModules:[cd]},Dh={version:fl,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:Kl,getQuickFilter:vu,resetQuickFilter:Rl},dependantModules:[bh]},vh={version:fl,moduleName:"@ag-grid-community/quick-filter",dependantModules:[bh,Dh]},Gh={version:fl,moduleName:"@ag-grid-community/filter",dependantModules:[Dd,Wd,vh,Pd]},Ql=class extends cm{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},Ku=class extends Ql{constructor(e){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,e),this.eFloatingFilterBody=Cf,this.eButtonWrapper=Cf,this.eButtonShowMainFilter=Cf}postConstruct(){const e=this.getGui(),t={addOrRemoveCssClass:(r,i)=>this.addOrRemoveCssClass(r,i),addOrRemoveBodyCssClass:(r,i)=>this.eFloatingFilterBody.classList.toggle(r,i),setButtonWrapperDisplayed:r=>Cm(this.eButtonWrapper,r),setCompDetails:r=>this.setCompDetails(r),getFloatingFilterComp:()=>this.compPromise,setWidth:r=>e.style.width=r,setMenuIcon:r=>this.eButtonShowMainFilter.appendChild(r)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},gl=class extends Ql{constructor(e){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,e),this.eResize=Cf,this.eHeaderCompWrapper=Cf,this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){const e=this.getGui();((o,p)=>{p!=null&&p!=""?e.setAttribute(o,p):e.removeAttribute(o)})("col-id",this.column.getColId());const r={setWidth:o=>e.style.width=o,addOrRemoveCssClass:(o,p)=>this.addOrRemoveCssClass(o,p),setAriaSort:o=>o?Np(e,o):jf(e),setUserCompDetails:o=>this.setUserCompDetails(o),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(r,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);const i=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",i)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(r=>this.afterCompCreated(t,r))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},Dl=class extends Ql{constructor(e){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,e),this.eResize=Cf,this.eHeaderCompWrapper=Cf}postConstruct(){const e=this.getGui(),t=(i,o)=>o!=null?e.setAttribute(i,o):e.removeAttribute(i);e.setAttribute("col-id",this.ctrl.getColId());const r={addOrRemoveCssClass:(i,o)=>this.addOrRemoveCssClass(i,o),setHeaderWrapperHidden:i=>{i?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:i=>{i!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${i}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",i!=null)},setResizableDisplayed:i=>Cm(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>t("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(r,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}const r=this.getGui(),i=e.getGui();this.eHeaderCompWrapper.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(r)}addOrRemoveHeaderWrapperStyle(e,t){const{eHeaderCompWrapper:r}=this;t?r.style.setProperty(e,t):r.style.removeProperty(e)}},Vl=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(Vl||{}),Mu=class extends cm{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){Zg(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,r)=>this.setHeaderCtrls(t,r),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;const r=this.headerComps;if(this.headerComps={},e.forEach(i=>{const o=i.instanceId;let p=r[o];delete r[o],p==null&&(p=this.createHeaderComp(i),this.getGui().appendChild(p.getGui())),this.headerComps[o]=p}),W(r,(i,o)=>{this.getGui().removeChild(o.getGui()),this.destroyBean(o)}),t){const i=Ln(this.headerComps);i.sort((p,I)=>{const K=p.getCtrl().getColumnGroupChild().getLeft(),jt=I.getCtrl().getColumnGroupChild().getLeft();return K-jt});const o=i.map(p=>p.getGui());m2(this.getGui(),o)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new Dl(e);break;case"filter":t=new Ku(e);break;default:t=new gl(e);break}return this.createBean(t),t.setParentComponent(this),t}},Nu=(e=>(e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e))(Nu||{}),ed=class extends Rh{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl});const e=kf(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){return this.ctrlsService.getHeaderRowContainerCtrl()?.getRowCount()??0}getHeaderPositionForColumn(e,t){let r;if(typeof e=="string"?(r=this.columnModel.getCol(e),r||(r=this.visibleColService.getColumnGroup(e))):r=e,!r)return null;const o=this.ctrlsService.getHeaderRowContainerCtrl()?.getAllCtrls(),p=wf(o||[]).getType()==="filter",I=this.getHeaderRowCount()-1;let K=-1,jt=r;for(;jt;)K++,jt=jt.getParent();let Gl=K;return t&&p&&Gl===I-1&&Gl++,Gl===-1?null:{headerRowIndex:Gl,column:r}}navigateVertically(e,t,r){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:i}=t,o=t.column,p=this.getHeaderRowCount(),I=e===0;let{headerRowIndex:K,column:jt,headerRowIndexWithoutSpan:Gl}=I?this.headerPositionUtils.getColumnVisibleParent(o,i):this.headerPositionUtils.getColumnVisibleChild(o,i),Fu=!1;return K<0&&(K=0,jt=o,Fu=!0),K>=p?(K=-1,this.setCurrentHeaderRowWithoutSpan(-1)):Gl!==void 0&&(this.currentHeaderRowWithoutSpan=Gl),!Fu&&!jt?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:K,column:jt},allowUserOverride:!0,event:r})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,r){const i=this.focusService.getFocusedHeader(),o=e===2,p=this.gos.get("enableRtl");let I,K;if(this.currentHeaderRowWithoutSpan!==-1?i.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=i.headerRowIndex,o!==p?(K="Before",I=this.headerPositionUtils.findHeader(i,K)):(K="After",I=this.headerPositionUtils.findHeader(i,K)),I||!t)return this.focusService.focusHeaderPosition({headerPosition:I,direction:K,fromTab:t,allowUserOverride:!0,event:r});if(t){const jt=this.gos.getCallback("tabToNextHeader");if(jt)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:jt,headerPosition:I,direction:K})}return this.focusNextHeaderRow(i,K,r)}focusNextHeaderRow(e,t,r){const i=e.headerRowIndex;let o=null,p;if(t==="Before"?i>0&&(p=i-1,this.currentHeaderRowWithoutSpan-=1,o=this.headerPositionUtils.findColAtEdgeForHeaderRow(p,"end")):(p=i+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),o=this.headerPositionUtils.findColAtEdgeForHeaderRow(p,"start")),!o)return!1;const{column:I,headerRowIndex:K}=this.headerPositionUtils.getHeaderIndexToFocus(o.column,o?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:I,headerRowIndex:K},direction:t,fromTab:!0,allowUserOverride:!0,event:r})}scrollToColumn(e,t="After"){if(e.getPinned())return;let r;if(Yh(e)){const i=e.getDisplayedLeafColumns();r=t==="Before"?wf(i):i[0]}else r=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(r)}},sd=class extends Rh{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,r){this.comp=e,this.eGui=t,this.createManagedBean(new tv(r,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const i=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:i}),this.mockContextMenuForIPad(i),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let t=0;const r=this.columnModel.getGroupRowsHeight().reduce((p,I)=>p+I,0),i=this.columnModel.getColumnHeaderRowHeight();if(this.filterManager?.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=r,t+=i,this.headerHeight===t)return;this.headerHeight=t;const o=`${t+1}px`;this.comp.setHeightAndMinHeight(o),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.visibleColsService.getAllCols().some(r=>r.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),r=e.shiftKey,i=r!==t?2:3;(this.headerNavigationService.navigateHorizontally(i,!0,e)||!r&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(r,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case np.LEFT:t=2;case np.RIGHT:{pd(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case np.UP:t=0;case np.DOWN:{pd(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(Hf(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,r){if(!e&&!r||!this.menuService.isHeaderContextMenuEnabled())return;const{target:i}=e??t;(i===this.eGui||i===this.ctrlsService.getHeaderRowContainerCtrl()?.getViewportElement())&&this.menuService.showHeaderContextMenu(void 0,e,r)}mockContextMenuForIPad(e){if(!Av())return;const t=new J0(this.eGui),r=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:r}),this.addDestroyFunc(()=>t.destroy())}},Sd=class extends Rh{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=Ih(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),r=this.visibleColsService.getColsLeftWidth(),i=this.visibleColsService.getDisplayedColumnsRightWidth();let o;e?o=t+r+i:(o=t,this.addSpacer&&(this.gos.get("enableRtl")?r:i)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(o+=this.scrollVisibleService.getScrollbarWidth())),this.callback(o)}},yd=class extends Rh{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(r=>{r.isPrimary()&&(r.isAnyFunctionActive()||(r.isAllowValue()?this.columnsToAggregate.push(r):r.isAllowRowGroup()?this.columnsToGroup.push(r):r.isAllowPivot()&&this.columnsToPivot.push(r)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function bd(e){const{isFromHeader:t,fromLeft:r,xPosition:i,fromEnter:o,fakeEvent:p,pinned:I,gos:K,columnModel:jt,columnMoveService:Gl,visibleColsService:Fu}=e;let{allMovingColumns:Lu}=e;if(t){const zg=[];Lu.forEach(Jf=>{let sg=null,mm=Jf.getParent();for(;mm!=null&&mm.getDisplayedLeafColumns().length===1;)sg=mm,mm=mm.getParent();sg!=null?(!!sg.getColGroupDef()?.marryChildren?sg.getProvidedColumnGroup().getLeafColumns():sg.getLeafColumns()).forEach(Dy=>{zg.includes(Dy)||zg.push(Dy)}):zg.includes(Jf)||zg.push(Jf)}),Lu=zg}const qu=Lu.slice();jt.sortColsLikeCols(qu);const Xd=sp({movingCols:qu,draggingRight:r,xPosition:i,pinned:I,gos:K,columnModel:jt,visibleColsService:Fu}),Vh=Jd(qu,jt);if(Xd.length===0)return;const Zh=Xd[0];let Wh=Vh!==null&&!o;if(t&&(Wh=Vh!==null),Wh&&!p&&(!r&&Zh>=Vh||r&&Zh<=Vh))return;const Rp=Fu.getAllCols(),Tp=[];let Mp=null;for(let zg=0;zg<Xd.length;zg++){const Jf=Xd[zg],sg=Gl.getProposedColumnOrder(qu,Jf);if(!Gl.doesOrderPassRules(sg))continue;const mm=sg.filter(_3=>Rp.includes(_3));if(Mp===null)Mp=mm;else if(!Gm(mm,Mp))break;const Um=th(sg);Tp.push({move:Jf,fragCount:Um})}if(Tp.length===0)return;Tp.sort((zg,Jf)=>zg.fragCount-Jf.fragCount);const Of=Tp[0].move;if(!(Of>jt.getCols().length-Lu.length))return{columns:Lu,toIndex:Of}}function Kd(e){const{columns:t,toIndex:r}=bd(e)||{},{finished:i,columnMoveService:o}=e;return!t||r==null?null:(o.moveColumns(t,r,"uiColumnMoved",i),i?null:{columns:t,toIndex:r})}function Jd(e,t){const r=t.getCols(),i=i0(e.map(jt=>r.indexOf(jt))),o=i[0];return wf(i)-o!==i.length-1?null:o}function th(e){function t(i){const o=[];let p=i.getOriginalParent();for(;p!=null;)o.push(p),p=p.getOriginalParent();return o}let r=0;for(let i=0;i<e.length-1;i++){let o=t(e[i]),p=t(e[i+1]);[o,p]=o.length>p.length?[o,p]:[p,o],o.forEach(I=>{p.indexOf(I)===-1&&r++})}return r}function Hh(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function sp(e){const{movingCols:t,draggingRight:r,xPosition:i,pinned:o,gos:p,columnModel:I,visibleColsService:K}=e;if(p.get("suppressMovableColumns")||t.some(Mp=>Mp.getColDef().suppressMovable))return[];const Gl=Hh(K,o),Fu=I.getCols(),Lu=Gl.filter(Mp=>sm(t,Mp)),qu=Gl.filter(Mp=>!sm(t,Mp)),Xd=Fu.filter(Mp=>!sm(t,Mp));let Vh=0,Zh=i;if(r){let Mp=0;Lu.forEach(Of=>Mp+=Of.getActualWidth()),Zh-=Mp}if(Zh>0){for(let Mp=0;Mp<qu.length;Mp++){const Of=qu[Mp];if(Zh-=Of.getActualWidth(),Zh<0)break;Vh++}r&&Vh++}let Wh;if(Vh>0){const Mp=qu[Vh-1];Wh=Xd.indexOf(Mp)+1}else Wh=Xd.indexOf(qu[0]),Wh===-1&&(Wh=0);const Rp=[Wh],Tp=(Mp,Of)=>Mp-Of;if(r){let Mp=Wh+1;const Of=Fu.length-1;for(;Mp<=Of;)Rp.push(Mp),Mp++;Rp.sort(Tp)}else{let Mp=Wh;const Of=Fu.length-1;let zg=Fu[Mp];for(;Mp<=Of&&Gl.indexOf(zg)<0;)Mp++,Rp.push(Mp),zg=Fu[Mp];Mp=Wh-1;const Jf=0;for(;Mp>=Jf;)Rp.push(Mp),Mp--;Rp.sort(Tp).reverse()}return Rp}function xp(e){const{pinned:t,fromKeyboard:r,gos:i,ctrlsService:o,useHeaderRow:p,skipScrollPadding:I}=e;let K=o.getHeaderRowContainerCtrl(t)?.getViewportElement(),{x:jt}=e;return K?(r&&(jt-=K.getBoundingClientRect().left),i.get("enableRtl")&&(p&&(K=K.querySelector(".ag-header-row")),jt=K.clientWidth-jt),t==null&&!I&&(jt+=o.get("center").getCenterViewportScrollLeft()),jt):0}function Pp(e,t){for(const r of e)r.setMoving(t,"uiColumnMoved")}var Up=7,fp=100,zh=fp/2,kp=5,qh=100,bp=class extends Rh{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!pd(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const e=this.lastDraggingEvent?.dragItem.columns??[];for(const t of e){const r=t.getPinned();if(t.getColDef().lockPinned){if(r==this.pinned)return"move";continue}if(r===this.pinned||!this.pinned)return"move";if(!r&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const i=e.dragItem.visibleState,o=(t||[]).filter(p=>i[p.getId()]);this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,r=!1,i=!1){const o=this.gos.get("suppressMoveWhenColumnDragging");if(i&&!o){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&id(e.hDirection))return;const{pinned:p,gos:I,ctrlsService:K}=this,jt=xp({x:e.x,pinned:p,gos:I,ctrlsService:K});t||this.checkCenterForScrolling(jt),o?this.handleColumnDragWhileSuppressingMovement(e,t,r,jt,i):this.handleColumnDragWhileAllowingMovement(e,t,r,jt,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,r){if(!e)return;const i=e.filter(o=>!o.getColDef().lockVisible);this.columnModel.setColsVisible(i,t,r)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,r,i,o){const p=this.getAllMovingColumns(e,!0);if(o){const I=this.isAttemptingToPin(p);I&&this.attemptToPinColumns(p,void 0,!0);const{fromLeft:K,xPosition:jt}=this.getNormalisedXPositionInfo(p,I)||{};if(K==null||jt==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:p,xPosition:jt,fromEnter:t,fakeEvent:r,fromLeft:K})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(p,i)}}handleColumnDragWhileAllowingMovement(e,t,r,i,o){const p=this.getAllMovingColumns(e),I=this.normaliseDirection(e.hDirection)===1,K=e.dragSource.type===1,jt=this.getMoveColumnParams({allMovingColumns:p,isFromHeader:K,xPosition:i,fromLeft:I,fromEnter:t,fakeEvent:r}),Gl=Kd({...jt,finished:o});Gl&&(this.lastMovedInfo=Gl)}getAllMovingColumns(e,t=!1){const r=e.dragSource.getDragItem();let i=null;t?(i=r.columnsInSplit,i||(i=r.columns)):i=r.columns;const o=p=>p.getColDef().lockPinned?p.getPinned()==this.pinned:!0;return i?i.filter(o):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:r,xPosition:i,fromLeft:o,fromEnter:p,fakeEvent:I}=e,{pinned:K,gos:jt,columnModel:Gl,columnMoveService:Fu,visibleColsService:Lu}=this;return{allMovingColumns:t,isFromHeader:r,fromLeft:o,xPosition:i,pinned:K,fromEnter:p,fakeEvent:I,gos:jt,columnModel:Gl,columnMoveService:Fu,visibleColsService:Lu}}findFirstAndLastMovingColumns(e){const t=e.length;let r,i;for(let o=0;o<=t;o++){if(!r){const p=e[o];p.getLeft()!=null&&(r=p)}if(!i){const p=e[t-1-o];p.getLeft()!=null&&(i=p)}if(r&&i)break}return{firstMovingCol:r,lastMovingCol:i}}highlightHoveredColumn(e,t){const{gos:r,columnModel:i}=this,o=r.get("enableRtl"),p=i.getCols().filter(Fu=>Fu.isVisible()&&Fu.getPinned()===this.pinned);let I=null,K=null,jt=null;for(const Fu of p){if(K=Fu.getActualWidth(),I=this.getNormalisedColumnLeft(Fu,0,o),I!=null){const Lu=I+K;if(I<=t&&Lu>=t){jt=Fu;break}}I=null,K=null}if(jt)e.indexOf(jt)!==-1&&(jt=null);else{for(let Fu=p.length-1;Fu>=0;Fu--){const Lu=p[Fu],qu=p[Fu].getParent();if(!qu){jt=Lu;break}const Xd=qu?.getDisplayedLeafColumns();if(Xd.length){jt=wf(Xd);break}}if(!jt)return;I=this.getNormalisedColumnLeft(jt,0,o),K=jt.getActualWidth()}if(this.lastHighlightedColumn?.column!==jt&&this.clearHighlighted(),jt==null||I==null||K==null)return;let Gl;t-I<K/2!==o?Gl=0:Gl=1,jt.setHighlighted(Gl),this.lastHighlightedColumn={column:jt,position:Gl}}getNormalisedXPositionInfo(e,t){const{gos:r,visibleColsService:i}=this,o=r.get("enableRtl"),{firstMovingCol:p,column:I,position:K}=this.getColumnMoveAndTargetInfo(e,t,o);if(!p||!I||K==null)return;const jt=i.getAllCols(),Gl=jt.indexOf(p),Fu=jt.indexOf(I),Lu=K===0!==o,qu=Gl<Fu||Gl===Fu&&!Lu;let Xd=0;if(Lu?qu&&(Xd-=1):qu||(Xd+=1),Fu+Xd===Gl)return;const Vh=jt[Fu+Xd];if(!Vh)return;const Zh=this.getNormalisedColumnLeft(Vh,20,o);return{fromLeft:qu,xPosition:Zh}}getColumnMoveAndTargetInfo(e,t,r){const i=this.lastHighlightedColumn||{},{firstMovingCol:o,lastMovingCol:p}=this.findFirstAndLastMovingColumns(e);if(!o||!p||i.column||!t)return{firstMovingCol:o,...i};const K=this.getPinDirection()==="left";return{firstMovingCol:o,position:K?1:0,column:K!==r?o:p}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,r){const{gos:i,ctrlsService:o}=this,p=e.getLeft();if(p==null)return null;const I=e.getActualWidth();return xp({x:r?p+I-t:p+t,pinned:e.getPinned(),useHeaderRow:r,skipScrollPadding:!0,gos:i,ctrlsService:o})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,r=this.failedMoveAttempts>Up;return t&&r||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:r,fromEnter:i,fakeEvent:o,fromLeft:p}=e,I=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:r,fromLeft:p,fromEnter:i,fakeEvent:o}),{columns:K,toIndex:jt}=bd(I)||{};K&&jt!=null&&(this.lastMovedInfo={columns:K,toIndex:jt}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.ctrlsService.get("center"),r=t.getCenterViewportScrollLeft(),i=r+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<r+zh,this.needToMoveLeft=e>i-zh):(this.needToMoveLeft=e<r+zh,this.needToMoveRight=e>i-zh),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),qh),this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*kp,e>fp&&(e=fp);let t=null;const r=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=r.scrollHorizontally(-e):this.needToMoveRight&&(t=r.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=Up+1)return;if(this.dragAndDropService.getDragAndDropImageComponent()?.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const i=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(i,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,r=!1){const i=(e||[]).filter(o=>!o.getColDef().lockPinned);return i.length?(r&&(t=this.getPinDirection()),this.columnModel.setColsPinned(i,t,"uiColumnDragged"),r&&this.dragAndDropService.nudge(),i.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},wp=class extends Rh{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new bp(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new yd(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},Sp=class extends Rh{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,r,i,o){super(),this.pinned=e,this.column=t,this.eResize=r,this.comp=i,this.ctrl=o}postConstruct(){const e=[];let t,r;const i=()=>{if(Cm(this.eResize,t),!t)return;const I=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(I),r){const K=this.gos.get("skipHeaderOnAutoSize"),jt=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",K)};this.eResize.addEventListener("dblclick",jt);const Gl=new J0(this.eResize);Gl.addEventListener("doubleTap",jt),e.push(()=>{this.eResize.removeEventListener("dblclick",jt),Gl.removeEventListener("doubleTap",jt),Gl.destroy()})}},o=()=>{e.forEach(I=>I()),e.length=0},p=()=>{const I=this.column.isResizable(),K=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(I!==t||K!==r)&&(t=I,r=K,o(),i())};p(),this.addDestroyFunc(o),this.ctrl.setRefreshFunction("resize",p)}onResizing(e,t){const{column:r,lastResizeAmount:i,resizeStartWidth:o}=this,p=this.normaliseResizeAmount(t),I=o+p,K=[{key:r,newWidth:I}];if(this.column.getPinned()){const jt=this.pinnedWidthService.getPinnedLeftWidth(),Gl=this.pinnedWidthService.getPinnedRightWidth(),Fu=zv(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(jt+Gl+(p-i)>Fu)return}this.lastResizeAmount=p,this.columnSizeService.setColumnWidths(K,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const r=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?r&&(t*=-1):i&&(t*=-1),t}},mp=class extends Rh{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Hf(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new xv),this.cbSelectAll.addCssClass("ag-header-select-all"),cg(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),r=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${i} (${r})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return am(this.gos)?!0:(rl(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return Rd(this.gos)||dh(this.gos)?!0:(rl(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),r=this.isCurrentPageOnly();let i="uiSelectAll";r?i="uiSelectAllCurrentPage":t&&(i="uiSelectAllFiltered");const o={source:i,justFiltered:t,justCurrentPage:r};e?this.selectionService.selectAllRowNodes(o):this.selectionService.deselectAllRowNodes(o)}isCheckboxSelection(){const e=this.gos.get("rowSelection"),t=typeof e=="object"&&xh(e)&&Mm(this.column),r=this.column.getColDef().headerCheckboxSelection;let i=!1;return t?i=!0:typeof r=="function"?i=r(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):i=!!r,i&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},af=class extends sl{constructor(e,t,r){super(e,t,r),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,r,i,o){this.comp=e,o=Zf(this,this.beans.context,o),this.setGui(t,o),this.updateState(),this.setupWidth(o),this.setupMovingCss(o),this.setupMenuClass(o),this.setupSortableClass(o),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:I=>this.setRefreshFunction("measuring",I),compBean:o}),this.addColumnHoverListener(o),this.setupFilterClass(o),this.setupClassesFromColDef(),this.setupTooltip(o),this.addActiveHeaderMouseListeners(o),this.setupSelectAll(o),this.setupUserComp(o),this.refreshAria(),this.resizeFeature=o.createManagedBean(new Sp(this.getPinned(),this.column,r,e,this)),o.createManagedBean(new ce([this.column],t)),o.createManagedBean(new nl(this.column,t,this.beans)),o.createManagedBean(new tv(t,{shouldStopEventPropagation:I=>this.shouldStopEventPropagation(I),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(o),o.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(o)),o.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(o)}),o.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const p=()=>this.checkDisplayName(o);o.addManagedEventListeners({columnValueChanged:p,columnRowGroupChanged:p,columnPivotChanged:p,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),o.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){if(!this.column.isResizable())return;const r=this.column.getActualWidth(),i=this.column.getMinWidth(),o=this.column.getMaxWidth(),p=Math.min(Math.max(r+e,i),o);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:p}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,beans:r,column:i,ctrlsService:o}=this,{gos:p,columnModel:I,columnMoveService:K,visibleColsService:jt}=r,Gl=this.getPinned(),Fu=t.getBoundingClientRect().left,Lu=i.getActualWidth(),qu=p.get("enableRtl"),Vh=xp({x:e===0!==qu?Fu-20:Fu+Lu+20,pinned:Gl,fromKeyboard:!0,gos:p,ctrlsService:o}),Zh=this.focusService.getFocusedHeader();Kd({allMovingColumns:[i],isFromHeader:!0,fromLeft:e===1,xPosition:Vh,pinned:Gl,fromEnter:!1,fakeEvent:!1,gos:p,columnModel:I,columnMoveService:K,visibleColsService:jt,finished:!0}),o.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&Zh&&this.restoreFocus(Zh)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:{...e,column:this.column}})}setupUserComp(e){const t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){const t=this.createParams(e),r=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(r,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:r=>{this.menuService.showColumnMenu({column:this.column,buttonElement:r,positionBy:"button"})},showColumnMenuAfterMouseClick:r=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:r,positionBy:"mouse"})},showFilter:r=>{this.menuService.showFilterMenu({column:this.column,buttonElement:r,containerType:"columnFilter",positionBy:"button"})},progressSort:r=>{this.beans.sortController.progressSort(this.column,!!r,"uiColumnSorted")},setSort:(r,i)=>{this.beans.sortController.setSortForColumn(this.column,r,!!i,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(r,i)=>{this.setupTooltip(e,r,i)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new mp(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===np.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===np.ENTER&&this.onEnterKeyDown(e),e.key===np.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const r=this.comp.getUserCompInstance();!r||!(r instanceof vv)||r.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,r){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const i=this.gos.get("tooltipShowMode")==="whenTruncated",o=this.eGui,p=this.column.getColDef();!r&&i&&!p.headerComponent&&(r=()=>{const jt=o.querySelector(".ag-header-cell-text");return jt?jt.scrollWidth>jt.clientWidth:!0});const I={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>o,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:r},K=e.createManagedBean(new W0(I));this.setRefreshFunction("tooltip",()=>K.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),r=q(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(r),r.forEach(o=>{i.has(o)?i.delete(o):this.comp.addOrRemoveCssClass(o,!0)}),i.forEach(o=>this.comp.addOrRemoveCssClass(o,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:r,displayName:i,dragAndDropService:o,gos:p}=this,{columnModel:I}=r;let K=!this.gos.get("suppressDragLeaveHidesColumns");const jt=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>K?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:i,onDragStarted:()=>{K=!p.get("suppressDragLeaveHidesColumns"),Pp([t],!0)},onDragStopped:()=>Pp([t],!1),onDragCancelled:()=>Pp([t],!1),onGridEnter:Gl=>{if(K){const Fu=Gl?.columns?.filter(Lu=>!Lu.getColDef().lockVisible)||[];I.setColsVisible(Fu,!0,"uiColumnMoved")}},onGridExit:Gl=>{if(K){const Fu=Gl?.columns?.filter(Lu=>!Lu.getColDef().lockVisible)||[];I.setColsVisible(Fu,!1,"uiColumnMoved")}}};o.addDragSource(jt,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(e){const t=this.lookupUserCompDetails(e);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const r=this.column.getActualWidth();this.comp.setWidth(`${r}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const r=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",r),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,r=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",r)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:r,beans:i}=this,o=this.beans.columnModel.getGroupRowsHeight(),p=o.reduce((Lu,qu)=>Lu+=qu,0)===0;if(r.addOrRemoveCssClass("ag-header-parent-hidden",p),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),r.addOrRemoveCssClass("ag-header-span-height",!1),r.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:I,isSpanningTotal:K}=this.column.getColumnGroupPaddingInfo();r.addOrRemoveCssClass("ag-header-span-height",I>0);const{columnModel:jt}=i,Gl=jt.getColumnHeaderRowHeight();if(I===0){r.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${Gl}px`);return}r.addOrRemoveCssClass("ag-header-span-total",K);let Fu=0;for(let Lu=0;Lu<I;Lu++)Fu+=o[o.length-1-Lu];e.style.setProperty("top",`${-Fu}px`),e.style.setProperty("height",`${Gl+Fu}px`)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(kg(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(Hf(this.beans.gos)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,r)=>t==="filter"?-1:r.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const r=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",r)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){const t=o=>this.handleMouseOverChange(o.type==="mouseenter"),r=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),i=o=>this.handleContextMenuMouseEvent(o,void 0,this.column);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:r,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof vv?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},_f=class extends Rh{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,r,i){super(),this.eResize=t,this.comp=e,this.pinned=r,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const r=[];this.columnGroup.getDisplayedLeafColumns().forEach(o=>{o.getColDef().suppressAutoSize||r.push(o.getColId())}),r.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:r,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,r="uiColumnResized"){const i=this.normaliseDragChange(t),o=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(o,r,e)}getInitialValues(e){const t=this.getColumnsToResize(),r=this.getInitialSizeOfColumns(t),i=this.getSizeRatiosOfColumns(t,r),o={columnsToResize:t,resizeStartWidth:r,resizeRatios:i};let p=null;if(e&&(p=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),p){const I=p.getDisplayedLeafColumns(),K=o.groupAfterColumns=I.filter(Gl=>Gl.isResizable()),jt=o.groupAfterStartWidth=this.getInitialSizeOfColumns(K);o.groupAfterRatios=this.getSizeRatiosOfColumns(K,jt)}else o.groupAfterColumns=void 0,o.groupAfterStartWidth=void 0,o.groupAfterRatios=void 0;return o}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:r,resizeRatios:i,groupAfterColumns:o,groupAfterStartWidth:p,groupAfterRatios:I}=e;this.resizeCols=t,this.resizeStartWidth=r,this.resizeRatios=i,this.resizeTakeFromCols=o,this.resizeTakeFromStartWidth=p,this.resizeTakeFromRatios=I}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),r=this.getInitialValues();t>r.resizeStartWidth&&this.resizeColumns(r,t,e,!0)}resizeColumnsFromLocalValues(e,t,r=!0){if(!this.resizeCols||!this.resizeRatios)return;const i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(i,e,t,r)}resizeColumns(e,t,r,i=!0){const{columnsToResize:o,resizeStartWidth:p,resizeRatios:I,groupAfterColumns:K,groupAfterStartWidth:jt,groupAfterRatios:Gl}=e,Fu=[];if(Fu.push({columns:o,ratios:I,width:t}),K){const Lu=t-p;Fu.push({columns:K,ratios:Gl,width:jt-Lu})}this.columnSizeService.resizeColumnSets({resizeSets:Fu,finished:i,source:r}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,r)=>t+r.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(r=>r.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},Lp=class extends Rh{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},Ef=class extends sl{constructor(e,t,r){super(e,t,r),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const i=this.getGui();this.setDragSource(i)}},this.column=e}setComp(e,t,r,i,o){this.comp=e,o=Zf(this,this.beans.context,o),this.setGui(t,o),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(o),this.setupExpandable(o),this.setupTooltip(o),this.setupAutoHeight({wrapperElement:i,compBean:o}),this.setupUserComp(o),this.addHeaderMouseListeners(o),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const p=this.getParentRowCtrl().getPinned(),I=this.column.getProvidedColumnGroup().getLeafColumns();o.createManagedBean(new ce(I,t)),o.createManagedBean(new nl(this.column,t,this.beans)),o.createManagedBean(new Lp(e,this.column)),this.resizeFeature=o.createManagedBean(new _f(e,r,p,this.column)),o.createManagedBean(new tv(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(o,I),o.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(o),o.addDestroyFunc(()=>this.clearComponent())}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,r=e.get("groupHeaderHeight");r!=null?r===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(r):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const r of t)e.addManagedListeners(r,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,r)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),r=t[0]===e,i=wf(t)===e;if(!r&&!i)return;const o=e.getHighlighted(),p=!!this.getParentRowCtrl().findHeaderCellCtrl(jt=>jt.getColumnGroupChild().isMoving());let I=!1,K=!1;if(p){const jt=this.beans.gos.get("enableRtl"),Gl=o===1,Fu=o===0;r&&(jt?K=Gl:I=Fu),i&&(jt?I=Fu:K=Gl)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",I),this.comp.addOrRemoveCssClass("ag-header-highlight-after",K)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;const r=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(r,r.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:r,column:i,ctrlsService:o}=this,{gos:p,columnModel:I,columnMoveService:K,visibleColsService:jt}=t,Gl=p.get("enableRtl"),Fu=e===0,Lu=this.getPinned(),qu=r.getBoundingClientRect(),Xd=qu.left,Vh=qu.width,Zh=xp({x:Fu!==Gl?Xd-20:Xd+Vh+20,pinned:Lu,fromKeyboard:!0,gos:p,ctrlsService:o}),Wh=i.getGroupId(),Rp=this.focusService.getFocusedHeader();Kd({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:e===1,xPosition:Zh,pinned:Lu,fromEnter:!1,fakeEvent:!1,gos:p,columnModel:I,columnMoveService:K,visibleColsService:jt,finished:!0});const Tp=i.getDisplayedLeafColumns(),Mp=Fu?Tp[0]:wf(Tp);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(Mp,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&Rp&&this.restoreFocus(Wh,i,Rp)}restoreFocus(e,t,r){const i=t.getLeafColumns();if(!i.length)return;const o=i[0].getParent();if(!o)return;const p=this.findGroupWidthId(o,e);p&&this.focusService.focusHeaderPosition({headerPosition:{...r,column:p}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:i=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),i,"gridInitializing")},setTooltip:(i,o)=>{this.setupTooltip(e,i,o)}}),r=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(r)}addHeaderMouseListeners(e){const t=o=>this.handleMouseOverChange(o.type==="mouseenter"),r=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=o=>this.handleContextMenuMouseEvent(o,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:r,contextmenu:i})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,r){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const i=this.column.getColGroupDef(),o=this.gos.get("tooltipShowMode")==="whenTruncated",p=this.eGui;!r&&o&&!i?.headerGroupComponent&&(r=()=>{const K=p.querySelector(".ag-header-group-text");return K?K.scrollWidth>K.clientWidth:!0});const I={getColumn:()=>this.column,getGui:()=>p,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(i&&i.headerTooltip),shouldDisplayTooltip:r};i&&(I.getColDef=()=>i),e.createManagedBean(new W0(I))}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const r=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:r,expandableChanged:r})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=q(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(i=>i.isSpanHeaderHeight())&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach(r=>this.comp.addOrRemoveCssClass(r,!0))}setupMovingCss(e){const r=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());r.forEach(o=>{e.addManagedListeners(o,{movingChanged:i})}),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===np.ENTER){const r=this.column,i=!r.isExpanded();this.beans.columnModel.setColumnGroupOpened(r.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:r,displayName:i,gos:o,dragAndDropService:p}=this,{columnModel:I}=t,K=r.getProvidedColumnGroup().getLeafColumns();let jt=!o.get("suppressDragLeaveHidesColumns");const Gl=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>jt?"hide":"notAllowed",dragItemName:i,getDragItem:()=>this.getDragItemForGroup(r),onDragStarted:()=>{jt=!o.get("suppressDragLeaveHidesColumns"),Pp(K,!0)},onDragStopped:()=>Pp(K,!1),onDragCancelled:()=>Pp(K,!1),onGridEnter:Fu=>{if(jt){const{columns:Lu=[],visibleState:qu}=Fu??{},Xd=Lu.filter(Vh=>!Vh.getColDef().lockVisible&&(!qu||qu[Vh.getColId()]));I.setColsVisible(Xd,!0,"uiColumnMoved")}},onGridExit:Fu=>{if(jt){const Lu=Fu?.columns?.filter(qu=>!qu.getColDef().lockVisible)||[];I.setColsVisible(Lu,!1,"uiColumnMoved")}}};p.addDragSource(Gl,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),r={};t.forEach(I=>r[I.getId()]=I.isVisible());const i=[];this.beans.visibleColsService.getAllCols().forEach(I=>{t.indexOf(I)>=0&&(i.push(I),ym(t,I))}),t.forEach(I=>i.push(I));const o=[],p=e.getLeafColumns();for(const I of i)p.indexOf(I)!==-1&&o.push(I);return{columns:i,columnsInSplit:o,visibleState:r}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(r=>{(r.getColDef().suppressMovable||r.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},Lf=0,rg=class extends Rh{constructor(e,t,r){super(),this.instanceId=Lf++,this.rowIndex=e,this.pinned=t,this.type=r;const i=r=="group"?"ag-header-row-column-group":r=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${i}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=Ih(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t,r=!0){this.comp=e,t=Zf(this,this.beans.context,t),r&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:r=>this.onVirtualColumnsChanged(r.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",r=>this.isEnsureDomOrder=r.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return Bu(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=Ih(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans,r=[],i=e.getGroupRowsHeight(),o=e.getColumnHeaderRowHeight();r.push(...i),r.push(o),t?.hasFloatingFilters()&&r.push(e.getFloatingFiltersHeight());let p=0;for(let K=0;K<this.rowIndex;K++)p+=r[K];const I=r[this.rowIndex];return{topOffset:p,rowHeight:I}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),r=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,r,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,e);const r=i=>{const{focusService:o,visibleColsService:p}=this.beans;return o.isHeaderWrapperFocused(i)?p.isVisible(i.getColumnGroupChild()):!1};if(e)for(const[i,o]of e)r(o)?this.headerCellCtrls.set(i,o):this.destroyBean(o);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const r=e.getUniqueId();let i;if(t&&(i=t.get(r),t.delete(r)),i&&i.getColumnGroupChild()!=e&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case"filter":{i=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":i=this.createBean(new Ef(e,this.beans,this));break;default:i=this.createBean(new af(e,this.beans,this));break}this.headerCellCtrls.set(r,i)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:r}=this.beans;return["left",null,"right"].forEach(i=>{const o=r.getHeadersToRender(i,t);e=e.concat(o)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let r;return typeof e=="function"?r=t.find(e):r=t.find(i=>i.getColumnGroupChild()==e),r}focusHeader(e,t){const r=this.findHeaderCellCtrl(e);return r?r.focus(t):!1}destroy(){this.headerCellCtrls?.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},ng=class extends Rh{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const r=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:r,advancedFilterEnabledChanged:r});const i=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(i,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const t=new t1,r=this.focusService.getFocusHeaderToUseAfterRefresh(),i=()=>{const K=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let jt=0;jt<K;jt++){const Gl=this.createBean(new rg(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(Gl)}},o=()=>{const K=t.next(),jt=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==K);(jt||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),jt&&(this.columnsRowCtrl=this.createBean(new rg(K,this.pinned,"column")))},p=()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;const K=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){K();return}const jt=t.next();if(this.filtersRowCtrl){const Gl=this.filtersRowCtrl.getRowIndex()!==jt;(!e||Gl)&&K()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new rg(jt,this.pinned,"filter")))};i(),o(),p();const I=this.getAllCtrls();this.comp.setCtrls(I),this.restoreFocusOnHeader(r)}getHeaderCtrlForColumn(e){if(Xl(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){const r=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(r)return r}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const r=this.getAllCtrls()[e];return r?r.getType():void 0}focusHeader(e,t,r){const o=this.getAllCtrls()[e];return o?o.focusHeader(t,r):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new wp(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Sd(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const r=()=>{const i=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(i==null)return;const o=i==0,p=this.hidden!==o,I=this.gos.get("enableRtl"),K=this.scrollVisibleService.getScrollbarWidth(),Gl=this.scrollVisibleService.isVerticalScrollShowing()&&(I&&e||!I&&t)?i+K:i;this.comp.setPinnedContainerWidth(`${Gl}px`),this.comp.setDisplayed(!o),p&&(this.hidden=o,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:r,rightPinnedWidthChanged:r,scrollVisibilityChanged:r,scrollbarWidthChanged:r})}},gf='<div class="ag-pinned-left-header" role="rowgroup"></div>',Rf='<div class="ag-pinned-right-header" role="rowgroup"></div>',yf=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,cp=class extends cm{constructor(e){super(),this.eCenterContainer=Cf,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();const e={setDisplayed:r=>this.setDisplayed(r),setCtrls:r=>this.setCtrls(r),setCenterWidth:r=>this.eCenterContainer.style.width=r,setViewportScrollLeft:r=>this.getGui().scrollLeft=r,setPinnedContainerWidth:r=>{const i=this.getGui();i.style.width=r,i.style.maxWidth=r,i.style.minWidth=r}};this.createManagedBean(new ng(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",t=this.pinned=="right",r=e?gf:t?Rf:yf;this.setTemplate(r),this.eRowContainer=this.eCenterContainer!==Cf?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let r;const i=o=>{const p=o.getGui();p.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(p),r&&Oy(this.eRowContainer,p,r),r=p};e.forEach(o=>{const p=o.instanceId,I=t[p];delete t[p];const K=I||this.createBean(new Mu(o));this.headerRowComps[p]=K,this.rowCompsList.push(K),i(K)}),Ln(t).forEach(o=>this.destroyRowComp(o))}},_g=class extends cm{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){const e={addOrRemoveCssClass:(i,o)=>this.addOrRemoveCssClass(i,o),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new sd).setComp(e,this.getGui(),this.getFocusableElement());const r=i=>{this.createManagedBean(i),this.appendChild(i)};r(new cp("left")),r(new cp(null)),r(new cp("right"))}},wl={selector:"AG-HEADER-ROOT",component:_g},pl=(e=>(e.AUTO_HEIGHT="ag-layout-auto-height",e.NORMAL="ag-layout-normal",e.PRINT="ag-layout-print",e))(pl||{}),Yu=class extends Rh{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},r=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(r,t)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(rl(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},Ju=class extends cm{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=Cf,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==np.TAB||e.defaultPrevented||ph(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let r=!1;e.shiftKey?r=this.focusService.focusGridView(wf(this.visibleColsService.getAllCols()),!0,!1):r=this.focusService.focusNextGridCoreContainer(!1),r&&e.preventDefault()}updateLayoutClasses(e,t){const r=this.eOverlayWrapper.classList;r.toggle("ag-layout-auto-height",t.autoHeight),r.toggle("ag-layout-normal",t.normal),r.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new Yu(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,r,i){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),r&&this.focusService.isGridFocused()){const o=Hf(this.gos);o&&!Rg(this.gos)&&(this.elToFocusAfter=o)}e.then(o=>{if(this.activePromise!==e){this.activeOverlay!==o&&(this.destroyBean(o),o=null);return}if(this.activePromise=null,!o)return;if(this.activeOverlay!==o&&(this.eOverlayWrapper.appendChild(o.getGui()),this.activeOverlay=o,i)){const I=o;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:K})=>{I.refresh?.(this.gos.addGridCommonParams({...K??{}}))})}const p=this.focusService;r&&p.isGridFocused()&&p.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);const r=this.updateListenerDestroyFunc;r&&(r(),this.updateListenerDestroyFunc=null),this.destroyBean(e),_0(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},hd={selector:"AG-OVERLAY-WRAPPER",component:Ju},$u=class extends cm{constructor(e,t){super(),this.direction=t,this.eViewport=Cf,this.eContainer=Cf,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",By()||Av())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=ey(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),r=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:r,touchend:r})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){const t=this.getViewportElement();Pu(()=>k0(t),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},Xu=class extends $u{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=Cf,this.eRightSpacer=Cf}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new Sd(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const r=!this.enableRtl&&e,i=this.scrollVisibleService.getScrollbarWidth();r&&(t+=i),Q0(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let o=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(o+=i),Q0(this.eLeftSpacer,o),this.eLeftSpacer.classList.toggle("ag-scroller-corner",o<=i)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,r=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleService.getScrollbarWidth()||0,p=r?0:i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),p1(this.getGui(),p),p1(this.eViewport,p),p1(this.eContainer,p),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return h1(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){k0(this.getViewportElement())||this.attemptSettingScrollPosition(e),W1(this.getViewportElement(),e,this.enableRtl)}},md={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:Xu},ld=class extends Rh{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},Ld=class extends $u{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new ld(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,r=e&&this.scrollVisibleService.getScrollbarWidth()||0,i=r===0&&t?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Q0(this.getGui(),i),Q0(this.eViewport,i),Q0(this.eContainer,i),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,r=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),o=r.scrollTop;i!=o&&this.setScrollPosition(o,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){!t&&!k0(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},zd={selector:"AG-FAKE-VERTICAL-SCROLL",component:Ld},gh=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(gh||{}),ep=class extends Rh{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=$l(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=$l(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const e of Object.values(gh)){const t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),r=t?$l(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),i=t?$l(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:r}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Object.values(gh),"Viewport"]){if(this.lastScrollSource[1]===t)continue;const r=this.getViewportForSource(t);W1(r,e,this.enableRtl)}}getViewportForSource(e){return e==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:r}=t;if(this.shouldBlockScrollUpdate(1,r,!0))return;const i=h1(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;e==="Viewport"?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent({...t,type:"bodyScrollEnd"})},100)}shouldBlockScrollUpdate(e,t,r=!1){return r&&!Av()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=Ly(this.eBodyViewport),{scrollHeight:r}=this.eBodyViewport;return e<0||e+t>r}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:r}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>r}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),W1(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const r=this.rowModel.getRowCount();let i=-1;for(let o=0;o<r;o++){const p=this.rowModel.getRow(o);if(typeof e=="function"){if(p&&e(p)){i=o;break}}else if(e===p||e===p.data){i=o;break}}i>=0&&this.ensureIndexVisible(i,t)}ensureIndexVisible(e,t){if(Ih(this.gos,"print"))return;const r=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=r){rl("Invalid row index for ensureIndexVisible: "+e);return}const o=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{o||this.paginationService?.goToPageWithIndex(e);const p=this.ctrlsService.getGridBodyCtrl(),I=p.getStickyTopHeight(),K=p.getStickyBottomHeight(),jt=this.rowModel.getRow(e);let Gl;do{const Fu=jt.rowTop,Lu=jt.rowHeight,qu=this.pageBoundsService.getPixelOffset(),Xd=jt.rowTop-qu,Vh=Xd+jt.rowHeight,Zh=this.getVScrollPosition(),Wh=this.heightScaler.getDivStretchOffset(),Rp=Zh.top+Wh,Tp=Zh.bottom+Wh,Mp=Tp-Rp,Of=this.heightScaler.getScrollPositionForPixel(Xd),zg=this.heightScaler.getScrollPositionForPixel(Vh-Mp),Jf=Math.min((Of+zg)/2,Xd),sg=Rp+I>Xd,mm=Tp-K<Vh;let Um=null;t==="top"?Um=Of:t==="bottom"?Um=zg:t==="middle"?Um=Jf:sg?Um=Of-I:mm&&(Um=zg+K),Um!==null&&(this.setVerticalScrollPosition(Um),this.rowRenderer.redraw({afterScroll:!0})),Gl=Fu!==jt.rowTop||Lu!==jt.rowHeight}while(Gl);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const r=this.columnModel.getCol(e);if(!r||r.isPinned()||!this.visibleColsService.isColDisplayed(r))return;const i=this.getPositionedHorizontalScroll(r,t);this.getFrameworkOverrides().wrapIncoming(()=>{i!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(i),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:r,columnAfterEnd:i}=this.isColumnOutsideViewport(e),o=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),p=this.centerRowsCtrl.getCenterWidth(),I=this.enableRtl;let K=(I?r:i)||o,jt=I?i:r;t!=="auto"&&(K=t==="start",jt=t==="end");const Gl=t==="middle";if(K||jt||Gl){const{colLeft:Fu,colMiddle:Lu,colRight:qu}=this.getColumnBounds(e);return Gl?Lu-p/2:K?I?qu:Fu:I?Fu-p:qu-p}return null}isColumnOutsideViewport(e){const{start:t,end:r}=this.getViewportBounds(),{colLeft:i,colRight:o}=this.getColumnBounds(e),p=this.enableRtl,I=p?t>o:r<o,K=p?r<i:t>i;return{columnBeforeStart:I,columnAfterEnd:K}}getColumnBounds(e){const t=this.enableRtl,r=this.visibleColsService.getBodyContainerWidth(),i=e.getActualWidth(),o=e.getLeft(),p=t?-1:1,I=t?r-o:o,K=I+i*p,jt=I+i/2*p;return{colLeft:I,colMiddle:jt,colRight:K}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),r=t,i=e+t;return{start:r,end:i,width:e}}},Bh=class extends Rh{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>{this.animationFrameService.requestAnimationFrame(()=>{this.onCenterViewportResized()})};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=zv(e);if(t<=50)return;let r=this.getPinnedColumnsOverflowingViewport(t-50);const i=this.gos.getCallback("processUnpinnedColumns");r.length&&(i&&(r=i({columns:r,viewportWidth:t})),this.columnModel.setColsPinned(r,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth(),r=this.pinnedWidthService.getPinnedLeftWidth(),i=t+r;if(i<e)return[];const o=[...this.visibleColsService.getLeftCols()],p=[...this.visibleColsService.getRightCols()];let I=0,K=0;const jt=0,Gl=[];let Fu=i-jt-e;for(;(K<o.length||I<p.length)&&Fu>0;){if(I<p.length){const Lu=p[I++];Fu-=Lu.getActualWidth(),Gl.push(Lu)}if(K<o.length&&Fu>0){const Lu=o[K++];Fu-=Lu.getActualWidth(),Gl.push(Lu)}}return Gl}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=Ly(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},up=class extends Rh{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{lf(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),lf(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},Uh=class extends cm{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Rv]),this.eCheckbox=Cf}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),r=Sg(e,t),[i,o]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],p=e(i,o);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${p} (${r})`)}onClicked(e,t,r){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:r.shiftKey,groupSelectsFiltered:t,event:r,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:i=>Eh(i),click:i=>{Eh(i);const o=pf(this.gos)==="filteredDescendants",p=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(p,o)?this.onClicked(!0,o,i||{})===0&&this.onClicked(!1,o,i):p?this.onClicked(!1,o,i):this.onClicked(!0,o,i||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),qg(this.gos)||typeof this.getIsVisible()=="function"){const i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&Rd(this.gos)}showOrHideSelect(){let e=this.rowNode.selectable;const t=this.getIsVisible();if(e)if(typeof t=="function"){const o=this.overrides?.callbackParams;if(!this.column)e=t({...o,node:this.rowNode,data:this.rowNode.data});else{const p=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t({...o,...p})}}else e=t??!1;const r=this.gos.get("rowSelection");if(r&&typeof r!="string"?!Fp(r):this.column?.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if(this.overrides?.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){if(this.overrides)return this.overrides.isVisible;const e=this.gos.get("rowSelection");return e&&typeof e!="string"?Zd(e):this.column?.getColDef()?.checkboxSelection}},hp=class extends cm{constructor(e,t,r){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=r}postConstruct(){this.getGui().appendChild(D0("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const r=()=>{try{const i=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",i),e.dataTransfer.setData("text/plain",i)}catch{}};if(t){const i=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(i)}else r()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},Ep=class extends Rh{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,r=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,r,i=>this.cellComp.addOrRemoveCssClass(i,!0),i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const r=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),i=e.cellStyle;t=i(r)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(r=>this.cellComp.addOrRemoveCssClass(r,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(r=>this.cellComp.addOrRemoveCssClass(r,!0))}destroy(){super.destroy()}},Uf=class extends Rh{constructor(e,t,r,i,o){super(),this.cellCtrl=e,this.beans=t,this.rowNode=i,this.rowCtrl=o}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case np.ENTER:this.onEnterKeyDown(e);break;case np.F2:this.onF2KeyDown(e);break;case np.ESCAPE:this.onEscapeKeyDown(e);break;case np.TAB:this.onTabKeyDown(e);break;case np.BACKSPACE:case np.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case np.DOWN:case np.UP:case np.RIGHT:case np.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:r,beans:i,rowNode:o}=this,{gos:p,rangeService:I,eventService:K}=i;if(!r.isEditing()){if(K.dispatchEvent({type:"keyShortcutChangedCellStart"}),P2(e,p.get("enableCellEditingOnBackspace"))){if(I&&lf(p))I.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(r.isCellEditable()){const jt=r.getColumn(),Gl=this.beans.valueService.getDeleteValue(jt,o);o.setDataValue(jt,Gl,"cellClear")}}else r.startRowOrCellEdit(e,t);K.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?np.UP:np.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(np.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(np.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const i=e.key;i===" "?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(i,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&nd(t)){const r=this.rowNode.isSelected(),i=!r,o=pf(t)==="filteredDescendants",p=this.rowNode.setSelectedParams({newValue:i,rangeSelect:e.shiftKey,groupSelectsFiltered:o,event:e,source:"spaceKey"});r===void 0&&p===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:o,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},qp=class extends Rh{constructor(e,t,r){super(),this.cellCtrl=e,this.beans=t,this.column=r}onMouseEvent(e,t){if(!ph(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:r,gos:i}=this.beans,o=e.ctrlKey||e.metaKey;r&&o&&r.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&r.intersectLastRange(!0);const p=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(p);const I=this.column.getColDef();I.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{I.onCellClicked(p)})},0),(i.get("singleClickEdit")||I.singleClickEdit)&&!i.get("suppressClickEdit")&&!(e.shiftKey&&r?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Av()||jp("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:r,cellCtrl:i}=this,{eventService:o,frameworkOverrides:p,gos:I}=r,K=t.getColDef(),jt=i.createEvent(e,"cellDoubleClicked");o.dispatchEvent(jt),typeof K.onCellDoubleClicked=="function"&&window.setTimeout(()=>{p.wrapOutgoing(()=>{K.onCellDoubleClicked(jt)})},0),!I.get("singleClickEdit")&&!I.get("suppressClickEdit")&&i.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:r,shiftKey:i}=e,o=e.target,{cellCtrl:p,beans:I}=this,{eventService:K,rangeService:jt,focusService:Gl,gos:Fu}=I;if(this.isRightClickInExistingRange(e))return;const Lu=jt&&jt.getCellRanges().length!=0;if(!i||!Lu){const Xd=Fu.get("enableCellTextSelection")&&e.defaultPrevented,Vh=(mv()||Xd)&&!p.isEditing()&&!nv(o);p.focusCell(Vh)}if(i&&Lu&&!Gl.isCellFocused(p.getCellPosition())){e.preventDefault();const qu=Gl.getFocusedCell();if(qu){const{column:Xd,rowIndex:Vh,rowPinned:Zh}=qu,Rp=I.rowRenderer.getRowByPosition({rowIndex:Vh,rowPinned:Zh})?.getCellCtrl(Xd);Rp?.isEditing()&&Rp.stopEditing(),Gl.setFocusedCell({column:Xd,rowIndex:Vh,rowPinned:Zh,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(o)){if(jt){const qu=this.cellCtrl.getCellPosition();if(i)jt.extendLatestRangeToCell(qu);else{const Xd=t||r;jt.setRangeToCell(qu,Xd)}}K.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const r=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),i=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(r&&i)return!0}return!1}containsWidget(e){return H0(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),r=t.contains(e.target),i=t.contains(e.relatedTarget);return r&&i}destroy(){super.destroy()}},Ag=class extends Rh{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();Gm(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let r=this.column;const i=this.column.getPinned();for(let o=0;r&&o<e&&(t.push(r),r=this.beans.visibleColsService.getColAfter(r),!(!r||id(r)||i!==r.getPinned()));o++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=wf(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){const r=this.beans.visibleColsService.getBodyContainerWidth();return t+r+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;const r=Cp(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${r}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},bf=(e=>(e[e.FILL=0]="FILL",e[e.RANGE=1]="RANGE",e))(bf||{}),Ig=(e=>(e[e.VALUE=0]="VALUE",e[e.DIMENSION=1]="DIMENSION",e))(Ig||{}),yg="ag-cell-range-selected",pm="ag-cell-range-chart",Mg="ag-cell-range-single-cell",Tf="ag-cell-range-chart-category",xm="ag-cell-range-handle",jg="ag-cell-range-top",Wf="ag-cell-range-right",wm="ag-cell-range-bottom",im="ag-cell-range-left",fm=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(yg,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${yg}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${yg}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${yg}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${yg}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(pm,this.hasChartRange),rm(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(Mg,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),r=!t&&e.top,i=!t&&e.right,o=!t&&e.bottom,p=!t&&e.left;this.cellComp.addOrRemoveCssClass(jg,r),this.cellComp.addOrRemoveCssClass(Wf,i),this.cellComp.addOrRemoveCssClass(wm,o),this.cellComp.addOrRemoveCssClass(im,p)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(r=>sm([1,0],r.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,r=!1,i=!1,o=!1;const p=this.cellCtrl.getCellPosition().column,I=this.beans.visibleColsService;let K,jt;e?(K=I.getColAfter(p),jt=I.getColBefore(p)):(K=I.getColBefore(p),jt=I.getColAfter(p));const Gl=this.rangeService.getCellRanges().filter(Fu=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),Fu));K||(o=!0),jt||(r=!0);for(let Fu=0;Fu<Gl.length&&!(t&&r&&i&&o);Fu++){const Lu=Gl[Fu],qu=this.rangeService.getRangeStartRow(Lu),Xd=this.rangeService.getRangeEndRow(Lu);!t&&this.beans.rowPositionUtils.sameRow(qu,this.cellCtrl.getCellPosition())&&(t=!0),!i&&this.beans.rowPositionUtils.sameRow(Xd,this.cellCtrl.getCellPosition())&&(i=!0),!o&&K&&Lu.columns.indexOf(K)<0&&(o=!0),!r&&jt&&Lu.columns.indexOf(jt)<0&&(r=!0)}return{top:t,right:r,bottom:i,left:o}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(xm,!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),r=t.length;if(this.rangeCount<1||r<1)return!1;const i=wf(t),o=this.cellCtrl.getCellPosition(),p=uf(e)&&!this.cellCtrl.isSuppressFillHandle(),I=vf(e);let K=r===1&&!this.cellCtrl.isEditing()&&(p||I);if(this.hasChartRange){const Gl=t[0].type===1&&this.rangeService.isCellInSpecificRange(o,t[0]);this.cellComp.addOrRemoveCssClass(Tf,Gl),K=i.type===0}return K&&i.endRow!=null&&this.rangeService.isContiguousRange(i)&&this.rangeService.isBottomRightCell(i,o)}addSelectionHandle(){const e=wf(this.rangeService.getCellRanges()).type,r=uf(this.beans.gos)&&id(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==r&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(r)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},Rm="ag-cell",n0="ag-cell-auto-height",ug="ag-cell-normal-height",nm="ag-cell-focus",Og="ag-cell-first-right-pinned",Xg="ag-cell-last-left-pinned",Ug="ag-cell-not-inline-editing",km="ag-column-hover",Am="ag-cell-wrap-text",um=0,o0=class Qw extends Rh{constructor(t,r,i,o){super(),this.column=t,this.rowNode=r,this.beans=i,this.rowCtrl=o,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=t.getId()+"-"+um++,this.colIdSanitised=yh(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new Ag(this,this.beans),this.cellCustomStyleFeature=new Ep(this,this.beans),this.cellMouseListenerFeature=new qp(this,this.beans,this.column),this.cellKeyboardListenerFeature=new Uf(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&lf(this.beans.gos)&&(this.cellRangeFeature=new fm(this.beans,this))}removeFeatures(){const t=this.beans.context;this.cellPositionFeature=t.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=t.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=t.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=t.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=t.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,r){const i=()=>{const I=this.column.getColDef(),K=this.rowNode.data;if(I.tooltipField&&pd(K))return Al(K,I.tooltipField,this.column.isTooltipFieldContainsDots());const jt=I.tooltipValueGetter;return jt?jt(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},o=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!r&&o&&!this.isCellRenderer()&&(r=()=>{const I=this.getGui(),K=I.children.length===0?I:I.querySelector(".ag-cell-value");return K?K.scrollWidth>K.clientWidth:!0});const p={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:i,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:r};this.tooltipFeature=new W0(p,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(t,r,i,o,p,I){this.cellComp=t,this.eGui=r,this.printLayout=o,I??(I=this),this.addDomData(I),this.addFeatures(),I.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,I),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(r),this.cellCustomStyleFeature?.setComp(t),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,r),p&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(K=>K()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t,r){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;const i=t.parentElement,o=lh(this.beans.gos,this.rowNode).height,p=jt=>{if(this.editing||!this.isAlive()||!r.isAlive())return;const{paddingTop:Gl,paddingBottom:Fu,borderBottomWidth:Lu,borderTopWidth:qu}=av(i),Xd=Gl+Fu+Lu+qu,Zh=t.offsetHeight+Xd;if(jt<5){const Rp=kf(this.beans.gos),Tp=!Rp||!Rp.contains(t),Mp=Zh==0;if(Tp||Mp){window.setTimeout(()=>p(jt+1),0);return}}const Wh=Math.max(Zh,o);this.rowNode.setRowAutoHeight(Wh,this.column)},I=()=>p(0);I();const K=this.beans.resizeObserverService.observeResize(t,I);r.addDestroyFunc(()=>{K(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){const{beans:r,column:i,rowNode:o,cellRangeFeature:p,cellComp:I}=this,{userComponentFactory:K,animationFrameService:jt}=r,Gl=this.getValueToDisplay();let Fu;if(o.stub&&o.groupData?.[this.column.getId()]==null){const qu=this.createCellRendererParams();Fu=K.getLoadingCellRendererDetails(i.getColDef(),qu)}else if(this.isCellRenderer()){const qu=this.createCellRendererParams();Fu=K.getCellRendererDetails(i.getColDef(),qu)}I.setRenderDetails(Fu,Gl,t),jt.requestAnimationFrame(()=>p?.refreshHandle())}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t)),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}isCheckboxSelection(t){const{rowSelection:r}=this.beans.gridOptions;return t.checkboxSelection||Mm(this.column)&&r&&typeof r!="string"&&Zd(r)}refreshShouldDestroy(){const t=this.column.getColDef(),r=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t)),i=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),o=this.includeDndSource!=this.isIncludeControl(t.dndSource),p=this.isAutoHeight!=this.column.isAutoHeight();return r||i||o||p}startEditing(t=null,r=!1,i=null){const{editService:o}=this.beans;return!this.isCellEditable()||this.editing||!o?!0:this.cellComp?o.startEditing(this,t,r,i):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,r,i)}),!0)}setEditing(t,r){this.editCompDetails=r,this.editing!==t&&(this.editing=t)}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){this.onCellEditorAttachedFuncs=[];const{editService:r}=this.beans;return!this.editing||!r?!1:r.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:r=>this.beans.valueService.setValue(this.rowNode,this.column,r),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(r,i,o,p)=>this.registerRowDragger(r,i,p),setTooltip:(r,i)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(r,i),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(t)}refreshCell(t){if(this.suppressRefreshCell||this.editing)return;const r=this.column.getColDef(),i=t!=null&&!!t.newData,o=t!=null&&!!t.suppressFlash||!!r.suppressCellFlash,p=r.field==null&&r.valueGetter==null&&r.showRowGroup==null,I=t&&t.forceRefresh||p||i,K=!!this.cellComp,jt=this.updateAndFormatValue(K),Gl=I||jt;if(K){if(Gl){this.showValue(i);const Fu=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!o&&!Fu&&(this.beans.gos.get("enableCellChangeFlash")||r.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(t=!1,r=!1){this.beans.editService?.stopEditingAndFocus(this,t,r)}flashCell(t){const r=t?.flashDuration??t?.flashDelay,i=t?.fadeDuration??t?.fadeDelay;this.animateCell("data-changed",r,i)}animateCell(t,r,i){if(!this.cellComp)return;const{gos:o}=this.beans;if(r||(r=o.get("cellFlashDuration")),r===0)return;pd(i)||(i=o.get("cellFadeDuration"));const p=`ag-cell-${t}`,I=`ag-cell-${t}-animation`;this.cellComp.addOrRemoveCssClass(p,!0),this.cellComp.addOrRemoveCssClass(I,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(p,!1),this.cellComp.addOrRemoveCssClass(I,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(I,!1),this.eGui.style.transition="")},i))},r)})}onFlashCells(t){if(!this.cellComp)return;const r=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[r]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const r=this.value,i=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(r,this.value)||this.valueFormatted!=i:!0}valuesAreEqual(t,r){const i=this.column.getColDef();return i.equals?i.equals(t,r):t===r}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){const r=this.getGui();Zp(this.beans.gos,r,Qw.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc(()=>Zp(this.beans.gos,r,Qw.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,r){return this.beans.gos.addGridCommonParams({type:r,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){this.cellKeyboardListenerFeature?.processCharacter(t)}onKeyDown(t){this.cellKeyboardListenerFeature?.onKeyDown(t)}onMouseEvent(t,r){this.cellMouseListenerFeature?.onMouseEvent(t,r)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:t,column:r,beans:i}=this;nt(t,r,i.visibleColsService)}refreshAriaColIndex(){const t=this.beans.visibleColsService.getAriaColIndex(this.column);hm(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,r=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,r):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,r)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(t){this.eGui&&U0(this.eGui,"tabindex",t?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(Og,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(Xg,t)}onCellFocused(t){if(this.beans.focusService.isCellFocusSuppressed())return;const r=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){r&&t?.forceBrowserFocus&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(nm,r),r&&t&&t.forceBrowserFocus){let o=this.cellComp.getFocusableElement();if(this.editing){const p=this.beans.focusService.findFocusableElements(o,null,!0);p.length&&(o=p[0])}o.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}const i=this.beans.gos.get("editType")==="fullRow";!r&&!i&&this.editing&&this.stopRowOrCellEdit(),r&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:ud(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(Rm,!0),this.cellComp.addOrRemoveCssClass(Ug,!0);const t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(n0,t),this.cellComp.addOrRemoveCssClass(ug,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(km,t)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(Am,t)}dispatchCellContextMenuEvent(t){const r=this.column.getColDef(),i=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(i),r.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{r.onCellContextMenu(i)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const t=new Uh;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=new hp(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,r,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,r);return}const o=this.createRowDragComp(t,r,i);o&&(this.customRowDragComp=o,this.addDestroyFunc(()=>{this.beans.context.destroyBean(o),this.customRowDragComp=null}))}createRowDragComp(t,r,i){const o=this.beans.gos.get("pagination"),p=this.beans.gos.get("rowDragManaged"),I=Rd(this.beans.gos);if(p){if(!I){rl("managed row dragging is only allowed in the Client Side Row Model");return}if(o){rl("managed row dragging is not possible when doing pagination");return}}const K=new dy(()=>this.value,this.rowNode,this.column,t,r,i);return this.beans.context.createBean(K),K}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(t){this.onCellEditorAttachedFuncs.push(t)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(t=>t()),this.onCellEditorAttachedFuncs=[]}};o0.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var bm=o0,Hg=0,P0=class Jw extends Rh{constructor(t,r,i,o,p){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=r,this.gos=r.gos,this.rowNode=t,this.paginationPage=r.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=o,this.printLayout=p,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+Hg++,this.rowId=yh(t.id),this.initRowBusinessKey(),this.rowFocused=r.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=r.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=yh(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(t,r){t==="left"?this.leftGui=r:t==="right"?this.rightGui=r:t==="fullWidth"?this.fullWidthGui=r:this.centerGui=r}setComp(t,r,i,o){o=Zf(this,this.beans.context,o);const p={rowComp:t,element:r,containerType:i,compBean:o};this.allRowGuis.push(p),this.updateGui(i,p),this.initialiseRowComp(p),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(r=>r.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){const r=t?"none":"";this.allRowGuis.forEach(i=>i.element.style.display=r)}initialiseRowComp(t){const r=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),nd(r)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const i=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(p=>i.addOrRemoveCssClass(p,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Ch(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),Zp(r,t.element,Jw.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc(()=>Zp(r,t.element,Jw.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),r.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=yh(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){const{containerType:r}=t;this.slideInAnimation[r]&&(dl(()=>{this.onTopChanged()}),this.slideInAnimation[r]=!1),this.fadeInAnimation[r]&&(dl(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[r]=!1)}addRowDraggerToRow(t){if(lf(this.gos)){rl("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}const r=this.beans.localeService.getLocaleTextFunc(),i=new dy(()=>`1 ${r("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),o=this.createBean(i,this.beans.context);this.rowDragComps.push(o),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(p=>p!==o),this.destroyBean(o,this.beans.context)})}setupFullWidth(t){const r=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const i=this.createFullWidthCompDetails(t.element,r);t.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(t=>t?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(t){const r=this.getCellCtrl(t);return r?r.getGui():null}executeProcessRowPostCreateFunc(){const t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const r={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(r)}areAllContainersReady(){const t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),r=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&r&&i}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){const t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),r=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,o=this.beans.columnModel.isPivotMode(),I=!!this.rowNode.group&&!this.rowNode.footer&&$m(this.gos,o);t?this.rowType="FullWidthLoading":i?this.rowType="FullWidthDetail":r?this.rowType="FullWidth":I?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,r=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(r);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,r,i=null){const o={list:[],map:{}},p=(K,jt,Gl)=>{Gl!=null?o.list.splice(Gl,0,jt):o.list.push(jt),o.map[K]=jt},I=[];for(const K of r){const jt=K.getInstanceId();let Gl=t.map[jt];Gl||(Gl=new bm(K,this.rowNode,this.beans,this)),p(jt,Gl)}for(const K of t.list){const jt=K.getColumn().getInstanceId();if(o.map[jt]!=null)continue;!this.isCellEligibleToBeRemoved(K,i)?I.push([jt,K]):K.destroy()}if(I.length)for(const[K,jt]of I){const Gl=o.list.findIndex(Lu=>Lu.getColumn().getLeft()>jt.getColumn().getLeft()),Fu=Gl===-1?void 0:Math.max(Gl-1,0);p(K,jt,Fu)}return o}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(r=>{const i=this.getCellCtrlsForContainer(r.containerType);r.rowComp.setCellCtrls(i,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const t=this.beans.columnViewportService,r=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,r.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const o=r.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,o,"left");const p=r.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,p,"right")}}isCellEligibleToBeRemoved(t,r){if(t.getColumn().getPinned()!=r)return!0;const I=t.isEditing(),K=this.beans.focusService.isCellFocused(t.getCellPosition());if(I||K){const Gl=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(Gl)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||Ih(this.gos,"print")}listenOnDomOrder(t){const r=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],r)}setAnimateFlags(t){if(this.isSticky()||!t)return;const r=pd(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),o=this.beans.visibleColsService.isPinningRight();if(r){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=o}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=o}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const t=(K,jt)=>K?K.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(K.element,jt).params):!0,r=t(this.fullWidthGui,null),i=t(this.centerGui,null),o=t(this.leftGui,"left"),p=t(this.rightGui,"right");return r&&i&&o&&p}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(r=>{this.addRowDraggerToRow(r)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(r=>r.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(i=>i.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(i=>{this.setRowCompRowId(i.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(i.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.rowNode.highlighted;this.allRowGuis.forEach(r=>{const i=t===0,o=t===1;r.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),r.rowComp.addOrRemoveCssClass("ag-row-highlight-below",o)})}postProcessRowDragging(){const t=this.rowNode.dragging;this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){const t=this.rowNode.isExpandable(),r=this.rowNode.expanded==!0;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",t),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&r),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!r),Ch(i.element,t&&r)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:ud(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(t){return this.allRowGuis.find(r=>r.element.contains(t))}onKeyboardNavigate(t){const r=this.findFullWidthRowGui(t.target);if(!((r?r.element:null)===t.target))return;const p=this.rowNode,I=this.beans.focusService.getFocusedCell(),K={rowIndex:p.rowIndex,rowPinned:p.rowPinned,column:I?.column??this.getColumnForFullWidth(r)};this.beans.navigationService.navigateToNextCell(t,t.key,K,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||ph(t))return;const r=this.allRowGuis.find(jt=>jt.element.contains(t.target)),i=r?r.element:null,o=i===t.target,p=Hf(this.gos);let I=!1;i&&p&&(I=i.contains(p)&&p.classList.contains("ag-cell"));let K=null;!o&&!I&&(K=this.beans.focusService.findNextFocusableElement(i,!1,t.shiftKey)),(this.isFullWidth()&&o||!K)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const t=this.allRowGuis.find(r=>k0(r.element))?.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){const r=this.isFullWidth()&&t?void 0:-1;this.allRowGuis.forEach(i=>{U0(i.element,"tabindex",r)})}onFullWidthRowFocused(t){const r=this.rowNode,i=t?this.isFullWidth()&&t.rowIndex===r.rowIndex&&t.rowPinned==r.rowPinned:!1,o=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;o&&(o.classList.toggle("ag-full-width-focus",i),i&&t?.forceBrowserFocus&&o.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,r){const i={list:[],map:{}};return t.list.forEach(o=>{o!==r&&(i.list.push(o),i.map[o.getColumn().getInstanceId()]=o)}),i}onMouseEvent(t,r){switch(t){case"dblclick":this.onRowDblClick(r);break;case"click":this.onRowClick(r);break;case"touchstart":case"mousedown":this.onRowMouseDown(r);break}}createRowEvent(t,r){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:r})}createRowEventWithSource(t,r){const i=this.createRowEvent(t,r);return i.source=this,i}onRowDblClick(t){ph(t)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",t))}getColumnForFullWidth(t){const{visibleColsService:r}=this.beans;switch(t?.containerType){case"center":return r.getCenterCols()[0];case"left":return r.getLeftCols()[0];case"right":return r.getRightCols()[0];default:return r.getAllCols()[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=H0(t.target,"ag-row-drag",3),!this.isFullWidth())return;const r=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const i=this.findFullWidthRowGui(t.target),o=i?.element,p=t.target;let I=!0;o&&o.contains(p)&&nv(p)&&(I=!1),this.beans.focusService.setFocusedCell({rowIndex:r.rowIndex,column:this.getColumnForFullWidth(i),rowPinned:r.rowPinned,forceBrowserFocus:I})}onRowClick(t){if(ph(t)||this.lastMouseDownOnDragger)return;const{gos:i}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",t));const o=t.ctrlKey||t.metaKey,p=t.shiftKey,I=this.rowNode.isSelected(),K=ff(i),jt=Im(i),Gl=Vg(i);if(K&&this.rowNode.group||this.isRowSelectionBlocked()||!Gl&&!I||!jt&&I)return;const Fu=Jg(i),Lu="rowClicked";if(I)Fu?this.rowNode.setSelectedParams({newValue:!1,event:t,source:Lu}):o?jt&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:Lu}):Gl&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!p,rangeSelect:p,event:t,source:Lu});else{const qu=Fu?!1:!o;this.rowNode.setSelectedParams({newValue:!0,clearSelection:qu,rangeSelect:p,event:t,source:Lu})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!nd(this.gos)}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const r=()=>{const o=t.clientHeight;if(o!=null&&o>0){const p=()=>{this.rowNode.setRowHeight(o),(Rd(this.gos)||dh(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(p,0)}},i=this.beans.resizeObserverService.observeResize(t,r);this.addDestroyFunc(i),r()}createFullWidthCompDetails(t,r){const{gos:i,rowNode:o}=this,p=i.addGridCommonParams({fullWidth:!0,data:o.data,node:o,value:o.key,valueFormatted:o.key,eGridCell:t,eParentOfValue:t,pinned:r,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(K,jt,Gl,Fu)=>this.addFullWidthRowDragging(K,jt,Gl,Fu),setTooltip:(K,jt)=>this.refreshRowTooltip(K,jt)}),I=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return I.getFullWidthDetailCellRendererDetails(p);case"FullWidthGroup":return I.getFullWidthGroupCellRendererDetails(p);case"FullWidthLoading":return I.getFullWidthLoadingCellRendererDetails(p);default:return I.getFullWidthCellRendererDetails(p)}}refreshRowTooltip(t,r){if(!this.fullWidthGui)return;const i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:r};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new W0(i,this.beans))}addFullWidthRowDragging(t,r,i="",o){if(!this.isFullWidth())return;const p=new dy(()=>i,this.rowNode,void 0,t,r,o);this.createBean(p,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(p,this.beans.context)})}onUiLevelChanged(){const t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){const r="ag-row-level-"+t,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(o=>{o.rowComp.addOrRemoveCssClass(r,!0),o.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),r=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==r&&(this.lastRowOnPage=r,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-last",r)))}stopEditing(t=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,t)}setInlineEditingCss(){const t=this.editingRow||this.getAllCellCtrls().some(r=>r.isEditing());this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),r.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,r=null,i=null){return this.editingRow?!0:this.beans.rowEditService?.startEditing(this,t,r,i)??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(r=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(r,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,r){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(r,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){const r=this.getPinnedForContainer(t),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:r};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){const t=this.gos.get("rowStyle");if(t&&typeof t=="function"){rl("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const r=this.gos.getCallback("getRowStyle");let i;if(r){const o={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};i=r(o)}return i||t?Object.assign({},t,i):this.emptyStyle}onRowSelected(t){const r=!!this.rowNode.isSelected();this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-selected",r),rm(i.element,r),i.element.contains(Hf(this.gos))&&(i===this.centerGui||i===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const t=this.rowNode.isSelected();if(t&&!Im(this.gos))return;const i=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(i,"rowSelection")}addHoverFunctionality(t){if(!this.active)return;const{element:r,compBean:i}=t,{rowNode:o,beans:p,gos:I}=this;i.addManagedListeners(r,{mouseenter:()=>o.onMouseEnter(),mouseleave:()=>o.onMouseLeave()}),i.addManagedListeners(o,{mouseEnter:()=>{!p.dragService.isDragging()&&!I.get("suppressRowHoverHighlight")&&(r.classList.add("ag-row-hover"),o.setHovered(!0))},mouseLeave:()=>{r.classList.remove("ag-row-hover"),o.setHovered(!1)}})}roundRowTopToBounds(t){const r=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(r.top,!0)-100,o=this.applyPaginationOffset(r.bottom,!0)+100;return Math.min(Math.max(i,t),o)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,r){t?r(t):this.allRowGuis.forEach(r)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;const r=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),p=Kh(this.gos)?lh(this.gos,this.rowNode).height:void 0,I=p?`${Math.min(i,p)-2}px`:void 0;this.forEachGui(t,K=>{K.element.style.height=`${r}px`,I&&K.element.style.setProperty("--ag-line-height",I)})}addEventListener(t,r){super.addEventListener(t,r)}removeEventListener(t,r){super.removeEventListener(t,r)}destroyFirstPass(t=!1){if(this.active=!1,!t&&fg(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){const o=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(o)}else this.allRowGuis.forEach(o=>o.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const r=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(r),this.beans.eventService.dispatchEvent(r),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const t=r=>(r.list.forEach(i=>i.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,r=>{r.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),r.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const t=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,r=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;const i=this.beans.pageBoundsService.getPixelOffset();return t+i*(r?1:-1)}setRowTop(t){if(!this.printLayout&&pd(t)){const r=this.applyPaginationOffset(t),p=`${this.rowNode.isRowPinned()||this.rowNode.sticky?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}px`;this.setRowTopStyle(p)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";const r=this.rowNode;let i;if(this.isSticky())i=r.stickyRowTop;else{const o=this.slideInAnimation[t]?this.roundRowTopToBounds(r.oldRowTop):r.rowTop,p=this.applyPaginationOffset(o);i=r.isRowPinned()?p:this.beans.rowContainerHeightService.getRealPixelPosition(p)}return i+"px"}setRowTopStyle(t){this.allRowGuis.forEach(r=>this.suppressRowTransform?r.rowComp.setTop(t):r.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let r=null;return this.getAllCellCtrls().forEach(i=>{i.getColumn()==t&&(r=i)}),r!=null||this.getAllCellCtrls().forEach(i=>{i.getColSpanningList().indexOf(t)>=0&&(r=i)}),r}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){const r=this.rowNode.getRowIndexString();if(r===null)return;const i=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),o=this.rowNode.rowIndex%2===0,p=i+this.rowNode.rowIndex+1;this.forEachGui(t,I=>{I.rowComp.setRowIndex(r),I.rowComp.addOrRemoveCssClass("ag-row-even",o),I.rowComp.addOrRemoveCssClass("ag-row-odd",!o),Zg(I.element,p)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};P0.DOM_DATA_KEY_ROW_CTRL="renderedRow";var gm=P0,g0=class extends Rh{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",jp("touchstart")?"touchstart":"mousedown"].forEach(r=>{const i=this.processMouseEvent.bind(this,r);this.addManagedElementListeners(this.element,{[r]:i})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||ph(t))return;const r=this.getRowForEvent(t),i=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,r,i):(i&&i.onMouseEvent(e,t),r&&r.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Av())return;const e=new J0(this.element),t=r=>{const i=this.getRowForEvent(r.touchEvent),o=this.mouseEventService.getRenderedCellForEvent(r.touchEvent);this.handleContextMenuMouseEvent(void 0,r.touchEvent,i,o)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const r=mf(this.gos,t,gm.DOM_DATA_KEY_ROW_CTRL);if(r)return r;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,r,i){const o=r?r.getRowNode():null,p=i?i.getColumn():null;let I=null;if(p){const Gl=e||t;i.dispatchCellContextMenuEvent(Gl??null),I=this.valueService.getValue(p,o)}const K=this.ctrlsService.getGridBodyCtrl(),jt=i?i.getGui():K.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:o,column:p,value:I,anchorToElement:jt})}getControlsForEventTarget(e){return{cellCtrl:_p(this.gos,e,bm.DOM_DATA_KEY_CELL_CTRL),rowCtrl:_p(this.gos,e,gm.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:r,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(r?this.processCellKeyboardEvent(r,e,t):i&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,r){const i=e.getRowNode(),o=e.getColumn(),p=e.isEditing();!yy(this.gos,r,i,o,p)&&t==="keydown"&&(!p&&this.navigationService.handlePageScrollingKey(r)||e.onKeyDown(r),this.doGridOperations(r,e.isEditing()),$v(r)&&e.processCharacter(r)),t==="keydown"&&this.eventService.dispatchEvent(e.createEvent(r,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,r){const i=e.getRowNode(),o=this.focusService.getFocusedCell(),p=o&&o.column;if(!yy(this.gos,r,i,p,!1)){const K=r.key;if(t==="keydown")switch(K){case np.PAGE_HOME:case np.PAGE_END:case np.PAGE_UP:case np.PAGE_DOWN:this.navigationService.handlePageScrollingKey(r,!0);break;case np.UP:case np.DOWN:e.onKeyboardNavigate(r);break;case np.TAB:e.onTabKeyDown(r);break}}t==="keydown"&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",r))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const r=r3(e);if(r===np.A)return this.onCtrlAndA(e);if(r===np.C)return this.onCtrlAndC(e);if(r===np.D)return this.onCtrlAndD(e);if(r===np.V)return this.onCtrlAndV(e);if(r===np.X)return this.onCtrlAndX(e);if(r===np.Y)return this.onCtrlAndY();if(r===np.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:r,rangeService:i}=this;if(i&&r.isRowsToRender()){const[o,p]=[t.isEmpty("top"),t.isEmpty("bottom")],I=o?null:"top";let K,jt;p?(K=null,jt=r.getRowCount()-1):(K="bottom",jt=t.getPinnedBottomRowCount()-1);const Gl=this.visibleColsService.getAllCols();if(rh(Gl))return;i.setCellRange({rowStartIndex:0,rowStartPinned:I,rowEndIndex:jt,rowEndPinned:K,columnStart:Gl[0],columnEnd:wf(Gl)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:r}=this.getControlsForEventTarget(e.target);t?.isEditing()||r?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:r}=this.getControlsForEventTarget(e.target);t?.isEditing()||r?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:r}=this.getControlsForEventTarget(e.target);t?.isEditing()||r?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},a0=class extends Rh{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Cm(this.element,t),Q0(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},Nm=class extends Rh{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Cm(this.element,t),Q0(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},y0=e=>e.getTopRowCtrls(),Xm=e=>e.getStickyTopRowCtrls(),Ym=e=>e.getStickyBottomRowCtrls(),x0=e=>e.getBottomRowCtrls(),E0=e=>e.getCentreRowCtrls(),Qg={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:E0},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:E0},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:E0},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:E0},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:y0},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:y0},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:y0},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:y0},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:Xm},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Xm},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Xm},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:Xm},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Ym},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Ym},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Ym},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Ym},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:x0},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:x0},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:x0},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:x0}};function Sm(e){return Qg[e]}var t0=["topCenter","topLeft","topRight"],m0=["bottomCenter","bottomLeft","bottomRight"],Km=["center","left","right"],om=["center","left","right","fullWidth"],w0=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],rv=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],Cv=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],Zm=["stickyTopCenter","stickyTopLeft","stickyTopRight"],bv=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],wy=[...Zm,"stickyTopFullWidth",...bv,"stickyBottomFullWidth"],e2=[...t0,...m0,...Km,...Zm,...bv],Cy=class extends Rh{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=Sm(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new Bh(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,r){this.comp=e,this.eContainer=t,this.eViewport=r,this.createManagedBean(new g0(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const i=()=>this.onPinnedWidthChanged();this.forContainers(rv,()=>{this.pinnedWidthFeature=this.createManagedBean(new a0(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:i})}),this.forContainers(Cv,()=>{this.pinnedWidthFeature=this.createManagedBean(new Nm(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:i})}),this.forContainers(om,()=>this.createManagedBean(new ld(this.eContainer,this.name==="center"?r:void 0))),this.forContainers(e2,()=>this.createManagedBean(new up(this.eContainer))),this.forContainers(w0,()=>this.createManagedBean(new Sd(o=>this.comp.setContainerWidth(`${o}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(wy.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const r=this.gos.get("ensureDomOrder"),i=Ih(this.gos,"print");this.comp.setDomOrder(r||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),r=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,r,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return zv(this.eViewport)}getCenterViewportScrollLeft(){return h1(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return g2(this.eViewport)}getViewportScrollLeft(){return h1(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||$1(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){W1(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const r=Ih(this.gos,"print"),o=this.gos.get("embedFullWidthRows")||r,p=t.filter(I=>{const K=I.isFullWidth();return this.options.fullWidth?!o&&K:o||!K});this.comp.setRowCtrls({rowCtrls:p,useFlushSync:e})}},C1="ag-force-vertical-scroll",qv="ag-selectable",M3="ag-column-moving",G0=class extends Rh{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,r,i,o,p,I){this.comp=e,this.eGridBody=t,this.eBodyViewport=r,this.eTop=i,this.eBottom=o,this.eStickyTop=p,this.eStickyBottom=I,this.eCenterColsViewport=r.querySelector(`.${Sm("center").viewport}`),this.eFullWidthContainer=r.querySelector(`.${Sm("fullWidth").container}`),this.eStickyTopFullWidthContainer=p.querySelector(`.${Sm("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=I.querySelector(`.${Sm("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",K=>this.setCellTextSelection(K.currentValue)),this.createManagedBean(new Yu(this.comp)),this.bodyScrollFeature=this.createManagedBean(new ep(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,r,o,p,I]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvancedFilterHeaderComp(i),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:r=>{const{target:i}=r,o=H0(i,"ag-root",t);t.classList.toggle("ag-has-focus",!o)},focusout:r=>{const{target:i,relatedTarget:o}=r,p=t.contains(o),I=H0(o,"ag-root",t);H0(i,"ag-root",t)||(!p||I)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(M3,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(qv,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=e&&this.scrollVisibleService.getScrollbarWidth()||0,r=ey()?16:0,i=`calc(100% + ${t+r}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(i)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=r=>{const i=r.relatedTarget;if(i1(i)===null){this.rowRenderer.stopEditing();return}let o=t.some(p=>p.contains(i))&&this.mouseEventService.isElementInThisGrid(i);if(!o){const p=this.popupService;o=p.getActivePopups().some(I=>I.contains(i))||p.isElementWithinCustomPopup(i)}o||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(r=>this.addManagedElementListeners(r,{focusout:e}))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,r=t===-1?-1:e+t;this.comp.setRowCount(r)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?C1:null,r=Ih(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||r&&v2(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const r=e&&fg(this.gos)&&!this.rowContainerHeightService.isStretching(),i=r?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,r)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:r,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(r))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:r,shiftKey:i}=e,o=i||Math.abs(t)>Math.abs(r),p=e.target;o?(this.eStickyTopFullWidthContainer.contains(p)||this.eStickyBottomFullWidthContainer.contains(p))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(r))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:r}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||r})}onBodyViewportContextMenu(e,t,r){if(!e&&!r)return;this.gos.get("preventDefaultOnContextMenu")&&(e||r).preventDefault();const{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:r,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Av())return;const t=new J0(this.eBodyViewport),r=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:r}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new jv(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),r=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(r),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(r?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),r=this.pinnedRowModel.getPinnedTopTotalHeight();let i=0;t>0&&(i+=t),r>0&&(i+=r),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight(),r=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,i=e+r;this.comp.setStickyBottomBottom(`${i}px`)}sizeColumnsToFit(e,t){const i=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,p=zv(this.eGridBody)-i;if(p>0){this.columnSizeService.sizeColumnsToFit(p,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):rl("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},by=class extends cm{constructor(e,t,r,i,o){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=i,this.cellCtrl=t;const p=document.createElement("div");p.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(p);const I=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),cg(I,t.getCellAriaRole()),I.setAttribute("col-id",t.colIdSanitised);const K={addOrRemoveCssClass:(jt,Gl)=>this.addOrRemoveCssClass(jt,Gl),setUserStyles:jt=>lv(I,jt),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:jt=>this.includeSelection=jt,setIncludeRowDrag:jt=>this.includeRowDrag=jt,setIncludeDndSource:jt=>this.includeDndSource=jt,setRenderDetails:(jt,Gl,Fu)=>this.setRenderDetails(jt,Gl,Fu),setEditDetails:(jt,Gl,Fu)=>this.setEditDetails(jt,Gl,Fu),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(K,this.getGui(),this.eCellWrapper,r,o,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,r){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const o=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(r||o)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,r){e?this.createCellEditorInstance(e,t,r):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,r=t||this.forceWrapper,i=r&&this.eCellWrapper==null;if(i){const Gl=document.createElement("div");Gl.setAttribute("role","presentation"),Gl.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=Gl,this.getGui().appendChild(this.eCellWrapper)}const o=!r&&this.eCellWrapper!=null;o&&(sv(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!r);const p=!e&&r,I=p&&this.eCellValue==null;if(I){const Gl=document.createElement("span");Gl.setAttribute("role","presentation"),Gl.setAttribute("class","ag-cell-value"),this.eCellValue=Gl,this.eCellWrapper.appendChild(this.eCellValue)}const K=!p&&this.eCellValue!=null;K&&(sv(this.eCellValue),this.eCellValue=void 0);const jt=i||o||I||K;return jt&&this.removeControls(),e||t&&this.addControls(),jt}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,r){const i=this.editorVersion,o=e.newAgStackInstance();if(o==null)return;const{params:p}=e;o.then(K=>this.afterCellEditorCreated(i,K,p,t,r)),id(this.cellEditor)&&p.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();_0(t);const r=e!=null?yh(e,!0):null;r!=null&&(t.textContent=r)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),sv(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),sv(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){const r=!this.beans.gos.get("suppressAnimationFrame"),i=this.rendererVersion,{componentClass:o}=e,p=()=>{if(this.rendererVersion!==i||!this.isAlive())return;const K=e.newAgStackInstance(),jt=this.afterCellRendererCreated.bind(this,i,o);K&&K.then(jt)};r&&this.firstRender?this.beans.animationFrameService.createTask(p,this.rowNode.rowIndex,"createTasksP2"):p()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,r){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(r);return}if(this.cellRenderer=r,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){const o=this.getParentOfValue();_0(o),o.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,r,i,o){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){rl(`cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();const K=i||t.isPopup!==void 0&&t.isPopup();K?this.addPopupCellEditor(r,o):this.addInCellEditor(),this.refreshEditStyles(!0,K),t.afterGuiAttached&&t.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.rowCtrl?.setInlineEditingCss()}addInCellEditor(){const e=this.getGui();e.contains(Hf(this.beans.gos))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gos.get("editType")==="fullRow"&&rl("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const r=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(e));const i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);const o=this.beans.popupService,p=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),I=t??r.getPopupPosition?.()??"over",K=this.beans.gos.get("enableRtl"),jt={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:I,alignSide:K?"right":"left",keepWithinBounds:!0},Gl=o.positionPopupByComponent.bind(o,jt),Fu=this.beans.localeService.getLocaleTextFunc(),Lu=o.addPopup({modal:p,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:Gl,ariaLabel:Fu("ariaLabelCellEditor","Cell Editor")});Lu&&(this.hideEditorPopup=Lu.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui();e.contains(Hf(this.beans.gos))&&w2()&&e.focus({preventScroll:!0}),_0(this.getParentOfValue())}},Yv=class extends cm{constructor(e,t,r){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;const i=document.createElement("div");i.setAttribute("comp-id",`${this.getCompId()}`),this.setInitialStyle(i,r),this.setTemplateFromElement(i);const o=this.getGui(),p=o.style;this.domOrder=this.rowCtrl.getDomOrder(),cg(o,"row");const I={setDomOrder:K=>this.domOrder=K,setCellCtrls:K=>this.setCellCtrls(K),showFullWidth:K=>this.showFullWidth(K),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(K,jt)=>this.addOrRemoveCssClass(K,jt),setUserStyles:K=>lv(o,K),setTop:K=>p.top=K,setTransform:K=>p.transform=K,setRowIndex:K=>o.setAttribute("row-index",K),setRowId:K=>o.setAttribute("row-id",K),setRowBusinessKey:K=>o.setAttribute("row-business-key",K),refreshFullWidth:K=>this.fullWidthCellRenderer?.refresh?.(K())??!1};e.setComp(I,this.getGui(),r,void 0),this.addDestroyFunc(()=>{e.unsetComp(r)})}setInitialStyle(e,t){const r=this.rowCtrl.getInitialTransform(t);if(r)e.style.setProperty("transform",r);else{const i=this.rowCtrl.getInitialRowTop(t);i&&e.style.setProperty("top",i)}}showFullWidth(e){const t=i=>{if(this.isAlive()){const o=i.getGui();this.getGui().appendChild(o),this.rowCtrl.setupDetailRowAutoHeight(o),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)},r=e.newAgStackInstance();r?.then(t)}setCellCtrls(e){const t=Object.assign({},this.cellComps);e.forEach(i=>{const o=i.instanceId;this.cellComps[o]==null?this.newCellComp(i):t[o]=null});const r=Ln(t).filter(i=>i!=null);this.destroyCells(r),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];e.forEach(r=>{const i=this.cellComps[r.instanceId];i&&t.push(i.getGui())}),m2(this.getGui(),t)}newCellComp(e){const t=new by(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.instanceId]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=Ln(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&Ml("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){e.forEach(t=>{if(!t)return;const r=t.getCtrl().instanceId;this.cellComps[r]===t&&(t.detach(),t.destroy(),this.cellComps[r]=null)})}};function Kv(e){let t;return e.type==="center"?t=`<div class="${e.viewport}" data-ref="eViewport" role="presentation">
                <div class="${e.container}" data-ref="eContainer" role="rowgroup"></div>
            </div>`:t=`<div class="${e.container}" data-ref="eContainer" role="rowgroup"></div>`,t}var b1=class extends cm{constructor(){super(),this.eViewport=Cf,this.eContainer=Cf,this.rowComps={},this.name=cm.elementGettingCreated.getAttribute("name"),this.options=Sm(this.name),this.setTemplate(Kv(this.options))}wireBeans(e){this.beans=e}postConstruct(){const e={setHorizontalScroll:r=>this.eViewport.scrollLeft=r,setViewportHeight:r=>this.eViewport.style.height=r,setRowCtrls:({rowCtrls:r})=>this.setRowCtrls(r),setDomOrder:r=>{this.domOrder=r},setContainerWidth:r=>this.eContainer.style.width=r,setOffsetTop:r=>this.eContainer.style.transform=`translateY(${r})`};this.createManagedBean(new Cy(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e){const{rowComps:t,beans:r,options:i}=this,o={...t};this.rowComps={},this.lastPlacedElement=null;const p=[];for(const I of e){const K=I.instanceId,jt=o[K];let Gl;if(jt)Gl=jt,delete o[K];else{if(!I.getRowNode().displayed)continue;Gl=new Yv(I,r,i.type)}this.rowComps[K]=Gl,p.push([Gl,!jt])}this.removeOldRows(Object.values(o)),this.addRowNodes(p)}addRowNodes(e){const{domOrder:t,eContainer:r}=this;for(const[i,o]of e){const p=i.getGui();t?this.ensureDomOrder(p):o&&r.appendChild(p)}}removeOldRows(e){const{eContainer:t}=this;for(const r of e)t.removeChild(r.getGui()),r.destroy()}ensureDomOrder(e){this.domOrder&&(Oy(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}},Zv={selector:"AG-ROW-CONTAINER",component:b1};function K0(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}var G1=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${K0(["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${K0(["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${K0(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${K0(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${K0(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,Sy=class extends cm{constructor(){super(G1,[hd,md,zd,wl,Zv]),this.eBodyViewport=Cf,this.eStickyTop=Cf,this.eStickyBottom=Cf,this.eTop=Cf,this.eBottom=Cf,this.eBody=Cf}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.rangeService=e.rangeService}postConstruct(){const e=(r,i)=>{const o=`${r}px`;i.style.minHeight=o,i.style.height=o},t={setRowAnimationCssOnBodyViewport:(r,i)=>this.setRowAnimationCssOnBodyViewport(r,i),setColumnCount:r=>Qf(this.getGui(),r),setRowCount:r=>Om(this.getGui(),r),setTopHeight:r=>e(r,this.eTop),setBottomHeight:r=>e(r,this.eBottom),setTopDisplay:r=>this.eTop.style.display=r,setBottomDisplay:r=>this.eBottom.style.display=r,setStickyTopHeight:r=>this.eStickyTop.style.height=r,setStickyTopTop:r=>this.eStickyTop.style.top=r,setStickyTopWidth:r=>this.eStickyTop.style.width=r,setStickyBottomHeight:r=>{this.eStickyBottom.style.height=r,this.eStickyBottom.classList.toggle("ag-hidden",r==="0px")},setStickyBottomBottom:r=>this.eStickyBottom.style.bottom=r,setStickyBottomWidth:r=>this.eStickyBottom.style.width=r,setColumnMovingCss:(r,i)=>this.addOrRemoveCssClass(r,i),updateLayoutClasses:(r,i)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(p=>{p.toggle("ag-layout-auto-height",i.autoHeight),p.toggle("ag-layout-normal",i.normal),p.toggle("ag-layout-print",i.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",i.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",i.normal),this.addOrRemoveCssClass("ag-layout-print",i.print)},setAlwaysVerticalScrollClass:(r,i)=>this.eBodyViewport.classList.toggle(C1,i),registerBodyViewportResizeListener:r=>{const i=this.resizeObserverService.observeResize(this.eBodyViewport,r);this.addDestroyFunc(()=>i())},setPinnedTopBottomOverflowY:r=>this.eTop.style.overflowY=this.eBottom.style.overflowY=r,setCellSelectableCss:(r,i)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(o=>o.classList.toggle(r,i))},setBodyViewportWidth:r=>this.eBodyViewport.style.width=r};this.ctrl=this.createManagedBean(new G0),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&lf(this.gos)||am(this.gos))&&zp(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const r=this.eBodyViewport.classList;r.toggle("ag-row-animation",t),r.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}},R3={selector:"AG-GRID-BODY",component:Sy},t2=class extends Rh{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),r=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==r)&&(this.horizontalScrollGap=t,this.verticalScrollGap=r,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),r=typeof e=="number"&&e>=0?e:Qm();r!=null&&(this.scrollbarWidth=r,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},i3="__ag_grid_instance",r2=class pb extends Rh{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=pb.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[i3]=this.gridInstanceId}getRenderedCellForEvent(t){return _p(this.gos,t.target,bm.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let r=t;for(;r;){const i=r[i3];if(pd(i))return i===this.gridInstanceId;r=r.parentElement}return!1}getCellPositionForEvent(t){const r=this.getRenderedCellForEvent(t);return r?r.getCellPosition():null}getNormalisedPosition(t){const r=Ih(this.gos,"normal"),i=t;let o,p;if(i.clientX!=null||i.clientY!=null?(o=i.clientX,p=i.clientY):(o=i.x,p=i.y),r){const I=this.ctrlsService.getGridBodyCtrl(),K=I.getScrollFeature().getVScrollPosition(),jt=I.getScrollFeature().getHScrollPosition();o+=jt.left,p+=K.top}return{x:o,y:p}}};r2.gridInstanceSequence=new t1;var i2=r2,_y=class extends Rh{constructor(){super(),this.beanName="navigationService",this.onPageDown=Bl(this.onPageDown,100),this.onPageUp=Bl(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const r=e.key,i=e.altKey,o=e.ctrlKey||e.metaKey,p=!!this.rangeService&&e.shiftKey,I=this.mouseEventService.getCellPositionForEvent(e);let K=!1;switch(r){case np.PAGE_HOME:case np.PAGE_END:!o&&!i&&(this.onHomeOrEndKey(r),K=!0);break;case np.LEFT:case np.RIGHT:case np.UP:case np.DOWN:if(!I)return!1;o&&!i&&!p&&(this.onCtrlUpDownLeftRight(r,I),K=!0);break;case np.PAGE_DOWN:case np.PAGE_UP:!o&&!i&&(K=this.handlePageUpDown(r,I,t));break}return K&&e.preventDefault(),K}handlePageUpDown(e,t,r){return r&&(t=this.focusService.getFocusedCell()),t?(e===np.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){const{scrollIndex:t,scrollType:r,scrollColumn:i,focusIndex:o,focusColumn:p}=e;pd(i)&&!i.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(i),pd(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,r),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(o),this.focusService.setFocusedCell({rowIndex:o,column:p,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:o,rowPinned:null,column:p})}onPageDown(e){const r=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),o=this.pageBoundsService.getPixelOffset(),p=r.top+i,I=this.rowModel.getRowIndexAtPixel(p+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,I):this.navigateToNextPage(e,I)}onPageUp(e){const r=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),o=r.top,p=this.rowModel.getRowIndexAtPixel(o+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,p,!0):this.navigateToNextPage(e,p,!0)}navigateToNextPage(e,t,r=!1){const i=this.getViewportHeight(),o=this.pageBoundsService.getFirstRow(),p=this.pageBoundsService.getLastRow(),I=this.pageBoundsService.getPixelOffset(),K=this.rowModel.getRow(e.rowIndex),jt=r?K?.rowHeight-i-I:i-I,Gl=K?.rowTop+jt;let Fu=this.rowModel.getRowIndexAtPixel(Gl+I);if(Fu===e.rowIndex){const qu=r?-1:1;t=Fu=e.rowIndex+qu}let Lu;r?(Lu="bottom",Fu<o&&(Fu=o),t<o&&(t=o)):(Lu="top",Fu>p&&(Fu=p),t>p&&(t=p)),this.isRowTallerThanView(Fu)&&(t=Fu,Lu="top"),this.navigateTo({scrollIndex:t,scrollType:Lu,scrollColumn:null,focusIndex:Fu,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,r=!1){this.navigateTo({scrollIndex:t,scrollType:r?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const i=this.getNextFocusIndexForAutoHeight(e,r);this.navigateTo({scrollIndex:t,scrollType:r?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const r=t?-1:1,i=this.getViewportHeight(),o=this.pageBoundsService.getLastRow();let p=0,I=e.rowIndex;for(;I>=0&&I<=o;){const K=this.rowModel.getRow(I);if(K){const jt=K.rowHeight??0;if(p+jt>i)break;p+=jt}I+=r}return Math.max(0,Math.min(I,o))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth();let r=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(r-=t),r}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const r=t.rowHeight;return typeof r!="number"?!1:r>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const r=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:i}=r,o=r.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:o,focusIndex:i,focusColumn:o})}onHomeOrEndKey(e){const t=e===np.PAGE_HOME,r=this.visibleColsService.getAllCols(),i=t?r[0]:wf(r),o=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:i,focusIndex:o,focusColumn:i})}onTabKeyDown(e,t){const r=t.shiftKey,i=this.tabToNextCellCommon(e,r,t);if(i!==!1){i?t.preventDefault():i===null&&this.focusService.allowFocusForNextGridCoreContainer(r);return}if(r){const{rowIndex:o,rowPinned:p}=e.getRowPosition();(p?o===0:o===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof bm&&e.focusCell(!0),(!r&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(r))&&t.preventDefault()}tabToNextCell(e,t){const r=this.focusService.getFocusedCell();if(!r)return!1;let i=this.getCellByPosition(r);return!i&&(i=this.rowRenderer.getRowByPosition(r),!i||!i.isFullWidth())?!1:!!this.tabToNextCellCommon(i,e,t)}tabToNextCellCommon(e,t,r){let i=e.isEditing();if(!i&&e instanceof bm){const I=e.getRowCtrl();I&&(i=I.isEditing())}let o;return i?this.gos.get("editType")==="fullRow"?o=this.moveToNextEditingRow(e,t,r):o=this.moveToNextEditingCell(e,t,r):o=this.moveToNextCellNotEditing(e,t),o===null?o:o||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,r=null){const i=e.getCellPosition();e.getGui().focus(),e.stopEditing();const o=this.findNextCellToFocusOn(i,t,!0);return o===!1?null:o==null?!1:(o.startEditing(null,!0,r),o.focusCell(!1),!0)}moveToNextEditingRow(e,t,r=null){const i=e.getCellPosition(),o=this.findNextCellToFocusOn(i,t,!0);if(o===!1)return null;if(o==null)return!1;const p=o.getCellPosition(),I=this.isCellEditable(i),K=this.isCellEditable(p),jt=p&&i.rowIndex===p.rowIndex&&i.rowPinned===p.rowPinned;return I&&e.setFocusOutOnEditor(),jt||(e.getRowCtrl().stopEditing(),o.getRowCtrl().startRowEditing(void 0,void 0,r)),K?(o.setFocusInOnEditor(),o.focusCell()):o.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const r=this.visibleColsService.getAllCols();let i;e instanceof gm?i={...e.getRowPosition(),column:t?r[0]:wf(r)}:i=e.getCellPosition();const o=this.findNextCellToFocusOn(i,t,!1);if(o===!1)return null;if(o instanceof bm)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o.getRowPosition(),t);return pd(o)}findNextCellToFocusOn(e,t,r){let i=e;for(;;){e!==i&&(e=i),t||(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextTabbedCell(i,t);const o=this.gos.getCallback("tabToNextCell");if(pd(o)){const jt=o({backwards:t,editing:r,previousCellPosition:e,nextCellPosition:i||null});if(jt===!0||jt===null)jt===null&&rl("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),i=e;else{if(jt===!1)return!1;i={rowIndex:jt.rowIndex,column:jt.column,rowPinned:jt.rowPinned}}}if(!i)return null;if(i.rowIndex<0){const K=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:K+i.rowIndex,column:i.column},fromCell:!0}),null}const p=this.gos.get("editType")==="fullRow";if(r&&!p&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);const I=this.getCellByPosition(i);if(!I){const K=this.rowRenderer.getRowByPosition(i);if(!K||!K.isFullWidth()||r)continue;return K}if(!I.isSuppressNavigable())return this.rangeService?.setRangeToCell(i),I}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,r,i){let o=r,p=!1;for(;o&&(o===r||!this.isValidNavigateCell(o));)this.gos.get("enableRtl")?t===np.LEFT&&(o=this.getLastCellOfColSpan(o)):t===np.RIGHT&&(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextCellToFocus(t,o),p=id(o);if(p&&e&&e.key===np.UP&&(o={rowIndex:-1,rowPinned:null,column:r.column}),i){const K=this.gos.getCallback("navigateToNextCell");if(pd(K)){const Gl=K({key:t,previousCellPosition:r,nextCellPosition:o||null,event:e});pd(Gl)?o={rowPinned:Gl.rowPinned,rowIndex:Gl.rowIndex,column:Gl.column}:o=null}}if(!o)return;if(o.rowIndex<0){const K=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:K+o.rowIndex,column:r.column},event:e||void 0,fromCell:!0});return}const I=this.getNormalisedPosition(o);I?this.focusPosition(I):this.tryToFocusFullWidthRow(o)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const r=this.visibleColsService.getAllCols(),i=this.rowRenderer.getRowByPosition(e);if(!i||!i.isFullWidth())return!1;const o=this.focusService.getFocusedCell(),p={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?wf(r):r[0])};this.focusPosition(p);const I=t??(o!=null&&this.rowPositionUtils.before(p,o));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:p.rowIndex,rowPinned:p.rowPinned,column:p.column,isFullWidthCell:!0,fromBelow:I}),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const r=t.getColSpanningList();return r.length===1?e:{rowIndex:e.rowIndex,column:wf(r),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=eg(this.gos),r=this.rowModel.getRow(e.rowIndex);!(t&&r?.sticky)&&id(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},Ey=class extends Rh{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const r=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(r)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},D2=class extends Rh{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,r){this.showPopup(e,i=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:r,mouseEvent:t,ePopup:i})},r,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,r){let i=-1,o="left";const p=this.menuService.isLegacyMenuEnabled();!p&&this.gos.get("enableRtl")&&(i=1,o="right");const I=p?void 0:4*i,K=p?void 0:4;this.showPopup(e,jt=>{this.popupService.positionPopupByComponent({type:r,eventSource:t,ePopup:jt,nudgeX:I,nudgeY:K,alignSide:o,keepWithinBounds:!0,position:"under",column:e})},r,t,p)}showPopup(e,t,r,i,o){const p=e?this.createBean(new py(e,"COLUMN_MENU")):void 0;if(this.activeMenu=p,!p?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const I=document.createElement("div");cg(I,"presentation"),I.classList.add("ag-menu"),o||I.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(I,{keydown:Vh=>this.trapFocusWithin(Vh,I)}),I.appendChild(p?.getGui());let K;const jt=()=>p?.afterGuiDetached(),Gl=this.menuService.isColumnMenuAnchoringEnabled()?i??this.ctrlsService.getGridBodyCtrl().getGui():void 0,Fu=Vh=>{e.setMenuVisible(!1,"contextMenu");const Zh=Vh instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),Zh&&i&&k0(i)){const Wh=this.focusService.findTabbableParent(i);Wh&&Wh.focus()}jt(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,r,e)},Lu=this.localeService.getLocaleTextFunc(),qu=o&&r!=="columnFilter"?Lu("ariaLabelColumnMenu","Column Menu"):Lu("ariaLabelColumnFilter","Column Filter"),Xd=this.popupService.addPopup({modal:!0,eChild:I,closeOnEsc:!0,closedCallback:Fu,positionCallback:()=>t(I),anchorToElement:Gl,ariaLabel:qu});Xd&&(this.hidePopup=K=Xd.hideFunc),p.afterInit().then(()=>{t(I),p.afterGuiAttached({container:r,hidePopup:K})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,r,e)}trapFocusWithin(e,t){e.key!==np.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,r){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:r??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},n2=class extends Rh{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){const i=Eg(this.gos).ResizeObserver,o=i?new i(t):null;return o?.observe(e),()=>o?.disconnect()}},n3=class extends Rh{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const r=this.paginationService?.getCurrentPage()??0;r!==this.lastPage&&(this.lastPage=r,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&rl(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,r){this.verifyAnimationFrameOn(r);const i={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[r],i),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((r,i)=>r.index!==i.index?t*(i.index-r.index):i.createOrder-r.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,r=t.list,i=this.createTasksP2,o=i.list,p=this.destroyTasks,I=new Date().getTime();let K=new Date().getTime()-I;const jt=e<=0,Gl=this.ctrlsService.getGridBodyCtrl();for(;jt||K<e;){if(!Gl.getScrollFeature().scrollGridIfNeeded()){let Lu;if(r.length)this.sortTaskList(t),Lu=r.pop().task;else if(o.length)this.sortTaskList(i),Lu=o.pop().task;else if(p.length)Lu=p.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(Lu)||Lu()}K=new Date().getTime()-I}r.length||o.length||p.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=Eg(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}},L2=(e=>(e.EVERYTHING="group",e.FILTER="filter",e.SORT="sort",e.MAP="map",e.AGGREGATE="aggregate",e.FILTER_AGGREGATES="filter_aggregates",e.PIVOT="pivot",e.NOTHING="nothing",e))(L2||{}),o2=class extends Rh{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=Rd(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(r=>{r.id&&t.has(r.id)&&(r.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:r})=>{t&&r&&e.push(r)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,r,i){e&&(r&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,r,i),e.setExpanded(t,void 0,i))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},Ay=class extends Rh{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,r){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,r)}getContextMenuPosition(e,t){const r=this.getRowCtrl(e),i=this.getCellGui(r,t);if(!i)return r?{x:0,y:r.getRowYPosition()}:{x:0,y:0};const o=i.getBoundingClientRect();return{x:o.x+o.width/2,y:o.y+o.height/2}}showContextMenu(e){const t=e.rowNode,r=e.column;let{anchorToElement:i,value:o}=e;t&&r&&o==null&&(o=this.valueService.getValueForDisplay(r,t)),i==null&&(i=this.getContextMenuAnchorElement(t,r)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,r??null,o,i)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:r}=e.getColDef();return!(r??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&Xl(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Av()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.filterManager?.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){const t=e.getColDef(),r=t.floatingFilterComponentParams?.suppressFilterButton;return r!=null&&rl("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!r:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,r,i){const{positionBy:o}=t,p=t.column;if(o==="button"){const{buttonElement:I}=t;e.showMenuAfterButtonClick(p,I,r,i)}else if(o==="mouse"){const{mouseEvent:I}=t;e.showMenuAfterMouseEvent(p,I,r,i)}else p&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(p,"auto"),this.animationFrameService.requestAnimationFrame(()=>{const I=this.ctrlsService.getHeaderRowContainerCtrl(p.getPinned())?.getHeaderCtrlForColumn(p);I&&e.showMenuAfterButtonClick(p,I.getAnchorElementForMenu(i),r,!0)}))}getRowCtrl(e){const{rowIndex:t,rowPinned:r}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:r})||void 0}getCellGui(e,t){return!e||!t?void 0:e.getCellCtrl(t)?.getGui()||void 0}getContextMenuAnchorElement(e,t){const r=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),i=this.getRowCtrl(e);if(!i)return r;const o=this.getCellGui(i,t);return o||(i.isFullWidth()?i.getFullWidthElement():r)}},a2=class extends $0{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const r=super.setValue(e,t);return this.eInput.value=e,r}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},s2={selector:"AG-INPUT-TEXT-AREA",component:a2},I2=class extends q0{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[s2]),this.eTextArea=Cf}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),pd(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===np.LEFT||t===np.UP||t===np.RIGHT||t===np.DOWN||e.shiftKey&&t===np.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!pd(e)&&!pd(this.params.value)?this.params.value:this.params.parseValue(e)}},o3=class extends q0{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Zp(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,r=i=>{yy(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:r})}},My=class extends q0{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[e0]),this.eSelect=Cf,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:r,gos:i}=this,{values:o,value:p,eventKey:I}=e;if(id(o)){rl("no values found for select cellEditor");return}this.startedByEnter=I!=null?I===np.ENTER:!1;let K=!1;o.forEach(Lu=>{const qu={value:Lu},Xd=r.formatValue(e.column,null,Lu),Vh=Xd!=null;qu.text=Vh?Xd:Lu,t.addOption(qu),K=K||p===Lu}),K?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:jt,valueListMaxWidth:Gl,valueListMaxHeight:Fu}=e;jt!=null&&t.setPickerGap(jt),Fu!=null&&t.setPickerMaxHeight(Fu),Gl!=null&&t.setPickerMaxWidth(Gl),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},Ry=class extends q0{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=Cf}init(e){this.params=e;const{cellStartedEdit:t,eventKey:r,suppressPreventDefault:i}=e,o=this.eInput;this.cellEditorInput.init(o,e);let p,I=!0;t?(this.focusAfterAttached=!0,r===np.BACKSPACE||r===np.DELETE?p="":r&&r.length===1?i?I=!1:p=r:(p=this.cellEditorInput.getStartValue(),r!==np.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,p=this.cellEditorInput.getStartValue()),I&&p!=null&&o.setStartValue(p),this.addManagedElementListeners(o.getGui(),{keydown:K=>{const{key:jt}=K;(jt===np.PAGE_UP||jt===np.PAGE_DOWN)&&K.preventDefault()}})}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;mv()||t.getFocusableElement().focus();const r=t.getInputElement();this.highlightAllOnFocus?r.select():this.cellEditorInput.setCaret?.()}focusIn(){const e=this.eInput,t=e.getFocusableElement(),r=e.getInputElement();t.focus(),r.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},V1=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[l1]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!pd(e)&&!pd(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=pd(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},l2=class extends Ry{constructor(){super(new V1)}},ky=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[Jy]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);const r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===np.UP||e.key===np.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!pd(e)&&!pd(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){mv()&&this.eInput.getInputElement().focus({preventScroll:!0})}},a=class extends Ry{constructor(){super(new ky)}},u=class extends zm{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=mv();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Hf(this.gos)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?B(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,U0(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?B(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,U0(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,U0(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return D(this.getValue())??void 0}setDate(e,t){this.setValue(B(e??null,!1),t)}},z={selector:"AG-INPUT-DATE-FIELD",component:u},it=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[z]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!pd(e)&&!pd(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return B(e,!1)}},Pl=class extends Ry{constructor(){super(new it)}},Yl=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[z]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!pd(e)&&!pd(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return B(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):D(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):B(e??null,!1)??void 0}},ad=class extends Ry{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new Yl(()=>this.dataTypeService))}},nh=class extends q0{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Rv]),this.eCheckbox=Cf}init(e){this.params=e;const t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:i=>this.setAriaLabel(i.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),r=Sg(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${i} (${r})`)}},_h=class{constructor(e){this.cellValueChanges=e}},lp=class extends _h{constructor(e,t,r,i){super(e),this.initialRange=t,this.finalRange=r,this.ranges=i}},Xp=10,ef=class{constructor(e){this.actionStack=[],this.maxStackSize=e||Xp,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},Yp=class extends Rh{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},r=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),i=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(r||i||this.isPasting||this.isRangeInAction))return;const{rowPinned:p,rowIndex:I,column:K,oldValue:jt,value:Gl}=e,Fu={rowPinned:p,rowIndex:I,columnId:K.getColId(),newValue:Gl,oldValue:jt};this.cellValueChanges.push(Fu)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new ef(e),this.redoStack=new ef(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:r=>{r.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,r=>{this.gridBodyCtrl=r.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});const t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});const t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,r,i,o){if(!e)return!1;const p=e.pop();return!p||!p.cellValueChanges?!1:(this.processAction(p,I=>I[i],o),p instanceof lp?this.processRange(this.rangeService,p.ranges||[p[r]]):this.processCell(p.cellValueChanges),t.push(p),!0)}processAction(e,t,r){e.cellValueChanges.forEach(i=>{const{rowIndex:o,rowPinned:p,columnId:I}=i,K={rowIndex:o,rowPinned:p},jt=this.rowPositionUtils.getRowNode(K);jt.displayed&&jt.setDataValue(I,t(i),r)})}processRange(e,t){let r;e.removeAllCellRanges(!0),t.forEach((i,o)=>{if(!i)return;const p=i.startRow,I=i.endRow;o===t.length-1&&(r={rowPinned:p.rowPinned,rowIndex:p.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(r));const K={rowStartIndex:p.rowIndex,rowStartPinned:p.rowPinned,rowEndIndex:I.rowIndex,rowEndPinned:I.rowPinned,columnStart:i.startColumn,columns:i.columns};e.addCellRange(K)})}processCell(e){const t=e[0],{rowIndex:r,rowPinned:i}=t,o={rowIndex:r,rowPinned:i},p=this.rowPositionUtils.getRowNode(o),I={rowPinned:t.rowPinned,rowIndex:p.rowIndex,columnId:t.columnId};this.setLastFocusedCell(I,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:r,columnId:i,rowPinned:o}=e,p=this.gridBodyCtrl.getScrollFeature(),I=this.columnModel.getCol(i);if(!I)return;p.ensureIndexVisible(r),p.ensureColumnVisible(I);const K={rowIndex:r,column:I,rowPinned:o};this.focusService.setFocusedCell({...K,forceBrowserFocus:!0}),t?.setRangeToCell(K)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new _h(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const r=new _h(this.cellValueChanges);this.pushActionsToUndoStack(r)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new _h(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new lp(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&lf(this.gos)?e=new lp(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new _h(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function zf(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function qf(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function Kf(e,t,r="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,r),"ensureVisible")}function u0(e,t,r){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,r),"ensureVisible")}function Qh(e,t,r=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,r),"ensureVisible")}function Oh(e){e.undoRedoService?.undo("api")}function op(e){e.undoRedoService?.redo("api")}function df(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(a1)}function Yf(e){return e.rowRenderer.getEditingCells()}function dg(e,t=!1){e.rowRenderer.stopEditing(t)}function ig(e,t){const r=e.columnModel.getCol(t.colKey);if(!r){rl(`no column found for ${t.colKey}`);return}const i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:r};t.rowPinned==null&&u0(e,t.rowIndex),Kf(e,t.colKey);const p=e.navigationService.getCellByPosition(i);if(!p)return;const{focusService:I,gos:K}=e,jt=()=>{const Fu=Hf(K),Lu=p.getGui();return Fu!==Lu&&!!Lu?.contains(Fu)},Gl=K.get("stopEditingWhenCellsLoseFocus")&&jt();(Gl||!I.isCellFocused(i))&&I.setFocusedCell({...i,forceBrowserFocus:Gl,preventScrollOnBrowserFocus:!0}),p.startRowOrCellEdit(t.key)}function Dg(e){return e.undoRedoService?.getCurrentUndoStackSize()??0}function A0(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}var Pm=class extends Rh{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,r=!1,i=null){const o=this.createCellEditorParams(e,t,r),p=e.getColumn().getColDef(),I=this.userComponentFactory.getCellEditorDetails(p,o),K=I?.popupFromSelector!=null?I.popupFromSelector:!!p.cellEditorPopup,jt=I?.popupPositionFromSelector!=null?I.popupPositionFromSelector:p.cellEditorPopupPosition;return e.setEditing(!0,I),e.getComp().setEditDetails(I,K,jt,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(i,"cellEditingStarted")),!I?.params?.suppressPreventDefault}stopEditing(e,t){const r=e.getComp(),{newValue:i,newValueExists:o}=this.takeValueFromCellEditor(t,r),p=e.getRowNode(),I=e.getColumn(),K=this.valueService.getValueForDisplay(I,p);let jt=!1;return o&&(jt=this.saveNewValue(e,K,i,p,I)),e.setEditing(!1,void 0),r.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:K,newValue:i,valueChanged:jt}),jt}handleColDefChanged(e){const t=e.getCellEditor();if(t?.refresh){const{eventKey:r,cellStartedEdit:i}=e.getEditCompDetails().params,o=this.createCellEditorParams(e,r,i),p=e.getColumn().getColDef(),I=this.userComponentFactory.getCellEditorDetails(p,o);t.refresh(I.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp(),r=t.getCellEditor();r?.focusIn?r.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>t.getCellEditor()?.focusIn?.()))}stopEditingAndFocus(e,t=!1,r=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(r,e.getCellPosition())}createPopupEditorWrapper(e){return new o3(e)}takeValueFromCellEditor(e,t){const r={newValueExists:!1};if(e)return r;const i=t.getCellEditor();return!i||i.isCancelAfterEnd&&i.isCancelAfterEnd()?r:{newValue:i.getValue(),newValueExists:!0}}saveNewValue(e,t,r,i,o){if(r===t)return!1;e.setSuppressRefreshCell(!0);const p=i.setDataValue(o,r,"edit");return e.setSuppressRefreshCell(!1),p}createCellEditorParams(e,t,r){const i=e.getColumn(),o=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(i,o),eventKey:t,column:i,colDef:i.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:o,data:o.data,cellStartedEdit:r,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:p=>this.valueService.parseValue(i,o,p,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const i=e?np.UP:np.DOWN;this.navigationService.navigateToNextCell(null,i,t,!1)}}},c1=class extends Rh{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,r=null,i=null){let o=!0;return e.getAllCellCtrls().reduce((I,K)=>{const jt=K===r;return jt?o=K.startEditing(t,jt,i):K.startEditing(null,jt,i),I?!0:K.isEditing()},!1)&&this.setEditing(e,!0),o}stopEditing(e,t=!1){const r=e.getAllCellCtrls(),i=e.isEditing();e.setStoppingRowEdit(!0);let o=!1;for(const p of r){const I=p.stopEditing(t);i&&!t&&!o&&I&&(o=!0)}o&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),i&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,i=>i.rowComp.addOrRemoveCssClass("ag-row-editing",t));const r=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(r)}},Xv={version:fl,moduleName:"@ag-grid-community/edit-core",beans:[Pm]},Zx={version:fl,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:Oh,redoCellEditing:op,getCellEditorInstances:df,getEditingCells:Yf,stopEditing:dg,startEditingCell:ig,getCurrentUndoSize:Dg,getCurrentRedoSize:A0},dependantModules:[Xv]},Xx={version:fl,moduleName:"@ag-grid-community/undo-redo-edit",beans:[Yp],dependantModules:[Xv]},Qx={version:fl,moduleName:"@ag-grid-community/full-row-edit",beans:[c1],dependantModules:[Xv]},sx={version:fl,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:l2}],dependantModules:[Xv]},Jx={version:fl,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:l2},{name:"agNumberCellEditor",classImp:a,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:Pl},{name:"agDateStringCellEditor",classImp:ad},{name:"agCheckboxCellEditor",classImp:nh}],dependantModules:[sx]},k3={version:fl,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:My}],dependantModules:[Xv]},T3={version:fl,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:I2}],dependantModules:[Xv]},ew={version:fl,moduleName:"@ag-grid-community/all-editors",dependantModules:[sx,Jx,k3,T3]},tw={version:fl,moduleName:"@ag-grid-community/editing",dependantModules:[Xv,Xx,Qx,ew,Zx]},lx=class extends Rh{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const r=this.getHeaderCellForColumn(e);if(!r)return-1;const i=this.rowRenderer.getAllCellsForColumn(e);return t||i.push(r),this.addElementsToContainerAndGetWidth(i)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const r=this.centerRowContainerCtrl.getContainerElement();e.forEach(p=>this.cloneItemIntoDummy(p,t)),r.appendChild(t);const i=t.offsetWidth;r.removeChild(t);const o=this.getAutoSizePadding();return i+o}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(r=>{const i=r.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}),t}cloneItemIntoDummy(e,t){const r=e.cloneNode(!0);r.style.width="",r.style.position="static",r.style.left="";const i=document.createElement("div"),o=i.classList;["ag-header-cell","ag-header-group-cell"].some(K=>r.classList.contains(K))?(o.add("ag-header","ag-header-row"),i.style.position="static"):o.add("ag-row");let I=e.parentElement;for(;I;){if(["ag-header-row","ag-row"].some(jt=>I.classList.contains(jt))){for(let jt=0;jt<I.classList.length;jt++){const Gl=I.classList[jt];Gl!="ag-row-position-absolute"&&o.add(Gl)}break}I=I.parentElement}i.appendChild(r),t.appendChild(i)}},rw=class extends Rh{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=Rd(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let r=e.childStore?.getStoreBounds();return e.footer&&(r=e.sibling.childStore?.getStoreBounds()),(r?.heightPx??0)+(r?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let i=e.footer?e.sibling:e;for(;i.isExpandable()&&i.expanded;)if(i.master)i=i.detailNode;else if(i.childrenAfterSort){if(i.childrenAfterSort.length===0)break;i=wf(i.childrenAfterSort)}return i.rowTop+i.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t=e==="top";let r=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,r);const i=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,o=new Set,p=Gl=>{if(o.add(Gl),t){const Fu=this.getLastPixelOfGroup(Gl),Lu=i+r+Gl.rowHeight;Fu<Lu?Gl.stickyRowTop=r+(Fu-Lu):Gl.stickyRowTop=r}else{const Fu=this.getFirstPixelOfGroup(Gl),Lu=i-(r+Gl.rowHeight);Fu>Lu?Gl.stickyRowTop=r-(Fu-Lu):Gl.stickyRowTop=r}r=0,o.forEach(Fu=>{const Lu=Fu.stickyRowTop+Fu.rowHeight;r<Lu&&(r=Lu)})},I=this.areFooterRowsStickySuppressed(),K=this.gos.get("suppressGroupRowsSticky"),jt=Gl=>{if(!Gl.displayed)return!1;if(Gl.footer){if(I===!0||I==="grand"&&Gl.level===-1||I==="group"&&Gl.level>-1)return!1;const Fu=Gl.sibling.rowIndex?Gl.sibling.rowIndex+1===Gl.rowIndex:!1;return e==="bottom"&&Fu?!1:!o.has(Gl)}return Gl.isExpandable()?K===!0||e==="bottom"?!1:!o.has(Gl)&&Gl.expanded:!1};for(let Gl=0;Gl<100;Gl++){let Fu=i+r;t||(Fu=i-r);const Lu=this.rowModel.getRowIndexAtPixel(Fu),qu=this.rowModel.getRow(Lu);if(qu==null)break;const Vh=this.getStickyAncestors(qu).find(Wh=>(t?Wh.rowIndex<Lu:Wh.rowIndex>Lu)&&jt(Wh));if(Vh){p(Vh);continue}if((t?qu.rowTop<Fu:qu.rowTop+qu.rowHeight>Fu)&&jt(qu)){p(qu);continue}break}return t||o.forEach(Gl=>{Gl.stickyRowTop=r-(Gl.stickyRowTop+Gl.rowHeight)}),this.refreshNodesAndContainerHeight(e,o,r)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;const t=!!this.gos.get("groupIncludeFooter")||e==="group",r=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&r?!0:r?"grand":t?"group":!1}canRowsBeSticky(){const e=eg(this.gos),t=this.areFooterRowsStickySuppressed(),r=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!r)}getStickyAncestors(e){const t=[];let r=e.footer?e.sibling:e.parent;for(;r;)r.sibling&&t.push(r.sibling),t.push(r),r=r.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some(r=>r.getRowNode()===e)){for(let r=0;r<this.stickyTopRowCtrls.length;r++){const i=this.stickyTopRowCtrls[r].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let r=0;r<this.stickyBottomRowCtrls.length;r++){const i=this.stickyBottomRowCtrls[r].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,r){const i=e==="top",o=i?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,p={},I=[];for(let qu=0;qu<o.length;qu++){const Xd=o[qu].getRowNode();if(!t.has(Xd)){p[Xd.id]=o[qu],Xd.sticky=!1;continue}I.push(o[qu])}const K=new Set;for(let qu=0;qu<I.length;qu++)K.add(I[qu].getRowNode());const jt=[];t.forEach(qu=>{K.has(qu)||(qu.sticky=!0,jt.push(this.createRowCon(qu,!1,!1)))});let Gl=!!jt.length||I.length!==o.length;i?this.topContainerHeight!==r&&(this.topContainerHeight=r,this.gridBodyCtrl.setStickyTopHeight(r),Gl=!0):this.bottomContainerHeight!==r&&(this.bottomContainerHeight=r,this.gridBodyCtrl.setStickyBottomHeight(r),Gl=!0),this.destroyRowCtrls(p,!1);const Fu=[...I,...jt];Fu.sort((qu,Xd)=>Xd.getRowNode().rowIndex-qu.getRowNode().rowIndex),i||Fu.reverse(),Fu.forEach(qu=>qu.setRowTop(qu.getRowNode().stickyRowTop));let Lu=0;return i?(t.forEach(qu=>{qu.rowIndex<this.pageBoundsService.getFirstRow()&&(Lu+=qu.rowHeight)}),Lu>this.topContainerHeight&&(Lu=this.topContainerHeight),this.setOffsetTop(Lu)):(t.forEach(qu=>{qu.rowIndex>this.pageBoundsService.getLastRow()&&(Lu+=qu.rowHeight)}),Lu>this.bottomContainerHeight&&(Lu=this.bottomContainerHeight),this.setOffsetBottom(Lu)),Gl?(i?this.stickyTopRowCtrls=Fu:this.stickyBottomRowCtrls=Fu,!0):!1}ensureRowHeightsValid(){let e=!1;const t=r=>{const i=r.getRowNode();if(i.rowHeightEstimated){const o=lh(this.gos,i);i.setRowHeight(o.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},F3=class extends Rh{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(p=>p.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(p=>p.updateRangeBordersIfRangeCount())},r=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},i=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{lf(this.gos)?r():i()}),lf(this.gos)&&r()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),eg(this.gos)&&(Rd(this.gos)||dh(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new rw(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Ih(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new iw(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=Ln(this.rowCtrlsByRowIndex),t=Ln(this.zombieRowCtrls),r=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||r.length>0?this.allRowCtrls=[...e,...t,...r]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{const r=jt=>{this.getAllCellCtrls().forEach(Gl=>{Gl.getColumn()===t&&jt(Gl)})},i=()=>{r(jt=>jt.onLeftChanged())},o=()=>{r(jt=>jt.onWidthChanged())},p=()=>{r(jt=>jt.onFirstRightPinnedChanged())},I=()=>{r(jt=>jt.onLastLeftPinnedChanged())},K=()=>{r(jt=>jt.onColDefChanged())};t.addEventListener("leftChanged",i),t.addEventListener("widthChanged",o),t.addEventListener("firstRightPinnedChanged",p),t.addEventListener("lastLeftPinnedChanged",I),t.addEventListener("colDefChanged",K),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",i),t.removeEventListener("widthChanged",o),t.removeEventListener("firstRightPinnedChanged",p),t.removeEventListener("lastLeftPinnedChanged",I),t.removeEventListener("colDefChanged",K)})})}onDomLayoutChanged(){const e=Ih(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),r=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,r&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(r=>{const i=r.getCellElement(e);i&&t.push(i)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const{pinnedRowModel:r,beans:i,printLayout:o}=this,p=Object.fromEntries(e.map(K=>[K.getRowNode().id,K]));r.forEachPinnedRow(t,(K,jt)=>{const Gl=e[jt];Gl&&r.getPinnedRowById(Gl.getRowNode().id,t)===void 0&&(Gl.destroyFirstPass(),Gl.destroySecondPass()),K.id in p?(e[jt]=p[K.id],delete p[K.id]):e[jt]=new gm(K,i,!1,!1,o)});const I=t==="top"?r.getPinnedTopRowCount():r.getPinnedBottomRowCount();e.length=I}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const r=i=>{const o=i[e.rowIndex];o&&o.getRowNode()===e&&(o.destroyFirstPass(),o.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":r(this.topRowCtrls);break;case"bottom":r(this.bottomRowCtrls);break;default:r(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(r=>this.redrawRow(r,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const r=Hf(this.gos),i=mf(this.gos,r,bm.DOM_DATA_KEY_CELL_CTRL),o=mf(this.gos,r,gm.DOM_DATA_KEY_ROW_CTRL);return i||o?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const r=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&fg(this.gos),o=r?this.getRowsToRecycle():null;if(r||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const p=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();p&&this.updateContainerHeights(p)}this.recycleRows(o,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,r=this.gos.get("suppressScrollOnNewData");t&&!r&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),r=t.length;for(let i=0;i<r;i++){const o=t[i].getAllCellCtrls(),p=o.length;for(let I=0;I<p;I++)e.push(o[I])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],r=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const i in this.rowCtrlsByRowIndex)r.push(this.rowCtrlsByRowIndex[i]);return r}addRenderedRowListener(e,t,r){const i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,r)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const r of this.getCellCtrls(e.rowNodes,e.columns))r.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&w2()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const r of this.getRowCtrls(e)){if(!r.isFullWidth())continue;r.refreshFullWidth()||this.redrawRow(r.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){const t=this.getCellCtrls(e.rowNodes,e.columns).map(o=>o.getCellRenderer()).filter(o=>o!=null);if(e.columns?.length)return t;const r=[],i=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(o=>{if(i&&!this.isRowInMap(o.getRowNode(),i)||!o.isFullWidth())return;const p=o.getFullWidthCellRenderers();for(let I=0;I<p.length;I++){const K=p[I];K!=null&&r.push(K)}}),[...r,...t]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(r=>{const i=r.getCellEditor();i&&t.push(i)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const r=t.getCellPosition();e.push(r)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(r=>{const i=r.id;switch(r.rowPinned){case"top":t.top[i]=r;break;case"bottom":t.bottom[i]=r;break;default:t.normal[i]=r;break}}),t}isRowInMap(e,t){const r=e.id;switch(e.rowPinned){case"top":return t.top[r]!=null;case"bottom":return t.bottom[r]!=null;default:return t.normal[r]!=null}}getRowCtrls(e){const t=this.mapRowNodes(e),r=this.getAllRowCtrls();return!e||!t?r:r.filter(i=>{const o=i.getRowNode();return this.isRowInMap(o,t)})}getCellCtrls(e,t){let r;pd(t)&&(r={},t.forEach(o=>{const p=this.columnModel.getCol(o);pd(p)&&(r[p.getId()]=!0)}));const i=[];return this.getRowCtrls(e).forEach(o=>{o.getAllCellCtrls().forEach(p=>{const I=p.getColumn().getId();r&&!r[I]||i.push(p)})}),i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];W(this.rowCtrlsByRowIndex,(r,i)=>{i.getRowNode().id==null&&e.push(r)}),this.removeRowCtrls(e);const t={};return W(this.rowCtrlsByRowIndex,(r,i)=>{const o=i.getRowNode();t[o.id]=i}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(r=>{const i=this.rowCtrlsByRowIndex[r];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[r]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let r;this.stickyRowFeature&&w2()&&(r=this.getCellToRestoreFocusToAfterRefresh()||void 0);const i=this.firstRenderedRow,o=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let p=!1;if(this.stickyRowFeature){p=this.stickyRowFeature.checkStickyRows();const K=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();K&&this.updateContainerHeights(K)}const I=this.firstRenderedRow!==i||this.lastRenderedRow!==o;if(!(t&&!p&&!I)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!p),r!=null)){const K=this.getCellToRestoreFocusToAfterRefresh();r!=null&&K==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(r))}}removeRowCompsNotToDraw(e,t){const r={};e.forEach(p=>r[p]=!0);const o=Object.keys(this.rowCtrlsByRowIndex).filter(p=>!r[p]);this.removeRowCtrls(o,t)}calculateIndexesToDraw(e){const t=F(this.firstRenderedRow,this.lastRenderedRow),r=(o,p)=>{const I=p.getRowNode().rowIndex;I!=null&&(I<this.firstRenderedRow||I>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(p)&&t.push(I)};W(this.rowCtrlsByRowIndex,r),W(e,r),t.sort((o,p)=>o-p);const i=[];for(let o=0;o<t.length;o++){const p=t[o],I=this.rowModel.getRow(p);I&&!I.sticky&&i.push(p)}return i}recycleRows(e,t=!1,r=!1){const i=this.calculateIndexesToDraw(e);(this.printLayout||r)&&(t=!1),this.removeRowCompsNotToDraw(i,!t),i.forEach(o=>{this.createOrUpdateRowCtrl(o,e,t,r)}),e&&(r&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const r=t.getRowNode().rowIndex;e.push(r.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(r=>{if(!r.isFullWidth())return!1;const i=r.getRowNode();return!(t!=null&&!this.isRowInMap(i,t))})}createOrUpdateRowCtrl(e,t,r,i){let o,p=this.rowCtrlsByRowIndex[e];if(p||(o=this.rowModel.getRow(e),pd(o)&&pd(t)&&t[o.id]&&o.alreadyRendered&&(p=t[o.id],t[o.id]=null)),!p)if(o||(o=this.rowModel.getRow(e)),pd(o))p=this.createRowCon(o,r,i);else return;return o&&(o.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=p,p}destroyRowCtrls(e,t){const r=[];W(e,(i,o)=>{if(o){if(this.cachedRowCtrls&&o.isCacheable()){this.cachedRowCtrls.addRow(o);return}if(o.destroyFirstPass(!t),t){const p=o.instanceId;this.zombieRowCtrls[p]=o,r.push(()=>{o.destroySecondPass(),delete this.zombieRowCtrls[p]})}else o.destroySecondPass()}}),t&&(r.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),_u(r))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=Cp(this.gos);return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const K=this.getRowBufferInPixels(),jt=this.ctrlsService.getGridBodyCtrl(),Gl=this.gos.get("suppressRowVirtualisation");let Fu=!1,Lu,qu;do{const Rp=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:Tp,pageLastPixel:Mp}=this.pageBoundsService.getCurrentPagePixelRange(),Of=this.rowContainerHeightService.getDivStretchOffset(),zg=jt.getScrollFeature().getVScrollPosition(),Jf=zg.top,sg=zg.bottom;Gl?(Lu=Tp+Of,qu=Mp+Of):(Lu=Math.max(Jf+Rp-K,Tp)+Of,qu=Math.min(sg+Rp+K,Mp)+Of),this.firstVisibleVPixel=Math.max(Jf+Rp,Tp)+Of,this.lastVisibleVPixel=Math.min(sg+Rp,Mp)+Of,Fu=this.ensureAllRowsInRangeHaveHeightsCalculated(Lu,qu)}while(Fu);let Xd=this.rowModel.getRowIndexAtPixel(Lu),Vh=this.rowModel.getRowIndexAtPixel(qu);const Zh=this.pageBoundsService.getFirstRow(),Wh=this.pageBoundsService.getLastRow();Xd<Zh&&(Xd=Zh),Vh>Wh&&(Vh=Wh),e=Xd,t=Vh}const r=Ih(this.gos,"normal"),i=this.gos.get("suppressMaxRenderedRowRestriction"),o=Math.max(this.getRowBuffer(),500);r&&!i&&t-e>o&&(t=e+o);const p=e!==this.firstRenderedRow,I=t!==this.lastRenderedRow;(p||I)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const r=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),o=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(o||i)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),i||o||r?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const i=e.getRowNode(),o=this.focusService.isRowNodeFocused(i),p=e.isEditing(),I=i.detail;return o||p||I?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,r){const i=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(i)return i;const o=this.gos.get("suppressAnimationFrame"),p=r&&!o&&!this.printLayout;return new gm(e,this.beans,t,p,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t;const{rowIndex:r}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[r];break;case"bottom":t=this.bottomRowCtrls[r];break;default:t=this.rowCtrlsByRowIndex[r],t||(t=this.getStickyTopRowCtrls().find(i=>i.getRowNode().rowIndex===r)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.getRowNode().rowIndex===r)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},iw=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,r=this.entriesMap[t];delete this.entriesMap[t],ym(this.entriesList,r)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],ym(this.entriesList,e)}getEntries(){return this.entriesList}},cx=class extends Rh{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new a3,this.pinnedBottomRows=new a3}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return(e==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const t=r=>{r.setRowHeight(r.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){let e=!1,t=0;const r=i=>{if(i.rowHeightEstimated){const o=lh(this.gos,i);i.setRowTop(t),i.setRowHeight(o.height),t+=o.height,e=!0}};return this.pinnedBottomRows?.forEach(r),t=0,this.pinnedTopRows?.forEach(r),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const r=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(e===void 0){r.clear();return}const i=_d(this.gos),o=t==="top"?wv.ID_PREFIX_TOP_PINNED:wv.ID_PREFIX_BOTTOM_PINNED,p=r.getIds(),I=[],K=new Set;let jt=0,Gl=-1;for(const Fu of e){const Lu=i?.({data:Fu,level:0,rowPinned:t})??o+this.nextId++;if(K.has(Lu)){rl("Duplicate ID",Lu,"found for pinned row with data",Fu,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}Gl++,K.add(Lu),I.push(Lu);const qu=r.getById(Lu);if(qu!==void 0)qu.data!==Fu&&qu.setData(Fu),jt+=this.setRowTopAndRowIndex(qu,jt,Gl),p.delete(Lu);else{const Xd=new wv(this.beans);Xd.id=Lu,Xd.data=Fu,Xd.rowPinned=t,jt+=this.setRowTopAndRowIndex(Xd,jt,Gl),r.push(Xd)}}p.forEach(Fu=>{r.getById(Fu)?.clearRowTopAndRowIndex()}),r.removeAllById(p),r.setOrder(I)}setRowTopAndRowIndex(e,t,r){return e.setRowTop(t),e.setRowHeight(lh(this.gos,e).height),e.setRowIndex(r),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return t==="top"?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return e==="top"?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){const t=e.getSize();if(t===0)return 0;const r=e.getByIndex(t-1);return r===void 0?0:r.rowTop+r.rowHeight}},a3=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){const t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(const t of e)delete this.cache[t];this.ordering=this.ordering.filter(t=>!e.has(t))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((t,r)=>{const i=this.cache[t];i&&e(i,r)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},P3=(e=>(e.Applied="Applied",e.StoreNotFound="StoreNotFound",e.StoreLoading="StoreLoading",e.StoreWaitingToLoad="StoreWaitingToLoad",e.StoreLoadingFailed="StoreLoadingFailed",e.StoreWrongType="StoreWrongType",e.Cancelled="Cancelled",e.StoreNotStarted="StoreNotStarted",e))(P3||{}),D3=class extends Rh{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,r){this.successCommon(e,{rowData:t,rowCount:r})}isRequestMostRecentAndLive(e){const t=e===this.version,r=this.isAlive();return t&&r}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},L3=class extends Rh{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=$l(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){ym(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&ml("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(r=>r.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(r=>r.load()),this.printCacheStatus()}getBlockState(){if(dh(this.gos))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:r,state:i}=t.getBlockStateJson();e[r]=i}),e}printCacheStatus(){this.gos.get("debug")&&ml(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},ux={version:fl,moduleName:"@ag-grid-community/row-node-block",beans:[L3]},nw=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){return this.root&&this.root?.key===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&this.end?.key===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const r=t[0].id===this.root.id,i=t.findIndex(o=>o.id===e.id);if(i>-1){const o=t.slice(0,i),p=t.slice(i+1);return this.setEndRange(e),r?{keep:o,discard:p}:{keep:p,discard:o}}else return{keep:t,discard:[]}}extend(e,t=!1){const r=this.getRoot();if(r==null){const o=this.getRange().slice();return t&&e.depthFirstSearch(p=>!p.group&&o.push(p)),o.push(e),this.setRoot(e),{keep:o,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(r,e).find(o=>o.id===this.end?.id))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const o=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:o}}}},I3=class extends Rh{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,r,i){this.processClassRules(void 0,e.cellClassRules,t,r,i),this.processStaticCellClasses(e,t,r)}processClassRules(e,t,r,i,o){if(t==null&&e==null)return;const p={},I={},K=(jt,Gl)=>{jt.split(" ").forEach(Fu=>{Fu.trim()!=""&&Gl(Fu)})};if(t){const jt=Object.keys(t);for(let Gl=0;Gl<jt.length;Gl++){const Fu=jt[Gl],Lu=t[Fu];let qu;typeof Lu=="string"?qu=this.expressionService.evaluate(Lu,r):typeof Lu=="function"&&(qu=Lu(r)),K(Fu,Xd=>{qu?p[Xd]=!0:I[Xd]=!0})}}e&&o&&Object.keys(e).forEach(jt=>K(jt,Gl=>{p[Gl]||(I[Gl]=!0)})),o&&Object.keys(I).forEach(o),Object.keys(p).forEach(i)}getStaticCellClasses(e,t){const{cellClass:r}=e;if(!r)return[];let i;return typeof r=="function"?i=r(t):i=r,typeof i=="string"&&(i=[i]),i||[]}processStaticCellClasses(e,t,r){this.getStaticCellClasses(e,t).forEach(o=>{r(o)})}},O3=class extends xv{constructor(e){super(e,"ag-toggle-button")}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},dx={selector:"AG-TOGGLE-BUTTON",component:O3},s3=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(s3||{}),l3=class extends Rh{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:r,eBottomGuard:i,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:I,focusInnerElement:K,onFocusIn:jt,onFocusOut:Gl,shouldStopEventPropagation:Fu,onTabKeyDown:Lu,handleKeyDown:qu,eFocusableElement:Xd}=e;this.comp=t,this.eTopGuard=r,this.eBottomGuard=i,this.providedFocusInnerElement=K,this.eFocusableElement=Xd,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!p,this.isFocusableContainer=!!I,this.providedFocusIn=jt,this.providedFocusOut=Gl,this.providedShouldStopEventPropagation=Fu,this.providedOnTabKeyDown=Lu,this.providedHandleKeyDown=qu}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new tv(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=kf(this.gos),r=this.focusService.findFocusableElements(t.body,null,!0),i=r.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let o,p;e?(o=0,p=i):(o=i+1,p=r.length);const I=r.slice(o,p),K=this.gos.get("tabIndex");I.sort((jt,Gl)=>{const Fu=parseInt(jt.getAttribute("tabindex")||"0"),Lu=parseInt(Gl.getAttribute("tabindex")||"0");return Lu===K?1:Fu===K?-1:Fu===0?1:Lu===0?-1:Fu-Lu}),I[e?I.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const r=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),r&&(r.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},hx=class extends Rh{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:r,eFocusableElement:i}=this,o=[t,r],p={setTabIndex:Zh=>{o.forEach(Wh=>Zh!=null?Wh.setAttribute("tabindex",Zh):Wh.removeAttribute("tabindex"))}};this.addTabGuards(t,r);const{focusTrapActive:I=!1,onFocusIn:K,onFocusOut:jt,focusInnerElement:Gl,handleKeyDown:Fu,onTabKeyDown:Lu,shouldStopEventPropagation:qu,forceFocusOutWhenTabGuardsAreEmpty:Xd,isFocusableContainer:Vh}=e;this.tabGuardCtrl=this.createManagedBean(new l3({comp:p,focusTrapActive:I,eTopGuard:t,eBottomGuard:r,eFocusableElement:i,onFocusIn:K,onFocusOut:jt,focusInnerElement:Gl,handleKeyDown:Fu,onTabKeyDown:Lu,shouldStopEventPropagation:qu,forceFocusOutWhenTabGuardsAreEmpty:Xd,isFocusableContainer:Vh}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=kf(this.gos).createElement("div"),r=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",r),cg(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];_0(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,r){zy(t)||(t=t.getGui());const{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,r)}},z3=class extends cm{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new hx(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},ow=0,aw=200,px=class extends Rh{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:r}=e,i=this.getPopupIndex(r);if(i!==-1){const Xd=this.popupList[i];Xd.alignedToElement=t}const o=t.getBoundingClientRect(),p=this.getParentRect(),I=this.keepXYWithinBounds(r,o.top-p.top,0),K=r.clientWidth>0?r.clientWidth:200;r.style.minWidth=`${K}px`;const Gl=p.right-p.left-K;let Fu;this.gos.get("enableRtl")?(Fu=qu(),Fu<0&&(Fu=Lu(),this.setAlignedStyles(r,"left")),Fu>Gl&&(Fu=0,this.setAlignedStyles(r,"right"))):(Fu=Lu(),Fu>Gl&&(Fu=qu(),this.setAlignedStyles(r,"right")),Fu<0&&(Fu=0,this.setAlignedStyles(r,"left"))),r.style.left=`${Fu}px`,r.style.top=`${I}px`;function Lu(){return o.right-p.left-2}function qu(){return o.left-p.left-K}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:r,nudgeY:i,skipObserver:o}=e;this.positionPopup({ePopup:t,nudgeX:r,nudgeY:i,keepWithinBounds:!0,skipObserver:o,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:r,nudgeY:i,keepWithinBounds:o,eventSource:p,alignSide:I="left",position:K="over",column:jt,rowNode:Gl,type:Fu}=e,Lu=p.getBoundingClientRect(),qu=this.getParentRect(),Xd=this.getPopupIndex(t);if(Xd!==-1){const Zh=this.popupList[Xd];Zh.alignedToElement=p}const Vh=()=>{let Zh=Lu.left-qu.left;I==="right"&&(Zh-=t.offsetWidth-Lu.width);let Wh;return K==="over"?(Wh=Lu.top-qu.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,Lu,qu,e.nudgeY||0)==="under"?Wh=Lu.top-qu.top+Lu.height:Wh=Lu.top-t.offsetHeight-(i||0)*2-qu.top),{x:Zh,y:Wh}};this.positionPopup({ePopup:t,nudgeX:r,nudgeY:i,keepWithinBounds:o,updatePosition:Vh,postProcessCallback:()=>this.callPostProcessPopup(Fu,t,p,null,jt,Gl)})}shouldRenderUnderOrAbove(e,t,r,i){const o=r.bottom-t.bottom,p=t.top-r.top,I=e.offsetHeight+i;return o>I?"under":p>I||p>o?"above":"under"}setAlignedStyles(e,t){const r=this.getPopupIndex(e);if(r===-1)return;const i=this.popupList[r],{alignedToElement:o}=i;!o||(["right","left","over","above","under"].forEach(I=>{o.classList.remove(`ag-has-popup-positioned-${I}`),e.classList.remove(`ag-popup-positioned-${I}`)}),!t)||(o.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,r,i,o,p){const I=this.gos.getCallback("postProcessPopup");I&&I({column:o,rowNode:p,ePopup:t,type:e,eventSource:r,mouseEvent:i})}positionPopup(e){const{ePopup:t,keepWithinBounds:r,nudgeX:i,nudgeY:o,skipObserver:p,updatePosition:I}=e,K={width:0,height:0},jt=(Gl=!1)=>{let{x:Fu,y:Lu}=I();Gl&&t.clientWidth===K.width&&t.clientHeight===K.height||(K.width=t.clientWidth,K.height=t.clientHeight,i&&(Fu+=i),o&&(Lu+=o),r&&(Fu=this.keepXYWithinBounds(t,Fu,1),Lu=this.keepXYWithinBounds(t,Lu,0)),t.style.left=`${Fu}px`,t.style.top=`${Lu}px`,e.postProcessCallback&&e.postProcessCallback())};if(jt(),!p){const Gl=this.resizeObserverService.observeResize(t,()=>jt(!0));setTimeout(()=>Gl(),aw)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=kf(this.gos);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),Iy(t)}keepXYWithinBounds(e,t,r){const i=r===0,o=i?"clientHeight":"clientWidth",p=i?"top":"left",I=i?"height":"width",K=i?"scrollTop":"scrollLeft",jt=kf(this.gos),Gl=jt.documentElement,Fu=this.getPopupParent(),Lu=e.getBoundingClientRect(),qu=Fu.getBoundingClientRect(),Xd=jt.documentElement.getBoundingClientRect(),Vh=Fu===jt.body,Zh=Math.ceil(Lu[I]);let Rp=Vh?(i?S1:Ev)(Gl)+Gl[K]:Fu[o];Vh&&(Rp-=Math.abs(Xd[p]-qu[p]));const Tp=Rp-Zh;return Math.min(Math.max(t,0),Math.abs(Tp))}addPopup(e){const t=kf(this.gos),{eChild:r,ariaLabel:i,alwaysOnTop:o,positionCallback:p,anchorToElement:I}=e;if(!t)return rl("could not find the document, document is empty"),{hideFunc:()=>{}};const K=this.getPopupIndex(r);if(K!==-1)return{hideFunc:this.popupList[K].hideFunc};this.initialisePopupPosition(r);const jt=this.createPopupWrapper(r,i,!!o),Gl=this.addEventListenersToPopup({...e,wrapperEl:jt});return p&&p(),this.addPopupToPopupList(r,jt,Gl,I),{hideFunc:Gl}}initialisePopupPosition(e){const r=this.getPopupParent().getBoundingClientRect();pd(e.style.top)||(e.style.top=`${r.top*-1}px`),pd(e.style.left)||(e.style.left=`${r.left*-1}px`)}createPopupWrapper(e,t,r){const i=this.getPopupParent(),o=document.createElement("div");return this.environment.applyThemeClasses(o),o.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||cg(e,"dialog"),gg(e,t),o.appendChild(e),i.appendChild(o),r?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),o}handleThemeChange(e){if(e.themeChanged)for(const t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){const t=kf(this.gos),r=this.getPopupParent(),{wrapperEl:i,eChild:o,closedCallback:p,afterGuiAttached:I,closeOnEsc:K,modal:jt}=e;let Gl=!1;const Fu=Vh=>{if(!i.contains(Hf(this.gos)))return;Vh.key===np.ESCAPE&&!ph(Vh)&&Xd({keyboardEvent:Vh})},Lu=Vh=>Xd({mouseEvent:Vh}),qu=Vh=>Xd({touchEvent:Vh}),Xd=(Vh={})=>{const{mouseEvent:Zh,touchEvent:Wh,keyboardEvent:Rp,forceHide:Tp}=Vh;!Tp&&(this.isEventFromCurrentPopup({mouseEvent:Zh,touchEvent:Wh},o)||Gl)||(Gl=!0,r.removeChild(i),t.removeEventListener("keydown",Fu),t.removeEventListener("mousedown",Lu),t.removeEventListener("touchstart",qu),t.removeEventListener("contextmenu",Lu),this.eventService.removeEventListener("dragStarted",Lu),p&&p(Zh||Wh||Rp),this.removePopupFromPopupList(o))};return I&&I({hidePopup:Xd}),window.setTimeout(()=>{K&&t.addEventListener("keydown",Fu),jt&&(t.addEventListener("mousedown",Lu),this.eventService.addEventListener("dragStarted",Lu),t.addEventListener("touchstart",qu),t.addEventListener("contextmenu",Lu))},0),Xd}addPopupToPopupList(e,t,r,i){this.popupList.push({element:e,wrapper:t,hideFunc:r,instanceId:ow++,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const r=this.getPopupIndex(e);if(r===-1)return;const i=this.popupList[r];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(p=>p&&p()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;const o=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=o,i.isAnchored=!0,o}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),r=t.getBoundingClientRect(),{element:i,ePopup:o}=e,p=i.getBoundingClientRect(),I=Lu=>parseInt(Lu.substring(0,Lu.length-1),10),K=(Lu,qu)=>{const Xd=r[Lu]-p[Lu],Vh=I(o.style[Lu]);return{initialDiff:Xd,lastDiff:Xd,initial:Vh,last:Vh,direction:qu}},jt=K("top",0),Gl=K("left",1),Fu=this.getFrameworkOverrides();return new F0(Lu=>{Fu.wrapIncoming(()=>{Fu.setInterval(()=>{const qu=t.getBoundingClientRect(),Xd=i.getBoundingClientRect();if(Xd.top==0&&Xd.left==0&&Xd.height==0&&Xd.width==0){e.hidePopup();return}const Zh=(Wh,Rp)=>{const Tp=I(o.style[Rp]);Wh.last!==Tp&&(Wh.initial=Tp,Wh.last=Tp);const Mp=qu[Rp]-Xd[Rp];if(Mp!=Wh.lastDiff){const Of=this.keepXYWithinBounds(o,Wh.initial+Wh.initialDiff-Mp,Wh.direction);o.style[Rp]=`${Of}px`,Wh.last=Of}Wh.lastDiff=Mp};Zh(jt,"top"),Zh(Gl,"left")},200).then(qu=>{Lu(()=>{qu!=null&&window.clearInterval(qu)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:r,touchEvent:i}=e,o=r||i;if(!o)return!1;const p=this.getPopupIndex(t);if(p===-1)return!1;for(let I=p;I<this.popupList.length;I++){const K=this.popupList[I];if(Gp(K.element,o))return!0}return this.isElementWithinCustomPopup(o.target)}isElementWithinCustomPopup(e){const t=kf(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const r=this.getWrapper(e);r&&(r.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(r))}bringPopupToFront(e){const t=this.getPopupParent(),r=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=r.length,o=this.getWrapper(e);if(!o||i<=1||!t.contains(e))return;const p=[],I=[];for(const qu of r)qu!==o&&(qu.classList.contains("ag-always-on-top")?I.push(qu):p.push(qu));const K=[],jt=I.length,Lu=o.classList.contains("ag-always-on-top")||!jt?[...p,...I,o]:[...p,o,...I];for(let qu=0;qu<=i;qu++){const Xd=Lu[qu];if(r[qu]===Lu[qu]||Xd===o)continue;Xd.querySelectorAll("div").forEach(Zh=>{Zh.scrollTop!==0&&K.push([Zh,Zh.scrollTop])}),qu===0?t.insertAdjacentElement("afterbegin",Xd):Lu[qu-1].insertAdjacentElement("afterend",Xd)}for(;K.length;){const qu=K.pop();qu[0].scrollTop=qu[1]}}},fx=["touchstart","touchend","touchmove","touchcancel"],N3=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new F0(r=>{r(window.setInterval(e,t))})}addEventListener(e,t,r,i){const o=sm(fx,t);e.addEventListener(t,r,{capture:!!i,passive:o})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},c3=class extends Rh{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,r=!1){return r?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const r=e===np.UP,i=e===np.DOWN,o=e===np.LEFT;let p,I;if(r||i)I=r?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),p=t.column;else{const K=this.visibleColsService.getAllCols(),jt=this.gos.get("enableRtl");I=t.rowIndex,p=o!==jt?K[0]:wf(K)}return{rowIndex:I,rowPinned:null,column:p}}getNextCellToFocusWithoutCtrlPressed(e,t){let r=t,i=!1;for(;!i;){switch(e){case np.UP:r=this.getCellAbove(r);break;case np.DOWN:r=this.getCellBelow(r);break;case np.RIGHT:this.gos.get("enableRtl")?r=this.getCellToLeft(r):r=this.getCellToRight(r);break;case np.LEFT:this.gos.get("enableRtl")?r=this.getCellToRight(r):r=this.getCellToLeft(r);break;default:r=null,rl("unknown key for navigation ",e);break}r?i=this.isCellGoodToFocusOn(r):i=!0}return r}isCellGoodToFocusOn(e){const t=e.column;let r;switch(e.rowPinned){case"top":r=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":r=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:r=this.rowModel.getRow(e.rowIndex);break}return r?!t.isSuppressNavigable(r):!1}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,r=e.rowPinned;let i=!1;if(this.isLastRowInContainer(e))switch(r){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else r&&(i=!0);const o=this.rowModel.getRow(e.rowIndex),p=i?void 0:this.getNextStickyPosition(o);return p||{rowIndex:t+1,rowPinned:r}}getNextStickyPosition(e,t){if(!eg(this.gos)||!e||!e.sticky)return;const r=this.rowRenderer.getStickyTopRowCtrls().some(K=>K.getRowNode().rowIndex===e.rowIndex);let i=[];r?i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((K,jt)=>K.getRowNode().rowIndex-jt.getRowNode().rowIndex):i=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((K,jt)=>jt.getRowNode().rowIndex-K.getRowNode().rowIndex);const o=t?-1:1,p=i.findIndex(K=>K.getRowNode().rowIndex===e.rowIndex),I=i[p+o];if(I)return{rowIndex:I.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,r=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=r:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=r:this.pageBoundsService.getLastRow()<=r}getRowAbove(e){const t=e.rowIndex,r=e.rowPinned,i=r?t===0:t===this.pageBoundsService.getFirstRow();let o=!1;if(i)return r==="top"?null:r?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;r&&(o=!0);const p=this.rowModel.getRow(e.rowIndex),I=o?void 0:this.getNextStickyPosition(p,!0);return I||{rowIndex:t-1,rowPinned:r}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.visibleColsService.getAllCols();let r=e.rowIndex,i=e.rowPinned,o=this.visibleColsService.getColAfter(e.column);if(!o){o=t[0];const p=this.getRowBelow(e);if(id(p)||!p.rowPinned&&!(this.paginationService?.isRowInPage(p)??!0))return null;r=p?p.rowIndex:null,i=p?p.rowPinned:null}return{rowIndex:r,column:o,rowPinned:i}}getNextTabbedCellBackwards(e){const t=this.visibleColsService.getAllCols();let r=e.rowIndex,i=e.rowPinned,o=this.visibleColsService.getColBefore(e.column);if(!o){o=wf(t);const p=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(id(p)||!p.rowPinned&&!(this.paginationService?.isRowInPage(p)??!0))return null;r=p?p.rowIndex:null,i=p?p.rowPinned:null}return{rowIndex:r,column:o,rowPinned:i}}},Z0=(e,t)=>{for(const r in t)t[r]=e;return t},O2={...Z0("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Z0("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...Z0("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...Z0("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Z0("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Z0("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Z0("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Z0("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Z0("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Z0("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...Z0("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Z0("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Z0("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...Z0("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Z0("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},c2={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},sw=(e,t)=>e.eventService.dispatchEvent(t),u3=class{};Reflect.defineProperty(u3,"name",{value:"GridApi"});var gx=class extends Rh{constructor(){super(),this.beanName="apiFunctionService",this.api=new u3,this.fns={...c2,dispatchEvent:sw},this.beans=null,this.preDestroyLink="";const{api:e}=this;for(const t in O2)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:r,beans:i}=this;r!==c2&&(r[e]=i?.validationService?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{const{beans:r,fns:{[e]:i}}=this;return i?i(r,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:r,preDestroyLink:i}=this;if(!t)rl(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${i}`);else{const o=O2[e];r.assertModuleRegistered(o,`api.${e}`)&&rl(`API function '${e}' not registered to module '${o}'`)}}destroy(){super.destroy(),this.fns=c2,this.beans=null}};function lw(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var cw=class extends Rh{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,r){const i=[],o={};return e.forEach(p=>{const I=this.createDefFromColumn(p,t,r);let K=!0,jt=I,Gl=p.getOriginalParent(),Fu=null;for(;Gl;){let Lu=null;if(Gl.isPadding()){Gl=Gl.getOriginalParent();continue}const qu=o[Gl.getGroupId()];if(qu){qu.children.push(jt),K=!1;break}if(Lu=this.createDefFromGroup(Gl),Lu&&(Lu.children=[jt],o[Lu.groupId]=Lu,jt=Lu,Gl=Gl.getOriginalParent()),Gl!=null&&Fu===Gl){K=!1;break}Fu=Gl}K&&i.push(jt)}),i}createDefFromGroup(e){const t=yl(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,r){const i=yl(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?r.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},mx=class extends Rh{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t})}genericColumnEvent(e,t,r){this.eventService.dispatchEvent({type:e,columns:t,column:t.length===1?t[0]:null,source:r})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){const{movedColumns:t,source:r,toIndex:i,finished:o}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:i,finished:o,source:r})}columnPinned(e,t){if(!e.length)return;const r=e.length===1?e[0]:null,i=this.getCommonValue(e,o=>o.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:i??null,columns:e,column:r,source:t})}columnVisible(e,t){if(!e.length)return;const r=e.length===1?e[0]:null,i=this.getCommonValue(e,o=>o.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:i,columns:e,column:r,source:t})}getCommonValue(e,t){if(!e||e.length==0)return;const r=t(e[0]);for(let i=1;i<e.length;i++)if(r!==t(e[i]))return;return r}columnChanged(e,t,r){this.eventService.dispatchEvent({type:e,columns:t,column:t&&t.length==1?t[0]:null,source:r})}columnResized(e,t,r,i=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:i,finished:t,source:r})}},vx=class extends Rh{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){const e=this.columnModel.getColDefCols();if(id(e)||!this.columnModel.isAlive())return[];const r=this.columnModel.getAllCols().map(i=>this.createStateItemFromColumn(i));return this.orderColumnStateList(r),r}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),r=this.funcColsService.getPivotColumns(),i=e.isRowGroupActive()?t.indexOf(e):null,o=e.isPivotActive()?r.indexOf(e):null,p=e.isValueActive()?e.getAggFunc():null,I=e.getSort()!=null?e.getSort():null,K=e.getSortIndex()!=null?e.getSortIndex():null,jt=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:I,sortIndex:K,aggFunc:p,rowGroup:e.isRowGroupActive(),rowGroupIndex:i,pivot:e.isPivotActive(),pivotIndex:o,flex:jt}}orderColumnStateList(e){const t=this.columnModel.getCols(),r=new Map(t.map((i,o)=>[i.getColId(),o]));e.sort((i,o)=>{const p=r.has(i.colId)?r.get(i.colId):-1,I=r.has(o.colId)?r.get(o.colId):-1;return p-I})}},yx=class extends Rh{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[],t=this.columnModel.getColTree();return Zu(null,t,r=>{xf(r)&&e.push({groupId:r.getGroupId(),open:r.isExpanded()})}),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const r=[];Zu(null,t,i=>{if(xf(i)){const o=i.getColGroupDef(),p={groupId:i.getGroupId(),open:o?o.openByDefault:void 0};r.push(p)}}),this.setColumnGroupState(r,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const i=[];e.forEach(o=>{const p=o.groupId,I=o.open,K=this.columnModel.getProvidedColGroup(p);K&&K.isExpanded()!==I&&(K.setExpanded(I),i.push(K))}),this.visibleColsService.refresh(t,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},B3=class extends Rh{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,r=!1){const i=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!i)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const p=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=p-this.scrollPosition-this.scrollWidth,this.viewportRight=p-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(r)}}getHeadersToRender(e,t){let r;switch(e){case"left":r=this.rowsOfHeadersToRenderLeft[t];break;case"right":r=this.rowsOfHeadersToRenderRight[t];break;default:r=this.rowsOfHeadersToRenderCenter[t];break}return r||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,r=t+e.getActualWidth(),i=this.viewportLeft-200,o=this.viewportRight+200,p=t<i&&r<i,I=t>o&&r>o;return!p&&!I}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=o=>{const p=o.getLeft();return pd(p)&&p>this.viewportLeft},r=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,i,r,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),r=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(r).forEach(p=>e[p.getId()]=!0);const o=(p,I,K)=>{let jt=!1;for(let Gl=0;Gl<p.length;Gl++){const Fu=p[Gl];let Lu=!1;if(Xl(Fu))Lu=e[Fu.getId()]===!0;else{const Xd=Fu.getDisplayedChildren();Xd&&(Lu=o(Xd,I,K+1))}Lu&&(jt=!0,I[K]||(I[K]=[]),I[K].push(Fu))}return jt};o(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),o(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),o(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),r=this.colsWithinViewportHash!==t;return r&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),r}},H3=class extends Rh{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const r=this.componentMetadataProvider.retrieve(e);return r&&r.functionAdapter?r.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(i){const o=e(i),p=typeof o;if(p==="string"||p==="number"||p==="boolean"){this.eGui=e1("<span>"+o+"</span>");return}if(o==null){this.eGui=e1("<span></span>");return}this.eGui=o}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},xx=class extends Rh{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},uw=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],G3=Object.fromEntries(uw.map((e,t)=>[e,t]));function d3(e,t){const r=(e.beanName?G3[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?G3[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return r-i}function wx(e,t){return e?.beanName==="gridDestroyService"?-1:0}var dw=class extends Rh{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){const r=this.registry[e];if(r!=null)return new r(...t)}},Cx=class extends Rh{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){this.runReadyCallbacksAsync=e.frameworkOverrides.runWhenReadyAsync?.()??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>e?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const r=this.readyCallbacks.indexOf(t);r>=0&&this.readyCallbacks.splice(r,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:r}=this.params;return[e,r,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},bx=class extends Rh{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:r,column:i}=e;return this.createIdFromValues({rowIndex:t,column:i,rowPinned:r})}createIdFromValues(e){const{rowIndex:t,rowPinned:r,column:i}=e;return`${t}.${r??"null"}.${i.getId()}`}equals(e,t){const r=e.column===t.column,i=e.rowPinned===t.rowPinned,o=e.rowIndex===t.rowIndex;return r&&i&&o}},hw=class extends Rh{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){Rd(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const r=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};t?r():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(r)),this.dispatchExpandedDebounced())}},V3=class extends Rh{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const r=this.pinnedRowModel.getPinnedBottomRowCount(),i=this.pinnedRowModel.getPinnedTopRowCount();return r?(t="bottom",e=r-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):i&&(t="top",e=i-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(pd(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},j3={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},U3={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},W3={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Sx=class extends Rh{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(j3),this.getSizeEl(U3),this.getSizeEl(W3)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(j3)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(U3)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(W3)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){return this.gridTheme?.getCssClass()||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){const t=this.getThemeClasses();for(const r of Array.from(e.classList))r.startsWith("ag-theme-")&&!t.includes(r)&&e.classList.remove(r);e.classList.add(...t)}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const r=`${t}px`;return e!=r?(this.eGridDiv.style.setProperty("--ag-line-height",r),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const r=this.measureSizeEl(e);return r==="detached"||r==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,r),r)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const r=t.offsetWidth;return r===_x?"no-styles":(this.sizesMeasured=!0,r)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let r=this.eMeasurementContainer;r||(r=this.eMeasurementContainer=document.createElement("div"),r.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(r),this.eGridDiv.appendChild(r)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${_x}px)`,r.appendChild(t),this.sizeEls.set(e,t);let i=this.measureSizeEl(e);i==="no-styles"&&rl(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const o=this.resizeObserverService.observeResize(t,()=>{const p=this.measureSizeEl(e);p==="detached"||p==="no-styles"||(this.lastKnownValues.set(e,p),p!==i&&(i=p,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>o()),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){const e=new MutationObserver(()=>{const r=this.readAncestorThemeClasses();h3(r,this.ancestorThemeClasses)||(this.ancestorThemeClasses=r,this.fireGridStylesChangedEvent("themeChanged"))});let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(;e;){const r=Array.from(e.classList).filter(i=>i.startsWith("ag-theme-"));for(const i of r)t.includes(i)||t.unshift(i);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){const{gos:e,eMeasurementContainer:t,gridTheme:r}=this,i=e.get("theme")||null;i!==r&&(r?.stopUse(),this.gridTheme=i,i?.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){this.gridTheme?.stopUse(),this.gridTheme=null}},h3=(e,t)=>e.length===t.length&&e.findIndex((r,i)=>e[i]!==t[i])===-1,_x=15538,Ex=class extends Rh{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new Y}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=Yd(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,r){this.globalEventService.addEventListener(e,t,r)}removeEventListener(e,t,r){this.globalEventService.removeEventListener(e,t,r)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},p3=class d1 extends Rh{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService,this.overlayService=t.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",d1.toggleKeyboardMode),t.addEventListener("mousedown",d1.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",d1.toggleKeyboardMode),t.removeEventListener("mousedown",d1.toggleKeyboardMode))}static toggleKeyboardMode(t){const r=d1.keyboardModeActive,i=t.type==="keydown";i&&(t.ctrlKey||t.metaKey||t.altKey)||r!==i&&(d1.keyboardModeActive=i)}postConstruct(){const t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,r=>{this.gridCtrl=r.gridCtrl})}registerKeyboardFocusEvents(){const t=kf(this.gos);d1.addKeyboardModeEvents(t),d1.instanceCount++,this.addDestroyFunc(()=>{d1.instanceCount--,d1.removeKeyboardModeEvents(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const t=this.focusedCellPosition.column,r=this.columnModel.getCol(t.getId());t!==r&&this.clearFocusedCell()}isKeyboardMode(){return d1.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(Hf(this.gos),gm.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(Hf(this.gos),sl.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,r){let i=t;for(;i;){if(mf(this.gos,i,r))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(t,r){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(t),r())})}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(t){const{rowIndex:r,rowPinned:i,column:o}=t,p={rowIndex:r,rowPinned:i,column:o,isFullWidthCell:!1},I=this.rowRenderer.getRowByPosition({rowIndex:r,rowPinned:i});return I&&(p.isFullWidthCell=I.isFullWidth()),p}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const t=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...t})}setFocusedCell(t){const{column:r,rowIndex:i,rowPinned:o,forceBrowserFocus:p=!1,preventScrollOnBrowserFocus:I=!1}=t,K=this.columnModel.getCol(r);if(!K){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex:i,rowPinned:ud(o),column:K},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus:p,preventScrollOnBrowserFocus:I})}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;const r=t.getColumnGroupChild(),i=t.getRowIndex(),o=t.getPinned(),{column:p,headerRowIndex:I}=this.focusedHeaderPosition;return r===p&&i===I&&o==p.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,r){this.focusedHeaderPosition={headerRowIndex:t,column:r}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(t){if(this.isHeaderFocusSuppressed())return!1;const{direction:r,fromTab:i,allowUserOverride:o,event:p,fromCell:I,rowWithoutSpanValue:K}=t;let{headerPosition:jt}=t;if(I&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(jt);if(o){const Gl=this.getFocusedHeader(),Fu=this.headerNavigationService.getHeaderRowCount();if(i){const Lu=this.gos.getCallback("tabToNextHeader");Lu&&(jt=this.getHeaderPositionFromUserFunc({userFunc:Lu,direction:r,currentPosition:Gl,headerPosition:jt,headerRowCount:Fu}))}else{const Lu=this.gos.getCallback("navigateToNextHeader");if(Lu&&p){const qu={key:p.key,previousHeaderPosition:Gl,nextHeaderPosition:jt,headerRowCount:Fu,event:p};jt=Lu(qu)}}}return jt?this.focusProvidedHeaderPosition({headerPosition:jt,direction:r,event:p,fromCell:I,rowWithoutSpanValue:K}):!1}focusHeaderPositionFromUserFunc(t){if(this.isHeaderFocusSuppressed())return!1;const{userFunc:r,headerPosition:i,direction:o,event:p}=t,I=this.getFocusedHeader(),K=this.headerNavigationService.getHeaderRowCount(),jt=this.getHeaderPositionFromUserFunc({userFunc:r,direction:o,currentPosition:I,headerPosition:i,headerRowCount:K});return!!jt&&this.focusProvidedHeaderPosition({headerPosition:jt,direction:o,event:p})}getHeaderPositionFromUserFunc(t){const{userFunc:r,direction:i,currentPosition:o,headerPosition:p,headerRowCount:I}=t,jt=r({backwards:i==="Before",previousHeaderPosition:o,nextHeaderPosition:p,headerRowCount:I});return jt===!0||jt===null?(jt===null&&rl("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),o):jt===!1?null:jt}focusProvidedHeaderPosition(t){const{headerPosition:r,direction:i,fromCell:o,rowWithoutSpanValue:p,event:I}=t,{column:K,headerRowIndex:jt}=r;if(jt===-1)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(r):this.focusGridView(K);this.headerNavigationService.scrollToColumn(K,i);const Fu=this.ctrlsService.getHeaderRowContainerCtrl(K.getPinned())?.focusHeader(r.headerRowIndex,K,I)||!1;return Fu&&(p!=null||o)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(p??-1),Fu}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));const r=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:r,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const r=this.headerNavigationService.getHeaderRowCount()-1,i=wf(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:r,column:i},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,r){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===ud(r)}findFocusableElements(t,r,i=!1){const o=Bg;let p=v0;r&&(p+=", "+r),i&&(p+=', [tabindex="-1"]');const I=Array.prototype.slice.apply(t.querySelectorAll(o)).filter(Gl=>k0(Gl)),K=Array.prototype.slice.apply(t.querySelectorAll(p));return K.length?((Gl,Fu)=>Gl.filter(Lu=>Fu.indexOf(Lu)===-1))(I,K):I}focusInto(t,r=!1,i=!1){const o=this.findFocusableElements(t,null,i),p=r?wf(o):o[0];return p?(p.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,r){if(!r)return null;const i=this.findFocusableElements(t),o=i.indexOf(r);if(o===-1)return null;let p=-1;for(let I=o-1;I>=0;I--)if(i[I].classList.contains("ag-tab-guard-top")){p=I;break}return p<=0?null:i[p-1]}findNextFocusableElement(t=this.eGridDiv,r,i){const o=this.findFocusableElements(t,r?':not([tabindex="-1"])':null),p=Hf(this.gos);let I;r?I=o.findIndex(jt=>jt.contains(p)):I=o.indexOf(p);const K=I+(i?-1:1);return K<0||K>=o.length?null:o[K]}isTargetUnderManagedComponent(t,r){if(!r)return!1;const i=t.querySelectorAll(`.${tv.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let o=0;o<i.length;o++)if(i[o].contains(r))return!0;return!1}findTabbableParent(t,r=5){let i=0;for(;t&&i1(t)===null&&++i<=r;)t=t.parentElement;return i1(t)===null?null:t}focusOverlay(t){const r=this.overlayService.isVisible()&&this.overlayService.getOverlayWrapper()?.getGui();return!!r&&this.focusInto(r,t)}focusGridViewFailed(t,r){return r&&this.focusOverlay(t)||t&&this.focusLastHeader()}focusGridView(t,r=!1,i=!0){if(this.overlayService.isExclusive())return i&&this.focusOverlay(r);if(this.isCellFocusSuppressed())return r&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():i&&this.focusOverlay(r)?!0:this.focusNextGridCoreContainer(!1);const o=r?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(o){const{rowIndex:p,rowPinned:I}=o;if(t??(t=this.getFocusedHeader()?.column),t&&p!==void 0&&p!==null)return this.navigationService.ensureCellVisible({rowIndex:p,column:t,rowPinned:I}),r&&this.rowRenderer.getRowByPosition(o)?.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(o,r)||(this.setFocusedCell({rowIndex:p,column:t,rowPinned:ud(I),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:p,rowPinned:I,column:t})),!0}return!!(i&&this.focusOverlay(r)||r&&this.focusLastHeader())}isGridFocused(){const t=Hf(this.gos);return!!t&&this.eGridDiv.contains(t)}focusNextGridCoreContainer(t,r=!1){return!r&&this.gridCtrl.focusNextInnerContainer(t)?!0:((r||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){return this.advancedFilterFocusColumn=t?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(t,r){const i=(r?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return t?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}allowFocusForNextGridCoreContainer(t){this.gridCtrl.allowFocusForNextCoreContainer(t)}};p3.keyboardModeActive=!1,p3.instanceCount=0;var $3=p3,pw=class extends Rh{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=Ih(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),r=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),r!=this.rightWidth&&(this.rightWidth=r,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},z2=class extends Rh{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,r){this.view=e,this.eGridHostDiv=t,this.eGui=r,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService:i,mouseEventService:o,ctrlsService:p,resizeObserverService:I}=this.beans,K={getContainer:()=>this.eGui,isInterestedIn:Gl=>Gl===1||Gl===0,getIconName:()=>"notAllowed"};i.addDropTarget(K),this.addDestroyFunc(()=>i.removeDropTarget(K)),o.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new Yu(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const jt=I.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>jt()),p.register("gridCtrl",this)}isDetailGrid(){return this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:r,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(r>0){const o=this.visibleColsService.getAllCols(),p=wf(o);if(this.focusService.focusGridView(p,!0))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const r=this.getFocusableContainers(),i=this.visibleColsService.getAllCols();if(e){if(r.length>1)return this.focusContainer(wf(r),!0);const o=wf(i);if(this.focusService.focusGridView(o,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(i[0]))return!0;for(let o=1;o<r.length;o++)if(this.focusService.focusInto(r[o].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:r,indexWithFocus:i}=this.getNextFocusableIndex(t,e);if(i===-1||r<0||r>=t.length)return;const o=t[r];o.setAllowFocus?.(!0),setTimeout(()=>{o.setAllowFocus?.(!1)})}getNextFocusableIndex(e,t){const r=Hf(this.gos),i=e.findIndex(p=>p.getGui().contains(r)),o=i+(t?-1:1);return{indexWithFocus:i,nextIndex:o}}focusContainer(e,t){e.setAllowFocus?.(!0);const r=this.focusService.focusInto(e.getGui(),t);return e.setAllowFocus?.(!1),r}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},u2=class extends z3{constructor(e){super(),this.gridBody=Cf,this.sideBar=Cf,this.pagination=Cf,this.rootWrapperBody=Cf,this.eGridDiv=e}postConstruct(){const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:p=>this.addCssClass(p),setGridThemeClass:p=>this.addCssClass(p),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:p=>{this.getGui().style.userSelect=p??"",this.getGui().style.webkitUserSelect=p??""},setCursor:p=>{this.getGui().style.cursor=p??""}},t=this.createManagedBean(new z2),r=t.getOptionalSelectors(),i=this.createTemplate(r),o=[R3,...Object.values(r).filter(p=>!!p)];this.setTemplate(i,o),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:p=>t.focusInnerElement(p),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.gos.get("debug")&&ml("Grid removed from DOM")})}updateLayoutClasses(e,t){const r=this.rootWrapperBody.classList;r.toggle("ag-layout-auto-height",t.autoHeight),r.toggle("ag-layout-normal",t.normal),r.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(e){const t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",r=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",i=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",o=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",p=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${r}
                </div>
                ${i}
                ${p}
                ${o}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){const e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>k0(t.getGui()))}},Ax=class extends Rh{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";typeof e=="function"&&(e=e());const r=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(o=>{if(!o){Ml("alignedGrids contains an undefined option."),t||Ml(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),Ml(r());return}if(this.isGridApi(o))return o;const p=o;return"current"in p?p.current?.api:(p.api||Ml(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${r()}`),p.api)}).filter(o=>!!o&&!o.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const r=[];return e.columns?e.columns.forEach(i=>{r.push(t(i))}):e.column&&r.push(t(e.column)),r}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":rl("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){const{columnModel:t}=this;e.columnGroups.forEach(r=>{let i=null;r&&(i=t.getProvidedColGroup(r.getGroupId())),!(r&&!i)&&t.setColumnGroupOpened(i,r.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){const t=e.column;let r=null;if(t&&(r=this.columnModel.getColDefCol(t.getColId())),t&&!r)return;const i=this.getMasterColumns(e),{columnApplyStateService:o,columnSizeService:p,ctrlsService:I}=this;switch(e.type){case"columnMoved":{const Fu=e.api.getColumnState().map(Lu=>({colId:Lu.colId}));o.applyColumnState({state:Fu,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const Fu=e.api.getColumnState().map(Lu=>({colId:Lu.colId,hide:Lu.hide}));o.applyColumnState({state:Fu},"alignedGridChanged")}break;case"columnPinned":{const Fu=e.api.getColumnState().map(Lu=>({colId:Lu.colId,pinned:Lu.pinned}));o.applyColumnState({state:Fu},"alignedGridChanged")}break;case"columnResized":{const Gl=e,Fu={};i.forEach(Lu=>{Fu[Lu.getId()]={key:Lu.getColId(),newWidth:Lu.getActualWidth()}}),Gl.flexColumns?.forEach(Lu=>{Fu[Lu.getId()]&&delete Fu[Lu.getId()]}),p.setColumnWidths(Object.values(Fu),!1,Gl.finished,"alignedGridChanged");break}}const jt=I.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(Gl=>{Gl.setGridOption("alwaysShowVerticalScroll",jt)})}},Mx={version:fl,moduleName:"@ag-grid-community/aligned-grid",beans:[Ax]};function q3(e,t){const r=e.columnModel.getColDefCol(t);return r?r.getColDef():null}function Qv(e){return e.columnModel.getColumnDefs()}function Rx(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function fw(e,t,r){e.columnModel.setColumnGroupOpened(t,r,"api")}function Y3(e,t,r){return e.visibleColsService.getColumnGroup(t,r)}function K3(e,t){return e.columnModel.getProvidedColGroup(t)}function gw(e,t,r){return e.columnNameService.getDisplayNameForColumn(t,r)||""}function mw(e,t,r){return e.columnNameService.getDisplayNameForColumnGroup(t,r)||""}function vw(e,t){return e.columnModel.getColDefCol(t)}function f3(e){return e.columnModel.getColDefCols()}function Z3(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function kx(e){return e.columnGetStateService.getColumnState()}function yw(e){e.columnApplyStateService.resetColumnState("api")}function xw(e){return e.columnGroupStateService.getColumnGroupState()}function ww(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function Dv(e){e.columnGroupStateService.resetColumnGroupState("api")}function Tx(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function Fx(e){return e.visibleColsService.isPinningLeft()}function j1(e){return e.visibleColsService.isPinningRight()}function X3(e,t){return e.visibleColsService.getColAfter(t)}function Q3(e,t){return e.visibleColsService.getColBefore(t)}function Cw(e,t,r){e.columnModel.setColsVisible([t],r,"api")}function bw(e,t,r){e.columnModel.setColsVisible(t,r,"api")}function Sw(e,t,r){e.columnModel.setColsPinned([t],r,"api")}function Px(e,t,r){e.columnModel.setColsPinned(t,r,"api")}function Dx(e){return e.columnModel.getCols()}function Lx(e){return e.visibleColsService.getLeftCols()}function Ix(e){return e.visibleColsService.getCenterCols()}function _w(e){return e.visibleColsService.getRightCols()}function Ox(e){return e.visibleColsService.getAllCols()}function Ew(e){return e.columnViewportService.getViewportColumns()}function Aw(e,t,r){e.columnMoveService.moveColumns([t],r,"api")}function Mw(e,t,r){e.columnMoveService.moveColumnByIndex(t,r,"api")}function zx(e,t,r){e.columnMoveService.moveColumns(t,r,"api")}function Nx(e,t,r,i=!0,o="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:r}],!1,i,o)}function g3(e,t,r=!0,i="api"){e.columnSizeService.setColumnWidths(t,!1,r,i)}function Bx(e){return e.visibleColsService.getTreeLeft()}function m3(e){return e.visibleColsService.getTreeCenter()}function Hx(e){return e.visibleColsService.getTreeRight()}function N2(e){return e.visibleColsService.getAllTrees()}function C0(e,t,r){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:r,source:"api"})}function Gx(e,t,r){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:r,source:"api"})}function Ty(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var B2=class extends Rh{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(wd(e.source))})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const t=i=>o=>{const{column:p,node:I,value:K}=o;let jt=p.getColDef().valueFormatter;return jt===i.groupSafeValueFormatter&&(jt=i.valueFormatter),this.valueService.formatValue(p,I,K,jt)};Object.entries(e).forEach(([i,o])=>{const p={...o,groupSafeValueFormatter:this.createGroupSafeValueFormatter(o)};this.dataTypeDefinitions[i]=p,this.formatValueFuncs[i]=t(p)});const r=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(r).forEach(([i,o])=>{const p=this.processDataTypeDefinition(o,r,[i],e);p&&(this.dataTypeDefinitions[i]=p,o.dataTypeMatcher&&(this.dataTypeMatchers[i]=o.dataTypeMatcher),this.formatValueFuncs[i]=t(p))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(i=>{const o=this.dataTypeMatchers[i];o&&delete this.dataTypeMatchers[i],this.dataTypeMatchers[i]=o??e[i].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const r={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(r.columnTypes=[...dd(e.columnTypes),...dd(t.columnTypes)]),r}processDataTypeDefinition(e,t,r,i){let o;const p=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let I=i[p];const K=t[p];if(I&&K&&(I=K),!this.validateDataTypeDefinition(e,I,p))return;o=this.mergeDataTypeDefinitions(I,e)}else{if(r.includes(p)){rl('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const I=t[p];if(!this.validateDataTypeDefinition(e,I,p))return;const K=this.processDataTypeDefinition(I,t,[...r,p],i);if(!K)return;o=this.mergeDataTypeDefinitions(K,e)}return{...o,groupSafeValueFormatter:this.createGroupSafeValueFormatter(o)}}validateDataTypeDefinition(e,t,r){return t?t.baseDataType!==e.baseDataType?(rl('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(rl(`The data type definition ${r} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){const r=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(r){if(r==="first"||r==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&r!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&typeof t.value=="string"&&!e.dataTypeMatcher?.(t.value))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,r){let{cellDataType:i}=t;const{field:o}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(o,r):!1),!i){e.cellDataType=!1;return}const p=this.dataTypeDefinitions[i];if(!p){rl(`Missing data type definition - "${i}"`);return}return e.cellDataType=i,p.groupSafeValueFormatter&&(e.valueFormatter=p.groupSafeValueFormatter),p.valueParser&&(e.valueParser=p.valueParser),p.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,p,r),p.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const r=i=>{t.add(i.key)};e.addEventListener("columnStateUpdated",r),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",r))}canInferCellDataType(e,t){if(!Rd(this.gos))return!1;const r={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,r))return!1;const i=t.type===null?e.type:t.type;if(i){const o=this.gos.get("columnTypes")??{};if(dd(i).some(I=>{const K=o[I.trim()];return K&&this.doColDefPropsPreventInference(K,r)}))return!1}return!this.doColDefPropsPreventInference(e,r)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([r,i])=>this.doesColDefPropPreventInference(e,t,r,i))}doesColDefPropPreventInference(e,t,r,i){if(!t[r])return!1;const o=e[r];return o===null?(t[r]=!1,!1):i===void 0?!!o:o===i}inferCellDataType(e,t){if(!e)return;let r;const i=this.getInitialData();if(i){const p=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");r=Al(i,e,p)}else this.initWaitForRowData(t);if(r==null)return;const[o]=Object.entries(this.dataTypeMatchers).find(([p,I])=>I(r))??["object"];return o}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[r]=this.addManagedEventListeners({rowDataUpdateStarted:i=>{const{firstRowData:o}=i;o&&(r?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(o,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const r=[];this.destroyColumnStateUpdateListeners();const i={},o={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([p,I])=>{const K=this.columnModel.getCol(p);if(!K)return;const jt=K.getColDef();if(!this.columnModel.resetColDefIntoCol(K,"cellDataTypeInferred"))return;const Gl=K.getColDef();if(t&&Gl.type&&Gl.type!==jt.type){const Fu=this.getUpdatedColumnState(K,I);Fu.rowGroup&&Fu.rowGroupIndex==null&&(i[p]=Fu),Fu.pivot&&Fu.pivotIndex==null&&(o[p]=Fu),r.push(Fu)}}),t&&r.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(i,o)),r.length&&this.columnApplyStateService.applyColumnState({state:r},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const r=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(i=>{delete r[i],i==="rowGroup"?delete r.rowGroupIndex:i==="pivot"&&delete r.pivotIndex}),r}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,r=e.object;this.hasObjectValueParser=t.valueParser!==r.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==r.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;const r=this.getDataTypeDefinition(e)?.dataTypeMatcher;return r?r(t):!0}validateColDef(e){const t=r=>rl(`Cell data type is "object" but no Value ${r} has been provided. Please either provide an object data type definition with a Value ${r}, or set "colDef.value${r}"`);e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,r,i){const o=this.formatValueFuncs[t];switch(r.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=p=>!!p.colDef.editable&&p.event.key===np.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=o;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=o;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(p,I)=>{const K=this.columnModel.getColDefCol(i),jt=K?.getColDef();if(!K||!jt)return 0;const Gl=p==null?"":o({column:K,node:null,value:p}),Fu=I==null?"":o({column:K,node:null,value:I});return Gl===Fu?0:Gl>Fu?1:-1},e.keyCreator=o;break}}this.filterManager?.setColDefPropertiesForDataType(e,r,o)}getDefaultDataTypes(){const e=r=>!!r.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:r=>r.newValue?.trim?.()===""?null:Number(r.newValue),valueFormatter:r=>r.value==null?"":typeof r.value!="number"||isNaN(r.value)?t("invalidNumber","Invalid Number"):String(r.value),dataTypeMatcher:r=>typeof r=="number"},text:{baseDataType:"text",valueParser:r=>r.newValue===""?null:qd(r.newValue),dataTypeMatcher:r=>typeof r=="string"},boolean:{baseDataType:"boolean",valueParser:r=>r.newValue==null?r.newValue:r.newValue?.trim?.()===""?null:String(r.newValue).toLowerCase()==="true",valueFormatter:r=>r.value==null?"":String(r.value),dataTypeMatcher:r=>typeof r=="boolean"},date:{baseDataType:"date",valueParser:r=>D(r.newValue==null?null:String(r.newValue)),valueFormatter:r=>r.value==null?"":!(r.value instanceof Date)||isNaN(r.value.getTime())?t("invalidDate","Invalid Date"):B(r.value,!1)??"",dataTypeMatcher:r=>r instanceof Date},dateString:{baseDataType:"dateString",dateParser:r=>D(r)??void 0,dateFormatter:r=>B(r??null,!1)??void 0,valueParser:r=>e(String(r.newValue))?r.newValue:null,valueFormatter:r=>e(String(r.value))?r.value:"",dataTypeMatcher:r=>typeof r=="string"&&e(r)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:r=>qd(r.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},J3={version:fl,moduleName:"@ag-grid-community/data-type",beans:[B2]},Rw={version:fl,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:q3,getColumnDefs:Qv,sizeColumnsToFit:Rx,setColumnGroupOpened:fw,getColumnGroup:Y3,getProvidedColumnGroup:K3,getDisplayNameForColumn:gw,getDisplayNameForColumnGroup:mw,getColumn:vw,getColumns:f3,applyColumnState:Z3,getColumnState:kx,resetColumnState:yw,getColumnGroupState:xw,setColumnGroupState:ww,resetColumnGroupState:Dv,isPinning:Tx,isPinningLeft:Fx,isPinningRight:j1,getDisplayedColAfter:X3,getDisplayedColBefore:Q3,setColumnVisible:Cw,setColumnsVisible:bw,setColumnPinned:Sw,setColumnsPinned:Px,getAllGridColumns:Dx,getDisplayedLeftColumns:Lx,getDisplayedCenterColumns:Ix,getDisplayedRightColumns:_w,getAllDisplayedColumns:Ox,getAllDisplayedVirtualColumns:Ew,moveColumn:Aw,moveColumnByIndex:Mw,moveColumns:zx,setColumnWidth:Nx,setColumnWidths:g3,getLeftDisplayedColumnGroups:Bx,getCenterDisplayedColumnGroups:m3,getRightDisplayedColumnGroups:Hx,getAllDisplayedColumnGroups:N2,autoSizeColumn:C0,autoSizeColumns:Gx,autoSizeAllColumns:Ty}};function ex(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function v3(e,t){const r=e.dragAndDropService.findExternalZone(t);r&&e.dragAndDropService.removeDropTarget(r)}function Vx(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var kw={version:fl,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:ex,removeRowDropZone:v3,getRowDropZoneParams:Vx}};function Tw(e){return e.pinnedRowModel.getPinnedTopRowCount()}function Fw(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function Pw(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function tx(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var Dw={version:fl,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:Tw,getPinnedBottomRowCount:Fw,getPinnedTopRow:Pw,getPinnedBottomRow:tx}};function Lw(e){e.overlayService.showLoadingOverlay()}function g(e){e.overlayService.showNoRowsOverlay()}function G(e){e.overlayService.hideOverlay()}var J={version:fl,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:Lw,showNoRowsOverlay:g,hideOverlay:G}};function tl(e,t,r){if(!t)return;const i=e.ctrlsService.getGridBodyCtrl().getGui(),o=`aria-${t}`;r===null?i.removeAttribute(o):i.setAttribute(o,r)}function hl(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function xl(e,t={}){const r=i=>rl(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);pd(t.fadeDelay)&&r("fade"),pd(t.flashDelay)&&r("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function Zl(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function jl(e){return e.animationFrameService.isQueueEmpty()}function Du(e){e.animationFrameService.flushAllFrames()}function Qu(e){return{rowHeight:Cp(e.gos),headerHeight:e.columnModel.getHeaderHeight()}}function td(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(a1)}var kd={version:fl,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:tl,refreshCells:hl,flashCells:xl,refreshHeader:Zl,isAnimationFrameQueueEmpty:jl,flushAllAnimationFrames:Du,getSizesForCurrentTheme:Qu,getCellRendererInstances:td}};function Id(e){e.valueCache.expire()}function fh(e,t,r){return Ph(e,{colKey:t,rowNode:r})}function Ph(e,t){const{colKey:r,rowNode:i,useFormatter:o}=t,p=e.columnModel.getColDefCol(r)??e.columnModel.getCol(r);if(id(p))return null;const I=e.valueService.getValueForDisplay(p,i);return o?e.valueService.formatValue(p,i,I)??yh(I,!0):I}function Nd(e){return e.context.getGridId()}function ah(e){e.gridDestroyService.destroy()}function uh(e){return e.gridDestroyService.isDestroyCalled()}function kh(e,t){return e.gos.get(t)}function Fh(e,t,r){hh(e,{[t]:r})}function hh(e,t){e.gos.updateGridOptions({options:t})}function Ap(e,t,r){e.apiEventService.addEventListener(t,r)}function nf(e,t,r){e.apiEventService.removeEventListener(t,r)}function hf(e,t){e.apiEventService.addGlobalListener(t)}function sf(e,t){e.apiEventService.removeGlobalListener(t)}function Af(e){return e.focusService.getFocusedCell()}function Mf(e){return e.focusService.clearFocusedCell()}function xg(e,t,r,i){e.focusService.setFocusedCell({rowIndex:t,column:r,rowPinned:i,forceBrowserFocus:!0})}function Pf(e,t){return e.navigationService.tabToNextCell(!1,t)}function hg(e,t){return e.navigationService.tabToNextCell(!0,t)}function _m(e,t,r=!1){const i=e.headerNavigationService.getHeaderPositionForColumn(t,r);i&&e.focusService.focusHeaderPosition({headerPosition:i})}function d0(e,t,r){const i=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:i,buttonElement:r,positionBy:"button"})}function Dm(e,t,r){let i=e.columnModel.getCol(t);if(i||(i=e.columnModel.getColDefCol(t)),!i){Ml(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,mouseEvent:r,positionBy:"mouse"})}function tf(e,t){const r=e.columnModel.getCol(t);if(!r){Ml(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:r,positionBy:"auto"})}function wg(e){e.menuService.hidePopupMenu()}function Fg(e,t={}){const r=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(r))}function Em(e,t,r,i,o){e.expansionService.setRowNodeExpanded(t,r,i,o)}function s0(e,t){return e.rowModel.getRowNode(t)}function b0(e,t,r,i){e.rowRenderer.addRenderedRowListener(t,r,i)}function z0(e){return e.rowRenderer.getRenderedNodes()}function X0(e,t,r){e.rowModel.forEachNode(t,r)}function iv(e){return V0(e)}function V0(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function hv(e){return N0(e)}function N0(e){return e.rowRenderer.getLastVirtualRenderedRow()}function pv(e,t){return e.rowModel.getRow(t)}function Fy(e){return e.rowModel.getRowCount()}function Iw(e){return e.rowModel}function Jv(e,t){if(!t.nodes.every(K=>K.rowPinned?(rl("cannot select pinned rows"),!1):K.id===void 0?(rl("cannot select node until id for node is known"),!1):!0))return;const{nodes:i,source:o,newValue:p}=t,I=i;e.selectionService.setNodesSelected({nodes:I,source:o??"api",newValue:p})}function B0(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function Lv(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function u1(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function Iv(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function d2(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function Py(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function U1(e){return e.selectionService.getSelectedNodes()}function y3(e){return e.selectionService.getSelectedRows()}function jx(e){e.sortController.onSortChanged("api")}var mb={version:fl,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:Nd,destroy:ah,isDestroyed:uh,getGridOption:kh,setGridOption:Fh,updateGridOptions:hh}},vb={version:fl,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:Jv,selectAll:B0,deselectAll:Lv,selectAllFiltered:u1,deselectAllFiltered:Iv,selectAllOnCurrentPage:d2,deselectAllOnCurrentPage:Py,getSelectedNodes:U1,getSelectedRows:y3}},yb={version:fl,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:Fg,setRowNodeExpanded:Em,getRowNode:s0,addRenderedRowListener:b0,getRenderedNodes:z0,forEachNode:X0,getFirstDisplayedRow:iv,getFirstDisplayedRowIndex:V0,getLastDisplayedRow:hv,getLastDisplayedRowIndex:N0,getDisplayedRowAtIndex:pv,getDisplayedRowCount:Fy,getModel:Iw}},xb={version:fl,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:zf,getHorizontalPixelRange:qf,ensureColumnVisible:Kf,ensureIndexVisible:u0,ensureNodeVisible:Qh}},wb={version:fl,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:Af,clearFocusedCell:Mf,setFocusedCell:xg,setFocusedHeader:_m,tabToNextCell:Pf,tabToPreviousCell:hg}},Cb={version:fl,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:Ap,addGlobalListener:hf,removeEventListener:nf,removeGlobalListener:sf}},bb={version:fl,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:Id,getValue:fh,getCellValue:Ph}},rC={version:fl,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:d0,showColumnMenuAfterMouseClick:Dm,showColumnMenu:tf,hidePopupMenu:wg}},Sb={version:fl,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:jx}},_b={version:fl,moduleName:"@ag-grid-community/api",dependantModules:[mb,Dw,vb,Rw,yb,kw,xb,J,wb,Cb,kd,bb,rC,Sb]};function Eb(e){return e.stateService?.getState()??{}}function Ab(e){switch(e={...e},e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=Mb(e)}return e}function Mb(e){return e.cellSelection=Rb(e,"rangeSelection"),e}function Rb(e,t){if(e&&typeof e=="object")return e[t]}var kb=class extends Rh{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=$l(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=$l(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=$l(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=Rd(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",fl),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const[e,t,r]=this.addManagedEventListeners({newColumnsLoaded:({source:i})=>{i==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{r?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return Ab(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=r=>()=>this.updateColumnState([r]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:r,pagination:i}=this.getInitialState(),o=this.gos.get("advancedFilterModel");(e||o)&&this.setFilterState(e,o),t&&this.setRowGroupExpansionState(t),r&&this.setRowSelectionState(r),i&&this.setPaginationState(i),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const p=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:p,columnRowGroupChanged:p,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{p()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:I=>{(I.newPage||I.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:r,columnOrder:i}=this.getInitialState();r&&this.setFocusedCellState(r),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!i?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const o=this.getRangeSelectionState();this.updateCachedState("rangeSelection",o),this.updateCachedState("cellSelection",o),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:p=>{if(p.finished){const I=this.getRangeSelectionState();this.updateCachedState("rangeSelection",I),this.updateCachedState("cellSelection",I)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],r=[],i=[],o=[],p=[],I=[],K=[],jt=[],Gl=[];let Fu=0;const Lu=this.columnGetStateService.getColumnState();for(let qu=0;qu<Lu.length;qu++){const{colId:Xd,sort:Vh,sortIndex:Zh,rowGroup:Wh,rowGroupIndex:Rp,aggFunc:Tp,pivot:Mp,pivotIndex:Of,pinned:zg,hide:Jf,width:sg,flex:mm}=Lu[qu];Gl.push(Xd),Vh&&(t[Zh??Fu++]={colId:Xd,sort:Vh}),Wh&&(r[Rp??0]=Xd),typeof Tp=="string"&&i.push({colId:Xd,aggFunc:Tp}),Mp&&(o[Of??0]=Xd),zg&&(zg==="right"?I:p).push(Xd),Jf&&K.push(Xd),(mm||sg)&&jt.push({colId:Xd,flex:mm??void 0,width:sg})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:r.length?{groupColIds:r}:void 0,aggregation:i.length?{aggregationModel:i}:void 0,pivot:o.length||e?{pivotMode:e,pivotColIds:o}:void 0,columnPinning:p.length||I.length?{leftColIds:p,rightColIds:I}:void 0,columnVisibility:K.length?{hiddenColIds:K}:void 0,columnSizing:jt.length?{columnSizingModel:jt}:void 0,columnOrder:Gl.length?{orderedColIds:Gl}:void 0}}setColumnState(e){const{sort:t,rowGroup:r,aggregation:i,pivot:o,columnPinning:p,columnVisibility:I,columnSizing:K,columnOrder:jt,partialColumnState:Gl}=e,Fu={},Lu=Wh=>{let Rp=Fu[Wh];return Rp||(Rp={colId:Wh},Fu[Wh]=Rp,Rp)},qu=Gl?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:Wh,sort:Rp},Tp)=>{const Mp=Lu(Wh);Mp.sort=Rp,Mp.sortIndex=Tp}),qu.sort=null,qu.sortIndex=null),r&&(r.groupColIds.forEach((Wh,Rp)=>{const Tp=Lu(Wh);Tp.rowGroup=!0,Tp.rowGroupIndex=Rp}),qu.rowGroup=null,qu.rowGroupIndex=null),i&&(i.aggregationModel.forEach(({colId:Wh,aggFunc:Rp})=>{Lu(Wh).aggFunc=Rp}),qu.aggFunc=null),o&&(o.pivotColIds.forEach((Wh,Rp)=>{const Tp=Lu(Wh);Tp.pivot=!0,Tp.pivotIndex=Rp}),this.gos.updateGridOptions({options:{pivotMode:o.pivotMode},source:"gridInitializing"}),qu.pivot=null,qu.pivotIndex=null),p&&(p.leftColIds.forEach(Wh=>{Lu(Wh).pinned="left"}),p.rightColIds.forEach(Wh=>{Lu(Wh).pinned="right"}),qu.pinned=null),I&&(I.hiddenColIds.forEach(Wh=>{Lu(Wh).hide=!0}),qu.hide=null),K&&(K.columnSizingModel.forEach(({colId:Wh,flex:Rp,width:Tp})=>{const Mp=Lu(Wh);Mp.flex=Rp??null,Mp.width=Tp}),qu.flex=null);const Xd=jt?.orderedColIds,Vh=!!Xd?.length,Zh=Vh?Xd.map(Wh=>Lu(Wh)):Object.values(Fu);Zh.length&&(this.columnStates=Zh,this.columnApplyStateService.applyColumnState({state:Zh,applyOrder:Vh,defaultState:qu},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const r=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){const i=[];for(const o of t)this.pivotResultColsService.getPivotResultCol(o.colId)&&i.push(o);this.columnApplyStateService.applyColumnState({state:i,applyOrder:e},"gridInitializing")}r&&this.columnGroupStateService.setColumnGroupState(r,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:r,open:i})=>{i&&t.push(r)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const t=new Set(e.columnGroup?.openColumnGroupIds),i=this.columnGroupStateService.getColumnGroupState().map(({groupId:o})=>{const p=t.has(o);return p&&t.delete(o),{groupId:o,open:p}});t.forEach(o=>{i.push({groupId:o,open:!0})}),i.length&&(this.columnGroupStates=i),this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);const t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){const{filterModel:r,advancedFilterModel:i}=e??{advancedFilterModel:t};r&&this.filterManager?.setFilterModel(r,"columnFilter"),i&&this.filterManager?.setAdvancedFilterModel(i)}getRangeSelectionState(){const e=this.rangeService?.getCellRanges().map(t=>{const{id:r,type:i,startRow:o,endRow:p,columns:I,startColumn:K}=t;return{id:r,type:i,startRow:o,endRow:p,colIds:I.map(jt=>jt.getColId()),startColId:K.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeService:r,columnModel:i,visibleColsService:o}=this;if(!lf(t)||!r)return;const p=[];if(e.cellRanges.forEach(I=>{const K=[];if(I.colIds.forEach(Gl=>{const Fu=i.getCol(Gl);Fu&&K.push(Fu)}),!K.length)return;let jt=i.getCol(I.startColId);if(!jt){const Gl=o.getAllCols(),Fu=new Set(K);jt=Gl.find(Lu=>Fu.has(Lu))}p.push({...I,columns:K,startColumn:jt})}),cf(t)&&Jh(t)&&p.length>1)return rl("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");r.setCellRanges(p)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:r}=e?.getVScrollPosition()??{top:0};return r||t?{top:r,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:r}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,r)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:r,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:r,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:r,rowPinned:i}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:r,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!e?.toggledNodes?.length?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let r=!1;Object.entries(t).forEach(([i,o])=>{Gd(o,this.cachedState[i])||(r=!0)}),this.cachedState={...this.cachedState,...t},r&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const r=this.cachedState[e];this.setCachedStateValue(e,t),Gd(t,r)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},iC={version:fl,moduleName:"@ag-grid-community/state-core",beans:[kb]},Tb={version:fl,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:Eb},dependantModules:[iC]},Fb={version:fl,moduleName:"@ag-grid-community/state",dependantModules:[iC,Tb]};function Pb(e){return e.rowModel.isLastRowIndexKnown()}function Db(e){return e.paginationService?.getPageSize()??100}function Lb(e){return e.paginationService?.getCurrentPage()??0}function Ib(e){return e.paginationService?.getTotalPages()??1}function Ob(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function zb(e){e.paginationService?.goToNextPage()}function Nb(e){e.paginationService?.goToPreviousPage()}function Bb(e){e.paginationService?.goToFirstPage()}function Hb(e){e.paginationService?.goToLastPage()}function Gb(e,t){e.paginationService?.goToPage(t)}var Vb=class extends Rh{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const r=Math.max(Cp(this.gos),1),i=Math.floor(e/r);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?$l(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function nC(e,t,r){e.addManagedElementListeners(t,{keydown:i=>{if(!i.defaultPrevented&&i.key===np.TAB){const o=i.shiftKey;r.findNextFocusableElement(t,!1,o)||r.focusNextGridCoreContainer(o)&&i.preventDefault()}}})}var rx="paginationPageSizeSelector",jb=class extends cm{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(rx,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){_0(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(rx)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),r=!t||!e.includes(t);if(r){const o=this.gos.exists("paginationPageSize"),p=this.gos.get(rx)!==!0;rl(`'paginationPageSize=${t}'${o?"":" (default value)"}, but ${t} is not included in${p?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),p||rl(`Either set '${rx}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}const i=String(r?"":t);this.selectPageSizeComp?(Gm(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=r}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const r=this.localeService.getLocaleTextFunc(),i=r("pageSizeSelectorLabel","Page Size:"),o=r("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new f0).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(o).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(rx);return!Array.isArray(t)||rh(t)?e:[...t].sort((r,i)=>r-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},Ub={selector:"AG-PAGE-SIZE-SELECTOR",component:jb},Wb=class extends z3{constructor(){super(),this.btFirst=Cf,this.btPrevious=Cf,this.btNext=Cf,this.btLast=Cf,this.lbRecordCount=Cf,this.lbFirstRowOnPage=Cf,this.lbLastRowOnPage=Cf,this.lbCurrent=Cf,this.lbTotal=Cf,this.pageSizeComp=Cf,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[Ub]);const{btFirst:t,btPrevious:r,btNext:i,btLast:o}=this;this.activateTabIndex([t,r,i,o]),t.insertAdjacentElement("afterbegin",D0(e?"last":"first",this.gos)),r.insertAdjacentElement("afterbegin",D0(e?"next":"previous",this.gos)),i.insertAdjacentElement("afterbegin",D0(e?"previous":"next",this.gos)),o.insertAdjacentElement("afterbegin",D0(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:p=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(p):this.focusService.focusGridInnerElement(p)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:r}=e;this.addManagedListeners(t,{click:r,keydown:i=>{(i.key===np.ENTER||i.key===np.SPACE)&&(i.preventDefault(),r())}})}),nC(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});const r=this.localeService.getLocaleTextFunc(),i=r("thousandSeparator",","),o=r("decimalSeparator",".");return R(e,i,o)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),r=e("to","to"),i=e("of","of"),o=e("firstPage","First Page"),p=e("previousPage","Previous Page"),I=e("nextPage","Next Page"),K=e("lastPage","Last Page"),jt=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${jt}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${jt}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${jt}-to">${r}</span>
                    <span id="ag-${jt}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${jt}-of">${i}</span>
                    <span id="ag-${jt}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${p}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${jt}-start-page">${t}</span>
                        <span id="ag-${jt}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${jt}-of-page">${i}</span>
                        <span id="ag-${jt}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${I}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${K}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),r=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const i=this.isZeroPagesToDisplay(),o=e===r-1;this.nextButtonDisabled=o||i,this.lastButtonDisabled=!t||i||e===r-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){jh(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),r=this.paginationService.getMasterRowCount(),i=e?r:null;if(i===1){const Tp=this.rowModel.getRow(0);if(Tp&&Tp.group&&!(Tp.groupData||Tp.aggData)){this.setTotalLabelsToZero();return}}const o=this.paginationService.getCurrentPage(),p=this.paginationService.getPageSize();let I,K;this.isZeroPagesToDisplay()?I=K=0:(I=p*o+1,K=I+p-1,e&&K>i&&(K=i));const jt=I+p-1,Gl=!e&&r<jt,Fu=this.formatNumber(I);this.lbFirstRowOnPage.textContent=Fu;let Lu;const qu=this.localeService.getLocaleTextFunc();Gl?Lu=qu("pageLastRowUnknown","?"):Lu=this.formatNumber(K),this.lbLastRowOnPage.textContent=Lu;const Vh=t>0?o+1:0,Zh=this.formatNumber(Vh);this.lbCurrent.textContent=Zh;let Wh,Rp;if(e)Wh=this.formatNumber(t),Rp=this.formatNumber(i);else{const Tp=qu("more","more");Wh=Tp,Rp=Tp}this.lbTotal.textContent=Wh,this.lbRecordCount.textContent=Rp,this.announceAriaStatus(Fu,Lu,Rp,Zh,Wh)}announceAriaStatus(e,t,r,i,o){const p=this.localeService.getLocaleTextFunc(),I=p("page","Page"),K=p("to","to"),jt=p("of","of"),Gl=`${e} ${K} ${t} ${jt} ${r}`,Fu=`${I} ${i} ${jt} ${o}`;Gl!==this.ariaRowStatus&&(this.ariaRowStatus=Gl,this.ariaAnnouncementService.announceValue(Gl,"paginationRow")),Fu!==this.ariaPageStatus&&(this.ariaPageStatus=Fu,this.ariaAnnouncementService.announceValue(Fu,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},$b={selector:"AG-PAGINATION",component:Wb},qb=class extends Rh{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return $b}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return pd(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:pd(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:pd(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:pd(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const r=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}r!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let r=this.pageSize*(this.currentPage+1)-1;if(r>e&&(r=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),r===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const i=this.rowModel.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=i-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:r=!1,newPageSize:i=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:r,newPageSize:i,keepRenderedRows:t})}},oC={version:fl,moduleName:"@ag-grid-community/pagination-core",beans:[qb,Vb]},Yb={version:fl,moduleName:"@ag-grid-community/pagination-api",dependantModules:[oC],apiFunctions:{paginationIsLastPageFound:Pb,paginationGetPageSize:Db,paginationGetCurrentPage:Lb,paginationGetTotalPages:Ib,paginationGetRowCount:Ob,paginationGoToNextPage:zb,paginationGoToPreviousPage:Nb,paginationGoToFirstPage:Bb,paginationGoToLastPage:Hb,paginationGoToPage:Gb}},Kb={version:fl,moduleName:"@ag-grid-community/pagination",dependantModules:[oC,Yb]},Ov="clientSide",Sv="serverSide",x3="infinite",Zb={onGroupExpandedOrCollapsed:[Ov],refreshClientSideRowModel:[Ov],isRowDataEmpty:[Ov],forEachLeafNode:[Ov],forEachNodeAfterFilter:[Ov],forEachNodeAfterFilterAndSort:[Ov],resetRowHeights:[Ov],applyTransaction:[Ov],applyTransactionAsync:[Ov],flushAsyncTransactions:[Ov],getBestCostNodeSelection:[Ov],getServerSideSelectionState:[Sv],setServerSideSelectionState:[Sv],applyServerSideTransaction:[Sv],applyServerSideTransactionAsync:[Sv],applyServerSideRowData:[Sv],retryServerSideLoads:[Sv],flushServerSideAsyncTransactions:[Sv],refreshServerSide:[Sv],getServerSideGroupLevelState:[Sv],refreshInfiniteCache:[x3],purgeInfiniteCache:[x3],getInfiniteRowCount:[x3],isLastRowIndexKnown:[x3,Sv],expandAll:[Ov,Sv],collapseAll:[Ov,Sv],onRowHeightChanged:[Ov,Sv],setRowCount:[x3,Sv],getCacheBlockState:[x3,Sv]},Xb={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function Qb(e,t,r){const i=Xb[e];if(i){const{version:p,new:I,old:K,message:jt}=i,Gl=K??e;return(...Fu)=>{const Lu=I?`Please use ${I} instead. `:"";return rl(`Since ${p} api.${Gl} is deprecated. ${Lu}${jt??""}`),t.apply(t,Fu)}}const o=Zb[e];return o?(...p)=>{const I=r.rowModel.getType();if(!o.includes(I)){Ml(`api.${e} can only be called when gridOptions.rowModelType is ${o.join(" or ")}`);return}return t.apply(t,p)}:t}var Jb={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},h2=(e,t)=>{const r=t.rowModelType??"clientSide";return r==="clientSide"||r==="serverSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},e5={enableRowGroup:h2,rowGroup:h2,rowGroupIndex:h2,enablePivot:h2,enableValue:h2,pivot:h2,pivotIndex:h2,aggFunc:h2,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(r=>t.includes(r))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>w3},t5={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},r5=Object.keys(t5),w3={objectName:"colDef",allProperties:r5,docsUrl:"column-properties/",deprecations:Jb,validations:e5},i5=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),n5={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},o5=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const r=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:r}case"serverSide":{const r=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:r}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return typeof t=="boolean"||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},rowSelection:{validate({rowSelection:e}){return e&&typeof e=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>w3,defaultColDef:()=>w3,defaultColGroupDef:()=>w3,autoGroupColumnDef:()=>w3,selectionColumnDef:()=>w3}),a5=()=>({objectName:"gridOptions",allProperties:[...Op.ALL_PROPERTIES,...Df.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:i5(),validations:o5()}),s5=class extends Rh{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,a5())}validateApiFunction(e,t){return Qb(e,t,this.beans)}processOptions(e,t){const{validations:r,deprecations:i,allProperties:o,propertyExceptions:p,objectName:I,docsUrl:K}=t;o&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...p??[],...Object.keys(i)],o,I,K);const jt=new Set;Object.keys(e).forEach(Fu=>{const Lu=i[Fu];if(Lu)if("renamed"in Lu){const{renamed:Mp,version:Of}=Lu;jt.add(`As of v${Of}, ${String(Fu)} is deprecated. Please use ${String(Mp)} instead.`),e[Mp]=e[Fu]}else{const{message:Mp,version:Of}=Lu;jt.add(`As of v${Of}, ${String(Fu)} is deprecated. ${Mp??""}`)}const qu=e[Fu];if(qu==null||qu===!1)return;const Xd=r[Fu];let Vh;if(Xd)if(typeof Xd=="function"){const Mp=Xd(e,this.gridOptions);if(!Mp)return;if("objectName"in Mp){const Of=e[Fu];if(Array.isArray(Of)){Of.forEach(zg=>{this.processOptions(zg,Mp)});return}this.processOptions(e[Fu],Mp);return}Vh=Mp}else Vh=Xd;else return;const{module:Zh,dependencies:Wh,validate:Rp,supportedRowModels:Tp}=Vh;if(Tp){const Mp=this.gridOptions.rowModelType??"clientSide";if(!Tp.includes(Mp)){jt.add(`${String(Fu)} is not supported with the '${Mp}' row model.`);return}}if(Zh){const Mp=Array.isArray(Zh)?Zh:[Zh];let Of=!0;if(Mp.forEach(zg=>{this.gos.assertModuleRegistered(zg,String(Fu))||(Of=!1,jt.add(`${String(Fu)} is only available when ${zg} is loaded.`))}),!Of)return}if(Wh){const Mp=this.checkForRequiredDependencies(Fu,Wh,e);if(Mp){jt.add(Mp);return}}if(Rp){const Mp=Rp(e,this.gridOptions);if(Mp){jt.add(Mp);return}}}),jt.size>0&&jt.forEach(Fu=>{rl(Fu)})}checkForRequiredDependencies(e,t,r){const o=Object.entries(t).find(([K,jt])=>{const Gl=r[K];return!jt.includes(Gl)});if(!o)return null;const[p,I]=o;return I.length>1?`'${String(e)}' requires '${p}' to be one of [${I.join(", ")}].`:`'${String(e)}' requires '${p}' to be ${I[0]}.`}checkProperties(e,t,r,i,o){const p=["__ob__","__v_skip","__metadata__"],I=l5(Object.getOwnPropertyNames(e),[...p,...t,...r],r);if(W(I,(K,jt)=>{let Gl=`invalid ${i} property '${K}' did you mean any of these: ${jt.slice(0,8).join(", ")}.`;r.includes("context")&&(Gl+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),rl(Gl)}),Object.keys(I).length>0&&o){const K=this.getFrameworkOverrides().getDocLink(o);rl(`to see all the valid ${i} properties please check: ${K}`)}}};function l5(e,t,r){const i={},o=e.filter(p=>!t.some(I=>I===p));return o.length>0&&o.forEach(p=>i[p]=I0({inputValue:p,allSuggestions:r}).values),i}var aC={version:fl,moduleName:"@ag-grid-community/core"},c5={version:fl,moduleName:"@ag-grid-community/core-validations",beans:[s5]},Ow={version:fl,moduleName:"@ag-grid-community/core-community-features",dependantModules:[aC,c5,tw,Gh,Fb,J3,Mx,Kb,_b]},u5=class extends Rh{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}}),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},ix=new Set(["gridPreDestroyed","fillStart","pasteStart"]),sC=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",d5=new Map([...Op.BOOLEAN_PROPERTIES.map(e=>[e,Nl]),...Op.NUMBER_PROPERTIES.map(e=>[e,w]),["groupAggFiltering",e=>typeof e=="function"?e:Nl(e)],["pageSize",S(1)],["autoSizePadding",S(0)],["keepDetailRowsCount",S(1)],["rowBuffer",S(0)],["infiniteInitialRowCount",S(1)],["cacheOverflowSize",S(1)],["cacheBlockSize",S(1)],["serverSideInitialRowCount",S(1)],["viewportRowModelPageSize",S(1)],["viewportRowModelBufferSize",S(0)]]);function lC(e,t){const r=d5.get(e);return r?r(t):t}function h5(e){const t={};return Object.entries(e).forEach(([r,i])=>{const o=lC(r,i);t[r]=o}),t}var cC=class fb extends Rh{constructor(){super(...arguments),this.beanName="gos",this.gridReadyFired=!1,this.queueEvents=[],this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Y,this.globalEventHandlerFactory=t=>(r,i)=>{if(!this.isAlive())return;const o=ix.has(r);if(o&&!t||!o&&t)return;const p=(I,K)=>{const jt=this.gridOptions[Df.getCallbackForEvent(I)];typeof jt=="function"&&this.frameworkOverrides.wrapOutgoing(()=>jt(K))};if(this.gridReadyFired)p(r,i);else if(r==="gridReady"){p(r,i),this.gridReadyFired=!0;for(const I of this.queueEvents)p(I.eventName,I.event);this.queueEvents=[]}else this.queueEvents.push({eventName:r,event:i})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi,this.gridId=t.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:r})=>{this.updateGridOptions({options:r,force:!0,source:"gridOptionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(t){return this.gridOptions[t]??n5[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return pd(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(i=>{const o=i;return o.api=this.api,o.context=this.gridOptionsContext,t(o)})}updateGridOptions({options:t,force:r,source:i="api"}){const o={id:fb.changeSetId++,properties:[]},p=[];Object.entries(t).forEach(([I,K])=>{i==="api"&&Hp[I]&&rl(`${I} is an initial property and cannot be updated.`);const jt=lC(I,K),Gl=r||typeof jt=="object"&&i==="api",Fu=this.gridOptions[I];if(Gl||Fu!==jt){this.gridOptions[I]=jt;const Lu={type:I,currentValue:jt,previousValue:Fu,changeSet:o,source:i};p.push(Lu)}}),this.validationService?.processGridOptions(this.gridOptions),o.properties=p.map(I=>I.type),p.forEach(I=>{this.gridOptions.debug&&ml(`Updated property ${I.type} from`,I.previousValue," to ",I.currentValue),this.propertyEventService.dispatchEvent(I)})}addPropertyEventListener(t,r){this.propertyEventService.addEventListener(t,r)}removePropertyEventListener(t,r){this.propertyEventService.removeEventListener(t,r)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){const r=t;return r.api=this.api,r.context=this.gridOptionsContext,r}assertModuleRegistered(t,r){return c0.__assertRegistered(t,r,this.gridId)}isModuleRegistered(t){return c0.__isRegistered(t,this.gridId)}};cC.changeSetId=0;var uC=cC,dC=class extends Rh{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let r,i;if(Yh(e.column)?r=this.visibleColsService.getGroupAtDirection(e.column,t):(i=`getCol${t}`,r=this.visibleColsService[i](e.column)),!r)return;const{headerRowIndex:o}=e;if(this.getHeaderRowType(o)!=="filter"){const K=[r];for(;r.getParent();)r=r.getParent(),K.push(r);r=K[K.length-1-o]}const{column:p,headerRowIndex:I}=this.getHeaderIndexToFocus(r,o);return{column:p,headerRowIndex:I}}getHeaderIndexToFocus(e,t){let r;if(Yh(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const i=e;r=i.getLeafColumns()[0];let o=r;for(;o!==i;)t++,o=o.getParent()}return{column:r||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const r=this.getHeaderRowType(t),i=r==="filter",o=r==="column";let p=i?e:e.getParent(),I=t-1,K=I;if(o&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;p&&p.isPadding();)p=p.getParent(),I--;K=I,I<0&&(p=e,I=t,K=void 0)}return{column:p,headerRowIndex:I,headerRowIndexWithoutSpan:K}}getColumnVisibleChild(e,t,r="After"){const i=this.getHeaderRowType(t);let o=e,p=t+1;const I=p;if(i==="group"){const K=e.getDisplayedLeafColumns(),jt=r==="After"?K[0]:wf(K),Gl=[];let Fu=jt;for(;Fu.getParent()!==e;)Fu=Fu.getParent(),Gl.push(Fu);if(o=jt,jt.isSpanHeaderHeight())for(let Lu=Gl.length-1;Lu>=0;Lu--){const qu=Gl[Lu];if(!qu.isPadding()){o=qu;break}p++}else o=wf(Gl),o||(o=jt)}return{column:o,headerRowIndex:p,headerRowIndexWithoutSpan:I}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const r=this.visibleColsService.getAllCols(),i=r[t==="start"?0:r.length-1];if(!i)return;const p=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned())?.getRowType(e);if(p=="group"){const I=this.visibleColsService.getColGroupAtLevel(i,e);return{headerRowIndex:e,column:I}}return{headerRowIndex:p==null?-1:e,column:i}}},hC=class extends Rh{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(r,i,o)=>e({key:r,defaultValue:i,variableValues:o});const t=this.gos.get("localeText");return(r,i,o)=>{let p=t&&t[r];if(p&&o&&o.length){let I=0;for(;!(I>=o.length||p.indexOf("${variable}")===-1);)p=p.replace("${variable}",o[I++])}return p??i}}},p5=class extends Rh{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new f(this.getFrameworkOverrides())}addEventListener(e,t){const r=this.frameworkEventWrappingService.wrap(e,t),i=Yd(this.gos)&&!ix.has(e),o=i?this.asyncEventListeners:this.syncEventListeners;o.has(e)||o.set(e,new Set),o.get(e).add(r),this.eventService.addEventListener(e,r,i)}removeEventListener(e,t){const r=this.frameworkEventWrappingService.unwrap(e,t),o=!!this.asyncEventListeners.get(e)?.delete(r);o||this.syncEventListeners.get(e)?.delete(r),this.eventService.removeEventListener(e,r,o)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(Yd(this.gos)){const i=(p,I)=>{ix.has(p)&&t(p,I)},o=(p,I)=>{ix.has(p)||t(p,I)};this.globalEventListenerPairs.set(e,{syncListener:i,asyncListener:o}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(o,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:i,asyncListener:o}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(o,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((r,i)=>{r.forEach(o=>this.eventService.removeEventListener(i,o,t)),r.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(r=>this.eventService.removeGlobalListener(r,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},f5=class extends Rh{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},g5=class extends Rh{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return id(this.topRowBounds)||id(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=pd(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},pC=class extends Rh{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=$l(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=kf(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),el(t,"polite"),Od(t,"additions text"),Bd(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(_0(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},m5=class extends Rh{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e(),t();return}const r=i=>{for(;i.length;){const o=i.pop();o&&o()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),r(this.executeNextFuncs)},0),window.setTimeout(()=>{t(),r(this.executeLaterFuncs)},200)})}},v5=class extends Rh{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},y5=class extends Rh{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=Rd(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){rl("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,r){const i=e.newAgStackInstance();this.overlayWrapperComp?.showOverlay(i,t,this.isExclusive(),r),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;this.state===2?e=this.ctrlsService.get("gridHeaderCtrl")?.getHeaderHeight()||0:this.wrapperPadding!==0&&(e=0),this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},x5=class extends Rh{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return pd(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),S0(t,this.processClassesFromGridOptions(e.rowNode)),S0(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],r=p=>{typeof p=="string"?t.push(p):Array.isArray(p)&&p.forEach(I=>t.push(I))},i=this.gos.get("rowClass");if(i){if(typeof i=="function")return rl("rowClass should not be a function, please use getRowClass instead"),[];r(i)}const o=this.gos.getCallback("getRowClass");if(o){const p={data:e.data,node:e,rowIndex:e.rowIndex},I=o(p);r(I)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,r=>{t.push(r)},()=>{}),t}processRowClassRules(e,t,r){const i=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),i,t,r)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},w5=class extends Rh{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=A3(),this.gos.get("debug")&&ml("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,r=this.getUiBodyHeight();(t!==this.scrollY||r!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=r,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&ml(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),r=e/t;return this.maxScrollY*r}},fC=class extends Rh{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=Wg(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Wg(this.gos))}doFullSort(e,t){const r=(o,p)=>({currentPos:p,rowNode:o}),i=e.map(r);return i.sort(this.compareRowNodes.bind(this,t)),i.map(o=>o.rowNode)}compareRowNodes(e,t,r){const i=t.rowNode,o=r.rowNode;for(let p=0,I=e.length;p<I;p++){const K=e[p],jt=K.sort==="desc",Gl=this.getValue(i,K.column),Fu=this.getValue(o,K.column);let Lu;const qu=this.getComparator(K,i);if(qu?Lu=qu(Gl,Fu,i,o,jt):Lu=Cd(Gl,Fu,this.isAccentedSort),!isNaN(Lu)&&Lu!==0)return K.sort==="asc"?Lu:Lu*-1}return t.currentPos-r.currentPos}getComparator(e,t){const r=e.column,i=r.getColDef().comparator;if(i!=null)return i;if(!r.getColDef().showRowGroup)return;const o=!t.group&&r.getColDef().field;if(!o)return;const p=this.columnModel.getColDefCol(o);if(p)return p.getColDef().comparator}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if($m(this.gos,this.columnModel.isPivotActive())){const p=e.allLeafChildren?.[0];return p?this.valueService.getValue(t,p,!1,!1):void 0}const o=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());return o?e.groupData?.[o.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},nx=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let r=0;r<e.children.length;r++)this.depthFirstSearchChangedPath(e.children[r],t);t(e.rowNode)}depthFirstSearchEverything(e,t,r){if(e.childrenAfterGroup)for(let i=0;i<e.childrenAfterGroup.length;i++){const o=e.childrenAfterGroup[i];o.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[i],t,r):r&&t(o)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,r=!1){this.active&&!r?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,r=0;for(;!this.mapToItems[t.id];){const i={rowNode:t,children:null};this.mapToItems[t.id]=i,r++,t=t.parent}return r}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let r=e;for(;r;)this.nodeIdsToColumns[r.id]||(this.nodeIdsToColumns[r.id]={}),t.forEach(i=>this.nodeIdsToColumns[r.id][i.getId()]=!0),r=r.parent}linkPathItems(e,t){let r=e;for(let i=0;i<t;i++){const o=this.mapToItems[r.id],p=this.mapToItems[r.parent.id];p.children||(p.children=[]),p.children.push(o),r=r.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const r=this.createPathItems(e);this.linkPathItems(e,r),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const r=this.nodeIdsToColumns[e.id];return t.filter(o=>r[o.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const r=this.nodeIdsToColumns[e.id];return t.filter(o=>!r[o.getId()])}},gC=class extends Rh{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new nw,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){const{gos:e,rowModel:t,onRowSelected:r}=this;this.selectionCtx.init(t),this.rowSelectionMode=vm(e),this.groupSelectsChildren=ff(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{const i=ff(e),o=vm(e);(i!==this.groupSelectsChildren||o!==this.rowSelectionMode)&&(this.groupSelectsChildren=i,this.rowSelectionMode=o,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:r.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(e,t){if(!sC(t))return e;const r=this.selectionCtx.getRoot();return r?r.isSelected()??!1:!0}setNodesSelected(e){const{newValue:t,clearSelection:r,suppressFinishActions:i,rangeSelect:o,nodes:p,event:I,source:K}=e;if(p.length===0)return 0;if(p.length>1&&!this.isMultiSelect())return rl("cannot multi select unless selection mode is 'multiRow'"),0;const jt=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,Gl=p.map(Lu=>Lu.footer?Lu.sibling:Lu);if(o){if(Gl.length>1)return rl("cannot range select while selecting multiple rows"),0;const Lu=Gl[0],qu=this.overrideSelectionValue(t,K);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(Lu)){const Xd=this.selectionCtx.truncate(Lu);return qu&&this.selectRange(Xd.discard,!1,K),this.selectRange(Xd.keep,qu,K)}else if(this.selectionCtx.getRoot()!==Lu){const Zh=this.selectionCtx.extend(Lu,this.groupSelectsChildren);return qu&&this.selectRange(Zh.discard,!1,K),this.selectRange(Zh.keep,qu,K)}}}i||this.selectionCtx.setRoot(Gl[0]);let Fu=0;for(let Lu=0;Lu<Gl.length;Lu++){const qu=Gl[Lu];jt&&qu.group||qu.selectThisNode(t,I,K)&&Fu++,this.groupSelectsChildren&&qu.childrenAfterGroup?.length&&(Fu+=this.selectChildren(qu,t,jt,K))}return i||(t&&(r||!this.isMultiSelect())&&(Fu+=this.clearOtherNodes(Gl[0],K)),Fu>0&&(this.updateGroupsFromChildrenSelections(K),this.dispatchSelectionChanged(K))),Fu}selectRange(e,t,r){let i=0;return e.forEach(o=>{if(o.group&&this.groupSelectsChildren)return;o.selectThisNode(t,void 0,r)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(r),this.dispatchSelectionChanged(r)),i}selectChildren(e,t,r,i){const o=r?e.childrenAfterAggFilter:e.childrenAfterGroup;return id(o)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:r,source:i,nodes:o})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((r,i)=>{r&&e(r)&&t.set(i,r)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||!Rd(this.gos))return!1;const i=this.rowModel.getRootNode();t||(t=new nx(!0,i),t.setInactive());let o=!1;return t.forEachChangedNodeDepthFirst(p=>{if(p!==i){const I=p.calculateSelectedFromChildren();o=p.selectThisNode(I===null?!1:I,void 0,e)||o}}),o}clearOtherNodes(e,t){const r=new Map;let i=0;return this.selectedNodes.forEach(o=>{if(o&&o.id!==e.id){const p=this.selectedNodes.get(o.id);i+=p.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&o.parent&&r.set(o.parent.id,o.parent)}}),r.forEach(o=>{const p=o.calculateSelectedFromChildren();o.selectThisNode(p===null?!1:p,void 0,t)}),i}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(pd(t)&&e.id!==t.id&&t){const i=t.id;this.selectedNodes.get(i)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(!Rd(this.gos))return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const r=[];function i(o){for(let p=0,I=o.length;p<I;p++){const K=o[p];if(K.isSelected())r.push(K);else{const jt=K;jt.group&&jt.children&&i(jt.children)}}}return i(t),r}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){const t=I=>I.selectThisNode(!1,void 0,i),r=Rd(this.gos),{source:i,justFiltered:o,justCurrentPage:p}=e;if(p||o){if(!r){Ml("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(o,p).forEach(t)}else this.selectedNodes.forEach(I=>{I&&t(I)}),this.reset(i);this.selectionCtx.reset(),r&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)}getSelectedCounts(e,t){let r=0,i=0;const o=p=>{this.groupSelectsChildren&&p.group||(p.isSelected()?r++:p.selectable&&i++)};return this.getNodesToSelect(e,t).forEach(o),{selectedCount:r,notSelectedCount:i}}getSelectAllState(e,t){const{selectedCount:r,notSelectedCount:i}=this.getSelectedCounts(e,t);return r===0&&i===0?!1:r>0&&i>0?null:r>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(r=>r.selectable).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();const r=[];if(t)return this.forEachNodeOnPage(o=>{if(!o.group){r.push(o);return}if(!o.expanded){const p=I=>{r.push(I),I.childrenAfterFilter?.length&&I.childrenAfterFilter.forEach(p)};p(o);return}this.groupSelectsChildren||r.push(o)}),r;const i=this.rowModel;return e?(i.forEachNodeAfterFilter(o=>{r.push(o)}),r):(i.forEachNode(o=>{r.push(o)}),r)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),r=this.pageBoundsService.getLastRow();for(let i=t;i<=r;i++){const o=this.rowModel.getRow(i);o&&e(o)}}selectAllRowNodes(e){if(ip(this.gos)&&!am(this.gos))return rl("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source:t,justFiltered:r,justCurrentPage:i}=e,o=this.getNodesToSelect(r,i);o.forEach(p=>p.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(o[0]??null),this.selectionCtx.setEndRange(wf(o)??null),Rd(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return Ml("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const r=new Set(e),i=[];this.rowModel.forEachNode(o=>{r.has(o.id)&&i.push(o)}),this.setNodesSelected({newValue:!0,nodes:i,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!Rd(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},mC=class extends Rh{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const{gos:t}=this,r=nd(t),i=qg(t);if(!r||!i)return;const o=ff(t),p=Rd(t)&&o,I=[],K=jt=>{if(e&&!jt.group)return;if(p&&jt.group){const Fu=jt.childrenAfterGroup.some(Lu=>Lu.selectable===!0);jt.setRowSelectable(Fu,!0);return}const Gl=i?.(jt)??!0;jt.setRowSelectable(Gl,!0),!Gl&&jt.isSelected()&&I.push(jt)};if(p){const jt=this.rowModel;new nx(!1,jt.getRootNode()).forEachChangedNodeDepthFirst(K,!0,!0)}else this.rowModel.forEachNode(K);I.length&&this.selectionService.setNodesSelected({nodes:I,newValue:!1,source:"selectableChanged"}),p&&this.selectionService instanceof gC&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},vC=["asc","desc",null],yC=class extends Rh{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,r){const i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,r)}setSortForColumn(e,t,r,i){t!=="asc"&&t!=="desc"&&(t=null);const o=Wg(this.gos);let p=[e];if(o&&e.getColDef().showRowGroup){const Gl=this.funcColsService.getSourceColumnsForGroupColumn(e)?.filter(Fu=>Fu.isSortable());Gl&&(p=[e,...Gl])}p.forEach(jt=>jt.setSort(t,i));const I=(r||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),K=[];if(!I){const jt=this.clearSortBarTheseColumns(p,i);K.push(...jt)}this.updateSortIndex(e),K.push(...p),this.dispatchSortChangedEvents(i,K)}updateSortIndex(e){const t=Wg(this.gos),r=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),i=t&&r||e,o=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(K=>K.setSortIndex(null));const p=o.filter(K=>t&&K.getColDef().showRowGroup?!1:K!==i);(i.getSort()?[...p,i]:p).forEach((K,jt)=>{K.setSortIndex(jt)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getAllCols().filter(r=>!!r.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const r={type:"sortChanged",source:e};t&&(r.columns=t),this.eventService.dispatchEvent(r)}clearSortBarTheseColumns(e,t){const r=[];return this.columnModel.getAllCols().forEach(i=>{e.includes(i)||(i.getSort()&&r.push(i),i.setSort(void 0,t))}),r}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=vC,!Array.isArray(t)||t.length<=0)return rl(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;const r=t.indexOf(e.getSort()),i=r<0,o=r==t.length-1;let p;return i||o?p=t[0]:p=t[r+1],vC.indexOf(p)<0?(rl("invalid sort type ",p),null):p}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(p=>!!p.getSort());if(this.columnModel.isPivotMode()){const p=Wg(this.gos);e=e.filter(I=>{const K=!!I.getAggFunc(),jt=!I.isPrimary(),Gl=p?this.showRowGroupColsService?.getShowRowGroupCol(I.getId()):I.getColDef().showRowGroup;return K||jt||Gl})}const t=this.funcColsService.getRowGroupColumns().filter(p=>!!p.getSort()),r={};e.forEach((p,I)=>r[p.getId()]=I),e.sort((p,I)=>{const K=p.getSortIndex(),jt=I.getSortIndex();if(K!=null&&jt!=null)return K-jt;if(K==null&&jt==null){const Gl=r[p.getId()],Fu=r[I.getId()];return Gl>Fu?1:-1}else return jt==null?-1:1});const i=Wg(this.gos)&&!!t.length;i&&(e=[...new Set(e.map(p=>this.showRowGroupColsService?.getShowRowGroupCol(p.getId())??p))]);const o=new Map;return e.forEach((p,I)=>o.set(p,I)),i&&t.forEach(p=>{const I=this.showRowGroupColsService.getShowRowGroupCol(p.getId());o.set(p,o.get(I))}),o}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[r,i])=>t-i).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=Wg(this.gos),r=!!e.getColDef().showRowGroup;return t&&r}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,o=i[0].getSort();return i.every(I=>I.getSort()==o)?o:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},C5=class extends Rh{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&ml(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,wd(e.source))}}},b5="paste",S5=class extends Rh{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){Rd(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==b5&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const r=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const i=this.gos.get("aggregateOnlyChangedColumns"),o=new nx(i,this.clientSideRowModel.getRootNode());o.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(o),o.forEachChangedNodeDepthFirst(p=>{r.push(p)})}this.rowRenderer.refreshCells({rowNodes:r})}},xC=class extends Rh{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Ml("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(r){return ml("Processing of the expression failed"),ml("Expression = ",e),ml("Params = ",t),ml("Exception = ",r),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),r=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=r,r}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},wC=class extends Rh{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,r){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=r)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},CC=class extends Rh{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=dh(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=r=>this.callColumnCellValueChangedHandler(r),t=Yd(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",r=>this.isTreeData=r.currentValue)}getValueForDisplay(e,t){const r=t.leafGroup&&this.columnModel.isPivotMode(),i=t.group&&t.expanded&&!t.footer&&!r,o=this.gos.get("groupSuppressBlankHeader");if(!i||o)return this.getValue(e,t);let p=!1;const I=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof I!="function"?p=!!I:p=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});const K=i&&p;return this.getValue(e,t,!1,K)}getValue(e,t,r=!1,i=!1){if(this.initialised||this.init(),!t)return;const o=e.getColDef(),p=o.field,I=e.getColId(),K=t.data;let jt;const Gl=t.groupData&&t.groupData[I]!==void 0,Fu=!i&&t.aggData&&t.aggData[I]!==void 0,Lu=this.isSsrm&&i&&!!e.getColDef().aggFunc,qu=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(r&&o.filterValueGetter?jt=this.executeFilterValueGetter(o.filterValueGetter,K,e,t):this.isTreeData&&Fu?jt=t.aggData[I]:this.isTreeData&&o.valueGetter?jt=this.executeValueGetter(o.valueGetter,K,e,t):this.isTreeData&&p&&K?jt=Al(K,p,e.isFieldContainsDots()):Gl?jt=t.groupData[I]:Fu?jt=t.aggData[I]:o.valueGetter?jt=this.executeValueGetter(o.valueGetter,K,e,t):qu?jt=Al(K,t.field,e.isFieldContainsDots()):p&&K&&!Lu&&(jt=Al(K,p,e.isFieldContainsDots())),this.cellExpressions&&typeof jt=="string"&&jt.indexOf("=")===0){const Xd=jt.substring(1);jt=this.executeValueGetter(Xd,K,e,t)}if(jt==null){const Xd=this.getOpenedGroup(t,e);if(Xd!=null)return Xd}return jt}parseValue(e,t,r,i){const o=e.getColDef(),p=o.valueParser;if(pd(p)){const I=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:i,newValue:r,colDef:o,column:e});return typeof p=="function"?p(I):this.expressionService.evaluate(p,I)}return r}getDeleteValue(e,t){return pd(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,r,i,o=!0){let p=null,I;const K=e.getColDef();if(i?I=i:o&&(I=K.valueFormatter),I){const jt=this.gos.addGridCommonParams({value:r,node:t,data:t?t.data:null,colDef:K,column:e});typeof I=="function"?p=I(jt):p=this.expressionService.evaluate(I,jt)}else if(K.refData)return K.refData[r]||"";return p==null&&Array.isArray(r)&&(p=r.join(", ")),p}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const i=t.getColDef().showRowGroup;let o=e.parent;for(;o!=null;){if(o.rowGroupColumn&&(i===!0||i===o.rowGroupColumn.getColId()))return o.key;o=o.parent}}setValue(e,t,r,i){const o=this.columnModel.getColDefCol(t);if(!e||!o)return!1;id(e.data)&&(e.data={});const{field:p,valueSetter:I}=o.getColDef();if(id(p)&&id(I))return rl("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(o,r))return rl("Data type of the new value does not match the cell data type of the column"),!1;const K=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(o,e),newValue:r,colDef:o.getColDef(),column:o});K.newValue=r;let jt;if(pd(I)?typeof I=="function"?jt=I(K):jt=this.expressionService.evaluate(I,K):jt=this.setValueUsingField(e.data,p,r,o.isFieldContainsDots()),jt===void 0&&(jt=!0),!jt)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const Gl=this.getValue(o,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:K.column,colDef:K.colDef,data:e.data,node:e,oldValue:K.oldValue,newValue:Gl,value:Gl,source:i}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,r,i){if(!t)return!1;let o=!1;if(!i)o=e[t]===r,o||(e[t]=r);else{const p=t.split(".");let I=e;for(;p.length>0&&I;){const K=p.shift();p.length===0?(o=I[K]===r,o||(I[K]=r)):I=I[K]}}return!o}executeFilterValueGetter(e,t,r,i){const o=this.gos.addGridCommonParams({data:t,node:i,column:r,colDef:r.getColDef(),getValue:this.getValueCallback.bind(this,i)});return typeof e=="function"?e(o):this.expressionService.evaluate(e,o)}executeValueGetter(e,t,r,i){const o=r.getColId(),p=this.valueCache.getValue(i,o);if(p!==void 0)return p;const I=this.gos.addGridCommonParams({data:t,node:i,column:r,colDef:r.getColDef(),getValue:this.getValueCallback.bind(this,i)});let K;return typeof e=="function"?K=e(I):K=this.expressionService.evaluate(e,I),this.valueCache.setValue(i,o,K),K}getValueCallback(e,t){const r=this.columnModel.getColDefCol(t);return r?this.getValue(r,e):null}getKeyForNode(e,t){const r=this.getValue(e,t),i=e.getColDef().keyCreator;let o=r;if(i){const p=this.gos.addGridCommonParams({value:r,colDef:e.getColDef(),column:e,node:t,data:t.data});o=i(p)}return typeof o=="string"||o==null||(o=String(o),o==="[object Object]"&&rl("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),o}},zw=class G2{static applyGlobalGridOptions(t){if(!G2.gridOptions)return t;let r={};return Cl(r,G2.gridOptions,!0,!0),G2.mergeStrategy==="deep"?Cl(r,t,!0,!0):r={...r,...t},G2.gridOptions.context&&(r.context=G2.gridOptions.context),t.context&&(G2.mergeStrategy==="deep"&&r.context&&Cl(t.context,r.context,!0,!0),r.context=t.context),r}};zw.gridOptions=void 0,zw.mergeStrategy="shallow";var Ux=zw;function _5(e,t="shallow"){Ux.gridOptions=e,Ux.mergeStrategy=t}function E5(e){return Ux.gridOptions?.[e]}function A5(e,t,r){if(!t)return Ml("No gridOptions provided to createGrid"),{};const i=new Nw().create(e,t,o=>{const p=new u2(e);o.createBean(p)},void 0,r);if(!Object.isFrozen(t)&&!r?.frameworkOverrides){const o="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{Ml(`gridOptions.api is no longer supported. See ${o}.`)},configurable:!0})}return i}var M5=class{constructor(e,t,r){if(rl("Since v31 new Grid(...) is deprecated. Use createGrid instead: `const gridApi = createGrid(...)`. The grid api is returned from createGrid and will not be available on gridOptions."),!t){Ml("No gridOptions provided to the grid");return}this.gridOptions=t;const i=new Nw().create(e,t,o=>{const p=new u2(e);o.createBean(p).addDestroyFunc(()=>{this.destroy()})},void 0,r);this.gridOptions.api=i}destroy(){this.gridOptions&&(this.gridOptions.api?.destroy(),delete this.gridOptions.api)}},R5=1,Nw=class{create(e,t,r,i,o){const p=Ux.applyGlobalGridOptions(t),I=h5(p),K=I.gridId??String(R5++),jt=this.getRegisteredModules(o,K),Gl=this.createBeansList(I.rowModelType,jt,K),Fu=this.createProvidedBeans(e,I,o);if(!Gl){Ml("Failed to create grid.");return}const Lu={providedBeanInstances:Fu,beanClasses:Gl,gridId:K,beanInitComparator:d3,beanDestroyComparator:wx,derivedBeans:[lw]},qu=new dv(Lu);return this.registerModuleUserComponents(qu,jt),this.registerControllers(qu,jt),this.registerModuleApiFunctions(qu,jt),r(qu),qu.getBean("syncService").start(),i&&i(qu),qu.getBean("gridApi")}registerControllers(e,t){const r=e.getBean("ctrlsFactory");t.forEach(i=>{i.controllers&&i.controllers.forEach(o=>r.register(o))})}getRegisteredModules(e,t){const r=e?e.modules:null,i=c0.__getRegisteredModules(t),o=[],p={},I=(K,jt,Gl)=>{(Lu=>{p[Lu.moduleName]||(p[Lu.moduleName]=!0,o.push(Lu),c0.__register(Lu,K,Gl))})(jt),jt.dependantModules&&jt.dependantModules.forEach(Lu=>I(K,Lu,Gl))};return I(!!r?.length||!c0.__isPackageBased(),Ow,void 0),r&&r.forEach(K=>I(!0,K,t)),i&&i.forEach(K=>I(!c0.__isPackageBased(),K,void 0)),o}registerModuleUserComponents(e,t){const r=this.extractModuleEntity(t,o=>o.userComponents?o.userComponents:[]),i=e.getBean("userComponentRegistry");r.forEach(({name:o,classImp:p,params:I})=>{i.registerDefaultComponent(o,p,I)})}registerModuleApiFunctions(e,t){const r=e.getBean("apiFunctionService");t.forEach(i=>{const o=i.apiFunctions;o&&Object.keys(o).forEach(I=>{r?.addFunction(I,o[I])})})}createProvidedBeans(e,t,r){let i=r?r.frameworkOverrides:null;id(i)&&(i=new N3);const o={gridOptions:t,eGridDiv:e,globalEventListener:r?r.globalEventListener:null,globalSyncEventListener:r?r.globalSyncEventListener:null,frameworkOverrides:i};return r&&r.providedBeanInstances&&Object.assign(o,r.providedBeanInstances),o}createBeansList(e="clientSide",t,r){const i=t.filter(jt=>!jt.rowModel||jt.rowModel===e),o={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!o[e]){Ml("Could not find row model for rowModelType = ",e);return}if(!c0.__assertRegistered(o[e],`rowModelType = '${e}'`,r))return;const p=[V3,bx,dC,u5,gx,T0,H3,xx,n2,cy,w5,Ey,hC,cx,Wy,Ip,Ex,uC,px,gC,rd,ed,g5,f5,F3,xC,Gu,_y,wC,CC,lx,D2,L1,$3,i2,Sx,c3,I3,t2,yC,v5,m5,mC,S5,n3,cw,x5,fC,Cx,pw,hw,dw,C5,y5,o2,p5,pC,Ay,Iu,mx,Ud,ih,vx,yx,$h,Hl,Th,B3,dp,Fm],I=this.extractModuleEntity(i,jt=>jt.beans?jt.beans:[]);p.push(...I);const K=[];return p.forEach(jt=>{K.indexOf(jt)<0&&K.push(jt)}),K}extractModuleEntity(e,t){return[].concat(...e.map(t))}},Bw=class extends Rh{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function k5(e){e.expansionService.expandAll(!0)}function T5(e){e.expansionService.expandAll(!1)}function F5(e){const t=e.rowModelHelperService?.getClientSideRowModel(),r=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():r&&r.onRowHeightChanged()}function P5(e,t,r){const i=e.rowModelHelperService?.getServerSideRowModel();if(i){if(e.funcColsService.isRowGroupEmpty()){i.setRowCount(t,r);return}Ml("setRowCount cannot be used while using row grouping.");return}const o=e.rowModelHelperService?.getInfiniteRowModel();if(o){o.setRowCount(t,r);return}}function D5(e){return e.rowNodeBlockLoader?.getBlockState()??{}}function L5(e){return e.rowModel.isLastRowIndexKnown()}var bC={version:fl,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:k5,collapseAll:T5,onRowHeightChanged:F5}},SC={version:fl,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:P5,getCacheBlockState:D5,isLastRowIndexKnown:L5}},I5=class{wrap(e,t,r=[],i){const o=this.createWrapper(e,i);return t.forEach(p=>{this.createMethod(o,p,!0)}),r.forEach(p=>{this.createMethod(o,p,!1)}),o}createMethod(e,t,r){e.addMethod(t,this.createMethodProxy(e,t,r))}createMethodProxy(e,t,r){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(r&&rl("Framework component is missing the method "+t+"()"),null)}}},Wx=class{};Wx.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"},Wx.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"],Wx.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var _C=(e=>(e.InsideBase="insideBase",e.InsideEnd="insideEnd",e.Center="center",e.OutsideEnd="outsideEnd",e))(_C||{}),C3=typeof commonjsGlobal>"u"?{}:commonjsGlobal;C3.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement,C3.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement,C3.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement,C3.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement,C3.Node=typeof Node>"u"?{}:Node,C3.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var O5="ROOT_NODE_ID",Hw=0,z5=class{constructor(e,t,r,i,o,p){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=r,this.funcColsService=i,this.beans=p,this.selectionService=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=O5,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return Q(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){rl("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,r=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((i,o)=>this.createNode(i,this.rootNode,Hw,o)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),r&&(r.childrenAfterFilter=t.childrenAfterFilter,r.childrenAfterGroup=t.childrenAfterGroup,r.childrenAfterAggFilter=t.childrenAfterAggFilter,r.childrenAfterSort=t.childrenAfterSort,r.childrenMapped=t.childrenMapped,r.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},r=[];return this.executeRemove(e,t,r),this.executeUpdate(e,t,r),this.executeAdd(e,t),this.updateSelection(r,"rowDataChanged"),t}updateRowOrderFromRowData(e){const t=this.rootNode.allLeafChildren,r=t?.length??0,i=new Map;let o=-1,p=-1;for(let I=0;I<r;++I){const K=t[I],jt=K.data;jt!==e[I]&&(p<0&&(o=I),p=I,i.set(jt,K))}if(o<0)return!1;for(let I=o;I<=p;++I){const K=i.get(e[I]);K!==void 0&&(t[I]=K,K.sourceRowIndex=I)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}updateSelection(e,t){const r=e.length>0;r&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),r&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){const r=e.add;if(rh(r))return;const i=this.rootNode.allLeafChildren;let o=i.length;if(typeof e.addIndex=="number"&&(o=this.sanitizeAddIndex(e.addIndex),o>0&&this.gos.get("treeData"))){for(let jt=0;jt<i.length;jt++)if(i[jt]?.rowIndex==o-1){o=jt+1;break}}const p=r.map((K,jt)=>this.createNode(K,this.rootNode,Hw,o+jt));if(o<i.length){const K=i.slice(0,o),jt=i.slice(o,i.length),Gl=K.length+p.length;for(let Fu=0,Lu=jt.length;Fu<Lu;++Fu)jt[Fu].sourceRowIndex=Gl+Fu;this.rootNode.allLeafChildren=[...K,...p,...jt],t.rowsInserted=!0}else this.rootNode.allLeafChildren=i.concat(p);const I=this.rootNode.sibling;I&&(I.allLeafChildren=i),t.rowNodeTransaction.add=p}sanitizeAddIndex(e){const t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},r){const{remove:i}=e;if(rh(i))return;const o={};i.forEach(I=>{const K=this.lookupRowNode(I);K&&(K.isSelected()&&r.push(K),K.clearRowTopAndRowIndex(),o[K.id]=!0,delete this.allNodesMap[K.id],t.remove.push(K))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter(I=>!o[I.id])??null,this.rootNode.allLeafChildren?.forEach((I,K)=>{I.sourceRowIndex=K});const p=this.rootNode.sibling;p&&(p.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},r){const{update:i}=e;rh(i)||i.forEach(o=>{const p=this.lookupRowNode(o);p&&(p.updateData(o),!p.selectable&&p.isSelected()&&r.push(p),this.setMasterForRow(p,o,Hw,!1),t.update.push(p))})}lookupRowNode(e){const t=_d(this.gos);let r;if(t){const i=t({data:e,level:0});if(r=this.allNodesMap[i],!r)return Ml(`could not find row id=${i}, data item was not found for this id`),null}else if(r=this.rootNode.allLeafChildren?.find(i=>i.data===e),!r)return Ml("could not find data item as object was not found",e),Ml("Consider using getRowId to help the Grid find matching row data"),null;return r||null}createNode(e,t,r,i){const o=new wv(this.beans);return o.sourceRowIndex=i,o.group=!1,this.setMasterForRow(o,e,r,!0),t&&(o.parent=t),o.level=r,o.setDataAndId(e,this.nextId.toString()),this.allNodesMap[o.id]&&rl(`duplicate node id '${o.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[o.id]=o,this.nextId++,o}setMasterForRow(e,t,r,i){if(this.gos.get("treeData"))e.setMaster(!1),i&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const I=this.gos.get("isRowMaster");I?e.setMaster(I(t)):e.setMaster(!0)}else e.setMaster(!1);if(i){const I=this.funcColsService.getRowGroupColumns(),K=I?I.length:0,jt=r+K;e.expanded=e.master?this.isExpanded(jt):!1}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},N5=class extends Rh{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=$l(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),r=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:r,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new wv(this.beans),this.nodeManager=new z5(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),r=new Set(["excludeChildrenWhenTreeDataFiltering"]),i=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),o=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),p=new Set(["postSortRows","groupDisplayType","accentedSort"]),I=new Set([]),K=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),jt=[...e,...t,...r,...i,...i,...o,...p,...I,...K];this.addManagedPropertyListeners(jt,Gl=>{const Fu=Gl.changeSet?.properties;if(!Fu)return;const Lu=qu=>Fu.some(Xd=>qu.has(Xd));if(Lu(e)){this.setRowData(this.rootNode.allLeafChildren.map(qu=>qu.data));return}if(Lu(t)){this.refreshModel({step:"group"});return}if(Lu(r)){this.refreshModel({step:"filter"});return}if(Lu(i)){this.refreshModel({step:"pivot"});return}if(Lu(o)){this.refreshModel({step:"aggregate"});return}if(Lu(p)){this.refreshModel({step:"sort"});return}if(Lu(I)){this.refreshModel({step:"filter_aggregates"});return}Lu(K)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,r,i){let o,p=!1;do{o=!1;const I=this.getRowIndexAtPixel(e),K=this.getRowIndexAtPixel(t),jt=Math.max(I,r),Gl=Math.min(K,i);for(let Fu=jt;Fu<=Gl;Fu++){const Lu=this.getRow(Fu);if(Lu.rowHeightEstimated){const qu=lh(this.gos,Lu);Lu.setRowHeight(qu.height),o=!0,p=!0}}o&&this.setRowTopAndRowIndex()}while(o);return p}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const r=new Set,i=Ih(this.gos,"normal");for(let o=0;o<this.rowsToDisplay.length;o++){const p=this.rowsToDisplay[o];if(p.id!=null&&r.add(p.id),p.rowHeight==null){const I=lh(this.gos,p,i,e);p.setRowHeight(I.height,I.estimated)}p.setRowTop(t),p.setRowIndex(o),t+=p.rowHeight}return r}clearRowTopAndRowIndex(e,t){const r=e.isActive(),i=p=>{p&&p.id!=null&&!t.has(p.id)&&p.clearRowTopAndRowIndex()},o=p=>{if(i(p),i(p.detailNode),i(p.sibling),p.hasChildren()&&p.childrenAfterGroup){const I=p.level==-1;r&&!I&&!p.expanded||p.childrenAfterGroup.forEach(o)}};o(this.rootNode)}ensureRowsAtPixel(e,t,r=0){const i=this.getRowIndexAtPixel(t),o=this.getRow(i),p=!this.gos.get("suppressAnimationFrame");if(o===e[0])return!1;const I=this.rootNode.allLeafChildren;return e.forEach(K=>{ym(I,K)}),e.forEach((K,jt)=>{p0(I,K,Math.max(i+r,0)+jt)}),e.forEach((K,jt)=>{K.sourceRowIndex=jt}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:p,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){const r=t!=null?this.getRowIndexAtPixel(t):null,i=r!=null?this.getRow(r):null;if(!i||!e||t==null){this.clearHighlightedRow();return}const o=this.getHighlightPosition(t,i),p=this.isHighlightingCurrentPosition(e,i,o),I=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==i;(p||I)&&(this.clearHighlightedRow(),p)||(i.setHighlighted(o),this.lastHighlightedRow=i)}getHighlightPosition(e,t){if(!t){const o=this.getRowIndexAtPixel(e);if(t=this.getRow(o||0),!t)return 1}const{rowTop:r,rowHeight:i}=t;return e-r<i/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,r){if(e===t)return!0;const i=r===0?-1:1;return this.getRow(t.rowIndex+i)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter,r=this.rootNode.sibling?1:0;return(t?t.length:0)+r}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let r=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;r-=1}const i=this.rowsToDisplay[this.rowsToDisplay.length-1],o=r>=this.rootNode.childrenAfterSort.length;if(i.footer&&o)return i.rowIndex;let p=this.rootNode.childrenAfterSort[r];if(this.gos.get("groupHideOpenParents"))for(;p.expanded&&p.childrenAfterSort&&p.childrenAfterSort.length>0;)p=p.childrenAfterSort[0];return p.rowIndex}getRowBounds(e){if(id(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=fg(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=fg(this.gos),i=e.columns.length===0||e.columns.some(o=>o.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=fg(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=rh(e),r=new nx(!1,this.rootNode);return t&&r.setInactive(),r}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(i=>i.add!=null&&i.add.length>0||i.remove!=null&&i.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group";const r={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(pd(e)&&(t=r[e]),id(t)){Ml(`invalid step ${e}, available steps are ${Object.keys(r).join(", ")}`);return}const i=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const r=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,r,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(r);case"pivot":this.doPivot(r);case"aggregate":this.doAggregate(r);case"filter_aggregates":this.doFilterAggregates(r);case"sort":this.doSort(t.rowNodeTransactions,r);case"map":this.doRowsToDisplay()}const i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(r,i),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){const e=id(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return id(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return pd(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let r=!1,i=!1;const o=[],p=ff(this.gos);return this.forEachNodeAfterFilterAndSort(I=>{if(i)return;if(r&&(I===t||I===e)&&(i=!0,I.group&&p)){o.push(...I.allLeafChildren);return}if(!r){if(I!==t&&I!==e)return;r=!0}if(!I.group||!p){o.push(I);return}}),o}setDatasource(e){Ml("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,r=this.rowsToDisplay.length-1;if(e<=0)return 0;if(wf(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let o=-1,p=-1;for(;;){const I=Math.floor((t+r)/2),K=this.rowsToDisplay[I];if(this.isRowInPixel(K,e)||(K.rowTop<e?t=I+1:K.rowTop>e&&(r=I-1),o===t&&p===r))return I;o=t,p=r}}isRowInPixel(e,t){const r=e.rowTop,i=e.rowTop+e.rowHeight;return r<=t&&i>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,r)=>e(t,r))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:r,recursionType:i,includeFooterNodes:o}=e;let{index:p}=e;const I=K=>{const jt=t[0]?.parent;if(!jt)return;const Gl=o&&$g(this.gos),Fu=Bm(this.gos),Lu=o&&Fu({node:jt});if(jt===this.rootNode){Gl===K&&(jt.createFooter(),r(jt.sibling,p++));return}Lu===K&&(jt.createFooter(),r(jt.sibling,p++))};I("top");for(let K=0;K<t.length;K++){const jt=t[K];if(r(jt,p++),jt.hasChildren()&&!jt.footer){let Gl=null;switch(i){case 0:Gl=jt.childrenAfterGroup;break;case 1:Gl=jt.childrenAfterAggFilter;break;case 2:Gl=jt.childrenAfterSort;break;case 3:Gl=jt.leafGroup?null:jt.childrenAfterSort;break}Gl&&(p=this.recursivelyWalkNodesAndCallback({nodes:[...Gl],callback:r,recursionType:i,index:p,includeFooterNodes:o}))}}return I("bottom"),p}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),r=this.columnModel.isPivotActive(),i=o=>{o&&o.forEach(p=>{const I=()=>{p.expanded=e,i(p.childrenAfterGroup)};if(t){pd(p.childrenAfterGroup)&&I();return}if(r){!p.leafGroup&&I();return}p.group&&I()})};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,r,i){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:r,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:i}),ff(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{const o=this.rootNode,p=o.sibling;o.childrenAfterGroup=o.allLeafChildren,p&&(p.childrenAfterGroup=o.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if(typeof e=="string"&&e.indexOf(wv.ID_PREFIX_ROW_GROUP)==0){let r;return this.forEachNode(i=>{i.id===e&&(r=i)}),r}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const r=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},r)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let r=!1;this.rowDataTransactionBatch?.forEach(i=>{const{rowNodeTransaction:o,rowsInserted:p}=this.nodeManager.updateRowData(i.rowDataTransaction);p&&(r=!0),t.push(o),i.callback&&e.push(i.callback.bind(null,o))}),this.commonUpdateRowData(t,r),e.length>0&&window.setTimeout(()=>{e.forEach(i=>i())},0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();const{rowNodeTransaction:t,rowsInserted:r}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],r),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;const r=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:r})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const r=t.detailNode;r&&r.setRowHeight(r.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}};function B5(e){e.expansionService.onGroupExpandedOrCollapsed()}function H5(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)}function G5(e){return e.rowModelHelperService?.getClientSideRowModel()?.isEmpty()??!0}function V5(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)}function j5(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)}function U5(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)}function W5(e){if(e.columnModel.isAutoRowHeightActive()){rl("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()}function $5(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t))}function q5(e,t,r){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,r))}function Y5(e){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions())}function K5(e){return e.selectionService.getBestCostNodeSelection()}var Z5=class extends Rh{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){const t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const r=(i,o)=>{i.hasChildren()&&e&&!o?i.childrenAfterFilter=i.childrenAfterGroup.filter(p=>{const I=p.childrenAfterFilter&&p.childrenAfterFilter.length>0,K=p.data&&this.filterManager.doesRowPassFilter({rowNode:p});return I||K}):i.childrenAfterFilter=i.childrenAfterGroup,i.sibling&&(i.sibling.childrenAfterFilter=i.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const i=(p,I)=>{if(p.childrenAfterGroup)for(let K=0;K<p.childrenAfterGroup.length;K++){const jt=p.childrenAfterGroup[K],Gl=I||this.filterManager.doesRowPassFilter({rowNode:jt});jt.childrenAfterGroup?i(p.childrenAfterGroup[K],Gl):r(jt,Gl)}r(p,I)},o=p=>i(p,!1);t.executeFromRootNode(o)}else{const i=o=>r(o,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},X5=class extends Rh{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,r=[],i=this.columnModel.isPivotMode(),o=i&&t.leafGroup,p=o?[t]:t.childrenAfterSort,I=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(I,p,r,i,0);const K=r.length>0;if(!o&&K&&I.grandTotalRow){t.createFooter();const Gl=I.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(I,t.sibling,r,0,Gl)}return r}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:Lm(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:$g(this.gos),groupTotalRow:Bm(this.gos)}}recursivelyAddToRowsToDisplay(e,t,r,i,o){if(!rh(t))for(let p=0;p<t.length;p++){const I=t[p],K=I.hasChildren(),jt=i&&!K,Gl=e.groupRemoveSingleChildren&&K&&I.childrenAfterGroup.length===1,Fu=e.groupRemoveLowestSingleChildren&&K&&I.leafGroup&&I.childrenAfterGroup.length===1,Lu=i&&I.leafGroup,qu=e.hideOpenParents&&I.expanded&&!I.master&&!Lu;if(!jt&&!qu&&!Gl&&!Fu&&this.addRowNodeToRowsToDisplay(e,I,r,o),!(i&&I.leafGroup)){if(K){const Vh=Gl||Fu;if(I.expanded||Vh){const Zh=e.groupTotalRow({node:I});Zh||I.destroyFooter();const Wh=Vh?o:o+1;Zh==="top"&&(I.createFooter(),this.addRowNodeToRowsToDisplay(e,I.sibling,r,Wh)),this.recursivelyAddToRowsToDisplay(e,I.childrenAfterSort,r,i,Wh),Zh==="bottom"&&(I.createFooter(),this.addRowNodeToRowsToDisplay(e,I.sibling,r,Wh))}}else if(I.master&&I.expanded){const Vh=this.createDetailNode(I);this.addRowNodeToRowsToDisplay(e,Vh,r,o)}}}}addRowNodeToRowsToDisplay(e,t,r,i,o){o?r.unshift(t):r.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:i)}createDetailNode(e){if(pd(e.detailNode))return e.detailNode;const t=new wv(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,pd(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},Q5=class extends Rh{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){Rd(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const r=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:i,rowsInserted:o}=r.updateRowData(t);let p=!1;this.gos.get("suppressMaintainUnsortedOrder")||(p=r.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(i,p||o)}createTransactionForRowData(e){if(!Rd(this.gos))return Ml("ImmutableService only works with ClientSideRowModel"),null;const t=_d(this.gos);if(t==null)return Ml("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const r=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),i=[],o=[],p=[];return pd(e)&&e.forEach(I=>{const K=t({data:I,level:0}),jt=r[K];jt?(jt.data!==I&&o.push(I),r[K]=void 0):p.push(I)}),W(r,(I,K)=>{K&&i.push(K.data)}),{remove:i,update:o,add:p}}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},J5=class extends Rh{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,r,i,o,p){const I=this.gos.get("groupMaintainOrder"),K=this.columnModel.getCols().some(qu=>qu.isRowGroupActive());let jt={};r&&i&&(jt=this.calculateDirtyNodes(i));const Gl=this.columnModel.isPivotMode(),Fu=this.gos.getCallback("postSortRows"),Lu=qu=>{this.pullDownGroupDataForHideOpenParents(qu.childrenAfterAggFilter,!0);const Xd=Gl&&qu.leafGroup;if(I&&K&&!qu.leafGroup&&!p){const Wh=this.funcColsService.getRowGroupColumns()?.[qu.level+1]?.getSort()===null,Rp=qu.childrenAfterAggFilter.slice(0);if(qu.childrenAfterSort&&!Wh){const Tp={};qu.childrenAfterSort.forEach((Mp,Of)=>{Tp[Mp.id]=Of}),Rp.sort((Mp,Of)=>(Tp[Mp.id]??0)-(Tp[Of.id]??0))}qu.childrenAfterSort=Rp}else!t||Xd?qu.childrenAfterSort=qu.childrenAfterAggFilter.slice(0):r?qu.childrenAfterSort=this.doDeltaSort(qu,jt,o,e):qu.childrenAfterSort=this.rowNodeSorter.doFullSort(qu.childrenAfterAggFilter,e);if(qu.sibling&&(qu.sibling.childrenAfterSort=qu.childrenAfterSort),this.updateChildIndexes(qu),Fu){const Zh={nodes:qu.childrenAfterSort};Fu(Zh)}};o&&o.forEachChangedNodeDepthFirst(Lu),this.updateGroupDataForHideOpenParents(o)}calculateDirtyNodes(e){const t={},r=i=>{i&&i.forEach(o=>t[o.id]=!0)};return e&&e.forEach(i=>{r(i.add),r(i.update),r(i.remove)}),t}doDeltaSort(e,t,r,i){const o=e.childrenAfterAggFilter,p=e.childrenAfterSort;if(!p)return this.rowNodeSorter.doFullSort(o,i);const I={},K=[];o.forEach(Lu=>{t[Lu.id]||!r.canSkip(Lu)?K.push(Lu):I[Lu.id]=!0});const jt=p.filter(Lu=>I[Lu.id]),Gl=(Lu,qu)=>({currentPos:qu,rowNode:Lu}),Fu=K.map(Gl).sort((Lu,qu)=>this.rowNodeSorter.compareRowNodes(i,Lu,qu));return this.mergeSortedArrays(i,Fu,jt.map(Gl)).map(({rowNode:Lu})=>Lu)}mergeSortedArrays(e,t,r){const i=[];let o=0,p=0;for(;o<t.length&&p<r.length;)this.rowNodeSorter.compareRowNodes(e,t[o],r[p])<0?i.push(t[o++]):i.push(r[p++]);for(;o<t.length;)i.push(t[o++]);for(;p<r.length;)i.push(r[p++]);return i}updateChildIndexes(e){if(id(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let r=0;r<t.length;r++){const i=t[r],o=r===0,p=r===e.childrenAfterSort.length-1;i.setFirstChild(o),i.setLastChild(p),i.setChildIndex(r)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return rl("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=r=>{this.pullDownGroupDataForHideOpenParents(r.childrenAfterSort,!1),r.childrenAfterSort.forEach(i=>{i.hasChildren()&&t(i)})};e&&e.executeFromRootNode(r=>t(r))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||id(e)||e.forEach(r=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach(o=>{const p=o.getColDef().showRowGroup;if(typeof p!="string"){Ml("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const I=p,K=this.columnModel.getColDefCol(I);if(K!==r.rowGroupColumn)if(t)r.setGroupValue(o.getId(),void 0);else{const Gl=this.getFirstChildOfFirstChild(r,K);Gl&&r.setGroupValue(o.getId(),Gl.key)}})})}getFirstChildOfFirstChild(e,t){let r=e;for(;r;){const i=r.parent;if(i&&r.firstChild){if(i.rowGroupColumn===t)return i}else return null;r=i}return null}},eS=class extends Rh{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),r=pd(t)&&t.length>0,i=r&&pd(e.rowNodeTransactions)&&this.gos.get("deltaSort"),o=t.some(p=>Wg(this.gos)?p.column.isPrimary()&&p.column.isRowGroupActive():!!p.column.getColDef().showRowGroup);this.sortService.sort(t,r,i,e.rowNodeTransactions,e.changedPath,o)}},Gw="32.3.9",EC={version:Gw,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[N5,Z5,eS,X5,J5,Q5]},tS={version:Gw,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[Bw],apiFunctions:{onGroupExpandedOrCollapsed:B5,refreshClientSideRowModel:H5,isRowDataEmpty:G5,forEachLeafNode:V5,forEachNodeAfterFilter:j5,forEachNodeAfterFilterAndSort:U5,resetRowHeights:W5,applyTransaction:$5,applyTransactionAsync:q5,flushAsyncTransactions:Y5,getBestCostNodeSelection:K5},dependantModules:[EC,bC]},AC={version:Gw,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[EC,tS]},MC=class extends Rh{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},RC=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:r,columnNameService:i,valueService:o,gos:p,processCellCallback:I,processHeaderCallback:K,processGroupHeaderCallback:jt,processRowGroupCallback:Gl}=e;this.columnModel=t,this.funcColsService=r,this.columnNameService=i,this.valueService=o,this.gos=p,this.processCellCallback=I,this.processHeaderCallback=K,this.processGroupHeaderCallback=jt,this.processRowGroupCallback=Gl}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,r,i,o){const I=(!this.gos.get("groupHideOpenParents")||o.footer)&&this.shouldRenderGroupSummaryCell(o,e,t)?this.createValueForGroupNode(e,o):this.valueService.getValue(e,o);return this.processCell({accumulatedRowIndex:r,rowNode:o,column:e,value:I,processCellCallback:this.processCellCallback,type:i})}shouldRenderGroupSummaryCell(e,t,r){if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){const I=e.groupData?.[t.getId()],K=this.gos.get("suppressGroupMaintainValueType");if(K&&I!=null||!K&&I!==void 0||dh(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){const jt=t.getColDef();return jt==null||jt.showRowGroup===!0||jt.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const p=$m(this.gos,this.columnModel.isPivotMode());return r===0&&p}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const r=this.gos.get("treeData"),i=this.gos.get("suppressGroupMaintainValueType"),o=jt=>{if(r||i)return jt.key;const Gl=jt.groupData?.[e.getId()];return!Gl||!jt.rowGroupColumn||jt.rowGroupColumn.getColDef().useValueFormatterForExport===!1?Gl:this.valueService.formatValue(jt.rowGroupColumn,jt,Gl)??Gl},p=t.footer,I=[o(t)];if(!Lm(this.gos))for(;t.parent;)t=t.parent,I.push(o(t));const K=I.reverse().join(" -> ");return p?`Total ${K}`:K}processCell(e){const{accumulatedRowIndex:t,rowNode:r,column:i,value:o,processCellCallback:p,type:I}=e;return p?{value:p(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:i,node:r,value:o,type:I,parseValue:K=>this.valueService.parseValue(i,r,K,this.valueService.getValue(i,r)),formatValue:K=>this.valueService.formatValue(i,r,K)??K}))??""}:i.getColDef().useValueFormatterForExport!==!1?{value:o??"",valueFormatted:this.valueService.formatValue(i,r,o)}:{value:o??""}}},kC=class{static download(e,t){const r=document.defaultView||window;if(!r){rl("There is no `window` associated with the current `document`");return}const i=document.createElement("a"),o=r.URL.createObjectURL(t);i.setAttribute("href",o),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:r})),document.body.removeChild(i),r.setTimeout(()=>{r.URL.revokeObjectURL(o)},0)}},TC=`\r
`,rS=class extends RC{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:r}=e;this.suppressQuotes=t,this.columnSeparator=r}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,TC),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((r,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(r.data.value||""),r.mergeAcross&&this.appendEmptyCells(r.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,r,i){r!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,r){t!=0&&(this.result+=this.columnSeparator);const i=this.extractRowCellValue(e,t,t,"csv",r);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(rl("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=TC),this.isFirstLine=!1}},FC=class extends MC{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){rl("Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),r=this.getData(t),i=new Blob(["\uFEFF",r],{type:"text/plain"}),o=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;kC.download(this.getFileName(o),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const r=t?Object.assign({},e):this.getMergedParams(e);return this.getData(r)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:r,funcColsService:i,valueService:o,gos:p}=this,{processCellCallback:I,processHeaderCallback:K,processGroupHeaderCallback:jt,processRowGroupCallback:Gl,suppressQuotes:Fu,columnSeparator:Lu}=e;return new rS({columnModel:t,columnNameService:r,funcColsService:i,valueService:o,gos:p,processCellCallback:I||void 0,processHeaderCallback:K||void 0,processGroupHeaderCallback:jt||void 0,processRowGroupCallback:Gl||void 0,suppressQuotes:Fu||!1,columnSeparator:Lu||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function iS(e,t){return e.csvCreator?.getDataAsCsv(t)}function nS(e,t){e.csvCreator?.exportDataAsCsv(t)}var PC=(e=>(e[e.HEADER_GROUPING=0]="HEADER_GROUPING",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY",e))(PC||{}),DC=class extends Rh{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){const{allColumns:r,columnKeys:i,skipRowGroups:o}=t,p=this.getColumnsToExport(r,o,i);return Il(this.prepareSession(p),this.prependContent(t),this.exportColumnGroups(t,p),this.exportHeaders(t,p),this.processPinnedTopRows(t,p),this.processRows(t,p),this.processPinnedBottomRows(t,p),this.appendContent(t))(e).parse()}processRow(e,t,r,i){const o=t.shouldRowBeSkipped||(()=>!1),p=this.gos.get("groupRemoveSingleChildren"),I=this.gos.get("groupRemoveLowestSingleChildren"),jt=t.rowPositions!=null||!!t.onlySelected,Gl=this.gos.get("groupHideOpenParents")&&!jt,Fu=this.columnModel.isPivotMode()?i.leafGroup:!i.group,Lu=!!i.footer,qu=I&&i.leafGroup,Xd=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&(p||qu);if(!Fu&&!Lu&&(t.skipRowGroups||Xd||Gl)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.level===-1&&!Fu&&!Lu||o(this.gos.addGridCommonParams({node:i})))return;const Wh=e.onNewBodyRow(i);if(r.forEach((Rp,Tp)=>{Wh.onColumn(Rp,Tp,i)}),t.getCustomContentBelowRow){const Rp=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:i}));Rp&&e.addCustomContent(Rp)}}appendContent(e){return t=>{const r=e.appendContent;return r&&t.addCustomContent(r),t}}prependContent(e){return t=>{const r=e.prependContent;return r&&t.addCustomContent(r),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return r=>{if(!e.skipColumnGroupHeaders){const i=new pp,o=this.visibleColsService.createGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(o,r,e.processGroupHeaderCallback)}return r}}exportHeaders(e,t){return r=>{if(!e.skipColumnHeaders){const i=r.onNewHeaderRow();t.forEach((o,p)=>{i.onColumn(o,p,void 0)})}return r}}processPinnedTopRows(e,t){return r=>{const i=this.processRow.bind(this,r,e,t);return e.rowPositions?e.rowPositions.filter(o=>o.rowPinned==="top").sort((o,p)=>o.rowIndex-p.rowIndex).map(o=>this.pinnedRowModel.getPinnedTopRow(o.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedRow("top",i),r}}processRows(e,t){return r=>{const i=this.rowModel,o=Rd(this.gos),p=dh(this.gos),I=!o&&e.onlySelected,K=this.processRow.bind(this,r,e,t),{exportedRows:jt="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(Gl=>Gl.rowPinned==null).sort((Gl,Fu)=>Gl.rowIndex-Fu.rowIndex).map(Gl=>i.getRow(Gl.rowIndex)).forEach(K);else if(this.columnModel.isPivotMode())o?i.forEachPivotNode(K,!0):p?i.forEachNodeAfterFilterAndSort(K,!0):i.forEachNode(K);else if(e.onlySelectedAllPages||I){const Gl=this.selectionService.getSelectedNodes();this.replicateSortedOrder(Gl),Gl.forEach(K)}else jt==="all"?i.forEachNode(K):o||p?i.forEachNodeAfterFilterAndSort(K,!0):i.forEachNode(K);return r}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),r=(i,o)=>i.rowIndex!=null&&o.rowIndex!=null?i.rowIndex-o.rowIndex:i.level===o.level?i.parent?.id===o.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:i,currentPos:i.rowIndex??-1},{rowNode:o,currentPos:o.rowIndex??-1}):r(i.parent,o.parent):i.level>o.level?r(i.parent,o):r(i,o.parent);e.sort(r)}processPinnedBottomRows(e,t){return r=>{const i=this.processRow.bind(this,r,e,t);return e.rowPositions?e.rowPositions.filter(o=>o.rowPinned==="bottom").sort((o,p)=>o.rowIndex-p.rowIndex).map(o=>this.pinnedRowModel.getPinnedBottomRow(o.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedRow("bottom",i),r}}getColumnsToExport(e=!1,t=!1,r){const i=this.columnModel.isPivotMode();if(r&&r.length)return this.columnModel.getColsForKeys(r);const o=this.gos.get("treeData");let p=[];return e&&!i?p=this.columnModel.getCols():p=this.visibleColsService.getAllCols(),t&&!o&&(p=p.filter(I=>!If(I)&&!Mm(I))),p}recursivelyAddHeaderGroups(e,t,r){const i=[];e.forEach(o=>{const p=o;p.getChildren&&p.getChildren().forEach(I=>i.push(I))}),e.length>0&&Yh(e[0])&&this.doAddHeaderHeader(t,e,r),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,r)}doAddHeaderHeader(e,t,r){const i=e.onNewHeaderGroupingRow();let o=0;t.forEach(p=>{const I=p;let K;r?K=r(this.gos.addGridCommonParams({columnGroup:I})):K=this.columnNameService.getDisplayNameForColumnGroup(I,"header");const jt=I.getLeafColumns().reduce((Gl,Fu,Lu,qu)=>{let Xd=wf(Gl);return Fu.getColumnGroupShow()==="open"?(!Xd||Xd[1]!=null)&&(Xd=[Lu],Gl.push(Xd)):Xd&&Xd[1]==null&&(Xd[1]=Lu-1),Lu===qu.length-1&&Xd&&Xd[1]==null&&(Xd[1]=Lu),Gl},[]);i.onColumn(I,K||"",o++,I.getLeafColumns().length-1,jt)})}},Vw="32.3.9",jw={version:Vw,moduleName:"@ag-grid-community/csv-export-core",beans:[FC,DC]},oS={version:Vw,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:iS,exportDataAsCsv:nS},dependantModules:[jw]},LC={version:Vw,moduleName:"@ag-grid-community/csv-export",dependantModules:[jw,oS]},$x=`\r
`;function IC(e,t,r){if(!t&&t!==""&&t!==0)return"";let i=t;return typeof t=="boolean"&&r&&(i=r(t)),` ${e}="${i}"`}var aS=class{static createHeader(e={}){const i=["version"];return e.version||(e.version="1.0"),e.encoding&&i.push("encoding"),e.standalone&&i.push("standalone"),`<?xml ${i.map(p=>`${p}="${e[p]}"`).join(" ")} ?>`}static createXml(e,t){let r="";e.properties&&(e.properties.prefixedAttributes&&e.properties.prefixedAttributes.forEach(o=>{Object.keys(o.map).forEach(p=>{r+=IC(o.prefix+p,o.map[p],t)})}),e.properties.rawMap&&Object.keys(e.properties.rawMap).forEach(o=>{r+=IC(o,e.properties.rawMap[o],t)}));let i="<"+e.name+r;return!e.children&&e.textNode==null?i+"/>"+$x:e.textNode!=null?i+">"+e.textNode+"</"+e.name+">"+$x:(i+=">"+$x,e.children&&e.children.forEach(o=>{i+=this.createXml(o,t)}),i+"</"+e.name+">"+$x)}},sS=async e=>{let t=0;const r=[],i=new WritableStream({write:I=>{r.push(I),t+=I.length}}),o=new ReadableStream({start:I=>{const K=new FileReader;K.onload=jt=>{jt.target?.result&&I.enqueue(jt.target.result),I.close()},K.readAsArrayBuffer(e)}}),p=new window.CompressionStream("deflate-raw");return await o.pipeThrough(p).pipeTo(i),{size:t,content:new Blob(r)}},lS=async e=>{const t=new Blob([e]),{size:r,content:i}=await sS(t),o=new Uint8Array(await i.arrayBuffer());return{size:r,content:o}},cS=e=>{let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t},uS=e=>{let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t};function fv(e,t){let r="";for(let i=0;i<t;i++)r+=String.fromCharCode(e&255),e>>>=8;return r}var OC=e=>{if(!e.length)return 0;let t=-1,r=0,i=0,o=0;for(let p=0;p<e.length;p++)r=e[p],i=(t^r)&255,o=dS[i],t=t>>>8^o;return t^-1},zC=e=>e.length?OC(typeof e=="string"?new TextEncoder().encode(e):e):0,dS=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),NC=(e,t,r,i,o,p)=>{const{content:I,path:K,created:jt}=e,Gl=cS(jt),Fu=uS(jt),Lu=zC(o),qu=p!==void 0?p:i,Xd=Lh(K),Vh=Xd!==K;let Zh="";if(Vh){const Mp=fv(1,1)+fv(zC(Xd),4)+Xd;Zh="up"+fv(Mp.length,2)+Mp}const Wh="\0"+(Vh?"\0\b":"\0\0")+fv(t?8:0,2)+fv(Gl,2)+fv(Fu,2)+fv(qu?Lu:0,4)+fv(p??i,4)+fv(i,4)+fv(Xd.length,2)+fv(Zh.length,2),Rp="PK"+Wh+Xd+Zh,Tp="PK\0"+Wh+"\0\0\0\0\0\0"+(I?"\0\0\0\0":"\0\0\0")+fv(r,4)+Xd+Zh;return{localFileHeader:Uint8Array.from(Rp,Mp=>Mp.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(Tp,Mp=>Mp.charCodeAt(0))}},BC=e=>{let t;if(typeof e=="string"){const r=atob(e.split(";base64,")[1]);t=Uint8Array.from(r,i=>i.charCodeAt(0))}else t=e;return{size:t.length,content:t}},hS=async(e,t)=>{const{content:r}=e,{size:i,content:o}=r?BC(r):{size:0,content:Uint8Array.from([])};let p,I,K=!1;if(e.type==="file"&&o&&i>0){const Fu=await lS(o);p=Fu.content,I=Fu.size,K=!0}return{...NC(e,K,t,i,o,I),content:p||o,isCompressed:K}},pS=(e,t)=>{const{content:r}=e,{content:i}=r?BC(r):{content:Uint8Array.from([])};return{...NC(e,!1,t,i.length,i,void 0),content:i,isCompressed:!1}},fS=(e,t,r)=>{const i="PK\0\0\0\0"+fv(e,2)+fv(e,2)+fv(t,4)+fv(r,4)+"\0\0";return Uint8Array.from(i,o=>o.charCodeAt(0))},Uw=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t,r=!1){this.files.push({path:e,created:new Date,content:r?t:new TextEncoder().encode(t),isBase64:r,type:"file"})}static async getZipFile(e="application/zip"){const t=await this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})}static getUncompressedZipFile(e="application/zip"){const t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,r=0;for(const Gl of e){const{localFileHeader:Fu,centralDirectoryHeader:Lu,content:qu}=Gl;t+=Fu.length+qu.length,r+=Lu.length}const i=new Uint8Array(t),o=new Uint8Array(r);let p=0,I=0;for(const Gl of e){const{localFileHeader:Fu,centralDirectoryHeader:Lu,content:qu}=Gl;i.set(Fu,p),p+=Fu.length,i.set(qu,p),p+=qu.length,o.set(Lu,I),I+=Lu.length}const K=fS(e.length,r,t),jt=new Uint8Array(i.length+o.length+K.length);return jt.set(i),jt.set(o,i.length),jt.set(K,i.length+o.length),jt}static async buildCompressedFileStream(){const e=[...this.folders,...this.files],t=[];let r=0;for(const i of e){const o=await hS(i,r),{localFileHeader:p,content:I}=o;t.push(o),r+=p.length+I.length}return this.packageFiles(t)}static buildFileStream(){const e=[...this.folders,...this.files],t=[];let r=0;for(const i of e){const o=pS(i,r),{localFileHeader:p,content:I}=o;t.push(o),r+=p.length+I.length}return this.packageFiles(t)}};Uw.folders=[],Uw.files=[];var gS=class extends D3{wireBeans(e){this.beans=e}constructor(e,t,r){super(e),this.parentCache=t,this.params=r,this.startRow=e*r.blockSize,this.endRow=this.startRow+r.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,r){pd(t)?e.setDataAndId(t,r.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(id(this.params.datasource.getRows)){rl("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,r){this.rowNodes.forEach((i,o)=>{this.startRow+o<r&&e(i,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const r=e-this.startRow;return this.rowNodes[r]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,r=new wv(this.beans);r.setRowHeight(this.params.rowHeight),r.uiLevel=0,r.setRowIndex(t),r.setRowTop(this.params.rowHeight*t),this.rowNodes.push(r)}}processServerResult(e){this.rowNodes.forEach((r,i)=>{const o=e.rowData?e.rowData[i]:void 0;!r.id&&r.alreadyRendered&&o&&(this.rowNodes[i]=new wv(this.beans),this.rowNodes[i].setRowIndex(r.rowIndex),this.rowNodes[i].setRowTop(r.rowTop),this.rowNodes[i].setRowHeight(r.rowHeight),r.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],o,this.startRow+i)});const t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},mS=2,vS=class extends Rh{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){const r=Math.floor(e/this.params.blockSize);let i=this.blocks[r];if(!i){if(t)return;i=this.createBlock(r)}return i.getRow(e)}createBlock(e){const t=this.createBean(new gS(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&ml(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(I=>I!=e),r=(I,K)=>K.getLastAccessed()-I.getLastAccessed();t.sort(r);const i=this.params.maxBlocksInCache>0,o=i?this.params.maxBlocksInCache-1:null,p=mS-1;t.forEach((I,K)=>{const jt=I.getState()==="needsLoading"&&K>=p,Gl=i?K>=o:!1;if(jt||Gl){if(this.isBlockCurrentlyDisplayed(I)||this.isBlockFocused(I))return;this.removeBlockFromCache(I)}})}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const r=e.getStartRow(),i=e.getEndRow();return t.rowIndex>=r&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),r=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,r)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const i=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<i&&(this.rowCount=i)}}setRowCount(e,t){this.rowCount=e,pd(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new t1;this.getBlocksInOrder().forEach(r=>r.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(r,i)=>r.getId()-i.getId();return Ln(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const r=[];let i=-1,o=!1;const p=new t1;let I=!1;return this.getBlocksInOrder().forEach(jt=>{if(!I){if(o&&i+1!==jt.getId()){I=!0;return}i=jt.getId(),jt.forEachNode(Gl=>{const Fu=Gl===e||Gl===t;(o||Fu)&&r.push(Gl),Fu&&(o=!o)},p,this.rowCount)}}),I||o?[]:r}},yS=class extends Rh{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=Cp(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&rl("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=Cp(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!Gd(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;_d(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:Cp(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new t1},this.infiniteCache=this.createBean(new vS(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(r=>{r.id===e&&(t=r)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),r=this.getRowCount()-1;return t>r?r:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function xS(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()}function wS(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()}function CS(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}var Ww="32.3.9",HC={version:Ww,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[yS],dependantModules:[ux]},bS={version:Ww,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[Bw],apiFunctions:{refreshInfiniteCache:xS,purgeInfiniteCache:wS,getInfiniteRowCount:CS},dependantModules:[HC,SC]},GC={version:Ww,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[HC,bS]},b3=(e,t)=>new VC(e.feature,t,e.defaults,e.css),SS=0,gv=(e,t=`customPart${++SS}`)=>new VC(e,t),VC=class eC{constructor(t,r,i={},o=[]){this.feature=t,this.variant=r,this.defaults=i,this.css=o}get id(){return this.feature?`${this.feature}/${this.variant}`:this.variant}withParams(t){const r={...this.defaults};for(const[i,o]of Object.entries(t))o!=null&&(r[i]=o);return new eC(this.feature,this.variant,r,this.css)}withAdditionalParams(t){return this.withParams(t)}withCSS(t){return new eC(this.feature,this.variant,this.defaults,this.css.concat(t))}},jC=`:where([class^=ag-]){box-sizing:border-box;outline:none;&:after,&:before,&:focus,&:focus-within{box-sizing:border-box;outline:none}&:where(button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;padding:0}&:where(button){font-weight:inherit}&::-ms-clear{display:none}}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}.ag-virtual-list-viewport .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-watermark{bottom:20px;color:#9b9b9b;opacity:.7;position:absolute;right:25px;transition:opacity 1s ease-out 3s;&:before{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDkiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyMDkgMzYiPjxwYXRoIGZpbGw9IiM5QjlCOUIiIGQ9Ik0xOTIuOTkzIDIzLjY1OHYtNy45NDZoLTEzLjU0MWwtNy45NDcgNy45NDZ6TTIwOC4yNSAzLjk1aC0xNi45NzRsLTguMDEgNy45NDdoMjQuOTg0ek0xNjMuNjIyIDMxLjYwNWw0LjA2OS00LjA2OWgxMy43MzJ2Ny45NDdoLTE3LjgwMXoiLz48cGF0aCBmaWxsPSIjOUI5QjlCIiBkPSJNMTY2LjYxIDE5Ljc4aDguNzczbDguMDEtNy45NDZIMTY2LjYxek0xNTcuMDExIDMxLjYwNWg2LjYxMWw3Ljg4My03Ljk0N2gtMTQuNDk0ek0xOTEuMjc2IDMuOTVsLTQuMDY4IDQuMDdIMTYxLjI3Vi4wNzJoMzAuMDA2ek0yMC44NCAzMC4yMDZIOC4zNzhsLTIuMTYyIDUuMzRILjc1TDEyLjI1NyA4LjU5Mmg0Ljc2OEwyOC41MyAzNS41NDZoLTUuNTN6bS0xLjcxNy00LjI2TDE0LjYwOSAxNC45NWwtNC41MTQgMTAuOTk4ek0xMDQuNDM3IDE4LjUwOWMxLjU4OS0yLjM1MiA1LjU5NC0yLjYwNyA3LjI0Ny0yLjYwN3Y0LjU3OGMtMi4wMzQgMC00LjA2OS4wNjMtNS4yNzcuOTUzLTEuMjA3Ljg5LTEuODQzIDIuMDk4LTEuODQzIDMuNTZ2MTAuNTUzaC00Ljk1OVYxNS45MDJoNC43Njh6TTExOS4zNzYgMTUuOTAyaC00Ljk1OHYxOS42NDRoNC45NTh6TTExOS4zNzYgNy4xM2gtNC45NTh2NS44NDhoNC45NTh6TTE0My45NzkgNy4xM3YyOC40MTZoLTQuNzY4bC0uMTI3LTIuOTg4YTguMyA4LjMgMCAwIDEtMi42NyAyLjQ4Yy0xLjA4MS41NzItMi40MTYuODktMy45NDIuODktMS4zMzUgMC0yLjYwNi0uMjU1LTMuNjg3LS43LTEuMTQ0LS41MDgtMi4xNjItMS4xNDQtMi45ODgtMi4wMzRhOS42IDkuNiAwIDAgMS0xLjk3MS0zLjE3OWMtLjUwOC0xLjIwNy0uNjk5LTIuNjA2LS42OTktNC4xMzJzLjI1NC0yLjkyNC42OTktNC4xOTZjLjUwOS0xLjI3MSAxLjE0NS0yLjM1MiAxLjk3MS0zLjI0MnMxLjg0NC0xLjU4OSAyLjk4OC0yLjA5OCAyLjM1Mi0uNzYzIDMuNjg3LS43NjNjMS41MjYgMCAyLjc5Ny4yNTUgMy44NzguODI3czEuOTcxIDEuMzM1IDIuNjcgMi40MTZWNy4xOTNoNC45NTl6bS0xMC40MjYgMjQuNTM4YzEuNjUzIDAgMi45MjQtLjU3MiAzLjk0MS0xLjY1M3MxLjUyNi0yLjU0MyAxLjUyNi00LjMyMy0uNTA5LTMuMTc4LTEuNTI2LTQuMzIyYy0xLjAxNy0xLjA4MS0yLjI4OC0xLjY1My0zLjk0MS0xLjY1My0xLjU5IDAtMi45MjUuNTcyLTMuODc4IDEuNjUzLTEuMDE3IDEuMDgtMS41MjYgMi41NDMtMS41MjYgNC4zMjIgMCAxLjc4LjUwOSAzLjE4IDEuNTI2IDQuMjYgMS4wMTcgMS4xNDQgMi4yODggMS43MTYgMy44NzggMS43MTZNNTcuMjAyIDIwLjM1M0g0NC45MzN2NC4yNTloNi45OTNjLS4xOSAyLjE2MS0xLjAxNyAzLjgxNC0yLjQxNiA1LjE1LTEuMzk4IDEuMjctMy4xNzggMS45MDYtNS40NjcgMS45MDYtMS4yNzEgMC0yLjQ4LS4yNTQtMy40OTYtLjY5OWE3IDcgMCAwIDEtMi43MzQtMS45N2MtLjc2My0uODI3LTEuMzM1LTEuODQ0LTEuNzgtMy4wNTJzLS42MzYtMi40OC0uNjM2LTMuOTQyLjE5LTIuNzMzLjYzNi0zLjk0MWMuMzgxLTEuMjA4IDEuMDE3LTIuMTYyIDEuNzgtMy4wNTIuNzYzLS44MjYgMS42NTMtMS40NjIgMi43MzMtMS45N2E5LjEgOS4xIDAgMCAxIDMuNTYtLjdxNC4wMDUgMCA2LjEwMyAxLjkwN2wzLjMwNi0zLjMwNWMtMi40OC0xLjkwNy01LjY1OC0yLjkyNS05LjQwOS0yLjkyNS0yLjA5NyAwLTQuMDA0LjMxOC01LjcyMSAxLjAxOC0xLjcxNi42OTktMy4xNzkgMS41ODktNC4zODYgMi43OTdBMTIuMSAxMi4xIDAgMCAwIDMxLjIgMTYuMjJjLS42MzUgMS43MTctLjk1MyAzLjYyNC0uOTUzIDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1NyAxLjAxNyAyLjAzNSAwIDMuODc4LS4zMTggNS41MzEtMS4wMTcgMS42NTMtLjcgMy4wNTItMS41OSA0LjE5Ni0yLjc5N3ExLjcxNi0xLjgxMiAyLjY3LTQuMzg3Yy42MzYtMS43MTYuOTU0LTMuNjIzLjk1NC01LjY1OHYtLjgyNmMtLjE5MS0uMTI3LS4yNTUtLjQ0NS0uMjU1LS43TTk1Ljk4MiAyMC4zNTNoLTEyLjI3djQuMjU5aDYuOTkzYy0uMTkgMi4xNjEtMS4wMTcgMy44MTQtMi40MTYgNS4xNS0xLjM5OCAxLjI3LTMuMTc4IDEuOTA2LTUuNDY3IDEuOTA2LTEuMjcxIDAtMi40OC0uMjU0LTMuNDk2LS42OTlhNyA3IDAgMCAxLTIuNzM0LTEuOTdjLS43NjMtLjgyNy0xLjMzNS0xLjg0NC0xLjc4LTMuMDUycy0uNjM2LTIuNDgtLjYzNi0zLjk0Mi4xOS0yLjczMy42MzYtMy45NDFjLjM4MS0xLjIwOCAxLjAxNy0yLjE2MiAxLjc4LTMuMDUyLjc2My0uODI2IDEuNjUzLTEuNDYyIDIuNzM0LTEuOTdhOS4xIDkuMSAwIDAgMSAzLjU2LS43cTQuMDA1IDAgNi4xMDMgMS45MDdsMy4zMDUtMy4zMDVjLTIuNDc5LTEuOTA3LTUuNjU4LTIuOTI1LTkuNDA4LTIuOTI1LTIuMDk4IDAtNC4wMDUuMzE4LTUuNzIyIDEuMDE4LTEuNzE2LjY5OS0zLjE3OCAxLjU4OS00LjM4NiAyLjc5N2ExMi4xIDEyLjEgMCAwIDAtMi43OTcgNC4zODZjLS42MzYgMS43MTctLjk1NCAzLjYyNC0uOTU0IDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1OCAxLjAxNyAyLjAzNCAwIDMuODc4LS4zMTggNS41My0xLjAxNyAxLjY1My0uNyAzLjA1Mi0xLjU5IDQuMTk2LTIuNzk3cTEuNzE4LTEuODEyIDIuNjctNC4zODdjLjYzNi0xLjcxNi45NTQtMy42MjMuOTU0LTUuNjU4di0uODI2Yy0uMTktLjEyNy0uMjU1LS40NDUtLjI1NS0uNyIvPjwvc3ZnPg==);background-repeat:no-repeat;background-size:170px 40px;content:"";display:block;height:40px;width:170px}}.ag-watermark-text{font-family:Impact,sans-serif;font-size:19px;font-weight:700;opacity:.5}.ag-ltr .ag-watermark-text{padding-left:.7rem}.ag-rtl .ag-watermark-text{padding-right:.7rem}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&.ag-layout-normal{overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}.ag-ltr .ag-floating-bottom-full-width-container,.ag-ltr .ag-floating-top-full-width-container,.ag-ltr .ag-full-width-container,.ag-ltr .ag-sticky-bottom-full-width-container,.ag-ltr .ag-sticky-top-full-width-container{left:0}.ag-rtl .ag-floating-bottom-full-width-container,.ag-rtl .ag-floating-top-full-width-container,.ag-rtl .ag-full-width-container,.ag-rtl .ag-sticky-bottom-full-width-container,.ag-rtl .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&.ag-scrollbar-invisible{bottom:0;position:absolute;&.ag-apple-scrollbar{opacity:0;transition:opacity .4s;visibility:hidden;&.ag-scrollbar-active,&.ag-scrollbar-scrolling{opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&.ag-scrollbar-invisible{left:0;right:0}}.ag-body-vertical-scroll{height:100%;&.ag-scrollbar-invisible{top:0;z-index:10}}.ag-ltr .ag-body-vertical-scroll{&.ag-scrollbar-invisible{right:0}}.ag-rtl .ag-body-vertical-scroll{&.ag-scrollbar-invisible{left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&.ag-scroller-corner{overflow-x:hidden}}.ag-ltr .ag-column-moving{.ag-cell,.ag-header-cell{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}.ag-rtl .ag-column-moving{.ag-cell,.ag-header-cell{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}.ag-row-animation .ag-row{transition:transform .4s,top .4s,opacity .2s}.ag-row-animation .ag-row.ag-after-created{transition:transform .4s,top .4s,height .4s,opacity .2s}.ag-row-no-animation .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}.ag-sparkline-wrapper{height:100%;left:0;position:absolute;top:0;width:100%}.ag-full-width-row .ag-cell-wrapper.ag-row-group{align-items:center;height:100%}.ag-cell .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{border-bottom:var(--ag-pinned-row-border);display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}.ag-pinned-left-floating-top,.ag-pinned-right-floating-top{display:inline-block;min-width:0;overflow:hidden;position:relative}.ag-floating-bottom{border-top:var(--ag-pinned-row-border);display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}.ag-pinned-left-floating-bottom,.ag-pinned-right-floating-bottom{display:inline-block;min-width:0;overflow:hidden;position:relative}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-value-slide-out{opacity:1}.ag-ltr .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}.ag-rtl .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:is(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}.ag-ltr .ag-value-slide-out-end{margin-right:10px}.ag-rtl .ag-value-slide-out-end{margin-left:10px}.ag-opacity-zero{opacity:0!important}.ag-details-row{width:100%}.ag-details-row-fixed-height{height:100%}.ag-details-grid{width:100%}.ag-details-grid-fixed-height{height:100%}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}.ag-right-aligned-header{.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}.ag-pill-select{display:flex;flex-direction:column;.ag-column-drop-list{padding:0}.ag-select{padding-top:var(--ag-spacing)}.ag-picker-field-wrapper{background-color:transparent;border:0}.ag-picker-field-display{cursor:pointer}}.ag-ltr{direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}.ag-rtl{direction:rtl;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}.ag-rtl{.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}.ag-rtl{.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{overflow:hidden;visibility:hidden;width:0;& div{position:absolute}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-group-title-bar .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-direction:row;flex-wrap:wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}.ag-ltr .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}.ag-rtl .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}.ag-group-item-alignment-stretch .ag-group-item{align-items:stretch}.ag-group-item-alignment-start .ag-group-item{align-items:flex-start}.ag-group-item-alignment-end .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}.ag-rtl{text-align:right}.ag-ltr .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}.ag-rtl .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}.ag-ltr .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-rtl .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);color:var(--ag-cell-text-color);font-size:var(--ag-data-font-size);height:var(--ag-row-height);white-space:nowrap;width:100%;--ag-internal-content-line-height:min(calc(var(--ag-row-height) - 1px),var(--ag-line-height,1000px))}:where(.ag-body-vertical-content-no-gap) .ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important;display:none}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height)}.ag-ltr .ag-cell{border-right:var(--ag-column-border)}.ag-rtl .ag-cell{border-left:var(--ag-column-border)}.ag-ltr :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}.ag-rtl :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;&.ag-row-group{align-items:flex-start}>:not(.ag-cell-value):not(.ag-group-value){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}}.ag-ltr .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}.ag-rtl .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}.ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-ltr .ag-group-contracted,.ag-ltr .ag-group-expanded,.ag-ltr .ag-row-drag,.ag-ltr .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}.ag-rtl .ag-group-contracted,.ag-rtl .ag-group-expanded,.ag-rtl .ag-row-drag,.ag-rtl .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}.ag-ltr .ag-group-child-count{margin-left:3px}.ag-rtl .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;position:absolute;width:calc(100% - 1px)}.ag-ltr .ag-row-highlight-above:after,.ag-ltr .ag-row-highlight-below:after{left:1px}.ag-rtl .ag-row-highlight-above:after,.ag-rtl .ag-row-highlight-below:after{right:1px}.ag-row-highlight-above:after{top:-1px}.ag-row-highlight-above.ag-row-first:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row-hover.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}.ag-ltr .ag-right-aligned-cell{text-align:right}.ag-rtl .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}.ag-cell:not(.ag-cell-inline-editing),.ag-full-width-row .ag-cell-wrapper.ag-row-group{-webkit-font-smoothing:subpixel-antialiased}.ag-ltr .ag-cell:not(.ag-cell-inline-editing),.ag-ltr .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-rtl .ag-cell:not(.ag-cell-inline-editing),.ag-rtl .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.5)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}.ag-ltr .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}.ag-rtl .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{opacity:1}50%{opacity:.4}to{opacity:1}}.ag-loading{align-items:center;display:flex;height:100%}.ag-ltr .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}.ag-rtl .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}.ag-ltr .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}.ag-rtl .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-details-row{padding:calc(var(--ag-spacing)*3.75)}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left):not(.ag-cell-range-single-cell){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right):not(.ag-cell-range-single-cell){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header,.ag-pinned-right-header{height:100%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}.ag-body-viewport:not(.ag-has-focus) .ag-cell-range-single-cell:not(.ag-cell-inline-editing),.ag-cell-range-selected:not(.ag-cell-focus){background-color:var(--ag-range-selection-background-color);&.ag-cell-range-chart{background-color:var(--ag-range-selection-chart-background-color)!important;&.ag-cell-range-chart-category{background-color:var(--ag-range-selection-chart-category-background-color)!important}}}.ag-cell-range-selected-1:not(.ag-cell-focus),.ag-root:not(.ag-context-menu-open) .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-selected-1:not(.ag-cell-inline-editing){background-color:var(--ag-range-selection-background-color)}.ag-cell-range-selected-2:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell-range-selected-3:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell-range-selected-4:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell.ag-cell-range-selected:not(.ag-cell-range-single-cell){&.ag-cell-range-top{border-top-color:var(--ag-range-selection-border-color);border-top-style:var(--ag-range-selection-border-style)}&.ag-cell-range-right{border-right-color:var(--ag-range-selection-border-color);border-right-style:var(--ag-range-selection-border-style)}&.ag-cell-range-bottom{border-bottom-color:var(--ag-range-selection-border-color);border-bottom-style:var(--ag-range-selection-border-style)}&.ag-cell-range-left{border-left-color:var(--ag-range-selection-border-color);border-left-style:var(--ag-range-selection-border-style)}}.ag-ltr,.ag-rtl{.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}}.ag-cell.ag-selection-fill-top,.ag-cell.ag-selection-fill-top.ag-cell-range-selected{border-top:1px dashed;border-top-color:var(--ag-range-selection-border-color)}.ag-ltr .ag-cell.ag-selection-fill-right,.ag-ltr .ag-cell.ag-selection-fill-right.ag-cell-range-selected{border-right:1px dashed var(--ag-range-selection-border-color)!important}.ag-rtl .ag-cell.ag-selection-fill-right,.ag-rtl .ag-cell.ag-selection-fill-right.ag-cell-range-selected{border-left:1px dashed var(--ag-range-selection-border-color)!important}.ag-cell.ag-selection-fill-bottom,.ag-cell.ag-selection-fill-bottom.ag-cell-range-selected{border-bottom:1px dashed;border-bottom-color:var(--ag-range-selection-border-color)}.ag-ltr .ag-cell.ag-selection-fill-left,.ag-ltr .ag-cell.ag-selection-fill-left.ag-cell-range-selected{border-left:1px dashed var(--ag-range-selection-border-color)!important}.ag-rtl .ag-cell.ag-selection-fill-left,.ag-rtl .ag-cell.ag-selection-fill-left.ag-cell-range-selected{border-right:1px dashed var(--ag-range-selection-border-color)!important}.ag-fill-handle,.ag-range-handle{background-color:var(--ag-range-selection-border-color);bottom:-1px;height:6px;position:absolute;width:6px}.ag-ltr .ag-fill-handle,.ag-ltr .ag-range-handle{right:-1px}.ag-rtl .ag-fill-handle,.ag-rtl .ag-range-handle{left:-1px}.ag-fill-handle{cursor:cell}.ag-ltr .ag-range-handle{cursor:nwse-resize}.ag-rtl .ag-range-handle{cursor:nesw-resize}.ag-cell-inline-editing{border:var(--ag-input-focus-border)!important}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input{flex:1 1 auto}.ag-floating-filter-input .ag-input-field-input[type=date]{width:1px}.ag-input-field-input{min-width:0;width:100%}.ag-column-select-header-filter-wrapper,.ag-filter-filter,.ag-filter-toolpanel-search,.ag-mini-filter{.ag-input-wrapper:before{background-color:currentColor;content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:50%;position:absolute;width:12px}}.ag-ltr .ag-column-select-header-filter-wrapper,.ag-ltr .ag-filter-filter,.ag-ltr .ag-filter-toolpanel-search,.ag-ltr .ag-mini-filter{.ag-input-wrapper:before{margin-left:var(--ag-spacing)}& input.ag-number-field-input,& input.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}.ag-rtl .ag-column-select-header-filter-wrapper,.ag-rtl .ag-filter-filter,.ag-rtl .ag-filter-toolpanel-search,.ag-rtl .ag-mini-filter{.ag-input-wrapper:before{margin-right:var(--ag-spacing)}& input.ag-number-field-input,& input.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}.ag-advanced-filter-header{align-items:center;background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);display:flex;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);position:relative}.ag-advanced-filter{align-items:center;display:flex;width:100%}.ag-advanced-filter-apply-button,.ag-advanced-filter-builder-button{line-height:normal;white-space:nowrap}.ag-ltr .ag-advanced-filter-apply-button,.ag-ltr .ag-advanced-filter-builder-button{margin-left:calc(var(--ag-spacing)*2)}.ag-rtl .ag-advanced-filter-apply-button,.ag-rtl .ag-advanced-filter-builder-button{margin-right:calc(var(--ag-spacing)*2)}.ag-advanced-filter-builder-button{align-items:center;background-color:unset;border:0;display:flex;font-size:var(--ag-font-size);font-weight:600;padding:var(--ag-spacing);&:hover:not(:disabled){background-color:var(--ag-row-hover-color)}&:not(:disabled){cursor:pointer}}.ag-ltr .ag-advanced-filter-builder-button-label{margin-left:var(--ag-spacing)}.ag-rtl .ag-advanced-filter-builder-button-label{margin-right:var(--ag-spacing)}.ag-advanced-filter-builder{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ag-advanced-filter-builder-list{flex:1;overflow:auto}.ag-advanced-filter-builder-button-panel{border-top:var(--ag-advanced-filter-builder-button-bar-border);display:flex;justify-content:flex-end;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-ltr .ag-advanced-filter-builder .ag-advanced-filter-builder-button-panel{.ag-advanced-filter-builder-apply-button,.ag-advanced-filter-builder-cancel-button{margin-left:calc(var(--ag-spacing)*2)}}.ag-rtl .ag-advanced-filter-builder .ag-advanced-filter-builder-button-panel{.ag-advanced-filter-builder-apply-button,.ag-advanced-filter-builder-cancel-button{margin-right:calc(var(--ag-spacing)*2)}}.ag-advanced-filter-builder-item-wrapper{align-items:center;display:flex;flex:1 1 auto;justify-content:space-between;overflow:hidden}.ag-ltr .ag-advanced-filter-builder-item-wrapper{padding-left:calc(var(--ag-icon-size)/2);padding-right:var(--ag-icon-size)}.ag-rtl .ag-advanced-filter-builder-item-wrapper{padding-left:var(--ag-icon-size);padding-right:calc(var(--ag-icon-size)/2)}.ag-virtual-list-viewport .ag-advanced-filter-builder-item-wrapper .ag-tab-guard{position:absolute}.ag-advanced-filter-builder-item-tree-lines>*{width:var(--ag-advanced-filter-builder-indent-size)}.ag-advanced-filter-builder-item-tree-lines .ag-advanced-filter-builder-item-tree-line-root{width:var(--ag-icon-size);&:before{height:50%;top:50%}}.ag-advanced-filter-builder-item-tree-line-horizontal,.ag-advanced-filter-builder-item-tree-line-vertical,.ag-advanced-filter-builder-item-tree-line-vertical-bottom,.ag-advanced-filter-builder-item-tree-line-vertical-top{align-items:center;display:flex;height:100%;position:relative;&:after,&:before{content:"";height:100%;position:absolute}}.ag-advanced-filter-builder-item-tree-line-horizontal:after{border-bottom:1px solid var(--ag-border-color);height:50%;top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size))}.ag-ltr .ag-advanced-filter-builder-item-tree-line-horizontal:after{left:calc(var(--ag-icon-size)/2)}.ag-rtl .ag-advanced-filter-builder-item-tree-line-horizontal:after{right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical:before{top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size)/2)}.ag-ltr .ag-advanced-filter-builder-item-tree-line-vertical:before{border-left:1px solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}.ag-rtl .ag-advanced-filter-builder-item-tree-line-vertical:before{border-right:1px solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical-top:before{height:50%;top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size)/2)}.ag-ltr .ag-advanced-filter-builder-item-tree-line-vertical-top:before{border-left:1px solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}.ag-rtl .ag-advanced-filter-builder-item-tree-line-vertical-top:before{border-right:1px solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{height:calc(50% - var(--ag-icon-size)*1.5/2);top:calc(50% + var(--ag-icon-size)*1.5/2);width:calc(var(--ag-icon-size)/2)}.ag-ltr .ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{border-left:1px solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}.ag-rtl .ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{border-right:1px solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-condition{padding-bottom:var(--ag-spacing);padding-top:var(--ag-spacing)}.ag-advanced-filter-builder-item,.ag-advanced-filter-builder-item-buttons,.ag-advanced-filter-builder-item-condition,.ag-advanced-filter-builder-item-tree-lines,.ag-advanced-filter-builder-pill,.ag-advanced-filter-builder-pill-wrapper{align-items:center;display:flex;height:100%}.ag-advanced-filter-builder-pill-wrapper{margin:0 var(--ag-spacing)}.ag-advanced-filter-builder-pill{border-radius:var(--ag-border-radius);min-height:calc(100% - var(--ag-spacing)*3);min-width:calc(var(--ag-spacing)*2);padding:var(--ag-spacing) calc(var(--ag-spacing)*2);position:relative;.ag-advanced-filter-builder-value-number{font-family:monospace;font-weight:700}.ag-advanced-filter-builder-value-empty{color:var(--ag-subtle-text-color)}}.ag-ltr .ag-advanced-filter-builder-pill{.ag-picker-field-display{margin-right:var(--ag-spacing)}}.ag-rtl .ag-advanced-filter-builder-pill{.ag-picker-field-display{margin-left:var(--ag-spacing)}}.ag-advanced-filter-builder-item-button,.ag-advanced-filter-builder-pill{&:focus-visible{shadow:var(--ag-focus-shadow)}}.ag-advanced-filter-builder-pill-display{font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-advanced-filter-builder-join-pill{background-color:var(--ag-advanced-filter-builder-join-pill-color);cursor:pointer}.ag-advanced-filter-builder-column-pill{background-color:var(--ag-advanced-filter-builder-column-pill-color);cursor:pointer}.ag-advanced-filter-builder-option-pill{background-color:var(--ag-advanced-filter-builder-option-pill-color);cursor:pointer}.ag-advanced-filter-builder-value-pill{background-color:var(--ag-advanced-filter-builder-value-pill-color);cursor:text;max-width:140px;.ag-advanced-filter-builder-pill-display{display:block}}.ag-advanced-filter-builder-item-buttons>*{margin:0 calc(var(--ag-spacing)*.5)}.ag-advanced-filter-builder-item-button{color:var(--ag-subtle-text-color);cursor:pointer;position:relative}.ag-advanced-filter-builder-item-button-disabled{cursor:default;opacity:.5}.ag-advanced-filter-builder-virtual-list-container{top:var(--ag-spacing)}.ag-advanced-filter-builder-virtual-list-item{cursor:default;display:flex;height:var(--ag-list-item-height);&:hover{background-color:var(--ag-row-hover-color);.ag-advanced-filter-builder-item-button{opacity:100%}}}.ag-advanced-filter-builder-validation .ag-advanced-filter-builder-invalid,.ag-advanced-filter-builder-virtual-list-item-highlight .ag-advanced-filter-builder-item-button:focus-visible{opacity:100%}.ag-advanced-filter-builder-invalid{color:var(--ag-invalid-color);cursor:default;margin:0 var(--ag-spacing)}.ag-cell-inline-editing{border-radius:var(--ag-border-radius);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-editor .ag-wrapper,.ag-cell-editor input,.ag-cell-wrapper{height:100%;line-height:normal;width:100%}}.ag-autocomplete-list-popup,.ag-popup-editor .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}.ag-rtl .ag-large-text-input textarea{resize:none}.ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding)}.ag-chart{display:flex;height:100%;position:relative;width:100%}.ag-chart-components-wrapper{display:flex}.ag-chart-canvas-wrapper,.ag-chart-components-wrapper{flex:1 1 auto;position:relative}.ag-chart-menu{display:flex;flex-direction:column;position:absolute;top:16px}.ag-ltr .ag-chart-menu{right:20px}.ag-rtl .ag-chart-menu{left:20px}.ag-chart-docked-container{min-width:var(--ag-chart-menu-panel-width);position:relative}.ag-chart-menu-hidden~.ag-chart-docked-container{display:none}.ag-chart-tabbed-menu{display:flex;flex-direction:column;height:100%;overflow:hidden;width:100%}.ag-chart-tabbed-menu-header{cursor:default;flex:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-chart-tabbed-menu-body{align-items:stretch;display:flex;flex:1 1 auto;overflow:hidden}.ag-chart-tab{overflow:hidden;overflow-y:auto;width:100%}.ag-chart-settings{overflow-x:hidden}.ag-chart-settings-wrapper{display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative;width:100%}.ag-chart-settings-nav-bar{align-items:center;display:flex;height:30px;padding:0 10px;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ag-chart-settings-card-selector{align-items:center;display:flex;flex:1 1 auto;height:100%;justify-content:space-around;padding:0 10px}.ag-chart-settings-card-item{background-color:var(--ag-foreground-color);border-radius:4px;cursor:pointer;height:10px;height:8px;position:relative;width:10px;width:8px;&.ag-not-selected{opacity:.2}&:before{background-color:transparent;content:" ";display:block;height:20px;left:50%;margin-left:-10px;margin-top:-10px;position:absolute;top:50%;width:20px}&.ag-selected{background-color:var(--ag-accent-color)}}.ag-chart-settings-next,.ag-chart-settings-prev{flex:none;position:relative;&:focus-within{border-radius:1px;box-shadow:var(--ag-focus-shadow)}}.ag-chart-settings-next-button,.ag-chart-settings-prev-button{cursor:pointer;height:100%;left:0;opacity:0;position:absolute;top:0;width:100%}.ag-chart-settings-mini-charts-container{flex:1 1 auto;overflow-x:hidden;overflow-y:auto;position:relative}.ag-chart-settings-mini-wrapper{display:flex;flex-direction:column;left:0;min-height:100%;overflow:hidden;position:absolute;top:0;width:100%;&.ag-animating{transition:left .3s;transition-timing-function:ease-in-out}}.ag-chart-mini-thumbnail{cursor:pointer}.ag-chart-mini-thumbnail-canvas{display:block}.ag-chart-advanced-settings-wrapper,.ag-chart-data-wrapper,.ag-chart-format-wrapper{display:flex;flex-direction:column;padding-bottom:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-chart-advanced-settings-wrapper,.ag-chart-data-wrapper{height:100%;overflow-y:auto}.ag-chart-advanced-settings{background-color:var(--ag-chrome-background-color)}.ag-chart-advanced-settings,.ag-chart-advanced-settings-wrapper{width:100%}.ag-chart-advanced-settings-wrapper{padding-bottom:0}.ag-chart-advanced-settings-section,.ag-chart-data-section,.ag-chart-format-section{display:flex;margin:0}.ag-chart-advanced-settings-section{border-bottom:1px solid var(--ag-border-color)}.ag-chart-empty-text{align-items:center;background-color:var(--ag-background-color);display:flex;height:100%;justify-content:center;top:0;width:100%}.ag-chart .ag-chart-menu{display:none}.ag-chart-menu-hidden:hover .ag-chart-menu{display:block}.ag-chart{.ag-chart-menu-wrapper{.ag-chart-menu{display:flex;flex-direction:row;gap:20px;top:8px;width:auto}}}.ag-ltr .ag-chart{.ag-chart-menu-wrapper{.ag-chart-menu{justify-content:right;right:calc(var(--ag-cell-horizontal-padding) + var(--ag-spacing) - 4px)}}}.ag-rtl .ag-chart{.ag-chart-menu-wrapper{.ag-chart-menu{justify-content:left;left:calc(var(--ag-cell-horizontal-padding) + var(--ag-spacing) - 4px)}}}.ag-charts-font-size-color{align-self:stretch;display:flex;justify-content:space-between}.ag-charts-data-group-item{position:relative}.ag-charts-data-group-item:not(:last-child){margin-bottom:var(--ag-spacing)}.ag-chart-menu{background:var(--ag-background-color);border-radius:var(--ag-border-radius)}.ag-chart-menu-icon{border-radius:var(--ag-border-radius);cursor:pointer;margin:2px 0;opacity:.5;opacity:.8;&:hover{opacity:1}}.ag-chart-menu-toolbar-button{background-color:unset;border:0;border-radius:1px;padding:0 2px}.ag-chart-mini-thumbnail{border:1px solid var(--ag-border-color);border-radius:5px;&.ag-selected{border-color:var(--ag-accent-color);border-width:2px}&:focus-visible{border-color:var(--ag-accent-color);box-shadow:var(--ag-focus-shadow)}}.ag-chart-data-column-drag-handle{margin-left:var(--ag-spacing)}.ag-charts-data-group-title-bar,.ag-charts-format-top-level-group-title-bar,.ag-charts-settings-group-title-bar{position:relative}.ag-charts-advanced-settings-top-level-group-title-bar{background-color:unset;position:relative}.ag-charts-advanced-settings-top-level-group-title-bar:focus-visible,.ag-charts-data-group-title-bar:focus-visible,.ag-charts-format-top-level-group-title-bar:focus-visible,.ag-charts-settings-group-title-bar:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-charts-data-group-container{padding:calc(var(--ag-widget-container-vertical-padding)*.5) var(--ag-widget-container-horizontal-padding);.ag-charts-data-group-item:not(.ag-charts-format-sub-level-group):not(.ag-pill-select):not(.ag-select){height:var(--ag-list-item-height)}.ag-charts-data-group-item.ag-picker-field{margin-top:var(--ag-spacing)}}.ag-charts-advanced-settings-top-level-group-container,.ag-charts-format-top-level-group-container{margin-left:calc(var(--ag-spacing)*2);padding:var(--ag-spacing)}.ag-charts-advanced-settings-top-level-group-item,.ag-charts-format-top-level-group-item{margin:var(--ag-spacing) 0}.ag-charts-format-sub-level-group-container{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-charts-settings-group-container{display:grid;grid-template-columns:60px 1fr 60px 1fr 60px;padding:var(--ag-spacing);row-gap:8px;.ag-chart-mini-thumbnail:nth-child(3n+1){grid-column:1}.ag-chart-mini-thumbnail:nth-child(3n+2){grid-column:3}.ag-chart-mini-thumbnail:nth-child(3n+3){grid-column:5}}.ag-chart-data-section,.ag-chart-format-section{display:flex;margin:0}.ag-chart-menu-panel{background-color:var(--ag-chrome-background-color)}.ag-ltr .ag-chart-menu-panel{border-left:1px solid var(--ag-border-color)}.ag-rtl .ag-chart-menu-panel{border-right:1px solid var(--ag-border-color)}.ag-chart-tabbed-menu-body{position:relative;&:after{background:linear-gradient(var(--ag-background-color),transparent);content:"";display:block;height:16px;left:0;position:absolute;right:0;top:0}}.ag-charts-data-group-title-bar,.ag-charts-format-top-level-group-title-bar,.ag-charts-settings-group-container,.ag-charts-settings-group-title-bar{border-top:none;font-weight:500;padding:0 calc(var(--ag-spacing)*1.5)}.ag-chart-settings-nav-bar{border-top:1px solid var(--ag-border-color)}.ag-charts-format-sub-level-group-title-bar{background:none;font-weight:500}.ag-chart-data-section,.ag-chart-format-section{.ag-label:not(.ag-group-title-bar){color:var(--ag-chart-menu-label-color)}.ag-label-align-top .ag-label{margin-bottom:var(--ag-widget-vertical-spacing);margin-top:calc(var(--ag-widget-vertical-spacing)*.5)}.ag-slider.ag-label-align-top .ag-label{margin-bottom:0}& label{display:inline-block}}.ag-chart-data-wrapper,.ag-chart-format-wrapper,.ag-charts-data-group-container,.ag-charts-data-group-title-bar,.ag-charts-format-sub-level-group,.ag-charts-format-sub-level-group-container,.ag-charts-format-sub-level-group-container>*,.ag-charts-format-sub-level-group-item:last-child,.ag-charts-format-sub-level-group-title-bar,.ag-charts-format-top-level-group,.ag-charts-format-top-level-group .ag-charts-format-top-level-group-container,.ag-charts-format-top-level-group-item,.ag-charts-format-top-level-group-title-bar,.ag-charts-settings-group-container,.ag-charts-settings-group-title-bar{margin:0;padding:0}.ag-charts-data-group,.ag-charts-format-top-level-group{border-top:1px solid var(--ag-border-color)}.ag-charts-data-group-title-bar,.ag-charts-format-top-level-group-title-bar,.ag-charts-settings-group-title-bar{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-charts-data-group .ag-charts-data-group-container,.ag-charts-format-top-level-group .ag-charts-format-top-level-group-container,.ag-charts-settings-group .ag-charts-settings-group-container{padding:0 var(--ag-widget-container-horizontal-padding)}.ag-charts-format-sub-level-group-title-bar{padding:var(--ag-widget-vertical-spacing) 0}.ag-charts-format-sub-level-group-container{padding-bottom:var(--ag-widget-container-vertical-padding);padding-top:var(--ag-widget-vertical-spacing)}.ag-charts-format-sub-level-group-container>*,.ag-charts-format-sub-level-no-header-group-container>*,.ag-charts-format-top-level-group-container>*{margin-bottom:var(--ag-widget-vertical-spacing)}.ag-chart-advanced-settings-section,.ag-chart-settings-mini-wrapper,.ag-charts-data-group-item{padding-bottom:var(--ag-widget-container-vertical-padding)}.ag-chart-advanced-settings-section{padding-top:var(--ag-widget-container-vertical-padding)}.ag-charts-advanced-settings-top-level-group{.ag-charts-advanced-settings-top-level-group-container,.ag-charts-advanced-settings-top-level-group-title-bar{padding:0 var(--ag-widget-container-horizontal-padding)}}.ag-charts-advanced-settings-top-level-group-container{margin:0}.ag-charts-advanced-settings-top-level-group-item{margin-bottom:0;margin-top:calc(var(--ag-widget-vertical-spacing)*2)}.ag-chart-menu{--ag-icon-size:20px;background-color:color-mix(in srgb,transparent,var(--ag-background-color) 30%);padding:4px 2px}.ag-chart-settings-card-item.ag-not-selected:hover{opacity:.35}.ag-column-drop{align-items:center;display:inline-flex;overflow:auto;position:relative;width:100%}.ag-column-drop-cell,.ag-column-drop-list{align-items:center;display:flex}.ag-column-drop-cell{gap:var(--ag-spacing);position:relative}.ag-column-drop-cell-text{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-drop-vertical{align-items:stretch;display:flex;flex-direction:column;overflow:hidden}.ag-column-drop-vertical-title-bar{align-items:center;display:flex;flex:none}.ag-column-drop-vertical-list{align-items:stretch;flex-direction:column;flex-grow:1;overflow-x:auto;position:relative;>*{flex:none}}.ag-column-drop-empty .ag-column-drop-vertical-list{overflow:hidden}.ag-column-drop-vertical-empty-message{display:block}.ag-column-drop.ag-column-drop-horizontal{overflow:hidden;white-space:nowrap}.ag-column-drop-cell-button{cursor:pointer}.ag-column-drop-wrapper{display:flex}.ag-column-drop-horizontal-half-width{width:50%!important}.ag-column-drop-cell{background:var(--ag-column-drop-cell-background-color);border:var(--ag-column-drop-cell-border);border-radius:500px;padding:calc(var(--ag-spacing)*.5);&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-ltr .ag-column-drop-cell{padding-left:calc(var(--ag-spacing)*.75)}.ag-rtl .ag-column-drop-cell{padding-right:calc(var(--ag-spacing)*.75)}.ag-column-drop-cell-button{min-width:calc(var(--ag-spacing)*4)}.ag-column-drop-cell-ghost{opacity:.5}.ag-column-drop-horizontal{gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height)}.ag-ltr .ag-column-drop-horizontal{padding-left:var(--ag-cell-horizontal-padding)}.ag-rtl .ag-column-drop-horizontal{padding-right:var(--ag-cell-horizontal-padding)}.ag-column-drop-horizontal-list{gap:var(--ag-cell-widget-spacing)}.ag-column-drop-vertical-list{padding-bottom:var(--ag-spacing);padding-left:var(--ag-spacing);padding-right:var(--ag-spacing)}.ag-column-drop-vertical-cell{margin-top:var(--ag-spacing)}.ag-ltr .ag-column-drop-vertical-icon{margin-right:var(--ag-widget-horizontal-spacing)}.ag-rtl .ag-column-drop-vertical-icon{margin-left:var(--ag-widget-horizontal-spacing)}.ag-column-drop-vertical-empty-message{bottom:0;left:0;margin-top:var(--ag-spacing);overflow:hidden;position:absolute;right:0;top:0}.ag-select-agg-func-popup{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);height:calc(var(--ag-spacing)*5*3.5);padding:0;position:absolute}.ag-select-agg-func-virtual-list-item{cursor:default;&:hover{background-color:var(--ag-selected-row-background-color)}&:focus-visible{shadow:var(--ag-focus-shadow)}}.ag-ltr .ag-select-agg-func-virtual-list-item{padding-left:calc(var(--ag-spacing)*2)}.ag-rtl .ag-select-agg-func-virtual-list-item{padding-right:calc(var(--ag-spacing)*2)}.ag-sort-indicator-container{display:contents}.ag-ltr .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}.ag-rtl .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-column-drop-horizontal{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border)}.ag-ltr .ag-column-drop-horizontal-half-width:not(:last-child){border-right:var(--ag-column-border)}.ag-rtl .ag-column-drop-horizontal-half-width:not(:last-child){border-left:var(--ag-column-border)}.ag-column-drop-cell-button{min-width:0;opacity:.75;&:hover{opacity:1}}.ag-column-drop-vertical{min-height:75px}.ag-column-drop-vertical-title-bar{padding:var(--ag-widget-container-vertical-padding) calc(var(--ag-spacing)*2) 0}.ag-column-drop-vertical-empty-message{align-items:center;border:1px dashed;border-color:var(--ag-border-color);display:flex;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);padding:calc(var(--ag-spacing)*2)}.ag-column-select{display:flex;flex:3 1 0px;flex-direction:column;overflow:hidden;position:relative}.ag-column-select-header{flex:none;height:var(--ag-header-height);padding-left:var(--ag-widget-container-horizontal-padding);padding-right:var(--ag-widget-container-horizontal-padding)}.ag-column-select-column,.ag-column-select-column-group,.ag-column-select-header{align-items:center;display:flex;gap:var(--ag-widget-horizontal-spacing);position:relative}.ag-column-select-column,.ag-column-select-column-group{height:100%}.ag-column-select-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-column-select-header-icon{border-radius:var(--ag-border-radius);cursor:pointer;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-column-select-header-filter-wrapper{flex:1 1 auto}.ag-column-select-header-filter{width:100%}.ag-column-select-list{flex:1 1 0px;overflow:hidden}.ag-ltr .ag-column-select-column,.ag-ltr .ag-column-select-column-group{padding-left:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}.ag-rtl .ag-column-select-column,.ag-rtl .ag-column-select-column-group{padding-right:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}.ag-ltr .ag-column-select-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}.ag-rtl .ag-column-select-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}.ag-column-select-column,.ag-column-select-column-group{&:not(:last-child){margin-bottom:var(--ag-widget-vertical-spacing)}}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly{opacity:.5;pointer-events:none}.ag-column-select-virtual-list-viewport{padding:calc(var(--ag-widget-container-vertical-padding)*.5) 0}.ag-column-select-virtual-list-item{padding:0 var(--ag-widget-container-horizontal-padding)}.ag-column-select-column-label{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-select-checkbox{display:flex}.ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}.ag-filter-body-wrapper{display:flex;flex-direction:column}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}.ag-floating-filter-full-body>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}}.ag-floating-filter-button{display:flex;flex:none}.ag-set-floating-filter-input input[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1}.ag-column-panel{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.ag-pivot-mode-panel{display:flex;height:var(--ag-header-height)}.ag-pivot-mode-select{align-items:center;display:flex}.ag-ltr .ag-pivot-mode-select{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-rtl .ag-pivot-mode-select{margin-right:var(--ag-widget-container-horizontal-padding)}.ag-column-panel-column-select{border-bottom:var(--ag-tool-panel-separator-border);border-top:var(--ag-tool-panel-separator-border)}:where(.ag-column-panel) .ag-column-drop-vertical{flex:1 1 0px;min-height:50px;&:where(:not(.ag-last-column-drop)){border-bottom:var(--ag-tool-panel-separator-border)}}.ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);max-width:200px;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2))}.ag-dnd-ghost,.ag-header{display:flex;overflow:hidden;white-space:nowrap}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-header-row:not(:first-child){.ag-header-cell:not(.ag-header-span-height.ag-header-span-total),.ag-header-group-cell.ag-header-group-cell-with-group{border-top:var(--ag-header-row-border)}}.ag-header-row:not(.ag-header-row-column-group){overflow:hidden}.ag-header.ag-header-allow-overflow .ag-header-row{overflow:visible}.ag-header-cell,.ag-header-group-cell{align-items:center;display:inline-flex;gap:var(--ag-cell-widget-spacing);height:100%;overflow:hidden;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:not(.ag-floating-filter),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:hover:before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&.ag-header-cell-moving:before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-filter-button,.ag-header-cell.ag-header-active .ag-header-cell-menu-button{opacity:1}.ag-header-cell-menu-button:not(.ag-header-menu-always-show){opacity:0;transition:opacity .2s}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;gap:var(--ag-spacing);padding:5px 0}.ag-header-cell-label{overflow:hidden;text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;position:sticky}.ag-ltr .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}.ag-rtl .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-group-cell .ag-header-cell-comp-wrapper{display:flex}.ag-header-cell:not(.ag-header-cell-auto-height) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-comp-wrapper{width:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-right-aligned-header .ag-header-cell-label{flex-direction:row-reverse}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-cell-sortable .ag-header-cell-label,.ag-header-expand-icon,.ag-panel-title-bar-button{cursor:pointer}.ag-advanced-filter-header-cell,.ag-header-cell,.ag-header-group-cell{&:focus-visible{box-shadow:inset var(--ag-focus-shadow)}}.ag-ltr :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-rtl :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}.ag-ltr :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}.ag-rtl :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:not(.ag-header-span-height.ag-header-group-cell-no-group):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}.ag-ltr .ag-header-cell:after,.ag-ltr .ag-header-group-cell:not(.ag-header-span-height.ag-header-group-cell-no-group):after{border-right:var(--ag-header-column-border);right:0}.ag-rtl .ag-header-cell:after,.ag-rtl .ag-header-group-cell:not(.ag-header-span-height.ag-header-group-cell-no-group):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}.ag-ltr .ag-header-highlight-before:after{left:0}.ag-ltr .ag-header-highlight-after:after,.ag-rtl .ag-header-highlight-before:after{right:0}.ag-rtl .ag-header-highlight-after:after{left:0}.ag-ltr .ag-pinned-left-header .ag-header-highlight-after:after{right:1px}.ag-rtl .ag-pinned-left-header .ag-header-highlight-after:after{left:1px}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}.ag-ltr .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}.ag-rtl .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}.ag-header-cell.ag-header-span-height .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group.ag-header-span-height .ag-header-cell-resize{display:none}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;min-width:180px;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-menu-list{cursor:default;display:table;padding:var(--ag-spacing) 0;width:100%}.ag-menu-option,.ag-menu-separator{display:table-row}.ag-menu-option-part,.ag-menu-separator-part{display:table-cell;vertical-align:middle}.ag-menu-option-text{white-space:nowrap}.ag-menu-option-custom{display:contents}.ag-compact-menu-option{display:flex;flex-wrap:nowrap;width:100%}.ag-compact-menu-option-text{flex:1 1 auto;white-space:nowrap}.ag-menu-separator{height:calc(var(--ag-spacing)*2 + 1px)}.ag-menu-separator-part:after{border-top:1px solid var(--ag-menu-separator-color);content:"";display:block}.ag-compact-menu-option-active,.ag-menu-option-active{background-color:var(--ag-row-hover-color)}.ag-compact-menu-option-part,.ag-menu-option-part{line-height:var(--ag-icon-size);padding:calc(var(--ag-spacing) + 2px) 0}.ag-compact-menu-option-disabled,.ag-menu-option-disabled{cursor:not-allowed;opacity:.5}.ag-compact-menu-option-icon,.ag-menu-option-icon{width:var(--ag-icon-size)}.ag-ltr .ag-compact-menu-option-icon,.ag-ltr .ag-menu-option-icon{padding-left:calc(var(--ag-spacing)*2)}.ag-rtl .ag-compact-menu-option-icon,.ag-rtl .ag-menu-option-icon{padding-right:calc(var(--ag-spacing)*2)}.ag-compact-menu-option-text,.ag-menu-option-text{padding-left:calc(var(--ag-spacing)*2);padding-right:calc(var(--ag-spacing)*2)}.ag-ltr .ag-compact-menu-option-shortcut,.ag-ltr .ag-menu-option-shortcut{padding-right:var(--ag-spacing)}.ag-rtl .ag-compact-menu-option-shortcut,.ag-rtl .ag-menu-option-shortcut{padding-left:var(--ag-spacing)}.ag-ltr .ag-compact-menu-option-popup-pointer,.ag-ltr .ag-menu-option-popup-pointer{padding-right:var(--ag-spacing)}.ag-rtl .ag-compact-menu-option-popup-pointer,.ag-rtl .ag-menu-option-popup-pointer{padding-left:var(--ag-spacing)}.ag-menu-column-select-wrapper{height:265px;overflow:auto;.ag-column-select{height:100%}}.ag-menu.ag-tabs{min-width:290px}.ag-filter-separator{border-top:1px solid var(--menu-separator-color)}.ag-filter-select .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}.ag-ltr .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}.ag-rtl .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-ltr .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-rtl .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-ltr .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}.ag-rtl .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}.ag-ltr .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}.ag-rtl .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-menu .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}.ag-ltr .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}.ag-rtl .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}.ag-resizer-wrapper{margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing);&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-menu-option{cursor:pointer;font-weight:500}.ag-ltr .ag-menu-option-popup-pointer .ag-icon{text-align:right}.ag-rtl .ag-menu-option-popup-pointer .ag-icon{text-align:left}.ag-panel{background-color:var(--ag-panel-background-color);display:flex;flex-direction:column;overflow:hidden;position:relative}.ag-dialog{border:var(--ag-dialog-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dialog-shadow);position:absolute}.ag-panel-title-bar{align-items:center;background-color:var(--ag-panel-title-bar-background-color);border-bottom:var(--ag-panel-title-bar-border);color:var(--ag-header-text-color);cursor:default;display:flex;flex:none;height:var(--ag-header-height);padding:var(--ag-spacing) var(--ag-cell-horizontal-padding)}.ag-ltr .ag-panel-title-bar-button{margin-left:calc(var(--ag-spacing)*2);margin-right:var(--ag-spacing)}.ag-rtl .ag-panel-title-bar-button{margin-left:var(--ag-spacing);margin-right:calc(var(--ag-spacing)*2)}.ag-panel-title-bar-title{color:var(--ag-header-text-color);flex:1 1 auto;font-weight:500}.ag-panel-title-bar-buttons{display:flex}.ag-panel-title-bar-button{cursor:pointer}.ag-panel-content-wrapper{display:flex;flex:1 1 auto;overflow:hidden;position:relative}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1;&.ag-resizer-topLeft{height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}.ag-ltr .ag-resizer{&.ag-resizer-topLeft{cursor:nwse-resize}&.ag-resizer-topRight{cursor:nesw-resize}&.ag-resizer-bottomRight{cursor:nwse-resize}&.ag-resizer-bottomLeft{cursor:nesw-resize}}.ag-rtl .ag-resizer{&.ag-resizer-topLeft{cursor:nesw-resize}&.ag-resizer-topRight{cursor:nwse-resize}&.ag-resizer-bottomRight{cursor:nesw-resize}&.ag-resizer-bottomLeft{cursor:nwse-resize}}.ag-dragging-fill-handle .ag-dialog,.ag-dragging-range-handle .ag-dialog{opacity:.7;pointer-events:none}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}.ag-select{align-items:center;display:flex;flex-direction:row;.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}&.ag-disabled{opacity:.5}}.ag-ltr .ag-select{.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}.ag-rtl .ag-select{.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-rich-select{cursor:default;height:100%}.ag-rich-select-value{align-items:center;background-color:var(--ag-input-background-color);display:flex;height:100%;padding:var(--ag-spacing);.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;&.ag-display-as-placeholder{opacity:.5}}}.ag-rich-select-list{background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);box-shadow:var(--ag-dropdown-shadow);height:auto;position:relative;width:100%;.ag-loading-text{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}}.ag-rich-select-row{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;padding:0 var(--ag-spacing);white-space:nowrap}.ag-rich-select-row-selected{background-color:var(--ag-selected-row-background-color)}.ag-rich-select-row-highlighted,.ag-rich-select-row:hover{background-image:linear-gradient(var(--ag-row-hover-color),var(--ag-row-hover-color))}.ag-rich-select-row-text-highlight{font-weight:700}.ag-rich-select-field-input{flex:1 1 auto;.ag-input-field-input{border:none!important;box-shadow:none!important;padding:0!important;text-overflow:ellipsis;&::-moz-placeholder{opacity:.8}&::placeholder{opacity:.8}}}.ag-ltr .ag-rich-select-field-input{left:var(--ag-spacing)}.ag-rtl .ag-rich-select-field-input{right:var(--ag-spacing)}.ag-popup-editor .ag-rich-select-value{height:var(--ag-row-height);min-width:200px}.ag-rich-select-virtual-list-item{cursor:default;height:var(--ag-list-item-height)}.ag-pill-container{display:flex;flex-wrap:nowrap;gap:.25rem}.ag-pill{align-items:center;background:var(--ag-select-cell-background-color);border:var(--ag-select-cell-border);border-radius:var(--ag-border-radius);display:flex;padding:0 .25rem;white-space:nowrap;&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-pill .ag-pill-button{border:none;padding:0;&:hover{color:var(--ag-accent-color);cursor:pointer}}.ag-ltr .ag-pill .ag-pill-button{margin-left:var(--ag-spacing)}.ag-rtl .ag-pill .ag-pill-button{margin-right:var(--ag-spacing)}ag-grid,ag-grid-angular{display:block}.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-tool-panel-wrapper{cursor:default;display:flex;overflow-x:hidden;overflow-y:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-side-bar-panel-width)}.ag-select-agg-func-item{align-items:center;display:flex;flex:1 1 auto;flex-direction:row;flex-wrap:nowrap;height:100%;overflow:hidden;position:relative;text-overflow:ellipsis;white-space:nowrap;>*{flex:none}}.ag-tool-panel-horizontal-resize{cursor:ew-resize;height:100%;position:absolute;top:0;width:5px;z-index:1}.ag-ltr .ag-side-bar-left .ag-tool-panel-horizontal-resize{right:-3px}.ag-ltr .ag-side-bar-right .ag-tool-panel-horizontal-resize,.ag-rtl .ag-side-bar-left .ag-tool-panel-horizontal-resize{left:-3px}.ag-rtl .ag-side-bar-right .ag-tool-panel-horizontal-resize{right:-3px}.ag-side-bar{background-color:var(--ag-side-bar-background-color);display:flex;flex-direction:row-reverse;position:relative}.ag-side-bar-left{flex-direction:row;order:-1}.ag-side-buttons{position:relative;width:calc(var(--ag-icon-size) + var(--ag-spacing)*2)}.ag-side-button{&.ag-selected{background-color:var(--ag-background-color);border-bottom:1px solid var(--ag-border-color);&:not(:first-of-type){border-top:1px solid var(--ag-border-color)}}}.ag-side-button-button{align-items:center;cursor:pointer;display:flex;flex-direction:column;gap:var(--ag-spacing);padding:calc(var(--ag-spacing)*3) 0;position:relative;white-space:nowrap;width:100%;&:focus{box-shadow:none}}.ag-side-button-button:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-side-button-label{writing-mode:vertical-lr}@media (max-resolution:1.5x){.ag-side-button-label{font-family:"Segoe UI",var(--ag-font-family)}.ag-ltr .ag-side-button-label{transform:rotate(.05deg)}.ag-rtl .ag-side-button-label{transform:rotate(-.05deg)}}.ag-ltr .ag-side-bar-left,.ag-rtl .ag-side-bar-right{border-right:var(--ag-side-panel-border);.ag-tool-panel-wrapper{border-left:var(--ag-side-panel-border)}}.ag-ltr .ag-side-bar-right,.ag-rtl .ag-side-bar-left{border-left:var(--ag-side-panel-border);.ag-tool-panel-wrapper{border-right:var(--ag-side-panel-border)}}.ag-ltr .ag-chart-menu-panel{border-left:var(--ag-side-panel-border)}.ag-rtl .ag-chart-menu-panel{border-right:var(--ag-side-panel-border)}.ag-button{border-radius:0}.ag-standard-button{-moz-appearance:none;appearance:none;-webkit-appearance:none;background-color:var(--ag-background-color);border:var(--ag-input-border);border-radius:var(--ag-border-radius);cursor:pointer;font-family:inherit;padding:var(--ag-spacing) calc(var(--ag-spacing)*2);&:hover{background-color:var(--ag-row-hover-color)}&:active{border-color:var(--ag-accent-color)}&:disabled{background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}}:where(input[class^=ag-][type=button],button[class^=ag-]):focus-visible{box-shadow:var(--ag-focus-shadow)}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-background-color);border:var(--ag-input-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow-x:hidden;overflow-y:auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;& span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}.ag-ltr .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}.ag-rtl .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}.ag-range-field{align-items:center;display:flex;.ag-input-wrapper{height:100%}}& input[class^=ag-][type=range]{-webkit-appearance:none;background:none;height:100%;overflow:visible;padding:0;width:100%;&::-webkit-slider-runnable-track{background-color:var(--ag-border-color);border-radius:1.5px;height:3px;margin:0;padding:0;width:100%}&::-moz-range-track{background-color:var(--ag-border-color);border-radius:1.5px;height:3px;margin:0;padding:0;width:100%}&::-webkit-slider-thumb{-webkit-appearance:none;background-color:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:100%;height:var(--ag-icon-size);margin:0;padding:0;transform:translateY(calc(var(--ag-icon-size)*-.5 + 1.5px));width:var(--ag-icon-size)}&::-moz-ag-range-thumb{-webkit-appearance:none;background-color:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:100%;height:var(--ag-icon-size);margin:0;padding:0;transform:translateY(calc(var(--ag-icon-size)*-.5 + 1.5px));width:var(--ag-icon-size)}&:focus{&::-webkit-slider-thumb{border-color:var(--ag-accent-color);box-shadow:var(--ag-focus-shadow)}&::-moz-ag-range-thumb{border-color:var(--ag-accent-color);box-shadow:var(--ag-focus-shadow)}}&:active{&::-webkit-slider-runnable-track{background-color:var(--ag-accent-color)}&::-moz-ag-range-track{background-color:var(--ag-accent-color)}}&:disabled{opacity:.5}}.ag-toggle-button{flex:none;min-width:unset;width:unset}.ag-toggle-button-input-wrapper{background-color:var(--ag-toggle-button-off-background-color);border:solid var(--ag-toggle-button-border-width) var(--ag-toggle-button-off-border-color);border-radius:calc(var(--ag-toggle-button-height)*.5);flex:none;height:var(--ag-toggle-button-height);max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);position:relative;& input{-webkit-appearance:none;-moz-appearance:none;appearance:none;height:100%;opacity:0;width:100%}&:before{background-color:var(--ag-toggle-button-switch-background-color);border:var(--ag-toggle-button-border-width) solid var(--ag-toggle-button-switch-border-color);border-radius:100%;content:"";display:block;height:var(--ag-toggle-button-height);pointer-events:none;position:absolute;top:calc(0px - var(--ag-toggle-button-border-width));width:var(--ag-toggle-button-height)}&.ag-checked{background-color:var(--ag-toggle-button-on-background-color);border-color:var(--ag-toggle-button-on-border-color);&:before{border-color:var(--ag-toggle-button-on-border-color)}}&:focus-within{box-shadow:var(--ag-focus-shadow)}&.ag-disabled{opacity:.5}}.ag-ltr .ag-toggle-button-input-wrapper{&:before{left:calc(0px - var(--ag-toggle-button-border-width));transition:left .1s}&.ag-checked{&:before{left:calc(100% - var(--ag-toggle-button-height) + var(--ag-toggle-button-border-width))}}}.ag-rtl .ag-toggle-button-input-wrapper{&:before{right:calc(0px - var(--ag-toggle-button-border-width));transition:right .1s}&.ag-checked{&:before{right:calc(100% - var(--ag-toggle-button-height) + var(--ag-toggle-button-border-width))}}}.ag-autocomplete{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}}.ag-autocomplete-list-popup{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-autocomplete-list{height:calc(var(--ag-row-height)*6.5);min-width:200px;position:relative;width:100%}.ag-autocomplete-virtual-list-item{cursor:default;display:flex;height:var(--ag-list-item-height);&:focus-visible:after{content:none}&:hover{background-color:var(--ag-row-hover-color)}}.ag-autocomplete-row{align-items:center;display:flex;flex:1 1 auto;overflow:hidden}.ag-autocomplete-row-label{margin:0 var(--ag-widget-container-horizontal-padding);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-autocomplete-row-selected{background-color:var(--ag-selected-row-background-color)}.ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);white-space:normal}.ag-tooltip,.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:not(.ag-tooltip-interactive),.ag-tooltip:not(.ag-tooltip-interactive){pointer-events:none}.ag-tooltip-custom.ag-tooltip-animate,.ag-tooltip.ag-tooltip-animate{transition:opacity 1s;&.ag-tooltip-hiding{opacity:0}}.ag-angle-select{align-items:center;display:flex}.ag-angle-select-wrapper{display:flex}.ag-angle-select-parent-circle{display:block;position:relative}.ag-angle-select-child-circle{position:absolute}.ag-slider-wrapper{display:flex;.ag-input-field{flex:1 1 auto}}.ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-color-panel{display:flex;flex-direction:column;text-align:center;width:100%}.ag-spectrum-color{cursor:default;flex:1 1 auto;overflow:visible;position:relative}.ag-spectrum-fill{inset:0;position:absolute}.ag-spectrum-val{cursor:pointer}.ag-spectrum-dragger{cursor:pointer;pointer-events:none;position:absolute}.ag-spectrum-alpha,.ag-spectrum-hue{cursor:default}.ag-spectrum-hue-background{background:linear-gradient(270deg,red 3%,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red);height:100%;width:100%}.ag-spectrum-alpha-background{background:linear-gradient(to right,var(--ag-internal-spectrum-alpha-color-from),var(--ag-internal-spectrum-alpha-color-to)),url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>') 0 0 /4px 4px;height:100%;width:100%}.ag-spectrum-tool{cursor:pointer;position:relative}.ag-spectrum-slider{pointer-events:none;position:absolute}.ag-spectrum-alpha .ag-spectrum-slider{background:linear-gradient(to bottom,var(--ag-internal-spectrum-alpha-color),var(--ag-internal-spectrum-alpha-color)) var(--ag-background-color)}.ag-recent-colors{display:flex;gap:6px;margin-top:10px}.ag-recent-color{cursor:pointer}.ag-angle-select[disabled]{opacity:.5;pointer-events:none}.ag-ltr .ag-angle-select-field,.ag-ltr .ag-slider-field{margin-right:calc(var(--ag-spacing)*2)}.ag-rtl .ag-angle-select-field,.ag-rtl .ag-slider-field{margin-left:calc(var(--ag-spacing)*2)}.ag-angle-select-parent-circle{background-color:var(--ag-background-color);border:1px solid;border-color:var(--ag-border-color);border-radius:12px;height:24px;width:24px}.ag-angle-select-child-circle{background-color:var(--ag-foreground-color);border-radius:3px;height:6px;left:12px;margin-left:-3px;margin-top:-4px;top:4px;width:6px}.ag-picker-field-wrapper{background-color:var(--ag-background-color);border:var(--ag-input-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:disabled{opacity:.5}&.ag-picker-has-focus,&:focus-within{border:var(--ag-input-focus-border);box-shadow:var(--ag-focus-shadow)}}.ag-picker-field-button{background-color:var(--ag-background-color)}.ag-dialog.ag-color-dialog{border-radius:5px}.ag-color-picker{.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:var(--ag-spacing)}.ag-picker-field-display{align-items:center;display:flex;flex-direction:row;min-height:var(--ag-list-item-height)}}.ag-ltr .ag-color-picker-color,.ag-ltr .ag-color-picker-value{margin-right:var(--ag-spacing)}.ag-rtl .ag-color-picker-color,.ag-rtl .ag-color-picker-value{margin-left:var(--ag-spacing)}.ag-color-panel{padding:var(--ag-spacing)}.ag-spectrum-tools{padding-bottom:0;padding-left:0;padding-right:0}.ag-spectrum-tool{height:12px}.ag-spectrum-alpha-background,.ag-spectrum-hue-background{border-radius:12px}.ag-spectrum-slider{border:3px solid #f8f8f8;border-radius:18px;height:18px;margin-top:-15px;width:18px}.ag-recent-colors{margin-bottom:2px;margin-left:var(--ag-spacing);margin-right:var(--ag-spacing)}.ag-color-input-color,.ag-color-picker-color,.ag-recent-color{border-radius:4px}.ag-recent-color{border:1px solid var(--ag-border-color)}.ag-spectrum-sat{background-image:linear-gradient(90deg,#fff,hsla(20,42%,65%,0))}.ag-spectrum-val{background-image:linear-gradient(0deg,#000,hsla(20,42%,65%,0))}.ag-spectrum-dragger{background:#000;border:3px solid #fff;border-radius:18px;box-shadow:0 0 2px 0 rgba(0,0,0,.24);height:18px;width:18px}.ag-spectrum-alpha-background,.ag-spectrum-hue-background{border-radius:2px}.ag-spectrum-tool{border-radius:2px;height:11px;margin-bottom:10px}.ag-spectrum-slider{border:2px solid #fff;border-radius:13px;box-shadow:0 1px 4px 0 rgba(0,0,0,.37);height:13px;margin-top:-12px;width:13px}.ag-recent-color,.ag-spectrum-color,.ag-spectrum-slider{&:focus-visible:not(:disabled):not([readonly]){box-shadow:var(--ag-focus-shadow)}}.ag-color-input{.ag-color-input-color{position:absolute}}.ag-ltr .ag-color-input{& input[class^=ag-][type=text].ag-input-field-input{padding-left:calc(var(--ag-icon-size) + var(--ag-spacing)*2)}.ag-color-input-color{margin-left:var(--ag-spacing)}}.ag-rtl .ag-color-input{& input[class^=ag-][type=text].ag-input-field-input{padding-right:calc(var(--ag-icon-size) + var(--ag-spacing)*2)}.ag-color-input-color{margin-right:var(--ag-spacing)}}.ag-color-input-color,.ag-color-picker-color{border:1px solid var(--ag-border-color);border-radius:2px;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-pill-select{.ag-picker-field-display{font-weight:500}.ag-picker-field-display,.ag-picker-field-icon .ag-icon{color:var(--ag-chart-menu-label-color)}}.ag-filter-toolpanel{flex:1 1 0px;min-width:0}.ag-filter-toolpanel-header{position:relative}.ag-filter-toolpanel-header,.ag-filter-toolpanel-search{align-items:center;display:flex;>*{align-items:center;display:flex}}.ag-filter-toolpanel-header{height:calc(var(--ag-spacing)*6);&:focus-visible{border-radius:var(--ag-border-radius);box-shadow:inset var(--ag-focus-shadow)}}.ag-filter-toolpanel-header,.ag-filter-toolpanel-search{padding:0 var(--ag-spacing)}.ag-filter-toolpanel-group:not(.ag-has-filter)>.ag-group-title-bar .ag-filter-toolpanel-group-instance-header-icon{display:none}.ag-filter-toolpanel-group-level-0-header{height:calc(var(--ag-spacing)*8)}.ag-filter-toolpanel-group-item{margin-bottom:calc(var(--ag-spacing)*.5);margin-top:calc(var(--ag-spacing)*.5)}.ag-filter-toolpanel-search{margin-bottom:var(--ag-spacing);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-toolpanel-search-input{flex-grow:1;height:calc(var(--ag-spacing)*4)}.ag-ltr .ag-filter-toolpanel-group-title-bar-icon{margin-right:var(--ag-spacing)}.ag-rtl .ag-filter-toolpanel-group-title-bar-icon{margin-left:var(--ag-spacing)}.ag-filter-toolpanel-expand{cursor:pointer}.ag-ltr .ag-filter-toolpanel-expand{margin-right:var(--ag-spacing)}.ag-rtl .ag-filter-toolpanel-expand{margin-left:var(--ag-spacing)}.ag-ltr .ag-filter-toolpanel-group-title-bar,.ag-ltr .ag-filter-toolpanel-instance-header{padding-left:calc(var(--ag-spacing) + var(--ag-filter-tool-panel-group-indent)*var(--ag-indentation-level))}.ag-rtl .ag-filter-toolpanel-group-title-bar,.ag-rtl .ag-filter-toolpanel-instance-header{padding-right:calc(var(--ag-spacing) + var(--ag-filter-tool-panel-group-indent)*var(--ag-indentation-level))}.ag-ltr .ag-filter-toolpanel-instance-body{margin-left:var(--ag-filter-tool-panel-group-indent)}.ag-rtl .ag-filter-toolpanel-instance-body{margin-right:var(--ag-filter-tool-panel-group-indent)}.ag-ltr .ag-filter-toolpanel-group-instance-header-icon,.ag-ltr .ag-filter-toolpanel-instance-header-icon{margin-left:var(--ag-spacing)}.ag-rtl .ag-filter-toolpanel-group-instance-header-icon,.ag-rtl .ag-filter-toolpanel-instance-header-icon{margin-right:var(--ag-spacing)}.ag-filter-toolpanel-instance-filter{background-color:var(--ag-chrome-background-color)}.ag-filter-toolpanel-group-level-0{border-top:none}.ag-filter-toolpanel-header{height:auto;padding-bottom:var(--ag-spacing);padding-top:var(--ag-spacing)}.ag-filter-toolpanel-group-item{margin:0}.ag-filter-toolpanel-header,.ag-filter-toolpanel-search{color:var(--ag-header-text-color);font-weight:500}.ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:max(var(--ag-row-height),22px);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}.ag-paging-page-size .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&:focus-visible{box-shadow:var(--ag-focus-shadow)}&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}.ag-status-bar{border-top:var(--ag-footer-row-border);display:flex;justify-content:space-between;line-height:1.5;overflow:hidden;padding-left:calc(var(--ag-spacing)*4);padding-right:calc(var(--ag-spacing)*4)}.ag-status-panel{display:inline-flex}.ag-status-name-value{white-space:nowrap}.ag-status-bar-center,.ag-status-bar-left,.ag-status-bar-right{display:inline-flex}.ag-status-bar-center{text-align:center}.ag-status-name-value{margin-left:var(--ag-spacing);margin-right:var(--ag-spacing);padding-bottom:var(--ag-widget-container-vertical-padding);padding-top:var(--ag-widget-container-vertical-padding)}.ag-status-name-value-value{font-weight:500}.ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}.ag-icon{display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}}.ag-column-select-column-readonly .ag-icon-grip,.ag-column-select-column-readonly.ag-icon-grip{opacity:.35}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-contracted .ag-icon,.ag-group-expanded .ag-icon,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons{&:hover{background-color:var(--ag-icon-button-hover-color);border-radius:1px;box-shadow:0 0 0 4px var(--ag-icon-button-hover-color)}}.ag-filter-active{--ag-icon-button-hover-color:color-mix(in srgb,transparent,var(--ag-accent-color) 28%);background-color:color-mix(in srgb,transparent,var(--ag-accent-color) 14%);border-radius:1px;box-shadow:0 0 0 4px color-mix(in srgb,transparent,var(--ag-accent-color) 14%);position:relative;&:after{background-color:var(--ag-accent-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}.ag-icon-filter{clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z")}}.ag-ltr .ag-filter-active{&:after{right:-1px}}.ag-rtl .ag-filter-active{&:after{left:-1px}}.ag-label-align-right{.ag-label{order:1}>*{flex:none}}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-label{white-space:nowrap}.ag-ltr .ag-label{margin-right:var(--ag-spacing)}.ag-rtl .ag-label{margin-left:var(--ag-spacing)}.ag-label-align-top .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}.ag-ltr .ag-label-align-right .ag-label{margin-left:var(--ag-spacing)}.ag-rtl .ag-label-align-right .ag-label{margin-right:var(--ag-spacing)}`,UC={backgroundColor:"#FFF",foregroundColor:"#181d1f",textColor:{ref:"foregroundColor"},accentColor:"#2196f3",invalidColor:"#e02525",borderColor:{ref:"foregroundColor",mix:.15},wrapperBorder:!0,rowBorder:!0,browserColorScheme:"light",headerRowBorder:{ref:"rowBorder"},footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],chromeBackgroundColor:{ref:"foregroundColor",mix:.02,onto:"backgroundColor"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"backgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:{ref:"accentColor"},rangeSelectionBackgroundColor:{ref:"accentColor",mix:.2},rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:{ref:"accentColor",mix:.5},rowHoverColor:{ref:"accentColor",mix:.08},columnHoverColor:{ref:"accentColor",mix:.05},selectedRowBackgroundColor:{ref:"accentColor",mix:.12},modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:{ref:"backgroundColor"},borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,popupShadow:{radius:16,color:"#00000026"},dropdownShadow:{radius:4,spread:1,offsetY:1,color:"#babfc766"},dragAndDropImageBackgroundColor:{ref:"backgroundColor"},dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:{ref:"foregroundColor",mix:.7},focusShadow:{spread:3,color:{ref:"accentColor",mix:.5}},sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"iconSize + widgetVerticalSpacing"},iconSize:16,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonBorderWidth:2,toggleButtonOnBorderColor:{ref:"accentColor"},toggleButtonOnBackgroundColor:{ref:"accentColor"},toggleButtonOffBorderColor:{ref:"foregroundColor",mix:.3,onto:"backgroundColor"},toggleButtonOffBackgroundColor:{ref:"foregroundColor",mix:.3,onto:"backgroundColor"},toggleButtonSwitchBorderColor:{ref:"toggleButtonOffBorderColor"},toggleButtonSwitchBackgroundColor:{ref:"backgroundColor"},menuBorder:{color:{ref:"foregroundColor",mix:.2}},menuBackgroundColor:{ref:"foregroundColor",mix:.03,onto:"backgroundColor"},menuTextColor:{ref:"foregroundColor",mix:.95,onto:"backgroundColor"},menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:{ref:"foregroundColor",mix:.8},iconButtonHoverColor:{ref:"foregroundColor",mix:.1},dialogShadow:{ref:"popupShadow"},dialogBorder:{color:{ref:"foregroundColor",mix:.2}},panelBackgroundColor:{ref:"backgroundColor"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipTextColor:{ref:"textColor"},tooltipBorder:!0,columnDropCellBackgroundColor:{ref:"foregroundColor",mix:.07},columnDropCellBorder:{color:{ref:"foregroundColor",mix:.13}},selectCellBackgroundColor:{ref:"foregroundColor",mix:.07},selectCellBorder:{color:{ref:"foregroundColor",mix:.13}},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterToolPanelGroupIndent:{ref:"spacing"},iconButtonHoverBackgroundColor:{ref:"foregroundColor",mix:.1},rowLoadingSkeletonEffectColor:"rgba(66, 66, 66, 0.2)"},_S=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),WC=e=>`--ag-${_S(e)}`,p2=e=>`var(${WC(e)})`,ES=(e,t,r)=>Math.max(t,Math.min(r,e)),AS=e=>{const t=new Map;return r=>{const i=r;return t.has(i)||t.set(i,e(r)),t.get(i)}},$C=AS(e=>{if(/Color$/.test(e))return"color";if(/Scale?$/.test(e))return"scale";if(e==="spacing"||/(Padding|Spacing|Size|Width|Height|Radius|Indent|Start|End|Top|Bottom|Horizontal|Vertical)$/.test(e))return"length";if(/Border$/.test(e))return"border";if(/BorderStyle$/.test(e))return"borderStyle";if(/Shadow$/.test(e))return"shadow";if(/Image$/.test(e))return"image";if(/Family$/.test(e))return"fontFamily";if(/Weight$/.test(e))return"fontWeight";if(/Duration$/.test(e))return"duration";if(/ColorScheme$/.test(e))return"colorScheme";throw new Error(`"${e}" is not a valid theme parameter.`)}),qx=e=>typeof e=="string"?e:typeof e=="number"?String(e):!1,$w=e=>{if(typeof e=="string")return e;if("ref"in e){const t=p2(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?"var(--ag-background-color)":"transparent"}, ${t} ${ES(e.mix*100,0,100)}%)`}return!1},MS=qx,S3=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?[a-z][a-z0-9]*\b(?![-(])/gi,r=>r[0]==="-"?r:` ${p2(r)} `)})`:"ref"in e?p2(e.ref):!1,RS=qx,kS=(e,t)=>typeof e=="string"?e:e===!0?"solid 1px var(--ag-border-color)":e===!1?t==="columnBorder"?"solid 1px transparent":"none":"ref"in e?p2(e.ref):qC(e.style??"solid")+" "+S3(e.width??1)+" "+$w(e.color??{ref:"borderColor"}),TS=e=>typeof e=="string"?e:e===!1?"none":"ref"in e?p2(e.ref):[S3(e.offsetX??0),S3(e.offsetY??0),S3(e.radius??0),S3(e.spread??0),$w(e.color??{ref:"foregroundColor"})].join(" "),qC=qx,YC=e=>typeof e=="string"?e:"googleFont"in e?YC(e.googleFont):"ref"in e?p2(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),/^[\w-]+$/.test(t)?t:JSON.stringify(t))).join(", "):!1,FS=qx,KC=e=>typeof e=="string"?e:"url"in e?`url(${JSON.stringify(e.url)})`:"svg"in e?KC({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):"ref"in e?p2(e.ref):!1,PS=(e,t)=>typeof e=="string"?e:typeof e=="number"?(e>50&&Ml(`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`),`${e}s`):"ref"in e?p2(e.ref):!1,DS={color:$w,colorScheme:MS,length:S3,scale:RS,border:kS,borderStyle:qC,shadow:TS,image:KC,fontFamily:YC,fontWeight:FS,duration:PS},ZC=(e,t)=>{const r=$C(e);return DS[r](t,e)},LS=0,XC=(e=`customTheme${++LS}`)=>new zS(e,[],{}),IS=typeof window!="object"||!window||typeof document!="object"||window.document!==document,OS=0,QC=!1,zS=class tC{constructor(t,r=[],i={}){this.id=t,this.dependencies=r,this.defaults=i,this.useCount=0}withPart(t){return typeof t=="function"&&(t=t()),new tC(this.id,this.dependencies.concat(t),this.defaults)}withParams(t){const r={...this.defaults};for(const[i,o]of Object.entries(t))o!=null&&(r[i]=o);return new tC(this.id,this.dependencies,r)}getCSS(){return[jC,...this._getCSSChunks().map(t=>t.css)].join(`

`)}startUse(t){++this.useCount,this.useCount===1&&this._install(t)}stopUse(){--this.useCount,this.useCount===0&&setTimeout(()=>{this.useCount===0&&JC(this.getCssClass(),this._installRoot)},1e3)}getCssClass(){return this._cssClass==null&&(this._cssClass=`ag-theme-${++OS}`),this._cssClass}getParams(){if(this._getParamsCache)return this._getParamsCache;const t={...UC};for(const r of this._getFlatUnits())for(const[i,o]of Object.entries(r.defaults)){const p=o??UC[i];p!=null&&(t[i]=p)}return this._getParamsCache=t}async _install({container:t,loadThemeGoogleFonts:r}){if(IS)return;QC||(QC=!0,JC("legacy",document.head),getComputedStyle(document.body).getPropertyValue("--ag-legacy-styles-loaded")&&Ml("both Theming API and the ag-grid.css are used on the same page, styling will be incorrect"));let i=t.getRootNode();i instanceof ShadowRoot||(i=document.head),this._installRoot=i;const o=[];o.push(qw({css:jC,part:"core",root:i}));for(const p of BS(this))r?HS(p):r==null&&rl(`theme uses google font ${p} but no value for loadThemeGoogleFonts was provided. Pass true to load fonts from ${tb} or false to silence this warning.`);for(const p of this._getCSSChunks())qw({css:p.css,part:p.id,scope:this.getCssClass(),root:i});return Promise.all(o)}_getFlatUnits(){if(this._getFlatUnitsCache)return this._getFlatUnitsCache;const t={};for(const i of this.dependencies)delete t[i.feature],t[i.feature]=i;const r=[...Object.values(t),this];return this._getFlatUnitsCache=r}_getCSSChunks(){if(this._getCssChunksCache)return this._getCssChunksCache;const t=[];t.push(NS(this));for(const r of this._getFlatUnits())if(r.css&&r.css.length>0){let i=`/* Part ${r.id} */`;i+=r.css.map(o=>typeof o=="function"?o():o).join(`
`)+`
`,i=`.${this.getCssClass()} {
	${i}
}`,t.push({css:i,id:r.id})}return this._getCssChunksCache=t}},NS=e=>{let t="",r="";for(const[p,I]of Object.entries(e.getParams())){const K=ZC(p,I);if(K===!1)Ml(`Invalid value for param ${p} - ${VS(I)}`);else{const jt=WC(p),Gl=jt.replace("--ag-","--ag-inherited-");t+=`	${jt}: var(${Gl}, ${K});
`,r+=`	${Gl}: var(${jt});
`}}const i=`:where(.${e.getCssClass()})`;let o=`${i} {
${t}}
`;return o+=`:has(> ${i}):not(${i}) {
${r}}
`,{css:o,id:"variables"}},BS=e=>Array.from(new Set(Object.values(e.getParams()).flat().map(t=>t?.googleFont).filter(t=>typeof t=="string"))).sort(),qw=async({root:e,part:t,scope:r,css:i})=>{let o=`:scope > style[data-ag-part="${t}"]`;r&&(o+=`[data-ag-scope="${r}"]`);let p=e.querySelector(o);if(!p){p=document.createElement("style"),p.dataset.agPart=t,r&&(p.dataset.agScope=r);const I=e.querySelectorAll(":scope > style[data-ag-part]"),K=I[I.length-1];K?K.insertAdjacentElement("afterend",p):e.firstElementChild?e.firstElementChild.insertAdjacentElement("beforebegin",p):e.appendChild(p)}if(p._agTextContent!==i)return p.textContent=i,p._agTextContent=i,GS(p)},JC=(e,t)=>{for(const r of Array.from(t.querySelectorAll(`:scope > style[data-ag-scope="${e}"]`)))r.remove()},eb=new Set,HS=async e=>{if(eb.has(e))return;eb.add(e);const t=`@import url('https://${tb}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;return qw({css:t,part:`googleFont:${e}`,root:document.head})},tb="fonts.googleapis.com",GS=e=>new Promise(t=>{const r=()=>{e.removeEventListener("load",r),t()};e.addEventListener("load",r)}),VS=e=>e==null?String(e):`${typeof e} ${e}`,jS='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);& input{-webkit-appearance:none;-moz-appearance:none;appearance:none;height:100%;opacity:0;width:100%}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&.ag-checked{background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:active,&:focus-within{box-shadow:var(--ag-focus-shadow)}&.ag-disabled{filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&.ag-checked:after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&.ag-indeterminate{background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-radio-button-input-wrapper{border-radius:100%;&.ag-checked:after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',rb=gv("checkboxStyle","default").withAdditionalParams({checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:{ref:"backgroundColor"},checkboxUncheckedBorderColor:{ref:"foregroundColor",mix:.3,onto:"backgroundColor"},checkboxCheckedBackgroundColor:{ref:"accentColor"},checkboxCheckedBorderColor:{ref:"accentColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:{ref:"backgroundColor"},checkboxIndeterminateBackgroundColor:{ref:"foregroundColor",mix:.3,onto:"backgroundColor"},checkboxIndeterminateBorderColor:{ref:"foregroundColor",mix:.3,onto:"backgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:{ref:"backgroundColor"},radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}}).withCSS(jS),Yw=gv("colorScheme","light"),US=gv("colorScheme","lightWarm").withParams({foregroundColor:"#000000de",borderColor:"#60300026",chromeBackgroundColor:"#60300005"}),ib=gv("colorScheme","lightCold").withParams({foregroundColor:"#000",backgroundColor:"#fff",chromeBackgroundColor:"#f3f8f8"}),WS=gv("colorScheme","dark").withParams({backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:{ref:"foregroundColor",mix:.05,onto:"backgroundColor"},browserColorScheme:"dark"}),$S=gv("colorScheme","darkWarm").withParams({backgroundColor:"hsl(29, 10%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:{ref:"foregroundColor",mix:.05,onto:"backgroundColor"},browserColorScheme:"dark"}),qS=gv("colorScheme","darkBlue").withParams({backgroundColor:"#1f2836",foregroundColor:"#FFF",chromeBackgroundColor:{ref:"foregroundColor",mix:.07,onto:"backgroundColor"},browserColorScheme:"dark"}),YS=`.ag-icon:before{background-color:currentColor;content:"";display:block;height:var(--ag-icon-size);-webkit-mask-image:linear-gradient(#0000,#0000);mask-image:linear-gradient(#0000,#0000);-webkit-mask-size:contain;mask-size:contain;width:var(--ag-icon-size)}.ag-icon-aggregation:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24 6H8v2l8 8-8 8v2h16v-2H11l8-8-8-8h13z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24 6H8v2l8 8-8 8v2h16v-2H11l8-8-8-8h13z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-arrows:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 11.171 2.687 16l4.828 4.829-1.414 1.414L-.142 16l6.243-6.243zm16.97 0 1.414-1.414L32.142 16l-6.243 6.243-1.414-1.414L29.313 16zM16.028 13.2l2.829 2.828-2.829 2.829-2.828-2.829zm-4.857 11.285L16 29.313l4.829-4.828 1.414 1.414L16 32.142l-6.243-6.243zm0-16.97L9.757 6.101 16-.142l6.243 6.243-1.414 1.414L16 2.687z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 11.171 2.687 16l4.828 4.829-1.414 1.414L-.142 16l6.243-6.243zm16.97 0 1.414-1.414L32.142 16l-6.243 6.243-1.414-1.414L29.313 16zM16.028 13.2l2.829 2.828-2.829 2.829-2.828-2.829zm-4.857 11.285L16 29.313l4.829-4.828 1.414 1.414L16 32.142l-6.243-6.243zm0-16.97L9.757 6.101 16-.142l6.243 6.243-1.414 1.414L16 2.687z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-asc:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-cancel:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667A13.32 13.32 0 0 0 2.667 16c0 7.373 5.96 13.333 13.333 13.333S29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667A13.32 13.32 0 0 0 2.667 16c0 7.373 5.96 13.333 13.333 13.333S29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-chart:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M14 7h4v18h-4zM8 17h4v8H8zM20 13h4v12h-4z'/%3E%3C/g%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M14 7h4v18h-4zM8 17h4v8H8zM20 13h4v12h-4z'/%3E%3C/g%3E%3C/svg%3E")}.ag-icon-color-picker:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-columns:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26 25H6V7h20zM12 11H8v12h4zm6 0h-4v12h4zm6 12V11h-4v12z' style='fill-rule:nonzero' transform='translate(0 -1)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26 25H6V7h20zM12 11H8v12h4zm6 0h-4v12h4zm6 12V11h-4v12z' style='fill-rule:nonzero' transform='translate(0 -1)'/%3E%3C/svg%3E")}.ag-icon-contracted:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m12 6 10 10-10 10-2-2 8-8-8-8z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m12 6 10 10-10 10-2-2 8-8-8-8z'/%3E%3C/svg%3E")}.ag-icon-copy:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-cross:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.984 13.894 27.05 2.828l2.122 2.122-11.066 11.066 11.066 11.066-2.122 2.12-11.066-11.066L4.918 29.202l-2.12-2.12 11.066-11.066L2.798 4.95l2.12-2.122z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.984 13.894 27.05 2.828l2.122 2.122-11.066 11.066 11.066 11.066-2.122 2.12-11.066-11.066L4.918 29.202l-2.12-2.12 11.066-11.066L2.798 4.95l2.12-2.122z'/%3E%3C/svg%3E")}.ag-icon-csv:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E")}.ag-icon-cut:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M13.775 15.198 3.835 2.945a1.501 1.501 0 0 1 2.33-1.89l14.997 18.488A6.003 6.003 0 0 1 29.657 25c0 3.311-2.688 6-6 6s-6-2.689-6-6c0-1.335.437-2.569 1.176-3.566l-3.127-3.855-3.001 3.7A5.97 5.97 0 0 1 14 25c0 3.311-2.689 6-6 6s-6-2.689-6-6a6.003 6.003 0 0 1 8.315-5.536zm9.882 6.702a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1M8 21.95a3.05 3.05 0 1 0 .001 6.101A3.05 3.05 0 0 0 8 21.95m9.63-11.505 1.932 2.381 8.015-9.881a1.5 1.5 0 0 0-2.329-1.89z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M13.775 15.198 3.835 2.945a1.501 1.501 0 0 1 2.33-1.89l14.997 18.488A6.003 6.003 0 0 1 29.657 25c0 3.311-2.688 6-6 6s-6-2.689-6-6c0-1.335.437-2.569 1.176-3.566l-3.127-3.855-3.001 3.7A5.97 5.97 0 0 1 14 25c0 3.311-2.689 6-6 6s-6-2.689-6-6a6.003 6.003 0 0 1 8.315-5.536zm9.882 6.702a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1M8 21.95a3.05 3.05 0 1 0 .001 6.101A3.05 3.05 0 0 0 8 21.95m9.63-11.505 1.932 2.381 8.015-9.881a1.5 1.5 0 0 0-2.329-1.89z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-desc:before,.ag-icon-down:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-excel:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E")}.ag-icon-expanded:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 26 10 16 20 6l2 2-8 8 8 8z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 26 10 16 20 6l2 2-8 8 8 8z'/%3E%3C/svg%3E")}.ag-icon-eye-slash:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8.95 10.364 7 8.414 8.414 7l2.32 2.32A13.2 13.2 0 0 1 16.5 8c5.608 0 10.542 3.515 12.381 8.667L29 17l-.119.333a13 13 0 0 1-4.255 5.879l1.466 1.466-1.414 1.414-1.754-1.753A13.2 13.2 0 0 1 16.5 26c-5.608 0-10.542-3.515-12.381-8.667L4 17l.119-.333a13 13 0 0 1 4.83-6.303m1.445 1.445A11.02 11.02 0 0 0 6.148 17c1.646 4.177 5.728 7 10.352 7 1.76 0 3.441-.409 4.94-1.146l-1.878-1.878A5.06 5.06 0 0 1 16.5 22c-2.789 0-5.05-2.239-5.05-5 0-1.158.398-2.223 1.065-3.07zm1.855-.974 1.794 1.795A5.07 5.07 0 0 1 16.5 12c2.789 0 5.05 2.239 5.05 5 0 .9-.24 1.745-.661 2.474l2.305 2.306A11 11 0 0 0 26.852 17c-1.646-4.177-5.728-7-10.352-7-1.495 0-2.933.295-4.25.835'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8.95 10.364 7 8.414 8.414 7l2.32 2.32A13.2 13.2 0 0 1 16.5 8c5.608 0 10.542 3.515 12.381 8.667L29 17l-.119.333a13 13 0 0 1-4.255 5.879l1.466 1.466-1.414 1.414-1.754-1.753A13.2 13.2 0 0 1 16.5 26c-5.608 0-10.542-3.515-12.381-8.667L4 17l.119-.333a13 13 0 0 1 4.83-6.303m1.445 1.445A11.02 11.02 0 0 0 6.148 17c1.646 4.177 5.728 7 10.352 7 1.76 0 3.441-.409 4.94-1.146l-1.878-1.878A5.06 5.06 0 0 1 16.5 22c-2.789 0-5.05-2.239-5.05-5 0-1.158.398-2.223 1.065-3.07zm1.855-.974 1.794 1.795A5.07 5.07 0 0 1 16.5 12c2.789 0 5.05 2.239 5.05 5 0 .9-.24 1.745-.661 2.474l2.305 2.306A11 11 0 0 0 26.852 17c-1.646-4.177-5.728-7-10.352-7-1.495 0-2.933.295-4.25.835'/%3E%3C/svg%3E")}.ag-icon-eye:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16.5 23c4.624 0 8.706-2.823 10.352-7-1.646-4.177-5.728-7-10.352-7s-8.706 2.823-10.352 7c1.646 4.177 5.728 7 10.352 7M4.119 15.667C5.958 10.515 10.892 7 16.5 7s10.542 3.515 12.381 8.667L29 16l-.119.333C27.042 21.485 22.108 25 16.5 25S5.958 21.485 4.119 16.333L4 16zM16.5 21c2.789 0 5.049-2.239 5.049-5s-2.26-5-5.049-5-5.049 2.239-5.049 5 2.26 5 5.049 5' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16.5 23c4.624 0 8.706-2.823 10.352-7-1.646-4.177-5.728-7-10.352-7s-8.706 2.823-10.352 7c1.646 4.177 5.728 7 10.352 7M4.119 15.667C5.958 10.515 10.892 7 16.5 7s10.542 3.515 12.381 8.667L29 16l-.119.333C27.042 21.485 22.108 25 16.5 25S5.958 21.485 4.119 16.333L4 16zM16.5 21c2.789 0 5.049-2.239 5.049-5s-2.26-5-5.049-5-5.049 2.239-5.049 5 2.26 5 5.049 5' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-filter:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m28 8-8 8v5l-6 6V16L6 8V6h22zM9 8l7 7v7l2-2v-5l7-7z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m28 8-8 8v5l-6 6V16L6 8V6h22zM9 8l7 7v7l2-2v-5l7-7z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-first:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-group:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 7v1H9V7zm0-3v1H5.001V4zm-7 7H5v-1h2zm0-3H5V7h2zM3 5H1V4h2zm11 5v1H9v-1zm-7 4H5v-1h2zm7-1v1H9v-1z' style='fill-rule:nonzero' transform='matrix(2 0 0 2 0 -2)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 7v1H9V7zm0-3v1H5.001V4zm-7 7H5v-1h2zm0-3H5V7h2zM3 5H1V4h2zm11 5v1H9v-1zm-7 4H5v-1h2zm7-1v1H9v-1z' style='fill-rule:nonzero' transform='matrix(2 0 0 2 0 -2)'/%3E%3C/svg%3E")}.ag-icon-last:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-left:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-linked:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333a6.67 6.67 0 0 0-6.667 6.667 6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133 4.136 4.136 0 0 1-4.133 4.133h-5.333v2.533h5.333a6.67 6.67 0 0 0 6.667-6.667 6.67 6.67 0 0 0-6.667-6.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333a6.67 6.67 0 0 0-6.667 6.667 6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133 4.136 4.136 0 0 1-4.133 4.133h-5.333v2.533h5.333a6.67 6.67 0 0 0 6.667-6.667 6.67 6.67 0 0 0-6.667-6.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-loading:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M17 29h-2v-8h2zm-3.586-9L7 26.414 5.586 25 12 18.586zm13 5L25 26.414 18.586 20 20 18.586zM29 17h-8v-2h8zm-18 0H3v-2h8zm2.414-5L12 13.414 5.586 7 7 5.586zm13-5L20 13.414 18.586 12 25 5.586zM17 11h-2V3h2z' style='fill-rule:nonzero' transform='translate(-3.692 -3.692)scale(1.23077)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M17 29h-2v-8h2zm-3.586-9L7 26.414 5.586 25 12 18.586zm13 5L25 26.414 18.586 20 20 18.586zM29 17h-8v-2h8zm-18 0H3v-2h8zm2.414-5L12 13.414 5.586 7 7 5.586zm13-5L20 13.414 18.586 12 25 5.586zM17 11h-2V3h2z' style='fill-rule:nonzero' transform='translate(-3.692 -3.692)scale(1.23077)'/%3E%3C/svg%3E")}.ag-icon-maximize:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 30H2V18h2.828v7.05l8.254-8.252 2.12 2.12-8.252 8.254H14zm4-28h12v12h-2.828V6.95l-8.254 8.252-2.12-2.12 8.252-8.254H18z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 30H2V18h2.828v7.05l8.254-8.252 2.12 2.12-8.252 8.254H14zm4-28h12v12h-2.828V6.95l-8.254 8.252-2.12-2.12 8.252-8.254H18z'/%3E%3C/svg%3E")}.ag-icon-menu:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 13H0v-2h20zm0-6H0V5h20zm0-6H0v-2h20z' style='fill-rule:nonzero' transform='translate(6 9)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 13H0v-2h20zm0-6H0V5h20zm0-6H0v-2h20z' style='fill-rule:nonzero' transform='translate(6 9)'/%3E%3C/svg%3E")}.ag-icon-menu-alt:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 19a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 27a3 3 0 1 0 0-6 3 3 0 0 0 0 6'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 19a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 27a3 3 0 1 0 0-6 3 3 0 0 0 0 6'/%3E%3C/svg%3E")}.ag-icon-minimize:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M2 18h12v12h-2.828v-7.05l-8.254 8.252-2.12-2.12 8.252-8.254H2zm28-4H18V2h2.828v7.05L29.082.798l2.12 2.12-8.252 8.254H30z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M2 18h12v12h-2.828v-7.05l-8.254 8.252-2.12-2.12 8.252-8.254H2zm28-4H18V2h2.828v7.05L29.082.798l2.12 2.12-8.252 8.254H30z'/%3E%3C/svg%3E")}.ag-icon-minus:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-next:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.94 6 9.06 7.88 17.167 16 9.06 24.12 10.94 26l10-10z' style='fill-rule:nonzero' transform='translate(1)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.94 6 9.06 7.88 17.167 16 9.06 24.12 10.94 26l10-10z' style='fill-rule:nonzero' transform='translate(1)'/%3E%3C/svg%3E")}.ag-icon-none:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M23.708 14.645 16 6.939l-7.708 7.706 1.416 1.416L16 9.767l6.292 6.294zM23.708 20.355 16 28.061l-7.708-7.706 1.416-1.416L16 25.233l6.292-6.294z'/%3E%3C/g%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M23.708 14.645 16 6.939l-7.708 7.706 1.416 1.416L16 9.767l6.292 6.294zM23.708 20.355 16 28.061l-7.708-7.706 1.416-1.416L16 25.233l6.292-6.294z'/%3E%3C/g%3E%3C/svg%3E")}.ag-icon-not-allowed:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-paste:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.334 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4M16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.334 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4M16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-pin:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m10.78 19.777-4.668-4.666s.032-1 .67-1.87c1.366-1.86 4.052-1.96 6.056-1.572l3.158-3.108c-.7-2.342 3.352-5.046 3.352-5.046l9.166 9.168q-.334.447-.67.894c-1.074 1.426-2.538 2.63-4.272 2.338l-3.32 3.218c.046.344.042.03.118 1.152.144 2.13-.64 4.324-2.632 5.34l-.746.364-4.798-4.798-7.292 7.294-1.416-1.416zm8.24-13.672c-.688.568-1.416 1.45-1.024 2.072l.49.722-4.986 4.988c-1.988-.506-4.346-.636-5.156.614l9.02 9.032q.14-.099.272-.21c1.226-1.08.764-3.04.498-4.9l4.79-4.79s1.47.938 2.936-.776l-6.79-6.79q-.026.019-.05.038' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m10.78 19.777-4.668-4.666s.032-1 .67-1.87c1.366-1.86 4.052-1.96 6.056-1.572l3.158-3.108c-.7-2.342 3.352-5.046 3.352-5.046l9.166 9.168q-.334.447-.67.894c-1.074 1.426-2.538 2.63-4.272 2.338l-3.32 3.218c.046.344.042.03.118 1.152.144 2.13-.64 4.324-2.632 5.34l-.746.364-4.798-4.798-7.292 7.294-1.416-1.416zm8.24-13.672c-.688.568-1.416 1.45-1.024 2.072l.49.722-4.986 4.988c-1.988-.506-4.346-.636-5.156.614l9.02 9.032q.14-.099.272-.21c1.226-1.08.764-3.04.498-4.9l4.79-4.79s1.47.938 2.936-.776l-6.79-6.79q-.026.019-.05.038' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-pivot:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0m2.966 7.954H9.892v18.136c5.086.13 10.18.098 15.264-.096 1.48-.094 2.746-1.35 2.84-2.84.192-5.064.226-10.134.098-15.2M3.968 24.1q.015.528.036 1.056c.094 1.484 1.354 2.746 2.84 2.84l1.012.036V24.1zM22 15.414l-.292.294-1.416-1.416L23 11.586l2.708 2.706-1.416 1.416-.292-.294v3.592c-.032 2.604-2.246 4.892-4.872 4.992L15.414 24l.294.292-1.416 1.416L11.586 23l2.706-2.708 1.416 1.416-.322.32c3.372.03 6.578-.164 6.614-3.034zM3.88 18.038c.002 1.346.012 2.694.038 4.04h3.938v-4.04zm.05-6.062a681 681 0 0 0-.044 4.042h3.97v-4.042zm5.962-7.99Q8.449 3.999 7.006 4c-1.57.02-2.946 1.348-3.004 2.922q-.02 1.517-.042 3.034h3.896v-2.02h2.036zm14.244-.016v3.966h3.898q-.017-.546-.038-1.092c-.094-1.48-1.35-2.746-2.84-2.84q-.51-.019-1.02-.034m-8.14-.054q-2.035.022-4.07.048v3.972h4.07zm6.106.008a213 213 0 0 0-4.07-.022v4.034h4.07z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0m2.966 7.954H9.892v18.136c5.086.13 10.18.098 15.264-.096 1.48-.094 2.746-1.35 2.84-2.84.192-5.064.226-10.134.098-15.2M3.968 24.1q.015.528.036 1.056c.094 1.484 1.354 2.746 2.84 2.84l1.012.036V24.1zM22 15.414l-.292.294-1.416-1.416L23 11.586l2.708 2.706-1.416 1.416-.292-.294v3.592c-.032 2.604-2.246 4.892-4.872 4.992L15.414 24l.294.292-1.416 1.416L11.586 23l2.706-2.708 1.416 1.416-.322.32c3.372.03 6.578-.164 6.614-3.034zM3.88 18.038c.002 1.346.012 2.694.038 4.04h3.938v-4.04zm.05-6.062a681 681 0 0 0-.044 4.042h3.97v-4.042zm5.962-7.99Q8.449 3.999 7.006 4c-1.57.02-2.946 1.348-3.004 2.922q-.02 1.517-.042 3.034h3.896v-2.02h2.036zm14.244-.016v3.966h3.898q-.017-.546-.038-1.092c-.094-1.48-1.35-2.746-2.84-2.84q-.51-.019-1.02-.034m-8.14-.054q-2.035.022-4.07.048v3.972h4.07zm6.106.008a213 213 0 0 0-4.07-.022v4.034h4.07z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-plus:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-previous:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.94 7.88 20.06 6l-10 10 10 10 1.88-1.88L13.833 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.94 7.88 20.06 6l-10 10 10 10 1.88-1.88L13.833 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-right:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-save:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.708 2.355 8 10.061.292 2.355 1.708.939 8 7.233 14.292.939z' style='fill-rule:nonzero' transform='translate(8 14)'/%3E%3Cpath d='M5 26h22v2H5zM15 4h2v18h-2z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.708 2.355 8 10.061.292 2.355 1.708.939 8 7.233 14.292.939z' style='fill-rule:nonzero' transform='translate(8 14)'/%3E%3Cpath d='M5 26h22v2H5zM15 4h2v18h-2z'/%3E%3C/svg%3E")}.ag-icon-small-down:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 10.667 16 21.334l8.667-10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 10.667 16 21.334l8.667-10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-small-left:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.333 7.334 10.666 16l10.667 8.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.333 7.334 10.666 16l10.667 8.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-small-right:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.667 24.666 21.334 16 10.667 7.333z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.667 24.666 21.334 16 10.667 7.333z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-small-up:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 21.333 16 10.666l8.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 21.333 16 10.666l8.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-tick:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M11.586 22.96 27.718 6.828 29.84 8.95 11.586 27.202 2.4 18.016l2.12-2.122z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M11.586 22.96 27.718 6.828 29.84 8.95 11.586 27.202 2.4 18.016l2.12-2.122z'/%3E%3C/svg%3E")}.ag-icon-tree-closed:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m11.94 6-1.88 1.88L18.167 16l-8.107 8.12L11.94 26l10-10z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m11.94 6-1.88 1.88L18.167 16l-8.107 8.12L11.94 26l10-10z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-tree-indeterminate:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6 13.5h20v3H6z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6 13.5h20v3H6z'/%3E%3C/svg%3E")}.ag-icon-tree-open:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.12 9.06 16 17.167 7.88 9.06 6 10.94l10 10 10-10z' style='fill-rule:nonzero' transform='translate(0 1)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.12 9.06 16 17.167 7.88 9.06 6 10.94l10 10 10-10z' style='fill-rule:nonzero' transform='translate(0 1)'/%3E%3C/svg%3E")}.ag-icon-unlinked:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-up:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-grip:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M8 24H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 18H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 12H6V8h2zm6 0h-2V8h2zm6 0h-2V8h2zm6 0h-2V8h2z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M8 24H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 18H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 12H6V8h2zm6 0h-2V8h2zm6 0h-2V8h2zm6 0h-2V8h2z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-settings:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E")}`,Kw=gv("iconSet","alpine").withCSS(YS),KS=`.ag-icon:before{background-color:currentColor;content:"";display:block;height:var(--ag-icon-size);-webkit-mask-image:linear-gradient(#0000,#0000);mask-image:linear-gradient(#0000,#0000);-webkit-mask-size:contain;mask-size:contain;width:var(--ag-icon-size)}.ag-icon-aggregation:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eaggregation%3C/title%3E%3Cpath d='M24 5.333H8V8l8.667 8L8 24v2.667h16v-4h-9.333L21.334 16l-6.667-6.667H24z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eaggregation%3C/title%3E%3Cpath d='M24 5.333H8V8l8.667 8L8 24v2.667h16v-4h-9.333L21.334 16l-6.667-6.667H24z'/%3E%3C/svg%3E")}.ag-icon-arrows:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Earrows%3C/title%3E%3Cpath d='M13.333 11.556h5.333V8h3.556L16 1.778 9.778 8h3.556zm-1.777 1.777H8V9.777l-6.222 6.222L8 22.221v-3.556h3.556zM30.222 16 24 9.778v3.556h-3.556v5.333H24v3.556l6.222-6.222zm-11.555 4.444h-5.333V24H9.778L16 30.222 22.222 24h-3.556z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Earrows%3C/title%3E%3Cpath d='M13.333 11.556h5.333V8h3.556L16 1.778 9.778 8h3.556zm-1.777 1.777H8V9.777l-6.222 6.222L8 22.221v-3.556h3.556zM30.222 16 24 9.778v3.556h-3.556v5.333H24v3.556l6.222-6.222zm-11.555 4.444h-5.333V24H9.778L16 30.222 22.222 24h-3.556z'/%3E%3C/svg%3E")}.ag-icon-asc:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E")}.ag-icon-cancel:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecancel%3C/title%3E%3Cpath d='M16 2.667C8.627 2.667 2.667 8.627 2.667 16S8.627 29.333 16 29.333 29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecancel%3C/title%3E%3Cpath d='M16 2.667C8.627 2.667 2.667 8.627 2.667 16S8.627 29.333 16 29.333 29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z'/%3E%3C/svg%3E")}.ag-icon-chart:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cpath d='M6.667 12.267h4v13.067h-4zm7.466-5.6h3.733v18.667h-3.733zM21.6 17.333h3.733v8H21.6z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cpath d='M6.667 12.267h4v13.067h-4zm7.466-5.6h3.733v18.667h-3.733zM21.6 17.333h3.733v8H21.6z'/%3E%3C/svg%3E")}.ag-icon-color-picker:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolor-picker%3C/title%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387H7.361zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolor-picker%3C/title%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387H7.361zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667'/%3E%3C/svg%3E")}.ag-icon-columns:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolumns%3C/title%3E%3Cpath d='M5.333 10.667h5.333V5.334H5.333zm8 16h5.333v-5.333h-5.333zm-8 0h5.333v-5.333H5.333zm0-8h5.333v-5.333H5.333zm8 0h5.333v-5.333h-5.333zm8-13.334v5.333h5.333V5.333zm-8 5.334h5.333V5.334h-5.333zm8 8h5.333v-5.333h-5.333zm0 8h5.333v-5.333h-5.333z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolumns%3C/title%3E%3Cpath d='M5.333 10.667h5.333V5.334H5.333zm8 16h5.333v-5.333h-5.333zm-8 0h5.333v-5.333H5.333zm0-8h5.333v-5.333H5.333zm8 0h5.333v-5.333h-5.333zm8-13.334v5.333h5.333V5.333zm-8 5.334h5.333V5.334h-5.333zm8 8h5.333v-5.333h-5.333zm0 8h5.333v-5.333h-5.333z'/%3E%3C/svg%3E")}.ag-icon-contracted:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Econtracted%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Econtracted%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E")}.ag-icon-copy:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecopy%3C/title%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecopy%3C/title%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z'/%3E%3C/svg%3E")}.ag-icon-cross:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecross%3C/title%3E%3Cpath d='m25.333 8.547-1.88-1.88L16 14.12 8.547 6.667l-1.88 1.88L14.12 16l-7.453 7.453 1.88 1.88L16 17.88l7.453 7.453 1.88-1.88L17.88 16z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecross%3C/title%3E%3Cpath d='m25.333 8.547-1.88-1.88L16 14.12 8.547 6.667l-1.88 1.88L14.12 16l-7.453 7.453 1.88 1.88L16 17.88l7.453 7.453 1.88-1.88L17.88 16z'/%3E%3C/svg%3E")}.ag-icon-csv:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E")}.ag-icon-cut:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m19 3-6 6 2 2 7-7V3m-10 9.5a.503.503 0 0 1-.5-.5c0-.274.226-.5.5-.5s.5.226.5.5-.226.5-.5.5M6 20c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2M6 8c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2m3.64-.36c.23-.5.36-1.05.36-1.64 0-2.194-1.806-4-4-4S2 3.806 2 6s1.806 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.194 0-4 1.806-4 4s1.806 4 4 4 4-1.806 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1z' style='fill-rule:nonzero' transform='translate(4 4)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m19 3-6 6 2 2 7-7V3m-10 9.5a.503.503 0 0 1-.5-.5c0-.274.226-.5.5-.5s.5.226.5.5-.226.5-.5.5M6 20c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2M6 8c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2m3.64-.36c.23-.5.36-1.05.36-1.64 0-2.194-1.806-4-4-4S2 3.806 2 6s1.806 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.194 0-4 1.806-4 4s1.806 4 4 4 4-1.806 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1z' style='fill-rule:nonzero' transform='translate(4 4)'/%3E%3C/svg%3E")}.ag-icon-desc:before,.ag-icon-down:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Edesc%3C/title%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667L26.668 16z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Edesc%3C/title%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667L26.668 16z'/%3E%3C/svg%3E")}.ag-icon-excel:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E")}.ag-icon-expanded:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eexpanded%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eexpanded%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E")}.ag-icon-eye-slash:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath d='M21.106 15.088A5.19 5.19 0 0 0 16 10.814a5.17 5.17 0 0 0-3.668 1.522L9.866 9.868a12.2 12.2 0 0 1 6.133-1.646c5.186 0 9.614 3.225 11.408 7.778a12.34 12.34 0 0 1-5.276 6.133l-2.468-2.466a5.17 5.17 0 0 0 1.449-2.802h-2.123c-.148.508-.42.964-.782 1.33l-1.33-1.33h-2.514l2.196 2.196q-.272.049-.56.05a3.11 3.11 0 0 1-2.99-2.245h-2.123a5.19 5.19 0 0 0 7.3 3.836l2.247 2.247a12.2 12.2 0 0 1-4.434.828c-5.186 0-9.614-3.225-11.408-7.778a12.3 12.3 0 0 1 3.781-5.111l2.924 2.924a5.1 5.1 0 0 0-.404 1.275h4.206l-1.296-1.296a3.1 3.1 0 0 1 2.196-.903c1.404 0 2.587.924 2.976 2.199h2.13z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath d='M21.106 15.088A5.19 5.19 0 0 0 16 10.814a5.17 5.17 0 0 0-3.668 1.522L9.866 9.868a12.2 12.2 0 0 1 6.133-1.646c5.186 0 9.614 3.225 11.408 7.778a12.34 12.34 0 0 1-5.276 6.133l-2.468-2.466a5.17 5.17 0 0 0 1.449-2.802h-2.123c-.148.508-.42.964-.782 1.33l-1.33-1.33h-2.514l2.196 2.196q-.272.049-.56.05a3.11 3.11 0 0 1-2.99-2.245h-2.123a5.19 5.19 0 0 0 7.3 3.836l2.247 2.247a12.2 12.2 0 0 1-4.434.828c-5.186 0-9.614-3.225-11.408-7.778a12.3 12.3 0 0 1 3.781-5.111l2.924 2.924a5.1 5.1 0 0 0-.404 1.275h4.206l-1.296-1.296a3.1 3.1 0 0 1 2.196-.903c1.404 0 2.587.924 2.976 2.199h2.13z'/%3E%3C/svg%3E")}.ag-icon-eye:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath d='M16 8.222c-5.186 0-9.614 3.225-11.408 7.778 1.794 4.553 6.222 7.778 11.408 7.778S25.614 20.553 27.408 16C25.614 11.447 21.186 8.222 16 8.222m0 12.964c-2.862 0-5.186-2.324-5.186-5.186s2.324-5.186 5.186-5.186 5.186 2.324 5.186 5.186-2.324 5.186-5.186 5.186m0-8.297c-1.721 0-3.111 1.39-3.111 3.111s1.39 3.111 3.111 3.111 3.111-1.39 3.111-3.111-1.39-3.111-3.111-3.111'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath d='M16 8.222c-5.186 0-9.614 3.225-11.408 7.778 1.794 4.553 6.222 7.778 11.408 7.778S25.614 20.553 27.408 16C25.614 11.447 21.186 8.222 16 8.222m0 12.964c-2.862 0-5.186-2.324-5.186-5.186s2.324-5.186 5.186-5.186 5.186 2.324 5.186 5.186-2.324 5.186-5.186 5.186m0-8.297c-1.721 0-3.111 1.39-3.111 3.111s1.39 3.111 3.111 3.111 3.111-1.39 3.111-3.111-1.39-3.111-3.111-3.111'/%3E%3C/svg%3E")}.ag-icon-filter:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efilter%3C/title%3E%3Cpath d='M13.333 24h5.333v-2.667h-5.333zM4 8v2.667h24V8zm4 9.333h16v-2.667H8z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efilter%3C/title%3E%3Cpath d='M13.333 24h5.333v-2.667h-5.333zM4 8v2.667h24V8zm4 9.333h16v-2.667H8z'/%3E%3C/svg%3E")}.ag-icon-first:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efirst%3C/title%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efirst%3C/title%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z'/%3E%3C/svg%3E")}.ag-icon-group:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egroup%3C/title%3E%3Cpath d='M18.667 21.333h8.889A3.555 3.555 0 0 1 24 24.889h-5.333zm8.888-7.111v3.556h-8.889v-3.556zM24 7.111a3.555 3.555 0 0 1 3.556 3.556h-16V7.111zm-8.889 17.778h-3.556v-3.556h3.556zm0-7.111h-3.556v-3.556h3.556zM8 10.667H4.444A3.555 3.555 0 0 1 8 7.111z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egroup%3C/title%3E%3Cpath d='M18.667 21.333h8.889A3.555 3.555 0 0 1 24 24.889h-5.333zm8.888-7.111v3.556h-8.889v-3.556zM24 7.111a3.555 3.555 0 0 1 3.556 3.556h-16V7.111zm-8.889 17.778h-3.556v-3.556h3.556zm0-7.111h-3.556v-3.556h3.556zM8 10.667H4.444A3.555 3.555 0 0 1 8 7.111z'/%3E%3C/svg%3E")}.ag-icon-last:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elast%3C/title%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elast%3C/title%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z'/%3E%3C/svg%3E")}.ag-icon-left:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eleft%3C/title%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227v-2.667z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eleft%3C/title%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227v-2.667z'/%3E%3C/svg%3E")}.ag-icon-linked:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elinked%3C/title%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333c-3.68 0-6.667 2.987-6.667 6.667s2.987 6.667 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333c2.28 0 4.133 1.853 4.133 4.133s-1.853 4.133-4.133 4.133h-5.333v2.533h5.333c3.68 0 6.667-2.987 6.667-6.667s-2.987-6.667-6.667-6.667z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elinked%3C/title%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333c-3.68 0-6.667 2.987-6.667 6.667s2.987 6.667 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333c2.28 0 4.133 1.853 4.133 4.133s-1.853 4.133-4.133 4.133h-5.333v2.533h5.333c3.68 0 6.667-2.987 6.667-6.667s-2.987-6.667-6.667-6.667z'/%3E%3C/svg%3E")}.ag-icon-loading:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eloading%3C/title%3E%3Cpath d='m17.778 11.708 3.25-3.251 2.516 2.516-3.251 3.25h4.597v3.556h-4.597l3.251 3.25-2.516 2.516-3.25-3.251v4.597h-3.556v-4.597l-3.25 3.251-2.516-2.516 3.251-3.25H7.11v-3.556h4.597l-3.251-3.25 2.516-2.516 3.25 3.251V7.111h3.556zm-3.251 7.847h2.944l2.084-2.084v-2.944l-2.084-2.084h-2.944l-2.084 2.084v2.944z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eloading%3C/title%3E%3Cpath d='m17.778 11.708 3.25-3.251 2.516 2.516-3.251 3.25h4.597v3.556h-4.597l3.251 3.25-2.516 2.516-3.25-3.251v4.597h-3.556v-4.597l-3.25 3.251-2.516-2.516 3.251-3.25H7.11v-3.556h4.597l-3.251-3.25 2.516-2.516 3.25 3.251V7.111h3.556zm-3.251 7.847h2.944l2.084-2.084v-2.944l-2.084-2.084h-2.944l-2.084 2.084v2.944z'/%3E%3C/svg%3E")}.ag-icon-maximize:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emaximize%3C/title%3E%3Cpath d='M4 4h24v2.667H4z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emaximize%3C/title%3E%3Cpath d='M4 4h24v2.667H4z'/%3E%3C/svg%3E")}.ag-icon-menu:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emenu%3C/title%3E%3Cpath d='M4 24h24v-2.667H4zm0-6.667h24v-2.667H4zM4 8v2.667h24V8z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emenu%3C/title%3E%3Cpath d='M4 24h24v-2.667H4zm0-6.667h24v-2.667H4zM4 8v2.667h24V8z'/%3E%3C/svg%3E")}.ag-icon-menu-alt:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 26.667a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 24q0-1.1.784-1.883A2.57 2.57 0 0 1 16 21.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 16q0-1.1.784-1.883A2.57 2.57 0 0 1 16 13.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 8q0-1.1.784-1.883A2.57 2.57 0 0 1 16 5.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 26.667a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 24q0-1.1.784-1.883A2.57 2.57 0 0 1 16 21.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 16q0-1.1.784-1.883A2.57 2.57 0 0 1 16 13.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 8q0-1.1.784-1.883A2.57 2.57 0 0 1 16 5.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784'/%3E%3C/svg%3E")}.ag-icon-minimize:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eminimize%3C/title%3E%3Cpath d='M8 25.333h16V28H8z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eminimize%3C/title%3E%3Cpath d='M8 25.333h16V28H8z'/%3E%3C/svg%3E")}.ag-icon-minus:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-next:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enext%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enext%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E")}.ag-icon-none:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cpath d='M4 24h16v-2.667H4zM4 8v2.667h24V8zm0 9.333h24v-2.667H4z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cpath d='M4 24h16v-2.667H4zM4 8v2.667h24V8zm0 9.333h24v-2.667H4z'/%3E%3C/svg%3E")}.ag-icon-not-allowed:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enot-allowed%3C/title%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enot-allowed%3C/title%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667'/%3E%3C/svg%3E")}.ag-icon-paste:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epaste%3C/title%3E%3Cpath d='M25.333 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4zM16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epaste%3C/title%3E%3Cpath d='M25.333 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4zM16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z'/%3E%3C/svg%3E")}.ag-icon-pin:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epin%3C/title%3E%3Cpath d='m11.106 22.093-4.444 4.444-1.259-1.259 4.444-4.444zm5.872-16.63 9.618 9.62-.962.962-.962-.962-7.694 3.847 1.924 1.924-2.74 2.74-7.696-7.696 2.741-2.74 1.924 1.925 3.847-7.696-.962-.962z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epin%3C/title%3E%3Cpath d='m11.106 22.093-4.444 4.444-1.259-1.259 4.444-4.444zm5.872-16.63 9.618 9.62-.962.962-.962-.962-7.694 3.847 1.924 1.924-2.74 2.74-7.696-7.696 2.741-2.74 1.924 1.925 3.847-7.696-.962-.962z'/%3E%3C/svg%3E")}.ag-icon-pivot:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epivot%3C/title%3E%3Cpath d='M26.667 30.223H5.334a3.556 3.556 0 0 1-3.556-3.556V5.334a3.556 3.556 0 0 1 3.556-3.556h21.333a3.556 3.556 0 0 1 3.556 3.556v21.333a3.556 3.556 0 0 1-3.556 3.556m-16-8.89H5.334v5.333h5.333zm16-7.11H12.444v12.444h14.223zm-9.15 6.85-2.039 2.037 2.039 2.039-1.257 1.257-3.295-3.296 3.295-3.295q.63.628 1.257 1.257zm-6.85-6.85H5.334v5.333h5.333zm15.74 3.816-1.257 1.256-2.039-2.037-2.037 2.037-1.257-1.256 3.295-3.296zM10.667 5.333H5.334v5.333h5.333zm8.889 0h-7.112v5.333h7.112zm7.111 0h-5.333v5.333h5.333z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epivot%3C/title%3E%3Cpath d='M26.667 30.223H5.334a3.556 3.556 0 0 1-3.556-3.556V5.334a3.556 3.556 0 0 1 3.556-3.556h21.333a3.556 3.556 0 0 1 3.556 3.556v21.333a3.556 3.556 0 0 1-3.556 3.556m-16-8.89H5.334v5.333h5.333zm16-7.11H12.444v12.444h14.223zm-9.15 6.85-2.039 2.037 2.039 2.039-1.257 1.257-3.295-3.296 3.295-3.295q.63.628 1.257 1.257zm-6.85-6.85H5.334v5.333h5.333zm15.74 3.816-1.257 1.256-2.039-2.037-2.037 2.037-1.257-1.256 3.295-3.296zM10.667 5.333H5.334v5.333h5.333zm8.889 0h-7.112v5.333h7.112zm7.111 0h-5.333v5.333h5.333z'/%3E%3C/svg%3E")}.ag-icon-plus:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-previous:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eprevious%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eprevious%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E")}.ag-icon-right:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eright%3C/title%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eright%3C/title%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z'/%3E%3C/svg%3E")}.ag-icon-save:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esave%3C/title%3E%3Cpath d='M25.333 16v9.333H6.666V16H3.999v9.333C3.999 26.8 5.199 28 6.666 28h18.667C26.8 28 28 26.8 28 25.333V16zm-8 .893 3.453-3.44 1.88 1.88L15.999 22l-6.667-6.667 1.88-1.88 3.453 3.44V4h2.667v12.893z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esave%3C/title%3E%3Cpath d='M25.333 16v9.333H6.666V16H3.999v9.333C3.999 26.8 5.199 28 6.666 28h18.667C26.8 28 28 26.8 28 25.333V16zm-8 .893 3.453-3.44 1.88 1.88L15.999 22l-6.667-6.667 1.88-1.88 3.453 3.44V4h2.667v12.893z'/%3E%3C/svg%3E")}.ag-icon-small-down:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-down%3C/title%3E%3Cpath d='M9.333 12.667 16 19.334l6.667-6.667H9.334z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-down%3C/title%3E%3Cpath d='M9.333 12.667 16 19.334l6.667-6.667H9.334z'/%3E%3C/svg%3E")}.ag-icon-small-left:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-left%3C/title%3E%3Cpath d='M19.333 9.333 12.666 16l6.667 6.667V9.334z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-left%3C/title%3E%3Cpath d='M19.333 9.333 12.666 16l6.667 6.667V9.334z'/%3E%3C/svg%3E")}.ag-icon-small-right:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-right%3C/title%3E%3Cpath d='M12.667 22.667 19.334 16l-6.667-6.667v13.333z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-right%3C/title%3E%3Cpath d='M12.667 22.667 19.334 16l-6.667-6.667v13.333z'/%3E%3C/svg%3E")}.ag-icon-small-up:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-up%3C/title%3E%3Cpath d='M9.333 19.333 16 12.666l6.667 6.667H9.334z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-up%3C/title%3E%3Cpath d='M9.333 19.333 16 12.666l6.667 6.667H9.334z'/%3E%3C/svg%3E")}.ag-icon-tick:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etick%3C/title%3E%3Cpath d='m11.727 21.167-5.56-5.56-1.893 1.88 7.453 7.453 16-16-1.88-1.88z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etick%3C/title%3E%3Cpath d='m11.727 21.167-5.56-5.56-1.893 1.88 7.453 7.453 16-16-1.88-1.88z'/%3E%3C/svg%3E")}.ag-icon-tree-closed:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-closed%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-closed%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E")}.ag-icon-tree-indeterminate:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-indeterminate%3C/title%3E%3Cpath d='M6.667 14.667h18.667v2.667H6.667z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-indeterminate%3C/title%3E%3Cpath d='M6.667 14.667h18.667v2.667H6.667z'/%3E%3C/svg%3E")}.ag-icon-tree-open:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-open%3C/title%3E%3Cpath d='M22.12 11.06 16 17.167 9.88 11.06 8 12.94l8 8 8-8z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-open%3C/title%3E%3Cpath d='M22.12 11.06 16 17.167 9.88 11.06 8 12.94l8 8 8-8z'/%3E%3C/svg%3E")}.ag-icon-unlinked:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eunlinked%3C/title%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eunlinked%3C/title%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z'/%3E%3C/svg%3E")}.ag-icon-up:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E")}.ag-icon-grip:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egrip%3C/title%3E%3Cpath d='M26.667 12H5.334v2.667h21.333zM5.333 20h21.333v-2.667H5.333z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egrip%3C/title%3E%3Cpath d='M26.667 12H5.334v2.667h21.333zM5.333 20h21.333v-2.667H5.333z'/%3E%3C/svg%3E")}.ag-icon-settings:before{-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E")}`,ZS=gv("iconSet","material").withCSS(KS),XS='.ag-icon:before{background-color:currentColor;content:"";display:block;height:var(--ag-icon-size);-webkit-mask-image:linear-gradient(#0000,#0000);mask-image:linear-gradient(#0000,#0000);-webkit-mask-size:contain;mask-size:contain;width:var(--ag-icon-size)}',nb={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-down":'<path d="m6 9 6 6 6-6"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',"small-up":'<path d="m18 15-6-6-6 6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},Yx=(e={})=>{let t=XS;for(const r of Object.keys(nb)){const i=QS(r,e.strokeWidth||1.5);t+=`.ag-icon-${r}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return t},QS=(e,t)=>{const r=nb[e];if(!r)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon ag-icon-${e}" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+r+"</svg>"},ob=(e={})=>gv("iconSet","quartz").withCSS(()=>Yx(e)),JS=gv("iconSet","quartzLight").withCSS(()=>Yx({strokeWidth:1})),e4=gv("iconSet","quartzRegular").withCSS(Yx),t4=gv("iconSet","quartzBold").withCSS(()=>Yx({strokeWidth:2})),r4=":where(input[class^=ag-][type=number]:not(.ag-number-field-input-stepper)){-moz-appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}}:where(input[class^=ag-]:not([type]),input[class^=ag-][type=text],input[class^=ag-][type=number],input[class^=ag-][type=tel],input[class^=ag-][type=date],input[class^=ag-][type=datetime-local],textarea[class^=ag-]){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);cursor:pointer;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color)}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}}&.ag-ltr :where(input[class^=ag-]:not([type]),input[class^=ag-][type=text],input[class^=ag-][type=number],input[class^=ag-][type=tel],input[class^=ag-][type=date],input[class^=ag-][type=datetime-local],textarea[class^=ag-]){padding-left:var(--ag-input-padding-start)}&.ag-rtl :where(input[class^=ag-]:not([type]),input[class^=ag-][type=text],input[class^=ag-][type=number],input[class^=ag-][type=tel],input[class^=ag-][type=date],input[class^=ag-][type=datetime-local],textarea[class^=ag-]){padding-right:var(--ag-input-padding-start)}",i4=":where(input[class^=ag-]:not([type]),input[class^=ag-][type=text],input[class^=ag-][type=number],input[class^=ag-][type=tel],input[class^=ag-][type=date],input[class^=ag-][type=datetime-local],textarea[class^=ag-]){border-left:none;border-right:none;border-top:none}",Zw=gv("inputStyle","base").withAdditionalParams({inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"}}).withCSS(r4),Kx=b3(Zw,"bordered").withParams({inputBackgroundColor:{ref:"backgroundColor"},inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:{ref:"accentColor"}},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:{ref:"foregroundColor",mix:.06,onto:"backgroundColor"},inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}}}),n4=b3(Zw,"underlined").withParams({inputBorder:{width:2,color:{ref:"foregroundColor",mix:.3}},inputPaddingStart:{ref:"spacing"},inputFocusBorder:"solid 2px var(--ag-accent-color)",inputDisabledTextColor:{ref:"textColor",mix:.5},inputDisabledBorder:"solid 1px var(--ag-border-color)",inputInvalidBorder:{width:2,color:{ref:"invalidColor",mix:.3}}}).withCSS(i4),o4='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex;.ag-tabs-header{flex:1}}.ag-tabs-close-button-wrapper{border:0;padding:var(--ag-spacing)}&.ag-ltr .ag-tabs-close-button-wrapper{border-right:1px solid var(--ag-border-color)}&.ag-rtl .ag-tabs-close-button-wrapper{border-left:1px solid var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}&:focus-visible{box-shadow:inset var(--ag-focus-shadow)}}&.ag-ltr .ag-tab{&.ag-tab-selected{&:not(:first-of-type){border-left-color:var(--ag-tab-selected-border-color)}&:not(:last-of-type){border-right-color:var(--ag-tab-selected-border-color)}}}&.ag-rtl .ag-tab{&.ag-tab-selected{&:not(:first-of-type){border-right-color:var(--ag-tab-selected-border-color)}&:not(:last-of-type){border-left-color:var(--ag-tab-selected-border-color)}}}',a4=".ag-tab{border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;border-top:var(--ag-tab-selected-border-width) solid transparent;flex:0;&.ag-tab-selected{border-left-color:var(--ag-tab-selected-border-color);border-right-color:var(--ag-tab-selected-border-color);border-top-color:var(--ag-tab-selected-border-color);margin-bottom:-1px;padding-bottom:calc(var(--ag-tab-bottom-padding) + 1px)}}",ox=gv("tabStyle","base").withAdditionalParams({tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:1,tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:"0",tabSelectedUnderlineTransitionDuration:"0",tabBarBorder:!1}).withCSS(o4),ab=b3(ox,"quartz").withParams({tabBarBorder:!0,tabBarBackgroundColor:{ref:"foregroundColor",mix:.05},tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:{ref:"backgroundColor"}}),s4=b3(ox,"material").withParams({tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabSelectedUnderlineColor:{ref:"primaryColor"},tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:"0"}),sb=b3(ox,"alpine").withParams({tabBarBorder:!0,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabHoverTextColor:{ref:"accentColor"},tabSelectedTextColor:{ref:"accentColor"},tabSelectedUnderlineColor:{ref:"accentColor"},tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:"0.3s"}),lb=b3(ox,"rolodex").withParams({tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabBarHorizontalPadding:{ref:"spacing"},tabBarTopPadding:{ref:"spacing"},tabBarBorder:!0,tabHorizontalPadding:{calc:"spacing * 2"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:{ref:"spacing"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:{ref:"backgroundColor"}}).withCSS(a4),Xw=e=>XC(e).withPart(rb),l4=Xw("quartz").withPart(Yw).withPart(ob).withPart(ab).withPart(()=>Kx).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),c4=Xw("alpine").withPart(Yw).withPart(Kw).withPart(sb).withPart(Kx).withParams({accentColor:"#2196f3",selectedRowBackgroundColor:{ref:"accentColor",mix:.3},inputFocusBorder:{color:{ref:"accentColor",mix:.4}},fontSize:13,dataFontSize:14,headerFontWeight:700,borderRadius:3,wrapperBorderRadius:3,tabSelectedUnderlineColor:{ref:"accentColor"},tabSelectedBorderWidth:2,tabSelectedUnderlineTransitionDuration:.3}),u4=Xw("balham").withPart(ib).withPart(Kw).withPart(lb).withPart(Kx).withParams({spacing:4,borderRadius:2,wrapperBorderRadius:2,headerColumnResizeHandleColor:"transparent",headerColumnBorder:!0,headerColumnBorderHeight:"50%",oddRowBackgroundColor:{ref:"chromeBackgroundColor",mix:.5},headerTextColor:{ref:"foregroundColor",mix:.5},fontSize:12,headerFontWeight:"bold"});return c0.__registerModules([Ow,AC,GC,LC],!1,void 0),main_cjs}var index_cjs,hasRequiredIndex_cjs;function requireIndex_cjs(){if(hasRequiredIndex_cjs)return index_cjs;hasRequiredIndex_cjs=1;var n=Object.create,h=Object.defineProperty,s=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyNames,M=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty,V=(Hl,Iu)=>{for(var Fd in Iu)h(Hl,Fd,{get:Iu[Fd],enumerable:!0})},oe=(Hl,Iu,Fd,Ud)=>{if(Iu&&typeof Iu=="object"||typeof Iu=="function")for(let eh of _(Iu))!$.call(Hl,eh)&&eh!==Fd&&h(Hl,eh,{get:()=>Iu[eh],enumerable:!(Ud=s(Iu,eh))||Ud.enumerable});return Hl},Y=(Hl,Iu,Fd)=>(Fd=Hl!=null?n(M(Hl)):{},oe(!Hl||!Hl.__esModule?h(Fd,"default",{value:Hl,enumerable:!0}):Fd,Hl)),ie=Hl=>oe(h({},"__esModule",{value:!0}),Hl),zn={};V(zn,{AgGridReact:()=>Gu,CustomComponentContext:()=>Rd,getInstance:()=>$m,useGridCellEditor:()=>wd,useGridDate:()=>gd,useGridFilter:()=>jd,useGridFloatingFilter:()=>Qd,useGridMenuItem:()=>ih,warnReactiveCustomComponents:()=>_d}),index_cjs=ie(zn);var Et=Y(requireReact()),ml=requireMain_cjs(),rl=Y(requireReact()),Ml=requireMain_cjs(),kl=Y(requireReact()),_u=Y(requireReact()),Hu=_u.default.createContext({}),bu=(Hl,Iu,Fd,Ud)=>{if(!Hl||Hl.componentFromFramework||Iu.isDestroyed())return;const Sh=Hl.newAgStackInstance();if(Sh==null)return;let Lh,Ah,yh=!1;return Sh.then(Nh=>{if(yh){Iu.destroyBean(Nh);return}Lh=Nh,Ah=Lh.getGui(),Fd.appendChild(Ah),dl(Ud,Lh)}),()=>{yh=!0,Lh&&(Ah?.parentElement?.removeChild(Ah),Iu.destroyBean(Lh),Ud&&dl(Ud,void 0))}},dl=(Hl,Iu)=>{if(Hl)if(Hl instanceof Function)Hl(Iu);else{const Fd=Hl;Fd.current=Iu}},Tl=Y(requireReact()),$l=Y(requireReactDom()),Bl=(...Hl)=>Hl.filter(Fd=>Fd!=null&&Fd!=="").join(" "),Pu=class gb{constructor(...Iu){this.classesMap={},Iu.forEach(Fd=>{this.classesMap[Fd]=!0})}setClass(Iu,Fd){if(!!this.classesMap[Iu]==Fd)return this;const eh=new gb;return eh.classesMap={...this.classesMap},eh.classesMap[Iu]=Fd,eh}toString(){return Object.keys(this.classesMap).filter(Fd=>this.classesMap[Fd]).join(" ")}},Il=Hl=>{const Iu=()=>typeof Symbol=="function"&&Symbol.for,Fd=()=>Iu()?Symbol.for("react.memo"):60115;return typeof Hl=="function"&&!(Hl.prototype&&Hl.prototype.isReactComponent)||typeof Hl=="object"&&Hl.$$typeof===Fd()},ud=Tl.default.version?.split(".")[0],pd=ud==="16"||ud==="17";function id(){return ud==="19"}var rh=!1;function qd(Hl){return rh||setTimeout(()=>rh=!1,0),rh=!0,Hl()}var oh=(Hl,Iu)=>{!pd&&Hl&&!rh?$l.default.flushSync(Iu):Iu()};function Ed(Hl,Iu,Fd){if(Iu==null||Hl==null)return Iu;if(Hl===Iu||Iu.length===0&&Hl.length===0)return Hl;if(Fd||Hl.length===0&&Iu.length>0||Hl.length>0&&Iu.length===0)return Iu;const Ud=[],eh=[],Sh=new Map,Lh=new Map;for(let Ah=0;Ah<Iu.length;Ah++){const yh=Iu[Ah];Lh.set(yh.instanceId,yh)}for(let Ah=0;Ah<Hl.length;Ah++){const yh=Hl[Ah];Sh.set(yh.instanceId,yh),Lh.has(yh.instanceId)&&Ud.push(yh)}for(let Ah=0;Ah<Iu.length;Ah++){const yh=Iu[Ah],Nh=yh.instanceId;Sh.has(Nh)||eh.push(yh)}return Ud.length===Hl.length&&eh.length===0?Hl:Ud.length===0&&eh.length===Iu.length?Iu:Ud.length===0?eh:eh.length===0?Ud:[...Ud,...eh]}var Nl=(0,kl.forwardRef)((Hl,Iu)=>{const{ctrlsFactory:Fd,context:Ud}=(0,kl.useContext)(Hu),eh=(0,kl.useRef)(null),Sh=(0,kl.useRef)(null),Lh=(0,kl.useRef)(null),Ah=(0,kl.useRef)(null),yh=(0,kl.useRef)(null),Nh=(0,kl.useRef)(),[sh,Th]=(0,kl.useState)(),[dp,$h]=(0,kl.useState)(),[ap,Yh]=(0,kl.useState)(),[Mh,pp]=(0,kl.useState)(()=>new Pu),[Ip,gp]=(0,kl.useState)(()=>new Pu("ag-hidden")),[Xh,Qp]=(0,kl.useState)(()=>new Pu("ag-hidden")),[Wp,$p]=(0,kl.useState)(()=>new Pu("ag-invisible"));(0,kl.useImperativeHandle)(Iu,()=>({refresh(){return!1}})),(0,kl.useLayoutEffect)(()=>bu(sh,Ud,Sh.current),[sh]);const Hp=(0,kl.useCallback)(Xf=>{if(eh.current=Xf,!Xf){Nh.current=Ud.destroyBean(Nh.current);return}const Nf={setInnerRenderer:(vg,Pg)=>{Th(vg),Yh(Pg)},setChildCount:vg=>$h(vg),addOrRemoveCssClass:(vg,Pg)=>pp(cg=>cg.setClass(vg,Pg)),setContractedDisplayed:vg=>Qp(Pg=>Pg.setClass("ag-hidden",!vg)),setExpandedDisplayed:vg=>gp(Pg=>Pg.setClass("ag-hidden",!vg)),setCheckboxVisible:vg=>$p(Pg=>Pg.setClass("ag-invisible",!vg))},ag=Fd.getInstance("groupCellRendererCtrl");ag&&(Nh.current=Ud.createBean(ag),Nh.current.init(Nf,Xf,Lh.current,Ah.current,yh.current,Nl,Hl))},[]),Vp=(0,kl.useMemo)(()=>`ag-cell-wrapper ${Mh.toString()}`,[Mh]),Op=(0,kl.useMemo)(()=>`ag-group-expanded ${Ip.toString()}`,[Ip]),Jp=(0,kl.useMemo)(()=>`ag-group-contracted ${Xh.toString()}`,[Xh]),Df=(0,kl.useMemo)(()=>`ag-group-checkbox ${Wp.toString()}`,[Wp]),tm=sh&&sh.componentFromFramework,og=tm?sh.componentClass:void 0,tg=sh==null&&ap!=null,Zf=(0,Ml._escapeString)(ap,!0);return kl.default.createElement("span",{className:Vp,ref:Hp,...Hl.colDef?{}:{role:Nh.current?.getCellAriaRole()}},kl.default.createElement("span",{className:Op,ref:Ah}),kl.default.createElement("span",{className:Jp,ref:yh}),kl.default.createElement("span",{className:Df,ref:Lh}),kl.default.createElement("span",{className:"ag-group-value",ref:Sh},tg&&kl.default.createElement(kl.default.Fragment,null,Zf),tm&&kl.default.createElement(og,{...sh.params})),kl.default.createElement("span",{className:"ag-group-child-count"},dp))}),Gd=Nl,Cd=requireMain_cjs(),Bu=Y(requireReact()),wh=requireReact(),Rd=(0,wh.createContext)({setMethods:()=>{}}),dh=Hl=>{const{initialProps:Iu,addUpdateCallback:Fd,CustomComponentClass:Ud,setMethods:eh}=Hl,[{key:Sh,...Lh},Ah]=(0,Bu.useState)(Iu);return(0,Bu.useEffect)(()=>{Fd(yh=>Ah(yh))},[]),Bu.default.createElement(Rd.Provider,{value:{setMethods:eh}},Bu.default.createElement(Ud,{key:Sh,...Lh}))},Ih=(0,Bu.memo)(dh),nd=requireMain_cjs(),Yd=requireReact(),Kh=requireReactDom(),rp=0;function lh(){return`agPortalKey_${++rp}`}var yp=class{constructor(Hl,Iu,Fd,Ud){this.portal=null,this.oldPortal=null,this.reactComponent=Hl,this.portalManager=Iu,this.componentType=Fd,this.suppressFallbackMethods=!!Ud,this.statelessComponent=this.isStateless(this.reactComponent),this.key=lh(),this.portalKey=lh(),this.instanceCreated=this.isStatelessComponent()?nd.AgPromise.resolve(!1):new nd.AgPromise(eh=>{this.resolveInstanceCreated=eh})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const Hl=this.portal;Hl&&this.portalManager.destroyPortal(Hl)}createParentElement(Hl){const Iu=this.portalManager.getComponentWrappingElement(),Fd=document.createElement(Iu||"div");return Fd.classList.add("ag-react-container"),Hl.reactContainer=Fd,Fd}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&((0,nd._warnOnce)('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&((0,nd._warnOnce)('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(Iu=>this.eParentElement.classList.add(Iu))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(Hl){return typeof Hl=="function"&&!(Hl.prototype&&Hl.prototype.isReactComponent)||typeof Hl=="object"&&Hl.$$typeof===this.getMemoType()}hasMethod(Hl){const Iu=this.getFrameworkComponentInstance();return!!Iu&&Iu[Hl]!=null||this.fallbackMethodAvailable(Hl)}callMethod(Hl,Iu){const Fd=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(Hl,Iu&&Iu[0]?Iu[0]:{});if(!Fd){setTimeout(()=>this.callMethod(Hl,Iu));return}const Ud=Fd[Hl];if(Ud)return Ud.apply(Fd,Iu);if(this.fallbackMethodAvailable(Hl))return this.fallbackMethod(Hl,Iu&&Iu[0]?Iu[0]:{})}addMethod(Hl,Iu){this[Hl]=Iu}init(Hl){return this.eParentElement=this.createParentElement(Hl),this.createOrUpdatePortal(Hl),new nd.AgPromise(Iu=>this.createReactComponent(Iu))}createOrUpdatePortal(Hl){this.isStatelessComponent()||(this.ref=Iu=>{this.componentInstance=Iu,this.addParentContainerStyleAndClasses(),this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},Hl.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...Hl,key:this.key}),this.portal=(0,Kh.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(Hl,Iu){return(0,Yd.createElement)(Hl,Iu)}createReactComponent(Hl){this.portalManager.mountReactPortal(this.portal,this,Hl)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(Hl){this.oldPortal=this.portal,this.createOrUpdatePortal(Hl),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(Hl,Iu){const Fd=this[`${Hl}Component`];if(!this.suppressFallbackMethods&&Fd)return Fd.bind(this)(Iu)}fallbackMethodAvailable(Hl){return this.suppressFallbackMethods?!1:!!this[`${Hl}Component`]}};function Cp(Hl,Iu,Fd){Hl.forEach(Ud=>{const eh=Iu[Ud];eh&&(Fd[Ud]=eh)})}var vp=class extends yp{constructor(){super(...arguments),this.awaitUpdateCallback=new Cd.AgPromise(Hl=>{this.resolveUpdateCallback=Hl}),this.wrapperComponent=Ih}init(Hl){return this.sourceParams=Hl,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(Hl,Iu){return super.createElement(this.wrapperComponent,{initialProps:Iu,CustomComponentClass:Hl,setMethods:Fd=>this.setMethods(Fd),addUpdateCallback:Fd=>{this.updateCallback=()=>(Fd(this.getProps()),new Cd.AgPromise(Ud=>{setTimeout(()=>{Ud()})})),this.resolveUpdateCallback()}})}setMethods(Hl){this.providedMethods=Hl,Cp(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new Cd.AgPromise(Hl=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>Hl())}))}},mf=class extends vp{refresh(Hl){return this.sourceParams=Hl,this.refreshProps(),!0}},Zp=class extends vp{constructor(){super(...arguments),this.date=null,this.onDateChange=Hl=>this.updateDate(Hl)}getDate(){return this.date}setDate(Hl){this.date=Hl,this.refreshProps()}refresh(Hl){this.sourceParams=Hl,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(Hl){this.setDate(Hl),this.sourceParams.onDateChanged()}getProps(){const Hl=super.getProps();return Hl.date=this.date,Hl.onDateChange=this.onDateChange,delete Hl.onDateChanged,Hl}},kf=class extends vp{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(Hl,Iu){this.icon=Hl,this.shake=Iu,this.refreshProps()}setLabel(Hl){this.label=Hl,this.refreshProps()}getProps(){const Hl=super.getProps(),{label:Iu,icon:Fd,shake:Ud}=this;return Hl.label=Iu,Hl.icon=Fd,Hl.shake=Ud,Hl}},Eg=class extends vp{constructor(){super(...arguments),this.model=null,this.onModelChange=Hl=>this.updateModel(Hl),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return this.model!=null}doesFilterPass(Hl){return this.providedMethods.doesFilterPass(Hl)}getModel(){return this.model}setModel(Hl){return this.expectingNewMethods=!0,this.model=Hl,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(Hl){return this.sourceParams=Hl,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(Hl){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==Hl?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(Hl)}updateModel(Hl){this.setModel(Hl).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const Hl=super.getProps();return Hl.model=this.model,Hl.onModelChange=this.onModelChange,Hl.onUiChange=this.onUiChange,delete Hl.filterChangedCallback,delete Hl.filterModifiedCallback,delete Hl.valueGetter,Hl}},Gg=requireMain_cjs();function Hf(Hl,Iu){Hl.parentFilterInstance(Fd=>{(Fd.setModel(Iu)||Gg.AgPromise.resolve()).then(()=>{Hl.filterParams.filterChangedCallback()})})}var Rg=class{constructor(Hl,Iu){this.floatingFilterParams=Hl,this.refreshProps=Iu,this.model=null,this.onModelChange=Fd=>this.updateModel(Fd)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(Hl){this.model=Hl,this.refreshProps()}refresh(Hl){this.floatingFilterParams=Hl,this.refreshProps()}setMethods(Hl){Cp(this.getOptionalMethods(),Hl,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(Hl){this.model=Hl,this.refreshProps(),Hf(this.floatingFilterParams,Hl)}},fg=class extends vp{constructor(){super(...arguments),this.model=null,this.onModelChange=Hl=>this.updateModel(Hl)}onParentModelChanged(Hl){this.model=Hl,this.refreshProps()}refresh(Hl){this.sourceParams=Hl,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(Hl){this.model=Hl,this.refreshProps(),Hf(this.sourceParams,Hl)}getProps(){const Hl=super.getProps();return Hl.model=this.model,Hl.onModelChange=this.onModelChange,Hl}},eg=class extends vp{refresh(Hl){this.sourceParams=Hl,this.refreshProps()}},Wg=class extends vp{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=Hl=>this.updateActive(Hl)}setActive(Hl){this.awaitSetActive(Hl)}setExpanded(Hl){this.expanded=Hl,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(Hl){return this.active=Hl,this.refreshProps()}updateActive(Hl){const Iu=this.awaitSetActive(Hl);Hl&&Iu.then(()=>this.sourceParams.onItemActivated())}getProps(){const Hl=super.getProps();return Hl.active=this.active,Hl.expanded=this.expanded,Hl.onActiveChange=this.onActiveChange,delete Hl.onItemActivated,Hl}},Lg=class extends vp{refresh(Hl){this.sourceParams=Hl,this.refreshProps()}},$g=class extends vp{refresh(Hl){return this.sourceParams=Hl,this.refreshProps(),!0}},Bm=class extends vp{constructor(){super(...arguments),this.onStateChange=Hl=>this.updateState(Hl)}refresh(Hl){return this.sourceParams=Hl,this.refreshProps(),!0}getState(){return this.state}updateState(Hl){this.state=Hl,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const Hl=super.getProps();return Hl.state=this.state,Hl.onStateChange=this.onStateChange,Hl}},Lm=requireMain_cjs();function $m(Hl,Iu){(Hl?.getInstance?.()??Lm.AgPromise.resolve(void 0)).then(Ud=>Iu(Ud))}function _d(){(0,Lm._warnOnce)("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var Zd=1e3,xh=class{constructor(Hl,Iu,Fd){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=Iu||"div",this.refresher=Hl,this.maxComponentCreationTimeMs=Fd||Zd}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(Hl){this.portals=this.portals.filter(Iu=>Iu!==Hl),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(Hl,Iu,Fd){this.portals=[...this.portals,Hl],this.waitForInstance(Iu,Fd),this.batchUpdate()}updateReactPortal(Hl,Iu){this.portals[this.portals.indexOf(Hl)]=Iu,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(Hl,Iu,Fd=Date.now()){if(this.destroyed){Iu(null);return}if(Hl.rendered())Iu(Hl);else{if(Date.now()-Fd>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(Hl,Iu,Fd)})}}},Fp=requireMain_cjs(),ip=Y(requireReact()),cf=requireMain_cjs(),Jh=Y(requireReact()),lf=requireMain_cjs(),vf=Y(requireReact()),uf=requireMain_cjs(),Gf=Y(requireReact()),Hm=requireMain_cjs(),Vg=Y(requireReact()),Im=requireMain_cjs(),qg=Y(requireReact()),vm=({ctrl:Hl})=>{const Iu=Hl.isAlive(),{context:Fd}=(0,qg.useContext)(Hu),Ud=Iu?Hl.getColId():void 0,[eh,Sh]=(0,qg.useState)(),Lh=(0,qg.useRef)(),Ah=(0,qg.useRef)(null),yh=(0,qg.useRef)(null),Nh=(0,qg.useRef)(null),sh=(0,qg.useRef)(),Th=(0,qg.useRef)();Iu&&!Th.current&&(Th.current=new Im.CssClassManager(()=>Ah.current));const dp=(0,qg.useCallback)(Mh=>{if(Ah.current=Mh,Lh.current=Mh?Fd.createBean(new Im._EmptyBean):Fd.destroyBean(Lh.current),!Mh||!Iu)return;const pp={setWidth:gp=>{Ah.current&&(Ah.current.style.width=gp)},addOrRemoveCssClass:(gp,Xh)=>Th.current.addOrRemoveCssClass(gp,Xh),setAriaSort:gp=>{Ah.current&&(gp?(0,Im._setAriaSort)(Ah.current,gp):(0,Im._removeAriaSort)(Ah.current))},setUserCompDetails:gp=>Sh(gp),getUserCompInstance:()=>sh.current||void 0};Hl.setComp(pp,Mh,yh.current,Nh.current,Lh.current);const Ip=Hl.getSelectAllGui();yh.current?.insertAdjacentElement("afterend",Ip),Lh.current.addDestroyFunc(()=>Ip.remove())},[]);(0,qg.useLayoutEffect)(()=>bu(eh,Fd,Nh.current,sh),[eh]),(0,qg.useEffect)(()=>{Hl.setDragSource(Ah.current)},[eh]);const $h=(0,qg.useMemo)(()=>!!(eh?.componentFromFramework&&Il(eh.componentClass)),[eh]),ap=eh&&eh.componentFromFramework,Yh=eh&&eh.componentClass;return qg.default.createElement("div",{ref:dp,className:"ag-header-cell","col-id":Ud,role:"columnheader"},qg.default.createElement("div",{ref:yh,className:"ag-header-cell-resize",role:"presentation"}),qg.default.createElement("div",{ref:Nh,className:"ag-header-cell-comp-wrapper",role:"presentation"},ap&&$h&&qg.default.createElement(Yh,{...eh.params}),ap&&!$h&&qg.default.createElement(Yh,{...eh.params,ref:sh})))},am=(0,qg.memo)(vm),Jg=requireMain_cjs(),pf=Y(requireReact()),ff=({ctrl:Hl})=>{const{context:Iu,gos:Fd}=(0,pf.useContext)(Hu),[Ud,eh]=(0,pf.useState)(()=>new Pu("ag-header-cell","ag-floating-filter")),[Sh,Lh]=(0,pf.useState)(()=>new Pu),[Ah,yh]=(0,pf.useState)(()=>new Pu("ag-floating-filter-button","ag-hidden")),[Nh,sh]=(0,pf.useState)("false"),[Th,dp]=(0,pf.useState)(),[,$h]=(0,pf.useState)(1),ap=(0,pf.useRef)(),Yh=(0,pf.useRef)(null),Mh=(0,pf.useRef)(null),pp=(0,pf.useRef)(null),Ip=(0,pf.useRef)(null),gp=(0,pf.useRef)(),Xh=(0,pf.useRef)(),Qp=Zf=>{Zf!=null&&gp.current&&gp.current(Zf)},Wp=(0,pf.useCallback)(Zf=>{if(Yh.current=Zf,ap.current=Zf?Iu.createBean(new Jg._EmptyBean):Iu.destroyBean(ap.current),!Zf)return;Xh.current=new Jg.AgPromise(Nf=>{gp.current=Nf});const Xf={addOrRemoveCssClass:(Nf,ag)=>eh(vg=>vg.setClass(Nf,ag)),addOrRemoveBodyCssClass:(Nf,ag)=>Lh(vg=>vg.setClass(Nf,ag)),setButtonWrapperDisplayed:Nf=>{yh(ag=>ag.setClass("ag-hidden",!Nf)),sh(Nf?"false":"true")},setWidth:Nf=>{Yh.current&&(Yh.current.style.width=Nf)},setCompDetails:Nf=>dp(Nf),getFloatingFilterComp:()=>Xh.current?Xh.current:null,setMenuIcon:Nf=>Ip.current?.appendChild(Nf)};Hl.setComp(Xf,Zf,Ip.current,Mh.current,ap.current)},[]);(0,pf.useLayoutEffect)(()=>bu(Th,Iu,Mh.current,Qp),[Th]);const $p=(0,pf.useMemo)(()=>Ud.toString(),[Ud]),Hp=(0,pf.useMemo)(()=>Sh.toString(),[Sh]),Vp=(0,pf.useMemo)(()=>Ah.toString(),[Ah]),Op=(0,pf.useMemo)(()=>!!(Th&&Th.componentFromFramework&&Il(Th.componentClass)),[Th]),Jp=(0,pf.useMemo)(()=>Fd.get("reactiveCustomComponents"),[]),Df=(0,pf.useMemo)(()=>{if(Th)if(Jp){const Zf=new Rg(Th.params,()=>$h(Xf=>Xf+1));return Qp(Zf),Zf}else Th.componentFromFramework&&_d()},[Th]),tm=Df?.getProps(),og=Th&&Th.componentFromFramework,tg=Th&&Th.componentClass;return pf.default.createElement("div",{ref:Wp,className:$p,role:"gridcell"},pf.default.createElement("div",{ref:Mh,className:Hp,role:"presentation"},og&&!Jp&&pf.default.createElement(tg,{...Th.params,ref:Op?()=>{}:Qp}),og&&Jp&&pf.default.createElement(Rd.Provider,{value:{setMethods:Zf=>Df.setMethods(Zf)}},pf.default.createElement(tg,{...tm}))),pf.default.createElement("div",{ref:pp,"aria-hidden":Nh,className:Vp,role:"presentation"},pf.default.createElement("button",{ref:Ip,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},r0=(0,pf.memo)(ff),M0=requireMain_cjs(),wf=Y(requireReact()),Gm=({ctrl:Hl})=>{const{context:Iu}=(0,wf.useContext)(Hu),[Fd,Ud]=(0,wf.useState)(()=>new Pu),[eh,Sh]=(0,wf.useState)(()=>new Pu),[Lh,Ah]=(0,wf.useState)("false"),[yh,Nh]=(0,wf.useState)(),[sh,Th]=(0,wf.useState)(),dp=(0,wf.useMemo)(()=>Hl.getColId(),[]),$h=(0,wf.useRef)(),ap=(0,wf.useRef)(null),Yh=(0,wf.useRef)(null),Mh=(0,wf.useRef)(null),pp=(0,wf.useRef)(),Ip=(0,wf.useCallback)(Hp=>{if(ap.current=Hp,$h.current=Hp?Iu.createBean(new M0._EmptyBean):Iu.destroyBean($h.current),!Hp)return;const Vp={setWidth:Op=>{ap.current&&(ap.current.style.width=Op)},addOrRemoveCssClass:(Op,Jp)=>Ud(Df=>Df.setClass(Op,Jp)),setHeaderWrapperHidden:Op=>{const Jp=Mh.current;Jp&&(Op?Jp.style.setProperty("display","none"):Jp.style.removeProperty("display"))},setHeaderWrapperMaxHeight:Op=>{const Jp=Mh.current;Jp&&(Op!=null?Jp.style.setProperty("max-height",`${Op}px`):Jp.style.removeProperty("max-height"),Jp.classList.toggle("ag-header-cell-comp-wrapper-limited-height",Op!=null))},setUserCompDetails:Op=>Th(Op),setResizableDisplayed:Op=>{Sh(Jp=>Jp.setClass("ag-hidden",!Op)),Ah(Op?"false":"true")},setAriaExpanded:Op=>Nh(Op),getUserCompInstance:()=>pp.current||void 0};Hl.setComp(Vp,Hp,Yh.current,Mh.current,$h.current)},[]);(0,wf.useLayoutEffect)(()=>bu(sh,Iu,Mh.current),[sh]),(0,wf.useEffect)(()=>{ap.current&&Hl.setDragSource(ap.current)},[sh]);const gp=(0,wf.useMemo)(()=>!!(sh?.componentFromFramework&&Il(sh.componentClass)),[sh]),Xh=(0,wf.useMemo)(()=>"ag-header-group-cell "+Fd.toString(),[Fd]),Qp=(0,wf.useMemo)(()=>"ag-header-cell-resize "+eh.toString(),[eh]),Wp=sh&&sh.componentFromFramework,$p=sh&&sh.componentClass;return wf.default.createElement("div",{ref:Ip,className:Xh,"col-id":dp,role:"columnheader","aria-expanded":yh},wf.default.createElement("div",{ref:Mh,className:"ag-header-cell-comp-wrapper",role:"presentation"},Wp&&gp&&wf.default.createElement($p,{...sh.params}),Wp&&!gp&&wf.default.createElement($p,{...sh.params,ref:pp})),wf.default.createElement("div",{ref:Yh,"aria-hidden":Lh,className:Qp}))},h0=(0,wf.memo)(Gm),i0=({ctrl:Hl})=>{const{context:Iu}=(0,Vg.useContext)(Hu),{topOffset:Fd,rowHeight:Ud}=(0,Vg.useMemo)(()=>Hl.getTopAndHeight(),[]),eh=Hl.getAriaRowIndex(),Sh=Hl.getHeaderRowClass(),[Lh,Ah]=(0,Vg.useState)(()=>Ud+"px"),[yh,Nh]=(0,Vg.useState)(()=>Fd+"px"),sh=(0,Vg.useRef)(null),Th=(0,Vg.useRef)(null),[dp,$h]=(0,Vg.useState)(()=>Hl.getHeaderCtrls()),ap=(0,Vg.useRef)(),Yh=(0,Vg.useRef)(null),Mh=(0,Vg.useCallback)(gp=>{if(Yh.current=gp,ap.current=gp?Iu.createBean(new Hm._EmptyBean):Iu.destroyBean(ap.current),!gp)return;const Xh={setHeight:Qp=>Ah(Qp),setTop:Qp=>Nh(Qp),setHeaderCtrls:(Qp,Wp,$p)=>{Th.current=sh.current,sh.current=Qp;const Hp=Ed(Th.current,Qp,Wp);Hp!==Th.current&&oh($p,()=>$h(Hp))},setWidth:Qp=>{Yh.current&&(Yh.current.style.width=Qp)}};Hl.setComp(Xh,ap.current,!1)},[]),pp=(0,Vg.useMemo)(()=>({height:Lh,top:yh}),[Lh,yh]),Ip=(0,Vg.useCallback)(gp=>{switch(Hl.getType()){case Hm.HeaderRowType.COLUMN_GROUP:return Vg.default.createElement(h0,{ctrl:gp,key:gp.instanceId});case Hm.HeaderRowType.FLOATING_FILTER:return Vg.default.createElement(r0,{ctrl:gp,key:gp.instanceId});default:return Vg.default.createElement(am,{ctrl:gp,key:gp.instanceId})}},[]);return Vg.default.createElement("div",{ref:Mh,className:Sh,role:"row",style:pp,"aria-rowindex":eh},dp.map(Ip))},Tm=(0,Vg.memo)(i0),Vm=({pinned:Hl})=>{const[Iu,Fd]=(0,Gf.useState)(!0),[Ud,eh]=(0,Gf.useState)([]),{context:Sh}=(0,Gf.useContext)(Hu),Lh=(0,Gf.useRef)(null),Ah=(0,Gf.useRef)(null),yh=(0,Gf.useRef)(),Nh=Hl==="left",sh=Hl==="right",Th=!Nh&&!sh,dp=(0,Gf.useCallback)(Yh=>{if(Lh.current=Yh,yh.current=Yh?Sh.createBean(new uf.HeaderRowContainerCtrl(Hl)):Sh.destroyBean(yh.current),!Yh)return;const Mh={setDisplayed:Fd,setCtrls:pp=>eh(pp),setCenterWidth:pp=>{Ah.current&&(Ah.current.style.width=pp)},setViewportScrollLeft:pp=>{Lh.current&&(Lh.current.scrollLeft=pp)},setPinnedContainerWidth:pp=>{Lh.current&&(Lh.current.style.width=pp,Lh.current.style.minWidth=pp,Lh.current.style.maxWidth=pp)}};yh.current.setComp(Mh,Lh.current)},[]),$h=Iu?"":"ag-hidden",ap=()=>Ud.map(Yh=>Gf.default.createElement(Tm,{ctrl:Yh,key:Yh.instanceId}));return Gf.default.createElement(Gf.default.Fragment,null,Nh&&Gf.default.createElement("div",{ref:dp,className:"ag-pinned-left-header "+$h,"aria-hidden":!Iu,role:"rowgroup"},ap()),sh&&Gf.default.createElement("div",{ref:dp,className:"ag-pinned-right-header "+$h,"aria-hidden":!Iu,role:"rowgroup"},ap()),Th&&Gf.default.createElement("div",{ref:dp,className:"ag-header-viewport "+$h,role:"presentation"},Gf.default.createElement("div",{ref:Ah,className:"ag-header-container",role:"rowgroup"},ap())))},ym=(0,Gf.memo)(Vm),l0=()=>{const[Hl,Iu]=(0,vf.useState)(()=>new Pu),[Fd,Ud]=(0,vf.useState)(),{context:eh}=(0,vf.useContext)(Hu),Sh=(0,vf.useRef)(null),Lh=(0,vf.useRef)(),Ah=(0,vf.useCallback)(sh=>{if(Sh.current=sh,Lh.current=sh?eh.createBean(new lf.GridHeaderCtrl):eh.destroyBean(Lh.current),!sh)return;const Th={addOrRemoveCssClass:(dp,$h)=>Iu(ap=>ap.setClass(dp,$h)),setHeightAndMinHeight:dp=>Ud(dp)};Lh.current.setComp(Th,sh,sh)},[]),yh=(0,vf.useMemo)(()=>"ag-header "+Hl.toString(),[Hl]),Nh=(0,vf.useMemo)(()=>({height:Fd,minHeight:Fd}),[Fd]);return vf.default.createElement("div",{ref:Ah,className:yh,style:Nh,role:"presentation"},vf.default.createElement(ym,{pinned:"left"}),vf.default.createElement(ym,{pinned:null}),vf.default.createElement(ym,{pinned:"right"}))},R0=(0,vf.memo)(l0),p0=requireReact(),j0=(Hl,Iu)=>{(0,p0.useEffect)(()=>{const Fd=Iu.current;if(Fd){const Ud=Fd.parentElement;if(Ud){const eh=document.createComment(Hl);return Ud.insertBefore(eh,Fd),()=>{Ud.removeChild(eh)}}}},[Hl])},lg=j0,sm=requireMain_cjs(),Cg=Y(requireReact()),S0=requireMain_cjs(),Kp=Y(requireReact()),rt=requireMain_cjs(),Uu=Y(requireReact()),Vd=requireMain_cjs(),Eh=class{constructor(Hl,Iu){this.cellEditorParams=Hl,this.refreshProps=Iu,this.instanceCreated=new Vd.AgPromise(Fd=>{this.resolveInstanceCreated=Fd}),this.onValueChange=Fd=>this.updateValue(Fd),this.value=Hl.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(Hl){this.cellEditorParams=Hl,this.refreshProps()}setMethods(Hl){Cp(this.getOptionalMethods(),Hl,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(Hl){this.componentInstance=Hl,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(Hl){this.value=Hl,this.refreshProps()}},ph=Y(requireReact()),jp=requireReactDom(),_p=requireReact(),Gp=Hl=>{const Iu=(0,_p.useRef)(Hl),Fd=(0,_p.useRef)(),Ud=(0,_p.useRef)(!1),eh=(0,_p.useRef)(!1),[,Sh]=(0,_p.useState)(0);Ud.current&&(eh.current=!0),(0,_p.useEffect)(()=>(Ud.current||(Fd.current=Iu.current(),Ud.current=!0),Sh(Lh=>Lh+1),()=>{eh.current&&Fd.current?.()}),[])},of=Hl=>{const[Iu,Fd]=(0,ph.useState)(),{context:Ud,popupService:eh,localeService:Sh,gos:Lh,editService:Ah}=(0,ph.useContext)(Hu);return Gp(()=>{const{editDetails:yh,cellCtrl:Nh,eParentCell:sh}=Hl,{compDetails:Th}=yh,dp=Lh.get("stopEditingWhenCellsLoseFocus"),$h=Ud.createBean(Ah.createPopupEditorWrapper(Th.params)),ap=$h.getGui();if(Hl.jsChildComp){const Xh=Hl.jsChildComp.getGui();Xh&&ap.appendChild(Xh)}const Yh={column:Nh.getColumn(),rowNode:Nh.getRowNode(),type:"popupCellEditor",eventSource:sh,ePopup:ap,position:yh.popupPosition,keepWithinBounds:!0},Mh=eh.positionPopupByComponent.bind(eh,Yh),pp=Sh.getLocaleTextFunc(),Ip=eh.addPopup({modal:dp,eChild:ap,closeOnEsc:!0,closedCallback:()=>{Nh.onPopupEditorClosed()},anchorToElement:sh,positionCallback:Mh,ariaLabel:pp("ariaLabelCellEditor","Cell Editor")}),gp=Ip?Ip.hideFunc:void 0;return Fd($h),Hl.jsChildComp?.afterGuiAttached?.(),()=>{gp?.(),Ud.destroyBean($h)}}),ph.default.createElement(ph.default.Fragment,null,Iu&&Hl.wrappedContent&&(0,jp.createPortal)(Hl.wrappedContent,Iu.getGui()))},Bp=(0,ph.memo)(of),rf=requireReact(),Rh=(Hl,Iu,Fd,Ud,eh,Sh)=>{const{context:Lh}=(0,rf.useContext)(Hu),Ah=(0,rf.useCallback)(()=>{const yh=eh.current;if(!yh)return;const Nh=yh.getGui();Nh&&Nh.parentElement&&Nh.parentElement.removeChild(Nh),Lh.destroyBean(yh),eh.current=void 0},[]);(0,rf.useEffect)(()=>{const yh=Hl!=null,Nh=Hl?.compDetails&&!Hl.compDetails.componentFromFramework,sh=Iu&&Fd==null;if(!(yh&&Nh&&!sh)){Ah();return}const dp=Hl.compDetails;if(eh.current){const ap=eh.current,Mh=ap.refresh!=null&&Hl.force==!1?ap.refresh(dp.params):!1;if(Mh===!0||Mh===void 0)return;Ah()}const $h=dp.newAgStackInstance();$h?.then(ap=>{if(!ap)return;const Yh=ap.getGui();if(!Yh)return;(Iu?Fd:Sh.current).appendChild(Yh),eh.current=ap})},[Hl,Iu,Ud]),(0,rf.useEffect)(()=>Ah,[])},xf=Rh,Ng=(Hl,Iu,Fd)=>{const{compProxy:Ud}=Hl;Fd(Ud);const eh=Ud.getProps(),Sh=Il(Iu);return Uu.default.createElement(Rd.Provider,{value:{setMethods:Lh=>Ud.setMethods(Lh)}},Sh?Uu.default.createElement(Iu,{...eh}):Uu.default.createElement(Iu,{...eh,ref:Lh=>Ud.setRef(Lh)}))},em=(Hl,Iu,Fd)=>{const Ud=Hl.compProxy;return Uu.default.createElement(Uu.default.Fragment,null,Ud?Ng(Hl,Iu,Fd):Uu.default.createElement(Iu,{...Hl.compDetails.params,ref:Fd}))},Fm=(Hl,Iu,Fd,Ud,eh)=>{const Sh=Hl.compDetails,Lh=Sh.componentClass,Ah=Sh.componentFromFramework&&!Hl.popup,yh=Sh.componentFromFramework&&Hl.popup,Nh=!Sh.componentFromFramework&&Hl.popup;return Uu.default.createElement(Uu.default.Fragment,null,Ah&&em(Hl,Lh,Iu),yh&&Uu.default.createElement(Bp,{editDetails:Hl,cellCtrl:Ud,eParentCell:Fd,wrappedContent:em(Hl,Lh,Iu)}),Nh&&eh&&Uu.default.createElement(Bp,{editDetails:Hl,cellCtrl:Ud,eParentCell:Fd,jsChildComp:eh}))},Vf=(Hl,Iu,Fd,Ud,eh,Sh,Lh)=>{const{compDetails:Ah,value:yh}=Hl,Nh=!Ah,sh=Ah&&Ah.componentFromFramework,Th=Ah&&Ah.componentClass,dp=yh?.toString?yh.toString():yh,$h=()=>Uu.default.createElement(Uu.default.Fragment,null,Nh&&Uu.default.createElement(Uu.default.Fragment,null,dp),sh&&!Sh&&Uu.default.createElement(Th,{...Ah.params,key:Iu,ref:Ud}),sh&&Sh&&Uu.default.createElement(Th,{...Ah.params,key:Iu}));return Uu.default.createElement(Uu.default.Fragment,null,eh?Uu.default.createElement("span",{role:"presentation",id:`cell-${Fd}`,className:"ag-cell-value",ref:Lh},$h()):$h())},Yg=({cellCtrl:Hl,printLayout:Iu,editingRow:Fd})=>{const{context:Ud}=(0,Uu.useContext)(Hu),{colIdSanitised:eh,instanceId:Sh}=Hl,Lh=(0,Uu.useRef)(),[Ah,yh]=(0,Uu.useState)(()=>Hl.isCellRenderer()?void 0:{compDetails:void 0,value:Hl.getValueToDisplay(),force:!1}),[Nh,sh]=(0,Uu.useState)(),[Th,dp]=(0,Uu.useState)(1),[$h,ap]=(0,Uu.useState)(),[Yh,Mh]=(0,Uu.useState)(!1),[pp,Ip]=(0,Uu.useState)(!1),[gp,Xh]=(0,Uu.useState)(!1),[Qp,Wp]=(0,Uu.useState)(),$p=(0,Uu.useMemo)(()=>Hl.isForceWrapper(),[Hl]),Hp=(0,Uu.useMemo)(()=>Hl.getCellAriaRole(),[Hl]),Vp=(0,Uu.useRef)(null),Op=(0,Uu.useRef)(null),Jp=(0,Uu.useRef)(),Df=(0,Uu.useRef)(),tm=(0,Uu.useRef)(),og=(0,Uu.useRef)([]),tg=(0,Uu.useRef)(),[Zf,Xf]=(0,Uu.useState)(0),Nf=(0,Uu.useCallback)(el=>{tg.current=el,Xf(Bd=>Bd+1)},[]),ag=Ah!=null&&(Yh||gp||pp),vg=$p||ag,Pg=(0,Uu.useCallback)(el=>{if(Df.current=el,el){const Bd=el.isCancelBeforeStart&&el.isCancelBeforeStart();setTimeout(()=>{Bd?(Hl.stopEditing(!0),Hl.focusCell(!0)):Hl.cellEditorAttached()})}},[Hl]),cg=(0,Uu.useRef)();cg.current||(cg.current=new rt.CssClassManager(()=>Vp.current)),xf(Ah,vg,tg.current,Zf,Jp,Vp);const kg=(0,Uu.useRef)();(0,Uu.useLayoutEffect)(()=>{const el=kg.current,Bd=Ah;if(kg.current=Ah,el==null||el.compDetails==null||Bd==null||Bd.compDetails==null)return;const Od=el.compDetails,Md=Bd.compDetails;if(Od.componentClass!=Md.componentClass||Op.current?.refresh==null)return;Op.current.refresh(Md.params)!=!0&&dp(ch=>ch+1)},[Ah]),(0,Uu.useLayoutEffect)(()=>{if(!(Nh&&!Nh.compDetails.componentFromFramework))return;const Bd=Nh.compDetails,Od=Nh.popup===!0,Md=Bd.newAgStackInstance();return Md.then(jh=>{if(!jh)return;const ch=jh.getGui();Pg(jh),Od||(($p?tm:Vp).current?.appendChild(ch),jh.afterGuiAttached&&jh.afterGuiAttached()),Wp(jh)}),()=>{Md.then(jh=>{const ch=jh.getGui();Ud.destroyBean(jh),Pg(void 0),Wp(void 0),ch?.parentElement?.removeChild(ch)})}},[Nh]);const Bf=(0,Uu.useCallback)(el=>{if(tm.current=el,!el){og.current.forEach(Od=>Od()),og.current=[];return}const Bd=Od=>{if(Od){const Md=Od.getGui();el.insertAdjacentElement("afterbegin",Md),og.current.push(()=>{Ud.destroyBean(Od),(0,rt._removeFromParent)(Md)})}return Od};if(Yh){const Od=Hl.createSelectionCheckbox();Bd(Od)}gp&&Bd(Hl.createDndSource()),pp&&Bd(Hl.createRowDragComp())},[Hl,Ud,gp,pp,Yh]),Tg=(0,Uu.useCallback)(el=>{if(Vp.current=el,Lh.current=el?Ud.createBean(new rt._EmptyBean):Ud.destroyBean(Lh.current),!el||!Hl)return;const Bd={addOrRemoveCssClass:(Md,jh)=>cg.current.addOrRemoveCssClass(Md,jh),setUserStyles:Md=>ap(Md),getFocusableElement:()=>Vp.current,setIncludeSelection:Md=>Mh(Md),setIncludeRowDrag:Md=>Ip(Md),setIncludeDndSource:Md=>Xh(Md),getCellEditor:()=>Df.current||null,getCellRenderer:()=>Op.current??Jp.current,getParentOfValue:()=>tg.current??tm.current??Vp.current,setRenderDetails:(Md,jh,ch)=>{yh(Dp=>Dp?.compDetails!==Md||Dp?.value!==jh||Dp?.force!==ch?{value:jh,compDetails:Md,force:ch}:Dp)},setEditDetails:(Md,jh,ch,Dp)=>{if(Md){let Ch;Dp?Ch=new Eh(Md.params,()=>dp(tp=>tp+1)):Md.componentFromFramework&&_d(),sh({compDetails:Md,popup:jh,popupPosition:ch,compProxy:Ch}),jh||yh(void 0)}else sh(Ch=>{Ch?.compProxy&&(Df.current=void 0)})}},Od=tm.current||void 0;Hl.setComp(Bd,el,Od,Iu,Fd,Lh.current)},[]),gg=(0,Uu.useMemo)(()=>!!(Ah?.compDetails?.componentFromFramework&&Il(Ah.compDetails.componentClass)),[Ah]);(0,Uu.useLayoutEffect)(()=>{Vp.current&&(cg.current.addOrRemoveCssClass("ag-cell-value",!vg),cg.current.addOrRemoveCssClass("ag-cell-inline-editing",!!Nh&&!Nh.popup),cg.current.addOrRemoveCssClass("ag-cell-popup-editing",!!Nh&&!!Nh.popup),cg.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!Nh||!!Nh.popup),Hl.getRowCtrl()?.setInlineEditingCss(),Hl.shouldRestoreFocus()&&!Hl.isEditing()&&Vp.current.focus({preventScroll:!0}))});const ve=()=>Uu.default.createElement(Uu.default.Fragment,null,Ah!=null&&Vf(Ah,Th,Sh,Op,vg,gg,Nf),Nh!=null&&Fm(Nh,Pg,Vp.current,Hl,Qp)),zu=(0,Uu.useCallback)(()=>Hl.onFocusOut(),[]);return Uu.default.createElement("div",{ref:Tg,style:$h,role:Hp,"col-id":eh,onBlur:zu},vg?Uu.default.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:Bf},ve()):ve())},$f=(0,Uu.memo)(Yg),Kg=({rowCtrl:Hl,containerType:Iu})=>{const{context:Fd,gos:Ud}=(0,Kp.useContext)(Hu),eh=(0,Kp.useRef)(),Sh=(0,Kp.useRef)(Hl.getDomOrder()),Lh=Hl.isFullWidth(),Ah=Hl.getRowNode().displayed,[yh,Nh]=(0,Kp.useState)(()=>Ah?Hl.getRowIndex():null),[sh,Th]=(0,Kp.useState)(()=>Hl.getRowId()),[dp,$h]=(0,Kp.useState)(()=>Hl.getBusinessKey()),[ap,Yh]=(0,Kp.useState)(()=>Hl.getRowStyles()),Mh=(0,Kp.useRef)(null),pp=(0,Kp.useRef)(null),[Ip,gp]=(0,Kp.useState)(()=>null),[Xh,Qp]=(0,Kp.useState)(),[Wp,$p]=(0,Kp.useState)(()=>Ah?Hl.getInitialRowTop(Iu):void 0),[Hp,Vp]=(0,Kp.useState)(()=>Ah?Hl.getInitialTransform(Iu):void 0),Op=(0,Kp.useRef)(null),Jp=(0,Kp.useRef)(),Df=(0,Kp.useRef)(!1),[tm,og]=(0,Kp.useState)(0);(0,Kp.useEffect)(()=>{if(Df.current||!Xh||tm>10)return;const Bf=Op.current?.firstChild;Bf?(Hl.setupDetailRowAutoHeight(Bf),Df.current=!0):og(Tg=>Tg+1)},[Xh,tm]);const tg=(0,Kp.useRef)();tg.current||(tg.current=new S0.CssClassManager(()=>Op.current));const Zf=(0,Kp.useCallback)(Bf=>{if(Op.current=Bf,eh.current=Bf?Fd.createBean(new S0._EmptyBean):Fd.destroyBean(eh.current),!Bf){Hl.unsetComp(Iu);return}if(!Hl.isAlive())return;const Tg={setTop:$p,setTransform:Vp,addOrRemoveCssClass:(gg,ve)=>tg.current.addOrRemoveCssClass(gg,ve),setDomOrder:gg=>Sh.current=gg,setRowIndex:Nh,setRowId:Th,setRowBusinessKey:$h,setUserStyles:Yh,setCellCtrls:(gg,ve)=>{pp.current=Mh.current;const zu=Ed(pp.current,gg,Sh.current);zu!==pp.current&&(Mh.current=zu,oh(ve,()=>gp(zu)))},showFullWidth:gg=>Qp(gg),getFullWidthCellRenderer:()=>Jp.current,refreshFullWidth:gg=>Pg.current?(Qp(ve=>({...ve,params:gg()})),!0):!Jp.current||!Jp.current.refresh?!1:Jp.current.refresh(gg())};Hl.setComp(Tg,Bf,Iu,eh.current)},[]);(0,Kp.useLayoutEffect)(()=>bu(Xh,Fd,Op.current,Jp),[Xh]);const Xf=(0,Kp.useMemo)(()=>{const Bf={top:Wp,transform:Hp};return Object.assign(Bf,ap),Bf},[Wp,Hp,ap]),Nf=Lh&&Xh?.componentFromFramework,ag=!Lh&&Ip!=null,vg=(0,Kp.useMemo)(()=>!!(Xh?.componentFromFramework&&Il(Xh.componentClass)),[Xh]),Pg=(0,Kp.useRef)(!1);(0,Kp.useEffect)(()=>{Pg.current=vg&&!!Xh&&!!Ud.get("reactiveCustomComponents")},[vg,Xh]);const cg=()=>Ip?.map(Bf=>Kp.default.createElement($f,{cellCtrl:Bf,editingRow:Hl.isEditing(),printLayout:Hl.isPrintLayout(),key:Bf.instanceId})),kg=()=>{const Bf=Xh.componentClass;return Kp.default.createElement(Kp.default.Fragment,null,vg?Kp.default.createElement(Bf,{...Xh.params}):Kp.default.createElement(Bf,{...Xh.params,ref:Jp}))};return Kp.default.createElement("div",{ref:Zf,role:"row",style:Xf,"row-index":yh,"row-id":sh,"row-business-key":dp},ag&&cg(),Nf&&kg())},If=(0,Kp.memo)(Kg),Mm=({name:Hl})=>{const{context:Iu}=(0,Cg.useContext)(Hu),Fd=(0,Cg.useMemo)(()=>(0,sm._getRowContainerOptions)(Hl),[Hl]),Ud=(0,Cg.useRef)(null),eh=(0,Cg.useRef)(null),Sh=(0,Cg.useRef)([]),Lh=(0,Cg.useRef)([]),[Ah,yh]=(0,Cg.useState)(()=>[]),Nh=(0,Cg.useRef)(!1),sh=(0,Cg.useRef)(),Th=(0,Cg.useMemo)(()=>Bl(Fd.viewport),[Fd]),dp=(0,Cg.useMemo)(()=>Bl(Fd.container),[Fd]),$h=Fd.type==="center",ap=$h?Ud:eh;lg(" AG Row Container "+Hl+" ",ap);const Yh=(0,Cg.useCallback)(()=>$h?Ud.current!=null&&eh.current!=null:eh.current!=null,[]),Mh=(0,Cg.useCallback)(()=>$h?Ud.current==null&&eh.current==null:eh.current==null,[]),pp=(0,Cg.useCallback)(()=>{if(Mh()&&(sh.current=Iu.destroyBean(sh.current)),Yh()){const Qp=$p=>{const Hp=Ed(Lh.current,Sh.current,Nh.current);Hp!==Lh.current&&(Lh.current=Hp,oh($p,()=>yh(Hp)))},Wp={setHorizontalScroll:$p=>{Ud.current&&(Ud.current.scrollLeft=$p)},setViewportHeight:$p=>{Ud.current&&(Ud.current.style.height=$p)},setRowCtrls:({rowCtrls:$p,useFlushSync:Hp})=>{const Vp=!!Hp&&Sh.current.length>0&&$p.length>0;Sh.current=$p,Qp(Vp)},setDomOrder:$p=>{Nh.current!=$p&&(Nh.current=$p,Qp(!1))},setContainerWidth:$p=>{eh.current&&(eh.current.style.width=$p)},setOffsetTop:$p=>{eh.current&&(eh.current.style.transform=`translateY(${$p})`)}};sh.current=Iu.createBean(new sm.RowContainerCtrl(Hl)),sh.current.setComp(Wp,eh.current,Ud.current)}},[Yh,Mh]),Ip=(0,Cg.useCallback)(Qp=>{eh.current=Qp,pp()},[pp]),gp=(0,Cg.useCallback)(Qp=>{Ud.current=Qp,pp()},[pp]),Xh=()=>Cg.default.createElement("div",{className:dp,ref:Ip,role:"rowgroup"},Ah.map(Qp=>Cg.default.createElement(If,{rowCtrl:Qp,containerType:Fd.type,key:Qp.instanceId})));return Cg.default.createElement(Cg.default.Fragment,null,$h?Cg.default.createElement("div",{className:Th,ref:gp,role:"presentation"},Xh()):Xh())},dd=(0,Cg.memo)(Mm),f=()=>{const{context:Hl,resizeObserverService:Iu}=(0,Jh.useContext)(Hu),[Fd,Ud]=(0,Jh.useState)(""),[eh,Sh]=(0,Jh.useState)(0),[Lh,Ah]=(0,Jh.useState)(0),[yh,Nh]=(0,Jh.useState)("0px"),[sh,Th]=(0,Jh.useState)("0px"),[dp,$h]=(0,Jh.useState)("100%"),[ap,Yh]=(0,Jh.useState)("0px"),[Mh,pp]=(0,Jh.useState)("0px"),[Ip,gp]=(0,Jh.useState)("100%"),[Xh,Qp]=(0,Jh.useState)(""),[Wp,$p]=(0,Jh.useState)(""),[Hp,Vp]=(0,Jh.useState)(null),[Op,Jp]=(0,Jh.useState)(""),[Df,tm]=(0,Jh.useState)(null),[og,tg]=(0,Jh.useState)("ag-layout-normal"),Zf=(0,Jh.useRef)();Zf.current||(Zf.current=new cf.CssClassManager(()=>Xf.current));const Xf=(0,Jh.useRef)(null),Nf=(0,Jh.useRef)(null),ag=(0,Jh.useRef)(null),vg=(0,Jh.useRef)(null),Pg=(0,Jh.useRef)(null),cg=(0,Jh.useRef)(null),kg=(0,Jh.useRef)(null),Bf=(0,Jh.useRef)([]),Tg=(0,Jh.useRef)([]);lg(" AG Grid Body ",Xf),lg(" AG Pinned Top ",Nf),lg(" AG Sticky Top ",ag),lg(" AG Middle ",cg),lg(" AG Pinned Bottom ",kg);const gg=(0,Jh.useCallback)(zp=>{if(Xf.current=zp,!zp){Bf.current=Hl.destroyBeans(Bf.current),Tg.current.forEach(Np=>Np()),Tg.current=[];return}if(!Hl)return;const Om=(Np,jf)=>{Np.appendChild(jf),Tg.current.push(()=>Np.removeChild(jf))},Zg=Np=>{const jf=Hl.createBean(new Np);return Bf.current.push(jf),jf},Qf=(Np,jf,rm)=>{Om(Np,document.createComment(rm)),Om(Np,Zg(jf).getGui())};Qf(zp,cf.FakeHScrollComp," AG Fake Horizontal Scroll "),Qf(zp,cf.OverlayWrapperComponent," AG Overlay Wrapper "),Pg.current&&Qf(Pg.current,cf.FakeVScrollComp," AG Fake Vertical Scroll ");const hm={setRowAnimationCssOnBodyViewport:Ud,setColumnCount:Np=>{Xf.current&&(0,cf._setAriaColCount)(Xf.current,Np)},setRowCount:Np=>{Xf.current&&(0,cf._setAriaRowCount)(Xf.current,Np)},setTopHeight:Sh,setBottomHeight:Ah,setStickyTopHeight:Nh,setStickyTopTop:Th,setStickyTopWidth:$h,setTopDisplay:Qp,setBottomDisplay:$p,setColumnMovingCss:(Np,jf)=>Zf.current.addOrRemoveCssClass(Np,jf),updateLayoutClasses:tg,setAlwaysVerticalScrollClass:Vp,setPinnedTopBottomOverflowY:Jp,setCellSelectableCss:(Np,jf)=>tm(jf?Np:null),setBodyViewportWidth:Np=>{cg.current&&(cg.current.style.width=Np)},registerBodyViewportResizeListener:Np=>{if(cg.current){const jf=Iu.observeResize(cg.current,Np);Tg.current.push(()=>jf())}},setStickyBottomHeight:Yh,setStickyBottomBottom:pp,setStickyBottomWidth:gp},mg=Hl.createBean(new cf.GridBodyCtrl);Bf.current.push(mg),mg.setComp(hm,zp,cg.current,Nf.current,kg.current,ag.current,vg.current)},[]),ve=(0,Jh.useMemo)(()=>Bl("ag-root","ag-unselectable",og),[og]),zu=(0,Jh.useMemo)(()=>Bl("ag-body-viewport",Fd,og,Hp,Df),[Fd,og,Hp,Df]),el=(0,Jh.useMemo)(()=>Bl("ag-body",og),[og]),Bd=(0,Jh.useMemo)(()=>Bl("ag-floating-top",Df),[Df]),Od=(0,Jh.useMemo)(()=>Bl("ag-sticky-top",Df),[Df]),Md=(0,Jh.useMemo)(()=>Bl("ag-sticky-bottom",ap==="0px"?"ag-hidden":null,Df),[Df,ap]),jh=(0,Jh.useMemo)(()=>Bl("ag-floating-bottom",Df),[Df]),ch=(0,Jh.useMemo)(()=>({height:eh,minHeight:eh,display:Xh,overflowY:Op}),[eh,Xh,Op]),Dp=(0,Jh.useMemo)(()=>({height:yh,top:sh,width:dp}),[yh,sh,dp]),Ch=(0,Jh.useMemo)(()=>({height:ap,bottom:Mh,width:Ip}),[ap,Mh,Ip]),tp=(0,Jh.useMemo)(()=>({height:Lh,minHeight:Lh,display:Wp,overflowY:Op}),[Lh,Wp,Op]),bg=zp=>Jh.default.createElement(dd,{name:zp,key:`${zp}-container`}),Ff=({section:zp,children:Om,className:Zg,style:Qf})=>Jh.default.createElement("div",{ref:zp,className:Zg,role:"presentation",style:Qf},Om.map(bg));return Jh.default.createElement("div",{ref:gg,className:ve,role:"treegrid"},Jh.default.createElement(R0,null),Ff({section:Nf,className:Bd,style:ch,children:["topLeft","topCenter","topRight","topFullWidth"]}),Jh.default.createElement("div",{className:el,ref:Pg,role:"presentation"},Ff({section:cg,className:zu,children:["left","center","right","fullWidth"]})),Ff({section:ag,className:Od,style:Dp,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Ff({section:vg,className:Md,style:Ch,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Ff({section:kg,className:jh,style:tp,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},E=(0,Jh.memo)(f),W=requireMain_cjs(),Q=Y(requireReact()),yl=(Hl,Iu)=>{const{children:Fd,eFocusableElement:Ud,onTabKeyDown:eh,gridCtrl:Sh,forceFocusOutWhenTabGuardsAreEmpty:Lh}=Hl,{context:Ah}=(0,Q.useContext)(Hu),yh=(0,Q.useRef)(null),Nh=(0,Q.useRef)(null),sh=(0,Q.useRef)(),Th=Mh=>{const pp=Mh==null?void 0:parseInt(Mh,10).toString();[yh,Nh].forEach(Ip=>{pp===void 0?Ip.current?.removeAttribute("tabindex"):Ip.current?.setAttribute("tabindex",pp)})};(0,Q.useImperativeHandle)(Iu,()=>({forceFocusOutOfContainer(Mh){sh.current?.forceFocusOutOfContainer(Mh)}}));const dp=(0,Q.useCallback)(()=>{const Mh=yh.current,pp=Nh.current;if(!Mh&&!pp){sh.current=Ah.destroyBean(sh.current);return}if(Mh&&pp){const Ip={setTabIndex:Th};sh.current=Ah.createBean(new W.TabGuardCtrl({comp:Ip,eTopGuard:Mh,eBottomGuard:pp,eFocusableElement:Ud,onTabKeyDown:eh,forceFocusOutWhenTabGuardsAreEmpty:Lh,focusInnerElement:gp=>Sh.focusInnerElement(gp)}))}},[]),$h=(0,Q.useCallback)(Mh=>{yh.current=Mh,dp()},[dp]),ap=(0,Q.useCallback)(Mh=>{Nh.current=Mh,dp()},[dp]),Yh=Mh=>{const pp=Mh==="top"?W.TabGuardClassNames.TAB_GUARD_TOP:W.TabGuardClassNames.TAB_GUARD_BOTTOM;return Q.default.createElement("div",{className:`${W.TabGuardClassNames.TAB_GUARD} ${pp}`,role:"presentation",ref:Mh==="top"?$h:ap})};return Q.default.createElement(Q.default.Fragment,null,Yh("top"),Fd,Yh("bottom"))},Ln=(0,Q.forwardRef)(yl),Cl=(0,Q.memo)(Ln),Al=({context:Hl})=>{const[Iu,Fd]=(0,ip.useState)(""),[Ud,eh]=(0,ip.useState)(""),[Sh,Lh]=(0,ip.useState)(""),[Ah,yh]=(0,ip.useState)(null),[Nh,sh]=(0,ip.useState)(null),[Th,dp]=(0,ip.useState)(!1),[$h,ap]=(0,ip.useState)(),Yh=(0,ip.useRef)(),Mh=(0,ip.useRef)(null),pp=(0,ip.useRef)(),[Ip,gp]=(0,ip.useState)(null),Xh=(0,ip.useRef)(()=>{}),Qp=(0,ip.useRef)(),Wp=(0,ip.useRef)([]),$p=(0,ip.useCallback)(()=>{},[]),Hp=(0,ip.useMemo)(()=>Hl.isDestroyed()?null:Hl.getBeans(),[Hl]);lg(" AG Grid ",Mh);const Vp=(0,ip.useCallback)(og=>{if(Mh.current=og,Yh.current=og?Hl.createBean(new Fp.GridCtrl):Hl.destroyBean(Yh.current),!og||Hl.isDestroyed())return;const tg=Yh.current;Xh.current=tg.focusInnerElement.bind(tg);const Zf={destroyGridUi:()=>{},setRtlClass:Fd,setGridThemeClass:eh,forceFocusOutOfContainer:Xf=>{if(!Xf&&Qp.current?.isDisplayed()){Qp.current.forceFocusOutOfContainer(Xf);return}pp.current?.forceFocusOutOfContainer(Xf)},updateLayoutClasses:Lh,getFocusableContainers:()=>{const Xf=[],Nf=Mh.current?.querySelector(".ag-root");return Nf&&Xf.push({getGui:()=>Nf}),Wp.current.forEach(ag=>{ag.isDisplayed()&&Xf.push(ag)}),Xf},setCursor:yh,setUserSelect:sh};tg.setComp(Zf,og,og),dp(!0)},[]);(0,ip.useEffect)(()=>{const og=Yh.current,tg=Mh.current;if(!$h||!Hp||!og||!Ip||!tg)return;const Zf=[],{watermarkSelector:Xf,paginationSelector:Nf,sideBarSelector:ag,statusBarSelector:vg,gridHeaderDropZonesSelector:Pg}=og.getOptionalSelectors(),cg=[];if(Pg){const Bf=Hl.createBean(new Pg.component),Tg=Bf.getGui();tg.insertAdjacentElement("afterbegin",Tg),cg.push(Tg),Zf.push(Bf)}if(ag){const Bf=Hl.createBean(new ag.component),Tg=Bf.getGui(),gg=Ip.querySelector(".ag-tab-guard-bottom");gg&&(gg.insertAdjacentElement("beforebegin",Tg),cg.push(Tg)),Zf.push(Bf),Wp.current.push(Bf)}const kg=Bf=>{const Tg=Hl.createBean(new Bf),gg=Tg.getGui();return tg.insertAdjacentElement("beforeend",gg),cg.push(gg),Zf.push(Tg),Tg};if(vg&&kg(vg.component),Nf){const Bf=kg(Nf.component);Qp.current=Bf,Wp.current.push(Bf)}return Xf&&kg(Xf.component),()=>{Hl.destroyBeans(Zf),cg.forEach(Bf=>{Bf.parentElement?.removeChild(Bf)})}},[$h,Ip,Hp]);const Op=(0,ip.useMemo)(()=>Bl("ag-root-wrapper",Iu,Ud,Sh),[Iu,Ud,Sh]),Jp=(0,ip.useMemo)(()=>Bl("ag-root-wrapper-body","ag-focus-managed",Sh),[Sh]),Df=(0,ip.useMemo)(()=>({userSelect:Nh??"",WebkitUserSelect:Nh??"",cursor:Ah??""}),[Nh,Ah]),tm=(0,ip.useCallback)(og=>{pp.current=og,ap(og!==null)},[]);return ip.default.createElement("div",{ref:Vp,className:Op,style:Df,role:"presentation"},ip.default.createElement("div",{className:Jp,ref:gp,role:"presentation"},Th&&Ip&&Hp&&ip.default.createElement(Hu.Provider,{value:Hp},ip.default.createElement(Cl,{ref:tm,eFocusableElement:Ip,onTabKeyDown:$p,gridCtrl:Yh.current,forceFocusOutWhenTabGuardsAreEmpty:!0},ip.default.createElement(E,null)))))},vl=(0,ip.memo)(Al),Fl=requireMain_cjs(),Ol=class extends Fl.BeanStub{wireBeans(Hl){this.ctrlsService=Hl.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every(Hl=>Hl.getAllCtrls().every(Iu=>Iu.areCellsRendered()))}},mu=Hl=>{const Iu=(0,rl.useRef)(),Fd=(0,rl.useRef)(null),Ud=(0,rl.useRef)(null),eh=(0,rl.useRef)([]),Sh=(0,rl.useRef)([]),Lh=(0,rl.useRef)(Hl),Ah=(0,rl.useRef)(),yh=(0,rl.useRef)(),Nh=(0,rl.useRef)(!1),[sh,Th]=(0,rl.useState)(void 0),[,dp]=(0,rl.useState)(0),$h=(0,rl.useCallback)(Mh=>{if(Fd.current=Mh,!Mh){eh.current.forEach(Op=>Op()),eh.current.length=0;return}const pp=Hl.modules||[];Ud.current||(Ud.current=new xh(()=>dp(Op=>Op+1),Hl.componentWrappingElement,Hl.maxComponentCreationTimeMs),eh.current.push(()=>{Ud.current?.destroy(),Ud.current=null}));const Ip=(0,ml._combineAttributesAndGridOptions)(Hl.gridOptions,Hl),gp=()=>{if(Nh.current){const Op=()=>Ah.current?.shouldQueueUpdates()?void 0:Sh.current.shift();let Jp=Op();for(;Jp;)Jp(),Jp=Op()}},Xh=new Jl(gp);Ah.current=Xh;const Qp=new Ol,Wp={providedBeanInstances:{frameworkComponentWrapper:new Wl(Ud.current,Ip.reactiveCustomComponents??(0,ml._getGlobalGridOption)("reactiveCustomComponents")??!0),renderStatusService:Qp},modules:pp,frameworkOverrides:Xh},$p=Op=>{Th(Op),Op.createBean(Qp),eh.current.push(()=>{Op.destroy()}),Op.getBean("ctrlsService").whenReady({addDestroyFunc:Jp=>{eh.current.push(Jp)}},()=>{if(Op.isDestroyed())return;const Jp=Iu.current;Jp&&Hl.setGridApi?.(Jp)})},Hp=Op=>{Op.getBean("ctrlsService").whenReady({addDestroyFunc:Jp=>{eh.current.push(Jp)}},()=>{Sh.current.forEach(Jp=>Jp()),Sh.current.length=0,Nh.current=!0})},Vp=new ml.GridCoreCreator;Ip.gridId??(Ip.gridId=yh.current),Iu.current=Vp.create(Mh,Ip,$p,Hp,Wp),eh.current.push(()=>{Iu.current=void 0}),Iu.current&&(yh.current=Iu.current.getGridId())},[]),ap=(0,rl.useMemo)(()=>({height:"100%",...Hl.containerStyle||{}}),[Hl.containerStyle]),Yh=(0,rl.useCallback)(Mh=>{Nh.current&&!Ah.current?.shouldQueueUpdates()?Mh():Sh.current.push(Mh)},[]);return(0,rl.useEffect)(()=>{const Mh=Xl(Lh.current,Hl);Lh.current=Hl,Yh(()=>{Iu.current&&(0,ml._processOnChange)(Mh,Iu.current)})},[Hl]),rl.default.createElement("div",{style:ap,className:Hl.className,ref:$h},sh&&!sh.isDestroyed()?rl.default.createElement(vl,{context:sh}):null,Ud.current?.getPortals()??null)};function Xl(Hl,Iu){const Fd={};return Object.keys(Iu).forEach(Ud=>{const eh=Iu[Ud];Hl[Ud]!==eh&&(Fd[Ud]=eh)}),Fd}var Wl=class extends ml.BaseComponentWrapper{constructor(Hl,Iu){super(),this.parent=Hl,this.reactiveCustomComponents=Iu}createWrapper(Hl,Iu){if(this.reactiveCustomComponents){const eh=(Sh=>{switch(Sh){case"filter":return Eg;case"floatingFilterComponent":return fg;case"dateComponent":return Zp;case"dragAndDropImageComponent":return kf;case"loadingOverlayComponent":return eg;case"noRowsOverlayComponent":return Lg;case"statusPanel":return $g;case"toolPanel":return Bm;case"menuItem":return Wg;case"cellRenderer":return mf}})(Iu.propertyName);if(eh)return new eh(Hl,this.parent,Iu)}else switch(Iu.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":_d();break}const Fd=!Iu.cellRenderer&&Iu.propertyName!=="toolPanel";return new yp(Hl,this.parent,Iu,Fd)}},hu=(0,rl.forwardRef)((Hl,Iu)=>{const{ctrlsFactory:Fd,context:Ud,gos:eh,resizeObserverService:Sh,rowModel:Lh}=(0,rl.useContext)(Hu),[Ah,yh]=(0,rl.useState)(()=>new Pu),[Nh,sh]=(0,rl.useState)(()=>new Pu),[Th,dp]=(0,rl.useState)(),[$h,ap]=(0,rl.useState)(),Yh=(0,rl.useRef)(),Mh=(0,rl.useRef)(null),pp=(0,rl.useRef)(),Ip=(0,rl.useMemo)(()=>ml.ModuleRegistry.__getGridRegisteredModules(Hl.api.getGridId()),[Hl]),gp=(0,rl.useMemo)(()=>Ah.toString()+" ag-details-row",[Ah]),Xh=(0,rl.useMemo)(()=>Nh.toString()+" ag-details-grid",[Nh]);Iu&&(0,rl.useImperativeHandle)(Iu,()=>({refresh(){return Yh.current?.refresh()??!1}})),Hl.template&&(0,ml._warnOnce)("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const Qp=(0,rl.useCallback)($p=>{if(Mh.current=$p,!$p){Yh.current=Ud.destroyBean(Yh.current),pp.current?.();return}const Hp={addOrRemoveCssClass:(Op,Jp)=>yh(Df=>Df.setClass(Op,Jp)),addOrRemoveDetailGridCssClass:(Op,Jp)=>sh(Df=>Df.setClass(Op,Jp)),setDetailGrid:Op=>dp(Op),setRowData:Op=>ap(Op),getGui:()=>Mh.current},Vp=Fd.getInstance("detailCellRenderer");if(Vp&&(Ud.createBean(Vp),Vp.init(Hp,Hl),Yh.current=Vp,eh.get("detailRowAutoHeight"))){const Op=()=>{if(Mh.current==null)return;const Jp=Mh.current.clientHeight;Jp!=null&&Jp>0&&setTimeout(()=>{Hl.node.setRowHeight(Jp),((0,ml._isClientSideRowModel)(eh)||(0,ml._isServerSideRowModel)(eh))&&Lh.onRowHeightChanged()},0)};pp.current=Sh.observeResize($p,Op),Op()}},[]),Wp=(0,rl.useCallback)($p=>{Yh.current?.registerDetailWithMaster($p)},[]);return rl.default.createElement("div",{className:gp,ref:Qp},Th&&rl.default.createElement(mu,{className:Xh,...Th,modules:Ip,rowData:$h,setGridApi:Wp}))}),Jl=class extends ml.VanillaFrameworkOverrides{constructor(Hl){super("react"),this.processQueuedUpdates=Hl,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:Gd,agGroupRowRenderer:Gd,agDetailCellRenderer:hu},this.wrapIncoming=(Iu,Fd)=>Fd==="ensureVisible"?qd(Iu):Iu(),this.renderingEngine="react"}frameworkComponent(Hl){return this.frameworkComponents[Hl]}isFrameworkComponent(Hl){if(!Hl)return!1;const Iu=Hl.prototype;return!(Iu&&"getGui"in Iu)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return id()}},Gu=class extends Et.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=Hl=>{this.api=Hl,this.apiListeners.forEach(Iu=>Iu(Hl))}}registerApiListener(Hl){this.apiListeners.push(Hl)}componentWillUnmount(){this.apiListeners.length=0}render(){return Et.default.createElement(mu,{...this.props,setGridApi:this.setGridApi})}},Zu=requireReact();function rd(Hl){const{setMethods:Iu}=(0,Zu.useContext)(Rd);Iu(Hl)}function wd(Hl){rd(Hl)}function gd(Hl){return rd(Hl)}function jd(Hl){return rd(Hl)}function Qd(Hl){rd(Hl)}function ih(Hl){rd(Hl)}return index_cjs}var ColumnSelector={},hasRequiredColumnSelector;function requireColumnSelector(){if(hasRequiredColumnSelector)return ColumnSelector;hasRequiredColumnSelector=1,Object.defineProperty(ColumnSelector,"__esModule",{value:!0}),ColumnSelector.default=void 0;var n=s(requireReact());function h(M){if(typeof WeakMap!="function")return null;var $=new WeakMap,V=new WeakMap;return(h=function(oe){return oe?V:$})(M)}function s(M,$){if(M&&M.__esModule)return M;if(M===null||typeof M!="object"&&typeof M!="function")return{default:M};var V=h($);if(V&&V.has(M))return V.get(M);var oe={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in M)if(ie!=="default"&&Object.prototype.hasOwnProperty.call(M,ie)){var zn=Y?Object.getOwnPropertyDescriptor(M,ie):null;zn&&(zn.get||zn.set)?Object.defineProperty(oe,ie,zn):oe[ie]=M[ie]}return oe.default=M,V&&V.set(M,oe),oe}const _=M=>{const[$,V]=(0,n.useState)(!1),oe=(0,n.useRef)(null);(0,n.useEffect)(()=>{const zn=Et=>{oe.current&&!oe.current.contains(Et.target)&&$&&V(!1)};return document.addEventListener("mousedown",zn),()=>{document.removeEventListener("mousedown",zn)}},[$]);const Y=zn=>{const{name:Et,checked:ml}=zn.target;let rl=M.columnDefs.map(Ml=>({...Ml,hide:Ml.field===Et?!ml:Ml.hide}));M.setColumnDefs(rl)};let ie="column-dropdown-content";return $&&(ie+=" show"),n.default.createElement("div",null,n.default.createElement("div",{ref:oe,className:"column-dropdown"},n.default.createElement("button",{className:"aggrid-style-button",onClick:()=>V(zn=>!zn)},"Show columns"),n.default.createElement("div",{className:ie},n.default.createElement("ul",null,M.columnDefs.map(zn=>zn.field!=="id"&&n.default.createElement("li",{key:zn.field},n.default.createElement("label",null,n.default.createElement("input",{name:zn.field,type:"checkbox",checked:!zn.hide,onChange:Y}),n.default.createElement("span",null,zn.headerName))))))))};return ColumnSelector.default=_,ColumnSelector}var CustomHeader={},hasRequiredCustomHeader;function requireCustomHeader(){if(hasRequiredCustomHeader)return CustomHeader;hasRequiredCustomHeader=1,Object.defineProperty(CustomHeader,"__esModule",{value:!0}),CustomHeader.default=void 0;var n=h(requireReact());function h(_){return _&&_.__esModule?_:{default:_}}let s=class extends n.default.Component{constructor(M){super(M),this.state={sortMode:"none",multiSort:!1,sortIndex:null,filterActive:!1}}componentDidMount(){this.props.column.addEventListener("filterChanged",this.onFilterChanged.bind(this)),this.props.api.addEventListener("sortChanged",this.onSortChanged.bind(this)),this.onSortClicked.bind(this),this.onSortChanged(),this.onFilterChanged()}render(){let M=n.default.createElement("div",{ref:Y=>{this.menuButton=Y},className:"customHeaderMenuButton",onClick:this.onMenuClicked.bind(this),onTouchEnd:this.onMenuClicked.bind(this)},this.state.filterActive?n.default.createElement("div",{className:"filter-div active"},n.default.createElement("i",{className:"ag-icon ag-icon-filter"})):n.default.createElement("div",{className:"filter-div"},n.default.createElement("i",{className:"ag-icon ag-icon-menu"}))),$="";this.state.sortMode==="asc"&&($=n.default.createElement("div",{style:{display:"flex"}},this.state.multiSort&&this.state.sortIndex+1,n.default.createElement("i",{className:"ag-icon ag-icon-asc"}))),this.state.sortMode==="desc"&&($=n.default.createElement("div",{style:{display:"flex"}},this.state.multiSort&&this.state.sortIndex+1,n.default.createElement("i",{className:"ag-icon ag-icon-desc"})));let V="unit"in this.props&&this.props.unit!=null,oe=n.default.createElement("div",{className:"custom-header-label-container",onClick:this.onSortClicked.bind(this),onTouchEnd:this.onSortClicked.bind(this)},$,n.default.createElement("div",{className:"customHeaderLabel"},n.default.createElement("span",null,this.props.displayName),V&&n.default.createElement("div",{className:"unit-label"},"(",this.props.unit,")")));return n.default.createElement("div",{className:"custom-header-container"},oe,M)}onMenuClicked(){this.props.showColumnMenu(this.menuButton);const M=document.querySelector(".ag-menu.ag-ltr.ag-popup-child");if(M){M.style.maxWidth="200px";const $=document.createElement("div");if($.style.margin="5px 10px 0px 10px",$.innerHTML="<b>Apply filter:</b>",M.prepend($),this.props.infoText!=null){const V=document.createElement("div");V.style.margin="10px 10px 0px 10px",V.style.textAlign="justify",V.innerHTML=this.props.infoText,M.prepend(V)}}}onSortChanged(){if(!this.props.api){console.log("CustomHeader: api undefined!");return}let M="none";this.props.column.isSortAscending()&&(M="asc"),this.props.column.isSortDescending()&&(M="desc");let V=this.props.api.getColumnState().filter(Y=>Y.sort!==null).length>1,oe=this.props.column.getSortIndex();this.setState({sortMode:M,multiSort:V,sortIndex:oe})}onFilterChanged(){this.setState({filterActive:this.props.column.isFilterActive()})}onSortClicked(M){this.props.progressSort(M.shiftKey)}};return CustomHeader.default=s,CustomHeader}var ResetButton={},hasRequiredResetButton;function requireResetButton(){if(hasRequiredResetButton)return ResetButton;hasRequiredResetButton=1,Object.defineProperty(ResetButton,"__esModule",{value:!0}),ResetButton.default=void 0;var n=h(requireReact());function h(M){return M&&M.__esModule?M:{default:M}}function s(M){if(M){const $=M.getFilterModel();Object.keys($).length>0&&M.setFilterModel({})}}function _(M){let{gridApi:$,anyColFilterActive:V}=M;const oe=()=>{s($)};return n.default.createElement("button",{className:`aggrid-style-button ${V?"":"disabled"}`,onClick:oe,disabled:!V},"Reset column filters")}return ResetButton.default=_,ResetButton}var hasRequiredMaterialDataGrid;function requireMaterialDataGrid(){if(hasRequiredMaterialDataGrid)return MaterialDataGrid;hasRequiredMaterialDataGrid=1,Object.defineProperty(MaterialDataGrid,"__esModule",{value:!0}),MaterialDataGrid.default=void 0;var n=ie(requireReact()),h=oe(require$$1),s=requireIndex_cjs(),_=oe(requireColumnSelector()),M=oe(requireCustomHeader()),$=require$$8,V=oe(requireResetButton());function oe(Bl){return Bl&&Bl.__esModule?Bl:{default:Bl}}function Y(Bl){if(typeof WeakMap!="function")return null;var Pu=new WeakMap,Il=new WeakMap;return(Y=function(ud){return ud?Il:Pu})(Bl)}function ie(Bl,Pu){if(Bl&&Bl.__esModule)return Bl;if(Bl===null||typeof Bl!="object"&&typeof Bl!="function")return{default:Bl};var Il=Y(Pu);if(Il&&Il.has(Bl))return Il.get(Bl);var ud={},pd=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var id in Bl)if(id!=="default"&&Object.prototype.hasOwnProperty.call(Bl,id)){var rh=pd?Object.getOwnPropertyDescriptor(Bl,id):null;rh&&(rh.get||rh.set)?Object.defineProperty(ud,id,rh):ud[id]=Bl[id]}return ud.default=Bl,Il&&Il.set(Bl,ud),ud}function zn(Bl){return n.default.createElement("a",{href:Bl.data.href,target:"_blank",rel:"noreferrer",style:{textDecoration:"none",color:"mediumblue"}},Bl.value)}function Et(Bl){return Bl.value==null?"-":Math.abs(Bl.value)>=1e5||Math.abs(Bl.value)<.01&&Bl.value!==0?Bl.value.toExponential(2):Bl.value.toFixed(2)}function ml(Bl){return Bl.value==null?"-":Bl.value}function rl(Bl){return Bl.value==null?"-":Bl.value}function Ml(Bl){if(Bl.value==null)return"-";let Pu=Bl.value.split(/(\d+)/);return n.default.createElement("span",null,Pu.map((Il,ud)=>Il.match(/\d+/)?n.default.createElement("sub",{key:ud},Il):Il))}function kl(Bl){if(Bl.value==null)return"-";let Pu=!1;return n.default.createElement("span",null,Bl.value.split("").map((Il,ud)=>Il==="_"?(Pu=!0,null):Pu?(Pu=!1,n.default.createElement("sub",{key:ud},Il)):Il))}function _u(Bl){const ud=Bl.split(/\s+/),pd=Math.max(...ud.map(qd=>qd.length)),rh=Math.max(Bl.length/2,pd)*7+40;return Math.max(rh,120)}function Hu(Bl){return Bl.map(Pu=>{let Il=structuredClone(Pu);return delete Il.colType,Pu.colType==="text"?Object.assign(Il,{filter:"agTextColumnFilter",valueFormatter:ml}):Pu.colType==="integer"?Object.assign(Il,{filter:"agNumberColumnFilter",valueFormatter:rl}):Pu.colType==="float"?Object.assign(Il,{filter:"agNumberColumnFilter",valueFormatter:Et}):Pu.colType==="boolean"?Object.assign(Il,{filter:"agTextColumnFilter",valueFormatter:ml}):Pu.colType==="id"?Object.assign(Il,{filter:"agTextColumnFilter",valueFormatter:ml,pinned:"left",cellRenderer:zn}):Pu.colType==="formula"?Object.assign(Il,{filter:"agTextColumnFilter",valueFormatter:ml,cellRenderer:Ml}):Pu.colType==="spg_symbol"&&Object.assign(Il,{filter:"agTextColumnFilter",valueFormatter:ml,cellRenderer:kl}),Object.assign(Il,{filterParams:{buttons:["reset","apply"],closeOnApply:!0}}),Il.headerComponentParams={},"unit"in Pu&&(Il.headerComponentParams.unit=Pu.unit,delete Il.unit),"infoText"in Pu&&(Il.headerComponentParams.infoText=Pu.infoText,delete Il.infoText),"hide"in Pu||(Il.hide=!1),"minWidth"in Pu||(Il.minWidth=_u(Pu.headerName)),Il})}const bu={minWidth:120,flex:1,sortable:!0,resizable:!0},dl={agColumnHeader:M.default},Tl=n.default.createElement(h.default,{id:"popover-basic"},n.default.createElement(h.default.Header,{as:"h3"},"Materials Grid help"),n.default.createElement(h.default.Body,{style:{textAlign:"justify"}},n.default.createElement("p",null,"The Materials Grid, shown below, contains all the filtered materials."),n.default.createElement("b",null,"Columns"),n.default.createElement("p",null,"A selection of properties are shown in columns. Click"," ",n.default.createElement("b",null,"Show columns")," to hide/show all available columns."),n.default.createElement("b",null,"Sorting"),n.default.createElement("p",null,"The grid can be sorted based on any column by clicking on the corresponding label in the header. ",n.default.createElement("b",null,"Holding down shift")," allows to sort based on multiple columns."),n.default.createElement("b",null,"Column menu and filtering"),n.default.createElement("p",null,"Each column has a menu that contains any additional information about the column, and allows to filter the list of materials. Active filters are indicated by the menu icon turning into a blue filter icon."))),$l=(0,n.forwardRef)((Bl,Pu)=>{const[Il,ud]=(0,n.useState)(null),[pd,id]=(0,n.useState)(null),[rh,qd]=(0,n.useState)(null),[oh,Ed]=(0,n.useState)(Hu(Bl.columns));(0,n.useImperativeHandle)(Pu,()=>({getFilteredRows:()=>{const Ih=[];return Il&&Il.forEachNodeAfterFilter(nd=>{let Yd={...nd.data};"elem_array"in Yd&&delete Yd.elem_array,Ih.push(Yd)}),Ih}})),(0,n.useEffect)(()=>{Il&&Il.onFilterChanged()},[Bl.ptable_filter,Il]),(0,n.useEffect)(()=>{if(!Il||!Bl.columns?.length||!Bl.rows?.length)return;const{columnFilters:Ih}=Bl;if(!(!Ih||Object.keys(Ih).length===0))try{const nd=new Set(Bl.columns.map(Kh=>Kh.field)),Yd=Object.fromEntries(Object.entries(Ih).filter(Kh=>{let[rp]=Kh;return nd.has(rp)}));Il.setFilterModel(Yd),Il.onFilterChanged()}catch(nd){console.warn(" Failed to apply column filters:",nd)}},[Il,Bl.columnFilters,Bl.columns,Bl.rows]),(0,n.useEffect)(()=>{Ed(Hu(Bl.columns))},[Bl.columns]);const Nl=Ih=>{ud(Ih.api),Ih.api.onFilterChanged()},Gd=()=>Object.keys(Bl.ptable_filter.elements).length>0,Cd=()=>{if(Il){let Ih=Il.getDisplayedRowCount();pd!==Ih&&id(Ih)}},Bu=Ih=>{if(Ih.data){if(Bl.ptable_filter.mode==="exact"){let nd=Object.keys(Bl.ptable_filter.elements),Yd=Ih.data.elem_array.length===nd.length,Kh=Ih.data.elem_array.every(rp=>nd.includes(rp));return Yd&&Kh}if(Bl.ptable_filter.mode==="include"){let nd=[],Yd=[];for(const[lh,yp]of Object.entries(Bl.ptable_filter.elements))yp===1&&nd.push(lh),yp===2&&Yd.push(lh);let Kh=nd.every(lh=>Ih.data.elem_array.includes(lh)),rp=Ih.data.elem_array.every(lh=>!Yd.includes(lh));return Kh&&rp}}return!0},wh=()=>{if(Cd(),Il){const Ih=Il.getFilterModel();qd(Object.keys(Ih).length>0)}},Rd=()=>{Cd()},dh={pagination:!0,paginationPageSize:20,suppressMenuHide:!0,enableCellTextSelection:!0,ensureDomOrder:!0,domLayout:"autoHeight",headerHeight:54};return n.default.createElement("div",null,n.default.createElement("div",{className:"grid-header-row"},n.default.createElement("div",{className:"grid-header-row-left-side"},n.default.createElement("span",{className:"grid-header-row-showing-text"},"Showing ",pd," entries out of ",Bl.rows.length),n.default.createElement("div",{style:{marginLeft:"10px"}},n.default.createElement($.HelpButton,{popover:Tl,placement:"right"}))),n.default.createElement("div",{className:"grid-header-row-right-side"},n.default.createElement(V.default,{gridApi:Il,anyColFilterActive:rh}),n.default.createElement(_.default,{columnDefs:oh,setColumnDefs:Ed}))),n.default.createElement("div",{className:"ag-theme-alpine custom-grid-container"},n.default.createElement(s.AgGridReact,{columnDefs:oh,defaultColDef:bu,rowData:Bl.rows,gridOptions:dh,onGridReady:Nl,isExternalFilterPresent:Gd,doesExternalFilterPass:Bu,onFilterChanged:wh,onRowDataUpdated:Rd,components:dl})))});return MaterialDataGrid.default=$l,MaterialDataGrid}var hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0}),dist.default=void 0;var n=$(requireReact()),h=_(requirePTable()),s=_(requireMaterialDataGrid());function _(ie){return ie&&ie.__esModule?ie:{default:ie}}function M(ie){if(typeof WeakMap!="function")return null;var zn=new WeakMap,Et=new WeakMap;return(M=function(ml){return ml?Et:zn})(ie)}function $(ie,zn){if(ie&&ie.__esModule)return ie;if(ie===null||typeof ie!="object"&&typeof ie!="function")return{default:ie};var Et=M(zn);if(Et&&Et.has(ie))return Et.get(ie);var ml={},rl=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ml in ie)if(Ml!=="default"&&Object.prototype.hasOwnProperty.call(ie,Ml)){var kl=rl?Object.getOwnPropertyDescriptor(ie,Ml):null;kl&&(kl.get||kl.set)?Object.defineProperty(ml,Ml,kl):ml[Ml]=ie[Ml]}return ml.default=ie,Et&&Et.set(ie,ml),ml}function V(ie){return[...new Set(ie.match(/[A-Z][a-z]?/g))]}function oe(ie,zn){let Et=zn.filter(rl=>rl.colType==="boolean").map(rl=>rl.field);return ie.map(rl=>{const Ml={...rl,elem_array:V(rl.formula)};return Et.forEach(kl=>{kl in Ml&&(Ml[kl]=Ml[kl]?"yes":"no")}),Ml})}const Y=(0,n.forwardRef)((ie,zn)=>{const[Et,ml]=(0,n.useState)({mode:"include",elements:{}}),[rl,Ml]=(0,n.useState)([]);(0,n.useEffect)(()=>{let Hu=oe(ie.rows,ie.columns);Ml(Hu)},[ie.rows,ie.columns]);const kl=(0,n.useCallback)(Hu=>{let bu=Et.mode,dl=structuredClone(Et);if("mode"in Hu&&(dl.mode=Hu.mode,bu=Hu.mode,Hu.mode==="exact"))for(const[Tl,$l]of Object.entries(dl.elements))$l>1&&delete dl.elements[Tl];if("element"in Hu){let Tl=Hu.element;Hu.element in dl.elements?dl.elements[Tl]+=1:dl.elements[Tl]=1,bu==="exact"?dl.elements[Tl]===2&&delete dl.elements[Tl]:bu==="include"&&dl.elements[Tl]===3&&delete dl.elements[Tl]}ml(dl)},[Et]),_u=ie.columns.length>0;return n.default.createElement("div",{className:"material_selector_container"},n.default.createElement(h.default,{onSelectionChange:kl,filter:Et,rows:rl}),n.default.createElement("div",{style:{marginTop:"5px"}}),_u?n.default.createElement(s.default,{ref:zn,columns:ie.columns,rows:rl,ptable_filter:Et,columnFilters:ie.columnFilters}):n.default.createElement("div",{style:{marginTop:"50px",border:"solid 2px rgb(220, 220, 220)",height:"600px",display:"flex",justifyContent:"center",alignItems:"center"}},"Loading..."))});return dist.default=Y,dist}var distExports=requireDist();const MaterialSelector=getDefaultExportFromCjs(distExports),Mc3dLogo="/assets/mc3d-BE0OUaqM.png";function cn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ve={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sn;function ri(){if(Sn)return ae;Sn=1;var n=dm,h=Symbol.for("react.element"),s=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,M=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$={key:!0,ref:!0,__self:!0,__source:!0};function V(oe,Y,ie){var zn,Et={},ml=null,rl=null;ie!==void 0&&(ml=""+ie),Y.key!==void 0&&(ml=""+Y.key),Y.ref!==void 0&&(rl=Y.ref);for(zn in Y)_.call(Y,zn)&&!$.hasOwnProperty(zn)&&(Et[zn]=Y[zn]);if(oe&&oe.defaultProps)for(zn in Y=oe.defaultProps,Y)Et[zn]===void 0&&(Et[zn]=Y[zn]);return{$$typeof:h,type:oe,key:ml,ref:rl,props:Et,_owner:M.current}}return ae.Fragment=s,ae.jsx=V,ae.jsxs=V,ae}Ve.exports=ri();var T=Ve.exports;const ai="_archive_doicitation_y1o5i_1",ci="_doi_badge_y1o5i_9",ui="_doi_left_y1o5i_13",li="_doi_right_y1o5i_27",Ee={archive_doicitation:ai,doi_badge:ci,doi_left:ui,doi_right:li},wu=({doi_id:n,doi:h,label:s="DOI",color:_="#a2cbff"})=>{let M="";return n!=null?M=`10.24435/materialscloud:${n}`:M=h,T.jsx("div",{className:Ee.archive_doicitation,children:T.jsxs("span",{className:Ee.doi_badge,children:[T.jsx("span",{className:Ee.doi_left,children:s}),T.jsx("a",{href:`https://doi.org/${M}`,className:Ee.doi_right,target:"_blank",style:{backgroundColor:_},children:M})]})})};function We(n,h){if(n.contains)return n.contains(h);if(n.compareDocumentPosition)return n===h||!!(n.compareDocumentPosition(h)&16)}var Je={exports:{}},ze,Mn;function un(){if(Mn)return ze;Mn=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ze=n,ze}var He,Nn;function _i(){if(Nn)return He;Nn=1;var n=un();function h(){}function s(){}return s.resetWarningCache=h,He=function(){function _(V,oe,Y,ie,zn,Et){if(Et!==n){var ml=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw ml.name="Invariant Violation",ml}}_.isRequired=_;function M(){return _}var $={array:_,bigint:_,bool:_,func:_,number:_,object:_,string:_,symbol:_,any:_,arrayOf:M,element:_,elementType:_,instanceOf:M,node:_,objectOf:M,oneOf:M,oneOfType:M,shape:M,exact:M,checkPropTypes:s,resetWarningCache:h};return $.PropTypes=$,$},He}Je.exports=_i()();var yi=Je.exports;const N=cn(yi);function ur(){const n=reactExports.useRef(!0),h=reactExports.useRef(()=>n.current);return reactExports.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),h.current}function bi(n){const h=reactExports.useRef(n);return h.current=n,h}function Pi(n){const h=bi(n);reactExports.useEffect(()=>()=>h.current(),[])}const Ge=2**31-1;function lr(n,h,s){const _=s-Date.now();n.current=_<=Ge?setTimeout(h,_):setTimeout(()=>lr(n,h,s),Ge)}function wi(){const n=ur(),h=reactExports.useRef();return Pi(()=>clearTimeout(h.current)),reactExports.useMemo(()=>{const s=()=>clearTimeout(h.current);function _(M,$=0){n()&&(s(),$<=Ge?h.current=setTimeout(M,$):lr(h,M,Date.now()+$))}return{set:_,clear:s,handleRef:h}},[])}var fr=function(){},Ai=fr;const dr=cn(Ai);function Oi(n,h){if(n==null)return{};var s={},_=Object.keys(n),M,$;for($=0;$<_.length;$++)M=_[$],!(h.indexOf(M)>=0)&&(s[M]=n[M]);return s}function Ri(n,h,s){var _=reactExports.useRef(n!==void 0),M=reactExports.useState(h),$=M[0],V=M[1],oe=n!==void 0,Y=_.current;return _.current=oe,!oe&&Y&&$!==h&&V(h),[oe?n:$,reactExports.useCallback(function(ie){for(var zn=arguments.length,Et=new Array(zn>1?zn-1:0),ml=1;ml<zn;ml++)Et[ml-1]=arguments[ml];s&&s.apply(void 0,[ie].concat(Et)),V(ie)},[s])]}function qe(n,h){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,_){return s.__proto__=_,s},qe(n,h)}function Ci(n,h){n.prototype=Object.create(h.prototype),n.prototype.constructor=n,qe(n,h)}const Zn=n=>!n||typeof n=="function"?n:h=>{n.current=h};function Ti(n,h){const s=Zn(n),_=Zn(h);return M=>{s&&s(M),_&&_(M)}}function ne(n,h){return reactExports.useMemo(()=>Ti(n,h),[n,h])}var pr={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var h={}.hasOwnProperty;function s(){for(var $="",V=0;V<arguments.length;V++){var oe=arguments[V];oe&&($=M($,_(oe)))}return $}function _($){if(typeof $=="string"||typeof $=="number")return $;if(typeof $!="object")return"";if(Array.isArray($))return s.apply(null,$);if($.toString!==Object.prototype.toString&&!$.toString.toString().includes("[native code]"))return $.toString();var V="";for(var oe in $)h.call($,oe)&&$[oe]&&(V=M(V,oe));return V}function M($,V){return V?$?$+" "+V:$+V:$}n.exports?(s.default=s,n.exports=s):window.classNames=s})()})(pr);var Si=pr.exports;const Ut=cn(Si);function Hn(){return reactExports.useState(null)}var Un=Object.prototype.hasOwnProperty;function Yn(n,h,s){for(s of n.keys())if(fe(s,h))return s}function fe(n,h){var s,_,M;if(n===h)return!0;if(n&&h&&(s=n.constructor)===h.constructor){if(s===Date)return n.getTime()===h.getTime();if(s===RegExp)return n.toString()===h.toString();if(s===Array){if((_=n.length)===h.length)for(;_--&&fe(n[_],h[_]););return _===-1}if(s===Set){if(n.size!==h.size)return!1;for(_ of n)if(M=_,M&&typeof M=="object"&&(M=Yn(h,M),!M)||!h.has(M))return!1;return!0}if(s===Map){if(n.size!==h.size)return!1;for(_ of n)if(M=_[0],M&&typeof M=="object"&&(M=Yn(h,M),!M)||!fe(_[1],h.get(M)))return!1;return!0}if(s===ArrayBuffer)n=new Uint8Array(n),h=new Uint8Array(h);else if(s===DataView){if((_=n.byteLength)===h.byteLength)for(;_--&&n.getInt8(_)===h.getInt8(_););return _===-1}if(ArrayBuffer.isView(n)){if((_=n.byteLength)===h.byteLength)for(;_--&&n[_]===h[_];);return _===-1}if(!s||typeof n=="object"){_=0;for(s in n)if(Un.call(n,s)&&++_&&!Un.call(h,s)||!(s in h)||!fe(n[s],h[s]))return!1;return Object.keys(h).length===_}}return n!==n&&h!==h}function ki(n){const h=ur();return[n[0],reactExports.useCallback(s=>{if(h())return n[1](s)},[h,n[1]])]}var dt="top",yt="bottom",bt="right",pt="left",ln="auto",he=[dt,yt,bt,pt],$t="start",ge="end",Ii="clippingParents",mr="viewport",ue="popper",ji="reference",Vn=he.reduce(function(n,h){return n.concat([h+"-"+$t,h+"-"+ge])},[]),gr=[].concat(he,[ln]).reduce(function(n,h){return n.concat([h,h+"-"+$t,h+"-"+ge])},[]),Di="beforeRead",Fi="read",Mi="afterRead",Bi="beforeMain",zi="main",Li="afterMain",Ni="beforeWrite",Zi="write",Hi="afterWrite",Ui=[Di,Fi,Mi,Bi,zi,Li,Ni,Zi,Hi];function Pt(n){return n.split("-")[0]}function gt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var h=n.ownerDocument;return h&&h.defaultView||window}return n}function Zt(n){var h=gt(n).Element;return n instanceof h||n instanceof Element}function wt(n){var h=gt(n).HTMLElement;return n instanceof h||n instanceof HTMLElement}function fn(n){if(typeof ShadowRoot>"u")return!1;var h=gt(n).ShadowRoot;return n instanceof h||n instanceof ShadowRoot}var Nt=Math.max,Te=Math.min,Qt=Math.round;function Ke(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(h){return h.brand+"/"+h.version}).join(" "):navigator.userAgent}function _r(){return!/^((?!chrome|android).)*safari/i.test(Ke())}function Xt(n,h,s){h===void 0&&(h=!1),s===void 0&&(s=!1);var _=n.getBoundingClientRect(),M=1,$=1;h&&wt(n)&&(M=n.offsetWidth>0&&Qt(_.width)/n.offsetWidth||1,$=n.offsetHeight>0&&Qt(_.height)/n.offsetHeight||1);var V=Zt(n)?gt(n):window,oe=V.visualViewport,Y=!_r()&&s,ie=(_.left+(Y&&oe?oe.offsetLeft:0))/M,zn=(_.top+(Y&&oe?oe.offsetTop:0))/$,Et=_.width/M,ml=_.height/$;return{width:Et,height:ml,top:zn,right:ie+Et,bottom:zn+ml,left:ie,x:ie,y:zn}}function dn(n){var h=Xt(n),s=n.offsetWidth,_=n.offsetHeight;return Math.abs(h.width-s)<=1&&(s=h.width),Math.abs(h.height-_)<=1&&(_=h.height),{x:n.offsetLeft,y:n.offsetTop,width:s,height:_}}function vr(n,h){var s=h.getRootNode&&h.getRootNode();if(n.contains(h))return!0;if(s&&fn(s)){var _=h;do{if(_&&n.isSameNode(_))return!0;_=_.parentNode||_.host}while(_)}return!1}function It(n){return n?(n.nodeName||"").toLowerCase():null}function Rt(n){return gt(n).getComputedStyle(n)}function Yi(n){return["table","td","th"].indexOf(It(n))>=0}function Dt(n){return((Zt(n)?n.ownerDocument:n.document)||window.document).documentElement}function ke(n){return It(n)==="html"?n:n.assignedSlot||n.parentNode||(fn(n)?n.host:null)||Dt(n)}function Wn(n){return!wt(n)||Rt(n).position==="fixed"?null:n.offsetParent}function Vi(n){var h=/firefox/i.test(Ke()),s=/Trident/i.test(Ke());if(s&&wt(n)){var _=Rt(n);if(_.position==="fixed")return null}var M=ke(n);for(fn(M)&&(M=M.host);wt(M)&&["html","body"].indexOf(It(M))<0;){var $=Rt(M);if($.transform!=="none"||$.perspective!=="none"||$.contain==="paint"||["transform","perspective"].indexOf($.willChange)!==-1||h&&$.willChange==="filter"||h&&$.filter&&$.filter!=="none")return M;M=M.parentNode}return null}function ye(n){for(var h=gt(n),s=Wn(n);s&&Yi(s)&&Rt(s).position==="static";)s=Wn(s);return s&&(It(s)==="html"||It(s)==="body"&&Rt(s).position==="static")?h:s||Vi(n)||h}function pn(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function de(n,h,s){return Nt(n,Te(h,s))}function Wi(n,h,s){var _=de(n,h,s);return _>s?s:_}function hr(){return{top:0,right:0,bottom:0,left:0}}function yr(n){return Object.assign({},hr(),n)}function br(n,h){return h.reduce(function(s,_){return s[_]=n,s},{})}var Ji=function(n,h){return n=typeof n=="function"?n(Object.assign({},h.rects,{placement:h.placement})):n,yr(typeof n!="number"?n:br(n,he))};function Gi(n){var h,s=n.state,_=n.name,M=n.options,$=s.elements.arrow,V=s.modifiersData.popperOffsets,oe=Pt(s.placement),Y=pn(oe),ie=[pt,bt].indexOf(oe)>=0,zn=ie?"height":"width";if(!(!$||!V)){var Et=Ji(M.padding,s),ml=dn($),rl=Y==="y"?dt:pt,Ml=Y==="y"?yt:bt,kl=s.rects.reference[zn]+s.rects.reference[Y]-V[Y]-s.rects.popper[zn],_u=V[Y]-s.rects.reference[Y],Hu=ye($),bu=Hu?Y==="y"?Hu.clientHeight||0:Hu.clientWidth||0:0,dl=kl/2-_u/2,Tl=Et[rl],$l=bu-ml[zn]-Et[Ml],Bl=bu/2-ml[zn]/2+dl,Pu=de(Tl,Bl,$l),Il=Y;s.modifiersData[_]=(h={},h[Il]=Pu,h.centerOffset=Pu-Bl,h)}}function qi(n){var h=n.state,s=n.options,_=s.element,M=_===void 0?"[data-popper-arrow]":_;M!=null&&(typeof M=="string"&&(M=h.elements.popper.querySelector(M),!M)||vr(h.elements.popper,M)&&(h.elements.arrow=M))}const Ki={name:"arrow",enabled:!0,phase:"main",fn:Gi,effect:qi,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function te(n){return n.split("-")[1]}var $i={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qi(n,h){var s=n.x,_=n.y,M=h.devicePixelRatio||1;return{x:Qt(s*M)/M||0,y:Qt(_*M)/M||0}}function Jn(n){var h,s=n.popper,_=n.popperRect,M=n.placement,$=n.variation,V=n.offsets,oe=n.position,Y=n.gpuAcceleration,ie=n.adaptive,zn=n.roundOffsets,Et=n.isFixed,ml=V.x,rl=ml===void 0?0:ml,Ml=V.y,kl=Ml===void 0?0:Ml,_u=typeof zn=="function"?zn({x:rl,y:kl}):{x:rl,y:kl};rl=_u.x,kl=_u.y;var Hu=V.hasOwnProperty("x"),bu=V.hasOwnProperty("y"),dl=pt,Tl=dt,$l=window;if(ie){var Bl=ye(s),Pu="clientHeight",Il="clientWidth";if(Bl===gt(s)&&(Bl=Dt(s),Rt(Bl).position!=="static"&&oe==="absolute"&&(Pu="scrollHeight",Il="scrollWidth")),Bl=Bl,M===dt||(M===pt||M===bt)&&$===ge){Tl=yt;var ud=Et&&Bl===$l&&$l.visualViewport?$l.visualViewport.height:Bl[Pu];kl-=ud-_.height,kl*=Y?1:-1}if(M===pt||(M===dt||M===yt)&&$===ge){dl=bt;var pd=Et&&Bl===$l&&$l.visualViewport?$l.visualViewport.width:Bl[Il];rl-=pd-_.width,rl*=Y?1:-1}}var id=Object.assign({position:oe},ie&&$i),rh=zn===!0?Qi({x:rl,y:kl},gt(s)):{x:rl,y:kl};if(rl=rh.x,kl=rh.y,Y){var qd;return Object.assign({},id,(qd={},qd[Tl]=bu?"0":"",qd[dl]=Hu?"0":"",qd.transform=($l.devicePixelRatio||1)<=1?"translate("+rl+"px, "+kl+"px)":"translate3d("+rl+"px, "+kl+"px, 0)",qd))}return Object.assign({},id,(h={},h[Tl]=bu?kl+"px":"",h[dl]=Hu?rl+"px":"",h.transform="",h))}function Xi(n){var h=n.state,s=n.options,_=s.gpuAcceleration,M=_===void 0?!0:_,$=s.adaptive,V=$===void 0?!0:$,oe=s.roundOffsets,Y=oe===void 0?!0:oe,ie={placement:Pt(h.placement),variation:te(h.placement),popper:h.elements.popper,popperRect:h.rects.popper,gpuAcceleration:M,isFixed:h.options.strategy==="fixed"};h.modifiersData.popperOffsets!=null&&(h.styles.popper=Object.assign({},h.styles.popper,Jn(Object.assign({},ie,{offsets:h.modifiersData.popperOffsets,position:h.options.strategy,adaptive:V,roundOffsets:Y})))),h.modifiersData.arrow!=null&&(h.styles.arrow=Object.assign({},h.styles.arrow,Jn(Object.assign({},ie,{offsets:h.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Y})))),h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-placement":h.placement})}const to={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Xi,data:{}};var Ae={passive:!0};function eo(n){var h=n.state,s=n.instance,_=n.options,M=_.scroll,$=M===void 0?!0:M,V=_.resize,oe=V===void 0?!0:V,Y=gt(h.elements.popper),ie=[].concat(h.scrollParents.reference,h.scrollParents.popper);return $&&ie.forEach(function(zn){zn.addEventListener("scroll",s.update,Ae)}),oe&&Y.addEventListener("resize",s.update,Ae),function(){$&&ie.forEach(function(zn){zn.removeEventListener("scroll",s.update,Ae)}),oe&&Y.removeEventListener("resize",s.update,Ae)}}const no={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:eo,data:{}};var ro={left:"right",right:"left",bottom:"top",top:"bottom"};function Re(n){return n.replace(/left|right|bottom|top/g,function(h){return ro[h]})}var io={start:"end",end:"start"};function Gn(n){return n.replace(/start|end/g,function(h){return io[h]})}function mn(n){var h=gt(n),s=h.pageXOffset,_=h.pageYOffset;return{scrollLeft:s,scrollTop:_}}function gn(n){return Xt(Dt(n)).left+mn(n).scrollLeft}function oo(n,h){var s=gt(n),_=Dt(n),M=s.visualViewport,$=_.clientWidth,V=_.clientHeight,oe=0,Y=0;if(M){$=M.width,V=M.height;var ie=_r();(ie||!ie&&h==="fixed")&&(oe=M.offsetLeft,Y=M.offsetTop)}return{width:$,height:V,x:oe+gn(n),y:Y}}function so(n){var h,s=Dt(n),_=mn(n),M=(h=n.ownerDocument)==null?void 0:h.body,$=Nt(s.scrollWidth,s.clientWidth,M?M.scrollWidth:0,M?M.clientWidth:0),V=Nt(s.scrollHeight,s.clientHeight,M?M.scrollHeight:0,M?M.clientHeight:0),oe=-_.scrollLeft+gn(n),Y=-_.scrollTop;return Rt(M||s).direction==="rtl"&&(oe+=Nt(s.clientWidth,M?M.clientWidth:0)-$),{width:$,height:V,x:oe,y:Y}}function _n(n){var h=Rt(n),s=h.overflow,_=h.overflowX,M=h.overflowY;return/auto|scroll|overlay|hidden/.test(s+M+_)}function Pr(n){return["html","body","#document"].indexOf(It(n))>=0?n.ownerDocument.body:wt(n)&&_n(n)?n:Pr(ke(n))}function pe(n,h){var s;h===void 0&&(h=[]);var _=Pr(n),M=_===((s=n.ownerDocument)==null?void 0:s.body),$=gt(_),V=M?[$].concat($.visualViewport||[],_n(_)?_:[]):_,oe=h.concat(V);return M?oe:oe.concat(pe(ke(V)))}function $e(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function ao(n,h){var s=Xt(n,!1,h==="fixed");return s.top=s.top+n.clientTop,s.left=s.left+n.clientLeft,s.bottom=s.top+n.clientHeight,s.right=s.left+n.clientWidth,s.width=n.clientWidth,s.height=n.clientHeight,s.x=s.left,s.y=s.top,s}function qn(n,h,s){return h===mr?$e(oo(n,s)):Zt(h)?ao(h,s):$e(so(Dt(n)))}function co(n){var h=pe(ke(n)),s=["absolute","fixed"].indexOf(Rt(n).position)>=0,_=s&&wt(n)?ye(n):n;return Zt(_)?h.filter(function(M){return Zt(M)&&vr(M,_)&&It(M)!=="body"}):[]}function uo(n,h,s,_){var M=h==="clippingParents"?co(n):[].concat(h),$=[].concat(M,[s]),V=$[0],oe=$.reduce(function(Y,ie){var zn=qn(n,ie,_);return Y.top=Nt(zn.top,Y.top),Y.right=Te(zn.right,Y.right),Y.bottom=Te(zn.bottom,Y.bottom),Y.left=Nt(zn.left,Y.left),Y},qn(n,V,_));return oe.width=oe.right-oe.left,oe.height=oe.bottom-oe.top,oe.x=oe.left,oe.y=oe.top,oe}function wr(n){var h=n.reference,s=n.element,_=n.placement,M=_?Pt(_):null,$=_?te(_):null,V=h.x+h.width/2-s.width/2,oe=h.y+h.height/2-s.height/2,Y;switch(M){case dt:Y={x:V,y:h.y-s.height};break;case yt:Y={x:V,y:h.y+h.height};break;case bt:Y={x:h.x+h.width,y:oe};break;case pt:Y={x:h.x-s.width,y:oe};break;default:Y={x:h.x,y:h.y}}var ie=M?pn(M):null;if(ie!=null){var zn=ie==="y"?"height":"width";switch($){case $t:Y[ie]=Y[ie]-(h[zn]/2-s[zn]/2);break;case ge:Y[ie]=Y[ie]+(h[zn]/2-s[zn]/2);break}}return Y}function _e(n,h){h===void 0&&(h={});var s=h,_=s.placement,M=_===void 0?n.placement:_,$=s.strategy,V=$===void 0?n.strategy:$,oe=s.boundary,Y=oe===void 0?Ii:oe,ie=s.rootBoundary,zn=ie===void 0?mr:ie,Et=s.elementContext,ml=Et===void 0?ue:Et,rl=s.altBoundary,Ml=rl===void 0?!1:rl,kl=s.padding,_u=kl===void 0?0:kl,Hu=yr(typeof _u!="number"?_u:br(_u,he)),bu=ml===ue?ji:ue,dl=n.rects.popper,Tl=n.elements[Ml?bu:ml],$l=uo(Zt(Tl)?Tl:Tl.contextElement||Dt(n.elements.popper),Y,zn,V),Bl=Xt(n.elements.reference),Pu=wr({reference:Bl,element:dl,placement:M}),Il=$e(Object.assign({},dl,Pu)),ud=ml===ue?Il:Bl,pd={top:$l.top-ud.top+Hu.top,bottom:ud.bottom-$l.bottom+Hu.bottom,left:$l.left-ud.left+Hu.left,right:ud.right-$l.right+Hu.right},id=n.modifiersData.offset;if(ml===ue&&id){var rh=id[M];Object.keys(pd).forEach(function(qd){var oh=[bt,yt].indexOf(qd)>=0?1:-1,Ed=[dt,yt].indexOf(qd)>=0?"y":"x";pd[qd]+=rh[Ed]*oh})}return pd}function lo(n,h){h===void 0&&(h={});var s=h,_=s.placement,M=s.boundary,$=s.rootBoundary,V=s.padding,oe=s.flipVariations,Y=s.allowedAutoPlacements,ie=Y===void 0?gr:Y,zn=te(_),Et=zn?oe?Vn:Vn.filter(function(Ml){return te(Ml)===zn}):he,ml=Et.filter(function(Ml){return ie.indexOf(Ml)>=0});ml.length===0&&(ml=Et);var rl=ml.reduce(function(Ml,kl){return Ml[kl]=_e(n,{placement:kl,boundary:M,rootBoundary:$,padding:V})[Pt(kl)],Ml},{});return Object.keys(rl).sort(function(Ml,kl){return rl[Ml]-rl[kl]})}function fo(n){if(Pt(n)===ln)return[];var h=Re(n);return[Gn(n),h,Gn(h)]}function po(n){var h=n.state,s=n.options,_=n.name;if(!h.modifiersData[_]._skip){for(var M=s.mainAxis,$=M===void 0?!0:M,V=s.altAxis,oe=V===void 0?!0:V,Y=s.fallbackPlacements,ie=s.padding,zn=s.boundary,Et=s.rootBoundary,ml=s.altBoundary,rl=s.flipVariations,Ml=rl===void 0?!0:rl,kl=s.allowedAutoPlacements,_u=h.options.placement,Hu=Pt(_u),bu=Hu===_u,dl=Y||(bu||!Ml?[Re(_u)]:fo(_u)),Tl=[_u].concat(dl).reduce(function(nd,Yd){return nd.concat(Pt(Yd)===ln?lo(h,{placement:Yd,boundary:zn,rootBoundary:Et,padding:ie,flipVariations:Ml,allowedAutoPlacements:kl}):Yd)},[]),$l=h.rects.reference,Bl=h.rects.popper,Pu=new Map,Il=!0,ud=Tl[0],pd=0;pd<Tl.length;pd++){var id=Tl[pd],rh=Pt(id),qd=te(id)===$t,oh=[dt,yt].indexOf(rh)>=0,Ed=oh?"width":"height",Nl=_e(h,{placement:id,boundary:zn,rootBoundary:Et,altBoundary:ml,padding:ie}),Gd=oh?qd?bt:pt:qd?yt:dt;$l[Ed]>Bl[Ed]&&(Gd=Re(Gd));var Cd=Re(Gd),Bu=[];if($&&Bu.push(Nl[rh]<=0),oe&&Bu.push(Nl[Gd]<=0,Nl[Cd]<=0),Bu.every(function(nd){return nd})){ud=id,Il=!1;break}Pu.set(id,Bu)}if(Il)for(var wh=Ml?3:1,Rd=function(nd){var Yd=Tl.find(function(Kh){var rp=Pu.get(Kh);if(rp)return rp.slice(0,nd).every(function(lh){return lh})});if(Yd)return ud=Yd,"break"},dh=wh;dh>0;dh--){var Ih=Rd(dh);if(Ih==="break")break}h.placement!==ud&&(h.modifiersData[_]._skip=!0,h.placement=ud,h.reset=!0)}}const mo={name:"flip",enabled:!0,phase:"main",fn:po,requiresIfExists:["offset"],data:{_skip:!1}};function Kn(n,h,s){return s===void 0&&(s={x:0,y:0}),{top:n.top-h.height-s.y,right:n.right-h.width+s.x,bottom:n.bottom-h.height+s.y,left:n.left-h.width-s.x}}function $n(n){return[dt,bt,yt,pt].some(function(h){return n[h]>=0})}function go(n){var h=n.state,s=n.name,_=h.rects.reference,M=h.rects.popper,$=h.modifiersData.preventOverflow,V=_e(h,{elementContext:"reference"}),oe=_e(h,{altBoundary:!0}),Y=Kn(V,_),ie=Kn(oe,M,$),zn=$n(Y),Et=$n(ie);h.modifiersData[s]={referenceClippingOffsets:Y,popperEscapeOffsets:ie,isReferenceHidden:zn,hasPopperEscaped:Et},h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-reference-hidden":zn,"data-popper-escaped":Et})}const _o={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:go};function vo(n,h,s){var _=Pt(n),M=[pt,dt].indexOf(_)>=0?-1:1,$=typeof s=="function"?s(Object.assign({},h,{placement:n})):s,V=$[0],oe=$[1];return V=V||0,oe=(oe||0)*M,[pt,bt].indexOf(_)>=0?{x:oe,y:V}:{x:V,y:oe}}function ho(n){var h=n.state,s=n.options,_=n.name,M=s.offset,$=M===void 0?[0,0]:M,V=gr.reduce(function(zn,Et){return zn[Et]=vo(Et,h.rects,$),zn},{}),oe=V[h.placement],Y=oe.x,ie=oe.y;h.modifiersData.popperOffsets!=null&&(h.modifiersData.popperOffsets.x+=Y,h.modifiersData.popperOffsets.y+=ie),h.modifiersData[_]=V}const yo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ho};function bo(n){var h=n.state,s=n.name;h.modifiersData[s]=wr({reference:h.rects.reference,element:h.rects.popper,placement:h.placement})}const Po={name:"popperOffsets",enabled:!0,phase:"read",fn:bo,data:{}};function wo(n){return n==="x"?"y":"x"}function Eo(n){var h=n.state,s=n.options,_=n.name,M=s.mainAxis,$=M===void 0?!0:M,V=s.altAxis,oe=V===void 0?!1:V,Y=s.boundary,ie=s.rootBoundary,zn=s.altBoundary,Et=s.padding,ml=s.tether,rl=ml===void 0?!0:ml,Ml=s.tetherOffset,kl=Ml===void 0?0:Ml,_u=_e(h,{boundary:Y,rootBoundary:ie,padding:Et,altBoundary:zn}),Hu=Pt(h.placement),bu=te(h.placement),dl=!bu,Tl=pn(Hu),$l=wo(Tl),Bl=h.modifiersData.popperOffsets,Pu=h.rects.reference,Il=h.rects.popper,ud=typeof kl=="function"?kl(Object.assign({},h.rects,{placement:h.placement})):kl,pd=typeof ud=="number"?{mainAxis:ud,altAxis:ud}:Object.assign({mainAxis:0,altAxis:0},ud),id=h.modifiersData.offset?h.modifiersData.offset[h.placement]:null,rh={x:0,y:0};if(Bl){if($){var qd,oh=Tl==="y"?dt:pt,Ed=Tl==="y"?yt:bt,Nl=Tl==="y"?"height":"width",Gd=Bl[Tl],Cd=Gd+_u[oh],Bu=Gd-_u[Ed],wh=rl?-Il[Nl]/2:0,Rd=bu===$t?Pu[Nl]:Il[Nl],dh=bu===$t?-Il[Nl]:-Pu[Nl],Ih=h.elements.arrow,nd=rl&&Ih?dn(Ih):{width:0,height:0},Yd=h.modifiersData["arrow#persistent"]?h.modifiersData["arrow#persistent"].padding:hr(),Kh=Yd[oh],rp=Yd[Ed],lh=de(0,Pu[Nl],nd[Nl]),yp=dl?Pu[Nl]/2-wh-lh-Kh-pd.mainAxis:Rd-lh-Kh-pd.mainAxis,Cp=dl?-Pu[Nl]/2+wh+lh+rp+pd.mainAxis:dh+lh+rp+pd.mainAxis,vp=h.elements.arrow&&ye(h.elements.arrow),mf=vp?Tl==="y"?vp.clientTop||0:vp.clientLeft||0:0,Zp=(qd=id?.[Tl])!=null?qd:0,kf=Gd+yp-Zp-mf,Eg=Gd+Cp-Zp,Gg=de(rl?Te(Cd,kf):Cd,Gd,rl?Nt(Bu,Eg):Bu);Bl[Tl]=Gg,rh[Tl]=Gg-Gd}if(oe){var Hf,Rg=Tl==="x"?dt:pt,fg=Tl==="x"?yt:bt,eg=Bl[$l],Wg=$l==="y"?"height":"width",Lg=eg+_u[Rg],$g=eg-_u[fg],Bm=[dt,pt].indexOf(Hu)!==-1,Lm=(Hf=id?.[$l])!=null?Hf:0,$m=Bm?Lg:eg-Pu[Wg]-Il[Wg]-Lm+pd.altAxis,_d=Bm?eg+Pu[Wg]+Il[Wg]-Lm-pd.altAxis:$g,Zd=rl&&Bm?Wi($m,eg,_d):de(rl?$m:Lg,eg,rl?_d:$g);Bl[$l]=Zd,rh[$l]=Zd-eg}h.modifiersData[_]=rh}}const xo={name:"preventOverflow",enabled:!0,phase:"main",fn:Eo,requiresIfExists:["offset"]};function Ao(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Oo(n){return n===gt(n)||!wt(n)?mn(n):Ao(n)}function Ro(n){var h=n.getBoundingClientRect(),s=Qt(h.width)/n.offsetWidth||1,_=Qt(h.height)/n.offsetHeight||1;return s!==1||_!==1}function Co(n,h,s){s===void 0&&(s=!1);var _=wt(h),M=wt(h)&&Ro(h),$=Dt(h),V=Xt(n,M,s),oe={scrollLeft:0,scrollTop:0},Y={x:0,y:0};return(_||!_&&!s)&&((It(h)!=="body"||_n($))&&(oe=Oo(h)),wt(h)?(Y=Xt(h,!0),Y.x+=h.clientLeft,Y.y+=h.clientTop):$&&(Y.x=gn($))),{x:V.left+oe.scrollLeft-Y.x,y:V.top+oe.scrollTop-Y.y,width:V.width,height:V.height}}function To(n){var h=new Map,s=new Set,_=[];n.forEach(function($){h.set($.name,$)});function M($){s.add($.name);var V=[].concat($.requires||[],$.requiresIfExists||[]);V.forEach(function(oe){if(!s.has(oe)){var Y=h.get(oe);Y&&M(Y)}}),_.push($)}return n.forEach(function($){s.has($.name)||M($)}),_}function So(n){var h=To(n);return Ui.reduce(function(s,_){return s.concat(h.filter(function(M){return M.phase===_}))},[])}function ko(n){var h;return function(){return h||(h=new Promise(function(s){Promise.resolve().then(function(){h=void 0,s(n())})})),h}}function Io(n){var h=n.reduce(function(s,_){var M=s[_.name];return s[_.name]=M?Object.assign({},M,_,{options:Object.assign({},M.options,_.options),data:Object.assign({},M.data,_.data)}):_,s},{});return Object.keys(h).map(function(s){return h[s]})}var Qn={placement:"bottom",modifiers:[],strategy:"absolute"};function Xn(){for(var n=arguments.length,h=new Array(n),s=0;s<n;s++)h[s]=arguments[s];return!h.some(function(_){return!(_&&typeof _.getBoundingClientRect=="function")})}function jo(n){n===void 0&&(n={});var h=n,s=h.defaultModifiers,_=s===void 0?[]:s,M=h.defaultOptions,$=M===void 0?Qn:M;return function(V,oe,Y){Y===void 0&&(Y=$);var ie={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qn,$),modifiersData:{},elements:{reference:V,popper:oe},attributes:{},styles:{}},zn=[],Et=!1,ml={state:ie,setOptions:function(kl){var _u=typeof kl=="function"?kl(ie.options):kl;Ml(),ie.options=Object.assign({},$,ie.options,_u),ie.scrollParents={reference:Zt(V)?pe(V):V.contextElement?pe(V.contextElement):[],popper:pe(oe)};var Hu=So(Io([].concat(_,ie.options.modifiers)));return ie.orderedModifiers=Hu.filter(function(bu){return bu.enabled}),rl(),ml.update()},forceUpdate:function(){if(!Et){var kl=ie.elements,_u=kl.reference,Hu=kl.popper;if(Xn(_u,Hu)){ie.rects={reference:Co(_u,ye(Hu),ie.options.strategy==="fixed"),popper:dn(Hu)},ie.reset=!1,ie.placement=ie.options.placement,ie.orderedModifiers.forEach(function(Il){return ie.modifiersData[Il.name]=Object.assign({},Il.data)});for(var bu=0;bu<ie.orderedModifiers.length;bu++){if(ie.reset===!0){ie.reset=!1,bu=-1;continue}var dl=ie.orderedModifiers[bu],Tl=dl.fn,$l=dl.options,Bl=$l===void 0?{}:$l,Pu=dl.name;typeof Tl=="function"&&(ie=Tl({state:ie,options:Bl,name:Pu,instance:ml})||ie)}}}},update:ko(function(){return new Promise(function(kl){ml.forceUpdate(),kl(ie)})}),destroy:function(){Ml(),Et=!0}};if(!Xn(V,oe))return ml;ml.setOptions(Y).then(function(kl){!Et&&Y.onFirstUpdate&&Y.onFirstUpdate(kl)});function rl(){ie.orderedModifiers.forEach(function(kl){var _u=kl.name,Hu=kl.options,bu=Hu===void 0?{}:Hu,dl=kl.effect;if(typeof dl=="function"){var Tl=dl({state:ie,name:_u,instance:ml,options:bu}),$l=function(){};zn.push(Tl||$l)}})}function Ml(){zn.forEach(function(kl){return kl()}),zn=[]}return ml}}const Do=jo({defaultModifiers:[_o,Po,to,no,yo,mo,xo,Ki]}),Fo=["enabled","placement","strategy","modifiers"];function Mo(n,h){if(n==null)return{};var s={},_=Object.keys(n),M,$;for($=0;$<_.length;$++)M=_[$],!(h.indexOf(M)>=0)&&(s[M]=n[M]);return s}const Bo={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},zo={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:n})=>()=>{const{reference:h,popper:s}=n.elements;if("removeAttribute"in h){const _=(h.getAttribute("aria-describedby")||"").split(",").filter(M=>M.trim()!==s.id);_.length?h.setAttribute("aria-describedby",_.join(",")):h.removeAttribute("aria-describedby")}},fn:({state:n})=>{var h;const{popper:s,reference:_}=n.elements,M=(h=s.getAttribute("role"))==null?void 0:h.toLowerCase();if(s.id&&M==="tooltip"&&"setAttribute"in _){const $=_.getAttribute("aria-describedby");if($&&$.split(",").indexOf(s.id)!==-1)return;_.setAttribute("aria-describedby",$?`${$},${s.id}`:s.id)}}},Lo=[];function No(n,h,s={}){let{enabled:_=!0,placement:M="bottom",strategy:$="absolute",modifiers:V=Lo}=s,oe=Mo(s,Fo);const Y=reactExports.useRef(V),ie=reactExports.useRef(),zn=reactExports.useCallback(()=>{var _u;(_u=ie.current)==null||_u.update()},[]),Et=reactExports.useCallback(()=>{var _u;(_u=ie.current)==null||_u.forceUpdate()},[]),[ml,rl]=ki(reactExports.useState({placement:M,update:zn,forceUpdate:Et,attributes:{},styles:{popper:{},arrow:{}}})),Ml=reactExports.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:_u})=>{const Hu={},bu={};Object.keys(_u.elements).forEach(dl=>{Hu[dl]=_u.styles[dl],bu[dl]=_u.attributes[dl]}),rl({state:_u,styles:Hu,attributes:bu,update:zn,forceUpdate:Et,placement:_u.placement})}}),[zn,Et,rl]),kl=reactExports.useMemo(()=>(fe(Y.current,V)||(Y.current=V),Y.current),[V]);return reactExports.useEffect(()=>{!ie.current||!_||ie.current.setOptions({placement:M,strategy:$,modifiers:[...kl,Ml,Bo]})},[$,M,Ml,_,kl]),reactExports.useEffect(()=>{if(!(!_||n==null||h==null))return ie.current=Do(n,h,Object.assign({},oe,{placement:M,strategy:$,modifiers:[...kl,zo,Ml]})),()=>{ie.current!=null&&(ie.current.destroy(),ie.current=void 0,rl(_u=>Object.assign({},_u,{attributes:{},styles:{popper:{}}})))}},[_,n,h]),ml}const vn=!!(typeof window<"u"&&window.document&&window.document.createElement);var Qe=!1,Xe=!1;try{var Ue={get passive(){return Qe=!0},get once(){return Xe=Qe=!0}};vn&&(window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,!0))}catch{}function Zo(n,h,s,_){if(_&&typeof _!="boolean"&&!Xe){var M=_.once,$=_.capture,V=s;!Xe&&M&&(V=s.__once||function oe(Y){this.removeEventListener(h,oe,$),s.call(this,Y)},s.__once=V),n.addEventListener(h,V,Qe?_:$)}n.addEventListener(h,s,_)}function Ho(n,h,s,_){var M=_&&typeof _!="boolean"?_.capture:_;n.removeEventListener(h,s,M),s.__once&&n.removeEventListener(h,s.__once,M)}function Lt(n,h,s,_){return Zo(n,h,s,_),function(){Ho(n,h,s,_)}}function Ie(n){return n&&n.ownerDocument||document}function Uo(n){const h=reactExports.useRef(n);return reactExports.useEffect(()=>{h.current=n},[n]),h}function ee(n){const h=Uo(n);return reactExports.useCallback(function(...s){return h.current&&h.current(...s)},[h])}const tr=()=>{};function Yo(n){return n.button===0}function Vo(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}const Ce=n=>n&&("current"in n?n.current:n),er={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Wo(n,h=tr,{disabled:s,clickTrigger:_="click"}={}){const M=reactExports.useRef(!1),$=reactExports.useRef(!1),V=reactExports.useCallback(ie=>{const zn=Ce(n);dr(!!zn,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),M.current=!zn||Vo(ie)||!Yo(ie)||!!We(zn,ie.target)||$.current,$.current=!1},[n]),oe=ee(ie=>{const zn=Ce(n);zn&&We(zn,ie.target)&&($.current=!0)}),Y=ee(ie=>{M.current||h(ie)});reactExports.useEffect(()=>{var ie,zn;if(s||n==null)return;const Et=Ie(Ce(n)),ml=Et.defaultView||window;let rl=(ie=ml.event)!=null?ie:(zn=ml.parent)==null?void 0:zn.event,Ml=null;er[_]&&(Ml=Lt(Et,er[_],oe,!0));const kl=Lt(Et,_,V,!0),_u=Lt(Et,_,bu=>{if(bu===rl){rl=void 0;return}Y(bu)});let Hu=[];return"ontouchstart"in Et.documentElement&&(Hu=[].slice.call(Et.body.children).map(bu=>Lt(bu,"mousemove",tr))),()=>{Ml?.(),kl(),_u(),Hu.forEach(bu=>bu())}},[n,s,_,V,oe,Y])}function Jo(n){return n.code==="Escape"||n.keyCode===27}const Go=()=>{};function qo(n,h,{disabled:s,clickTrigger:_}={}){const M=h||Go;Wo(n,M,{disabled:s,clickTrigger:_});const $=ee(V=>{Jo(V)&&M(V)});reactExports.useEffect(()=>{if(s||n==null)return;const V=Ie(Ce(n));let oe=(V.defaultView||window).event;const Y=Lt(V,"keyup",ie=>{if(ie===oe){oe=void 0;return}$(ie)});return()=>{Y()}},[n,s,$])}const Er=reactExports.createContext(vn?window:void 0);Er.Provider;function Ko(){return reactExports.useContext(Er)}const Ye=(n,h)=>vn?n==null?(h||Ie()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function nr(n,h){const s=Ko(),[_,M]=reactExports.useState(()=>Ye(n,s?.document));if(!_){const $=Ye(n);$&&M($)}return reactExports.useEffect(()=>{},[h,_]),reactExports.useEffect(()=>{const $=Ye(n);$!==_&&M($)},[n,_]),_}function $o(n){const h={};return Array.isArray(n)?(n?.forEach(s=>{h[s.name]=s}),h):n||h}function Qo(n={}){return Array.isArray(n)?n:Object.keys(n).map(h=>(n[h].name=h,n[h]))}function Xo({enabled:n,enableEvents:h,placement:s,flip:_,offset:M,fixed:$,containerPadding:V,arrowElement:oe,popperConfig:Y={}}){var ie,zn,Et,ml;const rl=$o(Y.modifiers);return Object.assign({},Y,{placement:s,enabled:n,strategy:$?"fixed":Y.strategy,modifiers:Qo(Object.assign({},rl,{eventListeners:{enabled:h,options:(ie=rl.eventListeners)==null?void 0:ie.options},preventOverflow:Object.assign({},rl.preventOverflow,{options:Object.assign({padding:V},(zn=rl.preventOverflow)==null?void 0:zn.options)}),offset:{options:Object.assign({offset:M},(Et=rl.offset)==null?void 0:Et.options)},arrow:Object.assign({},rl.arrow,{enabled:!!oe,options:Object.assign({},(ml=rl.arrow)==null?void 0:ml.options,{element:oe})}),flip:Object.assign({enabled:!!_},rl.flip)}))})}const ts=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",es=typeof document<"u",tn=es||ts?reactExports.useLayoutEffect:reactExports.useEffect;function ns({children:n,in:h,onExited:s,mountOnEnter:_,unmountOnExit:M}){const $=reactExports.useRef(null),V=reactExports.useRef(h),oe=ee(s);reactExports.useEffect(()=>{h?V.current=!0:oe($.current)},[h,oe]);const Y=ne($,n.ref),ie=reactExports.cloneElement(n,{ref:Y});return h?ie:M||!V.current&&_?null:ie}function rs({in:n,onTransition:h}){const s=reactExports.useRef(null),_=reactExports.useRef(!0),M=ee(h);return tn(()=>{if(!s.current)return;let $=!1;return M({in:n,element:s.current,initial:_.current,isStale:()=>$}),()=>{$=!0}},[n,M]),tn(()=>(_.current=!1,()=>{_.current=!0}),[]),s}function is({children:n,in:h,onExited:s,onEntered:_,transition:M}){const[$,V]=reactExports.useState(!h);h&&$&&V(!1);const oe=rs({in:!!h,onTransition:ie=>{const zn=()=>{ie.isStale()||(ie.in?_?.(ie.element,ie.initial):(V(!0),s?.(ie.element)))};Promise.resolve(M(ie)).then(zn,Et=>{throw ie.in||V(!0),Et})}}),Y=ne(oe,n.ref);return $&&!h?null:reactExports.cloneElement(n,{ref:Y})}function os(n,h,s){return n?T.jsx(n,Object.assign({},s)):h?T.jsx(is,Object.assign({},s,{transition:h})):T.jsx(ns,Object.assign({},s))}const xr=reactExports.forwardRef((n,h)=>{const{flip:s,offset:_,placement:M,containerPadding:$,popperConfig:V={},transition:oe,runTransition:Y}=n,[ie,zn]=Hn(),[Et,ml]=Hn(),rl=ne(zn,h),Ml=nr(n.container),kl=nr(n.target),[_u,Hu]=reactExports.useState(!n.show),bu=No(kl,ie,Xo({placement:M,enableEvents:!!n.show,containerPadding:$||5,flip:s,offset:_,arrowElement:Et,popperConfig:V}));n.show&&_u&&Hu(!1);const dl=(...id)=>{Hu(!0),n.onExited&&n.onExited(...id)},Tl=n.show||!_u;if(qo(ie,n.onHide,{disabled:!n.rootClose||n.rootCloseDisabled,clickTrigger:n.rootCloseEvent}),!Tl)return null;const{onExit:$l,onExiting:Bl,onEnter:Pu,onEntering:Il,onEntered:ud}=n;let pd=n.children(Object.assign({},bu.attributes.popper,{style:bu.styles.popper,ref:rl}),{popper:bu,placement:M,show:!!n.show,arrowProps:Object.assign({},bu.attributes.arrow,{style:bu.styles.arrow,ref:ml})});return pd=os(oe,Y,{in:!!n.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:pd,onExit:$l,onExiting:Bl,onExited:dl,onEnter:Pu,onEntering:Il,onEntered:ud}),Ml?ReactDOM.createPortal(pd,Ml):null});xr.displayName="Overlay";function rr(n,h){return n.classList?!!h&&n.classList.contains(h):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+h+" ")!==-1}const ss=["xxl","xl","lg","md","sm","xs"],as="xs",Ar=reactExports.createContext({prefixes:{},breakpoints:ss,minBreakpoint:as});function Ht(n,h){const{prefixes:s}=reactExports.useContext(Ar);return n||s[h]||h}function Or(){const{dir:n}=reactExports.useContext(Ar);return n==="rtl"}const Rr=reactExports.forwardRef(({className:n,bsPrefix:h,as:s="div",..._},M)=>(h=Ht(h,"popover-header"),T.jsx(s,{ref:M,className:Ut(n,h),..._})));Rr.displayName="PopoverHeader";const hn=reactExports.forwardRef(({className:n,bsPrefix:h,as:s="div",..._},M)=>(h=Ht(h,"popover-body"),T.jsx(s,{ref:M,className:Ut(n,h),..._})));hn.displayName="PopoverBody";function Cr(n,h){let s=n;return n==="left"?s=h?"end":"start":n==="right"&&(s=h?"start":"end"),s}function Tr(n="absolute"){return{position:n,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const cs=reactExports.forwardRef(({bsPrefix:n,placement:h="right",className:s,style:_,children:M,body:$,arrowProps:V,hasDoneInitialMeasure:oe,popper:Y,show:ie,...zn},Et)=>{const ml=Ht(n,"popover"),rl=Or(),[Ml]=h?.split("-")||[],kl=Cr(Ml,rl);let _u=_;return ie&&!oe&&(_u={..._,...Tr(Y?.strategy)}),T.jsxs("div",{ref:Et,role:"tooltip",style:_u,"x-placement":Ml,className:Ut(s,ml,Ml&&`bs-popover-${kl}`),...zn,children:[T.jsx("div",{className:"popover-arrow",...V}),$?T.jsx(hn,{children:M}):M]})}),en=Object.assign(cs,{Header:Rr,Body:hn,POPPER_OFFSET:[0,8]}),Sr=reactExports.forwardRef(({bsPrefix:n,placement:h="right",className:s,style:_,children:M,arrowProps:$,hasDoneInitialMeasure:V,popper:oe,show:Y,...ie},zn)=>{n=Ht(n,"tooltip");const Et=Or(),[ml]=h?.split("-")||[],rl=Cr(ml,Et);let Ml=_;return Y&&!V&&(Ml={..._,...Tr(oe?.strategy)}),T.jsxs("div",{ref:zn,style:Ml,role:"tooltip","x-placement":ml,className:Ut(s,n,`bs-tooltip-${rl}`),...ie,children:[T.jsx("div",{className:"tooltip-arrow",...$}),T.jsx("div",{className:`${n}-inner`,children:M})]})});Sr.displayName="Tooltip";const kr=Object.assign(Sr,{TOOLTIP_OFFSET:[0,6]});function us(n){const h=reactExports.useRef(null),s=Ht(void 0,"popover"),_=Ht(void 0,"tooltip"),M=reactExports.useMemo(()=>({name:"offset",options:{offset:()=>{if(n)return n;if(h.current){if(rr(h.current,s))return en.POPPER_OFFSET;if(rr(h.current,_))return kr.TOOLTIP_OFFSET}return[0,0]}}}),[n,s,_]);return[h,[M]]}const ir={disabled:!1},Ir=dm.createContext(null);var fs=function(n){return n.scrollTop},le="unmounted",Bt="exited",kt="entering",zt="entered",nn="exiting",Ct=(function(n){Ci(h,n);function h(_,M){var $;$=n.call(this,_,M)||this;var V=M,oe=V&&!V.isMounting?_.enter:_.appear,Y;return $.appearStatus=null,_.in?oe?(Y=Bt,$.appearStatus=kt):Y=zt:_.unmountOnExit||_.mountOnEnter?Y=le:Y=Bt,$.state={status:Y},$.nextCallback=null,$}h.getDerivedStateFromProps=function(_,M){var $=_.in;return $&&M.status===le?{status:Bt}:null};var s=h.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(_){var M=null;if(_!==this.props){var $=this.state.status;this.props.in?$!==kt&&$!==zt&&(M=kt):($===kt||$===zt)&&(M=nn)}this.updateStatus(!1,M)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var _=this.props.timeout,M,$,V;return M=$=V=_,_!=null&&typeof _!="number"&&(M=_.exit,$=_.enter,V=_.appear!==void 0?_.appear:$),{exit:M,enter:$,appear:V}},s.updateStatus=function(_,M){if(_===void 0&&(_=!1),M!==null)if(this.cancelNextCallback(),M===kt){if(this.props.unmountOnExit||this.props.mountOnEnter){var $=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);$&&fs($)}this.performEnter(_)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bt&&this.setState({status:le})},s.performEnter=function(_){var M=this,$=this.props.enter,V=this.context?this.context.isMounting:_,oe=this.props.nodeRef?[V]:[ReactDOM.findDOMNode(this),V],Y=oe[0],ie=oe[1],zn=this.getTimeouts(),Et=V?zn.appear:zn.enter;if(!_&&!$||ir.disabled){this.safeSetState({status:zt},function(){M.props.onEntered(Y)});return}this.props.onEnter(Y,ie),this.safeSetState({status:kt},function(){M.props.onEntering(Y,ie),M.onTransitionEnd(Et,function(){M.safeSetState({status:zt},function(){M.props.onEntered(Y,ie)})})})},s.performExit=function(){var _=this,M=this.props.exit,$=this.getTimeouts(),V=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!M||ir.disabled){this.safeSetState({status:Bt},function(){_.props.onExited(V)});return}this.props.onExit(V),this.safeSetState({status:nn},function(){_.props.onExiting(V),_.onTransitionEnd($.exit,function(){_.safeSetState({status:Bt},function(){_.props.onExited(V)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(_,M){M=this.setNextCallback(M),this.setState(_,M)},s.setNextCallback=function(_){var M=this,$=!0;return this.nextCallback=function(V){$&&($=!1,M.nextCallback=null,_(V))},this.nextCallback.cancel=function(){$=!1},this.nextCallback},s.onTransitionEnd=function(_,M){this.setNextCallback(M);var $=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),V=_==null&&!this.props.addEndListener;if(!$||V){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var oe=this.props.nodeRef?[this.nextCallback]:[$,this.nextCallback],Y=oe[0],ie=oe[1];this.props.addEndListener(Y,ie)}_!=null&&setTimeout(this.nextCallback,_)},s.render=function(){var _=this.state.status;if(_===le)return null;var M=this.props,$=M.children;M.in,M.mountOnEnter,M.unmountOnExit,M.appear,M.enter,M.exit,M.timeout,M.addEndListener,M.onEnter,M.onEntering,M.onEntered,M.onExit,M.onExiting,M.onExited,M.nodeRef;var V=Oi(M,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return dm.createElement(Ir.Provider,{value:null},typeof $=="function"?$(_,V):dm.cloneElement(dm.Children.only($),V))},h})(dm.Component);Ct.contextType=Ir;Ct.propTypes={};function qt(){}Ct.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:qt,onEntering:qt,onEntered:qt,onExit:qt,onExiting:qt,onExited:qt};Ct.UNMOUNTED=le;Ct.EXITED=Bt;Ct.ENTERING=kt;Ct.ENTERED=zt;Ct.EXITING=nn;function ds(n){var h=Ie(n);return h&&h.defaultView||window}function ps(n,h){return ds(n).getComputedStyle(n,h)}var ms=/([A-Z])/g;function gs(n){return n.replace(ms,"-$1").toLowerCase()}var _s=/^ms-/;function Oe(n){return gs(n).replace(_s,"-ms-")}var vs=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function hs(n){return!!(n&&vs.test(n))}function jr(n,h){var s="",_="";if(typeof h=="string")return n.style.getPropertyValue(Oe(h))||ps(n).getPropertyValue(Oe(h));Object.keys(h).forEach(function(M){var $=h[M];!$&&$!==0?n.style.removeProperty(Oe(M)):hs(M)?_+=M+"("+$+") ":s+=Oe(M)+": "+$+";"}),_&&(s+="transform: "+_+";"),n.style.cssText+=";"+s}function ys(n,h,s,_){if(_===void 0&&(_=!0),n){var M=document.createEvent("HTMLEvents");M.initEvent(h,s,_),n.dispatchEvent(M)}}function bs(n){var h=jr(n,"transitionDuration")||"",s=h.indexOf("ms")===-1?1e3:1;return parseFloat(h)*s}function Ps(n,h,s){s===void 0&&(s=5);var _=!1,M=setTimeout(function(){_||ys(n,"transitionend",!0)},h+s),$=Lt(n,"transitionend",function(){_=!0},{once:!0});return function(){clearTimeout(M),$()}}function ws(n,h,s,_){s==null&&(s=bs(n)||0);var M=Ps(n,s,_),$=Lt(n,"transitionend",h);return function(){M(),$()}}function or(n,h){const s=jr(n,h)||"",_=s.indexOf("ms")===-1?1e3:1;return parseFloat(s)*_}function Es(n,h){const s=or(n,"transitionDuration"),_=or(n,"transitionDelay"),M=ws(n,$=>{$.target===n&&(M(),h($))},s+_)}function xs(n){n.offsetHeight}function Se(n){return n&&"setState"in n?ReactDOM.findDOMNode(n):n??null}const As=dm.forwardRef(({onEnter:n,onEntering:h,onEntered:s,onExit:_,onExiting:M,onExited:$,addEndListener:V,children:oe,childRef:Y,...ie},zn)=>{const Et=reactExports.useRef(null),ml=ne(Et,Y),rl=Bl=>{ml(Se(Bl))},Ml=Bl=>Pu=>{Bl&&Et.current&&Bl(Et.current,Pu)},kl=reactExports.useCallback(Ml(n),[n]),_u=reactExports.useCallback(Ml(h),[h]),Hu=reactExports.useCallback(Ml(s),[s]),bu=reactExports.useCallback(Ml(_),[_]),dl=reactExports.useCallback(Ml(M),[M]),Tl=reactExports.useCallback(Ml($),[$]),$l=reactExports.useCallback(Ml(V),[V]);return T.jsx(Ct,{ref:zn,...ie,onEnter:kl,onEntered:Hu,onEntering:_u,onExit:bu,onExited:Tl,onExiting:dl,addEndListener:$l,nodeRef:Et,children:typeof oe=="function"?(Bl,Pu)=>oe(Bl,{...Pu,ref:rl}):dm.cloneElement(oe,{ref:rl})})}),Os={[kt]:"show",[zt]:"show"},rn=reactExports.forwardRef(({className:n,children:h,transitionClasses:s={},onEnter:_,...M},$)=>{const V={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...M},oe=reactExports.useCallback((Y,ie)=>{xs(Y),_?.(Y,ie)},[_]);return T.jsx(As,{ref:$,addEndListener:Es,...V,onEnter:oe,childRef:h.ref,children:(Y,ie)=>reactExports.cloneElement(h,{...ie,className:Ut("fade",n,h.props.className,Os[Y],s[Y])})})});rn.displayName="Fade";function Rs(n,h){const{ref:s}=n,{ref:_}=h;n.ref=s.__wrapped||(s.__wrapped=M=>s(Se(M))),h.ref=_.__wrapped||(_.__wrapped=M=>_(Se(M)))}const Dr=reactExports.forwardRef(({children:n,transition:h=rn,popperConfig:s={},rootClose:_=!1,placement:M="top",show:$=!1,...V},oe)=>{const Y=reactExports.useRef({}),[ie,zn]=reactExports.useState(null),[Et,ml]=us(V.offset),rl=ne(oe,Et),Ml=h===!0?rn:h||void 0,kl=ee(_u=>{zn(_u),s==null||s.onFirstUpdate==null||s.onFirstUpdate(_u)});return tn(()=>{ie&&V.target&&(Y.current.scheduleUpdate==null||Y.current.scheduleUpdate())},[ie,V.target]),reactExports.useEffect(()=>{$||zn(null)},[$]),T.jsx(xr,{...V,ref:rl,popperConfig:{...s,modifiers:ml.concat(s.modifiers||[]),onFirstUpdate:kl},transition:Ml,rootClose:_,placement:M,show:$,children:(_u,{arrowProps:Hu,popper:bu,show:dl})=>{var Tl,$l;Rs(_u,Hu);const Bl=bu?.placement,Pu=Object.assign(Y.current,{state:bu?.state,scheduleUpdate:bu?.update,placement:Bl,outOfBoundaries:(bu==null||(Tl=bu.state)==null||($l=Tl.modifiersData.hide)==null?void 0:$l.isReferenceHidden)||!1,strategy:s.strategy}),Il=!!ie;return typeof n=="function"?n({..._u,placement:Bl,show:dl,...!h&&dl&&{className:"show"},popper:Pu,arrowProps:Hu,hasDoneInitialMeasure:Il}):reactExports.cloneElement(n,{..._u,placement:Bl,arrowProps:Hu,popper:Pu,hasDoneInitialMeasure:Il,className:Ut(n.props.className,!h&&dl&&"show"),style:{...n.props.style,..._u.style}})}})});Dr.displayName="Overlay";function Cs(n){return n&&typeof n=="object"?n:{show:n,hide:n}}function sr(n,h,s){const[_]=h,M=_.currentTarget,$=_.relatedTarget||_.nativeEvent[s];(!$||$!==M)&&!We(M,$)&&n(...h)}N.oneOf(["click","hover","focus"]);const yn=({trigger:n=["hover","focus"],overlay:h,children:s,popperConfig:_={},show:M,defaultShow:$=!1,onToggle:V,delay:oe,placement:Y,flip:ie=Y&&Y.indexOf("auto")!==-1,...zn})=>{const Et=reactExports.useRef(null),ml=ne(Et,s.ref),rl=wi(),Ml=reactExports.useRef(""),[kl,_u]=Ri(M,$,V),Hu=Cs(oe),{onFocus:bu,onBlur:dl,onClick:Tl}=typeof s!="function"?reactExports.Children.only(s).props:{},$l=Ed=>{ml(Se(Ed))},Bl=reactExports.useCallback(()=>{if(rl.clear(),Ml.current="show",!Hu.show){_u(!0);return}rl.set(()=>{Ml.current==="show"&&_u(!0)},Hu.show)},[Hu.show,_u,rl]),Pu=reactExports.useCallback(()=>{if(rl.clear(),Ml.current="hide",!Hu.hide){_u(!1);return}rl.set(()=>{Ml.current==="hide"&&_u(!1)},Hu.hide)},[Hu.hide,_u,rl]),Il=reactExports.useCallback((...Ed)=>{Bl(),bu?.(...Ed)},[Bl,bu]),ud=reactExports.useCallback((...Ed)=>{Pu(),dl?.(...Ed)},[Pu,dl]),pd=reactExports.useCallback((...Ed)=>{_u(!kl),Tl?.(...Ed)},[Tl,_u,kl]),id=reactExports.useCallback((...Ed)=>{sr(Bl,Ed,"fromElement")},[Bl]),rh=reactExports.useCallback((...Ed)=>{sr(Pu,Ed,"toElement")},[Pu]),qd=n==null?[]:[].concat(n),oh={ref:$l};return qd.indexOf("click")!==-1&&(oh.onClick=pd),qd.indexOf("focus")!==-1&&(oh.onFocus=Il,oh.onBlur=ud),qd.indexOf("hover")!==-1&&(oh.onMouseOver=id,oh.onMouseOut=rh),T.jsxs(T.Fragment,{children:[typeof s=="function"?s(oh):reactExports.cloneElement(s,oh),T.jsx(Dr,{...zn,show:kl,onHide:Pu,flip:ie,placement:Y,popperConfig:_,target:Et.current,children:h})]})},Ts="_help_button_1s4g5_1",Ss={help_button:Ts};function Eu(n){let h=T.jsx("div",{className:Ss.help_button,children:"?"});return n.popover!=null&&(h=T.jsx(yn,{trigger:"click",rootClose:!0,placement:n.placement,overlay:n.popover,children:h})),h}const ks="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='36.012337'%20height='31.802971'%20viewBox='0%200%2036.012336%2031.802972'%20id='svg9098'%20version='1.1'%20inkscape:version='0.91%20r13725'%20sodipodi:docname='mclogo-split-rotate-v9.svg'%3e%3cdefs%20id='defs9100'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='11.2'%20inkscape:cx='14.890099'%20inkscape:cy='23.051314'%20inkscape:document-units='px'%20inkscape:current-layer='g9'%20showgrid='false'%20units='px'%20inkscape:window-width='1680'%20inkscape:window-height='940'%20inkscape:window-x='0'%20inkscape:window-y='1'%20inkscape:window-maximized='1'%20fit-margin-top='3'%20fit-margin-left='3'%20fit-margin-right='3'%20fit-margin-bottom='5'%20/%3e%3cmetadata%20id='metadata9103'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(3.0066849,-1015.2422)'%3e%3cg%20id='mctriangle'%20transform='matrix(1.1533275,0,0,1.1556928,-379.094,391.20844)'%3e%3cg%20transform='translate(2975.41,266.50511)'%20style='display:inline;stroke:%23d21f15;stroke-width:0.86616874;stroke-opacity:1'%20id='layer6'%20/%3e%3cg%20id='g9'%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.49344,550.22655%20C%20334.49344,546.23874%20337.72144,543.00587%20341.70205,543.00587%20345.68227,543.00587%20348.90912,546.23874%20348.90912,550.22655'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88989985;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9220'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.49344,550.41953%20C%20331.53412,550.41953%20329.1333,552.88285%20329.1333,555.92274%20329.1333,558.96264%20331.53412,561.42596%20334.49344,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9224'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20348.90912,550.41953%20C%20351.86844,550.41953%20354.26926,552.88285%20354.26926,555.92274%20354.26926,558.96264%20351.86844,561.42596%20348.90912,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9228'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.45731,561.42596%20348.92565,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9232'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.49344,550.22655%20C%20334.49344,546.23874%20337.72144,543.00587%20341.70205,543.00587%20345.68227,543.00587%20348.90912,546.23874%20348.90912,550.22655'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88989985;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9236'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.49344,550.41953%20C%20331.53412,550.41953%20329.1333,552.88285%20329.1333,555.92274%20329.1333,558.96264%20331.53412,561.42596%20334.49344,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9240'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20348.90912,550.41953%20C%20351.86844,550.41953%20354.26926,552.88285%20354.26926,555.92274%20354.26926,558.96264%20351.86844,561.42596%20348.90912,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9244'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20d='M%20334.45731,561.42596%20348.92565,561.42596'%20style='fill:none;stroke:%23d21f15;stroke-width:0.88643086;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20id='path9248'%20/%3e%3cellipse%20ry='0.25958455'%20rx='0.26011693'%20cy='553.91522'%20cx='341.70126'%20id='ref'%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate'%20/%3e%3cpath%20id='mctriangleonly'%20d='M%20335.13723,550.18801%20338.41923,555.66439%20341.70129,561.14077%20344.98332,555.66439%20348.26535,550.18801%20341.70129,550.18801%20Z'%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:%23d21f15;stroke-width:0.91575587;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate'%20inkscape:connector-curvature='0'%20/%3e%3ccircle%20cy='550.02032'%20cx='348.39252'%20id='circle7840-5'%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:%23ffffff;fill-opacity:1;fill-rule:nonzero;stroke:%23d21f15;stroke-width:0.88349211;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate'%20r='1.4070433'%20/%3e%3ccircle%20cy='550.02032'%20cx='335.01007'%20id='circle7842-0'%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:%23ffffff;fill-opacity:1;fill-rule:nonzero;stroke:%23d21f15;stroke-width:0.88349211;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate'%20r='1.4070433'%20/%3e%3ccircle%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:%23ffffff;fill-opacity:1;fill-rule:nonzero;stroke:%23d21f15;stroke-width:0.88349211;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate'%20id='circle7844-5'%20cx='341.70132'%20cy='561.30841'%20r='1.4070433'%20/%3e%3ccircle%20r='1.4070433'%20style='color:%23000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000000;solid-opacity:1;fill:%23ffffff;fill-opacity:1;fill-rule:nonzero;stroke:%23d21f15;stroke-width:0.88349211;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate;filter-blend-mode:normal;filter-gaussianBlur-deviation:0'%20id='movingcircle'%20cx='335.01007'%20cy='550.02032'%3e%3canimateTransform%20id='anim1'%20repeatCount='indefinite'%20begin='0s'%20dur='1s'%20values='0.0%200.0;13.38245%200.0;6.69125%2011.28809;0.0%200.0'%20type='translate'%20attributeName='transform'%20/%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function xu(){return T.jsx("div",{style:{background:"transparent",border:"none",textAlign:"center"},children:T.jsx("img",{src:ks,alt:"Materials Cloud spinner",style:{width:"100%",minWidth:"20px",maxWidth:"200px",height:"auto"}})})}const Is=["as","disabled"];function js(n,h){if(n==null)return{};var s={},_=Object.keys(n),M,$;for($=0;$<_.length;$++)M=_[$],!(h.indexOf(M)>=0)&&(s[M]=n[M]);return s}function Ds(n){return!n||n.trim()==="#"}function Fr({tagName:n,disabled:h,href:s,target:_,rel:M,role:$,onClick:V,tabIndex:oe=0,type:Y}){n||(s!=null||_!=null||M!=null?n="a":n="button");const ie={tagName:n};if(n==="button")return[{type:Y||"button",disabled:h},ie];const zn=ml=>{if((h||n==="a"&&Ds(s))&&ml.preventDefault(),h){ml.stopPropagation();return}V?.(ml)},Et=ml=>{ml.key===" "&&(ml.preventDefault(),zn(ml))};return n==="a"&&(s||(s="#"),h&&(s=void 0)),[{role:$??"button",disabled:void 0,tabIndex:h?void 0:oe,href:s,target:n==="a"?_:void 0,"aria-disabled":h||void 0,rel:n==="a"?M:void 0,onClick:zn,onKeyDown:Et},ie]}const Fs=reactExports.forwardRef((n,h)=>{let{as:s,disabled:_}=n,M=js(n,Is);const[$,{tagName:V}]=Fr(Object.assign({tagName:s,disabled:_},M));return T.jsx(V,Object.assign({},M,$,{ref:h}))});Fs.displayName="Button";const Mr=reactExports.forwardRef(({as:n,bsPrefix:h,variant:s="primary",size:_,active:M=!1,disabled:$=!1,className:V,...oe},Y)=>{const ie=Ht(h,"btn"),[zn,{tagName:Et}]=Fr({tagName:n,disabled:$,...oe}),ml=Et;return T.jsx(ml,{...zn,...oe,ref:Y,disabled:$,className:Ut(V,ie,M&&"active",s&&`${ie}-${s}`,_&&`${ie}-${_}`,oe.href&&$&&"disabled")})});Mr.displayName="Button";const Ms="_download_dropdown_menu_23m9j_1",Bs={download_dropdown_menu:Ms},zs=[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}];function Au(n){const h=`${n.aiida_rest_url}/nodes/${n.uuid}/download`,s=n.download_formats||zs,_=T.jsx(en,{children:T.jsx(en.Body,{style:{padding:"5px 0px"},children:T.jsx("ul",{className:Bs.download_dropdown_menu,children:s.map(({format:M,label:$})=>T.jsx("li",{children:T.jsx("a",{href:`${h}?download_format=${M}`,children:$})},M))})})});return T.jsx(yn,{trigger:"click",rootClose:!0,placement:"bottom",overlay:_,children:T.jsx(Mr,{size:"sm",style:{margin:"4px",padding:"2px 7px"},title:"Download",children:T.jsx("span",{className:"bi bi-download"})})})}const Ls="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIoAAACACAYAAADUHPECAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAdTAAAHUwAGRbQIfAAAAB3RJTUUH4QoMEAcil62xzQAAGc9JREFUeNrtnXl8XVW1x7/r3JvcJC1tgdKWUqADs0CTAk6AAh+GgAzyBBUUKQ8R6GDx4Ud9j6YVWkCeAio2pSLqQxyK4gTSBBApVJDCo4lMMjQpHaAphVI6ZLrnrPfHOjeEtknOvfece8/N5/0+H/j00yb77L3P7+y99tpr/ZYwyKFzRgMCquAIeDoCmARMBmqAQ4B9gD2B3YCU/6udwBbgbWAd8BLwT+A54BUcbxOeYz8pINe1FXuokUKK3YGooHNHgwco4MgwVKcAJwPHAQdhxCjPstlu4B3gFeAx4GFgBcpmxJ4l8wcnYQYdUXT2aDIvDWFf4CzgM8DRwLCQH/ce8CzwO5D7cHQ1nv2DzBtchBk0RFGaoO60DEnGAhcAFwOHAYmIH+8BLwB3Ab/GtiqY14hQXeypCQWDgig6Z4zZIFABfBq4CjgGcArcFQ94Bvg+8EegHRSZt6HYU5Q3Sp4oWjfaSCJyAPCfwOeAIUXu1jZgMXAjyGuoh8wvbbKUNFG0bjSgAnIqcAMwpdh92gErgP/CcxtxElrKdkvJEkXrRoE6ZYheDFwH7F3sPvWB9cBckJ+BdpcqWUqSKLaSkAJmAdcQ/mkmbGwBrsdsl85SJEvJEUVnjwKRcuA/gDqgqth9CojtwHyEm1HtKjUDt9Cngrygc0aBagK4HFtJSoUk+H39L5TLURI6e3Sx+5MVSooodFeA43wamAsMLXZ3csBQYC4i51BeWot5yfTWt0uqsWPnQcXuT554GTvGN5eKvVISK4rW7Q0wAvg2pU8SgIOBa4EROntUsfsSCLEnin59GIgIMBU4o9j9CRFnAFNRFX+1jDViTxQqK0Hdw4CZQFmxuxMiyoCZOM5haPwtgPgTBZLAlcDEENpygUbgX8UelI+J/tiSxe7IQIg1UfwleQpwXojN3g2cA9wGbCz2GIHzEK3RujHF7ke/iDVRsPCALwJhb+KvYA6787Fb3o4ijnG0P8aoQyHyQmyJot/eB2xpPjPstv0jaRp4FPgScBmwHDJhRwXHWaAT9Zr4GrWxJQpeB8BpwP5RNC/z2jKE2YLI3cC52JVAaxFGuz9wKhVFeHJAxJcomqwETo+6jzKvDbrTAG/wescNGGHuAN4t4Ggd4HS6qCzgM7PuYFwxCYuSjxxy40YjzP4VAM14OgMLpVwCdBVovFMI52QXCWJJFN9bOQUoqNuyZzsSuoAG4EJgBtBcgMfvBRyldfH01MaSKHgIFjVflJOAzN8A6oFtP3dgcbjzyQRNR4MkcDTixNL7Fk+iJKgEPlTMLsj8t3qnXKzCTczBCHMXlqYRBQ5DvVjaKfEkCrIHsG+xewG9tiPHUyzC/nLsSP037IgdJvb1xx47xJQo7AnEasJk/npofQ/MOfcn4LOY0+6lwTzuDOJKlL0gfl4Fubs9Y+wCbMR1bsOuA24BwggsqfDHHjvElSjDiPFNsVznb0dlLsCrqHwDu4/6HRYbmyvKiGmgeFyJUkHM7z4A5NoN/gqjLrAMYSrw78AyLKE9WySI4UoK8SVKghIK05R5beB6oGwj6SwGfoipHmTdFDH9QOIaB5HG9AhiD50z2npaloBu90DS3uXAF8jNWegR/kkqFMSVKNuxCYvl1wWg3xoLSTdD55F0uxdiQUiH5NGsS342TmSIK1Hexfb4VJ7tRIdyFzwqsIvLr2ICPfnOZxewqdhD2xXiSpS3sC8rvrk7yuEI38SOx7uF1Op24hF1txPiasy+DcQ95/JQLEIuLJLgjzkXIzhyxJMowiZgVbG70T+0AQtDCBOtqMZy64knUbSrC1NgjDO2YOoEYW4Vz9GRKlT8S1aIJ1HssPM0JuEZT5SnQHgC+FVILXYCT1Oei58uesSSKDJvI0ATsLZQz9SrD0LrRhM0a0/q1oCdzBYCr4bQhTVAk9ywvlBDzgqxJAoAyjrgyYI8qm4UVG0GZDdgZFBJCrmuDZSXgdvJ31H2JGiUgVF5Ib5EQbuBvxBhzGqvFSQJfBL0buB7IFV+YnyQVhRLKnsqj650AveBE0uvLMSZKFIOlnfzQhTNa93ozOgPBbkFu/k9Gzgf0TOQYLaCzN8Aohsww3Zbjt15AXgsziZZbIki89ZCp9cG/JZwE7PUX0VG4XE1lik4Exjp/3sVcBWaGKV1AUNDLMn8AeD+HPrjAfewzWuTebE8GQMxJgoASVHgHsIxFsFuZoZgsa+/A25i13orHwG+iHqBbrBlXhso24EfYCqQ2eAVlN/GXYEp1kSRGzaApy3Az7ALszDGezUWIH08fV86JoErkOTBgZPHU4B6y4FfEPzm2wXuxPVa5TvxdkTHmigACIq92KdDGu9BBHO7HwhMA8qslMsA3axrA8QFFhE8jvYp4G4ciX1IReyJYsai+ya2TWwu8OMvAP24r7MfrK+etxJYwMARbpuBm/C89XJ9vFcTKAGiAKBlYMbiTyms4sBIrADDbjo3oGHrOGCChI/381Me8BOUBpy4XuDvMKxidyAIZN6bYP6U7wKPFPjxp4GcTWewOgy+Yfs2dlzuK1Hsr8D3gC5/bLFHSRAFMpom8ibwDeDFAj66EphFWfvYwKJ8ZS4gD2FH7x3xgo1B1pdStbCSIQoAqQ7wWIFtB68X8MlHAVN9dcoBIXM3AtqBBVn3dsu/DlxFwmuie2sBu58/SoooMvtdO7hu6XoICz9cU6BHO8BlqB4eVG3A0ji8FZhdhd/XmXSmH6Y7gXzn/4kSKeTaNhhaDpL4M3AF8FqBHj0e8+CW6zWBPbYecCdwLzANGXIfqSRyfTxviPtDyREF/Eqg6oLrPIDVDfxHgR59PsgJJIIlB8i8DaCyGriUJ469H91eskUpS5Io4C/tSReQJ7A8mruI/lZtBPA1VIcHFrwRVWAzxy5D5pXeStIzjGJ3IF/o7L1AHLA7nC8BX8O8qlGhE5jOe4fcKT9YWuzhFwwlT5QM7OjqAN7hmJzW+UQnIdEMnI3q6lIvKhkUJbv17Ajb+12A51H5KlYU+24sRyhsHIFp08Y2kzFsDJoVpTd09hiwe7ZyTDTw01g1iwMJTy3gNeAsmdcWF139SDEoiQJ+HGxmeJUpaO/cGxMQ/AQWbzIJ25qCEqcDS85aiUl0/Q1YKvPaotJzixUGLVF6wy9Y2fuvhgFjMV3XCcA4TH1gGLYKgd0tvYdl763FFK1bgDcok/fothvlUj3uZouCEWXykipEFFA8twySHppwkbRDsjuNV2bmUremeeH0aGKM9dtjwN2FSIIobHZgqDg4noM4gpdw8bZ4JCrZKQ6pWyGZQOZHdKFXvzLTMcCxx4tgl87d9KSMC3BlYTSMIyNKdWMFiiIfKFqkkOxGuyodTaiD44m44nmu5yUSfQfvNNVGV/xC68ZYIL0AbgISrh233TJwOvHfUrQrx8IWP+52hylQAUFQEnbPpIDrkhSP9I6vzv/daZMi6WKoRKlpMHKAjUkdrRCV0djyPhGTBN0b2B0LHnSwo8o2bP9fh+UctwCrsXRNFyCZTvPMmbHNZsgei1aC23v6JQE6EtgPs5/GA/tgSpFV2DLoYbbSJuBNf45W2pxpmzHbVm0gVNKEQpSaxkq0JwpMh4EcgemFHAschtWkGRLweS5mG6zB8o8fBx5OptMtg4IoC1vef5dCOXAA8HHMyJ6MfUzDCHb0VmArpkj5IvB3my99HmRLz4+EQJi8iDK5oQrBo6m2g+qGionAp7Cj6BTM3R0GuoBpyXT6zpImSv1KMistwh7AiZiS5LHYyhGWT+sdYAUWC/MAm8a0sPt6s8OuzJ0wORFlygMpPEdISDeulh2EVbD6LBa4HLbdsww4L5lOt5UsURa0ZGZlD+xDmgocQ7QKkB6W5rIYuBsSryIueALTJ2TdWNYv1YxUEGUv4CJM8juqWsTbgIsduPfZCA3ayLBwpRmkSjlCLRZwdRyF19B9GbgD4S6Ut3LZjrJa7iY3VuA5iCgnAr8G/ptoC1bfp7CkJNeR+lZQB2Aiwg+w2+0TKY7Q8sHATSi/Bk5CPIf6lqwaCLSiVDc4QDkqDBHlCiyJKmgWd65YD5yr8I/mgKtJdUMFCDSdVuTVp74FSDjg1gLXYaGUccF64GZMgWErLjBzYF/MgCtK9V/K8J2Ve4vyfeB6oieJJX2JPJ0VSWCoQLn/5+LAvtQUuNOxDMc4kQRgDPYObwXGkgDqVw34S/0S5cN/HoYfzTURy4C7lMJIer5kz9Ms0kilDKhTpQ4YUr2kCGQxkgwBZgPfocAVzLJAOfYuFwETwYNb+5dm6ZconSYnNhFbps6iMC7/bmBB2ulqCbqFGCn0WH/w3wTmAEMKurIs7CHJXCylpKpwD88JgpUKXgRMItV/cGCfRKlurECUfbCK46cUcACPA79JaDCbr8bskt2wE8WemLE4C+EbQGpyQwEKatW3AJICvgXM4v2LxVLAydg7HueTfZfYJVGqGytQZThwI6bMXCi8B9yKOO80nxYs/DVtt8LnAKf2+usUZnBfiuIc2RDhezNHmoPqZVihp1IiSQa1wA0ow/s6De1ElOqHKgGSYl/o5ylsKMIfVHkYL5hpUtOQIoGOxXJ8dlw6hgBzRPSURJQC3VoG6KlYce24bzd9QbB3PQshSf3qnX5gJ6JouwfKGdjkF/LMvxb4oTh0NJ0+8GpS/RQ4goMyFbsy2BVGA/MVb0Ik9kr9SpD0BKyCaVwN16CwLVuptXvHD+IDRKluSCHlsh/2dRSytp0H/BSkqWlFQB/IO5W4Kh9i4NjVo4CrQcoP+dOI8Hr8+y2gWm5tx+4InCv2AOoguS/1rR/4hx6iVC+tQIUEJh5T6IH/E7gT1ONbA/9wdWMliJZjmXvjB/hxAb4IesqQVHt4PV7XBuKcYm0PKhyNZWAmetsr768o2xVRORrLvAvDLllHsNzgTuC23Ts6VgcOUPI8gBOwlIwgGA58zUV2nxLGFrToVUg4u2N23PAQ5moL8C8Kq/3SFxxgKmhNbwGhHqKoxUZ8BfPchYFlwL9hubf9KSU9InDvOxXBjrFHNlSCyAgs0WtEFv05DjjLdUNQweqsAPNBHB/SXLVhtQhnY7G5xcZYjAs9NqoD5v4WpAZzqoUFj5T+LzAduBB4kJ3FhTdhruTNzbXBtoWOsgqwnJ0Ts+xPCrhEEjKi+pE8VpWbWyDZPRy4hHC91GtJjr8RC0O4AytuVUycg0g1Cyx+11YUwQE+R9g1d7slgW0tD5A5fsHzvX7iHmDpioBbTs2SFJXd7fthtkkuL+nDwCc0nwzlKgFbST4S6lyBQ7oVzF6b4c9XAxEqdw+AUViMkUPmf6KMwxKkQkdTbQfvmXt4kyC3Y+rQN2E69wuymwhxBL6MZerlgirgM0gex34lia1o4ftMpk2CaRPx56QRuAAjTXPozwqGTyEyFsCpbqhEbf+OLO6/5USlqbYDz2y1VkSvAc5D3BeCGrDVDRWoUIPt5fmEDX5CBj4p9QPdH/hkVHMFGFnaOwHeRbgD247mU8BqIz4OAI6jfiWOqiYxf3/kzrXm2k5LvVBxgTfACWTlVz9YjlrY4Fex+NJ8MA74aE1jDguC3YV8FAuAjhZXH2qE8RRgFcgc7HDwC+yUVAiUASejkkiKMAaL3ywYss3TkXQSHO8U7MvKF0ngeBV+SbbHUcXB7JPCaX5O90MW61sVeBqRr6B6L2bvFaIvxyCMcbB0iui/kBxR01COOt6e2HF4WFjN4nkjsv4tYQTRfFQDv+xpE2yFUTqAP4F8FvMKB1XJzhX7A4clgRrCrbQZLkQF5fOYHRXm4MeRfUXQoZifI+zE9HXs6oJlV5g2ARa0grARlR8iugQLcL+IaO6bdgOqk9gJIrY6KaqJcViF8jBtqOFY9mJ2BS4dZy2uXhTFMHGd4If2TLqFJZO9iiffxNE/Yjbcpwj3ROYARzpY+mKcsQUz4ML0WJYB+538TNa/5wHtof9n20n2LuMrJ9p2JLjAMpBLsFPhk4R7HTApSXgu+6jwbmJ7x01uVcUDmJc3DMktAfZ+6KgsL7UuH1/sudg1pk+AH60CR7chLEZZim1FX8GOuPlijEN4qZ+RoKm2A6+qAuA5RWZiHssl5K8AueeUhyoHjz7MjPFmv9g6sh4n+V3slFiPVabPB7s7lEBU1oraDsqTabDA64ewu6NpwLPkXh20Sl2NrW2WM6b725HXDaa7Pwu7nrkf2J5jq1UOhfQJ5IHlJ6dprm33ZTV4F5MOv5D+y530hzIcHTwryo6YNgl/Y01j1TwuAn5Mbh9WMoktViXxZR3RmDJhHk8cHD0GuweZkmNzrmoOBmSpYEGrKRioArIfZuSeS25Klm4Ss7zj60chI9Djjxsm4OhlmCJAPhmL7Q7xL9GWNW573VSjbMZGYG7/GUA1uQektSexoKJYEmXqPdA8PJVRztpd7dp7GnBkCM1vSqVSXlA/V0lgQatf1lDKQE9A9SrsHi/fFJJ3k5jq4bhij3FHTF5SwQoBB00BJ6mFHYapBtDmBawV2IOFraARRSt6HszIUZn99la7PKzcDtsrD0d0OvZRhRUgvyGJFRvKdZ8PHdUNVYBHd1opS0q1qszA4j9GhPiYNLBm+UlZeuKvGA8LV2f3O0EgAuU5mA53vgqdCXAVhLG0V34J4TLCDxlZlQSew87bRT0B1PylHE1ktP9kXFlSLsFyifeP4HFbMUHB7LCwdQwWoR6swGAwCMpG0ulFWGhoMNS3ZDxJQxHOxtz3xxD+wUSB55JAE3a+DnPwWaF6SYVftZ5hIOf4gz6K6MgbNENgRziYw+/gkPuzChMmGpgoC1b6mrOaBDnWn6taovOHbQOaklgM63qKcOfTk72nkgQ9HrNDTiVabTNszLox699S3kJoInyiDOzbuL3Fd2QIeHowyBVYnaJw45x3xpsozycRVqM0UUCiTDalBAQPD+cwEb0S+1JHFuDxHrBMO73sHU9lnd2kU3/H7psK53uqX5lxzY/E04xXOmyy9oUViK5Nalo7JSGPYM6YyAdf3VCRuScdrTgXicVShHFxFRQbgWVSlWDgYuc7oLMKEu4yv43oc40zTjO0EtteZmFyo4XypnvAI7jalXSGOGiHPoopIecbj9onqht7CDIEi5mYhaU8FLrmzXKUl5tOycF/MnN/qG/5F7AcSwCLBplUTg9B+DB2GXoOFjhVSKwDHmVkCmfFCe2o8ioRVSivWVLpJ5ipg30NP8W0zT5O4UmSBv6A4+SRhKztwO/JejkKiPfzfSfi6PX+s75A4UkCdkfUwgX79ixh3ZjVfW6oHRLUczxE5QBVyYTrBSxHHgleBBqtwkbug8Jybl4iHA9xplH1SbIHZgNNJ/f8pTCwBfgN/gdhCWACII8DYVZTVFz2FJXpwJ+Br1NcknjALzWhbzSdkUfy3bSJ0N39JuQQxd/fXFnm4+nYy7mN4pIE4FEsfxzwidJU24GaE2oR4eWMHIHJa98KHFrkQYO5AX6DF8JFYDKh2At9Pt+mfAwHbgF+henlFUO0uDe2AIsQtvmZi++fchKAKg9jX38YOAKTpij2oMFSNBeUO92rm8MQK55+ACSc1WSdEtsn9sKM4xFFnKPe+CPwCO77C2YPUZ6tbQehHVM1fr3YPQ0ZjcDibi/EU6VN4mK/7cGEVcAtqLYz432vxQf8Js21HTheogn4HtFXJS8UVgPXo2xeURvikGxJ3oypQOdyHRBHdAI3k3CaezIUfews9ieeCvwc24NLHe3ADcDyptMjiDuZNhE8We4/I0Tdr6JhMfBzdhF/sRNRVpzejgpbgW/Ty+otQbjAj1HuIpecmaAQFPgfTPwmDtJauWIZprq9lSt3rufT5+1s9YOV4OlR/iR8qNijyAGLUaYDb0eymvSG+T9GYqkRQXXl4oQXgYtRfWbHLSeDPu92tMtFXclIa71c7JFkifuAryMFIAlk7JWNmHL1/cUefJZ4BZiOyjNI347yPonSfGYXTtIDkaVYxllYPoMoocC9GLnXRlkGdydYaudakOnAH4hyuwsPLwCXk+BRRGHa+D5/sN/b4hWndYIqgj6GRb0/VuyR9YMu4CfAdIU1VQWpFrMDOpOArsbCAH5C8fTXgmAZcAkqj9JNZlXsE4EiyKxChSIWlngtFjtShDfRJ94CvouyEGHrqOF78ODH3ihOT360KiMkNRRb2a4m+uCibNCJnW7mAquCVmMPHGp4VGMK1+IVh2KixVdj0hHFhAJPANeB9zA4XkG3m/5Q3wIiCVRPwSTjP0aR45IxRYhbMPfHVkTY1QlnV8ipSuk2t4MhTkUNpoJ0DuEpIWWDNcCdIHeAvgFKU5gOtTCQqX+jjMU0+y+lOOpWW7CrmZvBXQGJAbeaHZETw6v9rQiLbT0ZM3ZPoDCJZG9idxF3OKJNnjqKaPELTvaFH7X4lqAKJvr8ZSzrIeq6jGAEWYqV3fsriDkFsyQJ5LEUHtFYScJTvwUZCnocpot6AvbVhLnMdmHHuPuB32JKSelYVCQNip6oNUni6BGYv+VMrBxwmPaeYjKjj2C2yGNYJL3l/8zMLTQ675dZYzq1gCKqSRU5ECPLScBk7MsZkuWzPEwnrRULO3wYeHKv7VXr3qoy5YZU0uOpk+N8qNgFfrwautM2E+1JqEyPxeRIT8VUtcdjIQfZxi5vA97AhIv/BiwFeQXUovAUk8PIA6F99VMaU6gHKpkmNSXIODXVySnA4f5EjPIno9KfkLQ/0E1Y2shrWFJaM8qLKrpe/GRyD/hnXIzVfHH7SvD8uXJU8GQMcAiWTH4kFnC+NxbxVoUfCYIlS2/GUoFXYf6tJuA5RNeg4htqYqevK8JJrvg/1r/N4lnuwIgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMTAtMTJUMTY6MDc6MzQrMDI6MDB1PnpAAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTEwLTEyVDE2OjA3OjM0KzAyOjAwBGPC/AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=";function Ou(n){var h=`${n.explore_url}/details/${n.uuid}?nodeType=NODE`;return T.jsx(yn,{placement:"bottom",overlay:T.jsxs(kr,{className:"explore_btn_tooltip",children:["Browse provenance",T.jsx("br",{}),n.uuid]}),children:T.jsx("a",{href:h,target:"_blank",children:T.jsx("img",{src:Ls,className:"explore_btn_aiida_logo"})})})}const Ns="_toggleSwitchWrapper_i81zd_2",Zs="_toggleLabel_i81zd_11",Hs="_toggleSwitchContainer_i81zd_16",Us="_toggleSwitch_i81zd_2",Ys="_thumb_i81zd_34",Vs="_toggled_i81zd_46",Mt={toggleSwitchWrapper:Ns,toggleLabel:Zs,toggleSwitchContainer:Hs,toggleSwitch:Us,thumb:Ys,toggled:Vs};function Ru({switchLength:n="50px",labelLeft:h="Left",labelRight:s="Right",fontSize:_="12px",onToggle:M=()=>{},labelClassName:$="",containerClassName:V="",switchClassName:oe="",thumbClassName:Y=""}){const[ie,zn]=reactExports.useState(!1),Et=()=>{const ml=!ie;zn(ml),M(ml)};return T.jsxs("div",{className:`${Mt.toggleSwitchWrapper} ${V}`,style:{fontSize:_},children:[T.jsx("span",{className:`${Mt.toggleLabel} ${$}`,children:h}),T.jsx("div",{className:Mt.toggleSwitchContainer,children:T.jsx("button",{className:`${Mt.toggleSwitch} ${ie?Mt.toggled:""} ${oe}`,onClick:Et,style:{"--switch-length":n},children:T.jsx("div",{className:`${Mt.thumb} ${Y}`})})}),T.jsx("span",{className:`${Mt.toggleLabel} ${$}`,children:s})]})}function Cu(n){return n.split(/(\d+)/).map((h,s)=>h.match(/\d+/)?T.jsx("sub",{children:h},s):h)}const Ws={display:"inline-block",position:"relative"},Js={position:"absolute",top:"0.15em",left:0,right:0,borderTop:"0.1em solid black",height:0,zIndex:1};function Tu(n){let h=!1,s=!1;return T.jsx("span",{children:n.split("").map((_,M)=>_=="-"?(s=!0,null):_=="_"?(h=!0,null):s?(s=!1,T.jsxs("span",{style:Ws,children:[T.jsx("span",{style:Js}),_]},M)):h?(h=!1,T.jsx("sub",{children:_},M)):_)})}function Br(n){return Math.sqrt(n.reduce((h,s)=>h+s*s,0))}function zr(n,h){return n.reduce((s,_,M)=>s+_*h[M],0)}function Gs(n){return n[0].map((h,s)=>n.map(_=>_[s]))}function qs(n,h){return n.map(s=>s.map(_=>_*h))}function Ks(n){return Array.from({length:n},(h,s)=>Array.from({length:n},(_,M)=>s===M?1:0))}function $s(n,h){for(var s=[],_=0;_<n.length;_++){s[_]=[];for(var M=0;M<h[0].length;M++){for(var $=0,V=0;V<n[0].length;V++)$+=n[_][V]*h[V][M];s[_][M]=$}}return s}function Qs(n){const h=n.length,s=n.map(M=>Br(M)),_=Array.from({length:h},()=>Array(h).fill(0));for(let M=0;M<h;M++)for(let $=0;$<h;$++){if(M===$){_[M][$]=0;continue}const V=zr(n[M],n[$]),oe=s[M],Y=s[$];if(oe>0&&Y>0){let ie=V/(oe*Y);ie=Math.max(-1,Math.min(1,ie));const zn=Math.acos(ie);_[M][$]=zn*(180/Math.PI)}else _[M][$]=null}return{lengths:s,angles:_}}function Xs(n){const h=n.length,s=n.map(M=>M.slice()),_=Array.from({length:h},(M,$)=>Array.from({length:h},(V,oe)=>$===oe?1:0));for(let M=0;M<h;M++){let $=M;for(let oe=M+1;oe<h;oe++)Math.abs(s[oe][M])>Math.abs(s[$][M])&&($=oe);if([s[M],s[$]]=[s[$],s[M]],[_[M],_[$]]=[_[$],_[M]],s[M][M]===0)throw new Error("Matrix is singular and cannot be inverted.");const V=s[M][M];for(let oe=0;oe<h;oe++)s[M][oe]/=V,_[M][oe]/=V;for(let oe=0;oe<h;oe++){if(oe===M)continue;const Y=s[oe][M];for(let ie=0;ie<h;ie++)s[oe][ie]-=Y*s[M][ie],_[oe][ie]-=Y*_[M][ie]}}return _}function Lr(n){const h=n.length;if(h===1)return n[0][0];if(h===2)return n[0][0]*n[1][1]-n[0][1]*n[1][0];let s=0;for(let _=0;_<h;_++){const M=n.slice(1).map(V=>V.filter((oe,Y)=>Y!==_)),$=_%2===0?1:-1;s+=$*n[0][_]*Lr(M)}return s}const Su=Object.freeze(Object.defineProperty({__proto__:null,determinant:Lr,dot:zr,getMatrixParams:Qs,identityMatrix:Ks,invertMatrix:Xs,multiplyMatrices:$s,norm:Br,scalarMultiply:qs,transpose:Gs},Symbol.toStringTag,{value:"Module"})),ta={Z:1,mz:1.00794},ea={Z:2,mz:4.002602},na={Z:3,mz:6.941},ra={Z:4,mz:9.012182},ia={Z:5,mz:10.811},oa={Z:6,mz:12.0107},sa={Z:7,mz:14.0067},aa={Z:8,mz:15.9994},ca={Z:9,mz:18.9984032},ua={Z:10,mz:20.1797},la={Z:11,mz:22.98976928},fa={Z:12,mz:24.305},da={Z:13,mz:26.9815386},pa={Z:14,mz:28.0855},ma={Z:15,mz:30.973762},ga={Z:16,mz:32.065},_a={Z:17,mz:35.453},va={Z:18,mz:39.948},ha={Z:19,mz:39.0983},ya={Z:20,mz:40.078},ba={Z:21,mz:44.955912},Pa={Z:22,mz:47.867},wa={Z:23,mz:50.9415},Ea={Z:24,mz:51.9961},xa={Z:25,mz:54.938045},Aa={Z:26,mz:55.845},Oa={Z:27,mz:58.933195},Ra={Z:28,mz:58.6934},Ca={Z:29,mz:63.546},Ta={Z:30,mz:65.409},Sa$1={Z:31,mz:69.723},ka={Z:32,mz:72.64},Ia={Z:33,mz:74.9216},ja={Z:34,mz:78.96},Da={Z:35,mz:79.904},Fa={Z:36,mz:83.798},Ma={Z:37,mz:85.4678},Ba={Z:38,mz:87.62},za={Z:39,mz:88.90585},La={Z:40,mz:91.224},Na={Z:41,mz:92.90638},Za={Z:42,mz:95.94},Ha={Z:43,mz:98},Ua={Z:44,mz:101.07},Ya={Z:45,mz:102.9055},Va={Z:46,mz:106.42},Wa={Z:47,mz:107.8682},Ja={Z:48,mz:112.411},Ga={Z:49,mz:114.818},qa={Z:50,mz:118.71},Ka={Z:51,mz:121.76},$a={Z:52,mz:127.6},Qa={Z:53,mz:126.90447},Xa={Z:54,mz:131.293},tc={Z:55,mz:132.9054519},ec={Z:56,mz:137.327},nc={Z:57,mz:138.90547},rc={Z:58,mz:140.116},ic={Z:59,mz:140.90765},oc={Z:60,mz:144.242},sc={Z:61,mz:145},ac={Z:62,mz:150.36},cc={Z:63,mz:151.964},uc={Z:64,mz:157.25},lc={Z:65,mz:158.92535},fc={Z:66,mz:162.5},dc={Z:67,mz:164.93032},pc={Z:68,mz:167.259},mc={Z:69,mz:168.93421},gc={Z:70,mz:173.04},_c={Z:71,mz:174.967},vc={Z:72,mz:178.49},hc={Z:73,mz:180.94788},yc={Z:74,mz:183.84},bc={Z:75,mz:186.207},Pc={Z:76,mz:190.23},wc={Z:77,mz:192.217},Ec={Z:78,mz:195.084},xc={Z:79,mz:196.966569},Ac={Z:80,mz:200.59},Oc={Z:81,mz:204.3833},Rc={Z:82,mz:207.2},Cc={Z:83,mz:208.9804},Tc={Z:84,mz:210},Sc={Z:85,mz:210},kc={Z:86,mz:220},Ic={Z:87,mz:223},jc={Z:88,mz:226},Dc={Z:89,mz:227},Fc={Z:90,mz:232.03806},Mc={Z:91,mz:231.03588},Bc={Z:92,mz:238.02891},zc={Z:93,mz:237},Lc={Z:94,mz:244},Nc={Z:95,mz:243},Zc={Z:96,mz:247},Hc={Z:97,mz:247},Uc={Z:98,mz:251},Yc={Z:99,mz:252},Vc={Z:100,mz:257},Wc={Z:101,mz:258},Jc={Z:102,mz:259},Gc={Z:103,mz:262},qc={Z:104,mz:267},Kc={Z:105,mz:268},$c={Z:106,mz:269},Qc={Z:107,mz:270},Xc={Z:108,mz:270},tu={Z:109,mz:278},eu={Z:110,mz:281},nu={Z:111,mz:282},ru={Z:112,mz:285},iu={Z:113,mz:286},ou={Z:114,mz:289},su={Z:115,mz:290},au={Z:116,mz:293},cu={Z:117,mz:294},uu={Z:118,mz:294},lu={H:ta,He:ea,Li:na,Be:ra,B:ia,C:oa,N:sa,O:aa,F:ca,Ne:ua,Na:la,Mg:fa,Al:da,Si:pa,P:ma,S:ga,Cl:_a,Ar:va,K:ha,Ca:ya,Sc:ba,Ti:Pa,V:wa,Cr:Ea,Mn:xa,Fe:Aa,Co:Oa,Ni:Ra,Cu:Ca,Zn:Ta,Ga:Sa$1,Ge:ka,As:Ia,Se:ja,Br:Da,Kr:Fa,Rb:Ma,Sr:Ba,Y:za,Zr:La,Nb:Na,Mo:Za,Tc:Ha,Ru:Ua,Rh:Ya,Pd:Va,Ag:Wa,Cd:Ja,In:Ga,Sn:qa,Sb:Ka,Te:$a,I:Qa,Xe:Xa,Cs:tc,Ba:ec,La:nc,Ce:rc,Pr:ic,Nd:oc,Pm:sc,Sm:ac,Eu:cc,Gd:uc,Tb:lc,Dy:fc,Ho:dc,Er:pc,Tm:mc,Yb:gc,Lu:_c,Hf:vc,Ta:hc,W:yc,Re:bc,Os:Pc,Ir:wc,Pt:Ec,Au:xc,Hg:Ac,Tl:Oc,Pb:Rc,Bi:Cc,Po:Tc,At:Sc,Rn:kc,Fr:Ic,Ra:jc,Ac:Dc,Th:Fc,Pa:Mc,U:Bc,Np:zc,Pu:Lc,Am:Nc,Cm:Zc,Bk:Hc,Cf:Uc,Es:Yc,Fm:Vc,Md:Wc,No:Jc,Lr:Gc,Rf:qc,Db:Kc,Sg:$c,Bh:Qc,Hs:Xc,Mt:tu,Ds:eu,Rg:nu,Cn:ru,Nh:iu,Fl:ou,Mc:su,Lv:au,Ts:cu,Og:uu};function fu(n){var h=n.split(/(?=[A-Z])/),s=0;return h.forEach(_=>{let M=_.match(/\d+/),$=M==null?1:parseInt(M[0]);s+=$}),s}function du(n){return n.split(/(?=[A-Z])/).length}function pu(n,h){var s=n.split(/(?=[A-Z])/);let _=0;return s.forEach(M=>{var $;const V=M.match(/([a-zA-Z]+)(\d*)/),oe=V[1],Y=parseInt(V[2]||"1"),ie=(($=lu[oe])==null?void 0:$.mz)||0;_+=ie*Y}),Math.round(_*1e4/(h.value*6.0223))}const ku=Object.freeze(Object.defineProperty({__proto__:null,calculateDensity:pu,countNumberOfAtoms:fu,countNumberOfElements:du},Symbol.toStringTag,{value:"Module"}));function ju(n){return n.includes("P")?[[1,0,0],[0,1,0],[0,0,1]]:n.includes("I")?[[0,1,1],[1,0,1],[1,1,0]]:n.includes("F")?[[-1,1,1],[1,-1,1],[1,1,-1]]:n.includes("A")?[[1,1,0],[-1,1,0],[0,0,1]]:n.includes("R")?[[-1,1,0],[1,1,-1],[1,1,1]]:n.includes("C")?n in["C2","CmCc","C2/m","C2/c"]?[[1,-1,0],[1,1,0],[0,0,1]]:[[1,-1,0],[1,1,0],[0,0,1]]:(console.log("Missing Space group data for:",n),[[1,0,0],[0,1,0],[0,0,1]])}function TitleAndLogo({titleString:n="Materials Cloud Three-Dimensional Structure Database (MC3D)",imgSrc:h=Mc3dLogo,doiId:s="rw-t0"}){return jsxRuntimeExports.jsxs("div",{className:"title-and-logo",children:[jsxRuntimeExports.jsxs("div",{className:"title-and-doi",children:[jsxRuntimeExports.jsx("span",{className:"title-span",children:n}),jsxRuntimeExports.jsx("div",{style:{marginLeft:"4px"},children:jsxRuntimeExports.jsx(wu,{doi_id:s,label:"Data DOI"})})]}),jsxRuntimeExports.jsx("img",{src:h,className:"mc3d-logo",alt:"MC3D Logo"})]})}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(n){for(var h=1;h<arguments.length;h++){var s=arguments[h];for(var _ in s)({}).hasOwnProperty.call(s,_)&&(n[_]=s[_])}return n},_extends$1.apply(null,arguments)}function _objectWithoutPropertiesLoose$6(n,h){if(n==null)return{};var s={};for(var _ in n)if({}.hasOwnProperty.call(n,_)){if(h.indexOf(_)!==-1)continue;s[_]=n[_]}return s}function defaultKey(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function _toPropertyKey$1(n){var h=_toPrimitive$1(n,"string");return typeof h=="symbol"?h:String(h)}function _toPrimitive$1(n,h){if(typeof n!="object"||n===null)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var _=s.call(n,h);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function useUncontrolledProp$1(n,h,s){var _=reactExports.useRef(n!==void 0),M=reactExports.useState(h),$=M[0],V=M[1],oe=n!==void 0,Y=_.current;return _.current=oe,!oe&&Y&&$!==h&&V(h),[oe?n:$,reactExports.useCallback(function(ie){for(var zn=arguments.length,Et=new Array(zn>1?zn-1:0),ml=1;ml<zn;ml++)Et[ml-1]=arguments[ml];s&&s.apply(void 0,[ie].concat(Et)),V(ie)},[s])]}function useUncontrolled(n,h){return Object.keys(h).reduce(function(s,_){var M,$=s,V=$[defaultKey(_)],oe=$[_],Y=_objectWithoutPropertiesLoose$6($,[defaultKey(_),_].map(_toPropertyKey$1)),ie=h[_],zn=useUncontrolledProp$1(oe,V,n[ie]),Et=zn[0],ml=zn[1];return _extends$1({},Y,(M={},M[_]=Et,M[ie]=ml,M))},n)}function _setPrototypeOf(n,h){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,_){return s.__proto__=_,s},_setPrototypeOf(n,h)}function _inheritsLoose(n,h){n.prototype=Object.create(h.prototype),n.prototype.constructor=n,_setPrototypeOf(n,h)}function ownerDocument(n){return n&&n.ownerDocument||document}function ownerWindow(n){var h=ownerDocument(n);return h&&h.defaultView||window}function getComputedStyle$1(n,h){return ownerWindow(n).getComputedStyle(n,h)}var rUpper=/([A-Z])/g;function hyphenate(n){return n.replace(rUpper,"-$1").toLowerCase()}var msPattern=/^ms-/;function hyphenateStyleName(n){return hyphenate(n).replace(msPattern,"-ms-")}var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function isTransform(n){return!!(n&&supportedTransforms.test(n))}function style(n,h){var s="",_="";if(typeof h=="string")return n.style.getPropertyValue(hyphenateStyleName(h))||getComputedStyle$1(n).getPropertyValue(hyphenateStyleName(h));Object.keys(h).forEach(function(M){var $=h[M];!$&&$!==0?n.style.removeProperty(hyphenateStyleName(M)):isTransform(M)?_+=M+"("+$+") ":s+=hyphenateStyleName(M)+": "+$+";"}),_&&(s+="transform: "+_+";"),n.style.cssText+=";"+s}var propTypes$3={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=n,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var n=requireReactPropTypesSecret();function h(){}function s(){}return s.resetWarningCache=h,factoryWithThrowingShims=function(){function _(V,oe,Y,ie,zn,Et){if(Et!==n){var ml=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw ml.name="Invariant Violation",ml}}_.isRequired=_;function M(){return _}var $={array:_,bigint:_,bool:_,func:_,number:_,object:_,string:_,symbol:_,any:_,arrayOf:M,element:_,elementType:_,instanceOf:M,node:_,objectOf:M,oneOf:M,oneOfType:M,shape:M,exact:M,checkPropTypes:s,resetWarningCache:h};return $.PropTypes=$,$},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes$3.exports=requireFactoryWithThrowingShims()()),propTypes$3.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports),config={disabled:!1},TransitionGroupContext=dm.createContext(null);var forceReflow=function(h){return h.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=(function(n){_inheritsLoose(h,n);function h(_,M){var $;$=n.call(this,_,M)||this;var V=M,oe=V&&!V.isMounting?_.enter:_.appear,Y;return $.appearStatus=null,_.in?oe?(Y=EXITED,$.appearStatus=ENTERING):Y=ENTERED:_.unmountOnExit||_.mountOnEnter?Y=UNMOUNTED:Y=EXITED,$.state={status:Y},$.nextCallback=null,$}h.getDerivedStateFromProps=function(M,$){var V=M.in;return V&&$.status===UNMOUNTED?{status:EXITED}:null};var s=h.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(M){var $=null;if(M!==this.props){var V=this.state.status;this.props.in?V!==ENTERING&&V!==ENTERED&&($=ENTERING):(V===ENTERING||V===ENTERED)&&($=EXITING)}this.updateStatus(!1,$)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var M=this.props.timeout,$,V,oe;return $=V=oe=M,M!=null&&typeof M!="number"&&($=M.exit,V=M.enter,oe=M.appear!==void 0?M.appear:V),{exit:$,enter:V,appear:oe}},s.updateStatus=function(M,$){if(M===void 0&&(M=!1),$!==null)if(this.cancelNextCallback(),$===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var V=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);V&&forceReflow(V)}this.performEnter(M)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},s.performEnter=function(M){var $=this,V=this.props.enter,oe=this.context?this.context.isMounting:M,Y=this.props.nodeRef?[oe]:[ReactDOM.findDOMNode(this),oe],ie=Y[0],zn=Y[1],Et=this.getTimeouts(),ml=oe?Et.appear:Et.enter;if(!M&&!V||config.disabled){this.safeSetState({status:ENTERED},function(){$.props.onEntered(ie)});return}this.props.onEnter(ie,zn),this.safeSetState({status:ENTERING},function(){$.props.onEntering(ie,zn),$.onTransitionEnd(ml,function(){$.safeSetState({status:ENTERED},function(){$.props.onEntered(ie,zn)})})})},s.performExit=function(){var M=this,$=this.props.exit,V=this.getTimeouts(),oe=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!$||config.disabled){this.safeSetState({status:EXITED},function(){M.props.onExited(oe)});return}this.props.onExit(oe),this.safeSetState({status:EXITING},function(){M.props.onExiting(oe),M.onTransitionEnd(V.exit,function(){M.safeSetState({status:EXITED},function(){M.props.onExited(oe)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(M,$){$=this.setNextCallback($),this.setState(M,$)},s.setNextCallback=function(M){var $=this,V=!0;return this.nextCallback=function(oe){V&&(V=!1,$.nextCallback=null,M(oe))},this.nextCallback.cancel=function(){V=!1},this.nextCallback},s.onTransitionEnd=function(M,$){this.setNextCallback($);var V=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),oe=M==null&&!this.props.addEndListener;if(!V||oe){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var Y=this.props.nodeRef?[this.nextCallback]:[V,this.nextCallback],ie=Y[0],zn=Y[1];this.props.addEndListener(ie,zn)}M!=null&&setTimeout(this.nextCallback,M)},s.render=function(){var M=this.state.status;if(M===UNMOUNTED)return null;var $=this.props,V=$.children;$.in,$.mountOnEnter,$.unmountOnExit,$.appear,$.enter,$.exit,$.timeout,$.addEndListener,$.onEnter,$.onEntering,$.onEntered,$.onExit,$.onExiting,$.onExited,$.nodeRef;var oe=_objectWithoutPropertiesLoose$6($,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return dm.createElement(TransitionGroupContext.Provider,{value:null},typeof V=="function"?V(M,oe):dm.cloneElement(dm.Children.only(V),oe))},h})(dm.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$1(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$1,onEntering:noop$1,onEntered:noop$1,onExit:noop$1,onExiting:noop$1,onExited:noop$1};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;function getReactVersion(){const n=reactExports.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function getChildRef(n){if(!n||typeof n=="function")return null;const{major:h}=getReactVersion();return h>=19?n.props.ref:n.ref}const canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement);var optionsSupported=!1,onceSupported=!1;try{var options={get passive(){return optionsSupported=!0},get once(){return onceSupported=optionsSupported=!0}};canUseDOM&&(window.addEventListener("test",options,options),window.removeEventListener("test",options,!0))}catch{}function addEventListener(n,h,s,_){if(_&&typeof _!="boolean"&&!onceSupported){var M=_.once,$=_.capture,V=s;!onceSupported&&M&&(V=s.__once||function oe(Y){this.removeEventListener(h,oe,$),s.call(this,Y)},s.__once=V),n.addEventListener(h,V,optionsSupported?_:$)}n.addEventListener(h,s,_)}function removeEventListener(n,h,s,_){var M=_&&typeof _!="boolean"?_.capture:_;n.removeEventListener(h,s,M),s.__once&&n.removeEventListener(h,s.__once,M)}function listen(n,h,s,_){return addEventListener(n,h,s,_),function(){removeEventListener(n,h,s,_)}}function triggerEvent(n,h,s,_){if(_===void 0&&(_=!0),n){var M=document.createEvent("HTMLEvents");M.initEvent(h,s,_),n.dispatchEvent(M)}}function parseDuration$1(n){var h=style(n,"transitionDuration")||"",s=h.indexOf("ms")===-1?1e3:1;return parseFloat(h)*s}function emulateTransitionEnd(n,h,s){s===void 0&&(s=5);var _=!1,M=setTimeout(function(){_||triggerEvent(n,"transitionend",!0)},h+s),$=listen(n,"transitionend",function(){_=!0},{once:!0});return function(){clearTimeout(M),$()}}function transitionEnd(n,h,s,_){s==null&&(s=parseDuration$1(n)||0);var M=emulateTransitionEnd(n,s,_),$=listen(n,"transitionend",h);return function(){M(),$()}}function parseDuration(n,h){const s=style(n,h)||"",_=s.indexOf("ms")===-1?1e3:1;return parseFloat(s)*_}function transitionEndListener(n,h){const s=parseDuration(n,"transitionDuration"),_=parseDuration(n,"transitionDelay"),M=transitionEnd(n,$=>{$.target===n&&(M(),h($))},s+_)}function triggerBrowserReflow(n){n.offsetHeight}const toFnRef$1=n=>!n||typeof n=="function"?n:h=>{n.current=h};function mergeRefs$1(n,h){const s=toFnRef$1(n),_=toFnRef$1(h);return M=>{s&&s(M),_&&_(M)}}function useMergedRefs$1(n,h){return reactExports.useMemo(()=>mergeRefs$1(n,h),[n,h])}function safeFindDOMNode(n){return n&&"setState"in n?ReactDOM.findDOMNode(n):n??null}const TransitionWrapper=dm.forwardRef(({onEnter:n,onEntering:h,onEntered:s,onExit:_,onExiting:M,onExited:$,addEndListener:V,children:oe,childRef:Y,...ie},zn)=>{const Et=reactExports.useRef(null),ml=useMergedRefs$1(Et,Y),rl=Bl=>{ml(safeFindDOMNode(Bl))},Ml=Bl=>Pu=>{Bl&&Et.current&&Bl(Et.current,Pu)},kl=reactExports.useCallback(Ml(n),[n]),_u=reactExports.useCallback(Ml(h),[h]),Hu=reactExports.useCallback(Ml(s),[s]),bu=reactExports.useCallback(Ml(_),[_]),dl=reactExports.useCallback(Ml(M),[M]),Tl=reactExports.useCallback(Ml($),[$]),$l=reactExports.useCallback(Ml(V),[V]);return jsxRuntimeExports.jsx(Transition,{ref:zn,...ie,onEnter:kl,onEntered:Hu,onEntering:_u,onExit:bu,onExited:Tl,onExiting:dl,addEndListener:$l,nodeRef:Et,children:typeof oe=="function"?(Bl,Pu)=>oe(Bl,{...Pu,ref:rl}):dm.cloneElement(oe,{ref:rl})})});TransitionWrapper.displayName="TransitionWrapper";function useCommittedRef(n){const h=reactExports.useRef(n);return reactExports.useEffect(()=>{h.current=n},[n]),h}function useEventCallback(n){const h=useCommittedRef(n);return reactExports.useCallback(function(...s){return h.current&&h.current(...s)},[h])}const _excluded$5=["as","disabled"];function _objectWithoutPropertiesLoose$5(n,h){if(n==null)return{};var s={};for(var _ in n)if({}.hasOwnProperty.call(n,_)){if(h.indexOf(_)>=0)continue;s[_]=n[_]}return s}function isTrivialHref$1(n){return!n||n.trim()==="#"}function useButtonProps({tagName:n,disabled:h,href:s,target:_,rel:M,role:$,onClick:V,tabIndex:oe=0,type:Y}){n||(s!=null||_!=null||M!=null?n="a":n="button");const ie={tagName:n};if(n==="button")return[{type:Y||"button",disabled:h},ie];const zn=ml=>{if((h||n==="a"&&isTrivialHref$1(s))&&ml.preventDefault(),h){ml.stopPropagation();return}V?.(ml)},Et=ml=>{ml.key===" "&&(ml.preventDefault(),zn(ml))};return n==="a"&&(s||(s="#"),h&&(s=void 0)),[{role:$??"button",disabled:void 0,tabIndex:h?void 0:oe,href:s,target:n==="a"?_:void 0,"aria-disabled":h||void 0,rel:n==="a"?M:void 0,onClick:zn,onKeyDown:Et},ie]}const Button$1=reactExports.forwardRef((n,h)=>{let{as:s,disabled:_}=n,M=_objectWithoutPropertiesLoose$5(n,_excluded$5);const[$,{tagName:V}]=useButtonProps(Object.assign({tagName:s,disabled:_},M));return jsxRuntimeExports.jsx(V,Object.assign({},M,$,{ref:h}))});Button$1.displayName="Button";const _excluded$4=["onKeyDown"];function _objectWithoutPropertiesLoose$4(n,h){if(n==null)return{};var s={};for(var _ in n)if({}.hasOwnProperty.call(n,_)){if(h.indexOf(_)>=0)continue;s[_]=n[_]}return s}function isTrivialHref(n){return!n||n.trim()==="#"}const Anchor=reactExports.forwardRef((n,h)=>{let{onKeyDown:s}=n,_=_objectWithoutPropertiesLoose$4(n,_excluded$4);const[M]=useButtonProps(Object.assign({tagName:"a"},_)),$=useEventCallback(V=>{M.onKeyDown(V),s?.(V)});return isTrivialHref(_.href)||_.role==="button"?jsxRuntimeExports.jsx("a",Object.assign({ref:h},_,M,{onKeyDown:$})):jsxRuntimeExports.jsx("a",Object.assign({ref:h},_,{onKeyDown:s}))});Anchor.displayName="Anchor";const fadeStyles={[ENTERING]:"show",[ENTERED]:"show"},Fade=reactExports.forwardRef(({className:n,children:h,transitionClasses:s={},onEnter:_,...M},$)=>{const V={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...M},oe=reactExports.useCallback((Y,ie)=>{triggerBrowserReflow(Y),_?.(Y,ie)},[_]);return jsxRuntimeExports.jsx(TransitionWrapper,{ref:$,addEndListener:transitionEndListener,...V,onEnter:oe,childRef:getChildRef(h),children:(Y,ie)=>reactExports.cloneElement(h,{...ie,className:classNames("fade",n,h.props.className,fadeStyles[Y],s[Y])})})});Fade.displayName="Fade";const Button=reactExports.forwardRef(({as:n,bsPrefix:h,variant:s="primary",size:_,active:M=!1,disabled:$=!1,className:V,...oe},Y)=>{const ie=useBootstrapPrefix(h,"btn"),[zn,{tagName:Et}]=useButtonProps({tagName:n,disabled:$,...oe}),ml=Et;return jsxRuntimeExports.jsx(ml,{...zn,...oe,ref:Y,disabled:$,className:classNames(V,ie,M&&"active",s&&`${ie}-${s}`,_&&`${ie}-${_}`,oe.href&&$&&"disabled")})});Button.displayName="Button";const context$1=reactExports.createContext(null);context$1.displayName="CardHeaderContext";function map(n,h){let s=0;return reactExports.Children.map(n,_=>reactExports.isValidElement(_)?h(_,s++):_)}function forEach(n,h){let s=0;reactExports.Children.forEach(n,_=>{reactExports.isValidElement(_)&&h(_,s++)})}function hasChildOfType(n,h){return reactExports.Children.toArray(n).some(s=>reactExports.isValidElement(s)&&s.type===h)}function useCol({as:n,bsPrefix:h,className:s,..._}){h=useBootstrapPrefix(h,"col");const M=useBootstrapBreakpoints(),$=useBootstrapMinBreakpoint(),V=[],oe=[];return M.forEach(Y=>{const ie=_[Y];delete _[Y];let zn,Et,ml;typeof ie=="object"&&ie!=null?{span:zn,offset:Et,order:ml}=ie:zn=ie;const rl=Y!==$?`-${Y}`:"";zn&&V.push(zn===!0?`${h}${rl}`:`${h}${rl}-${zn}`),ml!=null&&oe.push(`order${rl}-${ml}`),Et!=null&&oe.push(`offset${rl}-${Et}`)}),[{..._,className:classNames(s,...V,...oe)},{as:n,bsPrefix:h,spans:V}]}const Col=reactExports.forwardRef((n,h)=>{const[{className:s,..._},{as:M="div",bsPrefix:$,spans:V}]=useCol(n);return jsxRuntimeExports.jsx(M,{..._,ref:h,className:classNames(s,!V.length&&$)})});Col.displayName="Col";const Container=reactExports.forwardRef(({bsPrefix:n,fluid:h=!1,as:s="div",className:_,...M},$)=>{const V=useBootstrapPrefix(n,"container"),oe=typeof h=="string"?`-${h}`:"-fluid";return jsxRuntimeExports.jsx(s,{ref:$,...M,className:classNames(_,h?`${V}${oe}`:V)})});Container.displayName="Container";var toArray=Function.prototype.bind.call(Function.prototype.call,[].slice);function qsa(n,h){return toArray(n.querySelectorAll(h))}function useUncontrolledProp(n,h,s){const _=reactExports.useRef(n!==void 0),[M,$]=reactExports.useState(h),V=n!==void 0,oe=_.current;return _.current=V,!V&&oe&&M!==h&&$(h),[V?n:M,reactExports.useCallback((...Y)=>{const[ie,...zn]=Y;let Et=s?.(ie,...zn);return $(ie),Et},[s])]}function useForceUpdate(){const[,n]=reactExports.useReducer(h=>h+1,0);return n}const $b5e257d569688ac6$var$defaultContext={prefix:String(Math.round(Math.random()*1e10)),current:0},$b5e257d569688ac6$var$SSRContext=dm.createContext($b5e257d569688ac6$var$defaultContext),$b5e257d569688ac6$var$IsSSRContext=dm.createContext(!1);let $b5e257d569688ac6$var$componentIds=new WeakMap;function $b5e257d569688ac6$var$useCounter(n=!1){let h=reactExports.useContext($b5e257d569688ac6$var$SSRContext),s=reactExports.useRef(null);if(s.current===null&&!n){var _,M;let $=(M=dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||M===void 0||(_=M.ReactCurrentOwner)===null||_===void 0?void 0:_.current;if($){let V=$b5e257d569688ac6$var$componentIds.get($);V==null?$b5e257d569688ac6$var$componentIds.set($,{id:h.current,state:$.memoizedState}):$.memoizedState!==V.state&&(h.current=V.id,$b5e257d569688ac6$var$componentIds.delete($))}s.current=++h.current}return s.current}function $b5e257d569688ac6$var$useLegacySSRSafeId(n){let h=reactExports.useContext($b5e257d569688ac6$var$SSRContext),s=$b5e257d569688ac6$var$useCounter(!!n),_=`react-aria${h.prefix}`;return n||`${_}-${s}`}function $b5e257d569688ac6$var$useModernSSRSafeId(n){let h=dm.useId(),[s]=reactExports.useState($b5e257d569688ac6$export$535bd6ca7f90a273()),_=s?"react-aria":`react-aria${$b5e257d569688ac6$var$defaultContext.prefix}`;return n||`${_}-${h}`}const $b5e257d569688ac6$export$619500959fc48b26=typeof dm.useId=="function"?$b5e257d569688ac6$var$useModernSSRSafeId:$b5e257d569688ac6$var$useLegacySSRSafeId;function $b5e257d569688ac6$var$getSnapshot(){return!1}function $b5e257d569688ac6$var$getServerSnapshot(){return!0}function $b5e257d569688ac6$var$subscribe(n){return()=>{}}function $b5e257d569688ac6$export$535bd6ca7f90a273(){return typeof dm.useSyncExternalStore=="function"?dm.useSyncExternalStore($b5e257d569688ac6$var$subscribe,$b5e257d569688ac6$var$getSnapshot,$b5e257d569688ac6$var$getServerSnapshot):reactExports.useContext($b5e257d569688ac6$var$IsSSRContext)}const SelectableContext=reactExports.createContext(null),makeEventKey=(n,h=null)=>n!=null?String(n):h||null,NavContext=reactExports.createContext(null);NavContext.displayName="NavContext";const ATTRIBUTE_PREFIX="data-rr-ui-",PROPERTY_PREFIX="rrUi";function dataAttr(n){return`${ATTRIBUTE_PREFIX}${n}`}function dataProp(n){return`${PROPERTY_PREFIX}${n}`}const context=reactExports.createContext(null);context.displayName="NavbarContext";const propTypes$2={type:PropTypes.string,tooltip:PropTypes.bool,as:PropTypes.elementType},Feedback=reactExports.forwardRef(({as:n="div",className:h,type:s="valid",tooltip:_=!1,...M},$)=>jsxRuntimeExports.jsx(n,{...M,ref:$,className:classNames(h,`${s}-${_?"tooltip":"feedback"}`)}));Feedback.displayName="Feedback";Feedback.propTypes=propTypes$2;const FormContext=reactExports.createContext({}),FormCheckInput=reactExports.forwardRef(({id:n,bsPrefix:h,className:s,type:_="checkbox",isValid:M=!1,isInvalid:$=!1,as:V="input",...oe},Y)=>{const{controlId:ie}=reactExports.useContext(FormContext);return h=useBootstrapPrefix(h,"form-check-input"),jsxRuntimeExports.jsx(V,{...oe,ref:Y,type:_,id:n||ie,className:classNames(s,h,M&&"is-valid",$&&"is-invalid")})});FormCheckInput.displayName="FormCheckInput";const FormCheckLabel=reactExports.forwardRef(({bsPrefix:n,className:h,htmlFor:s,..._},M)=>{const{controlId:$}=reactExports.useContext(FormContext);return n=useBootstrapPrefix(n,"form-check-label"),jsxRuntimeExports.jsx("label",{..._,ref:M,htmlFor:s||$,className:classNames(h,n)})});FormCheckLabel.displayName="FormCheckLabel";const FormCheck=reactExports.forwardRef(({id:n,bsPrefix:h,bsSwitchPrefix:s,inline:_=!1,reverse:M=!1,disabled:$=!1,isValid:V=!1,isInvalid:oe=!1,feedbackTooltip:Y=!1,feedback:ie,feedbackType:zn,className:Et,style:ml,title:rl="",type:Ml="checkbox",label:kl,children:_u,as:Hu="input",...bu},dl)=>{h=useBootstrapPrefix(h,"form-check"),s=useBootstrapPrefix(s,"form-switch");const{controlId:Tl}=reactExports.useContext(FormContext),$l=reactExports.useMemo(()=>({controlId:n||Tl}),[Tl,n]),Bl=!_u&&kl!=null&&kl!==!1||hasChildOfType(_u,FormCheckLabel),Pu=jsxRuntimeExports.jsx(FormCheckInput,{...bu,type:Ml==="switch"?"checkbox":Ml,ref:dl,isValid:V,isInvalid:oe,disabled:$,as:Hu});return jsxRuntimeExports.jsx(FormContext.Provider,{value:$l,children:jsxRuntimeExports.jsx("div",{style:ml,className:classNames(Et,Bl&&h,_&&`${h}-inline`,M&&`${h}-reverse`,Ml==="switch"&&s),children:_u||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Pu,Bl&&jsxRuntimeExports.jsx(FormCheckLabel,{title:rl,children:kl}),ie&&jsxRuntimeExports.jsx(Feedback,{type:zn,tooltip:Y,children:ie})]})})})});FormCheck.displayName="FormCheck";const FormCheck$1=Object.assign(FormCheck,{Input:FormCheckInput,Label:FormCheckLabel}),FormControl=reactExports.forwardRef(({bsPrefix:n,type:h,size:s,htmlSize:_,id:M,className:$,isValid:V=!1,isInvalid:oe=!1,plaintext:Y,readOnly:ie,as:zn="input",...Et},ml)=>{const{controlId:rl}=reactExports.useContext(FormContext);return n=useBootstrapPrefix(n,"form-control"),jsxRuntimeExports.jsx(zn,{...Et,type:h,size:_,ref:ml,readOnly:ie,id:M||rl,className:classNames($,Y?`${n}-plaintext`:n,s&&`${n}-${s}`,h==="color"&&`${n}-color`,V&&"is-valid",oe&&"is-invalid")})});FormControl.displayName="FormControl";const FormControl$1=Object.assign(FormControl,{Feedback}),FormFloating=reactExports.forwardRef(({className:n,bsPrefix:h,as:s="div",..._},M)=>(h=useBootstrapPrefix(h,"form-floating"),jsxRuntimeExports.jsx(s,{ref:M,className:classNames(n,h),..._})));FormFloating.displayName="FormFloating";const FormGroup=reactExports.forwardRef(({controlId:n,as:h="div",...s},_)=>{const M=reactExports.useMemo(()=>({controlId:n}),[n]);return jsxRuntimeExports.jsx(FormContext.Provider,{value:M,children:jsxRuntimeExports.jsx(h,{...s,ref:_})})});FormGroup.displayName="FormGroup";const FormLabel=reactExports.forwardRef(({as:n="label",bsPrefix:h,column:s=!1,visuallyHidden:_=!1,className:M,htmlFor:$,...V},oe)=>{const{controlId:Y}=reactExports.useContext(FormContext);h=useBootstrapPrefix(h,"form-label");let ie="col-form-label";typeof s=="string"&&(ie=`${ie} ${ie}-${s}`);const zn=classNames(M,h,_&&"visually-hidden",s&&ie);return $=$||Y,s?jsxRuntimeExports.jsx(Col,{ref:oe,as:"label",className:zn,htmlFor:$,...V}):jsxRuntimeExports.jsx(n,{ref:oe,className:zn,htmlFor:$,...V})});FormLabel.displayName="FormLabel";const FormRange=reactExports.forwardRef(({bsPrefix:n,className:h,id:s,..._},M)=>{const{controlId:$}=reactExports.useContext(FormContext);return n=useBootstrapPrefix(n,"form-range"),jsxRuntimeExports.jsx("input",{..._,type:"range",ref:M,className:classNames(h,n),id:s||$})});FormRange.displayName="FormRange";const FormSelect=reactExports.forwardRef(({bsPrefix:n,size:h,htmlSize:s,className:_,isValid:M=!1,isInvalid:$=!1,id:V,...oe},Y)=>{const{controlId:ie}=reactExports.useContext(FormContext);return n=useBootstrapPrefix(n,"form-select"),jsxRuntimeExports.jsx("select",{...oe,size:s,ref:Y,className:classNames(_,n,h&&`${n}-${h}`,M&&"is-valid",$&&"is-invalid"),id:V||ie})});FormSelect.displayName="FormSelect";const FormText=reactExports.forwardRef(({bsPrefix:n,className:h,as:s="small",muted:_,...M},$)=>(n=useBootstrapPrefix(n,"form-text"),jsxRuntimeExports.jsx(s,{...M,ref:$,className:classNames(h,n,_&&"text-muted")})));FormText.displayName="FormText";const Switch=reactExports.forwardRef((n,h)=>jsxRuntimeExports.jsx(FormCheck$1,{...n,ref:h,type:"switch"}));Switch.displayName="Switch";const Switch$1=Object.assign(Switch,{Input:FormCheck$1.Input,Label:FormCheck$1.Label}),FloatingLabel=reactExports.forwardRef(({bsPrefix:n,className:h,children:s,controlId:_,label:M,...$},V)=>(n=useBootstrapPrefix(n,"form-floating"),jsxRuntimeExports.jsxs(FormGroup,{ref:V,className:classNames(h,n),controlId:_,...$,children:[s,jsxRuntimeExports.jsx("label",{htmlFor:_,children:M})]})));FloatingLabel.displayName="FloatingLabel";const propTypes$1={_ref:PropTypes.any,validated:PropTypes.bool,as:PropTypes.elementType},Form=reactExports.forwardRef(({className:n,validated:h,as:s="form",..._},M)=>jsxRuntimeExports.jsx(s,{..._,ref:M,className:classNames(n,h&&"was-validated")}));Form.displayName="Form";Form.propTypes=propTypes$1;const Sa=Object.assign(Form,{Group:FormGroup,Control:FormControl$1,Floating:FormFloating,Check:FormCheck$1,Switch:Switch$1,Label:FormLabel,Text:FormText,Range:FormRange,Select:FormSelect,FloatingLabel}),toFnRef=n=>!n||typeof n=="function"?n:h=>{n.current=h};function mergeRefs(n,h){const s=toFnRef(n),_=toFnRef(h);return M=>{s&&s(M),_&&_(M)}}function useMergedRefs(n,h){return reactExports.useMemo(()=>mergeRefs(n,h),[n,h])}const TabContext=reactExports.createContext(null),_excluded$3=["as","active","eventKey"];function _objectWithoutPropertiesLoose$3(n,h){if(n==null)return{};var s={};for(var _ in n)if({}.hasOwnProperty.call(n,_)){if(h.indexOf(_)>=0)continue;s[_]=n[_]}return s}function useNavItem({key:n,onClick:h,active:s,id:_,role:M,disabled:$}){const V=reactExports.useContext(SelectableContext),oe=reactExports.useContext(NavContext),Y=reactExports.useContext(TabContext);let ie=s;const zn={role:M};if(oe){!M&&oe.role==="tablist"&&(zn.role="tab");const Et=oe.getControllerId(n??null),ml=oe.getControlledId(n??null);zn[dataAttr("event-key")]=n,zn.id=Et||_,ie=s==null&&n!=null?oe.activeKey===n:s,(ie||!(Y!=null&&Y.unmountOnExit)&&!(Y!=null&&Y.mountOnEnter))&&(zn["aria-controls"]=ml)}return zn.role==="tab"&&(zn["aria-selected"]=ie,ie||(zn.tabIndex=-1),$&&(zn.tabIndex=-1,zn["aria-disabled"]=!0)),zn.onClick=useEventCallback(Et=>{$||(h?.(Et),n!=null&&V&&!Et.isPropagationStopped()&&V(n,Et))}),[zn,{isActive:ie}]}const NavItem$1=reactExports.forwardRef((n,h)=>{let{as:s=Button$1,active:_,eventKey:M}=n,$=_objectWithoutPropertiesLoose$3(n,_excluded$3);const[V,oe]=useNavItem(Object.assign({key:makeEventKey(M,$.href),active:_},$));return V[dataAttr("active")]=oe.isActive,jsxRuntimeExports.jsx(s,Object.assign({},$,V,{ref:h}))});NavItem$1.displayName="NavItem";const _excluded$2=["as","onSelect","activeKey","role","onKeyDown"];function _objectWithoutPropertiesLoose$2(n,h){if(n==null)return{};var s={};for(var _ in n)if({}.hasOwnProperty.call(n,_)){if(h.indexOf(_)>=0)continue;s[_]=n[_]}return s}const noop=()=>{},EVENT_KEY_ATTR=dataAttr("event-key"),Nav$2=reactExports.forwardRef((n,h)=>{let{as:s="div",onSelect:_,activeKey:M,role:$,onKeyDown:V}=n,oe=_objectWithoutPropertiesLoose$2(n,_excluded$2);const Y=useForceUpdate(),ie=reactExports.useRef(!1),zn=reactExports.useContext(SelectableContext),Et=reactExports.useContext(TabContext);let ml,rl;Et&&($=$||"tablist",M=Et.activeKey,ml=Et.getControlledId,rl=Et.getControllerId);const Ml=reactExports.useRef(null),kl=dl=>{const Tl=Ml.current;if(!Tl)return null;const $l=qsa(Tl,`[${EVENT_KEY_ATTR}]:not([aria-disabled=true])`),Bl=Tl.querySelector("[aria-selected=true]");if(!Bl||Bl!==document.activeElement)return null;const Pu=$l.indexOf(Bl);if(Pu===-1)return null;let Il=Pu+dl;return Il>=$l.length&&(Il=0),Il<0&&(Il=$l.length-1),$l[Il]},_u=(dl,Tl)=>{dl!=null&&(_?.(dl,Tl),zn?.(dl,Tl))},Hu=dl=>{if(V?.(dl),!Et)return;let Tl;switch(dl.key){case"ArrowLeft":case"ArrowUp":Tl=kl(-1);break;case"ArrowRight":case"ArrowDown":Tl=kl(1);break;default:return}Tl&&(dl.preventDefault(),_u(Tl.dataset[dataProp("EventKey")]||null,dl),ie.current=!0,Y())};reactExports.useEffect(()=>{if(Ml.current&&ie.current){const dl=Ml.current.querySelector(`[${EVENT_KEY_ATTR}][aria-selected=true]`);dl?.focus()}ie.current=!1});const bu=useMergedRefs(h,Ml);return jsxRuntimeExports.jsx(SelectableContext.Provider,{value:_u,children:jsxRuntimeExports.jsx(NavContext.Provider,{value:{role:$,activeKey:makeEventKey(M),getControlledId:ml||noop,getControllerId:rl||noop},children:jsxRuntimeExports.jsx(s,Object.assign({},oe,{onKeyDown:Hu,ref:bu,role:$}))})})});Nav$2.displayName="Nav";const BaseNav=Object.assign(Nav$2,{Item:NavItem$1});function NoopTransition({children:n,in:h,onExited:s,mountOnEnter:_,unmountOnExit:M}){const $=reactExports.useRef(null),V=reactExports.useRef(h),oe=useEventCallback(s);reactExports.useEffect(()=>{h?V.current=!0:oe($.current)},[h,oe]);const Y=useMergedRefs($,getChildRef(n)),ie=reactExports.cloneElement(n,{ref:Y});return h?ie:M||!V.current&&_?null:ie}const NavItem=reactExports.forwardRef(({className:n,bsPrefix:h,as:s="div",..._},M)=>(h=useBootstrapPrefix(h,"nav-item"),jsxRuntimeExports.jsx(s,{ref:M,className:classNames(n,h),..._})));NavItem.displayName="NavItem";const NavLink=reactExports.forwardRef(({bsPrefix:n,className:h,as:s=Anchor,active:_,eventKey:M,disabled:$=!1,...V},oe)=>{n=useBootstrapPrefix(n,"nav-link");const[Y,ie]=useNavItem({key:makeEventKey(M,V.href),active:_,disabled:$,...V});return jsxRuntimeExports.jsx(s,{...V,...Y,ref:oe,disabled:$,className:classNames(h,n,$&&"disabled",ie.isActive&&"active")})});NavLink.displayName="NavLink";const Nav=reactExports.forwardRef((n,h)=>{const{as:s="div",bsPrefix:_,variant:M,fill:$=!1,justify:V=!1,navbar:oe,navbarScroll:Y,className:ie,activeKey:zn,...Et}=useUncontrolled(n,{activeKey:"onSelect"}),ml=useBootstrapPrefix(_,"nav");let rl,Ml,kl=!1;const _u=reactExports.useContext(context),Hu=reactExports.useContext(context$1);return _u?(rl=_u.bsPrefix,kl=oe??!0):Hu&&({cardHeaderBsPrefix:Ml}=Hu),jsxRuntimeExports.jsx(BaseNav,{as:s,ref:h,activeKey:zn,className:classNames(ie,{[ml]:!kl,[`${rl}-nav`]:kl,[`${rl}-nav-scroll`]:kl&&Y,[`${Ml}-${M}`]:!!Ml,[`${ml}-${M}`]:!!M,[`${ml}-fill`]:$,[`${ml}-justified`]:V}),...Et})});Nav.displayName="Nav";const Nav$1=Object.assign(Nav,{Item:NavItem,Link:NavLink}),Row=reactExports.forwardRef(({bsPrefix:n,className:h,as:s="div",..._},M)=>{const $=useBootstrapPrefix(n,"row"),V=useBootstrapBreakpoints(),oe=useBootstrapMinBreakpoint(),Y=`${$}-cols`,ie=[];return V.forEach(zn=>{const Et=_[zn];delete _[zn];let ml;Et!=null&&typeof Et=="object"?{cols:ml}=Et:ml=Et;const rl=zn!==oe?`-${zn}`:"";ml!=null&&ie.push(`${Y}${rl}-${ml}`)}),jsxRuntimeExports.jsx(s,{ref:M,..._,className:classNames(h,$,...ie)})});Row.displayName="Row";const Spinner=reactExports.forwardRef(({bsPrefix:n,variant:h,animation:s="border",size:_,as:M="div",className:$,...V},oe)=>{n=useBootstrapPrefix(n,"spinner");const Y=`${n}-${s}`;return jsxRuntimeExports.jsx(M,{ref:oe,...V,className:classNames($,Y,_&&`${Y}-${_}`,h&&`text-${h}`)})});Spinner.displayName="Spinner";const _excluded$1=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],_excluded2=["activeKey","getControlledId","getControllerId"],_excluded3=["as"];function _objectWithoutPropertiesLoose$1(n,h){if(n==null)return{};var s={};for(var _ in n)if({}.hasOwnProperty.call(n,_)){if(h.indexOf(_)>=0)continue;s[_]=n[_]}return s}function useTabPanel(n){let{active:h,eventKey:s,mountOnEnter:_,transition:M,unmountOnExit:$,role:V="tabpanel",onEnter:oe,onEntering:Y,onEntered:ie,onExit:zn,onExiting:Et,onExited:ml}=n,rl=_objectWithoutPropertiesLoose$1(n,_excluded$1);const Ml=reactExports.useContext(TabContext);if(!Ml)return[Object.assign({},rl,{role:V}),{eventKey:s,isActive:h,mountOnEnter:_,transition:M,unmountOnExit:$,onEnter:oe,onEntering:Y,onEntered:ie,onExit:zn,onExiting:Et,onExited:ml}];const{activeKey:kl,getControlledId:_u,getControllerId:Hu}=Ml,bu=_objectWithoutPropertiesLoose$1(Ml,_excluded2),dl=makeEventKey(s);return[Object.assign({},rl,{role:V,id:_u(s),"aria-labelledby":Hu(s)}),{eventKey:s,isActive:h==null&&dl!=null?makeEventKey(kl)===dl:h,transition:M||bu.transition,mountOnEnter:_??bu.mountOnEnter,unmountOnExit:$??bu.unmountOnExit,onEnter:oe,onEntering:Y,onEntered:ie,onExit:zn,onExiting:Et,onExited:ml}]}const TabPanel=reactExports.forwardRef((n,h)=>{let{as:s="div"}=n,_=_objectWithoutPropertiesLoose$1(n,_excluded3);const[M,{isActive:$,onEnter:V,onEntering:oe,onEntered:Y,onExit:ie,onExiting:zn,onExited:Et,mountOnEnter:ml,unmountOnExit:rl,transition:Ml=NoopTransition}]=useTabPanel(_);return jsxRuntimeExports.jsx(TabContext.Provider,{value:null,children:jsxRuntimeExports.jsx(SelectableContext.Provider,{value:null,children:jsxRuntimeExports.jsx(Ml,{in:$,onEnter:V,onEntering:oe,onEntered:Y,onExit:ie,onExiting:zn,onExited:Et,mountOnEnter:ml,unmountOnExit:rl,children:jsxRuntimeExports.jsx(s,Object.assign({},M,{ref:h,hidden:!$,"aria-hidden":!$}))})})})});TabPanel.displayName="TabPanel";const Tabs$1=n=>{const{id:h,generateChildId:s,onSelect:_,activeKey:M,defaultActiveKey:$,transition:V,mountOnEnter:oe,unmountOnExit:Y,children:ie}=n,[zn,Et]=useUncontrolledProp(M,$,_),ml=$b5e257d569688ac6$export$619500959fc48b26(h),rl=reactExports.useMemo(()=>s||((kl,_u)=>ml?`${ml}-${_u}-${kl}`:null),[ml,s]),Ml=reactExports.useMemo(()=>({onSelect:Et,activeKey:zn,transition:V,mountOnEnter:oe||!1,unmountOnExit:Y||!1,getControlledId:kl=>rl(kl,"tabpane"),getControllerId:kl=>rl(kl,"tab")}),[Et,zn,V,oe,Y,rl]);return jsxRuntimeExports.jsx(TabContext.Provider,{value:Ml,children:jsxRuntimeExports.jsx(SelectableContext.Provider,{value:Et||null,children:ie})})};Tabs$1.Panel=TabPanel;function getTabTransitionComponent(n){return typeof n=="boolean"?n?Fade:NoopTransition:n}const TabContainer=({transition:n,...h})=>jsxRuntimeExports.jsx(Tabs$1,{...h,transition:getTabTransitionComponent(n)});TabContainer.displayName="TabContainer";const TabContent=reactExports.forwardRef(({className:n,bsPrefix:h,as:s="div",..._},M)=>(h=useBootstrapPrefix(h,"tab-content"),jsxRuntimeExports.jsx(s,{ref:M,className:classNames(n,h),..._})));TabContent.displayName="TabContent";const TabPane=reactExports.forwardRef(({bsPrefix:n,transition:h,...s},_)=>{const[{className:M,as:$="div",...V},{isActive:oe,onEnter:Y,onEntering:ie,onEntered:zn,onExit:Et,onExiting:ml,onExited:rl,mountOnEnter:Ml,unmountOnExit:kl,transition:_u=Fade}]=useTabPanel({...s,transition:getTabTransitionComponent(h)}),Hu=useBootstrapPrefix(n,"tab-pane");return jsxRuntimeExports.jsx(TabContext.Provider,{value:null,children:jsxRuntimeExports.jsx(SelectableContext.Provider,{value:null,children:jsxRuntimeExports.jsx(_u,{in:oe,onEnter:Y,onEntering:ie,onEntered:zn,onExit:Et,onExiting:ml,onExited:rl,mountOnEnter:Ml,unmountOnExit:kl,children:jsxRuntimeExports.jsx($,{...V,ref:_,className:classNames(M,Hu,oe&&"active")})})})})});TabPane.displayName="TabPane";const propTypes={eventKey:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.node.isRequired,disabled:PropTypes.bool,tabClassName:PropTypes.string,tabAttrs:PropTypes.object},Tab=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Tab.propTypes=propTypes;const Tab$1=Object.assign(Tab,{Container:TabContainer,Content:TabContent,Pane:TabPane}),Table=reactExports.forwardRef(({bsPrefix:n,className:h,striped:s,bordered:_,borderless:M,hover:$,size:V,variant:oe,responsive:Y,...ie},zn)=>{const Et=useBootstrapPrefix(n,"table"),ml=classNames(h,Et,oe&&`${Et}-${oe}`,V&&`${Et}-${V}`,s&&`${Et}-${typeof s=="string"?`striped-${s}`:"striped"}`,_&&`${Et}-bordered`,M&&`${Et}-borderless`,$&&`${Et}-hover`),rl=jsxRuntimeExports.jsx("table",{...ie,className:ml,ref:zn});if(Y){let Ml=`${Et}-responsive`;return typeof Y=="string"&&(Ml=`${Ml}-${Y}`),jsxRuntimeExports.jsx("div",{className:Ml,children:rl})}return rl});Table.displayName="Table";function getDefaultActiveKey(n){let h;return forEach(n,s=>{h==null&&(h=s.props.eventKey)}),h}function renderTab(n){const{title:h,eventKey:s,disabled:_,tabClassName:M,tabAttrs:$,id:V}=n.props;return h==null?null:jsxRuntimeExports.jsx(NavItem,{as:"li",role:"presentation",children:jsxRuntimeExports.jsx(NavLink,{as:"button",type:"button",eventKey:s,disabled:_,id:V,className:M,...$,children:h})})}const Tabs=n=>{const{id:h,onSelect:s,transition:_,mountOnEnter:M=!1,unmountOnExit:$=!1,variant:V="tabs",children:oe,activeKey:Y=getDefaultActiveKey(oe),...ie}=useUncontrolled(n,{activeKey:"onSelect"});return jsxRuntimeExports.jsxs(Tabs$1,{id:h,activeKey:Y,onSelect:s,transition:getTabTransitionComponent(_),mountOnEnter:M,unmountOnExit:$,children:[jsxRuntimeExports.jsx(Nav$1,{id:h,...ie,role:"tablist",as:"ul",variant:V,children:map(oe,renderTab)}),jsxRuntimeExports.jsx(TabContent,{children:map(oe,zn=>{const Et={...zn.props};return delete Et.title,delete Et.disabled,delete Et.tabClassName,delete Et.tabAttrs,jsxRuntimeExports.jsx(TabPane,{...Et})})})]})};Tabs.displayName="Tabs";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign=function(){return __assign=Object.assign||function(h){for(var s,_=1,M=arguments.length;_<M;_++){s=arguments[_];for(var $ in s)Object.prototype.hasOwnProperty.call(s,$)&&(h[$]=s[$])}return h},__assign.apply(this,arguments)};function __rest(n,h){var s={};for(var _ in n)Object.prototype.hasOwnProperty.call(n,_)&&h.indexOf(_)<0&&(s[_]=n[_]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,_=Object.getOwnPropertySymbols(n);M<_.length;M++)h.indexOf(_[M])<0&&Object.prototype.propertyIsEnumerable.call(n,_[M])&&(s[_[M]]=n[_[M]]);return s}var hashFragment="",observer=null,asyncTimerId=null,scrollFunction=null;function reset(){hashFragment="",observer!==null&&observer.disconnect(),asyncTimerId!==null&&(window.clearTimeout(asyncTimerId),asyncTimerId=null)}function isInteractiveElement(n){var h=["BUTTON","INPUT","SELECT","TEXTAREA"],s=["A","AREA"];return h.includes(n.tagName)&&!n.hasAttribute("disabled")||s.includes(n.tagName)&&n.hasAttribute("href")}function getElAndScroll(){var n=null;if(hashFragment==="#")n=document.body;else{var h=hashFragment.replace("#","");n=document.getElementById(h),n===null&&hashFragment==="#top"&&(n=document.body)}if(n!==null){scrollFunction(n);var s=n.getAttribute("tabindex");return s===null&&!isInteractiveElement(n)&&n.setAttribute("tabindex",-1),n.focus({preventScroll:!0}),s===null&&!isInteractiveElement(n)&&(n.blur(),n.removeAttribute("tabindex")),reset(),!0}return!1}function hashLinkScroll(n){window.setTimeout(function(){getElAndScroll()===!1&&(observer===null&&(observer=new MutationObserver(getElAndScroll)),observer.observe(document,{attributes:!0,childList:!0,subtree:!0}),asyncTimerId=window.setTimeout(function(){reset()},n||1e4))},0)}function genericHashLink(n){return dm.forwardRef(function(h,s){var _="";typeof h.to=="string"&&h.to.includes("#")?_="#"+h.to.split("#").slice(1).join("#"):typeof h.to=="object"&&typeof h.to.hash=="string"&&(_=h.to.hash);var M={};n===NavLink$1&&(M.isActive=function(oe,Y){return oe&&oe.isExact&&Y.hash===_});function $(oe){reset(),hashFragment=h.elementId?"#"+h.elementId:_,h.onClick&&h.onClick(oe),hashFragment!==""&&!oe.defaultPrevented&&oe.button===0&&(!h.target||h.target==="_self")&&!(oe.metaKey||oe.altKey||oe.ctrlKey||oe.shiftKey)&&(scrollFunction=h.scroll||(function(Y){return h.smooth?Y.scrollIntoView({behavior:"smooth"}):Y.scrollIntoView()}),hashLinkScroll(h.timeout))}var V=__rest(h,["scroll","smooth","timeout","elementId"]);return dm.createElement(n,__assign({},M,V,{onClick:$,ref:s}),h.children)})}var HashLink=genericHashLink(Link);genericHashLink(NavLink$1);const references={mpds:{type:"db",ref:jsxRuntimeExports.jsxs("span",{children:["The Pauling File"," ",jsxRuntimeExports.jsx("a",{href:"http://paulingfile.com/",target:"_blank",rel:"noopener noreferrer",children:"http://paulingfile.com/"})," ","exposed through the Materials Platform for Data Science"," ",jsxRuntimeExports.jsx("a",{href:"https://mpds.io/",target:"_blank",rel:"noopener noreferrer",children:"https://mpds.io/"}),"."]})},cod:{type:"db",ref:jsxRuntimeExports.jsxs("span",{children:["S. Graulis et al. Crystallography open database (COD): an open-access collection of crystal structures and platform for world-wide collaboration. Nucleic Acids Research, 40:D420-D427, 2012,"," ",jsxRuntimeExports.jsx("a",{href:"http://www.crystallography.net",target:"_blank",rel:"noopener noreferrer",children:"http://www.crystallography.net"}),"."]})},icsd:{type:"db",ref:jsxRuntimeExports.jsxs("span",{children:["Inorganic Crystal Structure Database,"," ",jsxRuntimeExports.jsx("a",{href:"http://www.fiz-karlsruhe.com/icsd.html",target:"_blank",rel:"noopener noreferrer",children:"http://www.fiz-karlsruhe.com/icsd.html"}),"."]})},aiida1:{type:"software",ref:jsxRuntimeExports.jsxs("span",{children:["S. P. Huber et al. AiiDA 1.0, a scalable computational infrastructure for automated reproducible workflows and data provenance. Sci Data 7, 300, 2020."," ",jsxRuntimeExports.jsx("a",{href:"http://www.aiida.net",target:"_blank",rel:"noopener noreferrer",children:"http://www.aiida.net"}),"."]})},aiida2:{type:"software",ref:jsxRuntimeExports.jsx("span",{children:"G. Pizzi et al. AiiDA: Automated Interactive Infrastructure and Database for Computational Science. Computational Materials Science, 111:218-230, 2016."})},pymatgen:{type:"software",ref:jsxRuntimeExports.jsx("span",{children:"S. P. Ong et al. Python materials genomics (pymatgen): A robust, open-source python library for materials analysis. Computational Materials Science, 68:314-319, 2013."})},spglib:{type:"software",ref:jsxRuntimeExports.jsxs("span",{children:["A. Togo. Spglib."," ",jsxRuntimeExports.jsx("a",{href:"https://spglib.readthedocs.io/",target:"_blank",rel:"noopener noreferrer",children:"https://spglib.readthedocs.io/"}),"."]})},qe:{type:"software",ref:jsxRuntimeExports.jsx("span",{children:"P. Giannozzi et al. Advanced capabilities for materials modelling with Quantum ESPRESSO. Journal of Physics: Condensed Matter, 29:465901, 2017."})},sirius:{type:"software",ref:jsxRuntimeExports.jsxs("span",{children:["SIRIUS,"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/electronic-structure/SIRIUS",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/electronic-structure/SIRIUS"}),"."]})},cod_parser:{type:"software",ref:jsxRuntimeExports.jsx("span",{children:"A. Merkys et al. COD::CIF::Parser: an error-correcting CIF parser for the Perl language Journal of Applied Crystallography 49 (2016)"})},sssp:{type:"pseudo_protocols",ref:jsxRuntimeExports.jsxs("span",{children:["G. Prandini, A. Marrazzo, I. E. Castelli, N. Mounet and N. Marzari, npj Computational Materials 4, 72 (2018)."," ",jsxRuntimeExports.jsx("a",{href:"http://www.materialscloud.org/sssp/",target:"_blank",rel:"noopener noreferrer",children:"http://www.materialscloud.org/sssp/"})]})},sssp_protocols:{type:"pseudo_protocols",ref:jsxRuntimeExports.jsx("span",{children:"SSSP protocol for the calculation of structural and thermodynamical properties of inorganic materials, Nicolas Hoermann et al., to be published."})}};function refNr(n){return Object.keys(references).indexOf(n)+1}function getRef(n){return jsxRuntimeExports.jsx("sup",{children:jsxRuntimeExports.jsxs(HashLink,{className:"cite-anchor",to:"#ref"+refNr(n),children:["[",refNr(n),"]"]})})}function renderRefs(n){return Object.keys(references).map(h=>{if(references[h].type!=n)return;let s=refNr(h);return jsxRuntimeExports.jsxs("div",{id:"ref"+s,children:["[",s,"] ",references[h].ref]},s)})}const aboutText=jsxRuntimeExports.jsxs("div",{className:"about-text-container",children:[jsxRuntimeExports.jsxs("p",{children:["This is a curated set of relaxed three-dimensional crystal structures based on raw CIF data taken from the external experimental databases MPDS",getRef("mpds"),", COD",getRef("cod")," and ICSD",getRef("icsd"),". The raw CIF data have been imported, cleaned",getRef("cod_parser")," and parsed",getRef("pymatgen"),getRef("spglib")," into a crystal structure; their ground-state has been computed using the SIRIUS-enabled",getRef("sirius")," pw.x code of the Quantum ESPRESSO",getRef("qe")," distribution, and tight tolerance criteria for the calculations using the SSSP protocols",getRef("sssp"),getRef("sssp_protocols"),"."]}),jsxRuntimeExports.jsxs("p",{children:["This entire procedure is encoded into an AiiDA",getRef("aiida1"),getRef("aiida2")," workflow which automates the process while keeping full data provenance. Here, since the original source data of the ICSD and MPDS databases are copyrighted, only the provenance of the final SCF calculation on the relaxed structures can be made publicly available."]}),jsxRuntimeExports.jsx("p",{children:'The MC3D ID numbers come from a list of unique "parent" stoichiometric structures that has been created and curated from a collection of several experimental databases. Once a parent structure has been optimized using density-functional theory, it is made public and added to the online Discover section of the Materials Cloud (copyrights might prevent publishing the original parent). Note that since not all structures have been calculated, some ID numbers are missing from the public version of the database. The full ID of each structure also contains as an appended modifier the functional that was used in the calculations. Since the ID number points to the same unique parent, mc3d-1234/pbe and mc3d-1234/pbesol have the same starting point, but have been then relaxed according to their respective functionals.'}),jsxRuntimeExports.jsx("div",{className:"about-h",children:"Acknowledgements"}),jsxRuntimeExports.jsx("b",{children:"External databases of source CIF data"}),renderRefs("db"),jsxRuntimeExports.jsx("b",{children:"Software"}),renderRefs("software"),jsxRuntimeExports.jsx("b",{children:"Pseudopotentials and protocols"}),renderRefs("pseudo_protocols"),jsxRuntimeExports.jsx("b",{children:"Funding partners"}),jsxRuntimeExports.jsx("br",{}),"This project is made possible by support from the European Centre of Excellence MaX Materials design at the Exascale (grant no. 824143), the Platform for Advanced Scientific Computing (PASC), and with HPC allocations from PRACE (project id 2020225458) and CSCS (project id s854)."]});let mcRestApiUrl="https://api.dev.materialscloud.org/";mcRestApiUrl="https://api.materialscloud.org/";const MC_REST_API_URL_BASE=mcRestApiUrl,MC_REST_API_URL=`${mcRestApiUrl}mc3d`,MC_REST_API_FALLBACK_URL="https://api.dev.materialscloud.org/mc3d";async function fetchWithFallback(n,h,s=3500){const _=new AbortController,M=_.signal,$=setTimeout(()=>_.abort(),s);try{let V=await fetch(n,{signal:M});if(clearTimeout($),!V.ok)throw new Error(`Primary fetch failed with status ${V.status}`);return await V.json()}catch(V){if(!h)return console.error("Fetch failed:",V),null;console.warn("Primary fetch failed, trying fallback:",V);const oe=new AbortController,Y=oe.signal,ie=setTimeout(()=>oe.abort(),s);try{let zn=await fetch(h,{signal:Y});if(clearTimeout(ie),!zn.ok)throw new Error(`Fallback fetch failed with status ${zn.status}`);return await zn.json()}catch(zn){return console.error("Both fetch attempts failed:",zn),null}}}async function loadIndex(n){const h=`${MC_REST_API_URL}/${n}/overview`,s=`${MC_REST_API_FALLBACK_URL}/${n}/overview`;return fetchWithFallback(h,s)}async function loadMetadata(n){const h=`${MC_REST_API_URL}/${n}/meta`,s=`${MC_REST_API_FALLBACK_URL}/${n}/meta`;return fetchWithFallback(h,s)}async function loadDetails(n,h){const s=`${MC_REST_API_URL}/${n}/core_base/${h}`,_=`${MC_REST_API_FALLBACK_URL}/${n}/core_base/${h}`;return fetchWithFallback(s,_)}async function loadXrd(n,h){const s=`${MC_REST_API_URL}/${n}/core_xrd/${h}`,_=`${MC_REST_API_FALLBACK_URL}/${n}/core_xrd/${h}`;return(await fetchWithFallback(s,_))?.data??null}async function loadSuperConDetails(n,h){const s=`${MC_REST_API_URL}/${n}/supercon_base/${h}`,_=`${MC_REST_API_FALLBACK_URL}/${n}/supercon_base/${h}`;return fetchWithFallback(s,_)}async function loadSuperConPhononVis(n,h){const s=`${MC_REST_API_URL}/${n}/supercon_phonon-vis/${h}`,_=`${MC_REST_API_FALLBACK_URL}/${n}/supercon_phonon-vis/${h}`;return fetchWithFallback(s,_)}async function loadStructureUuids(n){const h=`${MC_REST_API_URL}/${n}/structure-uuids`,s=`${MC_REST_API_FALLBACK_URL}/${n}/structure-uuids`;return fetchWithFallback(h,s)}async function loadGeneralInfo(){const n=`${MC_REST_API_URL}/info`,h=`${MC_REST_API_FALLBACK_URL}/info`;return fetchWithFallback(n,h)}let aiidaRestBaseUrl="https://aiida.dev.materialscloud.org",exploreBaseUrl="https://www.materialscloud.dev/explore/";aiidaRestBaseUrl="https://aiida.materialscloud.org",exploreBaseUrl="https://www.materialscloud.org/explore/";const AIIDA_REST_BASE_URL=aiidaRestBaseUrl,EXPLORE_BASE_URL=exploreBaseUrl,AIIDA_API_URLS={"pbe-v1":`${AIIDA_REST_BASE_URL}/mc3d-pbe-v1/api/v4`,"pbesol-v1":`${AIIDA_REST_BASE_URL}/mc3d-pbesol-v1/api/v4`,"pbesol-v2":`${AIIDA_REST_BASE_URL}/mc3d-pbesol-v2/api/v4`,"pbesol-v1-supercon":`${AIIDA_REST_BASE_URL}/mc3d-pbesol-v1-supercon/api/v4`},EXPLORE_URLS={"pbe-v1":`${EXPLORE_BASE_URL}/mc3d-pbe-v1`,"pbesol-v1":`${EXPLORE_BASE_URL}/mc3d-pbesol-v1`,"pbesol-v2":`${EXPLORE_BASE_URL}/mc3d-pbesol-v2`,"pbesol-v1-supercon":`${EXPLORE_BASE_URL}/mc3d-pbesol-v1-supercon/api/v4`};async function loadAiidaAttributes(n,h){let _=`${AIIDA_API_URLS[n]}/nodes/${h}/contents/attributes`;try{return(await(await fetch(_,{method:"get"})).json()).data.attributes}catch(M){console.error("Error fetching AiiDA attributes:",M)}}async function loadAiidaCif(n,h){let _=`${AIIDA_API_URLS[n]}/nodes/${h}/download?download_format=cif&download=false`;try{return(await(await fetch(_,{method:"get"})).json()).data.download.data}catch(M){console.error("Error fetching AiiDA cif:",M)}}async function loadAiidaBands(n,h){const _=`${AIIDA_API_URLS[n]}/nodes/${h}/download?download_format=json`;console.log("abEndpoint",_);try{return await(await fetch(_,{method:"get"})).json()}catch(M){console.error("Error fetching AiiDA bands:",M)}}async function loadXY(n,h){const _=`${AIIDA_API_URLS[n]}/nodes/${h}/download?download_format=json`;try{return await(await fetch(_,{method:"get"})).json()}catch(M){console.error("Error fetching AiiDA bands:",M)}}const DOCS_URL=`${MC_REST_API_URL_BASE}docs`,INDEX_URL=`${MC_REST_API_URL}/pbe-v1/overview`,SINGLE_ENTRY_URL=`${MC_REST_API_URL}/pbe-v1/base/mc3d-10`,restapiText=jsxRuntimeExports.jsxs("div",{className:"restapi-text-container",children:[jsxRuntimeExports.jsx("p",{children:"This section contains an overview of our REST APIs to access the MC3D data."}),jsxRuntimeExports.jsx("div",{className:"restapi-h",children:"1. Materials Cloud and AiiDA REST APIs"}),jsxRuntimeExports.jsxs("div",{children:["The MC3D frontend is running on:",jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{children:["The Materials Cloud REST API for the curated metadata:"," ",jsxRuntimeExports.jsx("a",{href:DOCS_URL,target:"_blank",rel:"noopener noreferrer",children:DOCS_URL}),", see e.g.",jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{children:["Index of materials:"," ",jsxRuntimeExports.jsx("a",{href:INDEX_URL,target:"_blank",rel:"noopener noreferrer",children:INDEX_URL})]}),jsxRuntimeExports.jsxs("li",{children:["Single entry data:"," ",jsxRuntimeExports.jsx("a",{href:SINGLE_ENTRY_URL,target:"_blank",rel:"noopener noreferrer",children:SINGLE_ENTRY_URL})]})]})]}),jsxRuntimeExports.jsxs("li",{children:["AiiDA REST API for properties and provenance:"," ",jsxRuntimeExports.jsx("a",{href:AIIDA_API_URLS["pbe-v1"],target:"_blank",rel:"noopener noreferrer",children:AIIDA_API_URLS["pbe-v1"]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"restapi-h",children:"2. OPTIMADE REST API"}),jsxRuntimeExports.jsxs("div",{children:["The MC3D database can also be accessed via an API following the"," ",jsxRuntimeExports.jsx("a",{href:"https://www.optimade.org/optimade",target:"_blank",rel:"noopener noreferrer",children:"OPTIMADE specification"}),". This currently includes the crystal structures and some properties but no provenance information is provided. For the exact endpoints, see the"," ",jsxRuntimeExports.jsx("a",{href:"https://materialscloud.org/optimade",target:"_blank",rel:"noopener noreferrer",children:"Materials Cloud OPTIMADE API page"}),"."]})]}),spaceGroupSymbols=["x","P1","P-1","P2","P2_1","C2","Pm","Pc","Cm","Cc","P2/m","P2_1/m","C2/m","P2/c","P2_1/c","C2/c","P222","P222_1","P2_12_12","P2_12_12_1","C222_1","C222","F222","I222","I2_12_12_1","Pmm2","Pmc2_1","Pcc2","Pma2","Pca2_1","Pnc2","Pmn2_1","Pba2","Pna2_1","Pnn2","Cmm2","Cmc2_1","Ccc2","Amm2","Aem2","Ama2","Aea2","Fmm2","Fdd2","Imm2","Iba2","Ima2","Pmmm","Pnnn","Pccm","Pban","Pmma","Pnna","Pmna","Pcca","Pbam","Pccn","Pbcm","Pnnm","Pmmn","Pbcn","Pbca","Pnma","Cmcm","Cmce","Cmmm","Cccm","Cmme","Ccce","Fmmm","Fddd","Immm","Ibam","Ibca","Imma","P4","P4_1","P4_2","P4_3","I4","I4_1","P-4","I-4","P4/m","P4_2/m","P4/n","P4_2/n","I4/m","I4_1/a","P422","P42_12","P4_122","P4_12_12","P4_222","P4_22_12","P4_322","P4_32_12","I422","I4_122","P4mm","P4bm","P4_2cm","P4_2nm","P4cc","P4nc","P4_2mc","P4_2bc","I4mm","I4cm","I4_1md","I4_1cd","P-42m","P-42c","P-42_1m","P-42_1c","P-4m2","P-4c2","P-4b2","P-4n2","I-4m2","I-4c2","I-42m","I-42d","P4/mmm","P4/mcc","P4/nbm","P4/nnc","P4/mbm","P4/mnc","P4/nmm","P4/ncc","P4_2/mmc","P4_2/mcm","P4_2/nbc","P4_2/nnm","P4_2/mbc","P4_2/mnm","P4_2/nmc","P4_2/ncm","I4/mmm","I4/mcm","I4_1/amd","I4_1/acd","P3","P3_1","P3_2","R3","P-3","R-3","P312","P321","P3_112","P3_121","P3_212","P3_221","R32","P3m1","P31m","P3c1","P31c","R3m","R3c","P-31m","P-31c","P-3m1","P-3c1","R-3m","R-3c","P6","P6_1","P6_5","P6_2","P6_4","P6_3","P-6","P6/m","P6_3/m","P622","P6_122","P6_522","P6_222","P6_422","P6_322","P6mm","P6cc","P6_3cm","P6_3mc","P-6m2","P-6c2","P-62m","P-62c","P6/mmm","P6/mcc","P6_3/mcm","P6_3/mmc","P23","F23","I23","P2_13","I2_13","Pm-3","Pn-3","Fm-3","Fd-3","Im-3","Pa-3","Ia-3","P432","P4_232","F432","F4_132","I432","P4_332","P4_132","I4_132","P-43m","F-43m","I-43m","P-43n","F-43c","I-43d","Pm-3m","Pn-3n","Pm-3n","Pn-3m","Fm-3m","Fm-3c","Fd-3m","Fd-3c","Im-3m","Ia-3d"];function bravaisLatticeFromSpgn(n){let h="";n<3?h="a":n<16?h="m":n<75?h="o":n<143?h="t":n<195?h="h":h="c";let s=spaceGroupSymbols[n].charAt(0);return h+s}function countNumberOfAtoms(n){var h=n.split(/(?=[A-Z])/),s=0;return h.forEach(_=>{let M=_.match(/\d+/),$=M==null?1:parseInt(M[0]);s+=$}),s}function countNumberOfElements(n){return n.split(/(?=[A-Z])/).length}function formatTitle(n,h,s){return jsxRuntimeExports.jsxs("span",{children:[Cu(n)," (",h,"/",s,")"]})}function format_aiida_prop(n,h,s,_=3,M=1){if(n==null)return jsxRuntimeExports.jsx("span",{children:"N/A"});let $=n.value??0;$*=M;let V=$.toFixed(_);return h.unit&&(V+=` ${h.unit}`),jsxRuntimeExports.jsxs("span",{children:[V," ",jsxRuntimeExports.jsx(Ou,{explore_url:EXPLORE_URLS[s],uuid:n.uuid??null})]})}const COLUMN_ORDER_AND_SETTINGS=[{field:"id",hide:!1,width:165,minWidth:160},{field:"formula",hide:!1,width:165,minWidth:160},{field:"formula_hill",hide:!0,width:165,minWidth:160},{field:"num_elements",hide:!1},{field:"num_atoms",hide:!1},{field:"bravais_lat",hide:!0},{field:"spacegroup_number",hide:!0},{field:"spacegroup_int",hide:!1},{field:"source_db",hide:!0},{field:"source_db_id",hide:!0},{field:"is_theoretical",hide:!1},{field:"is_high_pressure",hide:!1,minWidth:125},{field:"is_high_temperature",hide:!1,minWidth:125},{field:"total_magnetization",hide:!1},{field:"absolute_magnetization",hide:!0}],FRONTEND_COLUMNS=[{columnDef:{field:"num_atoms",headerName:"Num. of atoms/cell",colType:"integer"},calcFunc:n=>countNumberOfAtoms(n.formula_h)},{columnDef:{field:"num_elements",headerName:"Number of elements",colType:"integer"},calcFunc:n=>countNumberOfElements(n.formula_h)},{columnDef:{field:"bravais_lat",headerName:"Bravais lattice",colType:"text",infoText:"Bravais lattice in Pearson notation."},calcFunc:n=>bravaisLatticeFromSpgn(n.sg)},{columnDef:{field:"spacegroup_int",headerName:"Space group international",colType:"spg_symbol",infoText:"International short symbol for the space group."},calcFunc:n=>spaceGroupSymbols[n.sg]}];function formatColumns(n){let h=[{field:"id",headerName:"ID",colType:"id",infoText:"The unique MC3D identifier of each structure."}];n["index-columns"].forEach(_=>{h.push({field:_.label,headerName:_.name,unit:_.unit||null,colType:_.type||"text",infoText:_.description||null})}),FRONTEND_COLUMNS.forEach(_=>{h.some(M=>M.field===_.columnDef.field)||h.push(_.columnDef)});let s=[];return COLUMN_ORDER_AND_SETTINGS.forEach(_=>{let M=h.findIndex($=>$.field===_.field);if(M!==-1){let $=h[M];$.hide=_.hide,["width","minWidth"].forEach(V=>{V in _&&($[V]=_[V])}),s.push($),h.splice(M,1)}}),h.forEach(_=>{_.hide=!0,s.push(_)}),s}function formatRows(n,h,s){let _=[],M={};return h["index-columns"].forEach($=>{M[$.data_label]=$.label}),n.forEach($=>{let V=`${$.id}/${s}`,oe=`/#/details/${V}`,Y={};Object.entries($).map(([zn,Et])=>{zn in M&&(Y[M[zn]]=Et)});let ie={id:V,href:oe};FRONTEND_COLUMNS.forEach(zn=>{zn.columnDef.field in ie||(ie[zn.columnDef.field]=zn.calcFunc($))}),Y={...Y,...ie},_.push(Y)}),_}async function loadDataMc3d(n){let h=performance.now(),s=await loadIndex(n),_=performance.now();console.log(`loadIndex: ${_-h} ms`),h=performance.now();let M=await loadMetadata(n);_=performance.now(),console.log(`loadMetadata: ${_-h} ms`),h=performance.now();let $=formatRows(s,M,n);return _=performance.now(),console.log(`formatRows: ${_-h} ms`),{columns:formatColumns(M),rows:$}}var FileSaver_min$1={exports:{}},FileSaver_min=FileSaver_min$1.exports,hasRequiredFileSaver_min;function requireFileSaver_min(){return hasRequiredFileSaver_min||(hasRequiredFileSaver_min=1,(function(n,h){(function(s,_){_()})(FileSaver_min,function(){function s(ie,zn){return typeof zn>"u"?zn={autoBom:!1}:typeof zn!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),zn={autoBom:!zn}),zn.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ie.type)?new Blob(["\uFEFF",ie],{type:ie.type}):ie}function _(ie,zn,Et){var ml=new XMLHttpRequest;ml.open("GET",ie),ml.responseType="blob",ml.onload=function(){Y(ml.response,zn,Et)},ml.onerror=function(){console.error("could not download file")},ml.send()}function M(ie){var zn=new XMLHttpRequest;zn.open("HEAD",ie,!1);try{zn.send()}catch{}return 200<=zn.status&&299>=zn.status}function $(ie){try{ie.dispatchEvent(new MouseEvent("click"))}catch{var zn=document.createEvent("MouseEvents");zn.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),ie.dispatchEvent(zn)}}var V=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,oe=V.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),Y=V.saveAs||(typeof window!="object"||window!==V?function(){}:"download"in HTMLAnchorElement.prototype&&!oe?function(ie,zn,Et){var ml=V.URL||V.webkitURL,rl=document.createElement("a");zn=zn||ie.name||"download",rl.download=zn,rl.rel="noopener",typeof ie=="string"?(rl.href=ie,rl.origin===location.origin?$(rl):M(rl.href)?_(ie,zn,Et):$(rl,rl.target="_blank")):(rl.href=ml.createObjectURL(ie),setTimeout(function(){ml.revokeObjectURL(rl.href)},4e4),setTimeout(function(){$(rl)},0))}:"msSaveOrOpenBlob"in navigator?function(ie,zn,Et){if(zn=zn||ie.name||"download",typeof ie!="string")navigator.msSaveOrOpenBlob(s(ie,Et),zn);else if(M(ie))_(ie,zn,Et);else{var ml=document.createElement("a");ml.href=ie,ml.target="_blank",setTimeout(function(){$(ml)})}}:function(ie,zn,Et,ml){if(ml=ml||open("","_blank"),ml&&(ml.document.title=ml.document.body.innerText="downloading..."),typeof ie=="string")return _(ie,zn,Et);var rl=ie.type==="application/octet-stream",Ml=/constructor/i.test(V.HTMLElement)||V.safari,kl=/CriOS\/[\d]+/.test(navigator.userAgent);if((kl||rl&&Ml||oe)&&typeof FileReader<"u"){var _u=new FileReader;_u.onloadend=function(){var dl=_u.result;dl=kl?dl:dl.replace(/^data:[^;]*;/,"data:attachment/file;"),ml?ml.location.href=dl:location=dl,ml=null},_u.readAsDataURL(ie)}else{var Hu=V.URL||V.webkitURL,bu=Hu.createObjectURL(ie);ml?ml.location=bu:location.href=bu,ml=null,setTimeout(function(){Hu.revokeObjectURL(bu)},4e4)}});V.saveAs=Y.saveAs=Y,n.exports=Y})})(FileSaver_min$1)),FileSaver_min$1.exports}var FileSaver_minExports=requireFileSaver_min();const getCurrentDateString=()=>{const n=new Date,h=n.getFullYear(),s=String(n.getMonth()+1).padStart(2,"0"),_=String(n.getDate()).padStart(2,"0"),M=String(n.getHours()).padStart(2,"0"),$=String(n.getMinutes()).padStart(2,"0"),V=String(n.getSeconds()).padStart(2,"0");return`${h}-${s}-${_}-${M}-${$}-${V}`},popover$1=jsxRuntimeExports.jsxs(Popover$1,{id:"popover-basic",children:[jsxRuntimeExports.jsx(Popover$1.Header,{children:jsxRuntimeExports.jsx("b",{children:"Download filtered entries"})}),jsxRuntimeExports.jsx(Popover$1.Body,{style:{textAlign:"justify"},children:jsxRuntimeExports.jsxs("p",{children:["This button allows to download all currently filtered entries shown in the Materials Grid. The data is downloaded in JSON format, as an array. The array contains a JSON object for each material entry, with key-value pairs corresponding to the column properties. Additionally, each entry includes a link to the corresponding detail page and a link to download the file in CIF format. ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Note, to download all of the CIF files directly, see the corresponding Materials Cloud Archive entry."]})})]}),DownloadButton=({materialSelectorRef:n,disabled:h,methodLabel:s})=>{const[_,M]=reactExports.useState(!1),$=async()=>{if(n.current){M(!0);try{const V=await loadStructureUuids(s);let Y=n.current.getFilteredRows().map(ml=>{let rl=ml.id.split("/")[0],Ml=V[rl],kl=`${AIIDA_API_URLS[s]}/nodes/${Ml}/download?download_format=cif`,_u={...ml,details_link:`${window.location.origin}${ml.href}`,download_cif:kl};return delete _u.href,_u});const ie=JSON.stringify(Y,null,2),zn=new Blob([ie],{type:"application/json"}),Et=`mc3d_filtered_entries_${s}_${getCurrentDateString()}.json`;FileSaver_minExports.saveAs(zn,Et)}catch(V){console.error("Error downloading data:",V)}finally{M(!1)}}};return jsxRuntimeExports.jsxs("div",{className:"download-button-outer-container",children:[jsxRuntimeExports.jsx("button",{onClick:$,disabled:h||_,className:`aggrid-style-button ${h||_?"aggrid-style-button-disabled":""}`,style:{marginTop:"5px"},children:_?jsxRuntimeExports.jsx(Spinner,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Download filtered entries"}),jsxRuntimeExports.jsx(Eu,{popover:popover$1})]})},popover=jsxRuntimeExports.jsxs(Popover$1,{id:"popover-basic",children:[jsxRuntimeExports.jsx(Popover$1.Header,{children:jsxRuntimeExports.jsx("b",{children:"Datasets & views"})}),jsxRuntimeExports.jsxs(Popover$1.Body,{style:{textAlign:"justify"},children:[jsxRuntimeExports.jsxs("p",{children:["MC3D contains ",jsxRuntimeExports.jsx("b",{children:"structure datasets"})," - collections computed with one consistent computational approach. The label (e.g., ",jsxRuntimeExports.jsx("i",{children:"PBEsol-v1"}),") contains the physical methodology and a version suffix representing the computational protocol."]}),jsxRuntimeExports.jsxs("p",{children:["Structure datasets can have associated property contributions (e.g., Superconductivity), and the corresponding ",jsxRuntimeExports.jsx("b",{children:"property-based views"})," ","allow to sort and filter the relevant data."]}),jsxRuntimeExports.jsxs("p",{children:["Use the menu to select either a structure dataset or a property view. See the ",jsxRuntimeExports.jsx("b",{children:"About"})," tab and the publication for details."]})]})]}),MethodSelectionBox=n=>{let h={"pbesol-v2":"PBEsol-v2","pbesol-v1":"PBEsol-v1","pbe-v1":"PBE-v1"};Object.entries(h).forEach(([_,M])=>{n.genInfo?.["method-counts"]?.[_]!=null&&(h[_]+=` (${n.genInfo["method-counts"][_]})`)});const s=n.selectedDisplay||n.method;return jsxRuntimeExports.jsx("div",{className:"method-selection-box-outer",children:jsxRuntimeExports.jsxs("div",{className:"method-selection-box",children:[jsxRuntimeExports.jsx("p",{children:"Select a dataset or view:"}),jsxRuntimeExports.jsxs(Sa.Select,{size:"sm",value:s,onChange:n.handleMethodChange,style:{display:"inline-block",margin:"4px 6px 2px 6px",width:"auto",minWidth:"max-content"},children:[jsxRuntimeExports.jsx("optgroup",{label:"Structure datasets",children:Object.entries(h).map(([_,M])=>jsxRuntimeExports.jsx("option",{value:_,children:M},_))}),jsxRuntimeExports.jsxs("optgroup",{label:"Property-based views",children:[jsxRuntimeExports.jsx("option",{value:"superconductivity",children:"Superconductivity (PBEsol-v1)"}),jsxRuntimeExports.jsx("option",{value:"phonons",children:"Phonons (PBEsol-v1)"})]})]}),jsxRuntimeExports.jsx(Eu,{popover,placement:"bottom"})]})})};var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=dm.createContext&&dm.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(n,h){if(n==null)return{};var s=_objectWithoutPropertiesLoose(n,h),_,M;if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(n);for(M=0;M<$.length;M++)_=$[M],!(h.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(n,_)&&(s[_]=n[_])}return s}function _objectWithoutPropertiesLoose(n,h){if(n==null)return{};var s={};for(var _ in n)if(Object.prototype.hasOwnProperty.call(n,_)){if(h.indexOf(_)>=0)continue;s[_]=n[_]}return s}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var h=1;h<arguments.length;h++){var s=arguments[h];for(var _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(n[_]=s[_])}return n},_extends.apply(this,arguments)}function ownKeys(n,h){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(n);h&&(_=_.filter(function(M){return Object.getOwnPropertyDescriptor(n,M).enumerable})),s.push.apply(s,_)}return s}function _objectSpread(n){for(var h=1;h<arguments.length;h++){var s=arguments[h]!=null?arguments[h]:{};h%2?ownKeys(Object(s),!0).forEach(function(_){_defineProperty(n,_,s[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(_){Object.defineProperty(n,_,Object.getOwnPropertyDescriptor(s,_))})}return n}function _defineProperty(n,h,s){return h=_toPropertyKey(h),h in n?Object.defineProperty(n,h,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[h]=s,n}function _toPropertyKey(n){var h=_toPrimitive(n,"string");return typeof h=="symbol"?h:h+""}function _toPrimitive(n,h){if(typeof n!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var _=s.call(n,h);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(n)}function Tree2Element(n){return n&&n.map((h,s)=>dm.createElement(h.tag,_objectSpread({key:s},h.attr),Tree2Element(h.child)))}function GenIcon(n){return h=>dm.createElement(IconBase,_extends({attr:_objectSpread({},n.attr)},h),Tree2Element(n.child))}function IconBase(n){var h=s=>{var{attr:_,size:M,title:$}=n,V=_objectWithoutProperties(n,_excluded),oe=M||s.size||"1em",Y;return s.className&&(Y=s.className),n.className&&(Y=(Y?Y+" ":"")+n.className),dm.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,_,V,{className:Y,style:_objectSpread(_objectSpread({color:n.color||s.color},s.style),n.style),height:oe,width:oe,xmlns:"http://www.w3.org/2000/svg"}),$&&dm.createElement("title",null,$),n.children)};return IconContext!==void 0?dm.createElement(IconContext.Consumer,null,s=>h(s)):h(DefaultContext)}function FaBook(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(n)}const CitationText=({info:n})=>jsxRuntimeExports.jsxs("div",{style:{padding:"2px",display:"flex",gap:"6px",alignItems:"center"},children:[jsxRuntimeExports.jsxs("a",{className:"citation-a",href:`https://doi.org/${n.doi}`,target:"_blank",rel:"noopener noreferrer",children:[jsxRuntimeExports.jsx(FaBook,{size:16,color:"black"})," ",n.authorsText,", ",n.journalText,", (",n.year,")"]}),jsxRuntimeExports.jsx(wu,{doi:n.doi,label:"Paper DOI",color:"#a2e5b7"})]}),CITATION_MAPPING={Mounet18:{authorsText:"Mounet et al.",journalText:"Nat. Nanotech. 13, 246-252",doi:"10.1038/s41565-017-0035-5",year:2018},Campi23:{authorsText:"Campi et al.",journalText:"ACS Nano 17, 12, 11268-11278",doi:"10.1021/acsnano.2c11510",year:2023},MBercxSupercon25:{authorsText:"Bercx et al.",journalText:"PRX Energy 4, 033012 ",doi:"10.1103/sb28-fjc9",year:2025},HuberMc3d25:{authorsText:"Huber et al.",journalText:"arXiv:2508.19223",doi:"10.48550/arXiv.2508.19223",year:2025}},CitationsList=({citationLabels:n})=>jsxRuntimeExports.jsx("div",{style:{marginLeft:"8px"},children:n.map(h=>jsxRuntimeExports.jsx(CitationText,{info:CITATION_MAPPING[h]},h))}),PRESETS={superconductivity:{sort:"isotropic_tc:desc",method:"pbesol-v1",showColumns:["id","formula","num_atoms","spacegroup_int","isotropic_tc","anisotropic_tc","allen_dynes_tc","highest_phonon_frequency"],filterColumns:["allen_dynes_tc"]},phonons:{sort:"matdyn_highest_phonon_frequency:desc",method:"pbesol-v1",showColumns:["id","formula","num_elements","num_atoms","spacegroup_int","matdyn_highest_phonon_frequency"],filterColumns:["matdyn_highest_phonon_frequency"]}};function getColumnConfigFromUrlParams(n){const h=n.get("sort"),s=n.get("show"),_=n.get("hide"),M=n.get("preset");let $=[],V=[],oe=[];if(M&&PRESETS[M]){const Y=PRESETS[M];$=parseSortParam(Y.sort),V=Y.showColumns||[],console.log("showFields",V),oe=null}else s&&(V=s.split(",")),_&&(oe=_.split(",")),$=parseSortParam(h);return{sortEntries:$,showFields:V,hiddenFields:oe}}function parseSortParam(n){return n?n.split(",").map((h,s)=>{const[_,M]=h.split(":");return{field:_,sort:M||"asc",sortIndex:s}}):[]}function updateColumnState(n,h,s,_){const M=s===null;return n.map($=>{const V={...$},oe=h.find(Y=>Y.field===$.field);return oe&&(V.sort=oe.sort,V.sortIndex=oe.sortIndex),M?V.hide=!_.includes($.field):s.includes($.field)?V.hide=!0:_.includes($.field)&&(V.hide=!1),V})}function getMethodFromPreset(n){if(!n)return null;const h=PRESETS[n];return h?h.method:null}function getMethodFromUrl(n,h){const s=n.get("method");if(s)return s;const _=n.get("preset");return _&&PRESETS[_]&&PRESETS[_].method?PRESETS[_].method:h}function updateColumnsFromUrl(n,h){const{sortEntries:s,hiddenFields:_,showFields:M}=getColumnConfigFromUrlParams(h);return updateColumnState(n,s,_,M)}function getPresetColumnFilters(n){return!n||!PRESETS[n]?{}:(PRESETS[n].filterColumns||[]).reduce((h,s)=>(h[s]={filterType:"text",type:"notBlank"},h),{})}const DEFAULT_METHOD="pbesol-v2",sessionDataCache={};function MainPage(){const n=new URLSearchParams(window.location.search),[h,s]=reactExports.useState(null),[_,M]=reactExports.useState([]),[$,V]=reactExports.useState([]),oe=n.get("preset")||null,Y=oe?getMethodFromPreset(oe):getMethodFromUrl(n,DEFAULT_METHOD),ie=getPresetColumnFilters(oe),zn=reactExports.useRef(null);reactExports.useEffect(()=>{loadGeneralInfo().then(s)},[]),reactExports.useEffect(()=>{const ml=oe||Y;if(sessionDataCache[ml]){const rl=sessionDataCache[ml];M(updateColumnsFromUrl(rl.columns,n)),V(rl.rows);return}loadDataMc3d(Y).then(rl=>{sessionDataCache[ml]=rl;const Ml=updateColumnsFromUrl(rl.columns,n);M(Ml),V(rl.rows)})},[Y,oe]);const Et=ml=>{const rl=ml.target.value,Ml=new URL(window.location);rl==="superconductivity"||rl==="phonons"?(Ml.searchParams.set("preset",rl),Ml.searchParams.delete("method")):(Ml.searchParams.set("method",rl),Ml.searchParams.delete("preset")),window.history.pushState({},"",Ml.toString()),V([])};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MaterialsCloudHeader,{className:"header",activeSection:"discover",breadcrumbsPath:[{name:"Discover",link:"https://www.materialscloud.org/discover"},{name:"Materials Cloud Three-Dimensional Structure Database",link:null}]}),jsxRuntimeExports.jsxs(Container,{fluid:"xxl",children:[jsxRuntimeExports.jsx(TitleAndLogo,{}),jsxRuntimeExports.jsxs("div",{className:"description",children:["The Materials Cloud Three-Dimensional Structure Database is a curated dataset of unique, stoichiometric, experimentally known inorganic compounds, and of their calculated properties. Structures have been obtained with fully-relaxed density-functional theory calculations, starting from experimental ones imported, cleaned and parsed from the MPDS, COD and ICSD databases. For more details, please see the related publication:",jsxRuntimeExports.jsx("div",{style:{margin:"10px"},children:jsxRuntimeExports.jsx(CitationsList,{citationLabels:["HuberMc3d25"]})})]}),jsxRuntimeExports.jsxs(Tabs,{defaultActiveKey:"use",children:[jsxRuntimeExports.jsxs(Tab$1,{eventKey:"use",title:"Use",children:[jsxRuntimeExports.jsx(MethodSelectionBox,{genInfo:h,method:Y,selectedDisplay:oe||null,handleMethodChange:Et}),jsxRuntimeExports.jsx(MaterialSelector,{ref:zn,columns:_,rows:$,columnFilters:ie}),jsxRuntimeExports.jsx(DownloadButton,{materialSelectorRef:zn,disabled:$.length==0,methodLabel:Y})]}),jsxRuntimeExports.jsx(Tab$1,{eventKey:"about",title:"About",children:aboutText}),jsxRuntimeExports.jsx(Tab$1,{eventKey:"rest",title:"REST API",children:restapiText})]})]})]})}const ControlBox=({viewerParams:n,onViewerParamChange:h,onViewerEvent:s})=>{const _=(V,oe)=>{let Y=n.supercell;Y[V]=parseInt(oe),h("supercell",Y)},M=V=>{h(V,!n[V])},$=V=>{s("camera",V)};return jsxRuntimeExports.jsxs("div",{className:"control-box",children:[jsxRuntimeExports.jsxs("div",{className:"control-box-row",children:[jsxRuntimeExports.jsxs("div",{className:"supercell-container",children:[jsxRuntimeExports.jsx("label",{children:"Supercell: "}),jsxRuntimeExports.jsx("div",{style:{display:"flex"},children:[0,1,2].map(V=>jsxRuntimeExports.jsx("input",{className:"supercell-input",type:"number",min:"1",max:"99",value:n.supercell[V],onChange:oe=>_(V,oe.target.value)},V))})]}),jsxRuntimeExports.jsxs("div",{className:"camera-controls",children:[jsxRuntimeExports.jsx("label",{children:"Camera: "}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>$("x"),children:"x"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>$("y"),children:"y"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>$("z"),children:"z"})]})]}),jsxRuntimeExports.jsxs("div",{className:"control-box-row",style:{display:"flex"},children:[jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:n.bonds,onChange:()=>M("bonds")}),jsxRuntimeExports.jsx("span",{children:"Bonds"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:n.packedCell,onChange:()=>M("packedCell")}),jsxRuntimeExports.jsx("span",{children:"Packed cell"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:n.atomLabels,onChange:()=>M("atomLabels")}),jsxRuntimeExports.jsx("span",{children:"Atom labels"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:n.spaceFilling,onChange:()=>M("vdwRadius")}),jsxRuntimeExports.jsx("span",{children:"vdW radius"})]})]})]})};var _3DmolMin={exports:{}};/*! For license information please see 3Dmol-min.js.LICENSE.txt */var hasRequired_3DmolMin;function require_3DmolMin(){return hasRequired_3DmolMin||(hasRequired_3DmolMin=1,(function(module,exports){var factory;factory=()=>(()=>{var __webpack_modules__={3:(n,h,s)=>{var _=s(663),M=s(981),$=s(972),V=s(681),oe=s(834),Y=s(746),ie=s(670),zn=Object.prototype.toString;function Et(rl){if(!(this instanceof Et))return new Et(rl);this.options=M.assign({chunkSize:16384,windowBits:0,to:""},rl||{});var Ml=this.options;Ml.raw&&Ml.windowBits>=0&&Ml.windowBits<16&&(Ml.windowBits=-Ml.windowBits,Ml.windowBits===0&&(Ml.windowBits=-15)),!(Ml.windowBits>=0&&Ml.windowBits<16)||rl&&rl.windowBits||(Ml.windowBits+=32),Ml.windowBits>15&&Ml.windowBits<48&&(15&Ml.windowBits||(Ml.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Y,this.strm.avail_out=0;var kl=_.inflateInit2(this.strm,Ml.windowBits);if(kl!==V.Z_OK)throw new Error(oe[kl]);if(this.header=new ie,_.inflateGetHeader(this.strm,this.header),Ml.dictionary&&(typeof Ml.dictionary=="string"?Ml.dictionary=$.string2buf(Ml.dictionary):zn.call(Ml.dictionary)==="[object ArrayBuffer]"&&(Ml.dictionary=new Uint8Array(Ml.dictionary)),Ml.raw&&(kl=_.inflateSetDictionary(this.strm,Ml.dictionary))!==V.Z_OK))throw new Error(oe[kl])}function ml(rl,Ml){var kl=new Et(Ml);if(kl.push(rl,!0),kl.err)throw kl.msg||oe[kl.err];return kl.result}Et.prototype.push=function(rl,Ml){var kl,_u,Hu,bu,dl,Tl=this.strm,$l=this.options.chunkSize,Bl=this.options.dictionary,Pu=!1;if(this.ended)return!1;_u=Ml===~~Ml?Ml:Ml===!0?V.Z_FINISH:V.Z_NO_FLUSH,typeof rl=="string"?Tl.input=$.binstring2buf(rl):zn.call(rl)==="[object ArrayBuffer]"?Tl.input=new Uint8Array(rl):Tl.input=rl,Tl.next_in=0,Tl.avail_in=Tl.input.length;do{if(Tl.avail_out===0&&(Tl.output=new M.Buf8($l),Tl.next_out=0,Tl.avail_out=$l),(kl=_.inflate(Tl,V.Z_NO_FLUSH))===V.Z_NEED_DICT&&Bl&&(kl=_.inflateSetDictionary(this.strm,Bl)),kl===V.Z_BUF_ERROR&&Pu===!0&&(kl=V.Z_OK,Pu=!1),kl!==V.Z_STREAM_END&&kl!==V.Z_OK)return this.onEnd(kl),this.ended=!0,!1;Tl.next_out&&(Tl.avail_out!==0&&kl!==V.Z_STREAM_END&&(Tl.avail_in!==0||_u!==V.Z_FINISH&&_u!==V.Z_SYNC_FLUSH)||(this.options.to==="string"?(Hu=$.utf8border(Tl.output,Tl.next_out),bu=Tl.next_out-Hu,dl=$.buf2string(Tl.output,Hu),Tl.next_out=bu,Tl.avail_out=$l-bu,bu&&M.arraySet(Tl.output,Tl.output,Hu,bu,0),this.onData(dl)):this.onData(M.shrinkBuf(Tl.output,Tl.next_out)))),Tl.avail_in===0&&Tl.avail_out===0&&(Pu=!0)}while((Tl.avail_in>0||Tl.avail_out===0)&&kl!==V.Z_STREAM_END);return kl===V.Z_STREAM_END&&(_u=V.Z_FINISH),_u===V.Z_FINISH?(kl=_.inflateEnd(this.strm),this.onEnd(kl),this.ended=!0,kl===V.Z_OK):_u!==V.Z_SYNC_FLUSH||(this.onEnd(V.Z_OK),Tl.avail_out=0,!0)},Et.prototype.onData=function(rl){this.chunks.push(rl)},Et.prototype.onEnd=function(rl){rl===V.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=M.flattenChunks(this.chunks)),this.chunks=[],this.err=rl,this.msg=this.strm.msg},h.Inflate=Et,h.inflate=ml,h.inflateRaw=function(rl,Ml){return(Ml=Ml||{}).raw=!0,ml(rl,Ml)},h.ungzip=ml},16:(n,h,s)=>{s.r(h),s.d(h,{CAP:()=>_,CC:()=>ie.CC,CONTEXTS_PER_VIEWPORT:()=>rf,Color:()=>ie.Color,CustomLinear:()=>zn.CustomLinear,Cylinder:()=>oe.Cylinder,GLDraw:()=>M,GLModel:()=>lg,GLShape:()=>ph,GLViewer:()=>xf,GLVolumetricRender:()=>Bp,Gradient:()=>zn.Gradient,GradientType:()=>zn.GradientType,Label:()=>of,LabelCount:()=>_p,MarchingCube:()=>rt,MarchingCubeInitializer:()=>Kp,Matrix3:()=>Y.Matrix3,Matrix4:()=>Y.Matrix4,Parsers:()=>uf,PausableTimer:()=>Et.PausableTimer,PointGrid:()=>Uu,ProteinSurface:()=>Vd,Quaternion:()=>Y.Quaternion,ROYGB:()=>zn.ROYGB,RWB:()=>zn.RWB,Ray:()=>Y.Ray,Sinebow:()=>zn.Sinebow,Sphere:()=>oe.Sphere,SurfaceType:()=>sm,Triangle:()=>oe.Triangle,Vector2:()=>Y.Vector2,Vector3:()=>Y.Vector3,VolumeData:()=>Eh.VolumeData,adjustVolumeStyle:()=>Et.adjustVolumeStyle,applyPartialCharges:()=>Mm,autoinit:()=>Vf,autoload:()=>Kg,base64ToArray:()=>Et.base64ToArray,bondLength:()=>lh.bondLength,builtinColorSchemes:()=>ie.builtinColorSchemes,builtinGradients:()=>zn.builtinGradients,chains:()=>ie.chains,clamp:()=>Y.clamp,conversionMatrix3:()=>Y.conversionMatrix3,createStereoViewer:()=>Fm,createViewer:()=>Ng,createViewerGrid:()=>em,deepCopy:()=>Et.deepCopy,degToRad:()=>Y.degToRad,download:()=>Et.download,drawCartoon:()=>rh,elementColors:()=>ie.elementColors,extend:()=>Et.extend,get:()=>Et.get,getAtomProperty:()=>Et.getAtomProperty,getColorFromStyle:()=>Et.getColorFromStyle,getElement:()=>Et.getElement,getExtent:()=>Et.getExtent,getGradient:()=>zn.getGradient,getPropertyRange:()=>Et.getPropertyRange,getbin:()=>Et.getbin,htmlColors:()=>ie.htmlColors,inflateString:()=>Et.inflateString,isEmptyObject:()=>Et.isEmptyObject,isNumeric:()=>Et.isNumeric,makeFunction:()=>Et.makeFunction,mergeGeos:()=>Et.mergeGeos,normalizeValue:()=>zn.normalizeValue,partialCharges:()=>If,processing_autoinit:()=>Yg,residues:()=>ie.residues,setBondLength:()=>lh.setBondLength,setSyncSurface:()=>S0,specStringToObject:()=>Et.specStringToObject,splitMesh:()=>jp,ssColors:()=>ie.ssColors,subdivide_spline:()=>ml,syncSurface:()=>Cg,viewers:()=>$f});var _,M,$=s(111),V=s(378),oe=s(99),Y=s(529),ie=s(222);(function(dd){dd[dd.NONE=0]="NONE",dd[dd.FLAT=1]="FLAT",dd[dd.ROUND=2]="ROUND"})(_||(_={})),(function(dd){function f(Q,yl,Ln){var Cl,Al,vl,Fl,Ol,mu=Math.hypot(Q,yl);mu<1e-4?(Al=0,vl=1):(Al=-Q/mu,vl=yl/mu),yl=-Al*Q+vl*yl,(Cl=Math.hypot(yl,Ln))<1e-4?(Fl=0,Ol=1):(Fl=Ln/Cl,Ol=yl/Cl);var Xl=new Float32Array(9);return Xl[0]=vl,Xl[1]=Al,Xl[2]=0,Xl[3]=-Al*Ol,Xl[4]=vl*Ol,Xl[5]=Fl,Xl[6]=Al*Fl,Xl[7]=-vl*Fl,Xl[8]=Ol,Xl}var E=new class{constructor(){this.cache={};let Q,yl=[],Ln=Math.pow(2,4),Cl=2,Al=Math.pow(2,Cl),vl=Ln/Al;for(yl[0]=new Y.Vector3(-1,0,0),yl[vl]=new Y.Vector3(0,0,1),yl[2*vl]=new Y.Vector3(1,0,0),yl[3*vl]=new Y.Vector3(0,0,-1),Cl=3;Cl<=4;Cl++){for(Al=Math.pow(2,Cl-1),vl=Ln/Al,Q=0;Q<Al-1;Q++)yl[vl/2+Q*vl]=yl[Q*vl].clone().add(yl[(Q+1)*vl]).normalize();Q=Al-1,yl[vl/2+Q*vl]=yl[Q*vl].clone().add(yl[0]).normalize()}this.basisVectors=yl}getVerticesForRadius(Q,yl,Ln){if(this.cache!==void 0&&this.cache[Q]!==void 0&&this.cache[Q][yl+Ln]!==void 0)return this.cache[Q][yl+Ln];for(var Cl,Al=this.basisVectors.length,vl=[],Fl=[],Ol=0;Ol<Al;Ol++)vl.push(this.basisVectors[Ol].clone().multiplyScalar(Q)),vl.push(this.basisVectors[Ol].clone().multiplyScalar(Q)),Cl=this.basisVectors[Ol].clone().normalize(),Fl.push(Cl),Fl.push(Cl);var mu,Xl,Wl=[],hu=10,Jl=Al,Gu=2*Math.PI,Zu=Math.PI,rd=!1,wd=!1;for(Xl=0;Xl<=hu;Xl++){rd=Xl===0||Xl===hu,wd=Xl===5;var gd=[],jd=[];for(mu=0;mu<=Jl;mu++)if(wd){var Qd=mu<Jl?2*mu:0;jd.push(Qd+1),gd.push(Qd)}else{var ih=mu/Jl,Hl=Xl/hu;if(rd&&mu!==0)rd&&gd.push(vl.length-1);else if(mu<Jl){var Iu=new Y.Vector3;Iu.x=-Q*Math.cos(0+ih*Gu)*Math.sin(0+Hl*Zu),Iu.y=yl==1?0:Q*Math.cos(0+Hl*Zu),Iu.z=Q*Math.sin(0+ih*Gu)*Math.sin(0+Hl*Zu),Math.abs(Iu.x)<1e-5&&(Iu.x=0),Math.abs(Iu.y)<1e-5&&(Iu.y=0),Math.abs(Iu.z)<1e-5&&(Iu.z=0),yl==_.FLAT?(Cl=new Y.Vector3(0,Math.cos(0+Hl*Zu),0)).normalize():(Cl=new Y.Vector3(Iu.x,Iu.y,Iu.z)).normalize(),vl.push(Iu),Fl.push(Cl),gd.push(vl.length-1)}else gd.push(vl.length-Jl)}wd&&Wl.push(jd),Wl.push(gd)}var Fd={vertices:vl,normals:Fl,verticesRows:Wl,w:Jl,h:hu};return Q in this.cache||(this.cache[Q]={}),this.cache[Q][yl+Ln]=Fd,Fd}};dd.drawCylinder=function(Q,yl,Ln,Cl,Al,vl=0,Fl=0){if(!yl||!Ln)return;let Ol=function(Od){if(typeof Od=="string"){let Md=Od;return Md.toLowerCase()=="flat"?_.FLAT:Md.toLowerCase()=="round"?_.ROUND:_.NONE}return Od};vl=Ol(vl);var mu=(Fl=Ol(Fl))||vl;Al=Al||{r:0,g:0,b:0};var Xl,Wl,hu,Jl,Gu,Zu,rd=f(Ln.x-yl.x,Ln.y-yl.y,Ln.z-yl.z),wd=E.getVerticesForRadius(Cl,Fl,"to"),gd=wd.w,jd=wd.h,Qd=mu?jd*gd+2:2*gd,ih=Q.updateGeoGroup(Qd),Hl=wd.vertices,Iu=wd.normals,Fd=wd.verticesRows,Ud=Fd[jd/2],eh=Fd[jd/2+1],Sh=ih.vertices,Lh=ih.vertexArray,Ah=ih.normalArray,yh=ih.colorArray,Nh=ih.faceArray;for(hu=0;hu<gd;++hu){var sh=2*hu;Jl=rd[0]*Hl[sh].x+rd[3]*Hl[sh].y+rd[6]*Hl[sh].z,Gu=rd[1]*Hl[sh].x+rd[4]*Hl[sh].y+rd[7]*Hl[sh].z,Zu=rd[5]*Hl[sh].y+rd[8]*Hl[sh].z,Xl=3*(Sh+sh),Wl=ih.faceidx,Lh[Xl]=Jl+yl.x,Lh[Xl+1]=Gu+yl.y,Lh[Xl+2]=Zu+yl.z,Lh[Xl+3]=Jl+Ln.x,Lh[Xl+4]=Gu+Ln.y,Lh[Xl+5]=Zu+Ln.z,Ah[Xl]=Jl,Ah[Xl+3]=Jl,Ah[Xl+1]=Gu,Ah[Xl+4]=Gu,Ah[Xl+2]=Zu,Ah[Xl+5]=Zu,yh[Xl]=Al.r,yh[Xl+3]=Al.r,yh[Xl+1]=Al.g,yh[Xl+4]=Al.g,yh[Xl+2]=Al.b,yh[Xl+5]=Al.b,Nh[Wl]=eh[hu]+Sh,Nh[Wl+1]=eh[hu+1]+Sh,Nh[Wl+2]=Ud[hu]+Sh,Nh[Wl+3]=Ud[hu]+Sh,Nh[Wl+4]=eh[hu+1]+Sh,Nh[Wl+5]=Ud[hu+1]+Sh,ih.faceidx+=6}if(mu){var Th,dp,$h,ap,Yh,Mh,pp,Ip,gp,Xh,Qp,Wp,$p,Hp,Vp,Op,Jp,Df,tm,og,tg,Zf,Xf,Nf,ag,vg,Pg,cg,kg,Bf,Tg,gg,ve=vl?jd+1:jd/2+1;for(Gu=Fl?0:jd/2;Gu<ve;Gu++)if(Gu!==jd/2){var zu=Gu<=jd/2?Ln:yl,el=E.getVerticesForRadius(Cl,Fl,"to"),Bd=E.getVerticesForRadius(Cl,vl,"from");for(zu===Ln?(Hl=el.vertices,Iu=el.normals,Fd=el.verticesRows):zu==yl&&(Hl=Bd.vertices,Iu=Bd.normals,Fd=Bd.verticesRows),Jl=0;Jl<gd;Jl++)Wl=ih.faceidx,kg=3*((Th=Fd[Gu][Jl+1])+Sh),Bf=3*((dp=Fd[Gu][Jl])+Sh),Tg=3*(($h=Fd[Gu+1][Jl])+Sh),gg=3*((ap=Fd[Gu+1][Jl+1])+Sh),Yh=rd[0]*Hl[Th].x+rd[3]*Hl[Th].y+rd[6]*Hl[Th].z,Mh=rd[0]*Hl[dp].x+rd[3]*Hl[dp].y+rd[6]*Hl[dp].z,pp=rd[0]*Hl[$h].x+rd[3]*Hl[$h].y+rd[6]*Hl[$h].z,Ip=rd[0]*Hl[ap].x+rd[3]*Hl[ap].y+rd[6]*Hl[ap].z,gp=rd[1]*Hl[Th].x+rd[4]*Hl[Th].y+rd[7]*Hl[Th].z,Xh=rd[1]*Hl[dp].x+rd[4]*Hl[dp].y+rd[7]*Hl[dp].z,Qp=rd[1]*Hl[$h].x+rd[4]*Hl[$h].y+rd[7]*Hl[$h].z,Wp=rd[1]*Hl[ap].x+rd[4]*Hl[ap].y+rd[7]*Hl[ap].z,$p=rd[5]*Hl[Th].y+rd[8]*Hl[Th].z,Hp=rd[5]*Hl[dp].y+rd[8]*Hl[dp].z,Vp=rd[5]*Hl[$h].y+rd[8]*Hl[$h].z,Op=rd[5]*Hl[ap].y+rd[8]*Hl[ap].z,Lh[kg]=Yh+zu.x,Lh[Bf]=Mh+zu.x,Lh[Tg]=pp+zu.x,Lh[gg]=Ip+zu.x,Lh[kg+1]=gp+zu.y,Lh[Bf+1]=Xh+zu.y,Lh[Tg+1]=Qp+zu.y,Lh[gg+1]=Wp+zu.y,Lh[kg+2]=$p+zu.z,Lh[Bf+2]=Hp+zu.z,Lh[Tg+2]=Vp+zu.z,Lh[gg+2]=Op+zu.z,yh[kg]=Al.r,yh[Bf]=Al.r,yh[Tg]=Al.r,yh[gg]=Al.r,yh[kg+1]=Al.g,yh[Bf+1]=Al.g,yh[Tg+1]=Al.g,yh[gg+1]=Al.g,yh[kg+2]=Al.b,yh[Bf+2]=Al.b,yh[Tg+2]=Al.b,yh[gg+2]=Al.b,Jp=rd[0]*Iu[Th].x+rd[3]*Iu[Th].y+rd[6]*Iu[Th].z,Df=rd[0]*Iu[dp].x+rd[3]*Iu[dp].y+rd[6]*Iu[dp].z,tm=rd[0]*Iu[$h].x+rd[3]*Iu[$h].y+rd[6]*Iu[$h].z,og=rd[0]*Iu[ap].x+rd[3]*Iu[ap].y+rd[6]*Iu[ap].z,tg=rd[1]*Iu[Th].x+rd[4]*Iu[Th].y+rd[7]*Iu[Th].z,Zf=rd[1]*Iu[dp].x+rd[4]*Iu[dp].y+rd[7]*Iu[dp].z,Xf=rd[1]*Iu[$h].x+rd[4]*Iu[$h].y+rd[7]*Iu[$h].z,Nf=rd[1]*Iu[ap].x+rd[4]*Iu[ap].y+rd[7]*Iu[ap].z,ag=rd[5]*Iu[Th].y+rd[8]*Iu[Th].z,vg=rd[5]*Iu[dp].y+rd[8]*Iu[dp].z,Pg=rd[5]*Iu[$h].y+rd[8]*Iu[$h].z,cg=rd[5]*Iu[ap].y+rd[8]*Iu[ap].z,Gu===0?(Ah[kg]=Jp,Ah[Tg]=tm,Ah[gg]=og,Ah[kg+1]=tg,Ah[Tg+1]=Xf,Ah[gg+1]=Nf,Ah[kg+2]=ag,Ah[Tg+2]=Pg,Ah[gg+2]=cg,Nh[Wl]=Th+Sh,Nh[Wl+1]=$h+Sh,Nh[Wl+2]=ap+Sh,ih.faceidx+=3):Gu===ve-1?(Ah[kg]=Jp,Ah[Bf]=Df,Ah[Tg]=tm,Ah[kg+1]=tg,Ah[Bf+1]=Zf,Ah[Tg+1]=Xf,Ah[kg+2]=ag,Ah[Bf+2]=vg,Ah[Tg+2]=Pg,Nh[Wl]=Th+Sh,Nh[Wl+1]=dp+Sh,Nh[Wl+2]=$h+Sh,ih.faceidx+=3):(Ah[kg]=Jp,Ah[Bf]=Df,Ah[gg]=og,Ah[kg+1]=tg,Ah[Bf+1]=Zf,Ah[gg+1]=Nf,Ah[kg+2]=ag,Ah[Bf+2]=vg,Ah[gg+2]=cg,Ah[Bf]=Df,Ah[Tg]=tm,Ah[gg]=og,Ah[Bf+1]=Zf,Ah[Tg+1]=Xf,Ah[gg+1]=Nf,Ah[Bf+2]=vg,Ah[Tg+2]=Pg,Ah[gg+2]=cg,Nh[Wl]=Th+Sh,Nh[Wl+1]=dp+Sh,Nh[Wl+2]=ap+Sh,Nh[Wl+3]=dp+Sh,Nh[Wl+4]=$h+Sh,Nh[Wl+5]=ap+Sh,ih.faceidx+=6)}}ih.vertices+=Qd},dd.drawCone=function(Q,yl,Ln,Cl,Al){if(!yl||!Ln)return;Al=Al||{r:0,g:0,b:0};let vl=new Y.Vector3(Ln.x-yl.x,Ln.y-yl.y,Ln.z-yl.z);var Fl=f(vl.x,vl.y,vl.z);vl=vl.normalize();var Ol,mu,Xl,Wl,hu,Jl,Gu=E.basisVectors.length,Zu=E.basisVectors,rd=Gu+2,wd=Q.updateGeoGroup(rd),gd=wd.vertices,jd=wd.vertexArray,Qd=wd.normalArray,ih=wd.colorArray,Hl=wd.faceArray;for(jd[Ol=3*gd]=yl.x,jd[Ol+1]=yl.y,jd[Ol+2]=yl.z,Qd[Ol]=-vl.x,Qd[Ol+1]=-vl.y,Qd[Ol+2]=-vl.z,ih[Ol]=Al.r,ih[Ol+1]=Al.g,ih[Ol+2]=Al.b,jd[Ol+3]=Ln.x,jd[Ol+4]=Ln.y,jd[Ol+5]=Ln.z,Qd[Ol+3]=vl.x,Qd[Ol+4]=vl.y,Qd[Ol+5]=vl.z,ih[Ol+3]=Al.r,ih[Ol+4]=Al.g,ih[Ol+5]=Al.b,Ol+=6,Xl=0;Xl<Gu;++Xl){var Iu=Zu[Xl].clone();Iu.multiplyScalar(Cl),Wl=Fl[0]*Iu.x+Fl[3]*Iu.y+Fl[6]*Iu.z,hu=Fl[1]*Iu.x+Fl[4]*Iu.y+Fl[7]*Iu.z,Jl=Fl[5]*Iu.y+Fl[8]*Iu.z,jd[Ol]=Wl+yl.x,jd[Ol+1]=hu+yl.y,jd[Ol+2]=Jl+yl.z,Qd[Ol]=Wl,Qd[Ol+1]=hu,Qd[Ol+2]=Jl,ih[Ol]=Al.r,ih[Ol+1]=Al.g,ih[Ol+2]=Al.b,Ol+=3}for(wd.vertices+=Gu+2,mu=wd.faceidx,Xl=0;Xl<Gu;Xl++){var Fd=gd+2+Xl,Ud=gd+2+(Xl+1)%Gu;Hl[mu]=Fd,Hl[mu+1]=Ud,Hl[mu+2]=gd,Hl[mu+=3]=Fd,Hl[mu+1]=Ud,Hl[mu+2]=gd+1,mu+=3}wd.faceidx+=6*Gu};var W=new class{constructor(){this.cache=new Map}getVerticesForRadius(Q,yl){yl=yl||2,this.cache.has(yl)||this.cache.set(yl,new Map);let Ln=this.cache.get(yl);if(Ln.has(Q))return Ln.get(Q);var Cl={vertices:[],verticesRows:[],normals:[]},Al=16*yl,vl=10*yl;Q<1&&(Al=10*yl,vl=8*yl);var Fl,Ol,mu=2*Math.PI,Xl=Math.PI;for(Ol=0;Ol<=vl;Ol++){let hu=[];for(Fl=0;Fl<=Al;Fl++){let Jl=Fl/Al,Gu=Ol/vl,Zu=-Q*Math.cos(0+Jl*mu)*Math.sin(0+Gu*Xl),rd=Q*Math.cos(0+Gu*Xl),wd=Q*Math.sin(0+Jl*mu)*Math.sin(0+Gu*Xl);var Wl=new Y.Vector3(Zu,rd,wd);Wl.normalize(),Cl.vertices.push({x:Zu,y:rd,z:wd}),Cl.normals.push(Wl),hu.push(Cl.vertices.length-1)}Cl.verticesRows.push(hu)}return Ln.set(Q,Cl),Cl}};dd.drawSphere=function(Q,yl,Ln,Cl,Al){var vl=W.getVerticesForRadius(Ln,Al),Fl=vl.vertices,Ol=vl.normals,mu=Q.updateGeoGroup(Fl.length),Xl=mu.vertices,Wl=mu.vertexArray,hu=mu.colorArray,Jl=mu.faceArray,Gu=mu.lineArray,Zu=mu.normalArray;for(let gd=0,jd=Fl.length;gd<jd;++gd){let Qd=3*(Xl+gd),ih=Fl[gd];Wl[Qd]=ih.x+yl.x,Wl[Qd+1]=ih.y+yl.y,Wl[Qd+2]=ih.z+yl.z,hu[Qd]=Cl.r,hu[Qd+1]=Cl.g,hu[Qd+2]=Cl.b}mu.vertices+=Fl.length;let rd=vl.verticesRows,wd=rd.length-1;for(let gd=0;gd<wd;gd++){let jd=rd[gd].length-1;for(let Qd=0;Qd<jd;Qd++){let ih=mu.faceidx,Hl=mu.lineidx,Iu=rd[gd][Qd+1]+Xl,Fd=3*Iu,Ud=rd[gd][Qd]+Xl,eh=3*Ud,Sh=rd[gd+1][Qd]+Xl,Lh=3*Sh,Ah=rd[gd+1][Qd+1]+Xl,yh=3*Ah,Nh=Ol[Iu-Xl],sh=Ol[Ud-Xl],Th=Ol[Sh-Xl],dp=Ol[Ah-Xl];Math.abs(Fl[Iu-Xl].y)===Ln?(Zu[Fd]=Nh.x,Zu[Lh]=Th.x,Zu[yh]=dp.x,Zu[Fd+1]=Nh.y,Zu[Lh+1]=Th.y,Zu[yh+1]=dp.y,Zu[Fd+2]=Nh.z,Zu[Lh+2]=Th.z,Zu[yh+2]=dp.z,Jl[ih]=Iu,Jl[ih+1]=Sh,Jl[ih+2]=Ah,Gu[Hl]=Iu,Gu[Hl+1]=Sh,Gu[Hl+2]=Iu,Gu[Hl+3]=Ah,Gu[Hl+4]=Sh,Gu[Hl+5]=Ah,mu.faceidx+=3,mu.lineidx+=6):Math.abs(Fl[Sh-Xl].y)===Ln?(Zu[Fd]=Nh.x,Zu[eh]=sh.x,Zu[Lh]=Th.x,Zu[Fd+1]=Nh.y,Zu[eh+1]=sh.y,Zu[Lh+1]=Th.y,Zu[Fd+2]=Nh.z,Zu[eh+2]=sh.z,Zu[Lh+2]=Th.z,Jl[ih]=Iu,Jl[ih+1]=Ud,Jl[ih+2]=Sh,Gu[Hl]=Iu,Gu[Hl+1]=Ud,Gu[Hl+2]=Iu,Gu[Hl+3]=Sh,Gu[Hl+4]=Ud,Gu[Hl+5]=Sh,mu.faceidx+=3,mu.lineidx+=6):(Zu[Fd]=Nh.x,Zu[eh]=sh.x,Zu[yh]=dp.x,Zu[Fd+1]=Nh.y,Zu[eh+1]=sh.y,Zu[yh+1]=dp.y,Zu[Fd+2]=Nh.z,Zu[eh+2]=sh.z,Zu[yh+2]=dp.z,Zu[eh]=sh.x,Zu[Lh]=Th.x,Zu[yh]=dp.x,Zu[eh+1]=sh.y,Zu[Lh+1]=Th.y,Zu[yh+1]=dp.y,Zu[eh+2]=sh.z,Zu[Lh+2]=Th.z,Zu[yh+2]=dp.z,Jl[ih]=Iu,Jl[ih+1]=Ud,Jl[ih+2]=Ah,Jl[ih+3]=Ud,Jl[ih+4]=Sh,Jl[ih+5]=Ah,Gu[Hl]=Iu,Gu[Hl+1]=Ud,Gu[Hl+2]=Iu,Gu[Hl+3]=Ah,Gu[Hl+4]=Ud,Gu[Hl+5]=Sh,Gu[Hl+6]=Sh,Gu[Hl+7]=Ah,mu.faceidx+=6,mu.lineidx+=8)}}}})(M||(M={}));var zn=s(546),Et=s(864);function ml(dd,f){var E,W,Q,yl,Ln,Cl,Al,vl,Fl,Ol=[],mu=dd;for((mu=[]).push(dd[0]),E=1,W=dd.length-1;E<W;E++)if(Ln=dd[E],Cl=dd[E+1],Ln.smoothen){var Xl=new Y.Vector3((Ln.x+Cl.x)/2,(Ln.y+Cl.y)/2,(Ln.z+Cl.z)/2);Xl.atom=Ln.atom,mu.push(Xl)}else mu.push(Ln);for(mu.push(dd[dd.length-1]),E=-1,Q=mu.length;E<=Q-3;E++)if(yl=mu[E===-1?0:E],Ln=mu[E+1],Cl=mu[E+2],Al=mu[E===Q-3?Q-1:E+3],vl=new Y.Vector3().subVectors(Cl,yl).multiplyScalar(.5),Fl=new Y.Vector3().subVectors(Al,Ln).multiplyScalar(.5),!Cl.skip)for(var Wl=0;Wl<f;Wl++){var hu=1/f*Wl,Jl=Ln.x+hu*vl.x+hu*hu*(-3*Ln.x+3*Cl.x-2*vl.x-Fl.x)+hu*hu*hu*(2*Ln.x-2*Cl.x+vl.x+Fl.x),Gu=Ln.y+hu*vl.y+hu*hu*(-3*Ln.y+3*Cl.y-2*vl.y-Fl.y)+hu*hu*hu*(2*Ln.y-2*Cl.y+vl.y+Fl.y),Zu=Ln.z+hu*vl.z+hu*hu*(-3*Ln.z+3*Cl.z-2*vl.z-Fl.z)+hu*hu*hu*(2*Ln.z-2*Cl.z+vl.z+Fl.z),rd=new Y.Vector3(Jl,Gu,Zu);rd.atom=Wl<f/2?Ln.atom:Cl.atom,Ol.push(rd)}return Ol.push(mu[mu.length-1]),Ol}const rl=.5,Ml=1.3,kl=.8,_u=.4,Hu=.4;function bu(dd,f,E,W){for(var Q,yl,Ln,Cl,Al=0,vl=f.length;Al<vl;Al++){Cl=Math.round(Al*(W.length-1)/vl),Ln=ie.CC.color(W[Cl]);var Fl=dd.updateGeoGroup(2),Ol=Fl.vertexArray,mu=Fl.colorArray,Xl=Fl.faceArray;Ol[yl=3*(Q=Fl.vertices)]=f[Al].x,Ol[yl+1]=f[Al].y,Ol[yl+2]=f[Al].z,Ol[yl+3]=E[Al].x,Ol[yl+4]=E[Al].y,Ol[yl+5]=E[Al].z;for(var Wl=0;Wl<6;++Wl)mu[yl+3*Wl]=Ln.r,mu[yl+1+3*Wl]=Ln.g,mu[yl+2+3*Wl]=Ln.b;if(Al>0){var hu=[Q,Q+1,Q-1,Q-2],Jl=Fl.faceidx;Xl[Jl]=hu[0],Xl[Jl+1]=hu[1],Xl[Jl+2]=hu[3],Xl[Jl+3]=hu[1],Xl[Jl+4]=hu[2],Xl[Jl+5]=hu[3],Fl.faceidx+=6}Fl.vertices+=2}}function dl(dd,f,E,W,Q,yl,Ln){Ln&&Ln!=="default"||(Ln="rectangle"),Ln==="edged"?(function(Cl,Al,vl,Fl,Ol){if(!(Al.length<2)){var mu,Xl;if(mu=Al[0],Xl=Al[Al.length-1],mu=ml(mu,Fl),Xl=ml(Xl,Fl),!Ol)return bu(Cl,mu,Xl,vl);var Wl,hu,Jl,Gu,Zu,rd,wd,gd,jd,Qd,ih,Hl,Iu,Fd,Ud,eh,Sh,Lh,Ah,yh,Nh,sh,Th=[],dp=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];for(Iu=0,Fd=mu.length;Iu<Fd;Iu++){if(Qd=Math.round(Iu*(vl.length-1)/Fd),jd=ie.CC.color(vl[Qd]),Th.push(hu=mu[Iu]),Th.push(hu),Th.push(Jl=Xl[Iu]),Th.push(Jl),Iu<Fd-1){var $h=mu[Iu+1].clone().sub(mu[Iu]);Wl=Xl[Iu].clone().sub(mu[Iu]).cross($h).normalize().multiplyScalar(Ol)}for(Th.push(Gu=mu[Iu].clone().add(Wl)),Th.push(Gu),Th.push(Zu=Xl[Iu].clone().add(Wl)),Th.push(Zu),hu.atom!==void 0&&(ih=hu.atom),yh=(Ah=Cl.updateGeoGroup(8)).vertexArray,Nh=Ah.colorArray,sh=Ah.faceArray,yh[wd=3*(rd=Ah.vertices)]=hu.x,yh[wd+1]=hu.y,yh[wd+2]=hu.z,yh[wd+3]=hu.x,yh[wd+4]=hu.y,yh[wd+5]=hu.z,yh[wd+6]=Jl.x,yh[wd+7]=Jl.y,yh[wd+8]=Jl.z,yh[wd+9]=Jl.x,yh[wd+10]=Jl.y,yh[wd+11]=Jl.z,yh[wd+12]=Gu.x,yh[wd+13]=Gu.y,yh[wd+14]=Gu.z,yh[wd+15]=Gu.x,yh[wd+16]=Gu.y,yh[wd+17]=Gu.z,yh[wd+18]=Zu.x,yh[wd+19]=Zu.y,yh[wd+20]=Zu.z,yh[wd+21]=Zu.x,yh[wd+22]=Zu.y,yh[wd+23]=Zu.z,Ud=0;Ud<8;++Ud)Nh[wd+3*Ud]=jd.r,Nh[wd+1+3*Ud]=jd.g,Nh[wd+2+3*Ud]=jd.b;if(Iu>0){var ap=Hl!==void 0&&ih!==void 0&&Hl.serial!==ih.serial;for(Ud=0;Ud<4;Ud++){var Yh=[rd+dp[Ud][0],rd+dp[Ud][1],rd+dp[Ud][2],rd+dp[Ud][3]];if(sh[gd=Ah.faceidx]=Yh[0],sh[gd+1]=Yh[1],sh[gd+2]=Yh[3],sh[gd+3]=Yh[1],sh[gd+4]=Yh[2],sh[gd+5]=Yh[3],Ah.faceidx+=6,ih.clickable||Hl.clickable||ih.hoverable||Hl.hoverable){var Mh=Th[Yh[3]].clone(),pp=Th[Yh[0]].clone(),Ip=Th[Yh[2]].clone(),gp=Th[Yh[1]].clone();if(Mh.atom=Th[Yh[3]].atom||null,Ip.atom=Th[Yh[2]].atom||null,pp.atom=Th[Yh[0]].atom||null,gp.atom=Th[Yh[1]].atom||null,ap){var Xh=Mh.clone().add(pp).multiplyScalar(.5),Qp=Ip.clone().add(gp).multiplyScalar(.5),Wp=Mh.clone().add(gp).multiplyScalar(.5);Ud%2==0?((Hl.clickable||Hl.hoverable)&&(eh=new oe.Triangle(Xh,Wp,Mh),Sh=new oe.Triangle(Qp,Ip,Wp),Lh=new oe.Triangle(Wp,Ip,Mh),Hl.intersectionShape.triangle.push(eh),Hl.intersectionShape.triangle.push(Sh),Hl.intersectionShape.triangle.push(Lh)),(ih.clickable||ih.hoverable)&&(eh=new oe.Triangle(pp,gp,Wp),Sh=new oe.Triangle(gp,Qp,Wp),Lh=new oe.Triangle(pp,Wp,Xh),ih.intersectionShape.triangle.push(eh),ih.intersectionShape.triangle.push(Sh),ih.intersectionShape.triangle.push(Lh))):((ih.clickable||ih.hoverable)&&(eh=new oe.Triangle(Xh,Wp,Mh),Sh=new oe.Triangle(Qp,Ip,Wp),Lh=new oe.Triangle(Wp,Ip,Mh),ih.intersectionShape.triangle.push(eh),ih.intersectionShape.triangle.push(Sh),ih.intersectionShape.triangle.push(Lh)),(Hl.clickable||Hl.hoverable)&&(eh=new oe.Triangle(pp,gp,Wp),Sh=new oe.Triangle(gp,Qp,Wp),Lh=new oe.Triangle(pp,Wp,Xh),Hl.intersectionShape.triangle.push(eh),Hl.intersectionShape.triangle.push(Sh),Hl.intersectionShape.triangle.push(Lh)))}else(ih.clickable||ih.hoverable)&&(eh=new oe.Triangle(pp,gp,Mh),Sh=new oe.Triangle(gp,Ip,Mh),ih.intersectionShape.triangle.push(eh),ih.intersectionShape.triangle.push(Sh))}}}Ah.vertices+=8,Hl=ih}var $p=Th.length-8;for(yh=(Ah=Cl.updateGeoGroup(8)).vertexArray,Nh=Ah.colorArray,sh=Ah.faceArray,wd=3*(rd=Ah.vertices),gd=Ah.faceidx,Iu=0;Iu<4;Iu++){Th.push(Th[2*Iu]),Th.push(Th[$p+2*Iu]);var Hp=Th[2*Iu],Vp=Th[$p+2*Iu];yh[wd+6*Iu]=Hp.x,yh[wd+1+6*Iu]=Hp.y,yh[wd+2+6*Iu]=Hp.z,yh[wd+3+6*Iu]=Vp.x,yh[wd+4+6*Iu]=Vp.y,yh[wd+5+6*Iu]=Vp.z,Nh[wd+6*Iu]=jd.r,Nh[wd+1+6*Iu]=jd.g,Nh[wd+2+6*Iu]=jd.b,Nh[wd+3+6*Iu]=jd.r,Nh[wd+4+6*Iu]=jd.g,Nh[wd+5+6*Iu]=jd.b}$p+=8,eh=[rd,rd+2,rd+6,rd+4],Sh=[rd+1,rd+5,rd+7,rd+3],sh[gd]=eh[0],sh[gd+1]=eh[1],sh[gd+2]=eh[3],sh[gd+3]=eh[1],sh[gd+4]=eh[2],sh[gd+5]=eh[3],sh[gd+6]=Sh[0],sh[gd+7]=Sh[1],sh[gd+8]=Sh[3],sh[gd+9]=Sh[1],sh[gd+10]=Sh[2],sh[gd+11]=Sh[3],Ah.faceidx+=12,Ah.vertices+=8}})(dd,f,E,W,Q):Ln!=="rectangle"&&Ln!=="oval"&&Ln!=="parabola"||(function(Cl,Al,vl,Fl,Ol,mu,Xl){var Wl,hu,Jl,Gu,Zu,rd,wd,gd,jd,Qd;if((Jl=Al.length)<2||Al[0].length<2)return;for(Wl=0;Wl<Jl;Wl++)Al[Wl]=ml(Al[Wl],Fl);if(Gu=Al[0].length,!Ol)return bu(Cl,Al[0],Al[Jl-1],vl);var ih=[],Hl=[],Iu=[];for(hu=0;hu<Jl;hu++)ih.push(.25+1.5*Math.sqrt((Jl-1)*hu-Math.pow(hu,2))/(Jl-1)),Hl.push(.5),Iu.push(2*(Math.pow(hu/Jl,2)-hu/Jl)+.6);var Fd,Ud,eh,Sh,Lh,Ah,yh,Nh,sh,Th,dp=[];for(hu=0;hu<2*Jl-1;hu++)dp[hu]=[hu,hu+1,hu+1-2*Jl,hu-2*Jl];dp[2*Jl-1]=[hu,hu+1-2*Jl,hu+1-4*Jl,hu-2*Jl];let $h=Cl.updateGeoGroup();for(Wl=0;Wl<Gu;Wl++){let pp=Cl.groups,Ip=!1;var ap,Yh;for($h=Cl.updateGeoGroup(2*Jl),pp!=Cl.groups&&Wl>0&&(Wl-=1,Ip=!0),Ah=Math.round(Wl*(vl.length-1)/Gu),Lh=ie.CC.color(vl[Ah]),jd=wd,Qd=gd,wd=[],gd=[],Zu=[],Al[0][Wl].atom!==void 0&&(Sh=Al[0][Wl].atom,Xl==="oval"?rd=ih:Xl==="rectangle"?rd=Hl:Xl==="parabola"&&(rd=Iu)),rd||(rd=Hl),hu=0;hu<Jl;hu++)ap=Wl<Gu-1?Al[hu][Wl+1].clone().sub(Al[hu][Wl]):Al[hu][Wl-1].clone().sub(Al[hu][Wl]).negate(),Yh=hu<Jl-1?Al[hu+1][Wl].clone().sub(Al[hu][Wl]):Al[hu-1][Wl].clone().sub(Al[hu][Wl]).negate(),Zu[hu]=Yh.cross(ap).normalize().multiplyScalar(Ol*rd[hu]);for(hu=0;hu<Jl;hu++)wd[hu]=Al[hu][Wl].clone().add(Zu[hu].clone().negate());for(hu=0;hu<Jl;hu++)gd[hu]=Al[hu][Wl].clone().add(Zu[hu]);for(yh=$h.vertexArray,Nh=$h.colorArray,sh=$h.faceArray,Ud=3*(Fd=$h.vertices),hu=0;hu<Jl;hu++)yh[Ud+3*hu+0]=wd[hu].x,yh[Ud+3*hu+1]=wd[hu].y,yh[Ud+3*hu+2]=wd[hu].z;for(hu=0;hu<Jl;hu++)yh[Ud+3*hu+0+3*Jl]=gd[Jl-1-hu].x,yh[Ud+3*hu+1+3*Jl]=gd[Jl-1-hu].y,yh[Ud+3*hu+2+3*Jl]=gd[Jl-1-hu].z;for(hu=0;hu<2*Jl;++hu)Nh[Ud+3*hu+0]=Lh.r,Nh[Ud+3*hu+1]=Lh.g,Nh[Ud+3*hu+2]=Lh.b;if(Wl>0&&!Ip){for(hu=0;hu<2*Jl;hu++)Th=[Fd+dp[hu][0],Fd+dp[hu][1],Fd+dp[hu][2],Fd+dp[hu][3]],sh[eh=$h.faceidx]=Th[0],sh[eh+1]=Th[1],sh[eh+2]=Th[3],sh[eh+3]=Th[1],sh[eh+4]=Th[2],sh[eh+5]=Th[3],$h.faceidx+=6;if(Sh.clickable||Sh.hoverable){var Mh=[];for(hu in Mh.push(new oe.Triangle(jd[0],wd[0],wd[Jl-1])),Mh.push(new oe.Triangle(jd[0],wd[Jl-1],jd[Jl-1])),Mh.push(new oe.Triangle(jd[Jl-1],wd[Jl-1],gd[Jl-1])),Mh.push(new oe.Triangle(jd[Jl-1],gd[Jl-1],Qd[Jl-1])),Mh.push(new oe.Triangle(gd[0],Qd[0],Qd[Jl-1])),Mh.push(new oe.Triangle(gd[Jl-1],gd[0],Qd[Jl-1])),Mh.push(new oe.Triangle(wd[0],jd[0],Qd[0])),Mh.push(new oe.Triangle(gd[0],wd[0],Qd[0])),Mh)Sh.intersectionShape.triangle.push(Mh[hu])}}$h.vertices+=2*Jl}for(yh=$h.vertexArray,Nh=$h.colorArray,sh=$h.faceArray,Ud=3*(Fd=$h.vertices),eh=$h.faceidx,Wl=0;Wl<Jl-1;Wl++)Th=[Wl,Wl+1,2*Jl-2-Wl,2*Jl-1-Wl],sh[eh=$h.faceidx]=Th[0],sh[eh+1]=Th[1],sh[eh+2]=Th[3],sh[eh+3]=Th[1],sh[eh+4]=Th[2],sh[eh+5]=Th[3],$h.faceidx+=6;for(Wl=0;Wl<Jl-1;Wl++)Th=[Fd-1-Wl,Fd-2-Wl,Fd-2*Jl+Wl+1,Fd-2*Jl+Wl],sh[eh=$h.faceidx]=Th[0],sh[eh+1]=Th[1],sh[eh+2]=Th[3],sh[eh+3]=Th[1],sh[eh+4]=Th[2],sh[eh+5]=Th[3],$h.faceidx+=6})(dd,f,E,W,Q,0,Ln)}function Tl(dd){return dd&&dd.elem==="C"&&dd.atom==="CA"}function $l(dd,f){if(dd&&f&&dd.chain===f.chain){if(!(dd.hetflag||f.hetflag||dd.reschain!==f.reschain||dd.resi!==f.resi&&dd.resi!==f.resi-1))return!0;if(dd.resi<f.resi){var E=dd.x-f.x,W=dd.y-f.y,Q=dd.z-f.z,yl=E*E+W*W+Q*Q;if(dd.atom=="CA"&&f.atom=="CA"&&yl<16||(dd.atom=="P"||f.atom=="P")&&yl<64)return!0}}return!1}function Bl(dd,f,E,W,Q){if(f!=null&&f.vertices!=0){Q&&(f.initTypedArrays(),f.setUpNormals());var yl=new V.MeshDoubleLambertMaterial;yl.vertexColors=V.Coloring.FaceColors,typeof E=="number"&&E>=0&&E<1&&(yl.transparent=!0,yl.opacity=E),yl.outline=W;var Ln=new V.Mesh(f,yl);dd.add(Ln)}}function Pu(dd,f,E,W,Q,yl,Ln,Cl,Al){var vl,Fl,Ol,mu,Xl,Wl;if(W&&Q&&Ln){var hu=Q.sub(W);hu.normalize();var Jl=Cl[Al];for(Fl=Al+1;Fl<Cl.length&&(Jl=Cl[Fl]).atom!=Ln.atom;Fl++);if((Jl=Jl?new Y.Vector3(Jl.x,Jl.y,Jl.z):new Y.Vector3(0,0,0)).sub(W),Ln.ss==="arrow start"){var Gu=Jl.clone().multiplyScalar(.3).cross(Q);W.add(Gu);var Zu=Jl.clone().cross(hu).normalize();hu.rotateAboutVector(Zu,.43)}for(Ln.style.cartoon.ribbon?vl=Ln.style.cartoon.thickness||_u:Ln.style.cartoon.width?vl=Ln.style.cartoon.width:Ln.ss==="c"?vl=Ln.atom==="P"?kl:rl:Ln.ss==="arrow start"?(vl=Ml,Xl=!0):vl=Ln.ss==="arrow end"||Ln.ss==="h"&&Ln.style.cartoon.tubes||Ln.ss==="tube start"?rl:Ml,yl!=null&&hu.dot(yl)<0&&hu.negate(),hu.multiplyScalar(vl),Fl=0;Fl<f;Fl++)Ol=2*Fl/(f-1)-1,(mu=new Y.Vector3(W.x+Ol*hu.x,W.y+Ol*hu.y,W.z+Ol*hu.z)).atom=Ln,Ln.ss==="s"&&(mu.smoothen=!0),dd[Fl].push(mu);if(Xl)for(hu.multiplyScalar(2),Fl=0;Fl<f;Fl++)Ol=2*Fl/(f-1)-1,(mu=new Y.Vector3(W.x+Ol*hu.x,W.y+Ol*hu.y,W.z+Ol*hu.z)).atom=Ln,mu.smoothen=!1,mu.skip=!0,dd[Fl].push(mu);return Wl=Ln.style.cartoon.style||"default",dd.style?dd.style!=Wl&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),dd.style="default"):dd.style=Wl,Ln.ss!=="arrow start"&&Ln.ss!=="arrow end"||(Ln.ss="s"),Xl}}const Il={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},ud={DA:!0,DG:!0,A:!0,G:!0},pd={DT:!0,DC:!0,U:!0,C:!0,T:!0},id={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function rh(dd,f,E,W=10){let Q=W,yl=W;var Ln,Cl,Al,vl,Fl,Ol,mu,Xl,Wl,hu,Jl,Gu,Zu,rd,wd,gd,jd,Qd,ih=new V.Geometry(!0),Hl=new V.Geometry(!0),Iu=[],Fd=[],Ud=1,eh=!1,Sh={};for(var Lh in zn.Gradient.builtinGradients)zn.Gradient.builtinGradients.hasOwnProperty(Lh)&&(Sh[Lh]=new zn.Gradient.builtinGradients[Lh](E[1],E[0]));var Ah=function(Hp,Vp){return E&&Vp.color==="spectrum"?Vp.colorscheme in Sh?Sh[Vp.colorscheme].valueToHex(Hp.resi):Sh.sinebow.valueToHex(Hp.resi):(0,Et.getColorFromStyle)(Hp,Vp).getHex()};for(Xl=0;Xl<Q;Xl++)Fd[Xl]=[];var yh=!1,Nh=!1,sh=[];for(Xl in f){if((vl=f[Xl]).elem==="C"&&vl.atom==="CA"){var Th=$l(Al,vl);Th&&vl.ss==="s"?yh=!0:yh&&(Al&&Cl&&Al.style.cartoon.arrows&&Cl.style.cartoon.arrows&&(Al.ss="arrow end",Cl.ss="arrow start"),yh=!1),Th&&(Al.ss==="h"||Al.ss=="tube start")&&Al.style.cartoon.tubes?!Nh&&Al.ss!="tube start"&&vl.style.cartoon.tubes&&(vl.ss="tube start",Nh=!0):Nh&&(Al.ss==="tube start"?Al.ss="tube end":Cl&&Cl.style.cartoon.tubes&&(Cl.ss="tube end"),Nh=!1),Cl=Al,Al=vl}vl&&vl.atom in Il&&sh.push(vl)}Nh&&Al.style.cartoon.tubes&&(Al.ss="tube end",Nh=!1);var dp=function(Hp){Fd[0].length>0&&dl(Hl,Fd,Iu,yl,mu,0,Fd.style);var Vp=[],Op=null;if(Hp){for(Xl=0;Xl<Q;Xl++)Vp[Xl]=Fd[Xl][Fd[Xl].length-1];Op=Iu[Iu.length-1]}for(Fd=[],Xl=0;Xl<Q;Xl++)Fd[Xl]=[];if(Iu=[],Hp){for(Xl=0;Xl<Q;Xl++)Fd[Xl].push(Vp[Xl]);Iu.push(Op)}Bl(dd,Hl,Ud,eh,!0),Bl(dd,ih,Ud,eh,!1),Hl=new V.Geometry(!0),ih=new V.Geometry(!0)};Al=void 0;let $h=[];for(var ap=0;ap<sh.length;ap++){var Yh=(vl=sh[ap]).resn.trim(),Mh=Yh in id;if(Ud=1,Ln=vl.style.cartoon,Al&&Al.style.cartoon&&(Ud=Al.style.cartoon.opacity),Al&&Al.style.cartoon&&Al.style.cartoon.outline&&(eh=Al.style.cartoon.outline),!Al||!Al.style.cartoon||vl.style.cartoon&&Al.style.cartoon.opacity==vl.style.cartoon.opacity||dp(Al.chain==vl.chain),Al&&vl&&!$l(Al,vl)&&Al.chain&&Al.chain==vl.chain&&!Al.hetflag&&!vl.hetflag&&Al.reschain+1==vl.reschain&&$h.push([Al,vl]),Ln.style==="trace"){if(!vl.hetflag&&(vl.elem==="C"&&vl.atom==="CA"||Mh&&vl.atom==="P"||vl.atom==="BB")){if(Ol=Ah(vl,Ln),mu=(0,Et.isNumeric)(Ln.thickness)?Ln.thickness:_u,$l(Al,vl))if(Ol==Fl){var pp=ie.CC.color(Ol);M.drawCylinder(ih,Al,vl,mu,pp,2,2)}else{var Ip=new Y.Vector3().addVectors(Al,vl).multiplyScalar(.5),gp=ie.CC.color(Fl),Xh=ie.CC.color(Ol);M.drawCylinder(ih,Al,Ip,mu,gp,2,0),M.drawCylinder(ih,Ip,vl,mu,Xh,0,2)}if((vl.clickable===!0||vl.hoverable)&&vl.intersectionShape!==void 0){var Qp=new Y.Vector3(vl.x,vl.y,vl.z);vl.intersectionShape.sphere.push(new oe.Sphere(Qp,mu))}Al=vl,Fl=Ol}}else{if(Tl(vl)||Mh&&(vl.atom==="P"||vl.atom.indexOf("O5")==0)){if(Qd)if(vl.ss==="tube end")Qd=!1,jd=new Y.Vector3(vl.x,vl.y,vl.z),M.drawCylinder(ih,gd,jd,2,ie.CC.color(Fl),1,1),vl.ss="h";else{if(Al.chain==vl.chain&&Al.ss!=="tube end")continue;Qd=!1,Al.ss="h",jd=new Y.Vector3(Al.x,Al.y,Al.z),M.drawCylinder(ih,gd,jd,2,ie.CC.color(Fl),1,1)}if(Al&&(!$l(Al,vl)||Al.ss==="tube start")){for(Al.ss==="tube start"&&(Qd=!0,gd=new Y.Vector3(Al.x,Al.y,Al.z),Al.ss="h"),wd&&(rd=Gu?new Y.Vector3().addVectors(Al,Gu).multiplyScalar(.5):new Y.Vector3(Al.x,Al.y,Al.z),M.drawCylinder(ih,rd,wd,Hu,ie.CC.color(wd.color),0,2),Pu(Fd,Q,!0,Gu,Zu,Jl,Al,sh,ap),Iu.push(Ol),rd=null,wd=null),Fd[0].length>0&&dl(Hl,Fd,Iu,yl,mu,0,Fd.style),Fd=[],Xl=0;Xl<Q;Xl++)Fd[Xl]=[];Iu=[]}if(Al===void 0||Al.rescode!=vl.rescode||Al.resi!=vl.resi){if(wd&&Al!=null){var Wp=(rd=new Y.Vector3().addVectors(Al,vl).multiplyScalar(.5)).clone().sub(wd).multiplyScalar(.02);rd.add(Wp),M.drawCylinder(ih,rd,wd,Hu,ie.CC.color(wd.color),0,2),rd=null,wd=null}Ol=Ah(vl,Ln),Iu.push(Ol),mu=(0,Et.isNumeric)(Ln.thickness)?Ln.thickness:_u,Al=vl,(Wl=new Y.Vector3(Al.x,Al.y,Al.z)).resi=Al.resi,Fl=Ol}vl.clickable!==!0&&vl.hoverable!==!0||vl.intersectionShape!==void 0&&vl.intersectionShape.triangle!==void 0||(vl.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else Al!=null&&(Tl(Al)&&vl.atom==="O"||Mh&&Al.atom==="P"&&(vl.atom==="OP2"||vl.atom==="O2P")||Mh&&Al.atom.indexOf("O5")==0&&vl.atom.indexOf("C5")==0)?((hu=new Y.Vector3(vl.x,vl.y,vl.z)).resi=vl.resi,vl.atom!=="OP2"&&vl.atom!=="O2P"||(Zu=new Y.Vector3(vl.x,vl.y,vl.z))):Mh&&vl.atom.indexOf("O3")==0?Gu=new Y.Vector3(vl.x,vl.y,vl.z):(vl.atom==="N1"&&Yh in ud||vl.atom==="N3"&&Yh in pd)&&((wd=new Y.Vector3(vl.x,vl.y,vl.z)).color=(0,Et.getColorFromStyle)(vl,Ln).getHex());hu&&Wl&&hu.resi===Wl.resi&&(Pu(Fd,Q,!0,Wl,hu,Jl,Al,sh,ap),Jl=hu,Wl=null,hu=null,Iu.push(Ol))}}wd&&(rd=Gu?new Y.Vector3().addVectors(Al,Gu).multiplyScalar(.5):new Y.Vector3(Al.x,Al.y,Al.z),M.drawCylinder(ih,rd,wd,Hu,ie.CC.color(wd.color),0,2),Pu(Fd,Q,!0,Gu,Zu,Jl,Al,sh,ap),Iu.push(Ol)),dp(!1);var $p=function(Hp,Vp){if(Hp.style.cartoon.gapcutoff&&Hp.style.cartoon.gapcutoff==Vp.style.cartoon.gapcutoff){let Jp=Hp.style.cartoon.gapcutoff,Df=Vp.resi-Hp.resi;if(Df>0&&Df<Jp){let tm=.25,og=Vp.x-Hp.x,tg=Vp.y-Hp.y,Zf=Vp.z-Hp.z,Xf=Math.sqrt(og*og+tg*tg+Zf*Zf),Nf=Xf/(2*Df),ag=new Y.Vector3(Hp.x,Hp.y,Hp.z),vg=Xf/Nf,Pg=new Y.Vector3((Vp.x-Hp.x)/vg,(Vp.y-Hp.y)/vg,(Vp.z-Hp.z)/vg);ag.add({x:Pg.x/2,y:Pg.y/2,z:Pg.z/2});let cg=ag.clone().add(Pg);Pg.multiplyScalar(2);let kg=(0,Et.extend)({},Hp);for(var Op=0;Op<Df;Op++){kg.resi+=1;let Bf=Ah(kg,kg.style.cartoon);M.drawCylinder(ih,ag,cg,tm,ie.CC.color(Bf),_.FLAT,_.FLAT),ag.add(Pg),cg.add(Pg)}dp(!1)}}};for(let Hp of $h)$p(Hp[0],Hp[1])}var qd=s(797),oh=s(865),Ed=s(392);function Nl(dd,f){for(var E=[[]],W=(f=f||{}).assignBonds===void 0||f.assignBonds,Q=dd.trimStart().split(/\r?\n|\r/);Q.length>0&&!(Q.length<3);){var yl=parseInt(Q[0]);if(isNaN(yl)||yl<=0||Q.length<yl+2)break;var Ln=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi.exec(Q[1]);if(Ln!=null&&Ln.length>1){var Cl=new Float32Array(Ln[1].split(/\s+/)),Al=new V.Matrix3(Cl[0],Cl[3],Cl[6],Cl[1],Cl[4],Cl[7],Cl[2],Cl[5],Cl[8]);E.modelData=[{cryst:{matrix:Al}}]}for(var vl=2,Fl=E[E.length-1].length,Ol=Fl+yl,mu=Fl;mu<Ol;mu++){var Xl=Q[vl++].trim().split(/\s+/),Wl={};Wl.serial=mu;var hu=Xl[0];Wl.atom=Wl.elem=hu[0].toUpperCase()+hu.substring(1,2).toLowerCase(),Wl.x=parseFloat(Xl[1]),Wl.y=parseFloat(Xl[2]),Wl.z=parseFloat(Xl[3]),Wl.hetflag=!0,Wl.bonds=[],Wl.bondOrder=[],Wl.properties={},E[E.length-1][mu]=Wl,Xl.length>=7&&(Wl.dx=parseFloat(Xl[4]),Wl.dy=parseFloat(Xl[5]),Wl.dz=parseFloat(Xl[6]))}if(!f.multimodel)break;E.push([]),Q.splice(0,vl)}if(W)for(let Gu=0;Gu<E.length;Gu++)(0,Ed.assignBonds)(E[Gu],f);if(f.onemol){var Jl=E;(E=[]).push(Jl[0]);for(let Gu=1;Gu<Jl.length;Gu++){let Zu=E[0].length;for(let rd=0;rd<Jl[Gu].length;rd++){let wd=Jl[Gu][rd];for(let gd=0;gd<wd.bonds.length;gd++)wd.bonds[gd]=wd.bonds[gd]+Zu;wd.index=E[0].length,wd.serial=E[0].length,E[0].push(wd)}}}return E}function Gd(dd,f){var E="V2000",W=dd.split(/\r?\n|\r/);return W.length>3&&W[3].length>38&&(E=W[3].substring(34,39)),E==="V2000"?(function(Q,yl){var Ln=[[]],Cl=!1;for(yl.keepH!==void 0&&(Cl=!yl.keepH);Q.length>0&&!(Q.length<4);){var Al=parseInt(Q[3].substring(0,3));if(isNaN(Al)||Al<=0)break;var vl=parseInt(Q[3].substring(3,6)),Fl=4;if(Q.length<4+Al+vl)break;var Ol,mu,Xl=[],Wl=Ln[Ln.length-1].length,hu=Wl+Al;for(Ol=Wl;Ol<hu;Ol++,Fl++){var Jl={},Gu=(mu=Q[Fl]).substring(31,34).replace(/ /g,"");Jl.atom=Jl.elem=Gu[0].toUpperCase()+Gu.substring(1).toLowerCase(),Jl.elem==="H"&&Cl||(Jl.serial=Ol,Xl[Ol]=Ln[Ln.length-1].length,Jl.x=parseFloat(mu.substring(0,10)),Jl.y=parseFloat(mu.substring(10,20)),Jl.z=parseFloat(mu.substring(20,30)),Jl.hetflag=!0,Jl.bonds=[],Jl.bondOrder=[],Jl.properties={},Jl.index=Ln[Ln.length-1].length,Ln[Ln.length-1].push(Jl))}for(Ol=0;Ol<vl;Ol++,Fl++){mu=Q[Fl];var Zu=Xl[parseInt(mu.substring(0,3))-1+Wl],rd=Xl[parseInt(mu.substring(3,6))-1+Wl],wd=parseFloat(mu.substring(6));Zu!==void 0&&rd!==void 0&&(Ln[Ln.length-1][Zu].bonds.push(rd),Ln[Ln.length-1][Zu].bondOrder.push(wd),Ln[Ln.length-1][rd].bonds.push(Zu),Ln[Ln.length-1][rd].bondOrder.push(wd))}if(!yl.multimodel)break;for(yl.onemol||Ln.push([]);Q[Fl]!=="$$$$"&&Fl<Q.length;)Fl++;Q.splice(0,++Fl)}return Ln})(W,f):E==="V3000"?(function(Q,yl){var Ln=[[]],Cl=!1;for(yl.keepH!==void 0&&(Cl=!yl.keepH);Q.length>0&&!(Q.length<8)&&Q[4].startsWith("M  V30 BEGIN CTAB")&&Q[5].startsWith("M  V30 COUNTS")&&!(Q[5].length<14);){var Al=Q[5].substring(13).match(/\S+/g);if(Al.length<2)break;var vl=parseInt(Al[0]);if(isNaN(vl)||vl<=0)break;var Fl=parseInt(Al[1]),Ol=7;if(Q.length<8+vl+Fl)break;var mu,Xl=[],Wl=Ln[Ln.length-1].length,hu=Wl+vl;for(mu=Wl;mu<hu;mu++,Ol++){var Jl=Q[Ol].substring(6).match(/\S+/g);if(Jl.length>4){var Gu={},Zu=Jl[1].replace(/ /g,"");Gu.atom=Gu.elem=Zu[0].toUpperCase()+Zu.substring(1).toLowerCase(),Gu.elem==="H"&&Cl||(Gu.serial=mu,Xl[mu]=Ln[Ln.length-1].length,Gu.x=parseFloat(Jl[2]),Gu.y=parseFloat(Jl[3]),Gu.z=parseFloat(Jl[4]),Gu.hetflag=!0,Gu.bonds=[],Gu.bondOrder=[],Gu.properties={},Gu.index=Ln[Ln.length-1].length,Ln[Ln.length-1].push(Gu))}}if(Q[Ol]!=="M  V30 END ATOM"||(Ol++,Fl===0||Q[Ol]!=="M  V30 BEGIN BOND"))break;for(Ol++,mu=0;mu<Fl;mu++,Ol++){var rd=Q[Ol].substring(6).match(/\S+/g);if(rd.length>3){var wd=Xl[parseInt(rd[2])-1+Wl],gd=Xl[parseInt(rd[3])-1+Wl],jd=parseFloat(rd[1]);wd!==void 0&&gd!==void 0&&(Ln[Ln.length-1][wd].bonds.push(gd),Ln[Ln.length-1][wd].bondOrder.push(jd),Ln[Ln.length-1][gd].bonds.push(wd),Ln[Ln.length-1][gd].bondOrder.push(jd))}}if(!yl.multimodel)break;for(yl.onemol||Ln.push([]);Q[Ol]!=="$$$$"&&Ol<Q.length;)Ol++;Q.splice(0,++Ol)}return Ln})(W,f):[[""]]}function Cd(dd,f){var E=[[]];typeof dd=="string"&&(dd=JSON.parse(dd));for(var W=dd.m,Q=W[0].a,yl=W[0].b,Ln=W[0].s,Cl=f!==void 0&&f.parseStyle!==void 0?f.parseStyle:Ln!==void 0,Al=E[E.length-1].length,vl=0;vl<Q.length;vl++){var Fl=Q[vl],Ol={};Ol.id=Fl.i,Ol.x=Fl.x,Ol.y=Fl.y,Ol.z=Fl.z||0,Ol.bonds=[],Ol.bondOrder=[];var mu=Fl.l||"C";Ol.elem=mu[0].toUpperCase()+mu.substring(1).toLowerCase(),Ol.serial=E[E.length-1].length,Cl&&(Ol.style=Ln[Fl.s||0]),E[E.length-1].push(Ol)}for(let Xl=0;Xl<yl.length;Xl++){let Wl=yl[Xl],hu=Wl.b+Al,Jl=Wl.e+Al,Gu=Wl.o||1,Zu=E[E.length-1][hu],rd=E[E.length-1][Jl];Zu.bonds.push(Jl),Zu.bondOrder.push(Gu),rd.bonds.push(hu),rd.bondOrder.push(Gu)}return E}function Bu(dd,f){(function(vl,Fl){const Ol=Fl||3.2,mu=Ol*Ol,Xl=[];for(let Wl=0,hu=vl.length;Wl<hu;Wl++){vl[Wl].index=Wl;const Jl=vl[Wl];Jl.hetflag||Jl.atom!=="N"&&Jl.atom!=="O"||(Xl.push(Jl),Jl.hbondOther=null,Jl.hbondDistanceSq=Number.POSITIVE_INFINITY)}Xl.sort(function(Wl,hu){return Wl.z-hu.z});for(let Wl=0,hu=Xl.length;Wl<hu;Wl++){const Jl=Xl[Wl];for(let Gu=Wl+1;Gu<hu;Gu++){const Zu=Xl[Gu],rd=Zu.z-Jl.z;if(rd>Ol)break;if(Zu.atom==Jl.atom)continue;const wd=Math.abs(Zu.y-Jl.y);if(wd>Ol)continue;const gd=Math.abs(Zu.x-Jl.x);if(gd>Ol)continue;const jd=gd*gd+wd*wd+rd*rd;jd>mu||Zu.chain==Jl.chain&&Math.abs(Zu.resi-Jl.resi)<4||(jd<Jl.hbondDistanceSq&&(Jl.hbondOther=Zu,Jl.hbondDistanceSq=jd),jd<Zu.hbondDistanceSq&&(Zu.hbondOther=Jl,Zu.hbondDistanceSq=jd))}}})(dd,f);const E={};let W,Q,yl,Ln,Cl,Al;for(W=0,Q=dd.length;W<Q;W++)if(Cl=dd[W],E[Cl.chain]===void 0&&(E[Cl.chain]=[]),isFinite(Cl.hbondDistanceSq)){const vl=Cl.hbondOther;E[vl.chain]===void 0&&(E[vl.chain]=[]),Math.abs(vl.resi-Cl.resi)===4&&(E[Cl.chain][Cl.resi]="h")}for(yl in E)for(Ln=1;Ln<E[yl].length-1;Ln++){const vl=E[yl][Ln-1],Fl=E[yl][Ln+1];Al=E[yl][Ln],vl=="h"&&vl==Fl&&Al!=vl&&(E[yl][Ln]=vl)}for(W=0,Q=dd.length;W<Q;W++)Cl=dd[W],isFinite(Cl.hbondDistanceSq)&&E[Cl.chain][Cl.resi]!="h"&&Cl.ss!=="h"&&(E[Cl.chain][Cl.resi]="maybesheet");for(let vl=0,Fl=dd.length;vl<Fl;vl++)if(Cl=dd[vl],isFinite(Cl.hbondDistanceSq)&&E[Cl.chain][Cl.resi]=="maybesheet"){let Ol=Cl.hbondOther,mu=E[Ol.chain][Ol.resi];mu!="maybesheet"&&mu!="s"||(E[Cl.chain][Cl.resi]="s",E[Ol.chain][Ol.resi]="s")}for(let vl in E){for(let Fl=1;Fl<E[vl].length-1;Fl++){const Ol=E[vl][Fl-1],mu=E[vl][Fl+1];Al=E[vl][Fl],Ol=="s"&&Ol==mu&&Al!=Ol&&(E[vl][Fl]=Ol)}for(let Fl=0;Fl<E[vl].length;Fl++){const Ol=E[vl][Fl];Ol!="h"&&Ol!="s"||E[vl][Fl-1]!=Ol&&E[vl][Fl+1]!=Ol&&delete E[vl][Fl]}}for(W=0,Q=dd.length;W<Q;W++)Cl=dd[W],Al=E[Cl.chain][Cl.resi],delete Cl.hbondOther,delete Cl.hbondDistanceSq,Al!==void 0&&Al!=="maybesheet"&&(Cl.ss=Al,E[Cl.chain][Cl.resi-1]!=Al&&(Cl.ssbegin=!0),E[Cl.chain][Cl.resi+1]!=Al&&(Cl.ssend=!0))}function wh(dd,f,E,W){const Q=!E.duplicateAssemblyAtoms,yl=f.length;let Ln=yl,Cl=-1,Al=null,vl=null;(E.normalizeAssembly||E.wrapAtoms)&&W&&(Al=(0,V.conversionMatrix3)(W.a,W.b,W.c,W.alpha,W.beta,W.gamma),vl=new V.Matrix3,vl.getInverse3(Al));let Fl=function(Xl){let Wl=Xl.clone().applyMatrix3(vl);const hu=[Wl.x,Wl.y,Wl.z],Jl=[0,0,0];for(let Zu=0;Zu<3;Zu++){for(;hu[Zu]<-.001;)hu[Zu]+=1,Jl[Zu]+=1;for(;hu[Zu]>1.001;)hu[Zu]-=1,Jl[Zu]-=1}const Gu=new V.Vector3(Jl[0],Jl[1],Jl[2]);return Gu.applyMatrix3(Al),Gu};if(E.normalizeAssembly&&W)for(let Xl=0;Xl<dd.length;Xl++){const Wl=new V.Vector3(0,0,0);for(let Jl=0;Jl<yl;Jl++){const Gu=new V.Vector3(f[Jl].x,f[Jl].y,f[Jl].z);Gu.applyMatrix4(dd[Xl]),Wl.add(Gu)}Wl.divideScalar(yl);const hu=Fl(Wl);dd[Xl].isNearlyIdentity()&&hu.lengthSq()>.001&&(Cl=Xl),dd[Xl].translate(hu)}if(Q){if(dd.length>1)for(let Xl=0;Xl<f.length;Xl++){var Ol=[];for(let Wl=0;Wl<dd.length;Wl++)if(!dd[Wl].isNearlyIdentity()){var mu=new V.Vector3;mu.set(f[Xl].x,f[Xl].y,f[Xl].z),mu.applyMatrix4(dd[Wl]),Ol.push(mu)}f[Xl].symmetries=Ol}}else{for(let Xl=0;Xl<yl;Xl++)f[Xl].sym=-1;for(let Xl=0;Xl<dd.length;Xl++)if(dd[Xl].isNearlyIdentity()||Cl==Xl)for(let Wl=0;Wl<yl;Wl++)f[Wl].sym=Xl;else{let Wl=new V.Vector3;for(let hu=0;hu<yl;hu++){const Jl=[];for(let Zu=0;Zu<f[hu].bonds.length;Zu++)Jl.push(f[hu].bonds[Zu]+Ln);if(Wl.set(f[hu].x,f[hu].y,f[hu].z),Wl.applyMatrix4(dd[Xl]),E.wrapAtoms&&W){let Zu=Fl(Wl);Wl.add(Zu)}const Gu={};for(const Zu in f[hu])Gu[Zu]=f[hu][Zu];Gu.x=Wl.x,Gu.y=Wl.y,Gu.z=Wl.z,Gu.bonds=Jl,Gu.sym=Xl,Gu.index=f.length,f.push(Gu)}Ln=f.length}if(E.wrapAtoms&&W){let Xl=new V.Vector3;for(let Wl=0;Wl<yl;Wl++){Xl.set(f[Wl].x,f[Wl].y,f[Wl].z);let hu=Fl(Xl);Xl.add(hu),f[Wl].x=Xl.x,f[Wl].y=Xl.y,f[Wl].z=Xl.z}}if(Cl>=0){const Xl=new V.Vector3;for(let Wl=0;Wl<yl;Wl++)Xl.set(f[Wl].x,f[Wl].y,f[Wl].z),Xl.applyMatrix4(dd[Cl]),f[Wl].x=Xl.x,f[Wl].y=Xl.y,f[Wl].z=Xl.z}dd.length=0}}var Rd=s(408);const dh=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"]);function Ih(dd,f){const E=[],W=[];for(let Cl=0,Al=dd.length;Cl<Al;Cl++){const vl=dd[Cl];vl.index=Cl,vl.hetflag||!dh.has(vl.resn)?W.push(vl):E.push(vl)}(0,Ed.assignBonds)(W,f),E.sort(function(Cl,Al){return Cl.chain!==Al.chain?Cl.chain<Al.chain?-1:1:Cl.resi-Al.resi});let Q,yl=-1,Ln=-1;for(let Cl=0,Al=E.length;Cl<Al;Cl++){const vl=E[Cl];vl.resi!==yl&&(yl=vl.resi,Q||Ln++,Q=!1),vl.reschain=Ln;for(let Fl=Cl+1;Fl<E.length;Fl++){const Ol=E[Fl];if(Ol.chain!==vl.chain||Ol.resi-vl.resi>1)break;(0,Rd.areConnected)(vl,Ol,f)&&(vl.bonds.indexOf(Ol.index)===-1&&(vl.bonds.push(Ol.index),vl.bondOrder.push(1),Ol.bonds.push(vl.index),Ol.bondOrder.push(1)),vl.resi!==Ol.resi&&(Q=!0))}}}const nd=function(dd,f,E,W){return new V.Vector3(f,E,W).applyMatrix3(dd)};function Yd(dd,f={}){const E=[],W=!f.doAssembly,Q=E.modelData=[],yl=f.assignBonds===void 0||f.assignBonds;function Ln(mu,Xl){const Wl=[];let hu=0,Jl=0;for(;Jl<mu.length;){for(;mu.substring(Jl,Jl+Xl.length)!==Xl&&Jl<mu.length;)if(mu[Jl]==="'"){for(Jl++;Jl<mu.length&&mu[Jl]!=="'";)Jl++;for(;mu.substring(Jl,Jl+Xl.length)!==Xl&&Jl<mu.length;)Jl++}else if(mu[Jl]==='"'){for(Jl++;Jl<mu.length&&mu[Jl]!=='"';)Jl++;Jl++}else Jl++;Wl.push(mu.substring(hu,Jl)),hu=Jl+=Xl.length}return Wl}const Cl=dd.split(/\r?\n|\r/),Al=[];let vl=!1;for(let mu=0;mu<Cl.length;mu++){var Fl=Cl[mu].split("#")[0];if(vl?Fl[0]===";"&&(vl=!1):Fl[0]===";"&&(vl=!0),vl||Fl!==""){if(!vl&&(Fl=Fl.trim())[0]==="_"){const Xl=Fl.split(/\s/)[0].indexOf(".");if(Xl>-1){let Wl=Fl.split("");Wl[Xl]="_",Fl=(Fl=Wl.join("")).substring(0,Xl)+"_"+Fl.substring(Xl+1)}}Al.push(Fl)}}let Ol=0;for(;Ol<Al.length;){for(;!Al[Ol].startsWith("data_")||Al[Ol]==="data_global";)Ol++;Ol++;const mu={};for(;Ol<Al.length&&!Al[Ol].startsWith("data_");)if(Al[Ol][0]===void 0)Ol++;else if(Al[Ol][0]==="_"){const Jl=Al[Ol].split(/\s/)[0].toLowerCase(),Gu=mu[Jl]=mu[Jl]||[],Zu=Al[Ol].substring(Al[Ol].indexOf(Jl)+Jl.length);if(Zu==="")if(Ol++,Al[Ol][0]===";"){let rd=Al[Ol].substring(1);for(Ol++;Al[Ol]!==";";)rd=rd+`
`+Al[Ol],Ol++;Gu.push(rd)}else Gu.push(Al[Ol]);else Gu.push(Zu.trim());Ol++}else if(Al[Ol].substring(0,5)==="loop_"){Ol++;const Jl=[];for(;Al[Ol]===""||Al[Ol][0]==="_";){if(Al[Ol]!==""){let Zu=Al[Ol].split(/\s/)[0].toLowerCase(),rd=mu[Zu]=mu[Zu]||[];Jl.push(rd)}Ol++}let Gu=0;for(;Ol<Al.length&&Al[Ol][0]!=="_"&&!Al[Ol].startsWith("loop_")&&!Al[Ol].startsWith("data_");){let Zu=Ln(Al[Ol]," ");for(let rd=0;rd<Zu.length;rd++)Zu[rd]!==""&&(Jl[Gu].push(Zu[rd]),Gu=(Gu+1)%Jl.length);Ol++}}else Ol++;Q.push({symmetries:[]}),E.push([]);const Xl=mu._atom_site_id!==void 0?mu._atom_site_id.length:mu._atom_site_label.length;let Wl;if(mu._cell_length_a!==void 0){const Jl=parseFloat(mu._cell_length_a),Gu=parseFloat(mu._cell_length_b),Zu=parseFloat(mu._cell_length_c),rd=parseFloat(mu._cell_angle_alpha)||90,wd=parseFloat(mu._cell_angle_beta)||90,gd=parseFloat(mu._cell_angle_gamma)||90;Wl=(0,V.conversionMatrix3)(Jl,Gu,Zu,rd,wd,gd),Q[Q.length-1].cryst={a:Jl,b:Gu,c:Zu,alpha:rd,beta:wd,gamma:gd}}for(let Jl=0;Jl<Xl;Jl++){if(mu._atom_site_group_pdb!==void 0&&mu._atom_site_group_pdb[Jl]==="TER")continue;const Gu={};if(mu._atom_site_cartn_x!==void 0)Gu.x=parseFloat(mu._atom_site_cartn_x[Jl]),Gu.y=parseFloat(mu._atom_site_cartn_y[Jl]),Gu.z=parseFloat(mu._atom_site_cartn_z[Jl]);else{const rd=nd(Wl,parseFloat(mu._atom_site_fract_x[Jl]),parseFloat(mu._atom_site_fract_y[Jl]),parseFloat(mu._atom_site_fract_z[Jl]));Gu.x=rd.x,Gu.y=rd.y,Gu.z=rd.z}Gu.chain=mu._atom_site_auth_asym_id?mu._atom_site_auth_asym_id[Jl]:mu._atom_site_label_asym_id?mu._atom_site_label_asym_id[Jl]:void 0,Gu.lchain=mu._atom_site_label_asym_id?mu._atom_site_label_asym_id[Jl]:void 0,Gu.resi=mu._atom_site_auth_seq_id?parseInt(mu._atom_site_auth_seq_id[Jl]):mu._atom_site_label_seq_id?mu._atom_site_label_seq_id[Jl]:void 0,Gu.resn=mu._atom_site_auth_comp_id?mu._atom_site_auth_comp_id[Jl].trim():mu._atom_site_label_comp_id?mu._atom_site_label_comp_id[Jl].trim():void 0,Gu.atom=mu._atom_site_auth_atom_id?mu._atom_site_auth_atom_id[Jl].replace(/"/gm,""):mu._atom_site_label_atom_id?mu._atom_site_label_atom_id[Jl].replace(/"/gm,""):void 0,Gu.hetflag=!mu._atom_site_group_pdb||mu._atom_site_group_pdb[Jl]==="HETA"||mu._atom_site_group_pdb[Jl]==="HETATM",mu._atom_site_b_iso_or_equiv&&(Gu.b=parseFloat(mu._atom_site_b_iso_or_equiv[Jl]));let Zu="X";mu._atom_site_type_symbol?Zu=mu._atom_site_type_symbol[Jl].replace(/\(?\+?\d+.*/,""):mu._atom_site_label&&(Zu=mu._atom_site_label[Jl].split("_")[0].replace(/\(?\d+.*/,"")),Gu.elem=Zu[0].toUpperCase()+Zu.substring(1,2).toLowerCase(),Gu.bonds=[],Gu.ss="c",Gu.serial=Jl,Gu.bondOrder=[],Gu.properties={},E[E.length-1].push(Gu)}if(mu._pdbx_struct_oper_list_id!==void 0&&!W)for(let Jl=0;Jl<mu._pdbx_struct_oper_list_id.length;Jl++){const Gu=parseFloat(mu["_pdbx_struct_oper_list_matrix[1][1]"][Jl]),Zu=parseFloat(mu["_pdbx_struct_oper_list_matrix[1][2]"][Jl]),rd=parseFloat(mu["_pdbx_struct_oper_list_matrix[1][3]"][Jl]),wd=parseFloat(mu["_pdbx_struct_oper_list_vector[1]"][Jl]),gd=parseFloat(mu["_pdbx_struct_oper_list_matrix[2][1]"][Jl]),jd=parseFloat(mu["_pdbx_struct_oper_list_matrix[2][2]"][Jl]),Qd=parseFloat(mu["_pdbx_struct_oper_list_matrix[2][3]"][Jl]),ih=parseFloat(mu["_pdbx_struct_oper_list_vector[2]"][Jl]),Hl=parseFloat(mu["_pdbx_struct_oper_list_matrix[3][1]"][Jl]),Iu=parseFloat(mu["_pdbx_struct_oper_list_matrix[3][2]"][Jl]),Fd=parseFloat(mu["_pdbx_struct_oper_list_matrix[3][3]"][Jl]),Ud=parseFloat(mu["_pdbx_struct_oper_list_vector[3]"][Jl]),eh=new V.Matrix4(Gu,Zu,rd,wd,gd,jd,Qd,ih,Hl,Iu,Fd,Ud);Q[Q.length-1].symmetries.push(eh)}const hu=function(Jl){const Gu=Jl.match("-"),Zu=(Jl=Jl.replace(/[-xyz]/g,"")).split("/");let rd,wd;return wd=Zu[1]===void 0?1:parseInt(Zu[1]),rd=Zu[0]===""?1:parseInt(Zu[0]),rd/wd*(Gu?-1:1)};if(mu._symmetry_equiv_pos_as_xyz!==void 0&&!W)for(let Jl=0;Jl<mu._symmetry_equiv_pos_as_xyz.length;Jl++){const Gu=mu._symmetry_equiv_pos_as_xyz[Jl].replace(/["' ]/g,"").split(",").map(function(gd){return gd.replace(/-/g,"+-")});let Zu=new V.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let gd=0;gd<3;gd++){const jd=Gu[gd].split("+");for(let Qd=0;Qd<jd.length;Qd++){const ih=jd[Qd];if(ih==="")continue;const Hl=hu(ih);ih.match("x")?Zu.elements[gd+0]=Hl:ih.match("y")?Zu.elements[gd+4]=Hl:ih.match("z")?Zu.elements[gd+8]=Hl:Zu.elements[gd+12]=Hl}}const rd=Wl.getMatrix4(),wd=new V.Matrix4().getInverse(rd,!0);Zu=new V.Matrix4().multiplyMatrices(Zu,wd),Zu=new V.Matrix4().multiplyMatrices(rd,Zu),Q[Q.length-1].symmetries.push(Zu)}}for(let mu=0;mu<E.length;mu++)!yl||f.duplicateAssemblyAtoms&&!f.dontConnectDuplicatedAtoms||Ih(E[mu],f),Bu(E[mu],f.hbondCutoff),wh(Q[mu].symmetries,E[mu],f,Q[mu].cryst),f.duplicateAssemblyAtoms&&!f.dontConnectDuplicatedAtoms&&yl&&Ih(E[mu],f);return E}let Kh={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function rp(dd,f){var E=[[]],W=!1;f.keepH!==void 0&&(W=!f.keepH);var Q=dd.search(/@<TRIPOS>MOLECULE/),yl=dd.search(/@<TRIPOS>ATOM/);if(Q==-1||yl==-1)return E;for(var Ln=dd.substring(Q).split(/\r?\n|\r/);Ln.length>0;){var Cl=[],Al=Ln[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),vl=parseInt(Al[0]),Fl=0;Al.length>1&&(Fl=parseInt(Al[1]));var Ol,mu=4;for(Ol=3;Ol<Ln.length;Ol++)if(Ln[Ol]=="@<TRIPOS>ATOM"){mu=Ol+1;break}var Xl=E[E.length-1].length,Wl=Xl+vl;for(Ol=Xl;Ol<Wl;Ol++){var hu={},Jl=(Al=Ln[mu++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5];if(Jl=Kh[Jl]!==void 0?Kh[Jl]:(Jl=Jl.split(".")[0])[0].toUpperCase()+Jl.substring(1).toLowerCase(),hu.atom=Al[1],hu.elem=Jl,!(hu.elem=="H"&&W)){var Gu=E[E.length-1].length,Zu=parseInt(Al[0]);hu.serial=Zu,hu.x=parseFloat(Al[2]),hu.y=parseFloat(Al[3]),hu.z=parseFloat(Al[4]),hu.atom=Al[5];var rd=parseFloat(Al[8]);hu.index=Gu,hu.bonds=[],hu.bondOrder=[],hu.properties={charge:rd,partialCharge:rd},Cl[Zu]=Gu,E[E.length-1].push(hu)}}for(var wd=!1;mu<Ln.length;)if(Ln[mu++]=="@<TRIPOS>BOND"){wd=!0;break}if(wd&&Fl)for(Ol=0;Ol<Fl;Ol++){Al=Ln[mu++].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var gd=parseInt(Al[1]),jd=E[E.length-1][Cl[gd]],Qd=parseInt(Al[2]),ih=E[E.length-1][Cl[Qd]],Hl=parseInt(Al[3]);isNaN(Hl)&&(Hl=1),jd!==void 0&&ih!==void 0&&(jd.bonds.push(Cl[Qd]),jd.bondOrder.push(Hl),ih.bonds.push(Cl[gd]),ih.bondOrder.push(Hl))}if(!f.multimodel)break;f.onemol||E.push([]),Ln.splice(0,mu),dd=Ln.join(`
`)}return E}var lh=s(40);function yp(dd,f){let E=dd.replace(/ /g,"");return E.length>0&&E[0]==="H"&&E!=="Hg"&&E!=="He"&&E!=="Hf"&&E!=="Hs"&&E!=="Ho"&&(E="H"),E.length>1&&(E=E[0].toUpperCase()+E.substring(1).toLowerCase(),lh.bondTable[E]===void 0?E=E[0]:f&&(E==="Ca"||E==="Cd")&&(E="C")),E}function Cp(dd){for(const f in dd)return!1;return!0}function vp(dd,f,E){const W=[],Q=f.assignBonds===void 0||f.assignBonds,yl=!f.keepH,Ln=!!f.noSecondaryStructure,Cl=!f.noComputeSecondaryStructure,Al=!f.doAssembly,vl=f.altLoc?f.altLoc:"A",Fl={symmetries:[],cryst:void 0};let Ol,mu=[];const Xl=[];let Wl;const hu={};for(let Jl=0;Jl<dd.length;Jl++){Wl=dd[Jl].replace(/^\s*/,"");const Gu=Wl.substring(0,6);let Zu,rd,wd;if(Gu.indexOf("END")===0){if(mu=dd.slice(Jl+1),Gu==="END")for(const gd in E)E.hasOwnProperty(gd)&&delete E[gd];break}if(Gu==="ATOM  "||Gu==="HETATM"){let gd,jd,Qd,ih,Hl,Iu,Fd,Ud,eh,Sh,Lh,Ah;if(Lh=Wl.substring(16,17),Lh!==" "&&Lh!==vl&&vl!=="*"||(Sh=parseInt(Wl.substring(6,11)),Ol=Wl.substring(12,16).replace(/ /g,""),gd=Wl.substring(17,20).replace(/ /g,""),jd=Wl.substring(21,22),Qd=parseInt(Wl.substring(22,26)),ih=Wl.substring(26,27),Hl=parseFloat(Wl.substring(30,38)),Iu=parseFloat(Wl.substring(38,46)),Fd=parseFloat(Wl.substring(46,54)),Ah=parseFloat(Wl.substring(60,68)),eh=Wl.substring(76,78).replace(/ /g,""),eh=eh===""||lh.bondTable[eh]===void 0?yp(Wl.substring(12,14),Wl[0]=="A"):eh[0].toUpperCase()+eh.substring(1).toLowerCase(),eh==="H"&&yl))continue;Ud=Gu[0]=="H",Xl[Sh]=W.length,W.push({resn:gd,x:Hl,y:Iu,z:Fd,elem:eh,hetflag:Ud,altLoc:Lh,chain:jd,resi:Qd,icode:ih,rescode:Qd+(ih!==" "?"^"+ih:""),serial:Sh,atom:Ol,bonds:[],ss:"c",bondOrder:[],properties:{},b:Ah,pdbline:Wl})}else if(Gu==="SHEET "){Zu=Wl.substring(21,22),rd=parseInt(Wl.substring(22,26)),wd=parseInt(Wl.substring(33,37)),Zu in E||(E[Zu]={}),E[Zu][rd]="s1";for(let gd=rd+1;gd<wd;gd++)E[Zu][gd]="s";E[Zu][wd]="s2"}else if(Gu==="CONECT"){const gd=Xl[parseInt(Wl.substring(6,11))],jd=W[gd],Qd=[11,16,21,26];for(let ih=0;ih<4;ih++){const Hl=Xl[parseInt(Wl.substring(Qd[ih],Qd[ih]+5))];let Iu=gd+":"+Hl;const Fd=W[Hl];if(jd!==void 0&&Fd!==void 0)if(hu[Iu]){hu[Iu]+=1;for(let Ud=0;Ud<jd.bonds.length;Ud++)if(jd.bonds[Ud]==Hl){const eh=hu[Iu];jd.bondOrder[Ud]=eh>=4?1:eh}}else hu[Iu]=1,jd.bonds.length!=0&&jd.bonds[jd.bonds.length-1]===Hl||(jd.bonds.push(Hl),jd.bondOrder.push(1))}}else if(Gu==="HELIX "){Zu=Wl.substring(19,20),rd=parseInt(Wl.substring(21,25)),wd=parseInt(Wl.substring(33,37)),Zu in E||(E[Zu]={}),E[Zu][rd]="h1";for(let gd=rd+1;gd<wd;gd++)E[Zu][gd]="h";E[Zu][wd]="h2"}else if(Al||Gu!=="REMARK"||Wl.substring(13,18)!=="BIOMT"){if(Gu==="CRYST1"){let gd,jd,Qd,ih,Hl,Iu;gd=parseFloat(Wl.substring(7,15)),jd=parseFloat(Wl.substring(16,24)),Qd=parseFloat(Wl.substring(25,33)),ih=parseFloat(Wl.substring(34,40)),Hl=parseFloat(Wl.substring(41,47)),Iu=parseFloat(Wl.substring(48,54)),Fl.cryst={a:gd,b:jd,c:Qd,alpha:ih,beta:Hl,gamma:Iu}}else if(Gu==="ANISOU"){const gd=W[Xl[parseInt(Wl.substring(6,11))]];if(gd){const jd=Wl.substring(30).trim().split(/\s+/),Qd={u11:parseInt(jd[0]),u22:parseInt(jd[1]),u33:parseInt(jd[2]),u12:parseInt(jd[3]),u13:parseInt(jd[4]),u23:parseInt(jd[5])};gd.uMat=Qd}}}else{let gd,jd=new V.Matrix4;for(gd=1;gd<=3;gd++)if(Wl=dd[Jl].replace(/^\s*/,""),parseInt(Wl.substring(18,19))==gd)jd.elements[gd-1]=parseFloat(Wl.substring(23,33)),jd.elements[gd-1+4]=parseFloat(Wl.substring(33,43)),jd.elements[gd-1+8]=parseFloat(Wl.substring(43,53)),jd.elements[gd-1+12]=parseFloat(Wl.substring(53)),Jl++;else for(;Wl.substring(13,18)==="BIOMT";)Jl++,Wl=dd[Jl].replace(/^\s*/,"");jd.elements[3]=0,jd.elements[7]=0,jd.elements[11]=0,jd.elements[15]=1,Fl.symmetries.push(jd),Jl--}}if((function(Jl,Gu){for(let Zu=0,rd=Jl.length;Zu<rd;Zu++){const wd=Jl[Zu];for(let gd=0;gd<wd.bonds.length;gd++){const jd=Jl[wd.bonds[gd]],Qd=Gu[wd.serial];jd&&Qd&&jd.bonds.indexOf(Qd)<0&&(jd.bonds.push(Qd),jd.bondOrder.push(wd.bondOrder[gd]))}}})(W,Xl),Q&&Ih(W,f),Al||wh(Fl.symmetries,W,f,Fl.cryst),Cl&&!Ln&&Bu(W,f.hbondCutoff),!Cp(E))for(let Jl=0;Jl<W.length;Jl++){const Gu=W[Jl];if(Gu!==void 0&&Gu.chain in E&&Gu.resi in E[Gu.chain]){const Zu=E[Gu.chain][Gu.resi];Gu.ss=Zu[0],Zu.length>1&&(Zu[1]=="1"?Gu.ssbegin=!0:Zu[1]=="2"&&(Gu.ssend=!0))}}return[W,Fl,mu]}function mf(dd,f){f=f||{};var E=[],W={};E.modelData=[];for(var Q=dd.split(/\r?\n|\r/);Q.length>0;){var yl=vp(Q,f,W),Ln=yl[0],Cl=yl[1];if(Q=yl[2],Ln.length!=0){if(f.multimodel&&f.onemol&&E.length>0)for(var Al=E[0].length,vl=0;vl<Ln.length;vl++){var Fl=Ln[vl];Fl.index=vl;for(var Ol=0;Ol<Fl.bonds.length;Ol++)Fl.bonds[Ol]+=Al;E[0].push(Fl)}else E.modelData.push(Cl),E.push(Ln);if(!f.multimodel)break}}return E}function Zp(dd,f){var E=[[]],W=!f.noSecondaryStructure;E.modelData=[{symmetries:[]}];var Q,yl=[],Ln=dd.split(/\r?\n|\r/);for(let wd=0;wd<Ln.length;wd++){var Cl=(Q=Ln[wd].replace(/^\s*/,"")).substring(0,6);if(Cl.indexOf("END")==0){if(f.multimodel){f.onemol||E.push([]);continue}break}if(Cl=="ATOM  "||Cl=="HETATM"){var Al;let gd=parseInt(Q.substring(6,11)),jd=Q.substring(12,16).replace(/ /g,""),Qd=Q.substring(17,20).trim(),ih=Q.substring(21,22),Hl=parseInt(Q.substring(22,26));var vl=Q.substring(30).trim().split(/\s+/),Fl=parseFloat(vl[0]),Ol=parseFloat(vl[1]),mu=parseFloat(vl[2]),Xl=parseFloat(vl[3]),Wl=parseFloat(vl[4]),hu=jd[0];jd.length>1&&jd[1].toUpperCase()!=jd[1]&&(hu=jd.substring(0,2)),Al=Q[0]=="H",yl[gd]=E[E.length-1].length,E[E.length-1].push({resn:Qd,x:Fl,y:Ol,z:mu,elem:hu,hetflag:Al,chain:ih,resi:Hl,serial:gd,atom:jd,bonds:[],ss:"c",bondOrder:[],properties:{charge:Xl,partialCharge:Xl,radius:Wl},pdbline:Q})}else if(Cl=="CONECT"){var Jl=parseInt(Q.substring(6,11)),Gu=E[E.length-1][yl[Jl]];for(let gd=0;gd<4;gd++){var Zu=parseInt(Q.substring([11,16,21,26][gd],[11,16,21,26][gd]+5)),rd=E[E.length-1][yl[Zu]];Gu!==void 0&&rd!==void 0&&(Gu.bonds.push(yl[Zu]),Gu.bondOrder.push(1))}}}for(let wd=0;wd<E.length;wd++)Ih(E[wd],f),W&&Bu(E[wd],f.hbondCutoff);return E}var kf=s(471),Eg=function(dd){return String.fromCharCode.apply(null,dd).replace(/\0/g,"")},Gg=function(dd){return dd==0||dd==2||dd==4?"h":dd==3?"s":"c"};let Hf=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function Rg(dd,f){var E=!f.keepH,W=f.altLoc?f.altLoc:"A",Q=!!f.noSecondaryStructure,yl=!f.noComputeSecondaryStructure,Ln=!f.doAssembly,Cl=f.assemblyIndex?f.assemblyIndex:0;dd=typeof dd=="string"?(0,Et.base64ToArray)(dd):new Uint8Array(dd);var Al,vl,Fl,Ol,mu,Xl,Wl=kf.decode(dd),hu=[[]],Jl=hu.modelData=[],Gu=0,Zu=0,rd=0,wd=Wl.secStructList,gd=Wl.bFactorList,jd=Wl.altLocList,Qd=Wl.occupancyList,ih=Wl.bondAtomList,Hl=Wl.bondOrderList,Iu=Wl.numModels;if(Iu==0)return hu;f.multimodel||(Iu=1);var Fd=[];if(!Ln&&Wl.bioAssemblyList&&Wl.bioAssemblyList.length>0){var Ud=Wl.bioAssemblyList[Cl].transformList;for(Al=0,Xl=Ud.length;Al<Xl;Al++){var eh=new V.Matrix4(Ud[Al].matrix);eh.transpose(),Fd.push(eh)}}var Sh=null;if(Wl.unitCell){var Lh=Wl.unitCell;Sh={a:Lh[0],b:Lh[1],c:Lh[2],alpha:Lh[3],beta:Lh[4],gamma:Lh[5]}}let Ah=[];Wl.entityList.forEach(zu=>{zu.chainIndexList.forEach(el=>{Ah[el]=zu.type=="polymer"})});var yh=0;for(mu=0;mu<Iu;mu++){var Nh=Wl.chainsPerModel[mu],sh=hu[hu.length-1],Th=[];for(Jl.push({symmetries:Fd,cryst:Sh}),Al=0;Al<Nh;++Al){var dp=Wl.groupsPerChain[Gu],$h=Eg(Wl.chainIdList.subarray(4*Gu,4*Gu+4));Wl.chainNameList&&($h=Eg(Wl.chainNameList.subarray(4*Gu,4*Gu+4)));var ap=Zu,Yh="";for(vl=0;vl<dp;++vl){var Mh=Wl.groupList[Wl.groupTypeList[Zu]],pp=Mh.atomNameList.length,Ip=0,gp=!1,Xh=!1;if(wd){Ip=wd[Zu];var Qp=Gg(Ip);Zu!=0&&Qp==Yh||(gp=!0),Yh=Qp;var Wp=Zu+1;(Wp>=wd.length||Gg(wd[Wp]!=Qp))&&(Xh=!0)}var $p=Wl.groupIdList[Zu],Hp=Mh.groupName;let zu=Mh.chemCompType;var Vp=rd;let el=Hf.has(zu)||!Ah[Gu];for(Fl=0;Fl<pp;++Fl){var Op=Mh.elementList[Fl];if(E&&Op=="H")rd+=1;else{var Jp="";gd&&(Jp=gd[rd]);var Df="";jd&&jd[rd]&&(Df=String.fromCharCode(jd[rd]));var tm="";if(Qd&&(tm=Qd[rd]),Df==""||Df==W||W=="*"){var og=Wl.atomIdList[rd],tg=Mh.atomNameList[Fl],Zf=0;Mh.atomChargeList&&(Zf=Mh.atomChargeList[Fl]);var Xf=Wl.xCoordList[rd],Nf=Wl.yCoordList[rd],ag=Wl.zCoordList[rd];Th[rd]=sh.length,sh.push({resn:Hp,x:Xf,y:Nf,z:ag,elem:Op,hetflag:el,chain:$h,resi:$p,icode:Df,rescode:$p+(Df!=" "?"^"+Df:""),serial:og,altLoc:Df,index:rd,atom:tg,bonds:[],ss:Gg(Ip),ssbegin:gp,ssend:Xh,bondOrder:[],properties:{charge:Zf,occupancy:tm},b:Jp}),rd+=1}else rd+=1}}var vg=Mh.bondAtomList;for(Fl=0,Ol=Mh.bondOrderList.length;Fl<Ol;++Fl){var Pg=Vp+vg[2*Fl],cg=Vp+vg[2*Fl+1],kg=Mh.bondOrderList[Fl],Bf=Th[Pg],Tg=Th[cg],gg=sh[Bf],ve=sh[Tg];gg&&ve&&(gg.bonds.push(Tg),gg.bondOrder.push(kg),ve.bonds.push(Bf),ve.bondOrder.push(kg))}Zu+=1}for(Zu=ap,vl=0;vl<dp;++vl)Zu+=1;Gu+=1}if(ih)for(let zu=yh,el=ih.length;zu<el;zu+=2){let Bd=ih[zu],Od=ih[zu+1],Md=Hl?Hl[zu/2]:1;if(Bd>=rd){yh=zu;break}let jh=Th[Bd],ch=Th[Od],Dp=sh[jh],Ch=sh[ch];Dp&&Ch&&(Dp.bonds.push(ch),Dp.bondOrder.push(Md),Ch.bonds.push(jh),Ch.bondOrder.push(Md))}f.multimodel&&(f.onemol||hu.push([]))}if(!Ln)for(let zu=0;zu<hu.length;zu++)wh(Jl[zu].symmetries,hu[zu],f,Jl[zu].cryst);return yl&&!Q&&Bu(hu,f.hbondCutoff),hu}function fg(dd){var f,E=[],W=0,Q=dd.split(/\r?\n|\r/);if(!(Q.length>0&&Q[0].includes("VERSION")))return[];{var yl=Q.filter(function(Wl){return Wl.includes("POINTERS")||Wl.includes("ATOM_NAME")||Wl.includes("CHARGE")||Wl.includes("RADII")||Wl.includes("BONDS_INC_HYDROGEN")||Wl.includes("BONDS_WITHOUT_HYDROGEN")||Wl.includes("RESIDUE_LABEL")||Wl.includes("RESIDUE_POINTER")}),Ln=Ol("POINTERS");if(Ln==-1)return[];var Cl=mu(Ln),Al=parseInt(Q[Ln+1].slice(0,Cl[1]));let Xl=parseInt(Q[Ln+2].slice(Cl[1],Cl[0]+Cl[1]));if(isNaN(Al)||Al<=0)return[];if((Ln=Ol("ATOM_NAME"))==-1)return[];var vl=(Cl=mu(Ln))[0];for(let Wl=0;Wl<Al/Cl[0];Wl++){Wl==parseInt(Al/Cl[0])&&(vl=Al%Cl[0]);for(let hu=0;hu<vl;hu++){let Jl={},Gu={charge:"",radii:""};Jl.serial=W,Jl.x=0,Jl.y=0,Jl.z=0,Jl.atom=Q[Ln+1].slice(Cl[1]*hu,Cl[1]*(hu+1)).trim(),Jl.elem=Q[Ln+1].slice(Cl[1]*hu,Cl[1]*hu+1).trim(),Jl.properties=Gu,Jl.bonds=[],Jl.bondOrder=[],Jl.index=E.length,E.push(Jl),W++}Ln++}if((Ln=Ol("CHARGE"))!=-1){W=0,vl=(Cl=mu(Ln))[0];for(let Wl=0;Wl<Al/Cl[0];Wl++){Wl==parseInt(Al/Cl[0])&&(vl=Al%Cl[0]);for(let hu=0;hu<vl;hu++)E[W].properties.charge=parseFloat(Q[Ln+1].slice(Cl[1]*hu,Cl[1]*(hu+1))),W++;Ln++}}var Fl=[];if((Ln=Ol("RESIDUE_POINTER"))!=-1){vl=(Cl=mu(Ln))[0],Ln+=1;for(let Wl=0;Wl<Xl/Cl[0];Wl++){Wl==parseInt(Xl/Cl[0])&&(vl=Xl%Cl[0]);for(let hu=0;hu<vl;hu++)Fl.push(parseInt(Q[Ln].slice(Cl[1]*hu,Cl[1]*(hu+1))));Ln++}if((Ln=Ol("RESIDUE_LABEL"))!=-1){let Wl=[];vl=(Cl=mu(Ln))[0],Ln+=1;for(let Zu=0;Zu<Xl/Cl[0];Zu++){Zu==parseInt(Xl/Cl[0])&&(vl=Xl%Cl[0]);for(let rd=0;rd<vl;rd++)Wl.push(Q[Ln].slice(Cl[1]*rd,Cl[1]*(rd+1)).trim());Ln++}let hu=0,Jl=0,Gu="";Fl.push(E.length+1);for(let Zu=0;Zu<E.length;Zu++)Zu+1>=Fl[hu]&&(Gu=Wl[hu],hu+=1,Jl+=1),E[Zu].resi=Jl,E[Zu].resn=Gu}}if((Ln=Ol("RADII"))!=-1){W=0,vl=(Cl=mu(Ln))[0];for(let Wl=0;Wl<Al/Cl[0];Wl++){Wl==parseInt(Al/Cl[0])&&(vl=Al%Cl[0]);for(let hu=0;hu<vl;hu++)E[W].properties.radii=parseFloat(Q[Ln+1].slice(Cl[1]*hu,Cl[1]*(hu+1))),W++;Ln++}}if((Ln=Ol("BONDS_WITHOUT_HYDROGEN"))!=-1)for(W=0,vl=(Cl=mu(Ln))[0],Ln+=1;!Q[Ln].match(/^%FLAG/);){Q[Ln+1].match(/^%FLAG/)&&(vl=Al%Cl[0]);for(let Wl=0;Wl<vl;Wl++)W%3==0?f=parseInt(Q[Ln].slice(Cl[1]*Wl,Cl[1]*(Wl+1))/3):W%3==1&&(E[f].bonds.push(parseInt(Q[Ln].slice(Cl[1]*Wl,Cl[1]*(Wl+1))/3)),E[f].bondOrder.push(1)),W++;Ln++}if((Ln=Ol("BONDS_INC_HYDROGEN"))!=-1)for(W=0,vl=(Cl=mu(Ln))[0],Ln+=1;!Q[Ln].match(/^%FLAG/);){Q[Ln+1].match(/^%FLAG/)&&(vl=Al%Cl[0]);for(let Wl=0;Wl<vl;Wl++)W%3==0?f=parseInt(Q[Ln].slice(Cl[1]*Wl,Cl[1]*(Wl+1))/3):W%3==1&&(E[f].bonds.push(parseInt(Q[Ln].slice(Cl[1]*Wl,Cl[1]*(Wl+1))/3)),E[f].bonds.push(1)),W++;Ln++}}function Ol(Xl){var Wl=Q.indexOf(yl.filter(function(hu){return hu.includes(Xl)})[0]);if(Number.isInteger(Wl)&&Wl>0){for(;!Q[Wl].includes("FORMAT");)Wl++;return Wl}return-1}function mu(Xl){var Wl=Q[Xl].match(/\((\d*)\S*/),hu=Q[Xl].match(/[a-zA-Z](\d*)\)\s*/);return hu==null&&(hu=Q[Xl].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(Wl[1]),parseInt(hu[1])]}return[E]}function eg(dd,f){const E=[],W=dd.split(/\r?\n|\r/);for(;W.length>0;){const Q=parseInt(W[1]);if(W.length<3||isNaN(Q)||Q<=0||W.length<Q+3)break;const yl=[];E.push(yl);let Ln=2;const Cl=yl.length,Al=Cl+Q;for(let vl=Cl;vl<Al;vl++){const Fl=W[Ln++],Ol={};Ol.serial=vl,Ol.atom=Fl.slice(10,15).trim(),Ol.elem=yp(Ol.atom,!0),Ol.x=10*parseFloat(Fl.slice(20,28)),Ol.y=10*parseFloat(Fl.slice(28,36)),Ol.z=10*parseFloat(Fl.slice(36,44)),Ol.resi=parseInt(Fl.slice(0,5)),Ol.resn=Fl.slice(5,10).trim(),Ol.bonds=[],Ol.bondOrder=[],Ol.properties={},Fl.length>44&&(Ol.dx=10*parseFloat(Fl.slice(44,52)),Ol.dy=10*parseFloat(Fl.slice(52,60)),Ol.dz=10*parseFloat(Fl.slice(60,68))),yl[vl]=Ol}if(W.length<=Ln+3){const vl=W[Ln++].trim().split(/\s+/);if(vl.length===3){for(let Fl=0;Fl<3;Fl++)vl[Fl]=(10*parseFloat(vl[Fl])).toString();E.box=vl}}W.splice(0,++Ln)}for(let Q=0;Q<E.length;Q++)Ih(E[Q],f);return E}const Wg={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function Lg(dd,f){const E=[],W=dd.split(/\r?\n|\r/);let Q=0,yl=0,Ln=0;for(;Ln<W.length-9;){for(var Cl=Ln;Cl<W.length;Cl++)if(W[Cl].match(/ITEM: NUMBER OF ATOMS/)&&(yl=parseInt(W[Cl+1])),W[Cl].match(/ITEM: ATOMS/)){Q=Cl+1;break}const Al=W[Q-1].replace("ITEM: ATOMS ","").split(" ");E.push([]);for(let vl=Q;vl<Q+yl;vl++){const Fl={},Ol={},mu=W[vl].split(" ");for(let Xl=0;Xl<mu.length;Xl++){const Wl=Wg[Al[Xl]];Wl!==void 0&&(Wl==="serial"?Fl[Wl]=parseInt(mu[Xl]):Wl==="x"||Wl==="y"||Wl==="z"?Fl[Wl]=parseFloat(mu[Xl]):Wl==="charge"||Wl==="radius"?Ol[Wl]=parseFloat(mu[Xl]):Fl[Wl]=mu[Xl]),Fl.properties=Ol,Fl.bonds=[],Fl.bondOrder=[]}E[E.length-1][vl-Q]=Fl}Ln=Q+yl-1}if(f.assignBonds)for(let Al=0;Al<E.length;Al++)(0,Ed.assignBonds)(E[Al],f);return E}var $g;(function(dd){(function(f){f[f.Int8=1]="Int8",f[f.Int16=2]="Int16",f[f.Int32=3]="Int32",f[f.Uint8=4]="Uint8",f[f.Uint16=5]="Uint16",f[f.Uint32=6]="Uint32"})(dd.IntDataType||(dd.IntDataType={})),(function(f){f[f.Float32=32]="Float32",f[f.Float64=33]="Float64"})(dd.FloatDataType||(dd.FloatDataType={})),dd.getDataType=function(f){let E;return E=f instanceof Int8Array?dd.IntDataType.Int8:f instanceof Int16Array?dd.IntDataType.Int16:f instanceof Int32Array?dd.IntDataType.Int32:f instanceof Uint8Array?dd.IntDataType.Uint8:f instanceof Uint16Array?dd.IntDataType.Uint16:f instanceof Uint32Array?dd.IntDataType.Uint32:f instanceof Float32Array?dd.FloatDataType.Float32:f instanceof Float64Array?dd.FloatDataType.Float64:dd.IntDataType.Int32,E},dd.isSignedIntegerDataType=function(f){if(f instanceof Int8Array||f instanceof Int16Array||f instanceof Int32Array)return!0;for(let E=0,W=f.length;E<W;E++)if(E<0)return!1;return!0}})($g||($g={}));const Bm=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function Lm(dd){let f=dd.data;for(let E=dd.encoding.length-1;E>=0;E--)f=$m(f,dd.encoding[E]);return f}function $m(dd,f){switch(f.kind){case"ByteArray":switch(f.type){case $g.IntDataType.Uint8:return dd;case $g.IntDataType.Int8:return(function(E){return new Int8Array(E.buffer,E.byteOffset)})(dd);case $g.IntDataType.Int16:return(function(E){return xh(E,2,Int16Array)})(dd);case $g.IntDataType.Uint16:return(function(E){return xh(E,2,Uint16Array)})(dd);case $g.IntDataType.Int32:return(function(E){return xh(E,4,Int32Array)})(dd);case $g.IntDataType.Uint32:return(function(E){return xh(E,4,Uint32Array)})(dd);case $g.FloatDataType.Float32:return(function(E){return xh(E,4,Float32Array)})(dd);case $g.FloatDataType.Float64:return(function(E){return xh(E,8,Float64Array)})(dd);default:throw new Error("unreachable")}case"FixedPoint":return(function(E,W){const Q=E.length,yl=Zd(W.srcType,Q),Ln=1/W.factor;for(let Cl=0;Cl<Q;Cl++)yl[Cl]=Ln*E[Cl];return yl})(dd,f);case"IntervalQuantization":return(function(E,W){const Q=E.length,yl=Zd(W.srcType,Q),Ln=(W.max-W.min)/(W.numSteps-1),Cl=W.min;for(let Al=0;Al<Q;Al++)yl[Al]=Cl+Ln*E[Al];return yl})(dd,f);case"RunLength":return(function(E,W){const Q=_d(W.srcType,W.srcSize);let yl=0;for(let Ln=0,Cl=E.length;Ln<Cl;Ln+=2){const Al=E[Ln],vl=E[Ln+1];for(let Fl=0;Fl<vl;++Fl)Q[yl++]=Al}return Q})(dd,f);case"Delta":return(function(E,W){const Q=E.length,yl=_d(W.srcType,Q);if(!Q)return E;yl[0]=E[0]+(0|W.origin);for(let Ln=1;Ln<Q;++Ln)yl[Ln]=E[Ln]+yl[Ln-1];return yl})(dd,f);case"IntegerPacking":return(function(E,W){return E.length===W.srcSize?E:W.isUnsigned?(function(Q,yl){const Ln=yl.byteCount===1?255:65535,Cl=Q.length,Al=new Int32Array(yl.srcSize);let vl=0,Fl=0;for(;vl<Cl;){let Ol=0,mu=Q[vl];for(;mu===Ln;)Ol+=mu,vl++,mu=Q[vl];Ol+=mu,Al[Fl]=Ol,vl++,Fl++}return Al})(E,W):(function(Q,yl){const Ln=yl.byteCount===1?127:32767,Cl=-Ln-1,Al=Q.length,vl=new Int32Array(yl.srcSize);let Fl=0,Ol=0;for(;Fl<Al;){let mu=0,Xl=Q[Fl];for(;Xl===Ln||Xl===Cl;)mu+=Xl,Fl++,Xl=Q[Fl];mu+=Xl,vl[Ol]=mu,Fl++,Ol++}return vl})(E,W)})(dd,f);case"StringArray":return(function(E,W){const Q=Lm({encoding:W.offsetEncoding,data:W.offsets}),yl=Lm({encoding:W.dataEncoding,data:E}),Ln=W.stringData,Cl=new Array(Q.length);Cl[0]="";for(let Fl=1,Ol=Q.length;Fl<Ol;Fl++)Cl[Fl]=Ln.substring(Q[Fl-1],Q[Fl]);let Al=0;const vl=new Array(yl.length);for(let Fl=0,Ol=yl.length;Fl<Ol;Fl++)vl[Al++]=Cl[yl[Fl]+1];return vl})(dd,f)}}function _d(dd,f){switch(dd){case $g.IntDataType.Int8:return new Int8Array(f);case $g.IntDataType.Int16:return new Int16Array(f);case $g.IntDataType.Int32:return new Int32Array(f);case $g.IntDataType.Uint8:return new Uint8Array(f);case $g.IntDataType.Uint16:return new Uint16Array(f);case $g.IntDataType.Uint32:return new Uint32Array(f);default:return new Int32Array(f)}}function Zd(dd,f){switch(dd){case $g.FloatDataType.Float32:return new Float32Array(f);case $g.FloatDataType.Float64:default:return new Float64Array(f)}}function xh(dd,f,E){return dd.byteOffset==0&&dd.byteLength==dd.buffer.byteLength||(dd=new Uint8Array(dd)),new E(Bm?dd.buffer:(function(W,Q){const yl=new ArrayBuffer(W.length),Ln=new Uint8Array(yl);for(let Cl=0,Al=W.length;Cl<Al;Cl+=Q)for(let vl=0;vl<Q;vl++)Ln[Cl+Q-vl-1]=W[Cl+vl];return yl})(dd,f))}function Fp(dd){const f=Object.create(null),E=Object.create(null);for(const W of dd.columns)f[W.name]=W;return{rowCount:dd.rowCount,name:dd.name.substring(1),fieldNames:dd.columns.map(W=>W.name),getField(W){const Q=f[W];if(Q)return E[W]||(E[W]=Lm(Q.data)),E[W]}}}var ip=s(471);class cf{constructor(f){if(this.C={},f){let E=f.getField("comp_id"),W=f.getField("atom_id_1"),Q=f.getField("atom_id_2"),yl=f.getField("value_order");for(let Ln=0;Ln<E.length;Ln++){let Cl=E[Ln],Al=W[Ln],vl=Q[Ln],Fl=yl[Ln],Ol=1;Fl=="doub"?Ol=2:Fl=="trip"&&(Ol=3),this.C[Cl]==null&&(this.C[Cl]={}),this.C[Cl][Al]==null&&(this.C[Cl][Al]={}),this.C[Cl][vl]==null&&(this.C[Cl][vl]={}),this.C[Cl][Al][vl]=Ol,this.C[Cl][vl][Al]=Ol}}}order(f,E,W){return this.C[f]!==void 0&&this.C[f][E]!==void 0&&this.C[f][E][W]!==void 0?this.C[f][E][W]:0}}class Jh{constructor(f){if(this.C=[],f){let E=f.getField("conn_type_id"),W=f.getField("ptnr1_label_asym_id"),Q=f.getField("ptnr1_label_seq_id"),yl=f.getField("ptnr1_label_comp_id"),Ln=f.getField("ptnr1_label_atom_id"),Cl=f.getField("ptnr2_label_asym_id"),Al=f.getField("ptnr2_label_seq_id"),vl=f.getField("ptnr2_label_comp_id"),Fl=f.getField("ptnr2_label_atom_id"),Ol=f.getField("pdbx_value_order");for(let mu=0;mu<E.length;mu++)if(E[mu]=="disulf"||E[mu]=="covale"){let Xl=Ol?Ol[mu]==""?1:parseInt(Ol[mu]):1;this.C.push([[W[mu],Q[mu],yl[mu],Ln[mu]],[Cl[mu],Al[mu],vl[mu],Fl[mu]],Xl])}}}}class lf{constructor(){this.R={}}add(f){this.R[f.lchain]==null&&(this.R[f.lchain]={}),this.R[f.lchain][f.lresi]==null&&(this.R[f.lchain][f.lresi]={}),this.R[f.lchain][f.lresi][f.lresn]==null&&(this.R[f.lchain][f.lresi][f.lresn]=[]),this.R[f.lchain][f.lresi][f.lresn].push(f),this.R[f.lchain][f.lresi][f.lresn][f.atom]=f}geta([f,E,W,Q]){if(this.R[f]!==void 0&&this.R[f][E]!==void 0&&this.R[f][E][W]!==void 0)return this.R[f][E][W][Q]}setBonds(f,E){for(let W in this.R)for(let Q in this.R[W])for(let yl in this.R[W][Q]){let Ln=this.R[W][Q][yl];for(let Cl=0;Cl<Ln.length;Cl++)for(let Al=Cl+1;Al<Ln.length;Al++){let vl=Ln[Cl],Fl=Ln[Al],Ol=f.order(yl,vl.atom,Fl.atom);vl.altLoc!=Fl.altLoc&&vl.altLoc!=""&&Fl.altLoc!=""&&(Ol=0),Ol>0&&(vl.bonds.push(Fl.index),Fl.bonds.push(vl.index),vl.bondOrder.push(Ol),Fl.bondOrder.push(Ol))}}for(let W of E.C){let Q=W[0],yl=W[1],Ln=W[2],Cl=this.geta(Q),Al=this.geta(yl);Cl!=null&&Al!=null&&(Cl.bonds.push(Al.index),Al.bonds.push(Cl.index),Cl.bondOrder.push(Ln),Al.bondOrder.push(Ln))}}}function vf(dd,f){var E=!f.keepH,W=f.altLoc?f.altLoc:"A",Q=!f.noComputeSecondaryStructure;const yl=!f.doAssembly,Ln=f.assignBonds===void 0||f.assignBonds;if(typeof dd=="string")try{dd=(0,Et.base64ToArray)(dd)}catch{dd=new TextEncoder().encode(dd)}else dd=new Uint8Array(dd);var Cl=ip.decodeMsgpack(dd);Cl==31&&(dd=(0,Et.inflateString)(dd,!1),Cl=ip.decodeMsgpack(dd));var Al=[],vl=Al.modelData=[],Fl=Cl.dataBlocks.length;if(Fl==0)return Al;f.multimodel||(Fl=1);for(let Ol=0;Ol<Fl;Ol++){let mu=Al.length;const Xl=[];vl.push({symmetries:[]}),Al.push([]);const Wl=Cl.dataBlocks[Ol],hu=Object.create(null);for(const gp of Wl.categories)hu[gp.name.substr(1)]=Fp(gp);let Jl={},Gu=hu.struct_conf;if(Gu){let gp=Gu.getField("conf_type_id"),Xh=Gu.getField("beg_label_asym_id"),Qp=Gu.getField("beg_label_seq_id"),Wp=Gu.getField("end_label_seq_id");for(let $p=0;$p<gp.length;$p++)if(gp[$p].startsWith("H")){let Hp=Xh[$p],Vp=Qp[$p],Op=Wp[$p];Hp in Jl||(Jl[Hp]={}),Jl[Hp][Vp]="h1";for(let Jp=Vp+1;Jp<Op;Jp++)Jl[Hp][Jp]="h";Jl[Hp][Op]="h2"}}let Zu=hu.struct_sheet_range;if(Zu){let gp=Zu.getField("id"),Xh=Zu.getField("beg_label_asym_id"),Qp=Zu.getField("beg_label_seq_id"),Wp=Zu.getField("end_label_seq_id");for(let $p=0;$p<gp.length;$p++){let Hp=Xh[$p],Vp=Qp[$p],Op=Wp[$p];Hp in Jl||(Jl[Hp]={}),Jl[Hp][Vp]="s1";for(let Jp=Vp+1;Jp<Op;Jp++)Jl[Hp][Jp]="s";Jl[Hp][Op]="s2"}}let rd=hu.pdbx_struct_oper_list,wd=rd.getField("id");if(wd&&!yl){let gp=rd.getField("matrix[1][1]"),Xh=rd.getField("matrix[1][2]"),Qp=rd.getField("matrix[1][3]"),Wp=rd.getField("matrix[2][1]"),$p=rd.getField("matrix[2][2]"),Hp=rd.getField("matrix[2][3]"),Vp=rd.getField("matrix[3][1]"),Op=rd.getField("matrix[3][2]"),Jp=rd.getField("matrix[3][3]"),Df=rd.getField("vector[1]"),tm=rd.getField("vector[2]"),og=rd.getField("vector[3]");for(let tg=0;tg<wd.length;tg++){const Zf=new V.Matrix4(gp[tg],Xh[tg],Qp[tg],Df[tg],Wp[tg],$p[tg],Hp[tg],tm[tg],Vp[tg],Op[tg],Jp[tg],og[tg]);vl[vl.length-1].symmetries.push(Zf)}}let gd=new cf(hu.chem_comp_bond),jd=new lf,Qd=new Jh(hu.struct_conn),ih=hu.atom_site,Hl=ih.rowCount,Iu=ih.getField("group_PDB"),Fd=ih.getField("Cartn_x"),Ud=ih.getField("Cartn_y"),eh=ih.getField("Cartn_z"),Sh=ih.getField("auth_asym_id"),Lh=ih.getField("label_asym_id"),Ah=ih.getField("auth_seq_id"),yh=ih.getField("label_seq_id"),Nh=ih.getField("auth_comp_id"),sh=ih.getField("label_comp_id"),Th=ih.getField("auth_atom_id"),dp=ih.getField("label_atom_id"),$h=ih.getField("type_symbol"),ap=ih.getField("B_iso_or_equiv"),Yh=ih.getField("id"),Mh=ih.getField("label_alt_id"),pp=ih.getField("pdbx_PDB_model_num"),Ip=pp?pp[0]:0;for(let gp=0;gp<Hl;gp++){if(Iu!==void 0&&Iu[gp]==="TER")continue;if(pp&&pp[gp]!=Ip){if(Ip=pp[gp],!f.multimodel)break;f.onemol||(Al.push([]),vl.push(vl[vl.length-1]),Ip=pp[gp],jd.setBonds(gd,Qd),jd=new lf)}const Xh={};Xh.x=Fd[gp],Xh.y=Ud[gp],Xh.z=eh[gp],Xh.chain=Sh?Sh[gp]:Lh?Lh[gp]:void 0,Xh.lchain=Lh?Lh[gp]:void 0,Xh.resi=Ah?Ah[gp]:yh?yh[gp]:void 0,Xh.lresi=yh?yh[gp]:void 0,Xh.resn=Nh?Nh[gp].trim():sh?sh[gp].trim():void 0,Xh.lresn=sh?sh[gp].trim():void 0,Xh.atom=Th?Th[gp].replace(/"/gm,""):dp?dp[gp].replace(/"/gm,""):void 0,Xh.icode=Mh?Mh[gp]:void 0,Xh.altLoc=Xh.icode,Xh.hetflag=!Iu||Iu[gp]==="HETA"||Iu[gp]==="HETATM";let Qp="X";$h&&(Qp=$h[gp].replace(/\(?\+?\d+.*/,"")),Xh.elem=Qp[0].toUpperCase()+Qp.substring(1,2).toLowerCase(),ap&&(Xh.b=ap[gp]),E&&Xh.elem=="H"||Xh.altLoc!=""&&Xh.altLoc!=W&&W!="*"||(Xh.bonds=[],Xh.ss="c",Xh.serial=Yh[gp],Xh.model=Ip,Xh.bondOrder=[],Xh.properties={},Xh.index=Al[Al.length-1].length,Xl[Xh.serial]=[Al.length,Xh.index],Al[Al.length-1].push(Xh),jd.add(Xh))}if(jd.setBonds(gd,Qd),!Cp(Jl))for(let gp=mu;gp<Al.length;gp++){let Xh=Al[gp];for(let Qp=0;Qp<Xh.length;Qp++){const Wp=Xh[Qp];if(Wp!==void 0&&Wp.lchain in Jl&&Wp.lresi in Jl[Wp.lchain]){const $p=Jl[Wp.lchain][Wp.lresi];Wp.ss=$p[0],$p.length>1&&($p[1]=="1"?Wp.ssbegin=!0:$p[1]=="2"&&(Wp.ssend=!0))}}}f.multimodel&&Ol<Fl-1&&(f.onemol||(Al.push([]),vl.push({symmetries:[]})))}for(let Ol=0;Ol<Al.length;Ol++)!Ln||f.duplicateAssemblyAtoms&&!f.dontConnectDuplicatedAtoms||Ih(Al[Ol],f),Q&&Bu(Al[Ol],f.hbondCutoff),wh(vl[Ol].symmetries,Al[Ol],f,vl[Ol].cryst),f.duplicateAssemblyAtoms&&!f.dontConnectDuplicatedAtoms&&Ln&&Ih(Al[Ol],f);return Al}const uf={vasp:qd.VASP,VASP:qd.VASP,cube:oh.CUBE,CUBE:oh.CUBE,xyz:Nl,XYZ:Nl,sdf:Gd,SDF:Gd,json:Cd,cdjson:Cd,CDJSON:Cd,mcif:Yd,cif:Yd,CIF:Yd,mol2:rp,MOL2:rp,pdb:mf,PDB:mf,pdbqt:mf,PDBQT:mf,pqr:Zp,PQR:Zp,mmtf:Rg,MMTF:Rg,prmtop:fg,PRMTOP:fg,gro:eg,GRO:eg,lammpstrj:Lg,LAMMPSTRJ:Lg,bcif:vf,BCIF:vf};function Gf(dd,f="utf8"){return new TextDecoder(f).decode(dd)}const Hm=new TextEncoder,Vg=(()=>{const dd=new Uint8Array(4);return!((new Uint32Array(dd.buffer)[0]=1)&dd[0])})(),Im={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class qg{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(f=8192,E={}){let W=!1;typeof f=="number"?f=new ArrayBuffer(f):(W=!0,this.lastWrittenByte=f.byteLength);const Q=E.offset?E.offset>>>0:0,yl=f.byteLength-Q;let Ln=Q;(ArrayBuffer.isView(f)||f instanceof qg)&&(f.byteLength!==f.buffer.byteLength&&(Ln=f.byteOffset+Q),f=f.buffer),this.lastWrittenByte=W?yl:0,this.buffer=f,this.length=yl,this.byteLength=yl,this.byteOffset=Ln,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,Ln,yl),this._mark=0,this._marks=[]}available(f=1){return this.offset+f<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(f=1){return this.offset+=f,this}back(f=1){return this.offset-=f,this}seek(f){return this.offset=f,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const f=this._marks.pop();if(f===void 0)throw new Error("Mark stack empty");return this.seek(f),this}rewind(){return this.offset=0,this}ensureAvailable(f=1){if(!this.available(f)){const E=2*(this.offset+f),W=new Uint8Array(E);W.set(new Uint8Array(this.buffer)),this.buffer=W.buffer,this.length=E,this.byteLength=E,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(f=1){return this.readArray(f,"uint8")}readArray(f,E){const W=Im[E].BYTES_PER_ELEMENT*f,Q=this.byteOffset+this.offset,yl=this.buffer.slice(Q,Q+W);if(this.littleEndian===Vg&&E!=="uint8"&&E!=="int8"){const Cl=new Uint8Array(this.buffer.slice(Q,Q+W));Cl.reverse();const Al=new Im[E](Cl.buffer);return this.offset+=W,Al.reverse(),Al}const Ln=new Im[E](yl);return this.offset+=W,Ln}readInt16(){const f=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,f}readUint16(){const f=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,f}readInt32(){const f=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,f}readUint32(){const f=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,f}readFloat32(){const f=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,f}readFloat64(){const f=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,f}readBigInt64(){const f=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,f}readBigUint64(){const f=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,f}readChar(){return String.fromCharCode(this.readInt8())}readChars(f=1){let E="";for(let W=0;W<f;W++)E+=this.readChar();return E}readUtf8(f=1){return Gf(this.readBytes(f))}decodeText(f=1,E="utf8"){return Gf(this.readBytes(f),E)}writeBoolean(f){return this.writeUint8(f?255:0),this}writeInt8(f){return this.ensureAvailable(1),this._data.setInt8(this.offset++,f),this._updateLastWrittenByte(),this}writeUint8(f){return this.ensureAvailable(1),this._data.setUint8(this.offset++,f),this._updateLastWrittenByte(),this}writeByte(f){return this.writeUint8(f)}writeBytes(f){this.ensureAvailable(f.length);for(let E=0;E<f.length;E++)this._data.setUint8(this.offset++,f[E]);return this._updateLastWrittenByte(),this}writeInt16(f){return this.ensureAvailable(2),this._data.setInt16(this.offset,f,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(f){return this.ensureAvailable(2),this._data.setUint16(this.offset,f,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(f){return this.ensureAvailable(4),this._data.setInt32(this.offset,f,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(f){return this.ensureAvailable(4),this._data.setUint32(this.offset,f,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(f){return this.ensureAvailable(4),this._data.setFloat32(this.offset,f,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(f){return this.ensureAvailable(8),this._data.setFloat64(this.offset,f,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(f){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,f,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(f){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,f,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(f){return this.writeUint8(f.charCodeAt(0))}writeChars(f){for(let E=0;E<f.length;E++)this.writeUint8(f.charCodeAt(E));return this}writeUtf8(f){return this.writeBytes((function(E){return Hm.encode(E)})(f))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const vm=1,am=2,Jg=3,pf=4,ff=5,r0=6;function M0(dd){switch(Number(dd)){case vm:return"byte";case am:return"char";case Jg:return"short";case pf:return"int";case ff:return"float";case r0:return"double";default:return"undefined"}}function wf(dd){switch(Number(dd)){case vm:case am:return 1;case Jg:return 2;case pf:case ff:return 4;case r0:return 8;default:return-1}}function Gm(dd){switch(String(dd)){case"byte":return vm;case"char":return am;case"short":return Jg;case"int":return pf;case"float":return ff;case"double":return r0;default:return-1}}function h0(dd,f){if(dd!==1){const E=new Array(dd);for(let W=0;W<dd;W++)E[W]=f();return E}return f()}function i0(dd,f,E){switch(f){case vm:return Array.from(dd.readBytes(E));case am:return(W=dd.readChars(E)).charCodeAt(W.length-1)===0?W.substring(0,W.length-1):W;case Jg:return h0(E,dd.readInt16.bind(dd));case pf:return h0(E,dd.readInt32.bind(dd));case ff:return h0(E,dd.readFloat32.bind(dd));case r0:return h0(E,dd.readFloat64.bind(dd));default:throw new Error(`non valid type ${f}`)}var W}function Tm(dd,f){if(dd)throw new TypeError(`Not a valid NetCDF v3.x file: ${f}`)}function Vm(dd){dd.offset%4!=0&&dd.skip(4-dd.offset%4)}function ym(dd){const f=dd.readUint32(),E=dd.readChars(f);return Vm(dd),E}function l0(dd,f){const E={version:f},W={length:dd.readUint32()},Q=(function(Ln){const Cl={};let Al,vl;const Fl=Ln.readUint32();let Ol;if(Fl===0)return Tm(Ln.readUint32()!==0,"wrong empty tag for list of dimensions"),[];{Tm(Fl!==10,"wrong tag for list of dimensions");const mu=Ln.readUint32();Ol=new Array(mu);for(let Xl=0;Xl<mu;Xl++){const Wl=ym(Ln),hu=Ln.readUint32();hu===0&&(Al=Xl,vl=Wl),Ol[Xl]={name:Wl,size:hu}}}return Al!==void 0&&(Cl.recordId=Al),vl!==void 0&&(Cl.recordName=vl),Cl.dimensions=Ol,Cl})(dd);Array.isArray(Q)||(W.id=Q.recordId,W.name=Q.recordName,E.dimensions=Q.dimensions),E.globalAttributes=R0(dd);const yl=(function(Ln,Cl,Al){const vl=Ln.readUint32();let Fl,Ol=0;if(vl===0)return Tm(Ln.readUint32()!==0,"wrong empty tag for list of variables"),[];{Tm(vl!==11,"wrong tag for list of variables");const mu=Ln.readUint32();Fl=new Array(mu);for(let Xl=0;Xl<mu;Xl++){const Wl=ym(Ln),hu=Ln.readUint32(),Jl=new Array(hu);for(let jd=0;jd<hu;jd++)Jl[jd]=Ln.readUint32();const Gu=R0(Ln),Zu=Ln.readUint32();Tm(Zu<1&&Zu>6,`non valid type ${Zu}`);const rd=Ln.readUint32();let wd=Ln.readUint32();Al===2&&(Tm(wd>0,"offsets larger than 4GB not supported"),wd=Ln.readUint32());let gd=!1;Cl!==void 0&&Jl[0]===Cl&&(Ol+=rd,gd=!0),Fl[Xl]={name:Wl,dimensions:Jl,attributes:Gu,type:M0(Zu),size:rd,offset:wd,record:gd}}}return{variables:Fl,recordStep:Ol}})(dd,W?.id,f);return Array.isArray(yl)||(E.variables=yl.variables,W.recordStep=yl.recordStep),E.recordDimension=W,E}function R0(dd){const f=dd.readUint32();let E;if(f===0)return Tm(dd.readUint32()!==0,"wrong empty tag for list of attributes"),[];{Tm(f!==12,"wrong tag for list of attributes");const W=dd.readUint32();E=new Array(W);for(let Q=0;Q<W;Q++){const yl=ym(dd),Ln=dd.readUint32();Tm(Ln<1||Ln>6,`non valid type ${Ln}`);const Cl=dd.readUint32(),Al=i0(dd,Ln,Cl);Vm(dd),E[Q]={name:yl,type:M0(Ln),value:Al}}}return E}function p0(){const dd=[];dd.push("DIMENSIONS");for(const E of this.dimensions)dd.push(`  ${E.name.padEnd(30)} = size: ${E.size}`);dd.push(""),dd.push("GLOBAL ATTRIBUTES");for(const E of this.globalAttributes)dd.push(`  ${E.name.padEnd(30)} = ${E.value}`);const f=JSON.parse(JSON.stringify(this.variables));dd.push(""),dd.push("VARIABLES:");for(const E of f){E.value=this.getDataVariable(E);let W=JSON.stringify(E.value);W.length>50&&(W=W.substring(0,50)),isNaN(E.value.length)||(W+=` (length: ${E.value.length})`),dd.push(`  ${E.name.padEnd(30)} = ${W}`)}return dd.join(`
`)}class j0{constructor(f){this.toString=p0;const E=new qg(f);E.setBigEndian(),Tm(E.readChars(3)!=="CDF","should start with CDF");const W=E.readByte();Tm(W>2,"unknown version"),this.header=l0(E,W),this.buffer=E}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(f){const E=this.globalAttributes.find(W=>W.name===f);return E?E.value:null}getDataVariableAsString(f){const E=this.getDataVariable(f);return E?E.join(""):null}get variables(){return this.header.variables}getDataVariable(f){let E;if(E=typeof f=="string"?this.header.variables.find(W=>W.name===f):f,E===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(E.offset),E.record?(function(W,Q,yl){const Ln=Gm(Q.type),Cl=Q.size?Q.size/wf(Ln):1,Al=yl.length,vl=new Array(Al),Fl=yl.recordStep;if(!Fl)throw new Error("recordDimension.recordStep is undefined");for(let Ol=0;Ol<Al;Ol++){const mu=W.offset;vl[Ol]=i0(W,Ln,Cl),W.seek(mu+Fl)}return vl})(this.buffer,E,this.header.recordDimension):(function(W,Q){const yl=Gm(Q.type),Ln=Q.size/wf(yl),Cl=new Array(Ln);for(let Al=0;Al<Ln;Al++)Cl[Al]=i0(W,yl,1);return Cl})(this.buffer,E)}dataVariableExists(f){return this.header.variables.find(E=>E.name===f)!==void 0}attributeExists(f){return this.globalAttributes.find(E=>E.name===f)!==void 0}}class lg{static sameObj(f,E){return f&&E?JSON.stringify(f)==JSON.stringify(E):f==E}constructor(f,E,W){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new Y.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=ie.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=E||{},this.viewer=W,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:ie.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=f}getRadiusFromStyle(f,E){var W=this.defaultSphereRadius;if(E.radius!==void 0)W=E.radius;else if(lg.vdwRadii[f.elem])W=lg.vdwRadii[f.elem];else if(f.elem.length>1){let Q=f.elem;Q=Q[0].toUpperCase()+Q[1].toLowerCase(),lg.vdwRadii[Q]&&(W=lg.vdwRadii[Q])}return E.scale!==void 0&&(W*=E.scale),W}drawAtomCross(f,E){if(f.style.cross){var W=f.style.cross;if(!W.hidden){var Q=W.linewidth||lg.defaultlineWidth;E[Q]||(E[Q]=new V.Geometry);var yl=E[Q].updateGeoGroup(6),Ln=this.getRadiusFromStyle(f,W),Cl=[[Ln,0,0],[-Ln,0,0],[0,Ln,0],[0,-Ln,0],[0,0,Ln],[0,0,-Ln]],Al=f.clickable||f.hoverable;Al&&f.intersectionShape===void 0&&(f.intersectionShape={sphere:[],cylinder:[],line:[]});for(var vl=(0,Et.getColorFromStyle)(f,W),Fl=yl.vertexArray,Ol=yl.colorArray,mu=0;mu<6;mu++){var Xl=3*yl.vertices;if(yl.vertices++,Fl[Xl]=f.x+Cl[mu][0],Fl[Xl+1]=f.y+Cl[mu][1],Fl[Xl+2]=f.z+Cl[mu][2],Ol[Xl]=vl.r,Ol[Xl+1]=vl.g,Ol[Xl+2]=vl.b,Al){var Wl=new Y.Vector3(Cl[mu][0],Cl[mu][1],Cl[mu][2]);Wl.multiplyScalar(.1),Wl.set(Wl.x+f.x,Wl.y+f.y,Wl.z+f.z),f.intersectionShape.line.push(Wl)}}}}}getGoodCross(f,E,W,Q){for(var yl=null,Ln=-1,Cl=0,Al=f.bonds.length;Cl<Al;Cl++)if(f.bonds[Cl]!=E.index){let Fl=f.bonds[Cl],Ol=this.atoms[Fl],mu=new Y.Vector3(Ol.x,Ol.y,Ol.z).clone();mu.sub(W);let Xl=mu.clone();Xl.cross(Q);var vl=Xl.lengthSq();if(vl>Ln&&(yl=Xl,(Ln=vl)>.1))return yl}return yl}getSideBondV(f,E,W){var Q,yl,Ln,Cl,Al=new Y.Vector3(f.x,f.y,f.z),vl=new Y.Vector3(E.x,E.y,E.z).clone(),Fl=null;if(vl.sub(Al),f.bonds.length===1)E.bonds.length===1?(Fl=vl.clone(),Math.abs(Fl.x)>1e-4?Fl.y+=1:Fl.x+=1):(Q=(W+1)%E.bonds.length,yl=E.bonds[Q],(Ln=this.atoms[yl]).index==f.index&&(Q=(Q+1)%E.bonds.length,yl=E.bonds[Q],Ln=this.atoms[yl]),(Cl=new Y.Vector3(Ln.x,Ln.y,Ln.z).clone()).sub(Al),(Fl=Cl.clone()).cross(vl));else if((Fl=this.getGoodCross(f,E,Al,vl)).lengthSq()<.01){var Ol=this.getGoodCross(E,f,Al,vl);Ol!=null&&(Fl=Ol)}return Fl.lengthSq()<.01&&(Fl=vl.clone(),Math.abs(Fl.x)>1e-4?Fl.y+=1:Fl.x+=1),Fl.cross(vl),Fl.normalize(),Fl}addLine(f,E,W,Q,yl,Ln){f[W]=Q.x,f[W+1]=Q.y,f[W+2]=Q.z,E[W]=Ln.r,E[W+1]=Ln.g,E[W+2]=Ln.b,f[W+3]=yl.x,f[W+4]=yl.y,f[W+5]=yl.z,E[W+3]=Ln.r,E[W+4]=Ln.g,E[W+5]=Ln.b}drawBondLines(f,E,W){if(f.style.line){var Q=f.style.line;if(!Q.hidden){var yl,Ln,Cl,Al,vl=Q.linewidth||lg.defaultlineWidth;W[vl]||(W[vl]=new V.Geometry);for(var Fl=W[vl].updateGeoGroup(6*f.bonds.length),Ol=Fl.vertexArray,mu=Fl.colorArray,Xl=0;Xl<f.bonds.length;Xl++){var Wl=E[f.bonds[Xl]];if(Wl.style.line&&!(f.index>=Wl.index)){var hu=new Y.Vector3(f.x,f.y,f.z),Jl=new Y.Vector3(Wl.x,Wl.y,Wl.z),Gu=hu.clone().add(Jl).multiplyScalar(.5),Zu=!1,rd=f.clickable||f.hoverable,wd=Wl.clickable||Wl.hoverable;(rd||wd)&&(rd&&(f.intersectionShape===void 0&&(f.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),f.intersectionShape.line.push(hu),f.intersectionShape.line.push(Gu)),wd&&(Wl.intersectionShape===void 0&&(Wl.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Wl.intersectionShape.line.push(Gu),Wl.intersectionShape.line.push(Jl)));var gd=(0,Et.getColorFromStyle)(f,f.style.line),jd=(0,Et.getColorFromStyle)(Wl,Wl.style.line);if(f.bondStyles&&f.bondStyles[Xl]){var Qd=f.bondStyles[Xl];if(!Qd.iswire)continue;Qd.singleBond&&(Zu=!0),Qd.color1!==void 0&&(gd=ie.CC.color(Qd.color1)),Qd.color2!==void 0&&(jd=ie.CC.color(Qd.color2))}var ih,Hl,Iu=3*Fl.vertices;if(f.bondOrder[Xl]>1&&f.bondOrder[Xl]<4&&!Zu){var Fd=this.getSideBondV(f,Wl,Xl),Ud=Jl.clone();Ud.sub(hu),f.bondOrder[Xl]==2?(Fd.multiplyScalar(.1),(yl=hu.clone()).add(Fd),(Ln=hu.clone()).sub(Fd),(Cl=yl.clone()).add(Ud),(Al=Ln.clone()).add(Ud),gd==jd?(Fl.vertices+=4,this.addLine(Ol,mu,Iu,yl,Cl,gd),this.addLine(Ol,mu,Iu+6,Ln,Al,gd)):(Fl.vertices+=8,Ud.multiplyScalar(.5),(ih=yl.clone()).add(Ud),(Hl=Ln.clone()).add(Ud),this.addLine(Ol,mu,Iu,yl,ih,gd),this.addLine(Ol,mu,Iu+6,ih,Cl,jd),this.addLine(Ol,mu,Iu+12,Ln,Hl,gd),this.addLine(Ol,mu,Iu+18,Hl,Al,jd))):f.bondOrder[Xl]==3&&(Fd.multiplyScalar(.1),(yl=hu.clone()).add(Fd),(Ln=hu.clone()).sub(Fd),(Cl=yl.clone()).add(Ud),(Al=Ln.clone()).add(Ud),gd==jd?(Fl.vertices+=6,this.addLine(Ol,mu,Iu,hu,Jl,gd),this.addLine(Ol,mu,Iu+6,yl,Cl,gd),this.addLine(Ol,mu,Iu+12,Ln,Al,gd)):(Fl.vertices+=12,Ud.multiplyScalar(.5),(ih=yl.clone()).add(Ud),(Hl=Ln.clone()).add(Ud),this.addLine(Ol,mu,Iu,hu,Gu,gd),this.addLine(Ol,mu,Iu+6,Gu,Jl,jd),this.addLine(Ol,mu,Iu+12,yl,ih,gd),this.addLine(Ol,mu,Iu+18,ih,Cl,jd),this.addLine(Ol,mu,Iu+24,Ln,Hl,gd),this.addLine(Ol,mu,Iu+30,Hl,Al,jd)))}else gd==jd?(Fl.vertices+=2,this.addLine(Ol,mu,Iu,hu,Jl,gd)):(Fl.vertices+=4,this.addLine(Ol,mu,Iu,hu,Gu,gd),this.addLine(Ol,mu,Iu+6,Gu,Jl,jd))}}}}}drawAtomSphere(f,E){if(f.style.sphere){var W=f.style.sphere;if(!W.hidden){var Q=(0,Et.getColorFromStyle)(f,W),yl=this.getRadiusFromStyle(f,W);if((f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var Ln=new Y.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new oe.Sphere(Ln,yl))}M.drawSphere(E,f,yl,Q)}}}drawAtomClickSphere(f){if(f.style.clicksphere){var E=f.style.clicksphere;if(!E.hidden){var W=this.getRadiusFromStyle(f,E);if((f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var Q=new Y.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new oe.Sphere(Q,W))}}}}drawAtomInstanced(f,E){if(f.style.sphere){var W=f.style.sphere;if(!W.hidden){var Q=this.getRadiusFromStyle(f,W),yl=(0,Et.getColorFromStyle)(f,W),Ln=E.updateGeoGroup(1),Cl=Ln.vertices,Al=3*Cl,vl=Ln.vertexArray,Fl=Ln.colorArray,Ol=Ln.radiusArray;if(vl[Al]=f.x,vl[Al+1]=f.y,vl[Al+2]=f.z,Fl[Al]=yl.r,Fl[Al+1]=yl.g,Fl[Al+2]=yl.b,Ol[Cl]=Q,(f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var mu=new Y.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new oe.Sphere(mu,Q))}Ln.vertices+=1}}}drawSphereImposter(f,E,W,Q){var yl,Ln=f.updateGeoGroup(4),Cl=Ln.vertices,Al=3*Cl,vl=Ln.vertexArray,Fl=Ln.colorArray;for(yl=0;yl<4;yl++)vl[Al+3*yl]=E.x,vl[Al+3*yl+1]=E.y,vl[Al+3*yl+2]=E.z;var Ol=Ln.normalArray;for(yl=0;yl<4;yl++)Fl[Al+3*yl]=Q.r,Fl[Al+3*yl+1]=Q.g,Fl[Al+3*yl+2]=Q.b;Ol[Al+0]=-W,Ol[Al+1]=W,Ol[Al+2]=0,Ol[Al+3]=-W,Ol[Al+4]=-W,Ol[Al+5]=0,Ol[Al+6]=W,Ol[Al+7]=-W,Ol[Al+8]=0,Ol[Al+9]=W,Ol[Al+10]=W,Ol[Al+11]=0,Ln.vertices+=4;var mu=Ln.faceArray,Xl=Ln.faceidx;mu[Xl+0]=Cl,mu[Xl+1]=Cl+1,mu[Xl+2]=Cl+2,mu[Xl+3]=Cl+2,mu[Xl+4]=Cl+3,mu[Xl+5]=Cl,Ln.faceidx+=6}drawAtomImposter(f,E){if(f.style.sphere){var W=f.style.sphere;if(!W.hidden){var Q=this.getRadiusFromStyle(f,W),yl=(0,Et.getColorFromStyle)(f,W);if((f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var Ln=new Y.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new oe.Sphere(Ln,Q))}this.drawSphereImposter(E,f,Q,yl)}}}calculateDashes(f,E,W,Q,yl){var Ln=Math.sqrt(Math.pow(f.x-E.x,2)+Math.pow(f.y-E.y,2)+Math.pow(f.z-E.z,2));W=Math.max(W,0),yl=Math.max(yl,0)+2*W,(Q=Math.max(Q,.001))+yl>Ln&&(Q=Ln,yl=0);var Cl,Al=Math.floor((Ln-Q)/(Q+yl))+1;yl=(Ln-Al*Q)/Al;for(var vl=new Y.Vector3(f.x,f.y,f.z),Fl=new Y.Vector3((E.x-f.x)/(Ln/yl),(E.y-f.y)/(Ln/yl),(E.z-f.z)/(Ln/yl)),Ol=new Y.Vector3((E.x-f.x)/(Ln/Q),(E.y-f.y)/(Ln/Q),(E.z-f.z)/(Ln/Q)),mu=[],Xl=0;Xl<Al;Xl++)Cl=new Y.Vector3(vl.x+Ol.x,vl.y+Ol.y,vl.z+Ol.z),mu.push({from:vl,to:Cl}),vl=new Y.Vector3(Cl.x+Fl.x,Cl.y+Fl.y,Cl.z+Fl.z);return mu}static drawStickImposter(f,E,W,Q,yl,Ln=0,Cl=0){for(var Al=f.updateGeoGroup(4),vl=Al.vertices,Fl=3*vl,Ol=Al.vertexArray,mu=Al.colorArray,Xl=Al.radiusArray,Wl=Al.normalArray,hu=yl.r,Jl=yl.g,Gu=yl.b,Zu=function(Qd){var ih=-Qd;return ih==0&&(ih=-1e-4),ih},rd=Fl,wd=0;wd<4;wd++)Ol[rd]=E.x,Wl[rd]=W.x,mu[rd]=hu,Ol[++rd]=E.y,Wl[rd]=W.y,mu[rd]=Jl,Ol[++rd]=E.z,Wl[rd]=W.z,mu[rd]=wd<2?Gu:Zu(Gu),rd++;Al.vertices+=4,Xl[vl]=-Q,Xl[vl+1]=Q,Xl[vl+2]=-Q,Xl[vl+3]=Q;var gd=Al.faceArray,jd=Al.faceidx;gd[jd+0]=vl,gd[jd+1]=vl+1,gd[jd+2]=vl+2,gd[jd+3]=vl+2,gd[jd+4]=vl+3,gd[jd+5]=vl,Al.faceidx+=6}drawBondSticks(f,E,W){var Q,yl;if(f.style.stick){var Ln=f.style.stick;if(!Ln.hidden){var Cl,Al,vl,Fl,Ol,mu,Xl,Wl,hu,Jl,Gu,Zu,rd,wd,gd=Ln.radius||this.defaultStickRadius,jd=Ln.doubleBondScaling||.4,Qd=Ln.tripleBondScaling||.25,ih=((Q=Ln.dashedBondConfig)===null||Q===void 0?void 0:Q.dashLength)||.1,Hl=((yl=Ln.dashedBondConfig)===null||yl===void 0?void 0:yl.gapLength)||.25,Iu=gd,Fd=Ln.singleBonds||!1,Ud=Ln.dashedBonds||!1,eh=0,Sh=0,Lh=(0,Et.getColorFromStyle)(f,Ln);!f.capDrawn&&f.bonds.length<4&&(eh=2);var Ah=og=>{var tg=W.imposter?lg.drawStickImposter:M.drawCylinder;return!Ud&&og>=1?tg:(Zf,Xf,Nf,ag,vg,Pg=0,cg=0,kg=.1,Bf=.25)=>{this.calculateDashes(Xf,Nf,ag,kg,Bf).forEach(Tg=>{tg(Zf,Tg.from,Tg.to,ag,vg,Pg,cg)})}};for(vl=0;vl<f.bonds.length;vl++){var yh=Ah(f.bondOrder[vl]),Nh=E[f.bonds[vl]];if(Zu=rd=wd=null,f.index<Nh.index){var sh=Nh.style;if(!sh.stick||sh.stick.hidden)continue;var Th=(0,Et.getColorFromStyle)(Nh,sh.stick);if(Iu=gd,Fl=Fd,f.bondStyles&&f.bondStyles[vl]){if((Ol=f.bondStyles[vl]).iswire)continue;Ol.radius&&(Iu=Ol.radius),Ol.singleBond&&(Fl=!0),Ol.color1!==void 0&&(Lh=ie.CC.color(Ol.color1)),Ol.color2!==void 0&&(Th=ie.CC.color(Ol.color2))}var dp=new Y.Vector3(f.x,f.y,f.z),$h=new Y.Vector3(Nh.x,Nh.y,Nh.z);if(f.bondOrder[vl]<=1||Fl||f.bondOrder[vl]>3){if(f.bondOrder[vl]<1&&(Iu*=f.bondOrder[vl]),!Nh.capDrawn&&Nh.bonds.length<4&&(Sh=2),Lh!=Th?(Zu=new Y.Vector3().addVectors(dp,$h).multiplyScalar(.5),yh(W,dp,Zu,Iu,Lh,eh,0,ih,Hl),yh(W,Zu,$h,Iu,Th,0,Sh,ih,Hl)):yh(W,dp,$h,Iu,Lh,eh,Sh,ih,Hl),Cl=f.clickable||f.hoverable,Al=Nh.clickable||Nh.hoverable,Cl||Al){if(Zu||(Zu=new Y.Vector3().addVectors(dp,$h).multiplyScalar(.5)),Cl){var ap=new oe.Cylinder(dp,Zu,Iu),Yh=new oe.Sphere(dp,Iu);f.intersectionShape.cylinder.push(ap),f.intersectionShape.sphere.push(Yh)}if(Al){var Mh=new oe.Cylinder($h,Zu,Iu),pp=new oe.Sphere($h,Iu);Nh.intersectionShape.cylinder.push(Mh),Nh.intersectionShape.sphere.push(pp)}}}else if(f.bondOrder[vl]>1){var Ip=0,gp=0;Iu!=gd&&(Ip=2,gp=2);var Xh,Qp,Wp,$p,Hp,Vp=$h.clone(),Op=null;Vp.sub(dp),Op=this.getSideBondV(f,Nh,vl),f.bondOrder[vl]==2?(Xh=Iu*jd,Op.multiplyScalar(1.5*Xh),(Qp=dp.clone()).add(Op),(Wp=dp.clone()).sub(Op),($p=Qp.clone()).add(Vp),(Hp=Wp.clone()).add(Vp),Lh!=Th?(Zu=new Y.Vector3().addVectors(Qp,$p).multiplyScalar(.5),rd=new Y.Vector3().addVectors(Wp,Hp).multiplyScalar(.5),yh(W,Qp,Zu,Xh,Lh,Ip,0),yh(W,Zu,$p,Xh,Th,0,gp),yh(W,Wp,rd,Xh,Lh,Ip,0),yh(W,rd,Hp,Xh,Th,0,gp)):(yh(W,Qp,$p,Xh,Lh,Ip,gp),yh(W,Wp,Hp,Xh,Lh,Ip,gp)),Cl=f.clickable||f.hoverable,Al=Nh.clickable||Nh.hoverable,(Cl||Al)&&(Zu||(Zu=new Y.Vector3().addVectors(Qp,$p).multiplyScalar(.5)),rd||(rd=new Y.Vector3().addVectors(Wp,Hp).multiplyScalar(.5)),Cl&&(mu=new oe.Cylinder(Qp,Zu,Xh),Xl=new oe.Cylinder(Wp,rd,Xh),f.intersectionShape.cylinder.push(mu),f.intersectionShape.cylinder.push(Xl)),Al&&(hu=new oe.Cylinder($p,Zu,Xh),Jl=new oe.Cylinder(Hp,rd,Xh),Nh.intersectionShape.cylinder.push(hu),Nh.intersectionShape.cylinder.push(Jl)))):f.bondOrder[vl]==3&&(Xh=Iu*Qd,Op.cross(Vp),Op.normalize(),Op.multiplyScalar(3*Xh),(Qp=dp.clone()).add(Op),(Wp=dp.clone()).sub(Op),($p=Qp.clone()).add(Vp),(Hp=Wp.clone()).add(Vp),Lh!=Th?(Zu=new Y.Vector3().addVectors(Qp,$p).multiplyScalar(.5),rd=new Y.Vector3().addVectors(Wp,Hp).multiplyScalar(.5),wd=new Y.Vector3().addVectors(dp,$h).multiplyScalar(.5),yh(W,Qp,Zu,Xh,Lh,Ip,0),yh(W,Zu,$p,Xh,Th,0,gp),yh(W,dp,wd,Xh,Lh,eh,0),yh(W,wd,$h,Xh,Th,0,Sh),yh(W,Wp,rd,Xh,Lh,Ip,0),yh(W,rd,Hp,Xh,Th,0,gp)):(yh(W,Qp,$p,Xh,Lh,Ip,gp),yh(W,dp,$h,Xh,Lh,eh,Sh),yh(W,Wp,Hp,Xh,Lh,Ip,gp)),Cl=f.clickable||f.hoverable,Al=Nh.clickable||Nh.hoverable,(Cl||Al)&&(Zu||(Zu=new Y.Vector3().addVectors(Qp,$p).multiplyScalar(.5)),rd||(rd=new Y.Vector3().addVectors(Wp,Hp).multiplyScalar(.5)),wd||(wd=new Y.Vector3().addVectors(dp,$h).multiplyScalar(.5)),Cl&&(mu=new oe.Cylinder(Qp.clone(),Zu.clone(),Xh),Xl=new oe.Cylinder(Wp.clone(),rd.clone(),Xh),Wl=new oe.Cylinder(dp.clone(),wd.clone(),Xh),f.intersectionShape.cylinder.push(mu),f.intersectionShape.cylinder.push(Xl),f.intersectionShape.cylinder.push(Wl)),Al&&(hu=new oe.Cylinder($p.clone(),Zu.clone(),Xh),Jl=new oe.Cylinder(Hp.clone(),rd.clone(),Xh),Gu=new oe.Cylinder($h.clone(),wd.clone(),Xh),Nh.intersectionShape.cylinder.push(hu),Nh.intersectionShape.cylinder.push(Jl),Nh.intersectionShape.cylinder.push(Gu))))}}}var Jp=!1,Df=0,tm=!1;for(vl=0;vl<f.bonds.length;vl++)Fl=Fd,f.bondStyles&&f.bondStyles[vl]&&((Ol=f.bondStyles[vl]).singleBond&&(Fl=!0),Ol.radius&&Ol.radius!=gd&&(tm=!0)),(Fl||f.bondOrder[vl]==1)&&Df++;tm?Df>0&&(Jp=!0):Df==0&&(f.bonds.length>0||Ln.showNonBonded)&&(Jp=!0),Jp&&(Iu=gd,W.imposter?this.drawSphereImposter(W.sphereGeometry,f,Iu,Lh):M.drawSphere(W,f,Iu,Lh))}}}createMolObj(f,E){E=E||{};var W,Q,yl,Ln,Cl=new V.Object3D,Al=[],vl={},Fl={},Ol=this.drawAtomSphere,mu=null,Xl=null;E.supportsImposters?(Ol=this.drawAtomImposter,(mu=new V.Geometry(!0)).imposter=!0,(Xl=new V.Geometry(!0,!0)).imposter=!0,Xl.sphereGeometry=new V.Geometry(!0),Xl.sphereGeometry.imposter=!0,Xl.drawnCaps={}):E.supportsAIA?(Ol=this.drawAtomInstanced,(mu=new V.Geometry(!1,!0,!0)).instanced=!0,Xl=new V.Geometry(!0)):(mu=new V.Geometry(!0),Xl=new V.Geometry(!0));var Wl,hu={},Jl=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(W=0,yl=f.length;W<yl;W++){var Gu=f[W];if(Gu&&Gu.style){for(Q in(Gu.clickable||Gu.hoverable)&&Gu.intersectionShape===void 0&&(Gu.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Ln={line:void 0,cross:void 0,stick:void 0,sphere:void 0})Gu.style[Q]?Gu.style[Q].opacity?Ln[Q]=parseFloat(Gu.style[Q].opacity):Ln[Q]=1:Ln[Q]=void 0,hu[Q]?Ln[Q]!=null&&hu[Q]!=Ln[Q]&&(console.log("Warning: "+Q+" opacity is ambiguous"),hu[Q]=1):hu[Q]=Ln[Q];Ol.call(this,Gu,mu),this.drawAtomClickSphere(Gu),this.drawAtomCross(Gu,Fl),this.drawBondLines(Gu,f,vl),this.drawBondSticks(Gu,f,Xl),Gu.style.cartoon===void 0||Gu.style.cartoon.hidden||(Gu.style.cartoon.color!=="spectrum"||typeof Gu.resi!="number"||Gu.hetflag||(Gu.resi<Jl[0]&&(Jl[0]=Gu.resi),Gu.resi>Jl[1]&&(Jl[1]=Gu.resi)),Al.push(Gu))}}if(Al.length>0&&rh(Cl,Al,Jl,this.defaultCartoonQuality),mu&&mu.vertices>0){mu.initTypedArrays();var Zu=null,rd=null;mu.imposter?Zu=new V.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):mu.instanced?(rd=new V.Geometry(!0),M.drawSphere(rd,{x:0,y:0,z:0},1,new ie.Color(.5,.5,.5)),rd.initTypedArrays(),Zu=new V.InstancedMaterial({sphereMaterial:new V.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:rd})):Zu=new V.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),hu.sphere<1&&hu.sphere>=0&&(Zu.transparent=!0,Zu.opacity=hu.sphere),rd=new V.Mesh(mu,Zu),Cl.add(rd)}if(Xl.vertices>0){var wd=null,gd=null,jd=Xl.sphereGeometry;jd&&jd.vertices!==void 0&&jd.vertices!=0||(jd=null),Xl.initTypedArrays(),jd&&jd.initTypedArrays();var Qd={ambient:0,vertexColors:!0,reflectivity:0};Xl.imposter?(wd=new V.StickImposterMaterial(Qd),gd=new V.SphereImposterMaterial(Qd)):(wd=new V.MeshLambertMaterial(Qd),gd=new V.MeshLambertMaterial(Qd),wd.wireframe&&(Xl.setUpWireframe(),jd&&jd.setUpWireframe())),hu.stick<1&&hu.stick>=0&&(wd.transparent=!0,wd.opacity=hu.stick,gd.transparent=!0,gd.opacity=hu.stick);var ih=new V.Mesh(Xl,wd);if(Cl.add(ih),jd){var Hl=new V.Mesh(jd,gd);Cl.add(Hl)}}for(W in vl)if(vl.hasOwnProperty(W)){Wl=W;var Iu=new V.LineBasicMaterial({linewidth:Wl,vertexColors:!0});hu.line<1&&hu.line>=0&&(Iu.transparent=!0,Iu.opacity=hu.line),vl[W].initTypedArrays();var Fd=new V.Line(vl[W],Iu,V.LineStyle.LinePieces);Cl.add(Fd)}for(W in Fl)if(Fl.hasOwnProperty(W)){Wl=W;var Ud=new V.LineBasicMaterial({linewidth:Wl,vertexColors:!0});hu.cross<1&&hu.cross>=0&&(Ud.transparent=!0,Ud.opacity=hu.cross),Fl[W].initTypedArrays();var eh=new V.Line(Fl[W],Ud,V.LineStyle.LinePieces);Cl.add(eh)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var Sh,Lh=new V.Object3D;for(Sh=0;Sh<this.modelData.symmetries.length;Sh++){var Ah=new V.Object3D;(Ah=Cl.clone()).matrix.copy(this.modelData.symmetries[Sh]),Ah.matrixAutoUpdate=!1,Lh.add(Ah)}return Lh}return Cl}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(f){this.atoms=f.atoms,this.frames=f.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const f=this.modelData.cryst;this.modelData.cryst.matrix=(0,Y.conversionMatrix3)(f.a,f.b,f.c,f.alpha,f.beta,f.gamma)}return this.modelData.cryst}return null}setCrystData(f,E,W,Q,yl,Ln){f=f||1,E=E||1,W=W||1,Q=Q||90,yl=yl||90,Ln=Ln||90;const Cl=(0,Y.conversionMatrix3)(f,E,W,Q,yl,Ln);this.modelData.cryst={a:f,b:E,c:W,alpha:Q,beta:yl,gamma:Ln,matrix:Cl}}setCrystMatrix(f){f=f||new Y.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:f}}getSymmetries(){return this.modelData.symmetries===void 0&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(f){f===void 0?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=f,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(f,E,W,Q){var yl=E-f;return yl<-W?E+Q:yl>W?E-Q:E}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var f=this.box[0],E=this.box[1],W=this.box[2],Q=.9*f,yl=.9*E,Ln=.9*W,Cl=0;Cl<this.atomdfs.length;Cl++)for(var Al=this.atomdfs[Cl],vl=1;vl<Al.length;vl++){var Fl=this.atoms[Al[vl][0]],Ol=this.atoms[Al[vl][1]];Fl.x=this.adjustCoord(Ol.x,Fl.x,Q,f),Fl.y=this.adjustCoord(Ol.y,Fl.y,yl,E),Fl.z=this.adjustCoord(Ol.z,Fl.z,Ln,W)}}setFrame(f){var E=this.getNumFrames();let W=this,Q=this.viewer;return new Promise(function(yl,Ln){if(E==0&&yl(),(f<0||f>=E)&&(f=E-1),W.frames.url!=null){var Cl=W.frames.url;(0,Et.getbin)(Cl+"/traj/frame/"+f+"/"+W.frames.path,void 0,"POST",void 0).then(function(Al){for(var vl=new Float32Array(Al,44),Fl=0,Ol=0;Ol<W.atoms.length;Ol++)W.atoms[Ol].x=vl[Fl++],W.atoms[Ol].y=vl[Fl++],W.atoms[Ol].z=vl[Fl++];W.box&&W.atomdfs&&W.adjustCoordinatesToBox(),yl()}).catch(Ln)}else W.atoms=W.frames[f],yl();W.molObj=null,W.modelDatas&&f<W.modelDatas.length&&(W.modelData=W.modelDatas[f],W.unitCellObjects&&Q&&(Q.removeUnitCell(W),Q.addUnitCell(W)))})}addFrame(f){this.frames.push(f)}vibrate(f=10,E=1,W=!1,Q){var yl=0,Ln=f;let Cl=this.viewer;W&&(yl=-f,Ln=f),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),yl<Ln&&(this.frames=[]),W&&(this.frames.origIndex=f);for(var Al=yl;Al<Ln;Al++){var vl=[],Fl=this.frames.length;if(Al!=0||Q){for(var Ol=0;Ol<this.atoms.length;Ol++){var mu=(0,Et.getAtomProperty)(this.atoms[Ol],"dx"),Xl=(0,Et.getAtomProperty)(this.atoms[Ol],"dy"),Wl=(0,Et.getAtomProperty)(this.atoms[Ol],"dz"),hu=new Y.Vector3(mu,Xl,Wl),Jl=new Y.Vector3(this.atoms[Ol].x,this.atoms[Ol].y,this.atoms[Ol].z),Gu=Al*E/f;hu.multiplyScalar(Gu),Jl.add(hu);var Zu={};for(var rd in this.atoms[Ol])Zu[rd]=this.atoms[Ol][rd];if(Zu.x=Jl.x,Zu.y=Jl.y,Zu.z=Jl.z,vl.push(Zu),Cl&&Q){var wd=(0,Et.extend)({},Q),gd=new Y.Vector3(mu,Xl,Wl);if(gd.multiplyScalar(E),gd.add(Jl),wd.start=Jl,wd.end=gd,wd.frame=Fl,!wd.color){var jd=Zu.style.sphere;jd||(jd=Zu.style.stick),jd||(jd=Zu.style.line),wd.color=(0,Et.getColorFromStyle)(Zu,jd)}Cl.addArrow(wd)}}this.frames.push(vl)}else this.frames.push(this.atoms)}}setAtomDefaults(f){for(let E=0;E<f.length;E++){let W=f[E];W&&(W.style=W.style||(0,Et.deepCopy)(lg.defaultAtomStyle),W.color=W.color||this.ElementColors[W.elem]||this.defaultColor,W.model=this.id,(W.clickable||W.hoverable)&&(W.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(f,E,W={}){var Q=lg.parseMolData(f,E,W);this.dontDuplicateAtoms=!W.duplicateAssemblyAtoms;var yl=Q.modelData;if(yl&&(Array.isArray(yl)?(this.modelData=yl[0],W.frames&&(this.modelDatas=yl)):this.modelData=yl),Q.box?this.box=Q.box:this.box=null,this.frames.length==0){for(let Cl=0;Cl<Q.length;Cl++)Q[Cl].length!=0&&this.frames.push(Q[Cl]);this.frames[0]&&(this.atoms=this.frames[0])}else if(W.frames)for(let Cl=0;Cl<Q.length;Cl++)this.frames.push(Q[Cl]);else for(var Ln=0;Ln<Q.length;Ln++)this.addAtoms(Q[Ln]);for(let Cl=0;Cl<this.frames.length;Cl++)this.setAtomDefaults(this.frames[Cl]);W.vibrate&&W.vibrate.frames&&W.vibrate.amplitude&&this.vibrate(W.vibrate.frames,W.vibrate.amplitude),W.style&&this.setStyle({},W.style)}setDontDuplicateAtoms(f){this.dontDuplicateAtoms=f}setModelData(f){this.modelData=f}propertyMatches(f,E){if(f==E)return!0;if(typeof E=="string"&&typeof f=="number"){var W=E.match(/(-?\d+)\s*-\s*(-?\d+)/);if(W){var Q=parseInt(W[1]),yl=parseInt(W[2]);if(W&&f>=Q&&f<=yl)return!0}}return!1}static deepCopyAndCache(f,E){if(typeof f!="object"||f==null||f instanceof lg||f.__cache_created)return f;const W={};for(const Q in f){const yl=f[Q];if(Array.isArray(yl)){W[Q]=[];for(let Ln=0;Ln<yl.length;Ln++)W[Q].push(lg.deepCopyAndCache(yl[Ln],E))}else W[Q]=typeof yl=="object"&&Q!="properties"&&Q!="model"?lg.deepCopyAndCache(yl,E):yl;if(Q=="and"||Q=="or"){const Ln=[];for(const Cl of W[Q]){const Al=new Set;for(const vl of E.selectedAtoms(Cl))Al.add(vl.index);Ln.push(Al)}if(Q=="and"){const Cl=function(vl,Fl){const Ol=new Set;for(const mu of Fl)vl.has(mu)&&Ol.add(mu);return Ol};let Al=new Set(Ln[0]);for(const vl of Ln.splice(1))Al=Cl(Al,vl);W[Q].__cached_results=Al}else if(Q=="or"){const Cl=new Set;for(const Al of Ln)for(const vl of Al)Cl.add(vl);W[Q].__cached_results=Cl}}}return W.__cache_created=!0,W}atomIsSelected(f,E){if(E===void 0)return!0;var W=!!E.invert,Q=!0;for(var yl in E)if(yl=="and"||yl=="or"||yl=="not"){if(yl=="not"){if(this.atomIsSelected(f,E[yl])){Q=!1;break}}else if(E[yl].__cached_results===void 0&&(E=lg.deepCopyAndCache(E,this)),!(Q=E[yl].__cached_results.has(f.index)))break}else if(yl==="predicate"){if(!E.predicate(f)){Q=!1;break}}else if(yl=="properties"&&f[yl]){for(var Ln in E.properties)if(!Ln.startsWith("__cache")){if(f.properties[Ln]===void 0){Q=!1;break}if(f.properties[Ln]!=E.properties[Ln]){Q=!1;break}}}else if(yl=="model"){let vl=E.model;if(typeof vl=="number"&&vl<0&&(vl=this.viewer.getNextModelId()+vl),Array.isArray(vl)){let Fl=!1;for(let Ol=0;Ol<vl.length;Ol++)if(vl[Ol]==this||vl[Ol]==this.id){Fl=!0;break}if(!Fl){Q=!1;break}}else if(vl!=this&&vl!=this.id){Q=!1;break}}else if(E.hasOwnProperty(yl)&&!lg.ignoredKeys.has(yl)&&!yl.startsWith("__cache")){if(f[yl]===void 0){Q=!1;break}let vl=!1;if(yl==="bonds"){if(E[yl]!=f.bonds.length){Q=!1;break}}else if(Array.isArray(E[yl])){var Cl=E[yl],Al=f[yl];for(let Fl=0;Fl<Cl.length;Fl++)if(this.propertyMatches(Al,Cl[Fl])){vl=!0;break}if(!vl){Q=!1;break}}else{let Fl=E[yl];if(!this.propertyMatches(f[yl],Fl)){Q=!1;break}}}return W?!Q:Q}static squaredDistance(f,E){var W=E.x-f.x,Q=E.y-f.y,yl=E.z-f.z;return W*W+Q*Q+yl*yl}expandAtomList(f,E){if(E<=0)return f;for(var W=(0,Et.getExtent)(f,void 0),Q=[[],[],[]],yl=0;yl<3;yl++)Q[0][yl]=W[0][yl]-E,Q[1][yl]=W[1][yl]+E,Q[2][yl]=W[2][yl];var Ln=[];for(let Fl=0;Fl<this.atoms.length;Fl++){var Cl=this.atoms[Fl].x,Al=this.atoms[Fl].y,vl=this.atoms[Fl].z;Cl>=Q[0][0]&&Cl<=Q[1][0]&&Al>=Q[0][1]&&Al<=Q[1][1]&&vl>=Q[0][2]&&vl<=Q[1][2]&&(Cl>=W[0][0]&&Cl<=W[1][0]&&Al>=W[0][1]&&Al<=W[1][1]&&vl>=W[0][2]&&vl<=W[1][2]||Ln.push(this.atoms[Fl]))}return Ln}static getFloat(f){return typeof f=="number"?f:parseFloat(f)}selectedAtoms(f,E){var W=[];f=lg.deepCopyAndCache(f||{},this),E||(E=this.atoms);for(var Q=E.length,yl=0;yl<Q;yl++){var Ln=E[yl];Ln&&this.atomIsSelected(Ln,f)&&W.push(Ln)}if(f.hasOwnProperty("expand")){const Zu=lg.getFloat(f.expand);let rd=this.expandAtomList(W,Zu),wd=W.length;const gd=Zu*Zu;for(let jd=0;jd<rd.length;jd++)for(let Qd=0;Qd<wd;Qd++){var Cl=lg.squaredDistance(rd[jd],W[Qd]);Cl<gd&&Cl>0&&W.push(rd[jd])}}if(f.hasOwnProperty("within")&&f.within.hasOwnProperty("sel")&&f.within.hasOwnProperty("distance")){var Al=this.selectedAtoms(f.within.sel,this.atoms),vl={};const Zu=lg.getFloat(f.within.distance),rd=Zu*Zu;for(let wd=0;wd<Al.length;wd++)for(let gd=0;gd<W.length;gd++){let jd=lg.squaredDistance(Al[wd],W[gd]);jd<rd&&jd>0&&(vl[gd]=1)}var Fl=[];if(f.within.invert)for(let wd=0;wd<W.length;wd++)vl[wd]||Fl.push(W[wd]);else for(let wd in vl)Fl.push(W[wd]);W=Fl}if(f.hasOwnProperty("byres")){var Ol={},mu=[],Xl=[];for(let Zu=0;Zu<W.length;Zu++){let rd=W[Zu];var Wl=rd.chain,hu=rd.resi;if(Ol[Wl]===void 0&&(Ol[Wl]={}),rd.hasOwnProperty("resi")&&Ol[Wl][hu]===void 0){for(Ol[Wl][hu]=!0,Xl.push(rd);Xl.length>0;)if(rd=Xl.pop(),Wl=rd.chain,hu=rd.resi,mu[rd.index]===void 0){mu[rd.index]=!0;for(var Jl=0;Jl<rd.bonds.length;Jl++){var Gu=this.atoms[rd.bonds[Jl]];mu[Gu.index]===void 0&&Gu.hasOwnProperty("resi")&&Gu.chain==Wl&&Gu.resi==hu&&(Xl.push(Gu),W.push(Gu))}}}}}return W}addAtoms(f){this.molObj=null;var E,W=this.atoms.length,Q=[];for(E=0;E<f.length;E++)f[E].index===void 0&&(f[E].index=E),f[E].serial===void 0&&(f[E].serial=E),Q[f[E].index]=W+E;for(E=0;E<f.length;E++){var yl=f[E],Ln=Q[yl.index],Cl=(0,Et.extend)({},yl);Cl.index=Ln,Cl.bonds=[],Cl.bondOrder=[],Cl.model=this.id,Cl.style=Cl.style||(0,Et.deepCopy)(lg.defaultAtomStyle),Cl.color===void 0&&(Cl.color=this.ElementColors[Cl.elem]||this.defaultColor);for(var Al=yl.bonds?yl.bonds.length:0,vl=0;vl<Al;vl++){var Fl=Q[yl.bonds[vl]];Fl!==void 0&&(Cl.bonds.push(Fl),Cl.bondOrder.push(yl.bondOrder?yl.bondOrder[vl]:1))}this.atoms.push(Cl)}}assignBonds(){(0,Ed.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(f){this.molObj=null;var E,W=[];for(E=0;E<f.length;E++)W[f[E].index]=!0;var Q=[];for(E=0;E<this.atoms.length;E++){var yl=this.atoms[E];W[yl.index]||Q.push(yl)}this.atoms=[],this.addAtoms(Q)}setStyle(f,E,W){E===void 0&&W===void 0&&(E=f,f={}),typeof E=="string"&&(E=(0,Et.specStringToObject)(E));var Q=!1,yl=this,Ln=function(Al){var vl=yl.selectedAtoms(f,Al);for(let Fl=0;Fl<Al.length;Fl++)Al[Fl]&&(Al[Fl].capDrawn=!1);for(let Fl=0;Fl<vl.length;Fl++){Q=!0,(vl[Fl].clickable||vl[Fl].hoverable)&&(vl[Fl].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),W||(vl[Fl].style={});for(let Ol in E)E.hasOwnProperty(Ol)&&(vl[Fl].style[Ol]=vl[Fl].style[Ol]||{},Object.assign(vl[Fl].style[Ol],E[Ol]))}};if(f.frame!==void 0&&f.frame<this.frames.length){let Al=f.frame;Al<0&&(Al=this.frames.length+Al),Ln(this.frames[Al])}else{Ln(this.atoms);for(var Cl=0;Cl<this.frames.length;Cl++)this.frames[Cl]!==this.atoms&&Ln(this.frames[Cl])}Q&&(this.molObj=null)}setClickable(f,E,W){if(E=!!E,(W=(0,Et.makeFunction)(W))!==null){var Q=this.selectedAtoms(f,this.atoms),yl=Q.length;for(let Ln=0;Ln<yl;Ln++)Q[Ln].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Q[Ln].clickable=E,W&&(Q[Ln].callback=W);yl>0&&(this.molObj=null)}else console.log("Callback is not a function")}setHoverable(f,E,W,Q){if(E=!!E,W=(0,Et.makeFunction)(W),Q=(0,Et.makeFunction)(Q),W!==null)if(Q!==null){var yl=this.selectedAtoms(f,this.atoms),Ln=yl.length;for(let Cl=0;Cl<Ln;Cl++)yl[Cl].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},yl[Cl].hoverable=E,W&&(yl[Cl].hover_callback=W),Q&&(yl[Cl].unhover_callback=Q);Ln>0&&(this.molObj=null)}else console.log("Unhover_callback is not a function");else console.log("Hover_callback is not a function")}enableContextMenu(f,E){var W;E=!!E;var Q=this.selectedAtoms(f,this.atoms),yl=Q.length;for(W=0;W<yl;W++)Q[W].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Q[W].contextMenuEnabled=E;yl>0&&(this.molObj=null)}setColorByElement(f,E){if(this.molObj===null||!lg.sameObj(E,this.lastColors)){this.lastColors=E;var W=this.selectedAtoms(f,W);W.length>0&&(this.molObj=null);for(var Q=0;Q<W.length;Q++){var yl=W[Q];E[yl.elem]!==void 0&&(yl.color=E[yl.elem])}}}setColorByProperty(f,E,W,Q){var yl,Ln,Cl=this.selectedAtoms(f,Cl);for(this.lastColors=null,Cl.length>0&&(this.molObj=null),typeof W=="string"&&zn.Gradient.builtinGradients[W]!==void 0&&(W=new zn.Gradient.builtinGradients[W]),Q||(Q=W.range()),Q||(Q=(0,Et.getPropertyRange)(Cl,E)),yl=0;yl<Cl.length;yl++)Ln=Cl[yl],(0,Et.getAtomProperty)(Ln,E)!=null&&(Ln.color=W.valueToHex(parseFloat(Ln.properties[E]),Q))}setColorByFunction(f,E){var W=this.selectedAtoms(f,W);if(typeof E=="function"){this.lastColors=null,W.length>0&&(this.molObj=null);for(let Q=0;Q<W.length;Q++){let yl=W[Q];yl.color=E(yl)}}}toCDObject(f=!1){var E={a:[],b:[]};f&&(E.s=[]);for(let Q=0;Q<this.atoms.length;Q++){let yl={},Ln=this.atoms[Q];if(yl.x=Ln.x,yl.y=Ln.y,yl.z=Ln.z,Ln.elem!="C"&&(yl.l=Ln.elem),f){for(var W=0;W<E.s.length&&JSON.stringify(Ln.style)!==JSON.stringify(E.s[W]);)W++;W===E.s.length&&E.s.push(Ln.style),W!==0&&(yl.s=W)}E.a.push(yl);for(let Cl=0;Cl<Ln.bonds.length;Cl++){let Al=Q,vl=Ln.bonds[Cl];if(Al>=vl)continue;let Fl={b:Al,e:vl},Ol=Ln.bondOrder[Cl];Ol!=1&&(Fl.o=Ol),E.b.push(Fl)}}return E}globj(f,E){(this.molObj===null||E.regen)&&(this.molObj=this.createMolObj(this.atoms,E),this.renderedMolObj&&(f.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),f.add(this.renderedMolObj))}exportVRML(){return this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1}).vrml()}removegl(f){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),f.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(f,E,W){let Q=this.selectedAtoms(E),yl=this.viewer,Ln=(0,Et.deepCopy)(W);for(let Al=0;Al<Q.length;Al++){let vl=Q[Al];var Cl=null;vl[f]!==void 0?Cl=String(vl[f]):vl.properties[f]!==void 0&&(Cl=String(vl.properties[f])),Cl!=null&&(Ln.position=vl,yl.addLabel(Cl,Ln))}}addResLabels(f,E,W=!1){let Q=this.viewer;var yl=[],Ln=function(Al,vl){for(var Fl=Al.selectedAtoms(f,Fl),Ol={},mu=0;mu<Fl.length;mu++){var Xl=Fl[mu],Wl=Xl.chain,hu=Xl.resn+""+Xl.resi;Ol[Wl]||(Ol[Wl]={}),Ol[Wl][hu]||(Ol[Wl][hu]=[]),Ol[Wl][hu].push(Xl)}var Jl=(0,Et.deepCopy)(E);for(let Zu in Ol)if(Ol.hasOwnProperty(Zu)){var Gu=Ol[Zu];for(let rd in Gu)if(Gu.hasOwnProperty(rd)){let wd=Gu[rd],gd=new Y.Vector3(0,0,0);for(let Qd=0;Qd<wd.length;Qd++){let ih=wd[Qd];gd.x+=ih.x,gd.y+=ih.y,gd.z+=ih.z}gd.divideScalar(wd.length),Jl.position=gd,Jl.frame=vl;let jd=Q.addLabel(rd,Jl,void 0,!0);yl.push(jd)}}};if(W){var Cl=this.getNumFrames();let Al=this.atoms;for(let vl=0;vl<Cl;vl++)this.frames[vl]&&(this.atoms=this.frames[vl],Ln(this,vl));this.atoms=Al}else Ln(this);return yl}setupDFS(){this.atomdfs=[];var f=this,E=new Int8Array(this.atoms.length);E.fill(0);for(var W=function(Ln,Cl,Al){Al.push([Ln,Cl]);var vl=f.atoms[Ln];E[Ln]=1;for(var Fl=0;Fl<vl.bonds.length;Fl++){var Ol=vl.bonds[Fl];f.atoms[Ol]&&!E[Ol]&&W(Ol,Ln,Al)}},Q=0;Q<this.atoms.length;Q++)if(this.atoms[Q]&&!E[Q]){var yl=[];W(Q,-1,yl),this.atomdfs.push(yl)}}setCoordinatesFromURL(f,E){this.frames=[];var W=this;return this.box&&this.setupDFS(),f.startsWith("http")||(f="http://"+f),(0,Et.get)(f+"/traj/numframes/"+E,function(Q){if(!isNaN(parseInt(Q)))return W.frames.push(W.atoms),W.frames.numFrames=Q,W.frames.url=f,W.frames.path=E,W.setFrame(0)})}setCoordinates(f,E){if(!f)return[];if(/\.gz$/.test(E=E||"")){E=E.replace(/\.gz$/,"");try{f=(0,Et.inflateString)(f)}catch(Fl){console.log(Fl)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""}.hasOwnProperty(E)){this.frames=[];for(var W=this.atoms.length,Q=lg.parseCrd(f,E),yl=0;yl<Q.length;){for(var Ln=[],Cl=0;Cl<W;Cl++){var Al={};for(var vl in this.atoms[Cl])Al[vl]=this.atoms[Cl][vl];Ln[Cl]=Al,Ln[Cl].x=Q[yl++],Ln[Cl].y=Q[yl++],Ln[Cl].z=Q[yl++]}this.frames.push(Ln)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(f){}static parseCrd(f,E){var W=[],Q=0;if(E=="pdb")for(var yl=f.indexOf(`
ATOM`);yl!=-1;){for(;f.slice(yl,yl+5)==`
ATOM`||f.slice(yl,yl+7)==`
HETATM`;)W[Q++]=parseFloat(f.slice(yl+31,yl+39)),W[Q++]=parseFloat(f.slice(yl+39,yl+47)),W[Q++]=parseFloat(f.slice(yl+47,yl+55)),yl=f.indexOf(`
`,yl+54),f.slice(yl,yl+4)==`
TER`&&(yl=f.indexOf(`
`,yl+5));yl=f.indexOf(`
ATOM`,yl)}else if(E=="netcdf"){var Ln=new j0(f);W=[].concat.apply([],Ln.getDataVariable("coordinates"))}else{if(E=="array"||Array.isArray(f))return f.flat(2);{let Cl=f.indexOf(`
`);E=="inpcrd"&&(Cl=f.indexOf(`
`,Cl+1)),W=(f=f.slice(Cl+1)).match(/\S+/g).map(parseFloat)}}return W}static parseMolData(f,E="",W){if(!f)return[];if(/\.gz$/.test(E)){E=E.replace(/\.gz$/,"");try{f=E.match(/bcif/i)?(0,Et.inflateString)(f,!1):(0,Et.inflateString)(f)}catch(Q){console.log(Q)}}return uf[E]===void 0&&(E=E.split(".").pop(),uf[E]===void 0&&(console.log("Unknown format: "+E),E=f instanceof Uint8Array?"bcif":f.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":f.match(/^data_/gm)&&f.match(/^loop_/gm)?"cif":f.match(/^HETATM/gm)||f.match(/^ATOM/gm)?"pdb":f.match(/ITEM: TIMESTEP/gm)?"lammpstrj":f.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":f.match(/^%VERSION\s+VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+E))),(0,uf[E])(f,W)}}var sm;lg.defaultAtomStyle={line:{}},lg.defaultlineWidth=1,lg.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},lg.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"]),(function(dd){dd[dd.VDW=1]="VDW",dd[dd.MS=2]="MS",dd[dd.SAS=3]="SAS",dd[dd.SES=4]="SES"})(sm||(sm={}));var Cg=!1;function S0(dd){Cg=dd}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(Cg=!0);class Kp{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(f,E,W,Q){let yl=!!Q.fulltable,Ln=Q.hasOwnProperty("origin")&&Q.origin.hasOwnProperty("x")?Q.origin:{x:0,y:0,z:0},Cl=!!Q.voxel,Al=Q.matrix,vl=Q.nX||0,Fl=Q.nY||0,Ol=Q.nZ||0,mu=Q.scale||1,Xl=null;Xl=Q.unitCube?Q.unitCube:{x:mu,y:mu,z:mu};let Wl,hu,Jl=new Int32Array(vl*Fl*Ol);for(Wl=0,hu=Jl.length;Wl<hu;++Wl)Jl[Wl]=-1;let Gu=function(gd,jd,Qd,ih,Hl,Iu){let Fd={x:0,y:0,z:0},Ud=Hl;if(!(ih&1<<Hl)&&ih&1<<Iu&&(Ud=Iu),1&Ud&&Qd++,2&Ud&&jd++,4&Ud&&gd++,Al){let Sh=new Y.Vector3(gd,jd,Qd);Sh=Sh.applyMatrix4(Al),Fd={x:Sh.x,y:Sh.y,z:Sh.z}}else Fd.x=Ln.x+Xl.x*gd,Fd.y=Ln.y+Xl.y*jd,Fd.z=Ln.z+Xl.z*Qd;let eh=(Fl*gd+jd)*Ol+Qd;return Cl?(E.push(Fd),E.length-1):(Jl[eh]<0&&(Jl[eh]=E.length,E.push(Fd)),Jl[eh])},Zu=new Int32Array(12),rd=yl?this.edgeTable2:this.edgeTable,wd=yl?this.triTable2:this.triTable;for(Wl=0;Wl<vl-1;++Wl)for(let gd=0;gd<Fl-1;++gd)for(let jd=0;jd<Ol-1;++jd){let Qd=0;for(let Iu=0;Iu<8;++Iu)Qd|=!!(f[(Fl*(Wl+((4&Iu)>>2))+gd+((2&Iu)>>1))*Ol+jd+(1&Iu)]&this.ISDONE)<<Iu;if(Qd===0||Qd===255)continue;let ih=rd[Qd];if(ih===0)continue;let Hl=wd[Qd];1&ih&&(Zu[0]=Gu(Wl,gd,jd,Qd,0,1)),2&ih&&(Zu[1]=Gu(Wl,gd,jd,Qd,1,3)),4&ih&&(Zu[2]=Gu(Wl,gd,jd,Qd,3,2)),8&ih&&(Zu[3]=Gu(Wl,gd,jd,Qd,2,0)),16&ih&&(Zu[4]=Gu(Wl,gd,jd,Qd,4,5)),32&ih&&(Zu[5]=Gu(Wl,gd,jd,Qd,5,7)),64&ih&&(Zu[6]=Gu(Wl,gd,jd,Qd,7,6)),128&ih&&(Zu[7]=Gu(Wl,gd,jd,Qd,6,4)),256&ih&&(Zu[8]=Gu(Wl,gd,jd,Qd,0,4)),512&ih&&(Zu[9]=Gu(Wl,gd,jd,Qd,1,5)),1024&ih&&(Zu[10]=Gu(Wl,gd,jd,Qd,3,7)),2048&ih&&(Zu[11]=Gu(Wl,gd,jd,Qd,2,6));for(let Iu=0;Iu<Hl.length;Iu+=3){let Fd=Zu[Hl[Iu]],Ud=Zu[Hl[Iu+1]],eh=Zu[Hl[Iu+2]];Cl&&Iu>=3&&(E.push(E[Fd]),Fd=E.length-1,E.push(E[Ud]),Ud=E.length-1,E.push(E[eh]),eh=E.length-1),W.push(Fd),W.push(Ud),W.push(eh)}}}laplacianSmooth(f,E,W){let Q,yl,Ln,Cl,Al,vl=new Array(E.length);for(Q=0,yl=E.length;Q<yl;Q++)vl[Q]={x:0,y:0,z:0};let Fl,Ol=new Array(20);for(Q=0;Q<20;Q++)Ol[Q]=new Array(E.length);for(Q=0,yl=E.length;Q<yl;Q++)Ol[0][Q]=0;for(Q=0,yl=W.length/3;Q<yl;Q++){let Xl=3*Q,Wl=3*Q+1,hu=3*Q+2;for(Fl=!0,Ln=0,Cl=Ol[0][W[Xl]];Ln<Cl;Ln++)if(W[Wl]==Ol[Ln+1][W[Xl]]){Fl=!1;break}for(Fl&&(Ol[0][W[Xl]]++,Ol[Ol[0][W[Xl]]][W[Xl]]=W[Wl]),Fl=!0,Ln=0,Cl=Ol[0][W[Xl]];Ln<Cl;Ln++)if(W[hu]==Ol[Ln+1][W[Xl]]){Fl=!1;break}for(Fl&&(Ol[0][W[Xl]]++,Ol[Ol[0][W[Xl]]][W[Xl]]=W[hu]),Fl=!0,Ln=0,Cl=Ol[0][W[Wl]];Ln<Cl;Ln++)if(W[Xl]==Ol[Ln+1][W[Wl]]){Fl=!1;break}for(Fl&&(Ol[0][W[Wl]]++,Ol[Ol[0][W[Wl]]][W[Wl]]=W[Xl]),Fl=!0,Ln=0,Cl=Ol[0][W[Wl]];Ln<Cl;Ln++)if(W[hu]==Ol[Ln+1][W[Wl]]){Fl=!1;break}for(Fl&&(Ol[0][W[Wl]]++,Ol[Ol[0][W[Wl]]][W[Wl]]=W[hu]),Fl=!0,Ln=0;Ln<Ol[0][W[hu]];Ln++)if(W[Xl]==Ol[Ln+1][W[hu]]){Fl=!1;break}for(Fl&&(Ol[0][W[hu]]++,Ol[Ol[0][W[hu]]][W[hu]]=W[Xl]),Fl=!0,Ln=0,Cl=Ol[0][W[hu]];Ln<Cl;Ln++)if(W[Wl]==Ol[Ln+1][W[hu]]){Fl=!1;break}Fl&&(Ol[0][W[hu]]++,Ol[Ol[0][W[hu]]][W[hu]]=W[Wl])}let mu=.5;for(Al=0;Al<f;Al++){for(Q=0,yl=E.length;Q<yl;Q++)if(Ol[0][Q]<3)vl[Q].x=E[Q].x,vl[Q].y=E[Q].y,vl[Q].z=E[Q].z;else if(Ol[0][Q]==3||Ol[0][Q]==4){for(vl[Q].x=0,vl[Q].y=0,vl[Q].z=0,Ln=0,Cl=Ol[0][Q];Ln<Cl;Ln++)vl[Q].x+=E[Ol[Ln+1][Q]].x,vl[Q].y+=E[Ol[Ln+1][Q]].y,vl[Q].z+=E[Ol[Ln+1][Q]].z;vl[Q].x+=mu*E[Q].x,vl[Q].y+=mu*E[Q].y,vl[Q].z+=mu*E[Q].z,vl[Q].x/=mu+Ol[0][Q],vl[Q].y/=mu+Ol[0][Q],vl[Q].z/=mu+Ol[0][Q]}else{for(vl[Q].x=0,vl[Q].y=0,vl[Q].z=0,Ln=0,Cl=Ol[0][Q];Ln<Cl;Ln++)vl[Q].x+=E[Ol[Ln+1][Q]].x,vl[Q].y+=E[Ol[Ln+1][Q]].y,vl[Q].z+=E[Ol[Ln+1][Q]].z;vl[Q].x+=1*E[Q].x,vl[Q].y+=1*E[Q].y,vl[Q].z+=1*E[Q].z,vl[Q].x/=1+Ol[0][Q],vl[Q].y/=1+Ol[0][Q],vl[Q].z/=1+Ol[0][Q]}for(Q=0,yl=E.length;Q<yl;Q++)E[Q].x=vl[Q].x,E[Q].y=vl[Q].y,E[Q].z=vl[Q].z}}}let rt=new Kp;class Uu{constructor(f,E,W){this.data=new Int32Array(f*E*W*3),this.width=E,this.height=W}set(f,E,W,Q){let yl=3*((f*this.width+E)*this.height+W);this.data[yl]=Q.ix,this.data[yl+1]=Q.iy,this.data[yl+2]=Q.iz}get(f,E,W){let Q=3*((f*this.width+E)*this.height+W);return{ix:this.data[Q],iy:this.data[Q+1],iz:this.data[Q+2]}}}class Vd{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],Vd.MarchingCube||(Vd.MarchingCube=new Kp)}getVDWIndex(f){return f.elem&&this.vdwRadii[f.elem]!==void 0?f.elem:"X"}getFacesAndVertices(f){let E={};for(let yl=0,Ln=f.length;yl<Ln;yl++)E[f[yl]]=!0;let W=this.verts;for(let yl=0,Ln=W.length;yl<Ln;yl++)W[yl].x=W[yl].x/this.scaleFactor-this.ptranx,W[yl].y=W[yl].y/this.scaleFactor-this.ptrany,W[yl].z=W[yl].z/this.scaleFactor-this.ptranz;let Q=[];for(let yl=0,Ln=this.faces.length;yl<Ln;yl+=3){let Cl=this.faces[yl],Al=this.faces[yl+1],vl=this.faces[yl+2],Fl=W[Cl].atomid,Ol=W[Al].atomid,mu=W[vl].atomid,Xl=Fl;Ol<Xl&&(Xl=Ol),mu<Xl&&(Xl=mu),E[Xl]&&Cl!==Al&&Al!==vl&&Cl!==vl&&(Q.push(Cl),Q.push(Al),Q.push(vl))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:W,faces:Q}}initparm(f,E,W){W>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let Q=1/this.scaleFactor*5.5;this.pminx=f[0][0],this.pmaxx=f[1][0],this.pminy=f[0][1],this.pmaxy=f[1][1],this.pminz=f[0][2],this.pmaxz=f[1][2],E?(this.pminx-=this.probeRadius+Q,this.pminy-=this.probeRadius+Q,this.pminz-=this.probeRadius+Q,this.pmaxx+=this.probeRadius+Q,this.pmaxy+=this.probeRadius+Q,this.pmaxz+=this.probeRadius+Q):(this.pminx-=Q,this.pminy-=Q,this.pminz-=Q,this.pmaxx+=Q,this.pmaxy+=Q,this.pmaxz+=Q),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(E),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(f){let E={};for(const W in this.vdwRadii){let Q=this.vdwRadii[W];E[W]=f?(Q+this.probeRadius)*this.scaleFactor+.5:Q*this.scaleFactor+.5;let yl=E[W]*E[W];this.widxz[W]=Math.floor(E[W])+1,this.depty[W]=new Int32Array(this.widxz[W]*this.widxz[W]);let Ln=0;for(let Cl=0;Cl<this.widxz[W];Cl++)for(let Al=0;Al<this.widxz[W];Al++){let vl=Cl*Cl+Al*Al;if(vl>yl)this.depty[W][Ln]=-1;else{let Fl=Math.sqrt(yl-vl);this.depty[W][Ln]=Math.floor(Fl)}Ln++}}}fillvoxels(f,E){for(let W=0,Q=this.vpBits.length;W<Q;W++)this.vpBits[W]=0,this.vpDistance[W]=-1,this.vpAtomID[W]=-1;for(let W in E){let Q=f[E[W]];Q!==void 0&&this.fillAtom(Q,f)}for(let W=0,Q=this.vpBits.length;W<Q;W++)this.vpBits[W]&this.INOUT&&(this.vpBits[W]|=this.ISDONE)}fillAtom(f,E){let W=Math.floor(.5+this.scaleFactor*(f.x+this.ptranx)),Q=Math.floor(.5+this.scaleFactor*(f.y+this.ptrany)),yl=Math.floor(.5+this.scaleFactor*(f.z+this.ptranz)),Ln=this.getVDWIndex(f),Cl=0,Al=this.pWidth*this.pHeight;for(let vl=0,Fl=this.widxz[Ln];vl<Fl;vl++)for(let Ol=0;Ol<Fl;Ol++){if(this.depty[Ln][Cl]!=-1){for(let mu=-1;mu<2;mu++)for(let Xl=-1;Xl<2;Xl++)for(let Wl=-1;Wl<2;Wl++)if(mu!==0&&Xl!==0&&Wl!==0){let hu=mu*vl,Jl=Wl*Ol;for(let Gu=0;Gu<=this.depty[Ln][Cl];Gu++){let Zu=Gu*Xl,rd=W+hu,wd=Q+Zu,gd=yl+Jl;if(rd<0||wd<0||gd<0||rd>=this.pLength||wd>=this.pWidth||gd>=this.pHeight)continue;let jd=rd*Al+wd*this.pHeight+gd;if(this.vpBits[jd]&this.INOUT){let Qd=E[this.vpAtomID[jd]];if(Qd.serial!=f.serial){let ih=W+hu-Math.floor(.5+this.scaleFactor*(Qd.x+this.ptranx)),Hl=Q+Zu-Math.floor(.5+this.scaleFactor*(Qd.y+this.ptrany)),Iu=yl+Jl-Math.floor(.5+this.scaleFactor*(Qd.z+this.ptranz));hu*hu+Zu*Zu+Jl*Jl<ih*ih+Hl*Hl+Iu*Iu&&(this.vpAtomID[jd]=f.serial)}}else this.vpBits[jd]|=this.INOUT,this.vpAtomID[jd]=f.serial}}}Cl++}}fillvoxelswaals(f,E){for(let W=0,Q=this.vpBits.length;W<Q;W++)this.vpBits[W]&=~this.ISDONE;for(let W in E){let Q=f[E[W]];Q!==void 0&&this.fillAtomWaals(Q,f)}}fillAtomWaals(f,E){let W=0,Q=Math.floor(.5+this.scaleFactor*(f.x+this.ptranx)),yl=Math.floor(.5+this.scaleFactor*(f.y+this.ptrany)),Ln=Math.floor(.5+this.scaleFactor*(f.z+this.ptranz)),Cl=this.getVDWIndex(f),Al=this.pWidth*this.pHeight;for(let vl=0,Fl=this.widxz[Cl];vl<Fl;vl++)for(let Ol=0;Ol<Fl;Ol++){if(this.depty[Cl][W]!=-1){for(let mu=-1;mu<2;mu++)for(let Xl=-1;Xl<2;Xl++)for(let Wl=-1;Wl<2;Wl++)if(mu!==0&&Xl!==0&&Wl!==0){let hu=mu*vl,Jl=Wl*Ol;for(let Gu=0;Gu<=this.depty[Cl][W];Gu++){let Zu=Gu*Xl,rd=Q+hu,wd=yl+Zu,gd=Ln+Jl;if(rd<0||wd<0||gd<0||rd>=this.pLength||wd>=this.pWidth||gd>=this.pHeight)continue;let jd=rd*Al+wd*this.pHeight+gd;if(this.vpBits[jd]&this.ISDONE){let Qd=E[this.vpAtomID[jd]];if(Qd.serial!=f.serial){let ih=Q+hu-Math.floor(.5+this.scaleFactor*(Qd.x+this.ptranx)),Hl=yl+Zu-Math.floor(.5+this.scaleFactor*(Qd.y+this.ptrany)),Iu=Ln+Jl-Math.floor(.5+this.scaleFactor*(Qd.z+this.ptranz));hu*hu+Zu*Zu+Jl*Jl<ih*ih+Hl*Hl+Iu*Iu&&(this.vpAtomID[jd]=f.serial)}}else this.vpBits[jd]|=this.ISDONE,this.vpAtomID[jd]=f.serial}}}W++}}buildboundary(){let f=this.pWidth*this.pHeight;for(let E=0;E<this.pLength;E++)for(let W=0;W<this.pHeight;W++)for(let Q=0;Q<this.pWidth;Q++){let yl=E*f+Q*this.pHeight+W;if(this.vpBits[yl]&this.INOUT){let Ln=0;for(;Ln<26;){let Cl=E+this.nb[Ln][0],Al=W+this.nb[Ln][2],vl=Q+this.nb[Ln][1];if(Cl>-1&&Cl<this.pLength&&vl>-1&&vl<this.pWidth&&Al>-1&&Al<this.pHeight&&!(this.vpBits[Cl*f+vl*this.pHeight+Al]&this.INOUT)){this.vpBits[yl]|=this.ISBOUND;break}Ln++}}}}fastdistancemap(){let f,E=new Uu(this.pLength,this.pWidth,this.pHeight),W=this.pWidth*this.pHeight,Q=this.cutRadius*this.cutRadius,yl=[],Ln=[];for(let vl=0;vl<this.pLength;vl++)for(let Fl=0;Fl<this.pWidth;Fl++)for(let Ol=0;Ol<this.pHeight;Ol++)if(f=vl*W+Fl*this.pHeight+Ol,this.vpBits[f]&=~this.ISDONE,this.vpBits[f]&this.INOUT&&this.vpBits[f]&this.ISBOUND){let mu={ix:vl,iy:Fl,iz:Ol};E.set(vl,Fl,Ol,mu),yl.push(mu),this.vpDistance[f]=0,this.vpBits[f]|=this.ISDONE,this.vpBits[f]&=~this.ISBOUND}do{Ln=this.fastoneshell(yl,E),yl=[];for(let vl=0,Fl=Ln.length;vl<Fl;vl++)f=W*Ln[vl].ix+this.pHeight*Ln[vl].iy+Ln[vl].iz,this.vpBits[f]&=~this.ISBOUND,this.vpDistance[f]<=1.0404*Q&&yl.push({ix:Ln[vl].ix,iy:Ln[vl].iy,iz:Ln[vl].iz})}while(yl.length!==0);yl=[],Ln=[],E=null;let Cl=this.scaleFactor-.5;Cl<0&&(Cl=0);let Al=Q-.5/(.1+Cl);for(let vl=0;vl<this.pLength;vl++)for(let Fl=0;Fl<this.pWidth;Fl++)for(let Ol=0;Ol<this.pHeight;Ol++)f=vl*W+Fl*this.pHeight+Ol,this.vpBits[f]&=~this.ISBOUND,this.vpBits[f]&this.INOUT&&(this.vpBits[f]&this.ISDONE&&!(this.vpBits[f]&this.ISDONE&&this.vpDistance[f]>=Al)||(this.vpBits[f]|=this.ISBOUND))}fastoneshell(f,E){let W,Q,yl,Ln,Cl,Al,vl,Fl,Ol,mu=[];if(f.length===0)return mu;let Xl={ix:-1,iy:-1,iz:-1},Wl=this.pWidth*this.pHeight;for(let hu=0,Jl=f.length;hu<Jl;hu++){W=f[hu].ix,Q=f[hu].iy,yl=f[hu].iz,Fl=E.get(W,Q,yl);for(let Gu=0;Gu<6;Gu++)Xl.ix=W+this.nb[Gu][0],Xl.iy=Q+this.nb[Gu][1],Xl.iz=yl+this.nb[Gu][2],Xl.ix<this.pLength&&Xl.ix>-1&&Xl.iy<this.pWidth&&Xl.iy>-1&&Xl.iz<this.pHeight&&Xl.iz>-1&&(Ol=Xl.ix*Wl+this.pHeight*Xl.iy+Xl.iz,this.vpBits[Ol]&this.INOUT&&!(this.vpBits[Ol]&this.ISDONE)?(E.set(Xl.ix,Xl.iy,yl+this.nb[Gu][2],Fl),Ln=Xl.ix-Fl.ix,Cl=Xl.iy-Fl.iy,Al=Xl.iz-Fl.iz,vl=Ln*Ln+Cl*Cl+Al*Al,this.vpDistance[Ol]=vl,this.vpBits[Ol]|=this.ISDONE,this.vpBits[Ol]|=this.ISBOUND,mu.push({ix:Xl.ix,iy:Xl.iy,iz:Xl.iz})):this.vpBits[Ol]&this.INOUT&&this.vpBits[Ol]&this.ISDONE&&(Ln=Xl.ix-Fl.ix,Cl=Xl.iy-Fl.iy,Al=Xl.iz-Fl.iz,vl=Ln*Ln+Cl*Cl+Al*Al,vl<this.vpDistance[Ol]&&(E.set(Xl.ix,Xl.iy,Xl.iz,Fl),this.vpDistance[Ol]=vl,this.vpBits[Ol]&this.ISBOUND||(this.vpBits[Ol]|=this.ISBOUND,mu.push({ix:Xl.ix,iy:Xl.iy,iz:Xl.iz})))))}for(let hu=0,Jl=f.length;hu<Jl;hu++){W=f[hu].ix,Q=f[hu].iy,yl=f[hu].iz,Fl=E.get(W,Q,yl);for(let Gu=6;Gu<18;Gu++)Xl.ix=W+this.nb[Gu][0],Xl.iy=Q+this.nb[Gu][1],Xl.iz=yl+this.nb[Gu][2],Xl.ix<this.pLength&&Xl.ix>-1&&Xl.iy<this.pWidth&&Xl.iy>-1&&Xl.iz<this.pHeight&&Xl.iz>-1&&(Ol=Xl.ix*Wl+this.pHeight*Xl.iy+Xl.iz,this.vpBits[Ol]&this.INOUT&&!(this.vpBits[Ol]&this.ISDONE)?(E.set(Xl.ix,Xl.iy,yl+this.nb[Gu][2],Fl),Ln=Xl.ix-Fl.ix,Cl=Xl.iy-Fl.iy,Al=Xl.iz-Fl.iz,vl=Ln*Ln+Cl*Cl+Al*Al,this.vpDistance[Ol]=vl,this.vpBits[Ol]|=this.ISDONE,this.vpBits[Ol]|=this.ISBOUND,mu.push({ix:Xl.ix,iy:Xl.iy,iz:Xl.iz})):this.vpBits[Ol]&this.INOUT&&this.vpBits[Ol]&this.ISDONE&&(Ln=Xl.ix-Fl.ix,Cl=Xl.iy-Fl.iy,Al=Xl.iz-Fl.iz,vl=Ln*Ln+Cl*Cl+Al*Al,vl<this.vpDistance[Ol]&&(E.set(Xl.ix,Xl.iy,Xl.iz,Fl),this.vpDistance[Ol]=vl,this.vpBits[Ol]&this.ISBOUND||(this.vpBits[Ol]|=this.ISBOUND,mu.push({ix:Xl.ix,iy:Xl.iy,iz:Xl.iz})))))}for(let hu=0,Jl=f.length;hu<Jl;hu++){W=f[hu].ix,Q=f[hu].iy,yl=f[hu].iz,Fl=E.get(W,Q,yl);for(let Gu=18;Gu<26;Gu++)Xl.ix=W+this.nb[Gu][0],Xl.iy=Q+this.nb[Gu][1],Xl.iz=yl+this.nb[Gu][2],Xl.ix<this.pLength&&Xl.ix>-1&&Xl.iy<this.pWidth&&Xl.iy>-1&&Xl.iz<this.pHeight&&Xl.iz>-1&&(Ol=Xl.ix*Wl+this.pHeight*Xl.iy+Xl.iz,this.vpBits[Ol]&this.INOUT&&!(this.vpBits[Ol]&this.ISDONE)?(E.set(Xl.ix,Xl.iy,yl+this.nb[Gu][2],Fl),Ln=Xl.ix-Fl.ix,Cl=Xl.iy-Fl.iy,Al=Xl.iz-Fl.iz,vl=Ln*Ln+Cl*Cl+Al*Al,this.vpDistance[Ol]=vl,this.vpBits[Ol]|=this.ISDONE,this.vpBits[Ol]|=this.ISBOUND,mu.push({ix:Xl.ix,iy:Xl.iy,iz:Xl.iz})):this.vpBits[Ol]&this.INOUT&&this.vpBits[Ol]&this.ISDONE&&(Ln=Xl.ix-Fl.ix,Cl=Xl.iy-Fl.iy,Al=Xl.iz-Fl.iz,vl=Ln*Ln+Cl*Cl+Al*Al,vl<this.vpDistance[Ol]&&(E.set(Xl.ix,Xl.iy,Xl.iz,Fl),this.vpDistance[Ol]=vl,this.vpBits[Ol]&this.ISBOUND||(this.vpBits[Ol]|=this.ISBOUND,mu.push({ix:Xl.ix,iy:Xl.iy,iz:Xl.iz})))))}return mu}marchingcubeinit(f){for(let E=0,W=this.vpBits.length;E<W;E++)f==1?this.vpBits[E]&=~this.ISBOUND:f==4?(this.vpBits[E]&=~this.ISDONE,this.vpBits[E]&this.ISBOUND&&(this.vpBits[E]|=this.ISDONE),this.vpBits[E]&=~this.ISBOUND):f==2?this.vpBits[E]&this.ISBOUND&&this.vpBits[E]&this.ISDONE?this.vpBits[E]&=~this.ISBOUND:this.vpBits[E]&this.ISBOUND&&!(this.vpBits[E]&this.ISDONE)&&(this.vpBits[E]|=this.ISDONE):f==3&&(this.vpBits[E]&=~this.ISBOUND)}marchingcube(f){this.marchingcubeinit(f),this.verts=[],this.faces=[],Vd.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let E=this.pWidth*this.pHeight;for(let W=0,Q=this.verts.length;W<Q;W++)this.verts[W].atomid=this.vpAtomID[this.verts[W].x*E+this.pHeight*this.verts[W].y+this.verts[W].z];Vd.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}Vd.MarchingCube=new Kp;var Eh=s(848);class ph{static finalizeGeo(f){var E=f.updateGeoGroup(0);E.vertices>0&&E.truncateArrayBuffers(!0,!0)}static updateColor(f,E){var W,Q,yl;E=E||ie.CC.color(E),f.colorsNeedUpdate=!0,E.constructor!==Array&&(W=E.r,Q=E.g,yl=E.b);for(let Ln in f.geometryGroups){let Cl=f.geometryGroups[Ln],Al=Cl.colorArray;for(let vl=0,Fl=Cl.vertices;vl<Fl;++vl){if(E.constructor===Array){let Ol=E[vl];W=Ol.r,Q=Ol.g,yl=Ol.b}Al[3*vl]=W,Al[3*vl+1]=Q,Al[3*vl+2]=yl}}}static drawArrow(f,E,W){var Q=W.start,yl=W.end,Ln=W.radius,Cl=W.radiusRatio,Al=W.mid,vl=W.midpos;if(!Q||!yl)return;var Fl=E.updateGeoGroup(51),Ol=new Y.Vector3(yl.x,yl.y,yl.z).sub(Q);if(vl){let ag=Ol.length();Al=vl>0?vl/ag:(ag+vl)/ag}Ol.multiplyScalar(Al);var mu=new Y.Vector3(Q.x,Q.y,Q.z).add(Ol),Xl=Ol.clone().negate();let Wl=new Y.Vector3(Q.x,Q.y,Q.z);f.intersectionShape.cylinder.push(new oe.Cylinder(Wl,mu.clone(),Ln)),f.intersectionShape.sphere.push(new oe.Sphere(Wl,Ln));var hu=[];hu[0]=Ol.clone(),Math.abs(hu[0].x)>1e-4?hu[0].y+=1:hu[0].x+=1,hu[0].cross(Ol),hu[0].normalize(),hu[4]=hu[0].clone(),hu[4].crossVectors(hu[0],Ol),hu[4].normalize(),hu[8]=hu[0].clone().negate(),hu[12]=hu[4].clone().negate(),hu[2]=hu[0].clone().add(hu[4]).normalize(),hu[6]=hu[4].clone().add(hu[8]).normalize(),hu[10]=hu[8].clone().add(hu[12]).normalize(),hu[14]=hu[12].clone().add(hu[0]).normalize(),hu[1]=hu[0].clone().add(hu[2]).normalize(),hu[3]=hu[2].clone().add(hu[4]).normalize(),hu[5]=hu[4].clone().add(hu[6]).normalize(),hu[7]=hu[6].clone().add(hu[8]).normalize(),hu[9]=hu[8].clone().add(hu[10]).normalize(),hu[11]=hu[10].clone().add(hu[12]).normalize(),hu[13]=hu[12].clone().add(hu[14]).normalize(),hu[15]=hu[14].clone().add(hu[0]).normalize();var Jl,Gu,Zu,rd,wd,gd,jd,Qd,ih,Hl,Iu,Fd,Ud,eh,Sh,Lh,Ah,yh,Nh,sh,Th,dp,$h=Fl.vertices,ap=Fl.vertexArray,Yh=Fl.faceArray,Mh=Fl.normalArray,pp=Fl.lineArray;for(Gu=0,Zu=hu.length;Gu<Zu;++Gu){Jl=3*($h+3*Gu);var Ip=hu[Gu].clone().multiplyScalar(Ln).add(Q),gp=hu[Gu].clone().multiplyScalar(Ln).add(mu),Xh=hu[Gu].clone().multiplyScalar(Ln*Cl).add(mu);if(ap[Jl]=Ip.x,ap[Jl+1]=Ip.y,ap[Jl+2]=Ip.z,ap[Jl+3]=gp.x,ap[Jl+4]=gp.y,ap[Jl+5]=gp.z,ap[Jl+6]=Xh.x,ap[Jl+7]=Xh.y,ap[Jl+8]=Xh.z,Gu>0){var Qp=ap[Jl-3],Wp=ap[Jl-2],$p=ap[Jl-1],Hp=new Y.Vector3(Qp,Wp,$p),Vp=new Y.Vector3(yl.x,yl.y,yl.z),Op=mu.clone(),Jp=new Y.Vector3(Xh.x,Xh.y,Xh.z);f.intersectionShape.triangle.push(new oe.Triangle(Jp,Vp,Hp)),f.intersectionShape.triangle.push(new oe.Triangle(Hp.clone(),Op,Jp.clone()))}}Fl.vertices+=48,ap[Jl=3*Fl.vertices]=Q.x,ap[Jl+1]=Q.y,ap[Jl+2]=Q.z,ap[Jl+3]=mu.x,ap[Jl+4]=mu.y,ap[Jl+5]=mu.z,ap[Jl+6]=yl.x,ap[Jl+7]=yl.y,ap[Jl+8]=yl.z,Fl.vertices+=3;var Df=Fl.vertices-3,tm=Fl.vertices-2,og=Fl.vertices-1,tg=3*Df,Zf=3*tm,Xf=3*og;for(Gu=0,Zu=hu.length-1;Gu<Zu;++Gu){var Nf=$h+3*Gu;Jl=3*Nf,wd=Fl.faceidx,gd=Fl.lineidx,Ud=3*(jd=Nf),eh=3*(Qd=Nf+1),Sh=3*(ih=Nf+2),Lh=3*(Hl=Nf+4),Ah=3*(Iu=Nf+5),yh=3*(Fd=Nf+3),Nh=sh=hu[Gu],Th=dp=hu[Gu+1],Mh[Ud]=Nh.x,Mh[eh]=sh.x,Mh[yh]=dp.x,Mh[Ud+1]=Nh.y,Mh[eh+1]=sh.y,Mh[yh+1]=dp.y,Mh[Ud+2]=Nh.z,Mh[eh+2]=sh.z,Mh[yh+2]=dp.z,Mh[eh]=sh.x,Mh[Lh]=Th.x,Mh[yh]=dp.x,Mh[eh+1]=sh.y,Mh[Lh+1]=Th.y,Mh[yh+1]=dp.y,Mh[eh+2]=sh.z,Mh[Lh+2]=Th.z,Mh[yh+2]=dp.z,Mh[Sh]=sh.x,Mh[Ah]=Th.x,Mh[Sh+1]=sh.y,Mh[Ah+1]=Th.y,Mh[Sh+2]=sh.z,Mh[Ah+2]=Th.z,Yh[wd]=jd,Yh[wd+1]=Qd,Yh[wd+2]=Fd,Yh[wd+3]=Qd,Yh[wd+4]=Hl,Yh[wd+5]=Fd,Yh[wd+6]=jd,Yh[wd+7]=Fd,Yh[wd+8]=Df,Yh[wd+9]=ih,Yh[wd+10]=tm,Yh[wd+11]=Iu,Yh[wd+12]=ih,Yh[wd+13]=og,Yh[wd+14]=Iu,pp[gd]=jd,pp[gd+1]=Qd,pp[gd+2]=jd,pp[gd+3]=Fd,pp[gd+4]=Hl,pp[gd+5]=Fd,pp[gd+6]=jd,pp[gd+7]=Fd,pp[gd+8]=ih,pp[gd+9]=Qd,pp[gd+10]=ih,pp[gd+11]=Iu,pp[gd+12]=Hl,pp[gd+13]=Iu,pp[gd+14]=ih,pp[gd+15]=og,pp[gd+16]=ih,pp[gd+17]=Iu,pp[gd+18]=og,pp[gd+19]=Iu,Fl.faceidx+=15,Fl.lineidx+=20}rd=[$h+45,$h+46,$h+1,$h,$h+47,$h+2],wd=Fl.faceidx,gd=Fl.lineidx,Ud=3*(jd=rd[0]),eh=3*(Qd=rd[1]),Sh=3*(ih=rd[4]),Lh=3*(Hl=rd[2]),Ah=3*(Iu=rd[5]),yh=3*(Fd=rd[3]),Nh=sh=hu[15],Th=dp=hu[0],Mh[Ud]=Nh.x,Mh[eh]=sh.x,Mh[yh]=dp.x,Mh[Ud+1]=Nh.y,Mh[eh+1]=sh.y,Mh[yh+1]=dp.y,Mh[Ud+2]=Nh.z,Mh[eh+2]=sh.z,Mh[yh+2]=dp.z,Mh[eh]=sh.x,Mh[Lh]=Th.x,Mh[yh]=dp.x,Mh[eh+1]=sh.y,Mh[Lh+1]=Th.y,Mh[yh+1]=dp.y,Mh[eh+2]=sh.z,Mh[Lh+2]=Th.z,Mh[yh+2]=dp.z,Mh[Sh]=sh.x,Mh[Ah]=Th.x,Mh[Sh+1]=sh.y,Mh[Ah+1]=Th.y,Mh[Sh+2]=sh.z,Mh[Ah+2]=Th.z,Ol.normalize(),Xl.normalize(),Mh[tg]=Xl.x,Mh[Zf]=Mh[Xf]=Ol.x,Mh[tg+1]=Xl.y,Mh[Zf+1]=Mh[Xf+1]=Ol.y,Mh[tg+2]=Xl.z,Mh[Zf+2]=Mh[Xf+2]=Ol.z,Yh[wd]=jd,Yh[wd+1]=Qd,Yh[wd+2]=Fd,Yh[wd+3]=Qd,Yh[wd+4]=Hl,Yh[wd+5]=Fd,Yh[wd+6]=jd,Yh[wd+7]=Fd,Yh[wd+8]=Df,Yh[wd+9]=ih,Yh[wd+10]=tm,Yh[wd+11]=Iu,Yh[wd+12]=ih,Yh[wd+13]=og,Yh[wd+14]=Iu,pp[gd]=jd,pp[gd+1]=Qd,pp[gd+2]=jd,pp[gd+3]=Fd,pp[gd+4]=Hl,pp[gd+5]=Fd,pp[gd+6]=jd,pp[gd+7]=Fd,pp[gd+8]=ih,pp[gd+9]=Qd,pp[gd+10]=ih,pp[gd+11]=Iu,pp[gd+12]=Hl,pp[gd+13]=Iu,pp[gd+14]=ih,pp[gd+15]=og,pp[gd+16]=ih,pp[gd+17]=Iu,pp[gd+18]=og,pp[gd+19]=Iu,Fl.faceidx+=15,Fl.lineidx+=20}static updateBoundingFromPoints(f,E,W,Q){f.center.set(0,0,0);let yl=1/0,Ln=1/0,Cl=1/0,Al=-1/0,vl=-1/0,Fl=-1/0;f.box&&(yl=f.box.min.x,Al=f.box.max.x,Ln=f.box.min.y,vl=f.box.max.y,Cl=f.box.min.z,Fl=f.box.max.z);for(let Wl=0,hu=Q;Wl<hu;Wl++){var Ol=W[3*Wl],mu=W[3*Wl+1],Xl=W[3*Wl+2];Ol<yl&&(yl=Ol),mu<Ln&&(Ln=mu),Xl<Cl&&(Cl=Xl),Ol>Al&&(Al=Ol),mu>vl&&(vl=mu),Xl>Fl&&(Fl=Xl)}f.center.set((Al+yl)/2,(vl+Ln)/2,(Fl+Cl)/2),f.radius=f.center.distanceTo({x:Al,y:vl,z:Fl}),f.box={min:{x:yl,y:Ln,z:Cl},max:{x:Al,y:vl,z:Fl}}}static addCustomGeo(f,E,W,Q,yl){var Ln,Cl,Al,vl,Fl,Ol,mu,Xl,Wl,hu=E.addGeoGroup(),Jl=W.vertexArr,Gu=W.normalArr,Zu=W.faceArr;hu.vertices=Jl.length,hu.faceidx=Zu.length;var rd=hu.vertexArray,wd=hu.colorArray;for(Q.constructor!==Array&&(Xl=Q.r,Wl=Q.g,vl=Q.b),Ol=0,mu=hu.vertices;Ol<mu;++Ol)Ln=3*Ol,Cl=Jl[Ol],rd[Ln]=Cl.x,rd[Ln+1]=Cl.y,rd[Ln+2]=Cl.z,Q.constructor===Array&&(Xl=(Fl=Q[Ol]).r,Wl=Fl.g,vl=Fl.b),wd[Ln]=Xl,wd[Ln+1]=Wl,wd[Ln+2]=vl;if(yl)for(Ol=0,mu=hu.faceidx/3;Ol<mu;++Ol){Al=Zu[Ln=3*Ol],vl=Zu[Ln+1],Fl=Zu[Ln+2];var gd=new Y.Vector3,jd=new Y.Vector3,Qd=new Y.Vector3;f.intersectionShape.triangle.push(new oe.Triangle(gd.copy(Jl[Al]),jd.copy(Jl[vl]),Qd.copy(Jl[Fl])))}if(yl){var ih=new Y.Vector3(0,0,0),Hl=0;for(let Ud=0;Ud<E.geometryGroups.length;Ud++)ih.add(E.geometryGroups[Ud].getCentroid()),Hl++;ih.divideScalar(Hl),ph.updateBoundingFromPoints(f.boundingSphere,{centroid:ih},rd,hu.vertices)}if(hu.faceArray=new Uint16Array(Zu),hu.truncateArrayBuffers(!0,!0),Gu.length<hu.vertices)hu.setNormals();else{var Iu,Fd=hu.normalArray=new Float32Array(3*hu.vertices);for(Ol=0,mu=hu.vertices;Ol<mu;++Ol)Ln=3*Ol,Iu=Gu[Ol],Fd[Ln]=Iu.x,Fd[Ln+1]=Iu.y,Fd[Ln+2]=Iu.z}hu.setLineIndices(),hu.lineidx=hu.lineArray.length}static updateFromStyle(f,E){E.color!==void 0?(f.color=E.color||new ie.Color,E.color instanceof ie.Color||(f.color=ie.CC.color(E.color))):f.color=ie.CC.color(0),f.wireframe=!!E.wireframe,f.opacity=E.alpha?(0,Y.clamp)(E.alpha,0,1):1,E.opacity!==void 0&&(f.opacity=(0,Y.clamp)(E.opacity,0,1)),f.side=E.side!==void 0?E.side:V.DoubleSide,f.linewidth=E.linewidth===void 0?1:E.linewidth,f.clickable=!!E.clickable,f.callback=(0,Et.makeFunction)(E.callback),f.hoverable=!!E.hoverable,f.hover_callback=(0,Et.makeFunction)(E.hover_callback),f.unhover_callback=(0,Et.makeFunction)(E.unhover_callback),f.contextMenuEnabled=!!E.contextMenuEnabled,f.hidden=E.hidden,f.frame=E.frame}constructor(f){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=V.DoubleSide,this.stylespec=f||{},this.boundingSphere=new oe.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},ph.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new V.Geometry(!0),this.linegeo=new V.Geometry(!0)}updateStyle(f){for(var E in f)this.stylespec[E]=f[E];if(ph.updateFromStyle(this,this.stylespec),f.voldata&&f.volscheme){(0,Et.adjustVolumeStyle)(f);const W=f.volscheme,Q=f.voldata,yl=ie.CC,Ln=W.range()||[-1,1];this.geo.setColors(function(Cl,Al,vl){let Fl=Q.getVal(Cl,Al,vl);return yl.color(W.valueToHex(Fl,Ln))}),delete this.color}}addCustom(f){f.vertexArr=f.vertexArr||[],f.faceArr=f.faceArr||[],f.normalArr=f.normalArr||[],ph.drawCustom(this,this.geo,f)}addSphere(f){f.center||(f.center=new Y.Vector3(0,0,0)),f.radius=f.radius?(0,Y.clamp)(f.radius,0,1/0):1.5,f.color=ie.CC.color(f.color),this.intersectionShape.sphere.push(new oe.Sphere(f.center,f.radius)),M.drawSphere(this.geo,f.center,f.radius,f.color,f.quality),this.components.push({centroid:new Y.Vector3(f.center.x,f.center.y,f.center.z)});var E=this.geo.updateGeoGroup(0);ph.updateBoundingFromPoints(this.boundingSphere,this.components,E.vertexArray,E.vertices)}addBox(f){var E,W,Q,yl=f.dimensions||{w:1,h:1,d:1};E=typeof yl.w=="number"?{x:yl.w,y:0,z:0}:yl.w,W=typeof yl.h=="number"?{x:0,y:yl.h,z:0}:yl.h,Q=typeof yl.d=="number"?{x:0,y:0,z:yl.d}:yl.d;var Ln=f.corner;Ln==null&&(Ln=f.center!==void 0?{x:f.center.x-.5*(E.x+W.x+Q.x),y:f.center.y-.5*(E.y+W.y+Q.y),z:f.center.z-.5*(E.z+W.z+Q.z)}:{x:0,y:0,z:0});var Cl=[{x:Ln.x,y:Ln.y,z:Ln.z},{x:Ln.x+E.x,y:Ln.y+E.y,z:Ln.z+E.z},{x:Ln.x+W.x,y:Ln.y+W.y,z:Ln.z+W.z},{x:Ln.x+E.x+W.x,y:Ln.y+E.y+W.y,z:Ln.z+E.z+W.z},{x:Ln.x+Q.x,y:Ln.y+Q.y,z:Ln.z+Q.z},{x:Ln.x+E.x+Q.x,y:Ln.y+E.y+Q.y,z:Ln.z+E.z+Q.z},{x:Ln.x+W.x+Q.x,y:Ln.y+W.y+Q.y,z:Ln.z+W.z+Q.z},{x:Ln.x+E.x+W.x+Q.x,y:Ln.y+E.y+W.y+Q.y,z:Ln.z+E.z+W.z+Q.z}],Al=[],vl=[];Al.splice(Al.length,0,Cl[0],Cl[1],Cl[2],Cl[3]),vl.splice(vl.length,0,0,2,1,1,2,3);var Fl=4;Al.splice(Al.length,0,Cl[2],Cl[3],Cl[6],Cl[7]),vl.splice(vl.length,0,Fl+0,Fl+2,Fl+1,Fl+1,Fl+2,Fl+3),Fl+=4,Al.splice(Al.length,0,Cl[4],Cl[5],Cl[0],Cl[1]),vl.splice(vl.length,0,Fl+0,Fl+2,Fl+1,Fl+1,Fl+2,Fl+3),Fl+=4,Al.splice(Al.length,0,Cl[6],Cl[7],Cl[4],Cl[5]),vl.splice(vl.length,0,Fl+0,Fl+2,Fl+1,Fl+1,Fl+2,Fl+3),Fl+=4,Al.splice(Al.length,0,Cl[3],Cl[1],Cl[7],Cl[5]),vl.splice(vl.length,0,Fl+0,Fl+2,Fl+1,Fl+1,Fl+2,Fl+3),Fl+=4,Al.splice(Al.length,0,Cl[2],Cl[6],Cl[0],Cl[4]),vl.splice(vl.length,0,Fl+0,Fl+2,Fl+1,Fl+1,Fl+2,Fl+3),Fl+=4;var Ol=(0,Et.extend)({},f);Ol.vertexArr=Al,Ol.faceArr=vl,Ol.normalArr=[],ph.drawCustom(this,this.geo,Ol);var mu=new Y.Vector3;this.components.push({centroid:mu.addVectors(Cl[0],Cl[7]).multiplyScalar(.5)});var Xl=this.geo.updateGeoGroup(0);ph.updateBoundingFromPoints(this.boundingSphere,this.components,Xl.vertexArray,Xl.vertices)}addCylinder(f){var E,W;E=f.start?new Y.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):new Y.Vector3(0,0,0),f.end?(W=new Y.Vector3(f.end.x,f.end.y||0,f.end.z||0)).x===void 0&&(W.x=3):W=new Y.Vector3(0,0,0);var Q=f.radius||.1,yl=ie.CC.color(f.color);this.intersectionShape.cylinder.push(new oe.Cylinder(E,W,Q)),M.drawCylinder(this.geo,E,W,Q,yl,f.fromCap,f.toCap);var Ln=new Y.Vector3;this.components.push({centroid:Ln.addVectors(E,W).multiplyScalar(.5)});var Cl=this.geo.updateGeoGroup(0);ph.updateBoundingFromPoints(this.boundingSphere,this.components,Cl.vertexArray,Cl.vertices)}addDashedCylinder(f){var E,W;f.dashLength=f.dashLength||.25,f.gapLength=f.gapLength||.25,E=f.start?new Y.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):new Y.Vector3(0,0,0),f.end?(W=new Y.Vector3(f.end.x,f.end.y||0,f.end.z||0)).x===void 0&&(W.x=3):W=new Y.Vector3(3,0,0);for(var Q=f.radius||.1,yl=ie.CC.color(f.color),Ln=Math.sqrt(Math.pow(E.x-W.x,2)+Math.pow(E.y-W.y,2)+Math.pow(E.z-W.z,2)),Cl=Ln/(f.gapLength+f.dashLength),Al=new Y.Vector3(f.start.x||0,f.start.y||0,f.start.z||0),vl=new Y.Vector3(f.end.x,f.end.y||0,f.end.z||0),Fl=new Y.Vector3((W.x-E.x)/(Ln/f.gapLength),(W.y-E.y)/(Ln/f.gapLength),(W.z-E.z)/(Ln/f.gapLength)),Ol=new Y.Vector3((W.x-E.x)/(Ln/f.dashLength),(W.y-E.y)/(Ln/f.dashLength),(W.z-E.z)/(Ln/f.dashLength)),mu=0;mu<Cl;mu++)vl=new Y.Vector3(Al.x+Ol.x,Al.y+Ol.y,Al.z+Ol.z),this.intersectionShape.cylinder.push(new oe.Cylinder(Al,vl,Q)),M.drawCylinder(this.geo,Al,vl,Q,yl,f.fromCap,f.toCap),Al=new Y.Vector3(vl.x+Fl.x,vl.y+Fl.y,vl.z+Fl.z);var Xl=new Y.Vector3;this.components.push({centroid:Xl.addVectors(E,W).multiplyScalar(.5)});var Wl=this.geo.updateGeoGroup(0);ph.updateBoundingFromPoints(this.boundingSphere,this.components,Wl.vertexArray,Wl.vertices)}addCurve(f){f.points=f.points||[],f.smooth=f.smooth||10,f.fromCap===void 0&&(f.fromCap=2),f.toCap===void 0&&(f.toCap=2);var E=ml(f.points,f.smooth);if(E.length<3)console.log("Too few points in addCurve");else{var W=f.radius||.1,Q=ie.CC.color(f.color),yl=0,Ln=E.length-1,Cl=E[0].distanceTo(E[1]),Al=Math.ceil(2*W/Cl);if(f.toArrow){let mu={start:E[Ln-=Al],end:E[E.length-1],radius:W,color:Q,mid:1e-4};this.addArrow(mu)}if(f.fromArrow){let mu={start:E[yl+=Al],end:E[0],radius:W,color:Q,mid:1e-4};this.addArrow(mu)}for(var vl=Math.ceil(E.length/2),Fl={radius:W,color:Q,fromCap:2,toCap:2},Ol=yl;Ol<Ln;Ol++)Fl.start=E[Ol],Fl.end=E[Ol+1],Fl.fromCap=2,Fl.toCap=2,Ol<vl?(Fl.fromCap=2,Fl.toCap=0):Ol>vl?(Fl.fromCap=0,Fl.toCap=2):(Fl.fromCap=2,Fl.toCap=2),this.addCylinder(Fl)}}addLine(f){var E,W;E=f.start?new Y.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):new Y.Vector3(0,0,0),f.end?(W=new Y.Vector3(f.end.x,f.end.y||0,f.end.z||0)).x===void 0&&(W.x=3):W=new Y.Vector3(3,0,0);var Q=this.geo.updateGeoGroup(2),yl=Q.vertices,Ln=3*yl,Cl=Q.vertexArray;Cl[Ln]=E.x,Cl[Ln+1]=E.y,Cl[Ln+2]=E.z,Cl[Ln+3]=W.x,Cl[Ln+4]=W.y,Cl[Ln+5]=W.z,Q.vertices+=2;var Al=Q.lineArray,vl=Q.lineidx;Al[vl]=yl,Al[vl+1]=yl+1,Q.lineidx+=2;var Fl=new Y.Vector3;this.components.push({centroid:Fl.addVectors(E,W).multiplyScalar(.5)}),Q=this.geo.updateGeoGroup(0),ph.updateBoundingFromPoints(this.boundingSphere,this.components,Q.vertexArray,Q.vertices)}addArrow(f){if(f.start?f.start=new Y.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):f.start=new Y.Vector3(0,0,0),f.dir instanceof Y.Vector3&&typeof f.length=="number"){var E=f.dir.clone().multiplyScalar(f.length).add(f.start);f.end=E}else f.end?(f.end=new Y.Vector3(f.end.x,f.end.y||0,f.end.z||0),f.end.x===void 0&&(f.end.x=3)):f.end=new Y.Vector3(3,0,0);f.radius=f.radius||.1,f.radiusRatio=f.radiusRatio||1.618034,f.mid=0<f.mid&&f.mid<1?f.mid:.618034,ph.drawArrow(this,this.geo,f);var W=new Y.Vector3;this.components.push({centroid:W.addVectors(f.start,f.end).multiplyScalar(.5)});var Q=this.geo.updateGeoGroup(0);ph.updateBoundingFromPoints(this.boundingSphere,this.components,Q.vertexArray,Q.vertices)}static distance_from(f,E){return Math.sqrt(Math.pow(f.x-E.x,2)+Math.pow(f.y-E.y,2)+Math.pow(f.z-E.z,2))}static inSelectedRegion(f,E,W){for(var Q=0;Q<E.length;Q++)if(ph.distance_from(E[Q],f)<=W)return!0;return!1}addIsosurface(f,E,W,Q){var yl,Ln,Cl=E.isoval!==void 0&&typeof E.isoval=="number"?E.isoval:0,Al=!!E.voxel,vl=E.smoothness===void 0?1:E.smoothness,Fl=f.size.x,Ol=f.size.y,mu=f.size.z,Xl=new Int16Array(Fl*Ol*mu),Wl=f.data;for(yl=0,Ln=Xl.length;yl<Ln;++yl)Xl[yl]=-1;var hu=new Uint8Array(Fl*Ol*mu);for(yl=0,Ln=Wl.length;yl<Ln;++yl)(Cl>=0?Wl[yl]-Cl:Cl-Wl[yl])>0&&(hu[yl]|=ph.ISDONE);var Jl=[],Gu=[];rt.march(hu,Jl,Gu,{fulltable:!0,voxel:Al,unitCube:f.unit,origin:f.origin,matrix:f.matrix,nX:Fl,nY:Ol,nZ:mu}),!Al&&vl>0&&rt.laplacianSmooth(vl,Jl,Gu);var Zu=[],rd=[],wd=[];if(E.selectedRegion&&E.coords===void 0&&(E.coords=E.selectedRegion),E.coords===void 0&&E.selection!==void 0&&(Q?E.coords=Q.selectedAtoms(E.selection):console.log("addIsosurface needs viewer is selection provided.")),E.coords!==void 0){var gd=E.coords[0].x,jd=E.coords[0].y,Qd=E.coords[0].z,ih=E.coords[0].x,Hl=E.coords[0].y,Iu=E.coords[0].z;for(let sh=0;sh<E.coords.length;sh++)E.coords[sh].x>gd?gd=E.coords[sh].x:E.coords[sh].x<ih&&(ih=E.coords[sh].x),E.coords[sh].y>jd?jd=E.coords[sh].y:E.coords[sh].y<Hl&&(Hl=E.coords[sh].y),E.coords[sh].z>Qd?Qd=E.coords[sh].z:E.coords[sh].z<Iu&&(Iu=E.coords[sh].z);var Fd=2;E.radius!==void 0&&(Fd=E.radius),E.selectedOffset!==void 0&&(Fd=E.selectedOffset),E.seldist!==void 0&&(Fd=E.seldist),ih-=Fd,gd+=Fd,Hl-=Fd,jd+=Fd,Iu-=Fd,Qd+=Fd;for(let sh=0;sh<Jl.length;sh++)Jl[sh].x>ih&&Jl[sh].x<gd&&Jl[sh].y>Hl&&Jl[sh].y<jd&&Jl[sh].z>Iu&&Jl[sh].z<Qd&&ph.inSelectedRegion(Jl[sh],E.coords,Fd)?(Zu.push(rd.length),rd.push(Jl[sh])):Zu.push(-1);for(let sh=0;sh+2<Gu.length;sh+=3)Zu[Gu[sh]]!==-1&&Zu[Gu[sh+1]]!==-1&&Zu[Gu[sh+2]]!==-1&&(wd.push(Gu[sh]-(Gu[sh]-Zu[Gu[sh]])),wd.push(Gu[sh+1]-(Gu[sh+1]-Zu[Gu[sh+1]])),wd.push(Gu[sh+2]-(Gu[sh+2]-Zu[Gu[sh+2]])));Jl=rd,Gu=wd}ph.drawCustom(this,this.geo,{vertexArr:Jl,faceArr:Gu,normalArr:[],clickable:E.clickable,hoverable:E.hoverable}),this.updateStyle(E);var Ud=new Y.Vector3(f.origin.x,f.origin.y,f.origin.z),eh=new Y.Vector3(f.size.x*f.unit.x,f.size.y*f.unit.y,f.size.z*f.unit.z),Sh=new Y.Vector3(0,0,0),Lh=Ud.clone(),Ah=Ud.clone().add(eh);for(let sh=0;sh<Jl.length;sh++)Sh.add(Jl[sh]),Lh.max(Jl[sh]),Ah.min(Jl[sh]);Sh.divideScalar(Jl.length);var yh=Sh.distanceTo(Ah),Nh=Sh.distanceTo(Lh);this.boundingSphere.center=Sh,this.boundingSphere.radius=Math.max(yh,Nh),typeof W=="function"&&W()}addVolumetricData(f,E,W){f=new Eh.VolumeData(f,E),this.addIsosurface(f,W)}finalize(){return ph.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(f){if(this.renderedShapeObj&&(f.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){ph.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),this.color!==void 0&&ph.updateColor(this.geo,this.color),this.shapeObj=new V.Object3D;var E=null;E=this.side==V.DoubleSide?new V.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:V.Coloring.VertexColors}):new V.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:V.Coloring.VertexColors});var W=new V.Mesh(this.geo,E);if(this.shapeObj.add(W),this.linegeo&&this.linegeo.vertices>0){var Q=new V.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),yl=new V.Line(this.linegeo,Q,V.LineStyle.LinePieces);this.shapeObj.add(yl)}this.renderedShapeObj=this.shapeObj.clone(),f.add(this.renderedShapeObj)}}removegl(f){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),f.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}function jp(dd){if(dd.vertexArr.length<64e3)return[dd];var f=[{vertexArr:[],normalArr:[],faceArr:[]}];dd.colorArr&&(f.colorArr=[]);var E=[],W=[],Q=0,yl=dd.faceArr;for(let Cl=0,Al=yl.length;Cl<Al;Cl+=3){let vl=f[Q];for(let Fl=0;Fl<3;Fl++){var Ln=yl[Cl+Fl];E[Ln]!==Q&&(E[Ln]=Q,W[Ln]=vl.vertexArr.length,vl.vertexArr.push(dd.vertexArr[Ln]),dd.normalArr&&dd.normalArr[Ln]&&vl.normalArr.push(dd.normalArr[Ln]),dd.colorArr&&dd.colorArr[Ln]&&vl.colorArr.push(dd.colorArr[Ln])),vl.faceArr.push(W[Ln])}vl.vertexArr.length>=64e3&&(f.push({vertexArr:[],normalArr:[],faceArr:[]}),dd.colorArr&&(f.colorArr=[]),Q++)}return f}ph.ISDONE=2,ph.drawCustom=function(dd,f,E){var W=E,Q=W.vertexArr,yl=W.faceArr;Q.length!==0&&yl.length!==0||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var Ln=E.color;Ln===void 0&&(Ln=dd.color),Ln=ie.CC.color(Ln);for(var Cl=jp(W),Al=0,vl=Cl.length;Al<vl;Al++)ph.addCustomGeo(dd,f,Cl[Al],Cl[Al].colorArr?Cl[Al].colorArr:Ln,E.clickable)};let _p=0;function Gp(dd,f,E){var W=E;return dd!==void 0&&(dd instanceof ie.Color?W=dd.scaled():(W=ie.CC.color(dd)).scaled!==void 0&&(W=W.scaled())),f!==void 0&&(W.a=parseFloat(f)),W}class of{constructor(f,E){this.id=_p++,this.stylespec=E||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new V.Sprite,this.text=f,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var f=this.stylespec,E=f.useScreen!==void 0&&f.useScreen,W=f.showBackground;W!=="0"&&W!=="false"||(W=!1),W===void 0&&(W=!0);var Q=f.font?f.font:"sans-serif",yl=parseInt(f.fontSize)?parseInt(f.fontSize):18,Ln=Gp(f.fontColor,f.fontOpacity,{r:255,g:255,b:255,a:1}),Cl=f.padding?f.padding:4,Al=f.borderThickness?f.borderThickness:0,vl=Gp(f.backgroundColor,f.backgroundOpacity,{r:0,g:0,b:0,a:1}),Fl=Gp(f.borderColor,f.borderOpacity,vl),Ol=f.position?f.position:{x:-10,y:1,z:1},mu=f.inFront===void 0||f.inFront;mu!=="false"&&mu!=="0"||(mu=!1);var Xl=f.alignment||V.SpriteAlignment.topLeft;typeof Xl=="string"&&Xl in V.SpriteAlignment&&(Xl=V.SpriteAlignment[Xl]);var Wl="";f.bold&&(Wl="bold "),this.context.font=Wl+yl+"px  "+Q;var hu=this.context.measureText(this.text).width;W||(Al=0);var Jl=hu+2.5*Al+2*Cl,Gu=1.25*yl+2*Al+2*Cl;if(f.backgroundImage){var Zu=f.backgroundImage,rd=f.backgroundWidth?f.backgroundWidth:Zu.width,wd=f.backgroundHeight?f.backgroundHeight:Zu.height;rd>Jl&&(Jl=rd),wd>Gu&&(Gu=wd)}if(this.canvas.width=Jl,this.canvas.height=Gu,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),Wl="",f.bold&&(Wl="bold "),this.context.font=Wl+yl+"px  "+Q,this.context.fillStyle="rgba("+vl.r+","+vl.g+","+vl.b+","+vl.a+")",this.context.strokeStyle="rgba("+Fl.r+","+Fl.g+","+Fl.b+","+Fl.a+")",f.backgroundGradient){let jd=this.context.createLinearGradient(0,Gu/2,Jl,Gu/2),Qd=zn.Gradient.getGradient(f.backgroundGradient),ih=Qd.range(),Hl=-1,Iu=1;ih&&(Hl=ih[0],Iu=ih[1]);let Fd=Iu-Hl;for(let Ud=0;Ud<1.01;Ud+=.1){let eh=Gp(Qd.valueToHex(Hl+Fd*Ud)),Sh="rgba("+eh.r+","+eh.g+","+eh.b+","+eh.a+")";jd.addColorStop(Ud,Sh)}this.context.fillStyle=jd}this.context.lineWidth=Al,W&&(function(jd,Qd,ih,Hl,Iu,Fd,Ud){jd.beginPath(),jd.moveTo(Qd+Fd,ih),jd.lineTo(Qd+Hl-Fd,ih),jd.quadraticCurveTo(Qd+Hl,ih,Qd+Hl,ih+Fd),jd.lineTo(Qd+Hl,ih+Iu-Fd),jd.quadraticCurveTo(Qd+Hl,ih+Iu,Qd+Hl-Fd,ih+Iu),jd.lineTo(Qd+Fd,ih+Iu),jd.quadraticCurveTo(Qd,ih+Iu,Qd,ih+Iu-Fd),jd.lineTo(Qd,ih+Fd),jd.quadraticCurveTo(Qd,ih,Qd+Fd,ih),jd.closePath(),jd.fill(),Ud&&jd.stroke()})(this.context,Al,Al,Jl-2*Al,Gu-2*Al,6,Al>0),f.backgroundImage&&this.context.drawImage(Zu,0,0,Jl,Gu),this.context.fillStyle="rgba("+Ln.r+","+Ln.g+","+Ln.b+","+Ln.a+")",this.context.fillText(this.text,Al+Cl,yl+Al+Cl,hu);var gd=new V.Texture(this.canvas);gd.needsUpdate=!0,this.sprite.material=new V.SpriteMaterial({map:gd,useScreenCoordinates:E,alignment:Xl,depthTest:!mu,screenOffset:f.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(Ol.x,Ol.y,Ol.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}class Bp{static interpolateArray(f,E){function W(Ol,mu,Xl){return Ol+(mu-Ol)*Xl}var Q=[],yl=(f.length-1)/(E-1);Q[0]=f[0];for(var Ln=1;Ln<E-1;Ln++){var Cl=Ln*yl,Al=Math.floor(Cl),vl=Math.ceil(Cl),Fl=Cl-Al;Q[Ln]=W(f[Al],f[vl],Fl)}return Q[E-1]=f[f.length-1],Q}constructor(f,E,W){this.hidden=!1,this.boundingSphere=new oe.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,E=E||{};var Q,yl,Ln,Cl,Al,vl,Fl,Ol,mu,Xl,Wl=Object.assign([],E.transferfn);this.subsamples=E.subsamples||5,Wl.forEach(function(Jl){Jl.value=parseFloat(Jl.value)}),Wl.sort(function(Jl,Gu){return Jl.value-Gu.value}),this.min=Wl[0].value,Wl.length==0&&Wl.push(Wl[0]),this.max=Wl[Wl.length-1].value;for(let Jl=0;Jl<Wl.length-1;Jl++)if(Ln=ie.CC.color(Wl[Jl].color),Cl=ie.CC.color(Wl[Jl+1].color),mu=Wl[Jl].opacity,Xl=Wl[Jl+1].opacity,(Q=Math.floor(256*(Wl[Jl].value-this.min)/(this.max-this.min)))!=(yl=Math.floor(256*(Wl[Jl+1].value-this.min)/(this.max-this.min)))){Al=Bp.interpolateArray([255*Ln.r,255*Cl.r],yl-Q),vl=Bp.interpolateArray([255*Ln.g,255*Cl.g],yl-Q),Fl=Bp.interpolateArray([255*Ln.b,255*Cl.b],yl-Q),Ol=Bp.interpolateArray([255*mu,255*Xl],yl-Q);for(let Gu=0;Gu<Al.length;Gu++)this.transferfunctionbuffer.push(Al[Gu]),this.transferfunctionbuffer.push(vl[Gu]),this.transferfunctionbuffer.push(Fl[Gu]),this.transferfunctionbuffer.push(Ol[Gu])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),f.matrix){let Jl=new Y.Vector3(0,0,0),Gu=new Y.Vector3(f.size.x,f.size.y,f.size.z),Zu=new Y.Vector3(1,1,1);Jl.applyMatrix4(f.matrix),Gu.applyMatrix4(f.matrix),Zu.applyMatrix4(f.matrix).sub(Jl),this.extent=[[Jl.x,Jl.y,Jl.z],[Gu.x,Gu.y,Gu.z]];for(let jd=1;jd<7;jd++)Gu.x=1&jd?f.size.x:0,Gu.y=2&jd?f.size.y:0,Gu.z=4&jd?f.size.z:0,Gu.applyMatrix4(f.matrix),this.extent[0][0]=Math.min(this.extent[0][0],Gu.x),this.extent[0][1]=Math.min(this.extent[0][1],Gu.y),this.extent[0][2]=Math.min(this.extent[0][2],Gu.z),this.extent[1][0]=Math.max(this.extent[1][0],Gu.x),this.extent[1][1]=Math.max(this.extent[1][1],Gu.y),this.extent[1][2]=Math.max(this.extent[1][2],Gu.z);let rd=Gu.x-Jl.x,wd=Gu.y-Jl.y,gd=Gu.z-Jl.z;this.maxdepth=Math.sqrt(rd*rd+wd*wd+gd*gd),this.minunit=Math.min(Math.min(Zu.x,Zu.y),Zu.z),this.texmatrix=new Y.Matrix4().identity().scale({x:f.size.x,y:f.size.y,z:f.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(f.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new Y.Matrix4().identity();let Jl=f.unit.x*f.size.x,Gu=f.unit.y*f.size.y,Zu=f.unit.z*f.size.z;this.texmatrix.makeTranslation(-f.origin.x/Jl,-f.origin.y/Gu,-f.origin.z/Zu),this.texmatrix.scale({x:1/Jl,y:1/Gu,z:1/Zu}),this.minunit=Math.min(Math.min(f.unit.x,f.unit.y),f.unit.z),this.extent=[[f.origin.x,f.origin.y,f.origin.z],[f.origin.x+Jl,f.origin.y+Gu,f.origin.z+Zu]],this.maxdepth=Math.sqrt(Jl*Jl+Gu*Gu+Zu*Zu)}var hu=new ph({});if(hu.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=hu.finalize(),this.boundingSphere.center=new Y.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,E.coords===void 0&&E.selection!==void 0&&(W?E.coords=W.selectedAtoms(E.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),E.coords!==void 0&&E.seldist!==void 0){let Jl=new Uint8Array(f.data.length),Gu=E.seldist,Zu=Gu*Gu;for(let rd=0,wd=E.coords.length;rd<wd;rd++){let gd=E.coords[rd],jd=gd.x-Gu,Qd=gd.y-Gu,ih=gd.z-Gu,Hl=gd.x+Gu,Iu=gd.y+Gu,Fd=gd.z+Gu;if(f.getIndex(jd,Qd,ih)>=0||f.getIndex(Hl,Iu,Fd)>=0)for(let Ud=jd;Ud<Hl;Ud+=this.minunit)for(let eh=Qd;eh<Iu;eh+=this.minunit)for(let Sh=ih;Sh<Fd;Sh+=this.minunit){let Lh=f.getIndex(Ud,eh,Sh);Lh>=0&&!Jl[Lh]&&(Ud-gd.x)*(Ud-gd.x)+(eh-gd.y)*(eh-gd.y)+(Sh-gd.z)*(Sh-gd.z)<Zu&&(Jl[Lh]=1)}}for(let rd=0,wd=f.data.length;rd<wd;rd++)Jl[rd]==0&&(f.data[rd]=1/0)}this.data=f}globj(f){if(this.renderedShapeObj&&(f.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new V.Object3D;var E,W=new V.Texture(this.data,!0),Q=new V.Texture(this.transferfunctionbuffer,!1);W.needsUpdate=!0,Q.needsUpdate=!0,Q.flipY=!1,E=new V.VolumetricMaterial({transferfn:Q,transfermin:this.min,transfermax:this.max,map:W,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var yl=new V.Mesh(this.geo,E);this.shapeObj.add(yl),this.renderedShapeObj=this.shapeObj.clone(),f.add(this.renderedShapeObj)}}removegl(f){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),f.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}const rf=16;class Rh extends Array{constructor(f){super(...f)}getSymmetries(){if(this.length==0)return[];let f=this[0];return f.symmetries===void 0&&this.setSymmetries([new Y.Matrix4]),f.symmetries}setSymmetries(f){f===void 0&&(f=[new Y.Matrix4]);for(let E of this)E.symmetries=f,E.finished=!1}}class xf{getWidth(){let f=this.container,E=f.offsetWidth;if(E==0&&f.style.display==="none"){let W=f.style.position,Q=f.style.visibility;f.style.display="block",f.style.visibility="hidden",f.style.position="absolute",E=f.offsetWidth,f.style.display="none",f.style.visibility=Q,f.style.position=W}return E}getHeight(){let f=this.container,E=f.offsetHeight;if(E==0&&f.style.display==="none"){let W=f.style.position,Q=f.style.visibility;f.style.display="block",f.style.visibility="hidden",f.style.position="absolute",E=f.offsetHeight,f.style.display="none",f.style.visibility=Q,f.style.position=W}return E}setupRenderer(){let f=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new V.Renderer(f),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new V.Scene,this.scene.fog=new V.Fog(this.bgColor,100,200),this.modelGroup=new V.Object3D,this.rotationGroup=new V.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new Y.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var f=new V.Light(16777215);f.position=new Y.Vector3(.2,.2,1).normalize(),f.intensity=1,this.scene.add(f)}_handleLostContext(f){const E=function(W){const Q=W.getBoundingClientRect();return!(Q.right<0||Q.bottom<0||Q.top>(window.innerHeight||document.documentElement.clientHeight)||Q.left>(window.innerWidth||document.documentElement.clientWidth))};if(E(this.container)){let W=0;for(let Q of document.getElementsByTagName("canvas"))if(E(Q)&&Q._3dmol_viewer!=null&&(Q._3dmol_viewer.resize(),W+=1,W>=rf))break}}initContainer(f){this.container=f,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var f=0;for(let W in this.surfaces)if(this.surfaces.hasOwnProperty(W)){var E=parseInt(W);isNaN(E)||E>f&&(f=E)}return f+1}setSlabAndFog(){let f=this.camera.position.z-this.rotationGroup.position.z;f<1&&(f=1),this.camera.near=f+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=f+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=f*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(f){if(this.renderer.setViewport(),this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!f&&this.linkedViewers.length>0))for(var E=this._viewer.getView(),W=0;W<this.linkedViewers.length;W++)this.linkedViewers[W].setView(E,!0)}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let f=0,E=this.models.length;f<E;f++){let W=this.models[f];if(W){let Q=W.selectedAtoms({clickable:!0}),yl=W.selectedAtoms({hoverable:!0}),Ln=W.selectedAtoms({contextMenuEnabled:!0});for(let Cl=0;Cl<yl.length;Cl++)this.hoverables.push(yl[Cl]);for(let Cl=0;Cl<Q.length;Cl++)this.clickables.push(Q[Cl]);for(let Cl=0;Cl<Ln.length;Cl++)this.contextMenuEnabledObjects.push(Ln[Cl])}}for(let f=0,E=this.shapes.length;f<E;f++){let W=this.shapes[f];W&&W.clickable&&this.clickables.push(W),W&&W.hoverable&&this.hoverables.push(W),W&&W.contextMenuEnabled&&this.contextMenuEnabledObjects.push(W)}}handleClickSelection(f,E,W){let Q=this.targetedObjects(f,E,this.clickables);if(Q.length){var yl=Q[0].clickable;yl.callback!==void 0&&(typeof yl.callback!="function"&&(yl.callback=(0,Et.makeFunction)(yl.callback)),typeof yl.callback=="function")&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(yl)&&this.userContextMenuHandler||yl.callback(yl,this._viewer,W,this.container,Q))}}canvasOffset(){let f=this.glDOM,E=f.getBoundingClientRect(),W=f.ownerDocument,Q=W.documentElement,yl=W.defaultView;return{top:E.top+yl.pageYOffset-Q.clientTop,left:E.left+yl.pageXOffset-Q.clientLeft}}setHover(f,E,W){this.current_hover!=f&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,Et.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,E,this.container,W)),this.current_hover=f,f&&f.hover_callback!==void 0&&(typeof f.hover_callback!="function"&&(f.hover_callback=(0,Et.makeFunction)(f.hover_callback)),typeof f.hover_callback=="function"&&f.hover_callback(f,this._viewer,E,this.container,W)))}handleHoverSelection(f,E,W){if(this.hoverables.length==0)return;let Q=this.targetedObjects(f,E,this.hoverables);if(Q.length){var yl=Q[0].clickable;this.setHover(yl,W,Q),this.current_hover=yl}else this.setHover(null)}handleHoverContinue(f,E){let W=this.targetedObjects(f,E,this.hoverables);W.length!=0&&W[0]!==void 0||this.setHover(null),W[0]!==void 0&&W[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(f,{allowTolerance:E=f.targetTouches,tolerance:W=5}={}){const Q=this.getX(f),yl=this.getY(f);if(E){const Ln=Math.abs(Q-this.mouseStartX),Cl=Math.abs(yl-this.mouseStartY);return Ln<=W&&Cl<=W}return Q===this.mouseStartX&&yl===this.mouseStartY}calcTouchDistance(f){var E=f.targetTouches[0].pageX-f.targetTouches[1].pageX,W=f.targetTouches[0].pageY-f.targetTouches[1].pageY;return Math.hypot(E,W)}getX(f){var E=f.pageX;return E==null&&(E=f.pageX),f.targetTouches&&f.targetTouches[0]?E=f.targetTouches[0].pageX:f.changedTouches&&f.changedTouches[0]&&(E=f.changedTouches[0].pageX),E}getY(f){var E=f.pageY;return E==null&&(E=f.pageY),f.targetTouches&&f.targetTouches[0]?E=f.targetTouches[0].pageY:f.changedTouches&&f.changedTouches[0]&&(E=f.changedTouches[0].pageY),E}isInViewer(f,E){if(this.viewers!=null){var W=this.WIDTH/this.cols,Q=this.HEIGHT/this.rows,yl=this.canvasOffset(),Ln=f-yl.left,Cl=E-yl.top,Al=this.rows-Math.floor(Cl/Q)-1,vl=Math.floor(Ln/W);if(Al!=this.row||vl!=this.col)return!1}return!0}adjustZoomToLimits(f){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let E=this.CAMERA_Z-this.config.lowerZoomLimit;f>E&&(f=E)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let E=this.CAMERA_Z-this.config.upperZoomLimit;f<E&&(f=E)}return f>this.CAMERA_Z-1&&(f=this.CAMERA_Z-1),f}static slerp(f,E,W){if(W==1)return E.clone();if(W==0)return f.clone();let Q=f.x*E.x+f.y*E.y+f.z*E.z+f.w*E.w;if(Q>.9995){let Fl=new Y.Quaternion(f.x+W*(E.x-f.x),f.y+W*(E.y-f.y),f.z+W*(E.z-f.z),f.w+W*(E.w-f.w));return Fl.normalize(),Fl}Q<0&&(E=E.clone().multiplyScalar(-1),Q=-Q),Q>1?Q=1:Q<-1&&(Q=-1);var yl=Math.acos(Q)*W,Ln=E.clone();Ln.sub(f.clone().multiplyScalar(Q)),Ln.normalize();var Cl=Math.cos(yl),Al=Math.sin(yl),vl=new Y.Quaternion(f.x*Cl+Ln.x*Al,f.y*Cl+Ln.y*Al,f.z*Cl+Ln.z*Al,f.w*Cl+Ln.w*Al);return vl.normalize(),vl}constructor(f,E={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new Y.Quaternion(0,0,0,1),this.dq=new Y.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=E,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=ie.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",this.config.backgroundColor!==void 0&&(this.bgColor=ie.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,this.config.camerax!==void 0&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=f,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new V.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new Y.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new Y.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new V.Raycaster(new Y.Vector3(0,0,0),new Y.Vector3(0,0,0)),this.projector=new V.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=ie.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),window.ResizeObserver!==void 0&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),window.IntersectionObserver!==void 0){let W=(Q,yl)=>{Q.forEach(Ln=>{Ln.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(W),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(W){console.log("error with glviewer callback: "+W)}}targetedObjects(f,E,W){var Q={x:f,y:E,z:-1};return Array.isArray(W)||(W=this.selectedAtoms(W)),W.length==0?[]:(this.raycaster.setFromCamera(Q,this.camera),this.raycaster.intersectObjects(this.modelGroup,W))}modelToScreen(f){let E=!1;Array.isArray(f)||(f=[f],E=!0);let W=this.renderer.getXRatio(),Q=this.renderer.getYRatio(),yl=this.col,Ln=this.row,Cl=yl*(this.WIDTH/W),Al=(Q-Ln-1)*(this.HEIGHT/Q),vl=[],Fl=this.canvasOffset();return f.forEach(Ol=>{let mu=new Y.Vector3(Ol.x,Ol.y,Ol.z);mu.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(mu,this.camera);let Xl=this.WIDTH/W*(mu.x+1)/2+Fl.left+Cl,Wl=-this.HEIGHT/Q*(mu.y-1)/2+Fl.top+Al;vl.push({x:Xl,y:Wl})}),E&&(vl=vl[0]),vl}screenOffsetToModel(f,E,W){var Q=f/this.WIDTH,yl=E/this.HEIGHT,Ln=W===void 0?this.rotationGroup.position.z:W,Cl=this.rotationGroup.quaternion,Al=new Y.Vector3(0,0,Ln);return this.projector.projectVector(Al,this.camera),Al.x+=2*Q,Al.y-=2*yl,this.projector.unprojectVector(Al,this.camera),Al.z=0,Al.applyQuaternion(Cl),Al}screenToModelDistance(f,E){let W=this.canvasOffset(),Q=new Y.Vector3(E.x,E.y,E.z);Q.applyMatrix4(this.modelGroup.matrixWorld);let yl=Q.clone();this.projector.projectVector(Q,this.camera);let Ln=new Y.Vector3(2*(f.x-W.left)/this.WIDTH-1,2*(f.y-W.top)/-this.HEIGHT+1,Q.z);return this.projector.unprojectVector(Ln,this.camera),Ln.distanceTo(yl)}setViewChangeCallback(f){typeof f!="function"&&f!=null||(this.viewChangeCallback=f)}setStateChangeCallback(f){typeof f!="function"&&f!=null||(this.stateChangeCallback=f)}getConfig(){return this.config}setConfig(f){this.config=f,f.ambientOcclusion&&this.renderer.enableAmbientOcclusion(f.ambientOcclusion)}getInternalState(){var f={models:[],surfaces:[],shapes:[],labels:[]};for(let E=0;E<this.models.length;E++)this.models[E]&&(f.models[E]=this.models[E].getInternalState());return f}setInternalState(f){this.clear();var E=f.models;for(let W=0;W<E.length;W++)E[W]&&(this.models[W]=new lg(W,void 0,this),this.models[W].setInternalState(E[W]));this.render()}setZoomLimits(f,E){f!==void 0&&(this.config.lowerZoomLimit=f),E&&(this.config.upperZoomLimit=E),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(f){f.fov!==void 0&&(this.fov=f.fov,this.camera.fov=this.fov),f.z!==void 0&&(this.CAMERA_Z=f.z,this.camera.z=this.CAMERA_Z),f.orthographic!==void 0&&(this.camera.ortho=f.orthographic),this.setSlabAndFog()}_handleMouseDown(f){if(f.preventDefault(),!this.scene)return;var E=this.getX(f),W=this.getY(f);if(E===void 0)return;this.isDragging=!0,this.mouseButton=f.which,this.mouseStartX=E,this.mouseStartY=W,this.touchHold=!0,this.touchDistanceStart=0,f.targetTouches&&f.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(f)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let Q=this;f.targetTouches&&f.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(Q.touchHold==1){Q.glDOM=Q.renderer.domElement;const yl=f.targetTouches[0],Ln=new PointerEvent("contextmenu",Object.assign(Object.assign({},f),{pageX:yl.pageX,pageY:yl.pageY,screenX:yl.screenX,screenY:yl.screenY,clientX:yl.clientX,clientY:yl.clientY}));Q.glDOM.dispatchEvent(Ln)}},this.longTouchDuration))}_handleMouseUp(f){if(this.touchHold=!1,this.isDragging&&this.scene){var E=this.getX(f),W=this.getY(f);if(this.closeEnoughForClick(f)&&this.isInViewer(E,W)){let Q=this.mouseXY(E,W);this.handleClickSelection(Q.x,Q.y,f)}}this.isDragging=!1}_handleMouseScroll(f){if(f.preventDefault(),this.scene){var E=this.getX(f),W=this.getY(f);if(E!==void 0&&(this.control_all||this.isInViewer(E,W))){var Q=.85*(this.CAMERA_Z-this.rotationGroup.position.z),yl=1;if(f.ctrlKey&&(yl=-1),f.detail)this.rotationGroup.position.z+=yl*Q*f.detail/10;else if(f.wheelDelta){let Ln=600*f.wheelDelta/(f.wheelDelta+600);this.rotationGroup.position.z-=yl*Q*Ln/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(f){let E=this;return f=f||1,new Promise(function(W){let Q=0,yl=E.viewChangeCallback,Ln=[],Cl=[],Al=Date.now();E.viewChangeCallback=function(){Cl.push(Date.now()-Al),Al=Date.now(),Ln.push(new Promise(vl=>{E.getCanvas().toBlob(function(Fl){Fl.arrayBuffer().then(vl)},"image/png")})),Q+=1,Q==f&&(E.viewChangeCallback=yl,Promise.all(Ln).then(vl=>{let Fl=[];for(let Jl=0;Jl<vl.length;Jl++){let Gu=(0,$.decode)(vl[Jl]);Fl.push((0,$.toRGBA8)(Gu)[0])}let Ol=E.getCanvas().width,mu=E.getCanvas().height,Xl=(0,$.encode)(Fl,Ol,mu,0,Cl),Wl=new Blob([Xl],{type:"image/png"}),hu=new FileReader;hu.onload=function(Jl){W(Jl.target.result)},hu.readAsDataURL(Wl)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(f){this.hoverDuration=f}mouseXY(f,E){let W=this.canvasOffset(),Q=this.renderer.getXRatio(),yl=this.renderer.getYRatio(),Ln=this.col,Cl=this.row,Al=Ln*(this.WIDTH/Q),vl=(yl-Cl-1)*(this.HEIGHT/yl);return{x:(f-W.left-Al)/(this.WIDTH/Q)*2-1,y:-(E-W.top-vl)/(this.HEIGHT/yl)*2+1}}_handleMouseMove(f){clearTimeout(this.hoverTimeout),f.preventDefault();let E=this.getX(f),W=this.getY(f);if(E===void 0)return;let Q=this.renderer.getXRatio(),yl=this.renderer.getYRatio(),Ln=this.mouseXY(E,W),Cl=this;this.current_hover!==null&&this.handleHoverContinue(Ln.x,Ln.y);var Al=0;if((this.control_all||this.isInViewer(E,W))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){Cl.handleHoverSelection(Ln.x,Ln.y,f)},this.hoverDuration)),this.isDragging)){f.targetTouches&&(f.targetTouches.length>1||f.targetTouches.length===1&&!this.closeEnoughForClick(f))&&clearTimeout(this.longTouchTimeout);var vl=(E-this.mouseStartX)/this.WIDTH,Fl=(W-this.mouseStartY)/this.HEIGHT;this.touchDistanceStart!=0&&f.targetTouches&&f.targetTouches.length==2?(Al=2,Fl=2*(this.calcTouchDistance(f)-this.touchDistanceStart)/(this.WIDTH+this.HEIGHT)):f.targetTouches&&f.targetTouches.length==3&&(Al=1),vl*=Q,Fl*=yl;var Ol,mu=Math.hypot(vl,Fl);if(Al==3||this.mouseButton==3&&f.ctrlKey)this.slabNear=this.cslabNear+100*vl,this.slabFar=this.cslabFar-100*Fl;else if(Al==2||this.mouseButton==3||f.shiftKey)(Ol=.85*(this.CAMERA_Z-this.rotationGroup.position.z))<80&&(Ol=80),this.rotationGroup.position.z=this.cz+Fl*Ol,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(Al==1||this.mouseButton==2||f.ctrlKey){var Xl=this.screenOffsetToModel(Q*(E-this.mouseStartX),yl*(W-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,Xl)}else if((Al===0||this.mouseButton==1)&&mu!==0){var Wl=Math.sin(mu*Math.PI)/mu;this.dq.x=Math.cos(mu*Math.PI),this.dq.y=0,this.dq.z=Wl*vl,this.dq.w=-Wl*Fl,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(f){if(f.preventDefault(),this.closeEnoughForClick(f)){var E=this.mouseStartX,W=this.mouseStartY,Q=this.canvasOffset();let Ln=this.mouseXY(E,W),Cl=Ln.x,Al=Ln.y,vl=this.targetedObjects(Cl,Al,this.contextMenuEnabledObjects);var yl=null;vl.length&&(yl=vl[0].clickable),Q=this.canvasOffset(),E=this.mouseStartX-Q.left,W=this.mouseStartY-Q.top,this.userContextMenuHandler&&(this.userContextMenuHandler(yl,E,W,vl,f),this.isDragging=!1)}}setContainer(f){let E=(0,Et.getElement)(f)||this.container;return this.initContainer(E),this}setBackgroundColor(f,E){(E===void 0||E<0||E>1)&&(E=1);var W=ie.CC.color(f);return this.scene.fog.color=W,this.bgColor=W.getHex(),this.renderer.setClearColorHex(W.getHex(),E),this.show(),this}setProjection(f){this.camera.ortho=f==="orthographic",this.setSlabAndFog()}setViewStyle(f){if((f=f||{}).style=f.style||"",f.style.includes("outline")?this.renderer.enableOutline(f):this.renderer.disableOutline(),f.style.includes("ambientOcclusion")){var E={};f.strength&&(E.strength=f.strength),f.radius&&(E.radius=f.radius),this.renderer.enableAmbientOcclusion(E)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(f){return this.WIDTH=f||this.WIDTH,this.updateSize(),this}setHeight(f){return this.HEIGHT=f||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let f=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let E=!1,W=this.container.querySelector("canvas");W&&W!=this.renderer.getCanvas()?this.config.canvas=W:(W.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,E=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),f=!0,E&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),f){let E=this.renderer.supportedExtensions();if(E.regen=!0,this.viewers)for(let W=0,Q=this.viewers.length;W<Q;W++)for(let yl=0,Ln=this.viewers[W].length;yl<Ln;yl++)this.viewers[W][yl].render(null,E);this._viewer.render(null,E)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(f){return f===void 0?this.models.length==0?null:this.models[this.models.length-1]:f instanceof lg?f:f in this.models?this.models[f]:this.models.length==0?null:this.models[this.models.length-1]}spin(f,E=1,W=!1){if(clearInterval(this.spinInterval),f===void 0&&(f="y"),typeof f=="boolean"){if(!f)return;f="y"}Array.isArray(f)&&(f={x:f[0],y:f[1],z:f[2]});var Q=this;this.spinInterval=setInterval(function(){!Q.getCanvas().isConnected&&Q.renderer.isLost()&&clearInterval(Q.spinInterval),(!W||Q.container.checkVisibility&&Q.container.checkVisibility())&&Q.rotate(1*E,f)},25)}animateMotion(f,E,W,Q,yl,Ln){var Cl=Math.ceil(f/20);Cl<1&&(Cl=1),this.incAnim();var Al={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(E){let Ol=new Array(Cl);for(let hu=0;hu<Cl;hu++){let Jl=(hu+1)/Cl,Gu={mpos:Al.mpos,rz:Al.rz,rot:Al.rot};Gu.mpos=W.clone().sub(Al.mpos).multiplyScalar(Jl).add(Al.mpos),Gu.rz=Al.rz+Jl*(Q-Al.rz),Gu.rot=xf.slerp(Al.rot,yl,Jl),Gu.cam=Ln.clone().sub(Al.cam).multiplyScalar(Jl).add(Al.cam),Ol[hu]=Gu}let mu=0,Xl=this,Wl=function(){var hu=Ol[mu];mu+=1,Xl.modelGroup.position=hu.mpos,Xl.rotationGroup.position.z=hu.rz,Xl.rotationGroup.quaternion=hu.rot,Xl.camera.lookAt(hu.cam),mu<Ol.length?setTimeout(Wl,20):Xl.decAnim(),Xl.show()};setTimeout(Wl,20)}else{var vl={};let Ol=1/Cl;if(W&&(vl.mpos=W.clone().sub(Al.mpos).multiplyScalar(Ol)),Q!==void 0&&Q!=null&&(vl.rz=Ol*(Q-Al.rz)),yl){var Fl=xf.slerp(Al.rot,yl,Ol);vl.rot=Al.rot.clone().inverse().multiply(Fl)}Ln&&(vl.cam=Ln.clone().sub(Al.cam).multiplyScalar(Ol));let mu=0,Xl=this,Wl=function(){mu+=1,vl.mpos&&Xl.modelGroup.position.add(vl.mpos),vl.rz&&(Xl.rotationGroup.position.z+=vl.rz),vl.rot&&Xl.rotationGroup.quaternion.multiply(vl.rot),vl.cam&&(Xl.lookingAt.add(vl.cam),Xl.camera.lookAt(Xl.lookingAt)),mu<Cl?setTimeout(Wl,20):Xl.decAnim(),Xl.show()};setTimeout(Wl,20)}}rotate(f,E="y",W=0,Q=!1){if(E=="x"?E={x:1,y:0,z:0}:E=="y"?E={x:0,y:1,z:0}:E=="z"&&(E={x:0,y:0,z:1}),E=="vx"?E={vx:1,vy:0,vz:0}:E=="vy"?E={vx:0,vy:1,vz:0}:E=="vz"&&(E={vx:0,vy:0,vz:1}),E.vx!==void 0){var yl=new Y.Vector3(E.vx,E.vy,E.vz);yl.applyQuaternion(this.rotationGroup.quaternion),E={x:yl.x,y:yl.y,z:yl.z}}var Ln=(function(Al){var vl,Fl,Ol,mu=Math.sin(Al/2),Xl=Math.cos(Al/2);return vl=E.x*mu,Fl=E.y*mu,Ol=E.z*mu,new Y.Quaternion(vl,Fl,Ol,Xl).normalize()})(Math.PI*f/180);if(W){var Cl=new Y.Quaternion().copy(this.rotationGroup.quaternion).multiply(Ln);this.animateMotion(W,Q,this.modelGroup.position,this.rotationGroup.position.z,Cl,this.lookingAt)}else this.rotationGroup.quaternion.multiply(Ln),this.show();return this}surfacesFinished(){for(var f in this.surfaces)if(!this.surfaces[f][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var f=this.modelGroup.position,E=this.rotationGroup.quaternion;return[f.x,f.y,f.z,this.rotationGroup.position.z,E.x,E.y,E.z,E.w]}setView(f,E){return f!==void 0&&(f instanceof Array||f.length!==8)&&this.modelGroup&&this.rotationGroup?(this.modelGroup.position.x=f[0],this.modelGroup.position.y=f[1],this.modelGroup.position.z=f[2],this.rotationGroup.position.z=f[3],this.rotationGroup.quaternion.x=f[4],this.rotationGroup.quaternion.y=f[5],this.rotationGroup.quaternion.z=f[6],this.rotationGroup.quaternion.w=f[7],f[8]!==void 0&&(this.rotationGroup.position.x=f[8],this.rotationGroup.position.y=f[9]),this.show(E),this):this}render(f,E){this.renderer.setViewport(),this.updateClickables();var W,Q,yl=this.getView();for(this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState()),E||(E=this.renderer.supportedExtensions()),W=0;W<this.models.length;W++)this.models[W]&&this.models[W].globj(this.modelGroup,E);for(W=0;W<this.shapes.length;W++)this.shapes[W]&&(this.shapes[W].frame===void 0||this.viewer_frame<0||this.shapes[W].frame<0||this.shapes[W].frame==this.viewer_frame?this.shapes[W].globj(this.modelGroup,E):this.shapes[W].removegl(this.modelGroup));for(W=0;W<this.labels.length;W++)E.regen&&(this.labels[W].dispose(),this.modelGroup.remove(this.labels[W].sprite),this.labels[W].setContext(),this.modelGroup.add(this.labels[W].sprite)),this.labels[W]&&this.labels[W].frame!==void 0&&this.labels[W].frame>=0&&(this.modelGroup.remove(this.labels[W].sprite),(this.viewer_frame<0||this.labels[W].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[W].sprite));for(W in this.surfaces)if(this.surfaces.hasOwnProperty(W)){var Ln=this.surfaces[W];for(Q=0;Q<Ln.length;Q++)if(Ln.hasOwnProperty(Q)){var Cl=Ln[Q].geo;if(!Ln[Q].finished||E.regen){Cl.verticesNeedUpdate=!0,Cl.elementsNeedUpdate=!0,Cl.normalsNeedUpdate=!0,Cl.colorsNeedUpdate=!0,Cl.buffersNeedUpdate=!0,Ln[Q].mat.needsUpdate=!0,Ln[Q].done&&(Ln[Q].finished=!0),Ln[Q].lastGL&&this.modelGroup.remove(Ln[Q].lastGL);var Al=null;if(Ln[Q].mat instanceof V.LineBasicMaterial?Al=new V.Line(Cl,Ln[Q].mat):("wireframe"in Ln.style&&Ln.style.wireframe&&Cl.setUpWireframe(),Al=new V.Mesh(Cl,Ln[Q].mat)),Ln[Q].mat.transparent&&Ln[Q].mat.opacity==0?Al.visible=!1:Al.visible=!0,Ln[Q].symmetries.length>1||Ln[Q].symmetries.length==1&&!Ln[Q].symmetries[0].isIdentity()){var vl,Fl=new V.Object3D;for(vl=0;vl<Ln[Q].symmetries.length;vl++){var Ol=Al.clone();Ol.matrix=Ln[Q].symmetries[vl],Ol.matrixAutoUpdate=!1,Fl.add(Ol)}Ln[Q].lastGL=Fl,this.modelGroup.add(Fl)}else Ln[Q].lastGL=Al,this.modelGroup.add(Al)}}}return this.setView(yl),typeof f=="function"&&f(this),this}getModelList(f){let E=[];if(f===void 0||f.model===void 0)for(let Q=0;Q<this.models.length;Q++)this.models[Q]&&E.push(this.models[Q]);else{let Q=f.model;Array.isArray(Q)||(Q=[Q]);for(let yl=0;yl<Q.length;yl++)if(typeof Q[yl]=="number"){var W=Q[yl];W<0&&(W+=this.models.length),E.push(this.models[W])}else E.push(Q[yl])}return E}getAtomsFromSel(f){var E=[];f===void 0&&(f={});var W=this.getModelList(f);for(let Q=0;Q<W.length;Q++)E=E.concat(W[Q].selectedAtoms(f));return E}atomIsSelected(f,E){E===void 0&&(E={});for(var W=this.getModelList(E),Q=0;Q<W.length;Q++)if(W[Q].atomIsSelected(f,E))return!0;return!1}selectedAtoms(f){return this.getAtomsFromSel(f)}getUniqueValues(f,E){E===void 0&&(E={});var W=this.getAtomsFromSel(E),Q={};for(var yl in W)W[yl].hasOwnProperty(f)&&(Q[W[yl][f]]=!0);return Object.keys(Q)}pdbData(f){for(var E=this.getAtomsFromSel(f),W="",Q=0,yl=E.length;Q<yl;++Q)W+=E[Q].pdbline+`
`;return W}zoom(f=2,E=0,W=!1){var Q=(this.CAMERA_Z-this.rotationGroup.position.z)/f,yl=this.CAMERA_Z-Q;return E>0?this.animateMotion(E,W,this.modelGroup.position,this.adjustZoomToLimits(yl),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(yl),this.show()),this}translate(f,E,W=0,Q=!1){var yl=f/this.WIDTH,Ln=E/this.HEIGHT,Cl=new Y.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(Cl,this.camera),Cl.x-=yl,Cl.y-=Ln,this.projector.unprojectVector(Cl,this.camera),Cl.z=0;var Al=this.lookingAt.clone().add(Cl);return W>0?this.animateMotion(W,Q,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,Al):(this.lookingAt=Al,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(f,E,W=0,Q=!1){var yl=this.screenOffsetToModel(f,E),Ln=this.modelGroup.position.clone().add(yl);return W>0?this.animateMotion(W,Q,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Ln,this.show()),this}fitSlab(f){f=f||{};var E=this.getAtomsFromSel(f),W=(0,Et.getExtent)(E),Q=W[1][0]-W[0][0],yl=W[1][1]-W[0][1],Ln=W[1][2]-W[0][2],Cl=Math.hypot(Q,yl,Ln);return Cl<5&&(Cl=5),this.slabNear=-Cl/1.9,this.slabFar=Cl/2,this}center(f={},E=0,W=!1){var Q,yl,Ln=this.getAtomsFromSel(f),Cl=(0,Et.getExtent)(Ln);(0,Et.isEmptyObject)(f)?(this.shapes.forEach(Gu=>{if(Gu&&Gu.boundingSphere&&Gu.boundingSphere.center){var Zu=Gu.boundingSphere.center,rd=Gu.boundingSphere.radius;rd>0?(Ln.push(new Y.Vector3(Zu.x+rd,Zu.y,Zu.z)),Ln.push(new Y.Vector3(Zu.x-rd,Zu.y,Zu.z)),Ln.push(new Y.Vector3(Zu.x,Zu.y+rd,Zu.z)),Ln.push(new Y.Vector3(Zu.x,Zu.y-rd,Zu.z)),Ln.push(new Y.Vector3(Zu.x,Zu.y,Zu.z+rd)),Ln.push(new Y.Vector3(Zu.x,Zu.y,Zu.z-rd))):Ln.push(Zu)}}),Cl=(0,Et.getExtent)(Ln),Q=Ln,yl=Cl):(Q=this.getAtomsFromSel({}),yl=(0,Et.getExtent)(Q));var Al=new Y.Vector3(Cl[2][0],Cl[2][1],Cl[2][2]),vl=yl[1][0]-yl[0][0],Fl=yl[1][1]-yl[0][1],Ol=yl[1][2]-yl[0][2],mu=Math.hypot(vl,Fl,Ol);mu<5&&(mu=5),this.slabNear=-mu/1.9,this.slabFar=mu/2,vl=Cl[1][0]-Cl[0][0],Fl=Cl[1][1]-Cl[0][1],Ol=Cl[1][2]-Cl[0][2],(mu=Math.hypot(vl,Fl,Ol))<5&&(mu=5);for(var Xl=25,Wl=0;Wl<Ln.length;Wl++)if(Ln[Wl]){var hu=Al.distanceToSquared(Ln[Wl]);hu>Xl&&(Xl=hu)}mu=2*Math.sqrt(Xl);var Jl=Al.clone().multiplyScalar(-1);return E>0?this.animateMotion(E,W,Jl,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Jl,this.show()),this}zoomTo(f={},E=0,W=!1){let Q=this.getAtomsFromSel(f),yl=(0,Et.getExtent)(Q),Ln=yl;if((0,Et.isEmptyObject)(f)){let Zu=Q&&Q.length;if(this.shapes.forEach(rd=>{if(rd&&rd.boundingSphere){if(rd.boundingSphere.box){let jd=rd.boundingSphere.box;Q.push(new Y.Vector3(jd.min.x,jd.min.y,jd.min.z)),Q.push(new Y.Vector3(jd.max.x,jd.max.y,jd.max.z))}else if(rd.boundingSphere.center){var wd=rd.boundingSphere.center,gd=rd.boundingSphere.radius;gd>0?(Q.push(new Y.Vector3(wd.x+gd,wd.y,wd.z)),Q.push(new Y.Vector3(wd.x-gd,wd.y,wd.z)),Q.push(new Y.Vector3(wd.x,wd.y+gd,wd.z)),Q.push(new Y.Vector3(wd.x,wd.y-gd,wd.z)),Q.push(new Y.Vector3(wd.x,wd.y,wd.z+gd)),Q.push(new Y.Vector3(wd.x,wd.y,wd.z-gd))):Q.push(wd)}}}),Ln=(0,Et.getExtent)(Q),!Zu)for(let rd=0;rd<3;rd++)yl[2][rd]=(Ln[0][rd]+Ln[1][rd])/2}else{let Zu=this.getAtomsFromSel({});Ln=(0,Et.getExtent)(Zu)}var Cl=new Y.Vector3(yl[2][0],yl[2][1],yl[2][2]),Al=Ln[1][0]-Ln[0][0],vl=Ln[1][1]-Ln[0][1],Fl=Ln[1][2]-Ln[0][2],Ol=Math.hypot(Al,vl,Fl);Ol<5&&(Ol=5),this.slabNear=-Ol/1.9,this.slabFar=Ol/2,Object.keys(f).length===0&&(this.slabNear=Math.min(2*-Ol,-50),this.slabFar=Math.max(2*Ol,50));var mu=this.config.minimumZoomToDistance||5;Al=yl[1][0]-yl[0][0],vl=yl[1][1]-yl[0][1],Fl=yl[1][2]-yl[0][2],(Ol=Math.hypot(Al,vl,Fl))<mu&&(Ol=mu);for(var Xl=mu*mu,Wl=0;Wl<Q.length;Wl++)if(Q[Wl]){var hu=Cl.distanceToSquared(Q[Wl]);hu>Xl&&(Xl=hu)}Ol=2*Math.sqrt(Xl);var Jl=Cl.clone().multiplyScalar(-1),Gu=-(.5*Ol/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return Gu=this.adjustZoomToLimits(Gu),E>0?this.animateMotion(E,W,Jl,Gu,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Jl,this.rotationGroup.position.z=Gu,this.show()),this}setSlab(f,E){this.slabNear=f,this.slabFar=E}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(f,E={},W,Q=!1){if(W){var yl=(0,Et.getExtent)(this.getAtomsFromSel(W));E.position={x:yl[2][0],y:yl[2][1],z:yl[2][2]}}var Ln=new of(f,E);return Ln.setContext(),this.modelGroup.add(Ln.sprite),this.labels.push(Ln),Q||this.show(),Ln}addResLabels(f,E,W=!1){let Q=this.labels.length;return this.applyToModels("addResLabels",f,E,W),this.show(),this.labels.slice(Q)}addPropertyLabels(f,E,W){return this.applyToModels("addPropertyLabels",f,E,W),this.show(),this}removeLabel(f){for(var E=0;E<this.labels.length;E++)if(this.labels[E]==f){this.labels.splice(E,1),f.dispose(),this.modelGroup.remove(f.sprite);break}return this.show(),this}removeAllLabels(){for(var f=0;f<this.labels.length;f++)this.labels[f]&&this.labels[f].sprite&&this.modelGroup.remove(this.labels[f].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var f=0;f<this.labels.length;f++)this.labels[f]&&this.labels[f].hide();return this.show(),this}showAllLabels(){for(var f=0;f<this.labels.length;f++)this.labels[f]&&this.labels[f].show();return this.show(),this}setLabelStyle(f,E){return this.modelGroup.remove(f.sprite),f.dispose(),f.stylespec=E,f.setContext(),this.modelGroup.add(f.sprite),this.show(),f}setLabelText(f,E){return this.modelGroup.remove(f.sprite),f.dispose(),f.text=E,f.setContext(),this.modelGroup.add(f.sprite),this.show(),f}addShape(f){var E=new ph(f=f||{});return E.shapePosition=this.shapes.length,this.shapes.push(E),E}removeShape(f){if(!f)return this;for(f.removegl(this.modelGroup),delete this.shapes[f.shapePosition];this.shapes.length>0&&this.shapes[this.shapes.length-1]===void 0;)this.shapes.pop();return this}removeAllShapes(){for(var f=0;f<this.shapes.length;f++){var E=this.shapes[f];E&&E.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(f){if(f.hasOwnProperty("x")&&f.hasOwnProperty("y")&&f.hasOwnProperty("z"))return f;var E=this.getAtomsFromSel(f);if(E.length==0)return{x:0,y:0,z:0};var W=(0,Et.getExtent)(E);return{x:W[0][0]+(W[1][0]-W[0][0])/2,y:W[0][1]+(W[1][1]-W[0][1])/2,z:W[0][2]+(W[1][2]-W[0][2])/2}}addSphere(f){(f=f||{}).center=this.getSelectionCenter(f.center);var E=new ph(f);return E.shapePosition=this.shapes.length,E.addSphere(f),this.shapes.push(E),E.finalize(),E}addBox(f={}){f.corner!=null&&(f.corner=this.getSelectionCenter(f.corner)),f.center!=null&&(f.center=this.getSelectionCenter(f.center));var E=new ph(f);return E.shapePosition=this.shapes.length,E.addBox(f),this.shapes.push(E),E.finalize(),E}addArrow(f={}){f.start=this.getSelectionCenter(f.start),f.end=this.getSelectionCenter(f.end);var E=new ph(f);return E.shapePosition=this.shapes.length,E.addArrow(f),this.shapes.push(E),E.finalize(),E}addCylinder(f={}){f.start=this.getSelectionCenter(f.start),f.end=this.getSelectionCenter(f.end);var E=new ph(f);return E.shapePosition=this.shapes.length,f.dashed?E.addDashedCylinder(f):E.addCylinder(f),this.shapes.push(E),E.finalize(),E}addCurve(f={}){var E=new ph(f);return E.shapePosition=this.shapes.length,E.addCurve(f),this.shapes.push(E),E.finalize(),E}addLine(f={}){f.start=this.getSelectionCenter(f.start),f.end=this.getSelectionCenter(f.end),f.wireframe=!0;var E=new ph(f);return E.shapePosition=this.shapes.length,f.dashed?E=this.addLineDashed(f,E):E.addLine(f),this.shapes.push(E),E.finalize(),E}addUnitCell(f,E){f=this.getModel(f),(E=E||{alabel:"a",blabel:"b",clabel:"c"}).box=E.box||{},E.astyle=E.astyle||{color:"red",radius:.1,midpos:-1},E.bstyle=E.bstyle||{color:"green",radius:.1,midpos:-1},E.cstyle=E.cstyle||{color:"blue",radius:.1,midpos:-1},E.alabelstyle=E.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},E.blabelstyle=E.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},E.clabelstyle=E.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},f.unitCellObjects&&this.removeUnitCell(f),f.unitCellObjects={shapes:[],labels:[]};var W=f.getCrystData(),Q=null;if(W){if(W.matrix)Q=W.matrix;else{var yl,Ln,Cl,Al=W.a,vl=W.b,Fl=W.c,Ol=W.alpha,mu=W.beta,Xl=W.gamma;Ol=Ol*Math.PI/180,mu=mu*Math.PI/180,Xl=Xl*Math.PI/180,yl=Math.cos(mu),Ln=(Math.cos(Ol)-Math.cos(mu)*Math.cos(Xl))/Math.sin(Xl),Cl=Math.sqrt(Math.max(0,1-yl*yl-Ln*Ln)),Q=new Y.Matrix3(Al,vl*Math.cos(Xl),Fl*yl,0,vl*Math.sin(Xl),Fl*Ln,0,0,Fl*Cl)}var Wl=[new Y.Vector3(0,0,0),new Y.Vector3(1,0,0),new Y.Vector3(0,1,0),new Y.Vector3(0,0,1),new Y.Vector3(1,1,0),new Y.Vector3(0,1,1),new Y.Vector3(1,0,1),new Y.Vector3(1,1,1)];if(W.matrix4)for(let Jl=0;Jl<Wl.length;Jl++)W.size&&Wl[Jl].multiplyVectors(Wl[Jl],W.size),Wl[Jl]=Wl[Jl].applyMatrix4(W.matrix4);else for(let Jl=0;Jl<Wl.length;Jl++)Wl[Jl]=Wl[Jl].applyMatrix3(Q);if(E.box&&!E.box.hidden){E.box.wireframe=!0;var hu=new ph(E.box);hu.shapePosition=this.shapes.length,hu.addLine({start:Wl[0],end:Wl[1]}),hu.addLine({start:Wl[0],end:Wl[2]}),hu.addLine({start:Wl[1],end:Wl[4]}),hu.addLine({start:Wl[2],end:Wl[4]}),hu.addLine({start:Wl[0],end:Wl[3]}),hu.addLine({start:Wl[3],end:Wl[5]}),hu.addLine({start:Wl[2],end:Wl[5]}),hu.addLine({start:Wl[1],end:Wl[6]}),hu.addLine({start:Wl[4],end:Wl[7]}),hu.addLine({start:Wl[6],end:Wl[7]}),hu.addLine({start:Wl[3],end:Wl[6]}),hu.addLine({start:Wl[5],end:Wl[7]}),this.shapes.push(hu),f.unitCellObjects.shapes.push(hu),hu.finalize()}if(!E.astyle.hidden){E.astyle.start=Wl[0],E.astyle.end=Wl[1];let Jl=this.addArrow(E.astyle);f.unitCellObjects.shapes.push(Jl)}if(!E.bstyle.hidden){E.bstyle.start=Wl[0],E.bstyle.end=Wl[2];let Jl=this.addArrow(E.bstyle);f.unitCellObjects.shapes.push(Jl)}if(!E.cstyle.hidden){E.cstyle.start=Wl[0],E.cstyle.end=Wl[3];let Jl=this.addArrow(E.cstyle);f.unitCellObjects.shapes.push(Jl)}if(E.alabel){E.alabelstyle.position=Wl[1];let Jl=this.addLabel(E.alabel,E.alabelstyle);f.unitCellObjects.labels.push(Jl)}if(E.blabel){E.blabelstyle.position=Wl[2];let Jl=this.addLabel(E.blabel,E.blabelstyle);f.unitCellObjects.labels.push(Jl)}if(E.clabel){E.clabelstyle.position=Wl[3];let Jl=this.addLabel(E.clabel,E.clabelstyle);f.unitCellObjects.labels.push(Jl)}}}removeUnitCell(f){if((f=this.getModel(f)).unitCellObjects){let E=this;f.unitCellObjects.shapes.forEach(function(W){E.removeShape(W)}),f.unitCellObjects.labels.forEach(function(W){E.removeLabel(W)})}delete f.unitCellObjects}replicateUnitCell(f=3,E=f,W=E,Q,yl,Ln){let Cl=(Q=this.getModel(Q)).getCrystData();if(Cl){const Al=Q.selectedAtoms({}),vl=Cl.matrix;let Fl=function(mu){return mu%2==0?-mu/2:Math.ceil(mu/2)};f<=1&&E<=1&&W<=1&&(Ln=!0,f=E=W=3);let Ol=function(mu,Xl,Wl){return!1};if(Ln){const mu=new Y.Matrix3().getInverse3(vl);Ol=function(Xl,Wl,hu){let Jl=new Y.Vector3(Xl,Wl,hu).applyMatrix3(mu);return!(Jl.x>-1e-4&&Jl.x<1.0001&&Jl.y>-1e-4&&Jl.y<1.0001&&Jl.z>-1e-4&&Jl.z<1.0001)}}for(let mu=0;mu<f;mu++)for(let Xl=0;Xl<E;Xl++)for(let Wl=0;Wl<W;Wl++){if(mu==0&&Xl==0&&Wl==0)continue;let hu=new Y.Vector3(Fl(mu),Fl(Xl),Fl(Wl));hu.applyMatrix3(vl);let Jl=[];for(let Gu=0;Gu<Al.length;Gu++){let Zu=Al[Gu].x+hu.x,rd=Al[Gu].y+hu.y,wd=Al[Gu].z+hu.z;if(Ol(Zu,rd,wd))continue;let gd={};for(let jd in Al[Gu])gd[jd]=Al[Gu][jd];gd.x=Zu,gd.y=rd,gd.z=wd,Jl.push(gd)}Q.addAtoms(Jl)}yl&&Q.assignBonds()}}addLineDashed(f,E){var W,Q;f.dashLength=f.dashLength||.5,f.gapLength=f.gapLength||.5,W=f.start?new Y.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):new Y.Vector3(0,0,0),Q=f.end?new Y.Vector3(f.end.x,f.end.y||0,f.end.z||0):new Y.Vector3(0,0,0);var yl,Ln,Cl,Al=new Y.Vector3,vl=new Y.Vector3,Fl=new Y.Vector3,Ol=W.clone(),mu=0;for(Al.subVectors(Q,W),yl=Al.length(),Al.normalize(),vl=Al.clone(),Fl=Al.clone(),vl.multiplyScalar(f.dashLength),Fl.multiplyScalar(f.gapLength),Ln=vl.length(),Cl=Fl.length();mu<yl;){if(mu+Ln>yl){f.start=W,f.end=Q,E.addLine(f);break}Ol.addVectors(W,vl),f.start=W,f.end=Ol,E.addLine(f),W=Ol.clone(),mu+=Ln,Ol.addVectors(W,Fl),W=Ol.clone(),mu+=Cl}return E.finalize(),E}addCustom(f){var E=new ph(f=f||{});return E.shapePosition=this.shapes.length,E.addCustom(f),this.shapes.push(E),E.finalize(),E}addVolumetricData(f,E,W={}){var Q=new Eh.VolumeData(f,E);return W.hasOwnProperty("transferfn")?this.addVolumetricRender(Q,W):this.addIsosurface(Q,W)}addIsosurface(f,E={},W){var Q=new ph(E);return Q.shapePosition=this.shapes.length,Q.addIsosurface(f,E,W,this),this.shapes.push(Q),Q}addVolumetricRender(f,E){var W=new Bp(f,E=E||{},this);return W.shapePosition=this.shapes.length,this.shapes.push(W),W}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(f){if(f){this.scene.fog=new V.Fog(this.bgColor,100,200),this.config.disableFog=!1;const E=f;E.fogStart==null?this.fogStart=.4:this.fogStart=E.fogStart,E.fogEnd==null?this.fogEnd=1:this.fogEnd=E.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(f){this.viewer_frame=f;let E=this;return new Promise(function(W){var Q=E.models.map(function(yl){return yl.setFrame(f)});Promise.all(Q).then(function(){W()})})}getFrame(){return this.viewer_frame}getNumFrames(){var f=0;for(let E=0;E<this.models.length;E++)this.models[E].getNumFrames()>f&&(f=this.models[E].getNumFrames());for(let E=0;E<this.shapes.length;E++)this.shapes[E].frame&&this.shapes[E].frame>=f&&(f=this.shapes[E].frame+1);for(let E=0;E<this.labels.length;E++)this.labels[E].frame&&this.labels[E].frame>=f&&(f=this.labels[E].frame+1);return f}getNextModelId(){return this.models.length}animate(f){this.incAnim();var E=100,W="forward",Q=1/0;(f=f||{}).interval&&(E=f.interval),f.loop&&(W=f.loop),f.reps&&(Q=f.reps);var yl=this.getNumFrames(),Ln=this,Cl=0;f.startFrame&&(Cl=f.startFrame%yl);var Al=1;f.step&&(Q/=Al=f.step);var vl,Fl,Ol=0,mu=yl*Q,Xl=new Date,Wl=function(hu){Xl=new Date,hu=="forward"?Ln.setFrame(Cl).then(function(){Cl=(Cl+Al)%yl,vl()}):hu=="backward"?Ln.setFrame(yl-1-Cl).then(function(){Cl=(Cl+Al)%yl,vl()}):Ln.setFrame(Cl).then(function(){Al*=(Cl+=Al)%(yl-1)==0?-1:1,vl()})};return vl=function(){if(Ln.render(),Ln.getCanvas().isConnected)if(++Ol>=mu||!Ln.isAnimated())Fl.cancel(),Ln.animationTimers.delete(Fl),Ln.decAnim();else{var hu=E-(new Date().getTime()-Xl.getTime());hu=hu>0?hu:0,Fl.cancel(),Ln.animationTimers.delete(Fl),Fl=new Et.PausableTimer(Wl,hu,W),Ln.animationTimers.add(Fl)}else Ln.stopAnimate()},Fl=new Et.PausableTimer(Wl,0,W),this.animationTimers.add(Fl),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(f){f.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(f){f.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(f){f.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(f){return f&&!f.defaultcolors?(f.defaultcolors=this.defaultcolors,f.cartoonQuality=f.cartoonQuality||this.config.cartoonQuality):f===void 0&&(f={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),f}addModel(f,E="",W){W=this.getModelOpt(W);var Q=new lg(this.models.length,W,this);return Q.addMolData(f,E,W),this.models.push(Q),Q}addModels(f,E,W){(W=this.getModelOpt(W)).multimodel=!0,W.frames=!0;for(var Q=lg.parseMolData(f,E,W),yl=0;yl<Q.length;yl++){var Ln=new lg(this.models.length,W,this);Ln.setAtomDefaults(Q[yl]),Ln.addFrame(Q[yl]),Ln.setFrame(0),Q.modelData&&Ln.setModelData(Q.modelData[yl]),Ln.setDontDuplicateAtoms(!W.duplicateAssemblyAtoms),this.models.push(Ln)}return this.models}addModelsAsFrames(f,E,W){(W=this.getModelOpt(W)).multimodel=!0,W.frames=!0;var Q=new lg(this.models.length,W,this);return Q.addMolData(f,E,W),this.models.push(Q),Q}addAsOneMolecule(f,E,W){(W=this.getModelOpt(W)).multimodel=!0,W.onemol=!0;var Q=new lg(this.models.length,W,this);return Q.addMolData(f,E,W),this.models.push(Q),Q}removeModel(f){if(f=this.getModel(f)){for(f.removegl(this.modelGroup),delete this.models[f.getID()];this.models.length>0&&this.models[this.models.length-1]===void 0;)this.models.pop();return this}}removeAllModels(){for(var f=0;f<this.models.length;f++){var E=this.models[f];E&&E.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(f,E){var W={};return W.m=E===void 0?this.models.map(function(Q){return Q.toCDObject(f)}):[this.models[E].toCDObject()],JSON.stringify(W)}exportVRML(){var f=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new V.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var E=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=f,E}createModelFrom(f,E=!1){for(var W=new lg(this.models.length,this.defaultcolors,this),Q=0;Q<this.models.length;Q++)if(this.models[Q]){var yl=this.models[Q].selectedAtoms(f);W.addAtoms(yl),E&&this.models[Q].removeAtoms(yl)}return this.models.push(W),W}applyToModels(f,E,W,Q,yl,Ln,Cl){for(var Al=this.getModelList(E),vl=0;vl<Al.length;vl++)Al[vl][f](E,W,Q,yl,Ln,Cl)}setStyle(f,E){return E===void 0&&(E=f,f={}),this.applyToModels("setStyle",f,E,!1),this}addStyle(f,E){return E===void 0&&(E=f,f={}),this.applyToModels("setStyle",f,E,!0),this}setClickable(f,E,W){return this.applyToModels("setClickable",f,E,W),this}setHoverable(f,E,W,Q){return this.applyToModels("setHoverable",f,E,W,Q),this}enableContextMenu(f,E){return this.applyToModels("enableContextMenu",f,E),this}vibrate(f,E,W,Q){return this.applyToModels("vibrate",f,E,W,Q),this}setColorByProperty(f,E,W,Q){return this.applyToModels("setColorByProperty",f,E,W,Q),this}setColorByElement(f,E){return this.applyToModels("setColorByElement",f,E),this}static getAtomsWithin(f,E){var W=[];for(let yl=0;yl<f.length;yl++){var Q=f[yl];Q!==void 0&&(Q.x<E[0][0]||Q.x>E[1][0]||Q.y<E[0][1]||Q.y>E[1][1]||Q.z<E[0][2]||Q.z>E[1][2]||W.push(Q))}return W}static volume(f){return(f[1][0]-f[0][0])*(f[1][1]-f[0][1])*(f[1][2]-f[0][2])}carveUpExtent(f,E,W){let Q=[],yl={};for(let Fl=0,Ol=E.length;Fl<Ol;Fl++)yl[E[Fl].index]=Fl;let Ln=function(Fl){let Ol=[];for(let mu=0,Xl=Fl.length;mu<Xl;mu++)Fl[mu].index in yl&&Ol.push(yl[Fl[mu].index]);return Ol},Cl=function(Fl){let Ol=[];return Ol[0]=[Fl[0][0],Fl[0][1],Fl[0][2]],Ol[1]=[Fl[1][0],Fl[1][1],Fl[1][2]],Ol},Al=function(Fl){if(xf.volume(Fl)<xf.maxVolume)return[Fl];var Ol,mu=Fl[1][0]-Fl[0][0],Xl=Fl[1][1]-Fl[0][1],Wl=Fl[1][2]-Fl[0][2];Ol=mu>Xl&&mu>Wl?0:Xl>mu&&Xl>Wl?1:2;var hu=Cl(Fl),Jl=Cl(Fl),Gu=(Fl[1][Ol]-Fl[0][Ol])/2+Fl[0][Ol];hu[1][Ol]=Gu,Jl[0][Ol]=Gu;var Zu=Al(hu),rd=Al(Jl);return Zu.concat(rd)},vl=Al(f);for(let Fl=0,Ol=vl.length;Fl<Ol;Fl++){let mu=Cl(vl[Fl]);mu[0][0]-=6,mu[0][1]-=6,mu[0][2]-=6,mu[1][0]+=6,mu[1][1]+=6,mu[1][2]+=6;let Xl=xf.getAtomsWithin(E,mu),Wl=xf.getAtomsWithin(W,vl[Fl]);Q.push({extent:vl[Fl],atoms:Ln(Xl),toshow:Ln(Wl)})}return Q}static generateSurfaceMesh(f,E,W){var Q=new V.Geometry(!0),yl=Q.updateGeoGroup(0),Ln=[];for(let Hl=0,Iu=f.length;Hl<Iu;Hl++){var Cl=f[Hl];Cl&&(Cl.surfaceColor!==void 0?Ln[Hl]=Cl.surfaceColor:Cl.color&&(Ln[Hl]=ie.CC.color(Cl.color)))}var Al=yl.vertexArray,vl=E.vertices;for(let Hl=0,Iu=vl.length;Hl<Iu;Hl++){let Fd=3*yl.vertices;Al[Fd]=vl[Hl].x,Al[Fd+1]=vl[Hl].y,Al[Fd+2]=vl[Hl].z,yl.vertices++}var Fl=yl.colorArray;let Ol=yl.atomArray;if(W.voldata&&W.volscheme){var mu=W.volscheme,Xl=W.voldata,Wl=mu.range()||[-1,1];for(let Hl=0,Iu=vl.length;Hl<Iu;Hl++){let Fd=vl[Hl].atomid,Ud=Xl.getVal(vl[Hl].x,vl[Hl].y,vl[Hl].z),eh=ie.CC.color(mu.valueToHex(Ud,Wl)),Sh=3*Hl;Fl[Sh]=eh.r,Fl[Sh+1]=eh.g,Fl[Sh+2]=eh.b,Ol[Hl]=f[Fd]}}else if(Ln.length>0)for(let Hl=0,Iu=vl.length;Hl<Iu;Hl++){let Fd=vl[Hl].atomid,Ud=3*Hl;Fl[Ud]=Ln[Fd].r,Fl[Ud+1]=Ln[Fd].g,Fl[Ud+2]=Ln[Fd].b,Ol[Hl]=f[Fd]}var hu=E.faces;yl.faceidx=hu.length,Q.initTypedArrays();var Jl,Gu,Zu,rd,wd=yl.vertexArray,gd=yl.normalArray;for(let Hl=0,Iu=hu.length;Hl<Iu;Hl+=3){var jd=3*hu[Hl],Qd=3*hu[Hl+1],ih=3*hu[Hl+2];Jl=new Y.Vector3(wd[jd],wd[jd+1],wd[jd+2]),Gu=new Y.Vector3(wd[Qd],wd[Qd+1],wd[Qd+2]),(Zu=new Y.Vector3(wd[ih],wd[ih+1],wd[ih+2])).subVectors(Zu,Gu),Jl.subVectors(Jl,Gu),Zu.cross(Jl),(rd=Zu).normalize(),gd[jd]+=rd.x,gd[Qd]+=rd.x,gd[ih]+=rd.x,gd[jd+1]+=rd.y,gd[Qd+1]+=rd.y,gd[ih+1]+=rd.y,gd[jd+2]+=rd.z,gd[Qd+2]+=rd.z,gd[ih+2]+=rd.z}return yl.faceArray=new Uint16Array(hu),new V.Mesh(Q,W)}static generateMeshSyncHelper(f,E,W,Q,yl,Ln){var Cl=new Vd;return Cl.initparm(E,f!==1,Ln),Cl.fillvoxels(yl,W),Cl.buildboundary(),f!=sm.SES&&f!=sm.MS||(Cl.fastdistancemap(),Cl.boundingatom(!1),Cl.fillvoxelswaals(yl,W)),Cl.marchingcube(f),Cl.getFacesAndVertices(Q)}static getMatWithStyle(f){let E=null;for(var W in E=f.onesided?new V.MeshLambertMaterial:new V.MeshDoubleLambertMaterial,E.vertexColors=V.Coloring.VertexColors,f)W==="color"||W==="map"||f.hasOwnProperty(W)&&(E[W]=f[W]);return f.opacity!==void 0&&(f.opacity===1?E.transparent=!1:E.transparent=!0),f.wireframe!==void 0&&(E.wireframe=f.wireframe),E}addMesh(f){let E={geo:f.geometry,mat:f.material,done:!0,finished:!1};var W=this.nextSurfID();return this.surfaces[W]=new Rh([E]),W}static shallowCopy(f){var E=[];let W=f.length;for(let Q=0;Q<W;Q++)E[Q]=(0,Et.extend)({},f[Q]);return E}addSurface(f,E={},W={},Q,yl,Ln){let Cl=this.nextSurfID(),Al=null,vl=this,Fl=sm.VDW;typeof f=="string"?xf.surfaceTypeMap[f.toUpperCase()]!==void 0?Fl=xf.surfaceTypeMap[f]:console.log("Surface type : "+f+" is not recognized"):typeof f=="number"&&(Fl=f);var Ol=null,mu=null,Xl=xf.shallowCopy(this.getAtomsFromSel(W));Ol=Q?xf.shallowCopy(this.getAtomsFromSel(Q)):Xl,(0,Et.adjustVolumeStyle)(E);var Wl,hu=!1;for(Wl=0;Wl<this.models.length;Wl++)if(this.models[Wl]){var Jl=this.models[Wl].getSymmetries();if(Jl.length>1||Jl.length==1&&!Jl[0].isIdentity()){hu=!0;break}}var Gu=function(Qd,ih,Hl){var Iu;mu=yl?xf.shallowCopy(vl.getAtomsFromSel(yl)):Hl;var Fd=(0,Et.getExtent)(Hl,!0);if(E.map&&E.map.prop){var Ud=E.map.prop;let $h=(0,zn.getGradient)(E.map.scheme||E.map.gradient||new zn.Gradient.RWB),ap=$h.range();ap||(ap=(0,Et.getPropertyRange)(Hl,Ud)),E.colorscheme={prop:Ud,gradient:$h}}for(let $h=0,ap=ih.length;$h<ap;$h++)(Iu=ih[$h]).surfaceColor=(0,Et.getColorFromStyle)(Iu,E);var eh=xf.volume(Fd),Sh=vl.carveUpExtent(Fd,ih,Hl);if(mu&&mu.length&&mu.length>0){var Lh=(0,Et.getExtent)(mu,!0);Sh.sort(function($h,ap){var Yh=function(Mh,pp){var Ip=Mh.extent,gp=Ip[1][0]-Ip[0][0],Xh=Ip[1][1]-Ip[0][1],Qp=Ip[1][2]-Ip[0][2],Wp=gp-pp[2][0];Wp*=Wp;var $p=Xh-pp[2][1];$p*=$p;var Hp=Qp-pp[2][2];return Wp+$p+(Hp*=Hp)};return Yh($h,Lh)-Yh(ap,Lh)})}var Ah=[];for(let $h=0,ap=ih.length;$h<ap;$h++)Iu=ih[$h],Ah[$h]={x:Iu.x,y:Iu.y,z:Iu.z,serial:$h,elem:Iu.elem};var yh=!!Cg;if(typeof $3Dmol<"u"&&$3Dmol.SurfaceWorker!==void 0||(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),yh=!0),yh){var Nh=function($h){return new Promise(function(ap){for(var Yh=xf.generateMeshSyncHelper(Fl,Sh[$h].extent,Sh[$h].atoms,Sh[$h].toshow,Ah,eh),Mh=jp({vertexArr:Yh.vertices,faceArr:Yh.faces}),pp=0,Ip=Mh.length;pp<Ip;pp++){Yh={vertices:Mh[pp].vertexArr,faces:Mh[pp].faceArr};var gp=xf.generateSurfaceMesh(ih,Yh,Al);(0,Et.mergeGeos)(Qd.geo,gp)}vl.render(),ap()})},sh=[];for(let $h=0;$h<Sh.length;$h++)sh.push(Nh($h));return Promise.all(sh).then(function(){return Qd.done=!0,vl.render(),Promise.resolve(Cl)})}var Th=[];Fl<0&&(Fl=0);for(let $h=0,ap=xf.numWorkers;$h<ap;$h++){var dp=new Worker($3Dmol.SurfaceWorker);Th.push(dp),dp.postMessage({type:-1,atoms:Ah,volume:eh})}return new Promise(function($h,ap){var Yh=0,Mh=function(){Th&&Th.length&&Th.forEach(function(Xh){Xh&&Xh.terminate&&Xh.terminate()})},pp=function(Xh){for(var Qp=jp({vertexArr:Xh.data.vertices,faceArr:Xh.data.faces}),Wp=0,$p=Qp.length;Wp<$p;Wp++){var Hp={vertices:Qp[Wp].vertexArr,faces:Qp[Wp].faceArr},Vp=xf.generateSurfaceMesh(ih,Hp,Al);(0,Et.mergeGeos)(Qd.geo,Vp)}vl.render(),++Yh==Sh.length&&(Qd.done=!0,Mh(),$h(Cl))},Ip=function(Xh){Mh(),console.log(Xh.message+" ("+Xh.filename+":"+Xh.lineno+")"),ap(Xh)};for(let Xh=0;Xh<Sh.length;Xh++){var gp=Th[Xh%Th.length];gp.onmessage=pp,gp.onerror=Ip,gp.postMessage({type:Fl,expandedExtent:Sh[Xh].extent,extendedAtoms:Sh[Xh].atoms,atomsToShow:Sh[Xh].toshow})}})};E=E||{},Al=xf.getMatWithStyle(E);let Zu=new Rh([]);Zu.style=E,Zu.atomsel=W,Zu.allsel=Q,Zu.focus=yl;var rd=null;if(hu){var wd={},gd={};for(Wl=0;Wl<this.models.length;Wl++)wd[Wl]=[],gd[Wl]=[];for(Wl=0;Wl<Ol.length;Wl++)wd[Ol[Wl].model].push(Ol[Wl]);for(Wl=0;Wl<Xl.length;Wl++)gd[Xl[Wl].model].push(Xl[Wl]);var jd=[];for(Wl=0;Wl<this.models.length;Wl++)gd[Wl].length>0&&(Zu.push({geo:new V.Geometry(!0),mat:Al,done:!1,finished:!1,symmetries:this.models[Wl].getSymmetries()}),jd.push(Gu(Zu[Zu.length-1],wd[Wl],gd[Wl])));rd=Promise.all(jd)}else Zu.push({geo:new V.Geometry(!0),mat:Al,done:!1,finished:!1,symmetries:[new Y.Matrix4]}),rd=Gu(Zu[Zu.length-1],Ol,Xl);return this.surfaces[Cl]=Zu,rd.surfid=Cl,Ln&&typeof Ln=="function"?(rd.then(function(Qd){Ln(Qd)}),Cl):rd}setSurfaceMaterialStyle(f,E){if((0,Et.adjustVolumeStyle)(E),this.surfaces[f]){var W=this.surfaces[f];for(let yl=0;yl<W.length;yl++){var Q=W[yl].mat=xf.getMatWithStyle(E);if(W[yl].mat.side=V.FrontSide,E.wireframe&&W[yl].geo.setUpWireframe(),E.color){W[yl].mat.color=ie.CC.color(E.color),W[yl].geo.colorsNeedUpdate=!0;const Ln=ie.CC.color(E.color);W[yl].geo.setColor(Ln)}else if(Q.voldata&&Q.volscheme){const Ln=Q.volscheme,Cl=Q.voldata,Al=ie.CC,vl=Ln.range()||[-1,1];W[yl].geo.setColors(function(Fl,Ol,mu){let Xl=Cl.getVal(Fl,Ol,mu);return Al.color(Ln.valueToHex(Xl,vl))})}else{W[yl].geo.colorsNeedUpdate=!0;for(let Ln of W[yl].geo.geometryGroups)for(let Cl=0;Cl<Ln.vertices;Cl++){let Al=(0,Et.getColorFromStyle)(Ln.atomArray[Cl],E),vl=3*Cl;Ln.colorArray[vl]=Al.r,Ln.colorArray[vl+1]=Al.g,Ln.colorArray[vl+2]=Al.b}}W[yl].finished=!1}}return this}getSurface(f){return this.surfaces[f]}removeSurface(f){for(var E=this.surfaces[f],W=0;W<E.length;W++)E[W]&&E[W].lastGL&&(E[W].geo!==void 0&&E[W].geo.dispose(),E[W].mat!==void 0&&E[W].mat.dispose(),this.modelGroup.remove(E[W].lastGL));return delete this.surfaces[f],this.show(),this}removeAllSurfaces(){for(var f in this.surfaces)if(this.surfaces.hasOwnProperty(f)){for(var E=this.surfaces[f],W=0;W<E.length;W++)E[W]&&E[W].lastGL&&(E[W].geo!==void 0&&E[W].geo.dispose(),E[W].mat!==void 0&&E[W].mat.dispose(),this.modelGroup.remove(E[W].lastGL));delete this.surfaces[f]}return this.show(),this}jmolMoveTo(){var f=this.modelGroup.position,E="center { "+-f.x+" "+-f.y+" "+-f.z+" }; ",W=this.rotationGroup.quaternion;return E+="moveto .5 quaternion { "+W.x+" "+W.y+" "+W.z+" "+W.w+" };"}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(f,E){E=E||{};var W=this.getAtomsFromSel(E);if(typeof f=="function")for(let Ln=0,Cl=W.length;Ln<Cl;Ln++)f(W[Ln]);else for(let Ln=0,Cl=W.length;Ln<Cl;Ln++){var Q=W[Ln];for(let Al=0,vl=f.length;Al<vl;Al++){let Fl=f[Al];if(Fl.props)for(var yl in Fl.props)Fl.props.hasOwnProperty(yl)&&this.atomIsSelected(Q,Fl)&&(Q.properties||(Q.properties={}),Q.properties[yl]=Fl.props[yl])}}return this}linkViewer(f){return this.linkedViewers.push(f),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(f){this.rotationGroup.position.z=this.CAMERA_Z-f}setAutoEyeSeparation(f,E){var W=this.getPerceivedDistance();return E||(E=5),f||this.camera.position.x>0?this.camera.position.x=W*Math.tan(Math.PI/180*E):this.camera.position.x=-W*Math.tan(Math.PI/180*E),this.camera.lookAt(new Y.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(f){this.config.cartoonQuality=f}}function Ng(dd,f){if(dd=(0,Et.getElement)(dd)){f=f||{};try{return new xf(dd,f)}catch(E){throw"error creating viewer: "+E}}}function em(dd,f={},E={}){if(dd=(0,Et.getElement)(dd)){var W=[],Q=document.createElement("canvas");E.rows=f.rows,E.cols=f.cols,E.control_all=f.control_all!=null&&f.control_all,dd.appendChild(Q);try{for(var yl=0;yl<f.rows;yl++){for(var Ln=[],Cl=0;Cl<f.cols;Cl++){E.row=yl,E.col=Cl,E.canvas=Q,E.viewers=W,E.control_all=f.control_all;var Al=Ng(dd,(0,Et.extend)({},E));Ln.push(Al)}W.unshift(Ln)}}catch(vl){throw"error creating viewer grid: "+vl}return W}}function Fm(dd){var f=this;if(dd=(0,Et.getElement)(dd)){var E=em(dd,{rows:1,cols:2,control_all:!0});this.glviewer1=E[0][0],this.glviewer2=E[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var W=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(yl){return typeof f.glviewer1[yl]=="function"}),Q=0;Q<W.length;Q++)this[W[Q]]=(function(yl){return function(){return[this.glviewer1[yl].apply(this.glviewer1,arguments),this.glviewer2[yl].apply(this.glviewer2,arguments)]}})(W[Q]);this.setCoordinates=function(yl,Ln,Cl){for(var Al=0;Al<yl.length;Al++)yl[Al].setCoordinates(Ln,Cl)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(yl){this.glviewer1.render(),this.glviewer2.render(),yl&&yl(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}xf.numWorkers=4,xf.maxVolume=64e3,xf.surfaceTypeMap={VDW:sm.VDW,MS:sm.MS,SAS:sm.SAS,SES:sm.SES};var Vf=!1,Yg=!1,$f={};function Kg(dd,f){var E,W,Q;if(document.querySelector(".viewer_3Dmoljs")!=null&&(Vf=!0),Vf){Yg=!0,dd=dd??null;var yl=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(Ln=>{var Cl=[],Al=[],vl="";Ln.style.position=="static"&&(Ln.style.position="relative");var Fl=null;if(Q=null,Ln.dataset.pdb)Cl.push("https://files.rcsb.org/view/"+Ln.dataset.pdb+".pdb"),Al.push("pdb");else if(Ln.dataset.cid)Al.push("sdf"),Cl.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+Ln.dataset.cid+"/SDF?record_type=3d");else if(Ln.dataset.href||Ln.dataset.url){if(vl=Ln.dataset.href?Ln.dataset.href:Ln.dataset.url,Cl.push(vl),(Q=vl.substring(vl.lastIndexOf(".")+1))=="gz"){let $h=vl.substring(0,vl.lastIndexOf(".")).lastIndexOf(".");Q=vl.substring($h+1)}Al.push(Q);var Ol=vl.substring(vl.lastIndexOf("/")+1,vl.lastIndexOf("."));Ol=="/"&&(Ol=vl.substring(vl.lastIndexOf("/")+1)),Ln.dataset[Al[Al.length-1]]=Ol}let mu=Ln.dataset;for(E in mu)E.substring(0,3)==="pdb"&&E!=="pdb"?(Cl.push("https://files.rcsb.org/view/"+mu[E]+".pdb"),Al.push("pdb")):E.substring(0,4)==="href"&&E!=="href"?(vl=mu[E],Cl.push(vl),Al.push(vl.substring(vl.lastIndexOf(".")+1))):E.substring(0,3)==="cid"&&E!=="cid"&&(Cl.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+mu[E]+"/SDF?record_type=3d"),Al.push("sdf"));var Xl={};Ln.dataset.options&&(Xl=(0,Et.specStringToObject)(Ln.dataset.options));var Wl=ie.CC.color(Ln.dataset.backgroundcolor),hu=Ln.dataset.backgroundalpha;hu=hu==null?1:parseFloat(hu);var Jl={line:{}};Ln.dataset.style&&(Jl=(0,Et.specStringToObject)(Ln.dataset.style));var Gu={};Ln.dataset.select&&(Gu=(0,Et.specStringToObject)(Ln.dataset.select));var Zu=[],rd=[],wd=[],gd={},jd=null,Qd=Ln.dataset,ih=/style(.+)/,Hl=/surface(.*)/,Iu=/labelres(.*)/,Fd=[];for(W in Qd)Object.prototype.hasOwnProperty.call(Qd,W)&&Fd.push(W);for(Fd.sort(),E=0;E<Fd.length;E++){W=Fd[E];var Ud,eh,Sh,Lh=ih.exec(W);Lh&&(Ud="select"+Lh[1],eh=(0,Et.specStringToObject)(Qd[Ud]),Sh=(0,Et.specStringToObject)(Qd[W]),Zu.push([eh,Sh])),(Lh=Hl.exec(W))&&(Ud="select"+Lh[1],eh=(0,Et.specStringToObject)(Qd[Ud]),Sh=(0,Et.specStringToObject)(Qd[W]),rd.push([eh,Sh])),(Lh=Iu.exec(W))&&(Ud="select"+Lh[1],eh=(0,Et.specStringToObject)(Qd[Ud]),Sh=(0,Et.specStringToObject)(Qd[W]),wd.push([eh,Sh])),W=="zoomto"&&(gd=(0,Et.specStringToObject)(Qd[W])),W=="spin"&&(jd=(0,Et.specStringToObject)(Qd[W]))}var Ah=function($h){for($h.setStyle(Gu,Jl),Fl&&Fl.createSelectionAndStyle(Gu,Jl),E=0;E<Zu.length;E++){let ap=Zu[E][0]||{},Yh=Zu[E][1]||{line:{}};$h.setStyle(ap,Yh),Fl&&Fl.createSelectionAndStyle(Gu,Jl)}for(E=0;E<rd.length;E++){let ap=rd[E][0]||{},Yh=rd[E][1]||{};Fl?$h.addSurface(sm.VDW,Yh,ap,ap).then(Mh=>{Fl.loadSurface("VDW",ap,Yh,Mh)}):$h.addSurface(sm.VDW,Yh,ap,ap)}for(E=0;E<wd.length;E++){let ap=wd[E][0]||{},Yh=wd[E][1]||{};$h.addResLabels(ap,Yh)}$h.render(),$h.zoomTo(gd),jd&&$h.spin(jd.axis,jd.speed)};let yh=dd;try{var Nh=(0,Et.specStringToObject)(Ln.dataset.config)||{};Nh.backgroundColor===void 0&&(Nh.backgroundColor=Wl),Nh.backgroundAlpha===void 0&&(Nh.backgroundAlpha=hu),yh==null?yh=$f[Ln.id||yl++]=Ng(Ln,Nh):(yh.setBackgroundColor(Wl,hu),yh.setConfig(Nh),Fl&&Fl.initiateUI()),Ln.dataset.ui&&$3Dmol.StateManager&&(Fl=new $3Dmol.StateManager(yh))}catch($h){console.log($h),Ln.textContent="WebGL appears to be disabled."}if(Cl.length!=0){let $h=0,ap=((Yh,Mh)=>function(pp){vl=Cl[$h];var Ip=Yh.dataset.type||Yh.dataset.datatype||Al[$h];if(Mh.addModel(pp,Ip,Xl),Fl){var gp=Yh.dataset[Al[$h]];Fl.setModelTitle(gp)}$h+=1,$h<Cl.length?(0,Et.get)(Cl[$h]).then(ap):(Ah(Mh),Yh.dataset.callback&&(0,Et.makeFunction)(Yh.dataset.callback)(Mh),Yg=!1,f&&f(Mh))})(Ln,yh);Q&&Q.endsWith("gz")?(0,Et.getbin)(Cl[0]).then(ap):(0,Et.get)(Cl[0]).then(ap)}else{if(Ln.dataset.element){var sh="#"+Ln.dataset.element,Th=document.querySelector(sh),dp=Th?Th.textContent:"";Q=Ln.dataset.type||Ln.dataset.datatype,yh.addModel(dp,Q,Xl)}Ah(yh),Ln.dataset.callback&&(0,Et.makeFunction)(Ln.dataset.callback)(yh),Yg=!1,f&&f(yh)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&Kg()};const If={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function Mm(dd,f){if((!f||dd.partialCharge===void 0)&&dd.resn&&dd.atom){var E=dd.resn+":"+dd.atom;dd.properties.partialCharge=If[E]}}window&&(window.$3Dmol=h)},40:(n,h,s)=>{s.r(h),s.d(h,{bondLength:()=>M,bondTable:()=>_,setBondLength:()=>$});let _={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function M(V){return _[V]||1.6}function $(V,oe){oe<0&&(oe=0),_[V]=oe}},71:(n,h,s)=>{var _=s(107),M=s(981),$=s(972),V=s(834),oe=s(746),Y=Object.prototype.toString;function ie(Et){if(!(this instanceof ie))return new ie(Et);this.options=M.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},Et||{});var ml=this.options;ml.raw&&ml.windowBits>0?ml.windowBits=-ml.windowBits:ml.gzip&&ml.windowBits>0&&ml.windowBits<16&&(ml.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new oe,this.strm.avail_out=0;var rl=_.deflateInit2(this.strm,ml.level,ml.method,ml.windowBits,ml.memLevel,ml.strategy);if(rl!==0)throw new Error(V[rl]);if(ml.header&&_.deflateSetHeader(this.strm,ml.header),ml.dictionary){var Ml;if(Ml=typeof ml.dictionary=="string"?$.string2buf(ml.dictionary):Y.call(ml.dictionary)==="[object ArrayBuffer]"?new Uint8Array(ml.dictionary):ml.dictionary,(rl=_.deflateSetDictionary(this.strm,Ml))!==0)throw new Error(V[rl]);this._dict_set=!0}}function zn(Et,ml){var rl=new ie(ml);if(rl.push(Et,!0),rl.err)throw rl.msg||V[rl.err];return rl.result}ie.prototype.push=function(Et,ml){var rl,Ml,kl=this.strm,_u=this.options.chunkSize;if(this.ended)return!1;Ml=ml===~~ml?ml:ml===!0?4:0,typeof Et=="string"?kl.input=$.string2buf(Et):Y.call(Et)==="[object ArrayBuffer]"?kl.input=new Uint8Array(Et):kl.input=Et,kl.next_in=0,kl.avail_in=kl.input.length;do{if(kl.avail_out===0&&(kl.output=new M.Buf8(_u),kl.next_out=0,kl.avail_out=_u),(rl=_.deflate(kl,Ml))!==1&&rl!==0)return this.onEnd(rl),this.ended=!0,!1;kl.avail_out!==0&&(kl.avail_in!==0||Ml!==4&&Ml!==2)||(this.options.to==="string"?this.onData($.buf2binstring(M.shrinkBuf(kl.output,kl.next_out))):this.onData(M.shrinkBuf(kl.output,kl.next_out)))}while((kl.avail_in>0||kl.avail_out===0)&&rl!==1);return Ml===4?(rl=_.deflateEnd(this.strm),this.onEnd(rl),this.ended=!0,rl===0):Ml!==2||(this.onEnd(0),kl.avail_out=0,!0)},ie.prototype.onData=function(Et){this.chunks.push(Et)},ie.prototype.onEnd=function(Et){Et===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=M.flattenChunks(this.chunks)),this.chunks=[],this.err=Et,this.msg=this.strm.msg},h.Deflate=ie,h.deflate=zn,h.deflateRaw=function(Et,ml){return(ml=ml||{}).raw=!0,zn(Et,ml)},h.gzip=function(Et,ml){return(ml=ml||{}).gzip=!0,zn(Et,ml)}},75:(n,h,s)=>{function _(ve){let zu=ve.length;for(;--zu>=0;)ve[zu]=0}s.r(h),s.d(h,{Deflate:()=>Xf,Inflate:()=>Pg,constants:()=>Tg,default:()=>gg,deflate:()=>Nf,deflateRaw:()=>ag,gzip:()=>vg,inflate:()=>cg,inflateRaw:()=>kg,ungzip:()=>Bf});const M=256,$=286,V=30,oe=15,Y=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ie=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),zn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Et=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ml=new Array(576);_(ml);const rl=new Array(60);_(rl);const Ml=new Array(512);_(Ml);const kl=new Array(256);_(kl);const _u=new Array(29);_(_u);const Hu=new Array(V);function bu(ve,zu,el,Bd,Od){this.static_tree=ve,this.extra_bits=zu,this.extra_base=el,this.elems=Bd,this.max_length=Od,this.has_stree=ve&&ve.length}let dl,Tl,$l;function Bl(ve,zu){this.dyn_tree=ve,this.max_code=0,this.stat_desc=zu}_(Hu);const Pu=ve=>ve<256?Ml[ve]:Ml[256+(ve>>>7)],Il=(ve,zu)=>{ve.pending_buf[ve.pending++]=255&zu,ve.pending_buf[ve.pending++]=zu>>>8&255},ud=(ve,zu,el)=>{ve.bi_valid>16-el?(ve.bi_buf|=zu<<ve.bi_valid&65535,Il(ve,ve.bi_buf),ve.bi_buf=zu>>16-ve.bi_valid,ve.bi_valid+=el-16):(ve.bi_buf|=zu<<ve.bi_valid&65535,ve.bi_valid+=el)},pd=(ve,zu,el)=>{ud(ve,el[2*zu],el[2*zu+1])},id=(ve,zu)=>{let el=0;do el|=1&ve,ve>>>=1,el<<=1;while(--zu>0);return el>>>1},rh=(ve,zu,el)=>{const Bd=new Array(16);let Od,Md,jh=0;for(Od=1;Od<=oe;Od++)jh=jh+el[Od-1]<<1,Bd[Od]=jh;for(Md=0;Md<=zu;Md++){let ch=ve[2*Md+1];ch!==0&&(ve[2*Md]=id(Bd[ch]++,ch))}},qd=ve=>{let zu;for(zu=0;zu<$;zu++)ve.dyn_ltree[2*zu]=0;for(zu=0;zu<V;zu++)ve.dyn_dtree[2*zu]=0;for(zu=0;zu<19;zu++)ve.bl_tree[2*zu]=0;ve.dyn_ltree[512]=1,ve.opt_len=ve.static_len=0,ve.sym_next=ve.matches=0},oh=ve=>{ve.bi_valid>8?Il(ve,ve.bi_buf):ve.bi_valid>0&&(ve.pending_buf[ve.pending++]=ve.bi_buf),ve.bi_buf=0,ve.bi_valid=0},Ed=(ve,zu,el,Bd)=>{const Od=2*zu,Md=2*el;return ve[Od]<ve[Md]||ve[Od]===ve[Md]&&Bd[zu]<=Bd[el]},Nl=(ve,zu,el)=>{const Bd=ve.heap[el];let Od=el<<1;for(;Od<=ve.heap_len&&(Od<ve.heap_len&&Ed(zu,ve.heap[Od+1],ve.heap[Od],ve.depth)&&Od++,!Ed(zu,Bd,ve.heap[Od],ve.depth));)ve.heap[el]=ve.heap[Od],el=Od,Od<<=1;ve.heap[el]=Bd},Gd=(ve,zu,el)=>{let Bd,Od,Md,jh,ch=0;if(ve.sym_next!==0)do Bd=255&ve.pending_buf[ve.sym_buf+ch++],Bd+=(255&ve.pending_buf[ve.sym_buf+ch++])<<8,Od=ve.pending_buf[ve.sym_buf+ch++],Bd===0?pd(ve,Od,zu):(Md=kl[Od],pd(ve,Md+M+1,zu),jh=Y[Md],jh!==0&&(Od-=_u[Md],ud(ve,Od,jh)),Bd--,Md=Pu(Bd),pd(ve,Md,el),jh=ie[Md],jh!==0&&(Bd-=Hu[Md],ud(ve,Bd,jh)));while(ch<ve.sym_next);pd(ve,256,zu)},Cd=(ve,zu)=>{const el=zu.dyn_tree,Bd=zu.stat_desc.static_tree,Od=zu.stat_desc.has_stree,Md=zu.stat_desc.elems;let jh,ch,Dp,Ch=-1;for(ve.heap_len=0,ve.heap_max=573,jh=0;jh<Md;jh++)el[2*jh]!==0?(ve.heap[++ve.heap_len]=Ch=jh,ve.depth[jh]=0):el[2*jh+1]=0;for(;ve.heap_len<2;)Dp=ve.heap[++ve.heap_len]=Ch<2?++Ch:0,el[2*Dp]=1,ve.depth[Dp]=0,ve.opt_len--,Od&&(ve.static_len-=Bd[2*Dp+1]);for(zu.max_code=Ch,jh=ve.heap_len>>1;jh>=1;jh--)Nl(ve,el,jh);Dp=Md;do jh=ve.heap[1],ve.heap[1]=ve.heap[ve.heap_len--],Nl(ve,el,1),ch=ve.heap[1],ve.heap[--ve.heap_max]=jh,ve.heap[--ve.heap_max]=ch,el[2*Dp]=el[2*jh]+el[2*ch],ve.depth[Dp]=(ve.depth[jh]>=ve.depth[ch]?ve.depth[jh]:ve.depth[ch])+1,el[2*jh+1]=el[2*ch+1]=Dp,ve.heap[1]=Dp++,Nl(ve,el,1);while(ve.heap_len>=2);ve.heap[--ve.heap_max]=ve.heap[1],((tp,bg)=>{const Ff=bg.dyn_tree,zp=bg.max_code,Om=bg.stat_desc.static_tree,Zg=bg.stat_desc.has_stree,Qf=bg.stat_desc.extra_bits,hm=bg.stat_desc.extra_base,mg=bg.stat_desc.max_length;let Np,jf,rm,Sf,lm,Sg,pg=0;for(Sf=0;Sf<=oe;Sf++)tp.bl_count[Sf]=0;for(Ff[2*tp.heap[tp.heap_max]+1]=0,Np=tp.heap_max+1;Np<573;Np++)jf=tp.heap[Np],Sf=Ff[2*Ff[2*jf+1]+1]+1,Sf>mg&&(Sf=mg,pg++),Ff[2*jf+1]=Sf,jf>zp||(tp.bl_count[Sf]++,lm=0,jf>=hm&&(lm=Qf[jf-hm]),Sg=Ff[2*jf],tp.opt_len+=Sg*(Sf+lm),Zg&&(tp.static_len+=Sg*(Om[2*jf+1]+lm)));if(pg!==0){do{for(Sf=mg-1;tp.bl_count[Sf]===0;)Sf--;tp.bl_count[Sf]--,tp.bl_count[Sf+1]+=2,tp.bl_count[mg]--,pg-=2}while(pg>0);for(Sf=mg;Sf!==0;Sf--)for(jf=tp.bl_count[Sf];jf!==0;)rm=tp.heap[--Np],rm>zp||(Ff[2*rm+1]!==Sf&&(tp.opt_len+=(Sf-Ff[2*rm+1])*Ff[2*rm],Ff[2*rm+1]=Sf),jf--)}})(ve,zu),rh(el,Ch,ve.bl_count)},Bu=(ve,zu,el)=>{let Bd,Od,Md=-1,jh=zu[1],ch=0,Dp=7,Ch=4;for(jh===0&&(Dp=138,Ch=3),zu[2*(el+1)+1]=65535,Bd=0;Bd<=el;Bd++)Od=jh,jh=zu[2*(Bd+1)+1],++ch<Dp&&Od===jh||(ch<Ch?ve.bl_tree[2*Od]+=ch:Od!==0?(Od!==Md&&ve.bl_tree[2*Od]++,ve.bl_tree[32]++):ch<=10?ve.bl_tree[34]++:ve.bl_tree[36]++,ch=0,Md=Od,jh===0?(Dp=138,Ch=3):Od===jh?(Dp=6,Ch=3):(Dp=7,Ch=4))},wh=(ve,zu,el)=>{let Bd,Od,Md=-1,jh=zu[1],ch=0,Dp=7,Ch=4;for(jh===0&&(Dp=138,Ch=3),Bd=0;Bd<=el;Bd++)if(Od=jh,jh=zu[2*(Bd+1)+1],!(++ch<Dp&&Od===jh)){if(ch<Ch)do pd(ve,Od,ve.bl_tree);while(--ch!==0);else Od!==0?(Od!==Md&&(pd(ve,Od,ve.bl_tree),ch--),pd(ve,16,ve.bl_tree),ud(ve,ch-3,2)):ch<=10?(pd(ve,17,ve.bl_tree),ud(ve,ch-3,3)):(pd(ve,18,ve.bl_tree),ud(ve,ch-11,7));ch=0,Md=Od,jh===0?(Dp=138,Ch=3):Od===jh?(Dp=6,Ch=3):(Dp=7,Ch=4)}};let Rd=!1;const dh=(ve,zu,el,Bd)=>{ud(ve,0+(Bd?1:0),3),oh(ve),Il(ve,el),Il(ve,~el),el&&ve.pending_buf.set(ve.window.subarray(zu,zu+el),ve.pending),ve.pending+=el};var Ih=(ve,zu,el,Bd)=>{let Od,Md,jh=0;ve.level>0?(ve.strm.data_type===2&&(ve.strm.data_type=(ch=>{let Dp,Ch=4093624447;for(Dp=0;Dp<=31;Dp++,Ch>>>=1)if(1&Ch&&ch.dyn_ltree[2*Dp]!==0)return 0;if(ch.dyn_ltree[18]!==0||ch.dyn_ltree[20]!==0||ch.dyn_ltree[26]!==0)return 1;for(Dp=32;Dp<M;Dp++)if(ch.dyn_ltree[2*Dp]!==0)return 1;return 0})(ve)),Cd(ve,ve.l_desc),Cd(ve,ve.d_desc),jh=(ch=>{let Dp;for(Bu(ch,ch.dyn_ltree,ch.l_desc.max_code),Bu(ch,ch.dyn_dtree,ch.d_desc.max_code),Cd(ch,ch.bl_desc),Dp=18;Dp>=3&&ch.bl_tree[2*Et[Dp]+1]===0;Dp--);return ch.opt_len+=3*(Dp+1)+5+5+4,Dp})(ve),Od=ve.opt_len+3+7>>>3,Md=ve.static_len+3+7>>>3,Md<=Od&&(Od=Md)):Od=Md=el+5,el+4<=Od&&zu!==-1?dh(ve,zu,el,Bd):ve.strategy===4||Md===Od?(ud(ve,2+(Bd?1:0),3),Gd(ve,ml,rl)):(ud(ve,4+(Bd?1:0),3),((ch,Dp,Ch,tp)=>{let bg;for(ud(ch,Dp-257,5),ud(ch,Ch-1,5),ud(ch,tp-4,4),bg=0;bg<tp;bg++)ud(ch,ch.bl_tree[2*Et[bg]+1],3);wh(ch,ch.dyn_ltree,Dp-1),wh(ch,ch.dyn_dtree,Ch-1)})(ve,ve.l_desc.max_code+1,ve.d_desc.max_code+1,jh+1),Gd(ve,ve.dyn_ltree,ve.dyn_dtree)),qd(ve),Bd&&oh(ve)},nd={_tr_init:ve=>{Rd||((()=>{let zu,el,Bd,Od,Md;const jh=new Array(16);for(Bd=0,Od=0;Od<28;Od++)for(_u[Od]=Bd,zu=0;zu<1<<Y[Od];zu++)kl[Bd++]=Od;for(kl[Bd-1]=Od,Md=0,Od=0;Od<16;Od++)for(Hu[Od]=Md,zu=0;zu<1<<ie[Od];zu++)Ml[Md++]=Od;for(Md>>=7;Od<V;Od++)for(Hu[Od]=Md<<7,zu=0;zu<1<<ie[Od]-7;zu++)Ml[256+Md++]=Od;for(el=0;el<=oe;el++)jh[el]=0;for(zu=0;zu<=143;)ml[2*zu+1]=8,zu++,jh[8]++;for(;zu<=255;)ml[2*zu+1]=9,zu++,jh[9]++;for(;zu<=279;)ml[2*zu+1]=7,zu++,jh[7]++;for(;zu<=287;)ml[2*zu+1]=8,zu++,jh[8]++;for(rh(ml,287,jh),zu=0;zu<V;zu++)rl[2*zu+1]=5,rl[2*zu]=id(zu,5);dl=new bu(ml,Y,257,$,oe),Tl=new bu(rl,ie,0,V,oe),$l=new bu(new Array(0),zn,0,19,7)})(),Rd=!0),ve.l_desc=new Bl(ve.dyn_ltree,dl),ve.d_desc=new Bl(ve.dyn_dtree,Tl),ve.bl_desc=new Bl(ve.bl_tree,$l),ve.bi_buf=0,ve.bi_valid=0,qd(ve)},_tr_stored_block:dh,_tr_flush_block:Ih,_tr_tally:(ve,zu,el)=>(ve.pending_buf[ve.sym_buf+ve.sym_next++]=zu,ve.pending_buf[ve.sym_buf+ve.sym_next++]=zu>>8,ve.pending_buf[ve.sym_buf+ve.sym_next++]=el,zu===0?ve.dyn_ltree[2*el]++:(ve.matches++,zu--,ve.dyn_ltree[2*(kl[el]+M+1)]++,ve.dyn_dtree[2*Pu(zu)]++),ve.sym_next===ve.sym_end),_tr_align:ve=>{ud(ve,2,3),pd(ve,256,ml),(zu=>{zu.bi_valid===16?(Il(zu,zu.bi_buf),zu.bi_buf=0,zu.bi_valid=0):zu.bi_valid>=8&&(zu.pending_buf[zu.pending++]=255&zu.bi_buf,zu.bi_buf>>=8,zu.bi_valid-=8)})(ve)}},Yd=(ve,zu,el,Bd)=>{let Od=65535&ve,Md=ve>>>16&65535,jh=0;for(;el!==0;){jh=el>2e3?2e3:el,el-=jh;do Od=Od+zu[Bd++]|0,Md=Md+Od|0;while(--jh);Od%=65521,Md%=65521}return Od|Md<<16};const Kh=new Uint32Array((()=>{let ve,zu=[];for(var el=0;el<256;el++){ve=el;for(var Bd=0;Bd<8;Bd++)ve=1&ve?3988292384^ve>>>1:ve>>>1;zu[el]=ve}return zu})());var rp=(ve,zu,el,Bd)=>{const Od=Kh,Md=Bd+el;ve^=-1;for(let jh=Bd;jh<Md;jh++)ve=ve>>>8^Od[255&(ve^zu[jh])];return-1^ve},lh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},yp={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Cp,_tr_stored_block:vp,_tr_flush_block:mf,_tr_tally:Zp,_tr_align:kf}=nd,{Z_NO_FLUSH:Eg,Z_PARTIAL_FLUSH:Gg,Z_FULL_FLUSH:Hf,Z_FINISH:Rg,Z_BLOCK:fg,Z_OK:eg,Z_STREAM_END:Wg,Z_STREAM_ERROR:Lg,Z_DATA_ERROR:$g,Z_BUF_ERROR:Bm,Z_DEFAULT_COMPRESSION:Lm,Z_FILTERED:$m,Z_HUFFMAN_ONLY:_d,Z_RLE:Zd,Z_FIXED:xh,Z_DEFAULT_STRATEGY:Fp,Z_UNKNOWN:ip,Z_DEFLATED:cf}=yp,Jh=258,lf=262,vf=42,uf=113,Gf=666,Hm=(ve,zu)=>(ve.msg=lh[zu],zu),Vg=ve=>2*ve-(ve>4?9:0),Im=ve=>{let zu=ve.length;for(;--zu>=0;)ve[zu]=0},qg=ve=>{let zu,el,Bd,Od=ve.w_size;zu=ve.hash_size,Bd=zu;do el=ve.head[--Bd],ve.head[Bd]=el>=Od?el-Od:0;while(--zu);zu=Od,Bd=zu;do el=ve.prev[--Bd],ve.prev[Bd]=el>=Od?el-Od:0;while(--zu)};let vm=(ve,zu,el)=>(zu<<ve.hash_shift^el)&ve.hash_mask;const am=ve=>{const zu=ve.state;let el=zu.pending;el>ve.avail_out&&(el=ve.avail_out),el!==0&&(ve.output.set(zu.pending_buf.subarray(zu.pending_out,zu.pending_out+el),ve.next_out),ve.next_out+=el,zu.pending_out+=el,ve.total_out+=el,ve.avail_out-=el,zu.pending-=el,zu.pending===0&&(zu.pending_out=0))},Jg=(ve,zu)=>{mf(ve,ve.block_start>=0?ve.block_start:-1,ve.strstart-ve.block_start,zu),ve.block_start=ve.strstart,am(ve.strm)},pf=(ve,zu)=>{ve.pending_buf[ve.pending++]=zu},ff=(ve,zu)=>{ve.pending_buf[ve.pending++]=zu>>>8&255,ve.pending_buf[ve.pending++]=255&zu},r0=(ve,zu,el,Bd)=>{let Od=ve.avail_in;return Od>Bd&&(Od=Bd),Od===0?0:(ve.avail_in-=Od,zu.set(ve.input.subarray(ve.next_in,ve.next_in+Od),el),ve.state.wrap===1?ve.adler=Yd(ve.adler,zu,Od,el):ve.state.wrap===2&&(ve.adler=rp(ve.adler,zu,Od,el)),ve.next_in+=Od,ve.total_in+=Od,Od)},M0=(ve,zu)=>{let el,Bd,Od=ve.max_chain_length,Md=ve.strstart,jh=ve.prev_length,ch=ve.nice_match;const Dp=ve.strstart>ve.w_size-lf?ve.strstart-(ve.w_size-lf):0,Ch=ve.window,tp=ve.w_mask,bg=ve.prev,Ff=ve.strstart+Jh;let zp=Ch[Md+jh-1],Om=Ch[Md+jh];ve.prev_length>=ve.good_match&&(Od>>=2),ch>ve.lookahead&&(ch=ve.lookahead);do if(el=zu,Ch[el+jh]===Om&&Ch[el+jh-1]===zp&&Ch[el]===Ch[Md]&&Ch[++el]===Ch[Md+1]){Md+=2,el++;do;while(Ch[++Md]===Ch[++el]&&Ch[++Md]===Ch[++el]&&Ch[++Md]===Ch[++el]&&Ch[++Md]===Ch[++el]&&Ch[++Md]===Ch[++el]&&Ch[++Md]===Ch[++el]&&Ch[++Md]===Ch[++el]&&Ch[++Md]===Ch[++el]&&Md<Ff);if(Bd=Jh-(Ff-Md),Md=Ff-Jh,Bd>jh){if(ve.match_start=zu,jh=Bd,Bd>=ch)break;zp=Ch[Md+jh-1],Om=Ch[Md+jh]}}while((zu=bg[zu&tp])>Dp&&--Od!==0);return jh<=ve.lookahead?jh:ve.lookahead},wf=ve=>{const zu=ve.w_size;let el,Bd,Od;do{if(Bd=ve.window_size-ve.lookahead-ve.strstart,ve.strstart>=zu+(zu-lf)&&(ve.window.set(ve.window.subarray(zu,zu+zu-Bd),0),ve.match_start-=zu,ve.strstart-=zu,ve.block_start-=zu,ve.insert>ve.strstart&&(ve.insert=ve.strstart),qg(ve),Bd+=zu),ve.strm.avail_in===0)break;if(el=r0(ve.strm,ve.window,ve.strstart+ve.lookahead,Bd),ve.lookahead+=el,ve.lookahead+ve.insert>=3)for(Od=ve.strstart-ve.insert,ve.ins_h=ve.window[Od],ve.ins_h=vm(ve,ve.ins_h,ve.window[Od+1]);ve.insert&&(ve.ins_h=vm(ve,ve.ins_h,ve.window[Od+3-1]),ve.prev[Od&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=Od,Od++,ve.insert--,!(ve.lookahead+ve.insert<3)););}while(ve.lookahead<lf&&ve.strm.avail_in!==0)},Gm=(ve,zu)=>{let el,Bd,Od,Md=ve.pending_buf_size-5>ve.w_size?ve.w_size:ve.pending_buf_size-5,jh=0,ch=ve.strm.avail_in;do{if(el=65535,Od=ve.bi_valid+42>>3,ve.strm.avail_out<Od||(Od=ve.strm.avail_out-Od,Bd=ve.strstart-ve.block_start,el>Bd+ve.strm.avail_in&&(el=Bd+ve.strm.avail_in),el>Od&&(el=Od),el<Md&&(el===0&&zu!==Rg||zu===Eg||el!==Bd+ve.strm.avail_in)))break;jh=zu===Rg&&el===Bd+ve.strm.avail_in?1:0,vp(ve,0,0,jh),ve.pending_buf[ve.pending-4]=el,ve.pending_buf[ve.pending-3]=el>>8,ve.pending_buf[ve.pending-2]=~el,ve.pending_buf[ve.pending-1]=~el>>8,am(ve.strm),Bd&&(Bd>el&&(Bd=el),ve.strm.output.set(ve.window.subarray(ve.block_start,ve.block_start+Bd),ve.strm.next_out),ve.strm.next_out+=Bd,ve.strm.avail_out-=Bd,ve.strm.total_out+=Bd,ve.block_start+=Bd,el-=Bd),el&&(r0(ve.strm,ve.strm.output,ve.strm.next_out,el),ve.strm.next_out+=el,ve.strm.avail_out-=el,ve.strm.total_out+=el)}while(jh===0);return ch-=ve.strm.avail_in,ch&&(ch>=ve.w_size?(ve.matches=2,ve.window.set(ve.strm.input.subarray(ve.strm.next_in-ve.w_size,ve.strm.next_in),0),ve.strstart=ve.w_size,ve.insert=ve.strstart):(ve.window_size-ve.strstart<=ch&&(ve.strstart-=ve.w_size,ve.window.set(ve.window.subarray(ve.w_size,ve.w_size+ve.strstart),0),ve.matches<2&&ve.matches++,ve.insert>ve.strstart&&(ve.insert=ve.strstart)),ve.window.set(ve.strm.input.subarray(ve.strm.next_in-ch,ve.strm.next_in),ve.strstart),ve.strstart+=ch,ve.insert+=ch>ve.w_size-ve.insert?ve.w_size-ve.insert:ch),ve.block_start=ve.strstart),ve.high_water<ve.strstart&&(ve.high_water=ve.strstart),jh?4:zu!==Eg&&zu!==Rg&&ve.strm.avail_in===0&&ve.strstart===ve.block_start?2:(Od=ve.window_size-ve.strstart,ve.strm.avail_in>Od&&ve.block_start>=ve.w_size&&(ve.block_start-=ve.w_size,ve.strstart-=ve.w_size,ve.window.set(ve.window.subarray(ve.w_size,ve.w_size+ve.strstart),0),ve.matches<2&&ve.matches++,Od+=ve.w_size,ve.insert>ve.strstart&&(ve.insert=ve.strstart)),Od>ve.strm.avail_in&&(Od=ve.strm.avail_in),Od&&(r0(ve.strm,ve.window,ve.strstart,Od),ve.strstart+=Od,ve.insert+=Od>ve.w_size-ve.insert?ve.w_size-ve.insert:Od),ve.high_water<ve.strstart&&(ve.high_water=ve.strstart),Od=ve.bi_valid+42>>3,Od=ve.pending_buf_size-Od>65535?65535:ve.pending_buf_size-Od,Md=Od>ve.w_size?ve.w_size:Od,Bd=ve.strstart-ve.block_start,(Bd>=Md||(Bd||zu===Rg)&&zu!==Eg&&ve.strm.avail_in===0&&Bd<=Od)&&(el=Bd>Od?Od:Bd,jh=zu===Rg&&ve.strm.avail_in===0&&el===Bd?1:0,vp(ve,ve.block_start,el,jh),ve.block_start+=el,am(ve.strm)),jh?3:1)},h0=(ve,zu)=>{let el,Bd;for(;;){if(ve.lookahead<lf){if(wf(ve),ve.lookahead<lf&&zu===Eg)return 1;if(ve.lookahead===0)break}if(el=0,ve.lookahead>=3&&(ve.ins_h=vm(ve,ve.ins_h,ve.window[ve.strstart+3-1]),el=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),el!==0&&ve.strstart-el<=ve.w_size-lf&&(ve.match_length=M0(ve,el)),ve.match_length>=3)if(Bd=Zp(ve,ve.strstart-ve.match_start,ve.match_length-3),ve.lookahead-=ve.match_length,ve.match_length<=ve.max_lazy_match&&ve.lookahead>=3){ve.match_length--;do ve.strstart++,ve.ins_h=vm(ve,ve.ins_h,ve.window[ve.strstart+3-1]),el=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart;while(--ve.match_length!==0);ve.strstart++}else ve.strstart+=ve.match_length,ve.match_length=0,ve.ins_h=ve.window[ve.strstart],ve.ins_h=vm(ve,ve.ins_h,ve.window[ve.strstart+1]);else Bd=Zp(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++;if(Bd&&(Jg(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=ve.strstart<2?ve.strstart:2,zu===Rg?(Jg(ve,!0),ve.strm.avail_out===0?3:4):ve.sym_next&&(Jg(ve,!1),ve.strm.avail_out===0)?1:2},i0=(ve,zu)=>{let el,Bd,Od;for(;;){if(ve.lookahead<lf){if(wf(ve),ve.lookahead<lf&&zu===Eg)return 1;if(ve.lookahead===0)break}if(el=0,ve.lookahead>=3&&(ve.ins_h=vm(ve,ve.ins_h,ve.window[ve.strstart+3-1]),el=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),ve.prev_length=ve.match_length,ve.prev_match=ve.match_start,ve.match_length=2,el!==0&&ve.prev_length<ve.max_lazy_match&&ve.strstart-el<=ve.w_size-lf&&(ve.match_length=M0(ve,el),ve.match_length<=5&&(ve.strategy===$m||ve.match_length===3&&ve.strstart-ve.match_start>4096)&&(ve.match_length=2)),ve.prev_length>=3&&ve.match_length<=ve.prev_length){Od=ve.strstart+ve.lookahead-3,Bd=Zp(ve,ve.strstart-1-ve.prev_match,ve.prev_length-3),ve.lookahead-=ve.prev_length-1,ve.prev_length-=2;do++ve.strstart<=Od&&(ve.ins_h=vm(ve,ve.ins_h,ve.window[ve.strstart+3-1]),el=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart);while(--ve.prev_length!==0);if(ve.match_available=0,ve.match_length=2,ve.strstart++,Bd&&(Jg(ve,!1),ve.strm.avail_out===0))return 1}else if(ve.match_available){if(Bd=Zp(ve,0,ve.window[ve.strstart-1]),Bd&&Jg(ve,!1),ve.strstart++,ve.lookahead--,ve.strm.avail_out===0)return 1}else ve.match_available=1,ve.strstart++,ve.lookahead--}return ve.match_available&&(Bd=Zp(ve,0,ve.window[ve.strstart-1]),ve.match_available=0),ve.insert=ve.strstart<2?ve.strstart:2,zu===Rg?(Jg(ve,!0),ve.strm.avail_out===0?3:4):ve.sym_next&&(Jg(ve,!1),ve.strm.avail_out===0)?1:2};function Tm(ve,zu,el,Bd,Od){this.good_length=ve,this.max_lazy=zu,this.nice_length=el,this.max_chain=Bd,this.func=Od}const Vm=[new Tm(0,0,0,0,Gm),new Tm(4,4,8,4,h0),new Tm(4,5,16,8,h0),new Tm(4,6,32,32,h0),new Tm(4,4,16,16,i0),new Tm(8,16,32,32,i0),new Tm(8,16,128,128,i0),new Tm(8,32,128,256,i0),new Tm(32,128,258,1024,i0),new Tm(32,258,258,4096,i0)];function ym(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=cf,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Im(this.dyn_ltree),Im(this.dyn_dtree),Im(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Im(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Im(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const l0=ve=>{if(!ve)return 1;const zu=ve.state;return!zu||zu.strm!==ve||zu.status!==vf&&zu.status!==57&&zu.status!==69&&zu.status!==73&&zu.status!==91&&zu.status!==103&&zu.status!==uf&&zu.status!==Gf?1:0},R0=ve=>{if(l0(ve))return Hm(ve,Lg);ve.total_in=ve.total_out=0,ve.data_type=ip;const zu=ve.state;return zu.pending=0,zu.pending_out=0,zu.wrap<0&&(zu.wrap=-zu.wrap),zu.status=zu.wrap===2?57:zu.wrap?vf:uf,ve.adler=zu.wrap===2?0:1,zu.last_flush=-2,Cp(zu),eg},p0=ve=>{const zu=R0(ve);var el;return zu===eg&&((el=ve.state).window_size=2*el.w_size,Im(el.head),el.max_lazy_match=Vm[el.level].max_lazy,el.good_match=Vm[el.level].good_length,el.nice_match=Vm[el.level].nice_length,el.max_chain_length=Vm[el.level].max_chain,el.strstart=0,el.block_start=0,el.lookahead=0,el.insert=0,el.match_length=el.prev_length=2,el.match_available=0,el.ins_h=0),zu},j0=(ve,zu,el,Bd,Od,Md)=>{if(!ve)return Lg;let jh=1;if(zu===Lm&&(zu=6),Bd<0?(jh=0,Bd=-Bd):Bd>15&&(jh=2,Bd-=16),Od<1||Od>9||el!==cf||Bd<8||Bd>15||zu<0||zu>9||Md<0||Md>xh||Bd===8&&jh!==1)return Hm(ve,Lg);Bd===8&&(Bd=9);const ch=new ym;return ve.state=ch,ch.strm=ve,ch.status=vf,ch.wrap=jh,ch.gzhead=null,ch.w_bits=Bd,ch.w_size=1<<ch.w_bits,ch.w_mask=ch.w_size-1,ch.hash_bits=Od+7,ch.hash_size=1<<ch.hash_bits,ch.hash_mask=ch.hash_size-1,ch.hash_shift=~~((ch.hash_bits+3-1)/3),ch.window=new Uint8Array(2*ch.w_size),ch.head=new Uint16Array(ch.hash_size),ch.prev=new Uint16Array(ch.w_size),ch.lit_bufsize=1<<Od+6,ch.pending_buf_size=4*ch.lit_bufsize,ch.pending_buf=new Uint8Array(ch.pending_buf_size),ch.sym_buf=ch.lit_bufsize,ch.sym_end=3*(ch.lit_bufsize-1),ch.level=zu,ch.strategy=Md,ch.method=el,p0(ve)};var lg={deflateInit:(ve,zu)=>j0(ve,zu,cf,15,8,Fp),deflateInit2:j0,deflateReset:p0,deflateResetKeep:R0,deflateSetHeader:(ve,zu)=>l0(ve)||ve.state.wrap!==2?Lg:(ve.state.gzhead=zu,eg),deflate:(ve,zu)=>{if(l0(ve)||zu>fg||zu<0)return ve?Hm(ve,Lg):Lg;const el=ve.state;if(!ve.output||ve.avail_in!==0&&!ve.input||el.status===Gf&&zu!==Rg)return Hm(ve,ve.avail_out===0?Bm:Lg);const Bd=el.last_flush;if(el.last_flush=zu,el.pending!==0){if(am(ve),ve.avail_out===0)return el.last_flush=-1,eg}else if(ve.avail_in===0&&Vg(zu)<=Vg(Bd)&&zu!==Rg)return Hm(ve,Bm);if(el.status===Gf&&ve.avail_in!==0)return Hm(ve,Bm);if(el.status===vf&&el.wrap===0&&(el.status=uf),el.status===vf){let Od=cf+(el.w_bits-8<<4)<<8,Md=-1;if(Md=el.strategy>=_d||el.level<2?0:el.level<6?1:el.level===6?2:3,Od|=Md<<6,el.strstart!==0&&(Od|=32),Od+=31-Od%31,ff(el,Od),el.strstart!==0&&(ff(el,ve.adler>>>16),ff(el,65535&ve.adler)),ve.adler=1,el.status=uf,am(ve),el.pending!==0)return el.last_flush=-1,eg}if(el.status===57){if(ve.adler=0,pf(el,31),pf(el,139),pf(el,8),el.gzhead)pf(el,(el.gzhead.text?1:0)+(el.gzhead.hcrc?2:0)+(el.gzhead.extra?4:0)+(el.gzhead.name?8:0)+(el.gzhead.comment?16:0)),pf(el,255&el.gzhead.time),pf(el,el.gzhead.time>>8&255),pf(el,el.gzhead.time>>16&255),pf(el,el.gzhead.time>>24&255),pf(el,el.level===9?2:el.strategy>=_d||el.level<2?4:0),pf(el,255&el.gzhead.os),el.gzhead.extra&&el.gzhead.extra.length&&(pf(el,255&el.gzhead.extra.length),pf(el,el.gzhead.extra.length>>8&255)),el.gzhead.hcrc&&(ve.adler=rp(ve.adler,el.pending_buf,el.pending,0)),el.gzindex=0,el.status=69;else if(pf(el,0),pf(el,0),pf(el,0),pf(el,0),pf(el,0),pf(el,el.level===9?2:el.strategy>=_d||el.level<2?4:0),pf(el,3),el.status=uf,am(ve),el.pending!==0)return el.last_flush=-1,eg}if(el.status===69){if(el.gzhead.extra){let Od=el.pending,Md=(65535&el.gzhead.extra.length)-el.gzindex;for(;el.pending+Md>el.pending_buf_size;){let ch=el.pending_buf_size-el.pending;if(el.pending_buf.set(el.gzhead.extra.subarray(el.gzindex,el.gzindex+ch),el.pending),el.pending=el.pending_buf_size,el.gzhead.hcrc&&el.pending>Od&&(ve.adler=rp(ve.adler,el.pending_buf,el.pending-Od,Od)),el.gzindex+=ch,am(ve),el.pending!==0)return el.last_flush=-1,eg;Od=0,Md-=ch}let jh=new Uint8Array(el.gzhead.extra);el.pending_buf.set(jh.subarray(el.gzindex,el.gzindex+Md),el.pending),el.pending+=Md,el.gzhead.hcrc&&el.pending>Od&&(ve.adler=rp(ve.adler,el.pending_buf,el.pending-Od,Od)),el.gzindex=0}el.status=73}if(el.status===73){if(el.gzhead.name){let Od,Md=el.pending;do{if(el.pending===el.pending_buf_size){if(el.gzhead.hcrc&&el.pending>Md&&(ve.adler=rp(ve.adler,el.pending_buf,el.pending-Md,Md)),am(ve),el.pending!==0)return el.last_flush=-1,eg;Md=0}Od=el.gzindex<el.gzhead.name.length?255&el.gzhead.name.charCodeAt(el.gzindex++):0,pf(el,Od)}while(Od!==0);el.gzhead.hcrc&&el.pending>Md&&(ve.adler=rp(ve.adler,el.pending_buf,el.pending-Md,Md)),el.gzindex=0}el.status=91}if(el.status===91){if(el.gzhead.comment){let Od,Md=el.pending;do{if(el.pending===el.pending_buf_size){if(el.gzhead.hcrc&&el.pending>Md&&(ve.adler=rp(ve.adler,el.pending_buf,el.pending-Md,Md)),am(ve),el.pending!==0)return el.last_flush=-1,eg;Md=0}Od=el.gzindex<el.gzhead.comment.length?255&el.gzhead.comment.charCodeAt(el.gzindex++):0,pf(el,Od)}while(Od!==0);el.gzhead.hcrc&&el.pending>Md&&(ve.adler=rp(ve.adler,el.pending_buf,el.pending-Md,Md))}el.status=103}if(el.status===103){if(el.gzhead.hcrc){if(el.pending+2>el.pending_buf_size&&(am(ve),el.pending!==0))return el.last_flush=-1,eg;pf(el,255&ve.adler),pf(el,ve.adler>>8&255),ve.adler=0}if(el.status=uf,am(ve),el.pending!==0)return el.last_flush=-1,eg}if(ve.avail_in!==0||el.lookahead!==0||zu!==Eg&&el.status!==Gf){let Od=el.level===0?Gm(el,zu):el.strategy===_d?((Md,jh)=>{let ch;for(;;){if(Md.lookahead===0&&(wf(Md),Md.lookahead===0)){if(jh===Eg)return 1;break}if(Md.match_length=0,ch=Zp(Md,0,Md.window[Md.strstart]),Md.lookahead--,Md.strstart++,ch&&(Jg(Md,!1),Md.strm.avail_out===0))return 1}return Md.insert=0,jh===Rg?(Jg(Md,!0),Md.strm.avail_out===0?3:4):Md.sym_next&&(Jg(Md,!1),Md.strm.avail_out===0)?1:2})(el,zu):el.strategy===Zd?((Md,jh)=>{let ch,Dp,Ch,tp;const bg=Md.window;for(;;){if(Md.lookahead<=Jh){if(wf(Md),Md.lookahead<=Jh&&jh===Eg)return 1;if(Md.lookahead===0)break}if(Md.match_length=0,Md.lookahead>=3&&Md.strstart>0&&(Ch=Md.strstart-1,Dp=bg[Ch],Dp===bg[++Ch]&&Dp===bg[++Ch]&&Dp===bg[++Ch])){tp=Md.strstart+Jh;do;while(Dp===bg[++Ch]&&Dp===bg[++Ch]&&Dp===bg[++Ch]&&Dp===bg[++Ch]&&Dp===bg[++Ch]&&Dp===bg[++Ch]&&Dp===bg[++Ch]&&Dp===bg[++Ch]&&Ch<tp);Md.match_length=Jh-(tp-Ch),Md.match_length>Md.lookahead&&(Md.match_length=Md.lookahead)}if(Md.match_length>=3?(ch=Zp(Md,1,Md.match_length-3),Md.lookahead-=Md.match_length,Md.strstart+=Md.match_length,Md.match_length=0):(ch=Zp(Md,0,Md.window[Md.strstart]),Md.lookahead--,Md.strstart++),ch&&(Jg(Md,!1),Md.strm.avail_out===0))return 1}return Md.insert=0,jh===Rg?(Jg(Md,!0),Md.strm.avail_out===0?3:4):Md.sym_next&&(Jg(Md,!1),Md.strm.avail_out===0)?1:2})(el,zu):Vm[el.level].func(el,zu);if(Od!==3&&Od!==4||(el.status=Gf),Od===1||Od===3)return ve.avail_out===0&&(el.last_flush=-1),eg;if(Od===2&&(zu===Gg?kf(el):zu!==fg&&(vp(el,0,0,!1),zu===Hf&&(Im(el.head),el.lookahead===0&&(el.strstart=0,el.block_start=0,el.insert=0))),am(ve),ve.avail_out===0))return el.last_flush=-1,eg}return zu!==Rg?eg:el.wrap<=0?Wg:(el.wrap===2?(pf(el,255&ve.adler),pf(el,ve.adler>>8&255),pf(el,ve.adler>>16&255),pf(el,ve.adler>>24&255),pf(el,255&ve.total_in),pf(el,ve.total_in>>8&255),pf(el,ve.total_in>>16&255),pf(el,ve.total_in>>24&255)):(ff(el,ve.adler>>>16),ff(el,65535&ve.adler)),am(ve),el.wrap>0&&(el.wrap=-el.wrap),el.pending!==0?eg:Wg)},deflateEnd:ve=>{if(l0(ve))return Lg;const zu=ve.state.status;return ve.state=null,zu===uf?Hm(ve,$g):eg},deflateSetDictionary:(ve,zu)=>{let el=zu.length;if(l0(ve))return Lg;const Bd=ve.state,Od=Bd.wrap;if(Od===2||Od===1&&Bd.status!==vf||Bd.lookahead)return Lg;if(Od===1&&(ve.adler=Yd(ve.adler,zu,el,0)),Bd.wrap=0,el>=Bd.w_size){Od===0&&(Im(Bd.head),Bd.strstart=0,Bd.block_start=0,Bd.insert=0);let Dp=new Uint8Array(Bd.w_size);Dp.set(zu.subarray(el-Bd.w_size,el),0),zu=Dp,el=Bd.w_size}const Md=ve.avail_in,jh=ve.next_in,ch=ve.input;for(ve.avail_in=el,ve.next_in=0,ve.input=zu,wf(Bd);Bd.lookahead>=3;){let Dp=Bd.strstart,Ch=Bd.lookahead-2;do Bd.ins_h=vm(Bd,Bd.ins_h,Bd.window[Dp+3-1]),Bd.prev[Dp&Bd.w_mask]=Bd.head[Bd.ins_h],Bd.head[Bd.ins_h]=Dp,Dp++;while(--Ch);Bd.strstart=Dp,Bd.lookahead=2,wf(Bd)}return Bd.strstart+=Bd.lookahead,Bd.block_start=Bd.strstart,Bd.insert=Bd.lookahead,Bd.lookahead=0,Bd.match_length=Bd.prev_length=2,Bd.match_available=0,ve.next_in=jh,ve.input=ch,ve.avail_in=Md,Bd.wrap=Od,eg},deflateInfo:"pako deflate (from Nodeca project)"};const sm=(ve,zu)=>Object.prototype.hasOwnProperty.call(ve,zu);var Cg=function(ve){const zu=Array.prototype.slice.call(arguments,1);for(;zu.length;){const el=zu.shift();if(el){if(typeof el!="object")throw new TypeError(el+"must be non-object");for(const Bd in el)sm(el,Bd)&&(ve[Bd]=el[Bd])}}return ve},S0=ve=>{let zu=0;for(let Bd=0,Od=ve.length;Bd<Od;Bd++)zu+=ve[Bd].length;const el=new Uint8Array(zu);for(let Bd=0,Od=0,Md=ve.length;Bd<Md;Bd++){let jh=ve[Bd];el.set(jh,Od),Od+=jh.length}return el};let Kp=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Kp=!1}const rt=new Uint8Array(256);for(let ve=0;ve<256;ve++)rt[ve]=ve>=252?6:ve>=248?5:ve>=240?4:ve>=224?3:ve>=192?2:1;rt[254]=rt[254]=1;var Uu=ve=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(ve);let zu,el,Bd,Od,Md,jh=ve.length,ch=0;for(Od=0;Od<jh;Od++)el=ve.charCodeAt(Od),(64512&el)==55296&&Od+1<jh&&(Bd=ve.charCodeAt(Od+1),(64512&Bd)==56320&&(el=65536+(el-55296<<10)+(Bd-56320),Od++)),ch+=el<128?1:el<2048?2:el<65536?3:4;for(zu=new Uint8Array(ch),Md=0,Od=0;Md<ch;Od++)el=ve.charCodeAt(Od),(64512&el)==55296&&Od+1<jh&&(Bd=ve.charCodeAt(Od+1),(64512&Bd)==56320&&(el=65536+(el-55296<<10)+(Bd-56320),Od++)),el<128?zu[Md++]=el:el<2048?(zu[Md++]=192|el>>>6,zu[Md++]=128|63&el):el<65536?(zu[Md++]=224|el>>>12,zu[Md++]=128|el>>>6&63,zu[Md++]=128|63&el):(zu[Md++]=240|el>>>18,zu[Md++]=128|el>>>12&63,zu[Md++]=128|el>>>6&63,zu[Md++]=128|63&el);return zu},Vd=(ve,zu)=>{const el=zu||ve.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(ve.subarray(0,zu));let Bd,Od;const Md=new Array(2*el);for(Od=0,Bd=0;Bd<el;){let jh=ve[Bd++];if(jh<128){Md[Od++]=jh;continue}let ch=rt[jh];if(ch>4)Md[Od++]=65533,Bd+=ch-1;else{for(jh&=ch===2?31:ch===3?15:7;ch>1&&Bd<el;)jh=jh<<6|63&ve[Bd++],ch--;ch>1?Md[Od++]=65533:jh<65536?Md[Od++]=jh:(jh-=65536,Md[Od++]=55296|jh>>10&1023,Md[Od++]=56320|1023&jh)}}return((jh,ch)=>{if(ch<65534&&jh.subarray&&Kp)return String.fromCharCode.apply(null,jh.length===ch?jh:jh.subarray(0,ch));let Dp="";for(let Ch=0;Ch<ch;Ch++)Dp+=String.fromCharCode(jh[Ch]);return Dp})(Md,Od)},Eh=(ve,zu)=>{(zu=zu||ve.length)>ve.length&&(zu=ve.length);let el=zu-1;for(;el>=0&&(192&ve[el])==128;)el--;return el<0||el===0?zu:el+rt[ve[el]]>zu?el:zu},ph=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const jp=Object.prototype.toString,{Z_NO_FLUSH:_p,Z_SYNC_FLUSH:Gp,Z_FULL_FLUSH:of,Z_FINISH:Bp,Z_OK:rf,Z_STREAM_END:Rh,Z_DEFAULT_COMPRESSION:xf,Z_DEFAULT_STRATEGY:Ng,Z_DEFLATED:em}=yp;function Fm(ve){this.options=Cg({level:xf,method:em,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ng},ve||{});let zu=this.options;zu.raw&&zu.windowBits>0?zu.windowBits=-zu.windowBits:zu.gzip&&zu.windowBits>0&&zu.windowBits<16&&(zu.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ph,this.strm.avail_out=0;let el=lg.deflateInit2(this.strm,zu.level,zu.method,zu.windowBits,zu.memLevel,zu.strategy);if(el!==rf)throw new Error(lh[el]);if(zu.header&&lg.deflateSetHeader(this.strm,zu.header),zu.dictionary){let Bd;if(Bd=typeof zu.dictionary=="string"?Uu(zu.dictionary):jp.call(zu.dictionary)==="[object ArrayBuffer]"?new Uint8Array(zu.dictionary):zu.dictionary,el=lg.deflateSetDictionary(this.strm,Bd),el!==rf)throw new Error(lh[el]);this._dict_set=!0}}function Vf(ve,zu){const el=new Fm(zu);if(el.push(ve,!0),el.err)throw el.msg||lh[el.err];return el.result}Fm.prototype.push=function(ve,zu){const el=this.strm,Bd=this.options.chunkSize;let Od,Md;if(this.ended)return!1;for(Md=zu===~~zu?zu:zu===!0?Bp:_p,typeof ve=="string"?el.input=Uu(ve):jp.call(ve)==="[object ArrayBuffer]"?el.input=new Uint8Array(ve):el.input=ve,el.next_in=0,el.avail_in=el.input.length;;)if(el.avail_out===0&&(el.output=new Uint8Array(Bd),el.next_out=0,el.avail_out=Bd),(Md===Gp||Md===of)&&el.avail_out<=6)this.onData(el.output.subarray(0,el.next_out)),el.avail_out=0;else{if(Od=lg.deflate(el,Md),Od===Rh)return el.next_out>0&&this.onData(el.output.subarray(0,el.next_out)),Od=lg.deflateEnd(this.strm),this.onEnd(Od),this.ended=!0,Od===rf;if(el.avail_out!==0){if(Md>0&&el.next_out>0)this.onData(el.output.subarray(0,el.next_out)),el.avail_out=0;else if(el.avail_in===0)break}else this.onData(el.output)}return!0},Fm.prototype.onData=function(ve){this.chunks.push(ve)},Fm.prototype.onEnd=function(ve){ve===rf&&(this.result=S0(this.chunks)),this.chunks=[],this.err=ve,this.msg=this.strm.msg};var Yg={Deflate:Fm,deflate:Vf,deflateRaw:function(ve,zu){return(zu=zu||{}).raw=!0,Vf(ve,zu)},gzip:function(ve,zu){return(zu=zu||{}).gzip=!0,Vf(ve,zu)}};const $f=16209;var Kg=function(ve,zu){let el,Bd,Od,Md,jh,ch,Dp,Ch,tp,bg,Ff,zp,Om,Zg,Qf,hm,mg,Np,jf,rm,Sf,lm,Sg,pg;const Bg=ve.state;el=ve.next_in,Sg=ve.input,Bd=el+(ve.avail_in-5),Od=ve.next_out,pg=ve.output,Md=Od-(zu-ve.avail_out),jh=Od+(ve.avail_out-257),ch=Bg.dmax,Dp=Bg.wsize,Ch=Bg.whave,tp=Bg.wnext,bg=Bg.window,Ff=Bg.hold,zp=Bg.bits,Om=Bg.lencode,Zg=Bg.distcode,Qf=(1<<Bg.lenbits)-1,hm=(1<<Bg.distbits)-1;e:do{zp<15&&(Ff+=Sg[el++]<<zp,zp+=8,Ff+=Sg[el++]<<zp,zp+=8),mg=Om[Ff&Qf];t:for(;;){if(Np=mg>>>24,Ff>>>=Np,zp-=Np,Np=mg>>>16&255,Np===0)pg[Od++]=65535&mg;else{if(!(16&Np)){if(64&Np){if(32&Np){Bg.mode=16191;break e}ve.msg="invalid literal/length code",Bg.mode=$f;break e}mg=Om[(65535&mg)+(Ff&(1<<Np)-1)];continue t}for(jf=65535&mg,Np&=15,Np&&(zp<Np&&(Ff+=Sg[el++]<<zp,zp+=8),jf+=Ff&(1<<Np)-1,Ff>>>=Np,zp-=Np),zp<15&&(Ff+=Sg[el++]<<zp,zp+=8,Ff+=Sg[el++]<<zp,zp+=8),mg=Zg[Ff&hm];;){if(Np=mg>>>24,Ff>>>=Np,zp-=Np,Np=mg>>>16&255,16&Np){if(rm=65535&mg,Np&=15,zp<Np&&(Ff+=Sg[el++]<<zp,zp+=8,zp<Np&&(Ff+=Sg[el++]<<zp,zp+=8)),rm+=Ff&(1<<Np)-1,rm>ch){ve.msg="invalid distance too far back",Bg.mode=$f;break e}if(Ff>>>=Np,zp-=Np,Np=Od-Md,rm>Np){if(Np=rm-Np,Np>Ch&&Bg.sane){ve.msg="invalid distance too far back",Bg.mode=$f;break e}if(Sf=0,lm=bg,tp===0){if(Sf+=Dp-Np,Np<jf){jf-=Np;do pg[Od++]=bg[Sf++];while(--Np);Sf=Od-rm,lm=pg}}else if(tp<Np){if(Sf+=Dp+tp-Np,Np-=tp,Np<jf){jf-=Np;do pg[Od++]=bg[Sf++];while(--Np);if(Sf=0,tp<jf){Np=tp,jf-=Np;do pg[Od++]=bg[Sf++];while(--Np);Sf=Od-rm,lm=pg}}}else if(Sf+=tp-Np,Np<jf){jf-=Np;do pg[Od++]=bg[Sf++];while(--Np);Sf=Od-rm,lm=pg}for(;jf>2;)pg[Od++]=lm[Sf++],pg[Od++]=lm[Sf++],pg[Od++]=lm[Sf++],jf-=3;jf&&(pg[Od++]=lm[Sf++],jf>1&&(pg[Od++]=lm[Sf++]))}else{Sf=Od-rm;do pg[Od++]=pg[Sf++],pg[Od++]=pg[Sf++],pg[Od++]=pg[Sf++],jf-=3;while(jf>2);jf&&(pg[Od++]=pg[Sf++],jf>1&&(pg[Od++]=pg[Sf++]))}break}if(64&Np){ve.msg="invalid distance code",Bg.mode=$f;break e}mg=Zg[(65535&mg)+(Ff&(1<<Np)-1)]}}break}}while(el<Bd&&Od<jh);jf=zp>>3,el-=jf,zp-=jf<<3,Ff&=(1<<zp)-1,ve.next_in=el,ve.next_out=Od,ve.avail_in=el<Bd?Bd-el+5:5-(el-Bd),ve.avail_out=Od<jh?jh-Od+257:257-(Od-jh),Bg.hold=Ff,Bg.bits=zp};const If=15,Mm=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),dd=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),f=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),E=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var W=(ve,zu,el,Bd,Od,Md,jh,ch)=>{const Dp=ch.bits;let Ch,tp,bg,Ff,zp,Om,Zg=0,Qf=0,hm=0,mg=0,Np=0,jf=0,rm=0,Sf=0,lm=0,Sg=0,pg=null;const Bg=new Uint16Array(16),v0=new Uint16Array(16);let nv,Cm,_v,ov=null;for(Zg=0;Zg<=If;Zg++)Bg[Zg]=0;for(Qf=0;Qf<Bd;Qf++)Bg[zu[el+Qf]]++;for(Np=Dp,mg=If;mg>=1&&Bg[mg]===0;mg--);if(Np>mg&&(Np=mg),mg===0)return Od[Md++]=20971520,Od[Md++]=20971520,ch.bits=1,0;for(hm=1;hm<mg&&Bg[hm]===0;hm++);for(Np<hm&&(Np=hm),Sf=1,Zg=1;Zg<=If;Zg++)if(Sf<<=1,Sf-=Bg[Zg],Sf<0)return-1;if(Sf>0&&(ve===0||mg!==1))return-1;for(v0[1]=0,Zg=1;Zg<If;Zg++)v0[Zg+1]=v0[Zg]+Bg[Zg];for(Qf=0;Qf<Bd;Qf++)zu[el+Qf]!==0&&(jh[v0[zu[el+Qf]]++]=Qf);if(ve===0?(pg=ov=jh,Om=20):ve===1?(pg=Mm,ov=dd,Om=257):(pg=f,ov=E,Om=0),Sg=0,Qf=0,Zg=hm,zp=Md,jf=Np,rm=0,bg=-1,lm=1<<Np,Ff=lm-1,ve===1&&lm>852||ve===2&&lm>592)return 1;for(;;){nv=Zg-rm,jh[Qf]+1<Om?(Cm=0,_v=jh[Qf]):jh[Qf]>=Om?(Cm=ov[jh[Qf]-Om],_v=pg[jh[Qf]-Om]):(Cm=96,_v=0),Ch=1<<Zg-rm,tp=1<<jf,hm=tp;do tp-=Ch,Od[zp+(Sg>>rm)+tp]=nv<<24|Cm<<16|_v;while(tp!==0);for(Ch=1<<Zg-1;Sg&Ch;)Ch>>=1;if(Ch!==0?(Sg&=Ch-1,Sg+=Ch):Sg=0,Qf++,--Bg[Zg]===0){if(Zg===mg)break;Zg=zu[el+jh[Qf]]}if(Zg>Np&&(Sg&Ff)!==bg){for(rm===0&&(rm=Np),zp+=hm,jf=Zg-rm,Sf=1<<jf;jf+rm<mg&&(Sf-=Bg[jf+rm],!(Sf<=0));)jf++,Sf<<=1;if(lm+=1<<jf,ve===1&&lm>852||ve===2&&lm>592)return 1;bg=Sg&Ff,Od[bg]=Np<<24|jf<<16|zp-Md}}return Sg!==0&&(Od[zp+Sg]=Zg-rm<<24|64<<16),ch.bits=Np,0};const{Z_FINISH:Q,Z_BLOCK:yl,Z_TREES:Ln,Z_OK:Cl,Z_STREAM_END:Al,Z_NEED_DICT:vl,Z_STREAM_ERROR:Fl,Z_DATA_ERROR:Ol,Z_MEM_ERROR:mu,Z_BUF_ERROR:Xl,Z_DEFLATED:Wl}=yp,hu=16180,Jl=16190,Gu=16191,Zu=16192,rd=16194,wd=16199,gd=16200,jd=16206,Qd=16209,ih=ve=>(ve>>>24&255)+(ve>>>8&65280)+((65280&ve)<<8)+((255&ve)<<24);function Hl(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Iu=ve=>{if(!ve)return 1;const zu=ve.state;return!zu||zu.strm!==ve||zu.mode<hu||zu.mode>16211?1:0},Fd=ve=>{if(Iu(ve))return Fl;const zu=ve.state;return ve.total_in=ve.total_out=zu.total=0,ve.msg="",zu.wrap&&(ve.adler=1&zu.wrap),zu.mode=hu,zu.last=0,zu.havedict=0,zu.flags=-1,zu.dmax=32768,zu.head=null,zu.hold=0,zu.bits=0,zu.lencode=zu.lendyn=new Int32Array(852),zu.distcode=zu.distdyn=new Int32Array(592),zu.sane=1,zu.back=-1,Cl},Ud=ve=>{if(Iu(ve))return Fl;const zu=ve.state;return zu.wsize=0,zu.whave=0,zu.wnext=0,Fd(ve)},eh=(ve,zu)=>{let el;if(Iu(ve))return Fl;const Bd=ve.state;return zu<0?(el=0,zu=-zu):(el=5+(zu>>4),zu<48&&(zu&=15)),zu&&(zu<8||zu>15)?Fl:(Bd.window!==null&&Bd.wbits!==zu&&(Bd.window=null),Bd.wrap=el,Bd.wbits=zu,Ud(ve))},Sh=(ve,zu)=>{if(!ve)return Fl;const el=new Hl;ve.state=el,el.strm=ve,el.window=null,el.mode=hu;const Bd=eh(ve,zu);return Bd!==Cl&&(ve.state=null),Bd};let Lh,Ah,yh=!0;const Nh=ve=>{if(yh){Lh=new Int32Array(512),Ah=new Int32Array(32);let zu=0;for(;zu<144;)ve.lens[zu++]=8;for(;zu<256;)ve.lens[zu++]=9;for(;zu<280;)ve.lens[zu++]=7;for(;zu<288;)ve.lens[zu++]=8;for(W(1,ve.lens,0,288,Lh,0,ve.work,{bits:9}),zu=0;zu<32;)ve.lens[zu++]=5;W(2,ve.lens,0,32,Ah,0,ve.work,{bits:5}),yh=!1}ve.lencode=Lh,ve.lenbits=9,ve.distcode=Ah,ve.distbits=5},sh=(ve,zu,el,Bd)=>{let Od;const Md=ve.state;return Md.window===null&&(Md.wsize=1<<Md.wbits,Md.wnext=0,Md.whave=0,Md.window=new Uint8Array(Md.wsize)),Bd>=Md.wsize?(Md.window.set(zu.subarray(el-Md.wsize,el),0),Md.wnext=0,Md.whave=Md.wsize):(Od=Md.wsize-Md.wnext,Od>Bd&&(Od=Bd),Md.window.set(zu.subarray(el-Bd,el-Bd+Od),Md.wnext),(Bd-=Od)?(Md.window.set(zu.subarray(el-Bd,el),0),Md.wnext=Bd,Md.whave=Md.wsize):(Md.wnext+=Od,Md.wnext===Md.wsize&&(Md.wnext=0),Md.whave<Md.wsize&&(Md.whave+=Od))),0};var Th={inflateReset:Ud,inflateReset2:eh,inflateResetKeep:Fd,inflateInit:ve=>Sh(ve,15),inflateInit2:Sh,inflate:(ve,zu)=>{let el,Bd,Od,Md,jh,ch,Dp,Ch,tp,bg,Ff,zp,Om,Zg,Qf,hm,mg,Np,jf,rm,Sf,lm,Sg=0;const pg=new Uint8Array(4);let Bg,v0;const nv=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Iu(ve)||!ve.output||!ve.input&&ve.avail_in!==0)return Fl;el=ve.state,el.mode===Gu&&(el.mode=Zu),jh=ve.next_out,Od=ve.output,Dp=ve.avail_out,Md=ve.next_in,Bd=ve.input,ch=ve.avail_in,Ch=el.hold,tp=el.bits,bg=ch,Ff=Dp,lm=Cl;e:for(;;)switch(el.mode){case hu:if(el.wrap===0){el.mode=Zu;break}for(;tp<16;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}if(2&el.wrap&&Ch===35615){el.wbits===0&&(el.wbits=15),el.check=0,pg[0]=255&Ch,pg[1]=Ch>>>8&255,el.check=rp(el.check,pg,2,0),Ch=0,tp=0,el.mode=16181;break}if(el.head&&(el.head.done=!1),!(1&el.wrap)||(((255&Ch)<<8)+(Ch>>8))%31){ve.msg="incorrect header check",el.mode=Qd;break}if((15&Ch)!==Wl){ve.msg="unknown compression method",el.mode=Qd;break}if(Ch>>>=4,tp-=4,Sf=8+(15&Ch),el.wbits===0&&(el.wbits=Sf),Sf>15||Sf>el.wbits){ve.msg="invalid window size",el.mode=Qd;break}el.dmax=1<<el.wbits,el.flags=0,ve.adler=el.check=1,el.mode=512&Ch?16189:Gu,Ch=0,tp=0;break;case 16181:for(;tp<16;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}if(el.flags=Ch,(255&el.flags)!==Wl){ve.msg="unknown compression method",el.mode=Qd;break}if(57344&el.flags){ve.msg="unknown header flags set",el.mode=Qd;break}el.head&&(el.head.text=Ch>>8&1),512&el.flags&&4&el.wrap&&(pg[0]=255&Ch,pg[1]=Ch>>>8&255,el.check=rp(el.check,pg,2,0)),Ch=0,tp=0,el.mode=16182;case 16182:for(;tp<32;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}el.head&&(el.head.time=Ch),512&el.flags&&4&el.wrap&&(pg[0]=255&Ch,pg[1]=Ch>>>8&255,pg[2]=Ch>>>16&255,pg[3]=Ch>>>24&255,el.check=rp(el.check,pg,4,0)),Ch=0,tp=0,el.mode=16183;case 16183:for(;tp<16;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}el.head&&(el.head.xflags=255&Ch,el.head.os=Ch>>8),512&el.flags&&4&el.wrap&&(pg[0]=255&Ch,pg[1]=Ch>>>8&255,el.check=rp(el.check,pg,2,0)),Ch=0,tp=0,el.mode=16184;case 16184:if(1024&el.flags){for(;tp<16;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}el.length=Ch,el.head&&(el.head.extra_len=Ch),512&el.flags&&4&el.wrap&&(pg[0]=255&Ch,pg[1]=Ch>>>8&255,el.check=rp(el.check,pg,2,0)),Ch=0,tp=0}else el.head&&(el.head.extra=null);el.mode=16185;case 16185:if(1024&el.flags&&(zp=el.length,zp>ch&&(zp=ch),zp&&(el.head&&(Sf=el.head.extra_len-el.length,el.head.extra||(el.head.extra=new Uint8Array(el.head.extra_len)),el.head.extra.set(Bd.subarray(Md,Md+zp),Sf)),512&el.flags&&4&el.wrap&&(el.check=rp(el.check,Bd,zp,Md)),ch-=zp,Md+=zp,el.length-=zp),el.length))break e;el.length=0,el.mode=16186;case 16186:if(2048&el.flags){if(ch===0)break e;zp=0;do Sf=Bd[Md+zp++],el.head&&Sf&&el.length<65536&&(el.head.name+=String.fromCharCode(Sf));while(Sf&&zp<ch);if(512&el.flags&&4&el.wrap&&(el.check=rp(el.check,Bd,zp,Md)),ch-=zp,Md+=zp,Sf)break e}else el.head&&(el.head.name=null);el.length=0,el.mode=16187;case 16187:if(4096&el.flags){if(ch===0)break e;zp=0;do Sf=Bd[Md+zp++],el.head&&Sf&&el.length<65536&&(el.head.comment+=String.fromCharCode(Sf));while(Sf&&zp<ch);if(512&el.flags&&4&el.wrap&&(el.check=rp(el.check,Bd,zp,Md)),ch-=zp,Md+=zp,Sf)break e}else el.head&&(el.head.comment=null);el.mode=16188;case 16188:if(512&el.flags){for(;tp<16;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}if(4&el.wrap&&Ch!==(65535&el.check)){ve.msg="header crc mismatch",el.mode=Qd;break}Ch=0,tp=0}el.head&&(el.head.hcrc=el.flags>>9&1,el.head.done=!0),ve.adler=el.check=0,el.mode=Gu;break;case 16189:for(;tp<32;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}ve.adler=el.check=ih(Ch),Ch=0,tp=0,el.mode=Jl;case Jl:if(el.havedict===0)return ve.next_out=jh,ve.avail_out=Dp,ve.next_in=Md,ve.avail_in=ch,el.hold=Ch,el.bits=tp,vl;ve.adler=el.check=1,el.mode=Gu;case Gu:if(zu===yl||zu===Ln)break e;case Zu:if(el.last){Ch>>>=7&tp,tp-=7&tp,el.mode=jd;break}for(;tp<3;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}switch(el.last=1&Ch,Ch>>>=1,tp-=1,3&Ch){case 0:el.mode=16193;break;case 1:if(Nh(el),el.mode=wd,zu===Ln){Ch>>>=2,tp-=2;break e}break;case 2:el.mode=16196;break;case 3:ve.msg="invalid block type",el.mode=Qd}Ch>>>=2,tp-=2;break;case 16193:for(Ch>>>=7&tp,tp-=7&tp;tp<32;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}if((65535&Ch)!=(Ch>>>16^65535)){ve.msg="invalid stored block lengths",el.mode=Qd;break}if(el.length=65535&Ch,Ch=0,tp=0,el.mode=rd,zu===Ln)break e;case rd:el.mode=16195;case 16195:if(zp=el.length,zp){if(zp>ch&&(zp=ch),zp>Dp&&(zp=Dp),zp===0)break e;Od.set(Bd.subarray(Md,Md+zp),jh),ch-=zp,Md+=zp,Dp-=zp,jh+=zp,el.length-=zp;break}el.mode=Gu;break;case 16196:for(;tp<14;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}if(el.nlen=257+(31&Ch),Ch>>>=5,tp-=5,el.ndist=1+(31&Ch),Ch>>>=5,tp-=5,el.ncode=4+(15&Ch),Ch>>>=4,tp-=4,el.nlen>286||el.ndist>30){ve.msg="too many length or distance symbols",el.mode=Qd;break}el.have=0,el.mode=16197;case 16197:for(;el.have<el.ncode;){for(;tp<3;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}el.lens[nv[el.have++]]=7&Ch,Ch>>>=3,tp-=3}for(;el.have<19;)el.lens[nv[el.have++]]=0;if(el.lencode=el.lendyn,el.lenbits=7,Bg={bits:el.lenbits},lm=W(0,el.lens,0,19,el.lencode,0,el.work,Bg),el.lenbits=Bg.bits,lm){ve.msg="invalid code lengths set",el.mode=Qd;break}el.have=0,el.mode=16198;case 16198:for(;el.have<el.nlen+el.ndist;){for(;Sg=el.lencode[Ch&(1<<el.lenbits)-1],Qf=Sg>>>24,hm=Sg>>>16&255,mg=65535&Sg,!(Qf<=tp);){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}if(mg<16)Ch>>>=Qf,tp-=Qf,el.lens[el.have++]=mg;else{if(mg===16){for(v0=Qf+2;tp<v0;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}if(Ch>>>=Qf,tp-=Qf,el.have===0){ve.msg="invalid bit length repeat",el.mode=Qd;break}Sf=el.lens[el.have-1],zp=3+(3&Ch),Ch>>>=2,tp-=2}else if(mg===17){for(v0=Qf+3;tp<v0;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}Ch>>>=Qf,tp-=Qf,Sf=0,zp=3+(7&Ch),Ch>>>=3,tp-=3}else{for(v0=Qf+7;tp<v0;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}Ch>>>=Qf,tp-=Qf,Sf=0,zp=11+(127&Ch),Ch>>>=7,tp-=7}if(el.have+zp>el.nlen+el.ndist){ve.msg="invalid bit length repeat",el.mode=Qd;break}for(;zp--;)el.lens[el.have++]=Sf}}if(el.mode===Qd)break;if(el.lens[256]===0){ve.msg="invalid code -- missing end-of-block",el.mode=Qd;break}if(el.lenbits=9,Bg={bits:el.lenbits},lm=W(1,el.lens,0,el.nlen,el.lencode,0,el.work,Bg),el.lenbits=Bg.bits,lm){ve.msg="invalid literal/lengths set",el.mode=Qd;break}if(el.distbits=6,el.distcode=el.distdyn,Bg={bits:el.distbits},lm=W(2,el.lens,el.nlen,el.ndist,el.distcode,0,el.work,Bg),el.distbits=Bg.bits,lm){ve.msg="invalid distances set",el.mode=Qd;break}if(el.mode=wd,zu===Ln)break e;case wd:el.mode=gd;case gd:if(ch>=6&&Dp>=258){ve.next_out=jh,ve.avail_out=Dp,ve.next_in=Md,ve.avail_in=ch,el.hold=Ch,el.bits=tp,Kg(ve,Ff),jh=ve.next_out,Od=ve.output,Dp=ve.avail_out,Md=ve.next_in,Bd=ve.input,ch=ve.avail_in,Ch=el.hold,tp=el.bits,el.mode===Gu&&(el.back=-1);break}for(el.back=0;Sg=el.lencode[Ch&(1<<el.lenbits)-1],Qf=Sg>>>24,hm=Sg>>>16&255,mg=65535&Sg,!(Qf<=tp);){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}if(hm&&!(240&hm)){for(Np=Qf,jf=hm,rm=mg;Sg=el.lencode[rm+((Ch&(1<<Np+jf)-1)>>Np)],Qf=Sg>>>24,hm=Sg>>>16&255,mg=65535&Sg,!(Np+Qf<=tp);){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}Ch>>>=Np,tp-=Np,el.back+=Np}if(Ch>>>=Qf,tp-=Qf,el.back+=Qf,el.length=mg,hm===0){el.mode=16205;break}if(32&hm){el.back=-1,el.mode=Gu;break}if(64&hm){ve.msg="invalid literal/length code",el.mode=Qd;break}el.extra=15&hm,el.mode=16201;case 16201:if(el.extra){for(v0=el.extra;tp<v0;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}el.length+=Ch&(1<<el.extra)-1,Ch>>>=el.extra,tp-=el.extra,el.back+=el.extra}el.was=el.length,el.mode=16202;case 16202:for(;Sg=el.distcode[Ch&(1<<el.distbits)-1],Qf=Sg>>>24,hm=Sg>>>16&255,mg=65535&Sg,!(Qf<=tp);){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}if(!(240&hm)){for(Np=Qf,jf=hm,rm=mg;Sg=el.distcode[rm+((Ch&(1<<Np+jf)-1)>>Np)],Qf=Sg>>>24,hm=Sg>>>16&255,mg=65535&Sg,!(Np+Qf<=tp);){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}Ch>>>=Np,tp-=Np,el.back+=Np}if(Ch>>>=Qf,tp-=Qf,el.back+=Qf,64&hm){ve.msg="invalid distance code",el.mode=Qd;break}el.offset=mg,el.extra=15&hm,el.mode=16203;case 16203:if(el.extra){for(v0=el.extra;tp<v0;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}el.offset+=Ch&(1<<el.extra)-1,Ch>>>=el.extra,tp-=el.extra,el.back+=el.extra}if(el.offset>el.dmax){ve.msg="invalid distance too far back",el.mode=Qd;break}el.mode=16204;case 16204:if(Dp===0)break e;if(zp=Ff-Dp,el.offset>zp){if(zp=el.offset-zp,zp>el.whave&&el.sane){ve.msg="invalid distance too far back",el.mode=Qd;break}zp>el.wnext?(zp-=el.wnext,Om=el.wsize-zp):Om=el.wnext-zp,zp>el.length&&(zp=el.length),Zg=el.window}else Zg=Od,Om=jh-el.offset,zp=el.length;zp>Dp&&(zp=Dp),Dp-=zp,el.length-=zp;do Od[jh++]=Zg[Om++];while(--zp);el.length===0&&(el.mode=gd);break;case 16205:if(Dp===0)break e;Od[jh++]=el.length,Dp--,el.mode=gd;break;case jd:if(el.wrap){for(;tp<32;){if(ch===0)break e;ch--,Ch|=Bd[Md++]<<tp,tp+=8}if(Ff-=Dp,ve.total_out+=Ff,el.total+=Ff,4&el.wrap&&Ff&&(ve.adler=el.check=el.flags?rp(el.check,Od,Ff,jh-Ff):Yd(el.check,Od,Ff,jh-Ff)),Ff=Dp,4&el.wrap&&(el.flags?Ch:ih(Ch))!==el.check){ve.msg="incorrect data check",el.mode=Qd;break}Ch=0,tp=0}el.mode=16207;case 16207:if(el.wrap&&el.flags){for(;tp<32;){if(ch===0)break e;ch--,Ch+=Bd[Md++]<<tp,tp+=8}if(4&el.wrap&&Ch!==(4294967295&el.total)){ve.msg="incorrect length check",el.mode=Qd;break}Ch=0,tp=0}el.mode=16208;case 16208:lm=Al;break e;case Qd:lm=Ol;break e;case 16210:return mu;default:return Fl}return ve.next_out=jh,ve.avail_out=Dp,ve.next_in=Md,ve.avail_in=ch,el.hold=Ch,el.bits=tp,(el.wsize||Ff!==ve.avail_out&&el.mode<Qd&&(el.mode<jd||zu!==Q))&&sh(ve,ve.output,ve.next_out,Ff-ve.avail_out),bg-=ve.avail_in,Ff-=ve.avail_out,ve.total_in+=bg,ve.total_out+=Ff,el.total+=Ff,4&el.wrap&&Ff&&(ve.adler=el.check=el.flags?rp(el.check,Od,Ff,ve.next_out-Ff):Yd(el.check,Od,Ff,ve.next_out-Ff)),ve.data_type=el.bits+(el.last?64:0)+(el.mode===Gu?128:0)+(el.mode===wd||el.mode===rd?256:0),(bg===0&&Ff===0||zu===Q)&&lm===Cl&&(lm=Xl),lm},inflateEnd:ve=>{if(Iu(ve))return Fl;let zu=ve.state;return zu.window&&(zu.window=null),ve.state=null,Cl},inflateGetHeader:(ve,zu)=>{if(Iu(ve))return Fl;const el=ve.state;return 2&el.wrap?(el.head=zu,zu.done=!1,Cl):Fl},inflateSetDictionary:(ve,zu)=>{const el=zu.length;let Bd,Od,Md;return Iu(ve)?Fl:(Bd=ve.state,Bd.wrap!==0&&Bd.mode!==Jl?Fl:Bd.mode===Jl&&(Od=1,Od=Yd(Od,zu,el,0),Od!==Bd.check)?Ol:(Md=sh(ve,zu,el,el),Md?(Bd.mode=16210,mu):(Bd.havedict=1,Cl)))},inflateInfo:"pako inflate (from Nodeca project)"},dp=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const $h=Object.prototype.toString,{Z_NO_FLUSH:ap,Z_FINISH:Yh,Z_OK:Mh,Z_STREAM_END:pp,Z_NEED_DICT:Ip,Z_STREAM_ERROR:gp,Z_DATA_ERROR:Xh,Z_MEM_ERROR:Qp}=yp;function Wp(ve){this.options=Cg({chunkSize:65536,windowBits:15,to:""},ve||{});const zu=this.options;zu.raw&&zu.windowBits>=0&&zu.windowBits<16&&(zu.windowBits=-zu.windowBits,zu.windowBits===0&&(zu.windowBits=-15)),!(zu.windowBits>=0&&zu.windowBits<16)||ve&&ve.windowBits||(zu.windowBits+=32),zu.windowBits>15&&zu.windowBits<48&&(15&zu.windowBits||(zu.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ph,this.strm.avail_out=0;let el=Th.inflateInit2(this.strm,zu.windowBits);if(el!==Mh)throw new Error(lh[el]);if(this.header=new dp,Th.inflateGetHeader(this.strm,this.header),zu.dictionary&&(typeof zu.dictionary=="string"?zu.dictionary=Uu(zu.dictionary):$h.call(zu.dictionary)==="[object ArrayBuffer]"&&(zu.dictionary=new Uint8Array(zu.dictionary)),zu.raw&&(el=Th.inflateSetDictionary(this.strm,zu.dictionary),el!==Mh)))throw new Error(lh[el])}function $p(ve,zu){const el=new Wp(zu);if(el.push(ve),el.err)throw el.msg||lh[el.err];return el.result}Wp.prototype.push=function(ve,zu){const el=this.strm,Bd=this.options.chunkSize,Od=this.options.dictionary;let Md,jh,ch;if(this.ended)return!1;for(jh=zu===~~zu?zu:zu===!0?Yh:ap,$h.call(ve)==="[object ArrayBuffer]"?el.input=new Uint8Array(ve):el.input=ve,el.next_in=0,el.avail_in=el.input.length;;){for(el.avail_out===0&&(el.output=new Uint8Array(Bd),el.next_out=0,el.avail_out=Bd),Md=Th.inflate(el,jh),Md===Ip&&Od&&(Md=Th.inflateSetDictionary(el,Od),Md===Mh?Md=Th.inflate(el,jh):Md===Xh&&(Md=Ip));el.avail_in>0&&Md===pp&&el.state.wrap>0&&ve[el.next_in]!==0;)Th.inflateReset(el),Md=Th.inflate(el,jh);switch(Md){case gp:case Xh:case Ip:case Qp:return this.onEnd(Md),this.ended=!0,!1}if(ch=el.avail_out,el.next_out&&(el.avail_out===0||Md===pp))if(this.options.to==="string"){let Dp=Eh(el.output,el.next_out),Ch=el.next_out-Dp,tp=Vd(el.output,Dp);el.next_out=Ch,el.avail_out=Bd-Ch,Ch&&el.output.set(el.output.subarray(Dp,Dp+Ch),0),this.onData(tp)}else this.onData(el.output.length===el.next_out?el.output:el.output.subarray(0,el.next_out));if(Md!==Mh||ch!==0){if(Md===pp)return Md=Th.inflateEnd(this.strm),this.onEnd(Md),this.ended=!0,!0;if(el.avail_in===0)break}}return!0},Wp.prototype.onData=function(ve){this.chunks.push(ve)},Wp.prototype.onEnd=function(ve){ve===Mh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S0(this.chunks)),this.chunks=[],this.err=ve,this.msg=this.strm.msg};var Hp={Inflate:Wp,inflate:$p,inflateRaw:function(ve,zu){return(zu=zu||{}).raw=!0,$p(ve,zu)},ungzip:$p};const{Deflate:Vp,deflate:Op,deflateRaw:Jp,gzip:Df}=Yg,{Inflate:tm,inflate:og,inflateRaw:tg,ungzip:Zf}=Hp;var Xf=Vp,Nf=Op,ag=Jp,vg=Df,Pg=tm,cg=og,kg=tg,Bf=Zf,Tg=yp,gg={Deflate:Vp,deflate:Op,deflateRaw:Jp,gzip:Df,Inflate:tm,inflate:og,inflateRaw:tg,ungzip:Zf,constants:yp}},99:(n,h,s)=>{s.r(h),s.d(h,{Cylinder:()=>V,Sphere:()=>M,Triangle:()=>Y});var _=s(529);class M{constructor(zn={x:0,y:0,z:0},Et=0){this.center=new _.Vector3(zn.x,zn.y,zn.z),this.radius=Et}set(zn,Et){return this.center.copy(zn),this.radius=Et,this}copy(zn){return this.center.copy(zn.center),this.radius=zn.radius,this}applyMatrix4(zn){return this.center.applyMatrix4(zn),this.radius=this.radius*zn.getMaxScaleOnAxis(),this}translate(zn){return this.center.add(zn),this}equals(zn){return zn.center.equals(this.center)&&zn.radius===this.radius}clone(){return new M().copy(this)}}let $=new _.Vector3;class V{constructor(zn=new _.Vector3,Et=new _.Vector3,ml=0){this.c1=zn,this.c2=Et,this.radius=ml,this.direction=new _.Vector3().subVectors(this.c2,this.c1).normalize()}copy(zn){return this.c1.copy(zn.c1),this.c2.copy(zn.c2),this.direction.copy(zn.direction),this.radius=zn.radius,this}lengthSq(){return $.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(zn){return this.direction.add(this.c1).applyMatrix4(zn),this.c1.applyMatrix4(zn),this.c2.applyMatrix4(zn),this.direction.sub(this.c1).normalize(),this.radius=this.radius*zn.getMaxScaleOnAxis(),this}}const oe=new _.Vector3;class Y{constructor(zn=new _.Vector3,Et=new _.Vector3,ml=new _.Vector3){this.a=zn,this.b=Et,this.c=ml}copy(zn){return this.a.copy(zn.a),this.b.copy(zn.b),this.c.copy(zn.c),this}applyMatrix4(zn){return this.a.applyMatrix4(zn),this.b.applyMatrix4(zn),this.c.applyMatrix4(zn),this}getNormal(){var zn=this.a.clone();return zn.sub(this.b),oe.subVectors(this.c,this.b),zn.cross(oe),zn.normalize(),zn}}},107:(n,h,s)=>{var _,M=s(981),$=s(697),V=s(701),oe=s(407),Y=s(834),ie=-2,zn=258,Et=262,ml=103,rl=113,Ml=666;function kl(Nl,Gd){return Nl.msg=Y[Gd],Gd}function _u(Nl){return(Nl<<1)-(Nl>4?9:0)}function Hu(Nl){for(var Gd=Nl.length;--Gd>=0;)Nl[Gd]=0}function bu(Nl){var Gd=Nl.state,Cd=Gd.pending;Cd>Nl.avail_out&&(Cd=Nl.avail_out),Cd!==0&&(M.arraySet(Nl.output,Gd.pending_buf,Gd.pending_out,Cd,Nl.next_out),Nl.next_out+=Cd,Gd.pending_out+=Cd,Nl.total_out+=Cd,Nl.avail_out-=Cd,Gd.pending-=Cd,Gd.pending===0&&(Gd.pending_out=0))}function dl(Nl,Gd){$._tr_flush_block(Nl,Nl.block_start>=0?Nl.block_start:-1,Nl.strstart-Nl.block_start,Gd),Nl.block_start=Nl.strstart,bu(Nl.strm)}function Tl(Nl,Gd){Nl.pending_buf[Nl.pending++]=Gd}function $l(Nl,Gd){Nl.pending_buf[Nl.pending++]=Gd>>>8&255,Nl.pending_buf[Nl.pending++]=255&Gd}function Bl(Nl,Gd,Cd,Bu){var wh=Nl.avail_in;return wh>Bu&&(wh=Bu),wh===0?0:(Nl.avail_in-=wh,M.arraySet(Gd,Nl.input,Nl.next_in,wh,Cd),Nl.state.wrap===1?Nl.adler=V(Nl.adler,Gd,wh,Cd):Nl.state.wrap===2&&(Nl.adler=oe(Nl.adler,Gd,wh,Cd)),Nl.next_in+=wh,Nl.total_in+=wh,wh)}function Pu(Nl,Gd){var Cd,Bu,wh=Nl.max_chain_length,Rd=Nl.strstart,dh=Nl.prev_length,Ih=Nl.nice_match,nd=Nl.strstart>Nl.w_size-Et?Nl.strstart-(Nl.w_size-Et):0,Yd=Nl.window,Kh=Nl.w_mask,rp=Nl.prev,lh=Nl.strstart+zn,yp=Yd[Rd+dh-1],Cp=Yd[Rd+dh];Nl.prev_length>=Nl.good_match&&(wh>>=2),Ih>Nl.lookahead&&(Ih=Nl.lookahead);do if(Yd[(Cd=Gd)+dh]===Cp&&Yd[Cd+dh-1]===yp&&Yd[Cd]===Yd[Rd]&&Yd[++Cd]===Yd[Rd+1]){Rd+=2,Cd++;do;while(Yd[++Rd]===Yd[++Cd]&&Yd[++Rd]===Yd[++Cd]&&Yd[++Rd]===Yd[++Cd]&&Yd[++Rd]===Yd[++Cd]&&Yd[++Rd]===Yd[++Cd]&&Yd[++Rd]===Yd[++Cd]&&Yd[++Rd]===Yd[++Cd]&&Yd[++Rd]===Yd[++Cd]&&Rd<lh);if(Bu=zn-(lh-Rd),Rd=lh-zn,Bu>dh){if(Nl.match_start=Gd,dh=Bu,Bu>=Ih)break;yp=Yd[Rd+dh-1],Cp=Yd[Rd+dh]}}while((Gd=rp[Gd&Kh])>nd&&--wh!==0);return dh<=Nl.lookahead?dh:Nl.lookahead}function Il(Nl){var Gd,Cd,Bu,wh,Rd,dh=Nl.w_size;do{if(wh=Nl.window_size-Nl.lookahead-Nl.strstart,Nl.strstart>=dh+(dh-Et)){M.arraySet(Nl.window,Nl.window,dh,dh,0),Nl.match_start-=dh,Nl.strstart-=dh,Nl.block_start-=dh,Gd=Cd=Nl.hash_size;do Bu=Nl.head[--Gd],Nl.head[Gd]=Bu>=dh?Bu-dh:0;while(--Cd);Gd=Cd=dh;do Bu=Nl.prev[--Gd],Nl.prev[Gd]=Bu>=dh?Bu-dh:0;while(--Cd);wh+=dh}if(Nl.strm.avail_in===0)break;if(Cd=Bl(Nl.strm,Nl.window,Nl.strstart+Nl.lookahead,wh),Nl.lookahead+=Cd,Nl.lookahead+Nl.insert>=3)for(Rd=Nl.strstart-Nl.insert,Nl.ins_h=Nl.window[Rd],Nl.ins_h=(Nl.ins_h<<Nl.hash_shift^Nl.window[Rd+1])&Nl.hash_mask;Nl.insert&&(Nl.ins_h=(Nl.ins_h<<Nl.hash_shift^Nl.window[Rd+3-1])&Nl.hash_mask,Nl.prev[Rd&Nl.w_mask]=Nl.head[Nl.ins_h],Nl.head[Nl.ins_h]=Rd,Rd++,Nl.insert--,!(Nl.lookahead+Nl.insert<3)););}while(Nl.lookahead<Et&&Nl.strm.avail_in!==0)}function ud(Nl,Gd){for(var Cd,Bu;;){if(Nl.lookahead<Et){if(Il(Nl),Nl.lookahead<Et&&Gd===0)return 1;if(Nl.lookahead===0)break}if(Cd=0,Nl.lookahead>=3&&(Nl.ins_h=(Nl.ins_h<<Nl.hash_shift^Nl.window[Nl.strstart+3-1])&Nl.hash_mask,Cd=Nl.prev[Nl.strstart&Nl.w_mask]=Nl.head[Nl.ins_h],Nl.head[Nl.ins_h]=Nl.strstart),Cd!==0&&Nl.strstart-Cd<=Nl.w_size-Et&&(Nl.match_length=Pu(Nl,Cd)),Nl.match_length>=3)if(Bu=$._tr_tally(Nl,Nl.strstart-Nl.match_start,Nl.match_length-3),Nl.lookahead-=Nl.match_length,Nl.match_length<=Nl.max_lazy_match&&Nl.lookahead>=3){Nl.match_length--;do Nl.strstart++,Nl.ins_h=(Nl.ins_h<<Nl.hash_shift^Nl.window[Nl.strstart+3-1])&Nl.hash_mask,Cd=Nl.prev[Nl.strstart&Nl.w_mask]=Nl.head[Nl.ins_h],Nl.head[Nl.ins_h]=Nl.strstart;while(--Nl.match_length!==0);Nl.strstart++}else Nl.strstart+=Nl.match_length,Nl.match_length=0,Nl.ins_h=Nl.window[Nl.strstart],Nl.ins_h=(Nl.ins_h<<Nl.hash_shift^Nl.window[Nl.strstart+1])&Nl.hash_mask;else Bu=$._tr_tally(Nl,0,Nl.window[Nl.strstart]),Nl.lookahead--,Nl.strstart++;if(Bu&&(dl(Nl,!1),Nl.strm.avail_out===0))return 1}return Nl.insert=Nl.strstart<2?Nl.strstart:2,Gd===4?(dl(Nl,!0),Nl.strm.avail_out===0?3:4):Nl.last_lit&&(dl(Nl,!1),Nl.strm.avail_out===0)?1:2}function pd(Nl,Gd){for(var Cd,Bu,wh;;){if(Nl.lookahead<Et){if(Il(Nl),Nl.lookahead<Et&&Gd===0)return 1;if(Nl.lookahead===0)break}if(Cd=0,Nl.lookahead>=3&&(Nl.ins_h=(Nl.ins_h<<Nl.hash_shift^Nl.window[Nl.strstart+3-1])&Nl.hash_mask,Cd=Nl.prev[Nl.strstart&Nl.w_mask]=Nl.head[Nl.ins_h],Nl.head[Nl.ins_h]=Nl.strstart),Nl.prev_length=Nl.match_length,Nl.prev_match=Nl.match_start,Nl.match_length=2,Cd!==0&&Nl.prev_length<Nl.max_lazy_match&&Nl.strstart-Cd<=Nl.w_size-Et&&(Nl.match_length=Pu(Nl,Cd),Nl.match_length<=5&&(Nl.strategy===1||Nl.match_length===3&&Nl.strstart-Nl.match_start>4096)&&(Nl.match_length=2)),Nl.prev_length>=3&&Nl.match_length<=Nl.prev_length){wh=Nl.strstart+Nl.lookahead-3,Bu=$._tr_tally(Nl,Nl.strstart-1-Nl.prev_match,Nl.prev_length-3),Nl.lookahead-=Nl.prev_length-1,Nl.prev_length-=2;do++Nl.strstart<=wh&&(Nl.ins_h=(Nl.ins_h<<Nl.hash_shift^Nl.window[Nl.strstart+3-1])&Nl.hash_mask,Cd=Nl.prev[Nl.strstart&Nl.w_mask]=Nl.head[Nl.ins_h],Nl.head[Nl.ins_h]=Nl.strstart);while(--Nl.prev_length!==0);if(Nl.match_available=0,Nl.match_length=2,Nl.strstart++,Bu&&(dl(Nl,!1),Nl.strm.avail_out===0))return 1}else if(Nl.match_available){if((Bu=$._tr_tally(Nl,0,Nl.window[Nl.strstart-1]))&&dl(Nl,!1),Nl.strstart++,Nl.lookahead--,Nl.strm.avail_out===0)return 1}else Nl.match_available=1,Nl.strstart++,Nl.lookahead--}return Nl.match_available&&(Bu=$._tr_tally(Nl,0,Nl.window[Nl.strstart-1]),Nl.match_available=0),Nl.insert=Nl.strstart<2?Nl.strstart:2,Gd===4?(dl(Nl,!0),Nl.strm.avail_out===0?3:4):Nl.last_lit&&(dl(Nl,!1),Nl.strm.avail_out===0)?1:2}function id(Nl,Gd,Cd,Bu,wh){this.good_length=Nl,this.max_lazy=Gd,this.nice_length=Cd,this.max_chain=Bu,this.func=wh}function rh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new M.Buf16(1146),this.dyn_dtree=new M.Buf16(122),this.bl_tree=new M.Buf16(78),Hu(this.dyn_ltree),Hu(this.dyn_dtree),Hu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new M.Buf16(16),this.heap=new M.Buf16(573),Hu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new M.Buf16(573),Hu(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function qd(Nl){var Gd;return Nl&&Nl.state?(Nl.total_in=Nl.total_out=0,Nl.data_type=2,(Gd=Nl.state).pending=0,Gd.pending_out=0,Gd.wrap<0&&(Gd.wrap=-Gd.wrap),Gd.status=Gd.wrap?42:rl,Nl.adler=Gd.wrap===2?0:1,Gd.last_flush=0,$._tr_init(Gd),0):kl(Nl,ie)}function oh(Nl){var Gd,Cd=qd(Nl);return Cd===0&&((Gd=Nl.state).window_size=2*Gd.w_size,Hu(Gd.head),Gd.max_lazy_match=_[Gd.level].max_lazy,Gd.good_match=_[Gd.level].good_length,Gd.nice_match=_[Gd.level].nice_length,Gd.max_chain_length=_[Gd.level].max_chain,Gd.strstart=0,Gd.block_start=0,Gd.lookahead=0,Gd.insert=0,Gd.match_length=Gd.prev_length=2,Gd.match_available=0,Gd.ins_h=0),Cd}function Ed(Nl,Gd,Cd,Bu,wh,Rd){if(!Nl)return ie;var dh=1;if(Gd===-1&&(Gd=6),Bu<0?(dh=0,Bu=-Bu):Bu>15&&(dh=2,Bu-=16),wh<1||wh>9||Cd!==8||Bu<8||Bu>15||Gd<0||Gd>9||Rd<0||Rd>4)return kl(Nl,ie);Bu===8&&(Bu=9);var Ih=new rh;return Nl.state=Ih,Ih.strm=Nl,Ih.wrap=dh,Ih.gzhead=null,Ih.w_bits=Bu,Ih.w_size=1<<Ih.w_bits,Ih.w_mask=Ih.w_size-1,Ih.hash_bits=wh+7,Ih.hash_size=1<<Ih.hash_bits,Ih.hash_mask=Ih.hash_size-1,Ih.hash_shift=~~((Ih.hash_bits+3-1)/3),Ih.window=new M.Buf8(2*Ih.w_size),Ih.head=new M.Buf16(Ih.hash_size),Ih.prev=new M.Buf16(Ih.w_size),Ih.lit_bufsize=1<<wh+6,Ih.pending_buf_size=4*Ih.lit_bufsize,Ih.pending_buf=new M.Buf8(Ih.pending_buf_size),Ih.d_buf=1*Ih.lit_bufsize,Ih.l_buf=3*Ih.lit_bufsize,Ih.level=Gd,Ih.strategy=Rd,Ih.method=Cd,oh(Nl)}_=[new id(0,0,0,0,function(Nl,Gd){var Cd=65535;for(Cd>Nl.pending_buf_size-5&&(Cd=Nl.pending_buf_size-5);;){if(Nl.lookahead<=1){if(Il(Nl),Nl.lookahead===0&&Gd===0)return 1;if(Nl.lookahead===0)break}Nl.strstart+=Nl.lookahead,Nl.lookahead=0;var Bu=Nl.block_start+Cd;if((Nl.strstart===0||Nl.strstart>=Bu)&&(Nl.lookahead=Nl.strstart-Bu,Nl.strstart=Bu,dl(Nl,!1),Nl.strm.avail_out===0)||Nl.strstart-Nl.block_start>=Nl.w_size-Et&&(dl(Nl,!1),Nl.strm.avail_out===0))return 1}return Nl.insert=0,Gd===4?(dl(Nl,!0),Nl.strm.avail_out===0?3:4):(Nl.strstart>Nl.block_start&&(dl(Nl,!1),Nl.strm.avail_out),1)}),new id(4,4,8,4,ud),new id(4,5,16,8,ud),new id(4,6,32,32,ud),new id(4,4,16,16,pd),new id(8,16,32,32,pd),new id(8,16,128,128,pd),new id(8,32,128,256,pd),new id(32,128,258,1024,pd),new id(32,258,258,4096,pd)],h.deflateInit=function(Nl,Gd){return Ed(Nl,Gd,8,15,8,0)},h.deflateInit2=Ed,h.deflateReset=oh,h.deflateResetKeep=qd,h.deflateSetHeader=function(Nl,Gd){return Nl&&Nl.state?Nl.state.wrap!==2?ie:(Nl.state.gzhead=Gd,0):ie},h.deflate=function(Nl,Gd){var Cd,Bu,wh,Rd;if(!Nl||!Nl.state||Gd>5||Gd<0)return Nl?kl(Nl,ie):ie;if(Bu=Nl.state,!Nl.output||!Nl.input&&Nl.avail_in!==0||Bu.status===Ml&&Gd!==4)return kl(Nl,Nl.avail_out===0?-5:ie);if(Bu.strm=Nl,Cd=Bu.last_flush,Bu.last_flush=Gd,Bu.status===42)if(Bu.wrap===2)Nl.adler=0,Tl(Bu,31),Tl(Bu,139),Tl(Bu,8),Bu.gzhead?(Tl(Bu,(Bu.gzhead.text?1:0)+(Bu.gzhead.hcrc?2:0)+(Bu.gzhead.extra?4:0)+(Bu.gzhead.name?8:0)+(Bu.gzhead.comment?16:0)),Tl(Bu,255&Bu.gzhead.time),Tl(Bu,Bu.gzhead.time>>8&255),Tl(Bu,Bu.gzhead.time>>16&255),Tl(Bu,Bu.gzhead.time>>24&255),Tl(Bu,Bu.level===9?2:Bu.strategy>=2||Bu.level<2?4:0),Tl(Bu,255&Bu.gzhead.os),Bu.gzhead.extra&&Bu.gzhead.extra.length&&(Tl(Bu,255&Bu.gzhead.extra.length),Tl(Bu,Bu.gzhead.extra.length>>8&255)),Bu.gzhead.hcrc&&(Nl.adler=oe(Nl.adler,Bu.pending_buf,Bu.pending,0)),Bu.gzindex=0,Bu.status=69):(Tl(Bu,0),Tl(Bu,0),Tl(Bu,0),Tl(Bu,0),Tl(Bu,0),Tl(Bu,Bu.level===9?2:Bu.strategy>=2||Bu.level<2?4:0),Tl(Bu,3),Bu.status=rl);else{var dh=8+(Bu.w_bits-8<<4)<<8;dh|=(Bu.strategy>=2||Bu.level<2?0:Bu.level<6?1:Bu.level===6?2:3)<<6,Bu.strstart!==0&&(dh|=32),dh+=31-dh%31,Bu.status=rl,$l(Bu,dh),Bu.strstart!==0&&($l(Bu,Nl.adler>>>16),$l(Bu,65535&Nl.adler)),Nl.adler=1}if(Bu.status===69)if(Bu.gzhead.extra){for(wh=Bu.pending;Bu.gzindex<(65535&Bu.gzhead.extra.length)&&(Bu.pending!==Bu.pending_buf_size||(Bu.gzhead.hcrc&&Bu.pending>wh&&(Nl.adler=oe(Nl.adler,Bu.pending_buf,Bu.pending-wh,wh)),bu(Nl),wh=Bu.pending,Bu.pending!==Bu.pending_buf_size));)Tl(Bu,255&Bu.gzhead.extra[Bu.gzindex]),Bu.gzindex++;Bu.gzhead.hcrc&&Bu.pending>wh&&(Nl.adler=oe(Nl.adler,Bu.pending_buf,Bu.pending-wh,wh)),Bu.gzindex===Bu.gzhead.extra.length&&(Bu.gzindex=0,Bu.status=73)}else Bu.status=73;if(Bu.status===73)if(Bu.gzhead.name){wh=Bu.pending;do{if(Bu.pending===Bu.pending_buf_size&&(Bu.gzhead.hcrc&&Bu.pending>wh&&(Nl.adler=oe(Nl.adler,Bu.pending_buf,Bu.pending-wh,wh)),bu(Nl),wh=Bu.pending,Bu.pending===Bu.pending_buf_size)){Rd=1;break}Rd=Bu.gzindex<Bu.gzhead.name.length?255&Bu.gzhead.name.charCodeAt(Bu.gzindex++):0,Tl(Bu,Rd)}while(Rd!==0);Bu.gzhead.hcrc&&Bu.pending>wh&&(Nl.adler=oe(Nl.adler,Bu.pending_buf,Bu.pending-wh,wh)),Rd===0&&(Bu.gzindex=0,Bu.status=91)}else Bu.status=91;if(Bu.status===91)if(Bu.gzhead.comment){wh=Bu.pending;do{if(Bu.pending===Bu.pending_buf_size&&(Bu.gzhead.hcrc&&Bu.pending>wh&&(Nl.adler=oe(Nl.adler,Bu.pending_buf,Bu.pending-wh,wh)),bu(Nl),wh=Bu.pending,Bu.pending===Bu.pending_buf_size)){Rd=1;break}Rd=Bu.gzindex<Bu.gzhead.comment.length?255&Bu.gzhead.comment.charCodeAt(Bu.gzindex++):0,Tl(Bu,Rd)}while(Rd!==0);Bu.gzhead.hcrc&&Bu.pending>wh&&(Nl.adler=oe(Nl.adler,Bu.pending_buf,Bu.pending-wh,wh)),Rd===0&&(Bu.status=ml)}else Bu.status=ml;if(Bu.status===ml&&(Bu.gzhead.hcrc?(Bu.pending+2>Bu.pending_buf_size&&bu(Nl),Bu.pending+2<=Bu.pending_buf_size&&(Tl(Bu,255&Nl.adler),Tl(Bu,Nl.adler>>8&255),Nl.adler=0,Bu.status=rl)):Bu.status=rl),Bu.pending!==0){if(bu(Nl),Nl.avail_out===0)return Bu.last_flush=-1,0}else if(Nl.avail_in===0&&_u(Gd)<=_u(Cd)&&Gd!==4)return kl(Nl,-5);if(Bu.status===Ml&&Nl.avail_in!==0)return kl(Nl,-5);if(Nl.avail_in!==0||Bu.lookahead!==0||Gd!==0&&Bu.status!==Ml){var Ih=Bu.strategy===2?(function(nd,Yd){for(var Kh;;){if(nd.lookahead===0&&(Il(nd),nd.lookahead===0)){if(Yd===0)return 1;break}if(nd.match_length=0,Kh=$._tr_tally(nd,0,nd.window[nd.strstart]),nd.lookahead--,nd.strstart++,Kh&&(dl(nd,!1),nd.strm.avail_out===0))return 1}return nd.insert=0,Yd===4?(dl(nd,!0),nd.strm.avail_out===0?3:4):nd.last_lit&&(dl(nd,!1),nd.strm.avail_out===0)?1:2})(Bu,Gd):Bu.strategy===3?(function(nd,Yd){for(var Kh,rp,lh,yp,Cp=nd.window;;){if(nd.lookahead<=zn){if(Il(nd),nd.lookahead<=zn&&Yd===0)return 1;if(nd.lookahead===0)break}if(nd.match_length=0,nd.lookahead>=3&&nd.strstart>0&&(rp=Cp[lh=nd.strstart-1])===Cp[++lh]&&rp===Cp[++lh]&&rp===Cp[++lh]){yp=nd.strstart+zn;do;while(rp===Cp[++lh]&&rp===Cp[++lh]&&rp===Cp[++lh]&&rp===Cp[++lh]&&rp===Cp[++lh]&&rp===Cp[++lh]&&rp===Cp[++lh]&&rp===Cp[++lh]&&lh<yp);nd.match_length=zn-(yp-lh),nd.match_length>nd.lookahead&&(nd.match_length=nd.lookahead)}if(nd.match_length>=3?(Kh=$._tr_tally(nd,1,nd.match_length-3),nd.lookahead-=nd.match_length,nd.strstart+=nd.match_length,nd.match_length=0):(Kh=$._tr_tally(nd,0,nd.window[nd.strstart]),nd.lookahead--,nd.strstart++),Kh&&(dl(nd,!1),nd.strm.avail_out===0))return 1}return nd.insert=0,Yd===4?(dl(nd,!0),nd.strm.avail_out===0?3:4):nd.last_lit&&(dl(nd,!1),nd.strm.avail_out===0)?1:2})(Bu,Gd):_[Bu.level].func(Bu,Gd);if(Ih!==3&&Ih!==4||(Bu.status=Ml),Ih===1||Ih===3)return Nl.avail_out===0&&(Bu.last_flush=-1),0;if(Ih===2&&(Gd===1?$._tr_align(Bu):Gd!==5&&($._tr_stored_block(Bu,0,0,!1),Gd===3&&(Hu(Bu.head),Bu.lookahead===0&&(Bu.strstart=0,Bu.block_start=0,Bu.insert=0))),bu(Nl),Nl.avail_out===0))return Bu.last_flush=-1,0}return Gd!==4?0:Bu.wrap<=0?1:(Bu.wrap===2?(Tl(Bu,255&Nl.adler),Tl(Bu,Nl.adler>>8&255),Tl(Bu,Nl.adler>>16&255),Tl(Bu,Nl.adler>>24&255),Tl(Bu,255&Nl.total_in),Tl(Bu,Nl.total_in>>8&255),Tl(Bu,Nl.total_in>>16&255),Tl(Bu,Nl.total_in>>24&255)):($l(Bu,Nl.adler>>>16),$l(Bu,65535&Nl.adler)),bu(Nl),Bu.wrap>0&&(Bu.wrap=-Bu.wrap),Bu.pending!==0?0:1)},h.deflateEnd=function(Nl){var Gd;return Nl&&Nl.state?(Gd=Nl.state.status)!==42&&Gd!==69&&Gd!==73&&Gd!==91&&Gd!==ml&&Gd!==rl&&Gd!==Ml?kl(Nl,ie):(Nl.state=null,Gd===rl?kl(Nl,-3):0):ie},h.deflateSetDictionary=function(Nl,Gd){var Cd,Bu,wh,Rd,dh,Ih,nd,Yd,Kh=Gd.length;if(!Nl||!Nl.state||(Rd=(Cd=Nl.state).wrap)===2||Rd===1&&Cd.status!==42||Cd.lookahead)return ie;for(Rd===1&&(Nl.adler=V(Nl.adler,Gd,Kh,0)),Cd.wrap=0,Kh>=Cd.w_size&&(Rd===0&&(Hu(Cd.head),Cd.strstart=0,Cd.block_start=0,Cd.insert=0),Yd=new M.Buf8(Cd.w_size),M.arraySet(Yd,Gd,Kh-Cd.w_size,Cd.w_size,0),Gd=Yd,Kh=Cd.w_size),dh=Nl.avail_in,Ih=Nl.next_in,nd=Nl.input,Nl.avail_in=Kh,Nl.next_in=0,Nl.input=Gd,Il(Cd);Cd.lookahead>=3;){Bu=Cd.strstart,wh=Cd.lookahead-2;do Cd.ins_h=(Cd.ins_h<<Cd.hash_shift^Cd.window[Bu+3-1])&Cd.hash_mask,Cd.prev[Bu&Cd.w_mask]=Cd.head[Cd.ins_h],Cd.head[Cd.ins_h]=Bu,Bu++;while(--wh);Cd.strstart=Bu,Cd.lookahead=2,Il(Cd)}return Cd.strstart+=Cd.lookahead,Cd.block_start=Cd.strstart,Cd.insert=Cd.lookahead,Cd.lookahead=0,Cd.match_length=Cd.prev_length=2,Cd.match_available=0,Nl.next_in=Ih,Nl.input=nd,Nl.avail_in=dh,Cd.wrap=Rd,0},h.deflateInfo="pako deflate (from Nodeca project)"},111:(n,h,s)=>{var _;_={},n.exports=_,(function(M,$){M.toRGBA8=function(V){var oe=V.width,Y=V.height;if(V.tabs.acTL==null)return[M.toRGBA8.decodeImage(V.data,oe,Y,V).buffer];var ie=[];V.frames[0].data==null&&(V.frames[0].data=V.data);for(var zn,Et=new Uint8Array(oe*Y*4),ml=0;ml<V.frames.length;ml++){var rl=V.frames[ml],Ml=rl.rect.x,kl=rl.rect.y,_u=rl.rect.width,Hu=rl.rect.height,bu=M.toRGBA8.decodeImage(rl.data,_u,Hu,V);if(ml==0?zn=bu:rl.blend==0?M._copyTile(bu,_u,Hu,zn,oe,Y,Ml,kl,0):rl.blend==1&&M._copyTile(bu,_u,Hu,zn,oe,Y,Ml,kl,1),ie.push(zn.buffer),zn=zn.slice(0),rl.dispose!=0){if(rl.dispose==1)M._copyTile(Et,_u,Hu,zn,oe,Y,Ml,kl,0);else if(rl.dispose==2){for(var dl=ml-1;V.frames[dl].dispose==2;)dl--;zn=new Uint8Array(ie[dl]).slice(0)}}}return ie},M.toRGBA8.decodeImage=function(V,oe,Y,ie){var zn=oe*Y,Et=M.decode._getBPP(ie),ml=Math.ceil(oe*Et/8),rl=new Uint8Array(4*zn),Ml=new Uint32Array(rl.buffer),kl=ie.ctype,_u=ie.depth,Hu=M._bin.readUshort;if(kl==6){var bu=zn<<2;if(_u==8)for(var dl=0;dl<bu;dl++)rl[dl]=V[dl];if(_u==16)for(dl=0;dl<bu;dl++)rl[dl]=V[dl<<1]}else if(kl==2){var Tl=ie.tabs.tRNS,$l=-1,Bl=-1,Pu=-1;if(Tl&&($l=Tl[0],Bl=Tl[1],Pu=Tl[2]),_u==8)for(dl=0;dl<zn;dl++){var Il=3*dl;rl[Ed=dl<<2]=V[Il],rl[Ed+1]=V[Il+1],rl[Ed+2]=V[Il+2],rl[Ed+3]=255,$l!=-1&&V[Il]==$l&&V[Il+1]==Bl&&V[Il+2]==Pu&&(rl[Ed+3]=0)}if(_u==16)for(dl=0;dl<zn;dl++)Il=6*dl,rl[Ed=dl<<2]=V[Il],rl[Ed+1]=V[Il+2],rl[Ed+2]=V[Il+4],rl[Ed+3]=255,$l!=-1&&Hu(V,Il)==$l&&Hu(V,Il+2)==Bl&&Hu(V,Il+4)==Pu&&(rl[Ed+3]=0)}else if(kl==3){var ud=ie.tabs.PLTE,pd=ie.tabs.tRNS,id=pd?pd.length:0;if(_u==1)for(var rh=0;rh<Y;rh++){var qd=rh*ml,oh=rh*oe;for(dl=0;dl<oe;dl++){var Ed=oh+dl<<2,Nl=3*(Gd=V[qd+(dl>>3)]>>7-(7&dl)&1);rl[Ed]=ud[Nl],rl[Ed+1]=ud[Nl+1],rl[Ed+2]=ud[Nl+2],rl[Ed+3]=Gd<id?pd[Gd]:255}}if(_u==2)for(rh=0;rh<Y;rh++)for(qd=rh*ml,oh=rh*oe,dl=0;dl<oe;dl++)Ed=oh+dl<<2,Nl=3*(Gd=V[qd+(dl>>2)]>>6-((3&dl)<<1)&3),rl[Ed]=ud[Nl],rl[Ed+1]=ud[Nl+1],rl[Ed+2]=ud[Nl+2],rl[Ed+3]=Gd<id?pd[Gd]:255;if(_u==4)for(rh=0;rh<Y;rh++)for(qd=rh*ml,oh=rh*oe,dl=0;dl<oe;dl++)Ed=oh+dl<<2,Nl=3*(Gd=V[qd+(dl>>1)]>>4-((1&dl)<<2)&15),rl[Ed]=ud[Nl],rl[Ed+1]=ud[Nl+1],rl[Ed+2]=ud[Nl+2],rl[Ed+3]=Gd<id?pd[Gd]:255;if(_u==8)for(dl=0;dl<zn;dl++){var Gd;Ed=dl<<2,Nl=3*(Gd=V[dl]),rl[Ed]=ud[Nl],rl[Ed+1]=ud[Nl+1],rl[Ed+2]=ud[Nl+2],rl[Ed+3]=Gd<id?pd[Gd]:255}}else if(kl==4){if(_u==8)for(dl=0;dl<zn;dl++){Ed=dl<<2;var Cd=V[Bu=dl<<1];rl[Ed]=Cd,rl[Ed+1]=Cd,rl[Ed+2]=Cd,rl[Ed+3]=V[Bu+1]}if(_u==16)for(dl=0;dl<zn;dl++){var Bu;Ed=dl<<2,Cd=V[Bu=dl<<2],rl[Ed]=Cd,rl[Ed+1]=Cd,rl[Ed+2]=Cd,rl[Ed+3]=V[Bu+2]}}else if(kl==0){if($l=ie.tabs.tRNS?ie.tabs.tRNS:-1,_u==1)for(dl=0;dl<zn;dl++){var wh=(Cd=255*(V[dl>>3]>>7-(7&dl)&1))==255*$l?0:255;Ml[dl]=wh<<24|Cd<<16|Cd<<8|Cd}if(_u==2)for(dl=0;dl<zn;dl++)wh=(Cd=85*(V[dl>>2]>>6-((3&dl)<<1)&3))==85*$l?0:255,Ml[dl]=wh<<24|Cd<<16|Cd<<8|Cd;if(_u==4)for(dl=0;dl<zn;dl++)wh=(Cd=17*(V[dl>>1]>>4-((1&dl)<<2)&15))==17*$l?0:255,Ml[dl]=wh<<24|Cd<<16|Cd<<8|Cd;if(_u==8)for(dl=0;dl<zn;dl++)wh=(Cd=V[dl])==$l?0:255,Ml[dl]=wh<<24|Cd<<16|Cd<<8|Cd;if(_u==16)for(dl=0;dl<zn;dl++)Cd=V[dl<<1],wh=Hu(V,dl<<1)==$l?0:255,Ml[dl]=wh<<24|Cd<<16|Cd<<8|Cd}return rl},M.decode=function(V){for(var oe,Y=new Uint8Array(V),ie=8,zn=M._bin,Et=zn.readUshort,ml=zn.readUint,rl={tabs:{},frames:[]},Ml=new Uint8Array(Y.length),kl=0,_u=0,Hu=[137,80,78,71,13,10,26,10],bu=0;bu<8;bu++)if(Y[bu]!=Hu[bu])throw"The input is not a PNG file!";for(;ie<Y.length;){var dl=zn.readUint(Y,ie);ie+=4;var Tl=zn.readASCII(Y,ie,4);if(ie+=4,Tl=="IHDR")M.decode._IHDR(Y,ie,rl);else if(Tl=="IDAT"){for(bu=0;bu<dl;bu++)Ml[kl+bu]=Y[ie+bu];kl+=dl}else if(Tl=="acTL")rl.tabs[Tl]={num_frames:ml(Y,ie),num_plays:ml(Y,ie+4)},oe=new Uint8Array(Y.length);else if(Tl=="fcTL"){_u!=0&&((qd=rl.frames[rl.frames.length-1]).data=M.decode._decompress(rl,oe.slice(0,_u),qd.rect.width,qd.rect.height),_u=0);var $l={x:ml(Y,ie+12),y:ml(Y,ie+16),width:ml(Y,ie+4),height:ml(Y,ie+8)},Bl=Et(Y,ie+22);Bl=Et(Y,ie+20)/(Bl==0?100:Bl);var Pu={rect:$l,delay:Math.round(1e3*Bl),dispose:Y[ie+24],blend:Y[ie+25]};rl.frames.push(Pu)}else if(Tl=="fdAT"){for(bu=0;bu<dl-4;bu++)oe[_u+bu]=Y[ie+bu+4];_u+=dl-4}else if(Tl=="pHYs")rl.tabs[Tl]=[zn.readUint(Y,ie),zn.readUint(Y,ie+4),Y[ie+8]];else if(Tl=="cHRM")for(rl.tabs[Tl]=[],bu=0;bu<8;bu++)rl.tabs[Tl].push(zn.readUint(Y,ie+4*bu));else if(Tl=="tEXt"){rl.tabs[Tl]==null&&(rl.tabs[Tl]={});var Il=zn.nextZero(Y,ie),ud=zn.readASCII(Y,ie,Il-ie),pd=zn.readASCII(Y,Il+1,ie+dl-Il-1);rl.tabs[Tl][ud]=pd}else if(Tl=="iTXt"){rl.tabs[Tl]==null&&(rl.tabs[Tl]={}),Il=0;var id=ie;Il=zn.nextZero(Y,id),ud=zn.readASCII(Y,id,Il-id),Y[id=Il+1],Y[id+1],id+=2,Il=zn.nextZero(Y,id),zn.readASCII(Y,id,Il-id),id=Il+1,Il=zn.nextZero(Y,id),zn.readUTF8(Y,id,Il-id),id=Il+1,pd=zn.readUTF8(Y,id,dl-(id-ie)),rl.tabs[Tl][ud]=pd}else if(Tl=="PLTE")rl.tabs[Tl]=zn.readBytes(Y,ie,dl);else if(Tl=="hIST"){var rh=rl.tabs.PLTE.length/3;for(rl.tabs[Tl]=[],bu=0;bu<rh;bu++)rl.tabs[Tl].push(Et(Y,ie+2*bu))}else if(Tl=="tRNS")rl.ctype==3?rl.tabs[Tl]=zn.readBytes(Y,ie,dl):rl.ctype==0?rl.tabs[Tl]=Et(Y,ie):rl.ctype==2&&(rl.tabs[Tl]=[Et(Y,ie),Et(Y,ie+2),Et(Y,ie+4)]);else if(Tl=="gAMA")rl.tabs[Tl]=zn.readUint(Y,ie)/1e5;else if(Tl=="sRGB")rl.tabs[Tl]=Y[ie];else if(Tl=="bKGD")rl.ctype==0||rl.ctype==4?rl.tabs[Tl]=[Et(Y,ie)]:rl.ctype==2||rl.ctype==6?rl.tabs[Tl]=[Et(Y,ie),Et(Y,ie+2),Et(Y,ie+4)]:rl.ctype==3&&(rl.tabs[Tl]=Y[ie]);else if(Tl=="IEND"){var qd;_u!=0&&((qd=rl.frames[rl.frames.length-1]).data=M.decode._decompress(rl,oe.slice(0,_u),qd.rect.width,qd.rect.height),_u=0),rl.data=M.decode._decompress(rl,Ml,rl.width,rl.height);break}ie+=dl,zn.readUint(Y,ie),ie+=4}return delete rl.compress,delete rl.interlace,delete rl.filter,rl},M.decode._decompress=function(V,oe,Y,ie){return V.compress==0&&(oe=M.decode._inflate(oe)),V.interlace==0?oe=M.decode._filterZero(oe,V,0,Y,ie):V.interlace==1&&(oe=M.decode._readInterlace(oe,V)),oe},M.decode._inflate=function(V){return $.inflate(V)},M.decode._readInterlace=function(V,oe){for(var Y=oe.width,ie=oe.height,zn=M.decode._getBPP(oe),Et=zn>>3,ml=Math.ceil(Y*zn/8),rl=new Uint8Array(ie*ml),Ml=0,kl=[0,0,4,0,2,0,1],_u=[0,4,0,2,0,1,0],Hu=[8,8,8,4,4,2,2],bu=[8,8,4,4,2,2,1],dl=0;dl<7;){for(var Tl=Hu[dl],$l=bu[dl],Bl=0,Pu=0,Il=kl[dl];Il<ie;)Il+=Tl,Pu++;for(var ud=_u[dl];ud<Y;)ud+=$l,Bl++;var pd=Math.ceil(Bl*zn/8);M.decode._filterZero(V,oe,Ml,Bl,Pu);for(var id=0,rh=kl[dl];rh<ie;){for(var qd=_u[dl],oh=Ml+id*pd<<3;qd<Y;){var Ed;if(zn==1&&(Ed=(Ed=V[oh>>3])>>7-(7&oh)&1,rl[rh*ml+(qd>>3)]|=Ed<<7-(3&qd)),zn==2&&(Ed=(Ed=V[oh>>3])>>6-(7&oh)&3,rl[rh*ml+(qd>>2)]|=Ed<<6-((3&qd)<<1)),zn==4&&(Ed=(Ed=V[oh>>3])>>4-(7&oh)&15,rl[rh*ml+(qd>>1)]|=Ed<<4-((1&qd)<<2)),zn>=8)for(var Nl=rh*ml+qd*Et,Gd=0;Gd<Et;Gd++)rl[Nl+Gd]=V[(oh>>3)+Gd];oh+=zn,qd+=$l}id++,rh+=Tl}Bl*Pu!=0&&(Ml+=Pu*(1+pd)),dl+=1}return rl},M.decode._getBPP=function(V){return[1,null,3,1,2,null,4][V.ctype]*V.depth},M.decode._filterZero=function(V,oe,Y,ie,zn){var Et=M.decode._getBPP(oe),ml=Math.ceil(ie*Et/8),rl=M.decode._paeth;Et=Math.ceil(Et/8);for(var Ml=0;Ml<zn;Ml++){var kl=Y+Ml*ml,_u=kl+Ml+1,Hu=V[_u-1];if(Hu==0)for(var bu=0;bu<ml;bu++)V[kl+bu]=V[_u+bu];else if(Hu==1){for(bu=0;bu<Et;bu++)V[kl+bu]=V[_u+bu];for(bu=Et;bu<ml;bu++)V[kl+bu]=V[_u+bu]+V[kl+bu-Et]&255}else if(Ml==0){for(bu=0;bu<Et;bu++)V[kl+bu]=V[_u+bu];if(Hu==2)for(bu=Et;bu<ml;bu++)V[kl+bu]=255&V[_u+bu];if(Hu==3)for(bu=Et;bu<ml;bu++)V[kl+bu]=V[_u+bu]+(V[kl+bu-Et]>>1)&255;if(Hu==4)for(bu=Et;bu<ml;bu++)V[kl+bu]=V[_u+bu]+rl(V[kl+bu-Et],0,0)&255}else{if(Hu==2)for(bu=0;bu<ml;bu++)V[kl+bu]=V[_u+bu]+V[kl+bu-ml]&255;if(Hu==3){for(bu=0;bu<Et;bu++)V[kl+bu]=V[_u+bu]+(V[kl+bu-ml]>>1)&255;for(bu=Et;bu<ml;bu++)V[kl+bu]=V[_u+bu]+(V[kl+bu-ml]+V[kl+bu-Et]>>1)&255}if(Hu==4){for(bu=0;bu<Et;bu++)V[kl+bu]=V[_u+bu]+rl(0,V[kl+bu-ml],0)&255;for(bu=Et;bu<ml;bu++)V[kl+bu]=V[_u+bu]+rl(V[kl+bu-Et],V[kl+bu-ml],V[kl+bu-Et-ml])&255}}}return V},M.decode._paeth=function(V,oe,Y){var ie=V+oe-Y,zn=Math.abs(ie-V),Et=Math.abs(ie-oe),ml=Math.abs(ie-Y);return zn<=Et&&zn<=ml?V:Et<=ml?oe:Y},M.decode._IHDR=function(V,oe,Y){var ie=M._bin;Y.width=ie.readUint(V,oe),oe+=4,Y.height=ie.readUint(V,oe),oe+=4,Y.depth=V[oe],oe++,Y.ctype=V[oe],oe++,Y.compress=V[oe],oe++,Y.filter=V[oe],oe++,Y.interlace=V[oe],oe++},M._bin={nextZero:function(V,oe){for(;V[oe]!=0;)oe++;return oe},readUshort:function(V,oe){return V[oe]<<8|V[oe+1]},writeUshort:function(V,oe,Y){V[oe]=Y>>8&255,V[oe+1]=255&Y},readUint:function(V,oe){return 16777216*V[oe]+(V[oe+1]<<16|V[oe+2]<<8|V[oe+3])},writeUint:function(V,oe,Y){V[oe]=Y>>24&255,V[oe+1]=Y>>16&255,V[oe+2]=Y>>8&255,V[oe+3]=255&Y},readASCII:function(V,oe,Y){for(var ie="",zn=0;zn<Y;zn++)ie+=String.fromCharCode(V[oe+zn]);return ie},writeASCII:function(V,oe,Y){for(var ie=0;ie<Y.length;ie++)V[oe+ie]=Y.charCodeAt(ie)},readBytes:function(V,oe,Y){for(var ie=[],zn=0;zn<Y;zn++)ie.push(V[oe+zn]);return ie},pad:function(V){return V.length<2?"0"+V:V},readUTF8:function(V,oe,Y){for(var ie,zn="",Et=0;Et<Y;Et++)zn+="%"+M._bin.pad(V[oe+Et].toString(16));try{ie=decodeURIComponent(zn)}catch{return M._bin.readASCII(V,oe,Y)}return ie}},M._copyTile=function(V,oe,Y,ie,zn,Et,ml,rl,Ml){for(var kl=Math.min(oe,zn),_u=Math.min(Y,Et),Hu=0,bu=0,dl=0;dl<_u;dl++)for(var Tl=0;Tl<kl;Tl++)if(ml>=0&&rl>=0?(Hu=dl*oe+Tl<<2,bu=(rl+dl)*zn+ml+Tl<<2):(Hu=(-rl+dl)*oe-ml+Tl<<2,bu=dl*zn+Tl<<2),Ml==0)ie[bu]=V[Hu],ie[bu+1]=V[Hu+1],ie[bu+2]=V[Hu+2],ie[bu+3]=V[Hu+3];else if(Ml==1){var $l=V[Hu+3]*.00392156862745098,Bl=V[Hu]*$l,Pu=V[Hu+1]*$l,Il=V[Hu+2]*$l,ud=ie[bu+3]*(1/255),pd=ie[bu]*ud,id=ie[bu+1]*ud,rh=ie[bu+2]*ud,qd=1-$l,oh=$l+ud*qd,Ed=oh==0?0:1/oh;ie[bu+3]=255*oh,ie[bu+0]=(Bl+pd*qd)*Ed,ie[bu+1]=(Pu+id*qd)*Ed,ie[bu+2]=(Il+rh*qd)*Ed}else if(Ml==2)$l=V[Hu+3],Bl=V[Hu],Pu=V[Hu+1],Il=V[Hu+2],ud=ie[bu+3],pd=ie[bu],id=ie[bu+1],rh=ie[bu+2],$l==ud&&Bl==pd&&Pu==id&&Il==rh?(ie[bu]=0,ie[bu+1]=0,ie[bu+2]=0,ie[bu+3]=0):(ie[bu]=Bl,ie[bu+1]=Pu,ie[bu+2]=Il,ie[bu+3]=$l);else if(Ml==3){if($l=V[Hu+3],Bl=V[Hu],Pu=V[Hu+1],Il=V[Hu+2],ud=ie[bu+3],pd=ie[bu],id=ie[bu+1],rh=ie[bu+2],$l==ud&&Bl==pd&&Pu==id&&Il==rh)continue;if($l<220&&ud>20)return!1}return!0},M.encode=function(V,oe,Y,ie,zn,Et){ie==null&&(ie=0),Et==null&&(Et=!1);for(var ml=new Uint8Array(V[0].byteLength*V.length+100),rl=[137,80,78,71,13,10,26,10],Ml=0;Ml<8;Ml++)ml[Ml]=rl[Ml];var kl=8,_u=M._bin,Hu=M.crc.crc,bu=_u.writeUint,dl=_u.writeUshort,Tl=_u.writeASCII,$l=M.encode.compressPNG(V,oe,Y,ie,Et);bu(ml,kl,13),Tl(ml,kl+=4,"IHDR"),bu(ml,kl+=4,oe),bu(ml,kl+=4,Y),ml[kl+=4]=$l.depth,ml[++kl]=$l.ctype,ml[++kl]=0,ml[++kl]=0,ml[++kl]=0,bu(ml,++kl,Hu(ml,kl-17,17)),bu(ml,kl+=4,1),Tl(ml,kl+=4,"sRGB"),ml[kl+=4]=1,bu(ml,++kl,Hu(ml,kl-5,5)),kl+=4;var Bl=V.length>1;if(Bl&&(bu(ml,kl,8),Tl(ml,kl+=4,"acTL"),bu(ml,kl+=4,V.length),bu(ml,kl+=4,0),bu(ml,kl+=4,Hu(ml,kl-12,12)),kl+=4),$l.ctype==3){for(bu(ml,kl,3*(Ed=$l.plte.length)),Tl(ml,kl+=4,"PLTE"),kl+=4,Ml=0;Ml<Ed;Ml++){var Pu=3*Ml,Il=$l.plte[Ml],ud=255&Il,pd=Il>>8&255,id=Il>>16&255;ml[kl+Pu+0]=ud,ml[kl+Pu+1]=pd,ml[kl+Pu+2]=id}if(bu(ml,kl+=3*Ed,Hu(ml,kl-3*Ed-4,3*Ed+4)),kl+=4,$l.gotAlpha){for(bu(ml,kl,Ed),Tl(ml,kl+=4,"tRNS"),kl+=4,Ml=0;Ml<Ed;Ml++)ml[kl+Ml]=$l.plte[Ml]>>24&255;bu(ml,kl+=Ed,Hu(ml,kl-Ed-4,Ed+4)),kl+=4}}for(var rh=0,qd=0;qd<$l.frames.length;qd++){var oh=$l.frames[qd];Bl&&(bu(ml,kl,26),Tl(ml,kl+=4,"fcTL"),bu(ml,kl+=4,rh++),bu(ml,kl+=4,oh.rect.width),bu(ml,kl+=4,oh.rect.height),bu(ml,kl+=4,oh.rect.x),bu(ml,kl+=4,oh.rect.y),dl(ml,kl+=4,zn[qd]),dl(ml,kl+=2,1e3),ml[kl+=2]=oh.dispose,ml[++kl]=oh.blend,bu(ml,++kl,Hu(ml,kl-30,30)),kl+=4);var Ed,Nl=oh.cimg;bu(ml,kl,(Ed=Nl.length)+(qd==0?0:4));var Gd=kl+=4;for(Tl(ml,kl,qd==0?"IDAT":"fdAT"),kl+=4,qd!=0&&(bu(ml,kl,rh++),kl+=4),Ml=0;Ml<Ed;Ml++)ml[kl+Ml]=Nl[Ml];bu(ml,kl+=Ed,Hu(ml,Gd,kl-Gd)),kl+=4}return bu(ml,kl,0),Tl(ml,kl+=4,"IEND"),bu(ml,kl+=4,Hu(ml,kl-4,4)),kl+=4,ml.buffer.slice(0,kl)},M.encode.compressPNG=function(V,oe,Y,ie,zn){for(var Et=M.encode.compress(V,oe,Y,ie,!1,zn),ml=0;ml<V.length;ml++){var rl=Et.frames[ml],Ml=(rl.rect.width,rl.rect.height),kl=rl.bpl,_u=rl.bpp,Hu=new Uint8Array(Ml*kl+Ml);rl.cimg=M.encode._filterZero(rl.img,Ml,_u,kl,Hu)}return Et},M.encode.compress=function(V,oe,Y,ie,zn,Et){Et==null&&(Et=!1);for(var ml=6,rl=8,Ml=4,kl=255,_u=0;_u<V.length;_u++)for(var Hu=new Uint8Array(V[_u]),bu=Hu.length,dl=0;dl<bu;dl+=4)kl&=Hu[dl+3];var Tl=kl!=255,$l={},Bl=[];if(V.length!=0&&($l[0]=0,Bl.push(0),ie!=0&&ie--),ie!=0){var Pu=M.quantize(V,ie,zn);for(V=Pu.bufs,dl=0;dl<Pu.plte.length;dl++)$l[ud=Pu.plte[dl].est.rgba]==null&&($l[ud]=Bl.length,Bl.push(ud))}else for(_u=0;_u<V.length;_u++){var Il=new Uint32Array(V[_u]);for(bu=Il.length,dl=0;dl<bu;dl++){var ud=Il[dl];if((dl<oe||ud!=Il[dl-1]&&ud!=Il[dl-oe])&&$l[ud]==null&&($l[ud]=Bl.length,Bl.push(ud),Bl.length>=300))break}}var pd=!!Tl&&zn,id=Bl.length;id<=256&&Et==0&&(rl=id<=2?1:id<=4?2:id<=16?4:8,zn&&(rl=8),Tl=!0);var rh=[];for(_u=0;_u<V.length;_u++){var qd=new Uint8Array(V[_u]),oh=new Uint32Array(qd.buffer),Ed=0,Nl=0,Gd=oe,Cd=Y,Bu=0;if(_u!=0&&!pd){for(var wh=zn||_u==1||rh[rh.length-2].dispose==2?1:2,Rd=0,dh=1e9,Ih=0;Ih<wh;Ih++){for(var nd=new Uint8Array(V[_u-1-Ih]),Yd=new Uint32Array(V[_u-1-Ih]),Kh=oe,rp=Y,lh=-1,yp=-1,Cp=0;Cp<Y;Cp++)for(var vp=0;vp<oe;vp++)oh[dl=Cp*oe+vp]!=Yd[dl]&&(vp<Kh&&(Kh=vp),vp>lh&&(lh=vp),Cp<rp&&(rp=Cp),Cp>yp&&(yp=Cp));var mf=lh==-1?1:(lh-Kh+1)*(yp-rp+1);mf<dh&&(dh=mf,Rd=Ih,lh==-1?(Ed=Nl=0,Gd=Cd=1):(Ed=Kh,Nl=rp,Gd=lh-Kh+1,Cd=yp-rp+1))}nd=new Uint8Array(V[_u-1-Rd]),Rd==1&&(rh[rh.length-1].dispose=2);var Zp=new Uint8Array(Gd*Cd*4);new Uint32Array(Zp.buffer),M._copyTile(nd,oe,Y,Zp,Gd,Cd,-Ed,-Nl,0),M._copyTile(qd,oe,Y,Zp,Gd,Cd,-Ed,-Nl,3)?(M._copyTile(qd,oe,Y,Zp,Gd,Cd,-Ed,-Nl,2),Bu=1):(M._copyTile(qd,oe,Y,Zp,Gd,Cd,-Ed,-Nl,0),Bu=0),qd=Zp,oh=new Uint32Array(qd.buffer)}var kf=4*Gd;if(id<=256&&Et==0){for(kf=Math.ceil(rl*Gd/8),Zp=new Uint8Array(kf*Cd),Cp=0;Cp<Cd;Cp++){dl=Cp*kf;var Eg=Cp*Gd;if(rl==8)for(vp=0;vp<Gd;vp++)Zp[dl+vp]=$l[oh[Eg+vp]];else if(rl==4)for(vp=0;vp<Gd;vp++)Zp[dl+(vp>>1)]|=$l[oh[Eg+vp]]<<4-4*(1&vp);else if(rl==2)for(vp=0;vp<Gd;vp++)Zp[dl+(vp>>2)]|=$l[oh[Eg+vp]]<<6-2*(3&vp);else if(rl==1)for(vp=0;vp<Gd;vp++)Zp[dl+(vp>>3)]|=$l[oh[Eg+vp]]<<7-1*(7&vp)}qd=Zp,ml=3,Ml=1}else if(Tl==0&&V.length==1){Zp=new Uint8Array(Gd*Cd*3);var Gg=Gd*Cd;for(dl=0;dl<Gg;dl++){var Hf=3*dl,Rg=4*dl;Zp[Hf]=qd[Rg],Zp[Hf+1]=qd[Rg+1],Zp[Hf+2]=qd[Rg+2]}qd=Zp,ml=2,Ml=3,kf=3*Gd}rh.push({rect:{x:Ed,y:Nl,width:Gd,height:Cd},img:qd,bpl:kf,bpp:Ml,blend:Bu,dispose:pd?1:0})}return{ctype:ml,depth:rl,plte:Bl,gotAlpha:Tl,frames:rh}},M.encode._filterZero=function(V,oe,Y,ie,zn){for(var Et=[],ml=0;ml<5;ml++)if(!(oe*ie>5e5)||ml!=2&&ml!=3&&ml!=4){for(var rl=0;rl<oe;rl++)M.encode._filterLine(zn,V,rl,ie,Y,ml);if(Et.push($.deflate(zn)),Y==1)break}for(var Ml,kl=1e9,_u=0;_u<Et.length;_u++)Et[_u].length<kl&&(Ml=_u,kl=Et[_u].length);return Et[Ml]},M.encode._filterLine=function(V,oe,Y,ie,zn,Et){var ml=Y*ie,rl=ml+Y,Ml=M.decode._paeth;if(V[rl]=Et,rl++,Et==0)for(var kl=0;kl<ie;kl++)V[rl+kl]=oe[ml+kl];else if(Et==1){for(kl=0;kl<zn;kl++)V[rl+kl]=oe[ml+kl];for(kl=zn;kl<ie;kl++)V[rl+kl]=oe[ml+kl]-oe[ml+kl-zn]+256&255}else if(Y==0){for(kl=0;kl<zn;kl++)V[rl+kl]=oe[ml+kl];if(Et==2)for(kl=zn;kl<ie;kl++)V[rl+kl]=oe[ml+kl];if(Et==3)for(kl=zn;kl<ie;kl++)V[rl+kl]=oe[ml+kl]-(oe[ml+kl-zn]>>1)+256&255;if(Et==4)for(kl=zn;kl<ie;kl++)V[rl+kl]=oe[ml+kl]-Ml(oe[ml+kl-zn],0,0)+256&255}else{if(Et==2)for(kl=0;kl<ie;kl++)V[rl+kl]=oe[ml+kl]+256-oe[ml+kl-ie]&255;if(Et==3){for(kl=0;kl<zn;kl++)V[rl+kl]=oe[ml+kl]+256-(oe[ml+kl-ie]>>1)&255;for(kl=zn;kl<ie;kl++)V[rl+kl]=oe[ml+kl]+256-(oe[ml+kl-ie]+oe[ml+kl-zn]>>1)&255}if(Et==4){for(kl=0;kl<zn;kl++)V[rl+kl]=oe[ml+kl]+256-Ml(0,oe[ml+kl-ie],0)&255;for(kl=zn;kl<ie;kl++)V[rl+kl]=oe[ml+kl]+256-Ml(oe[ml+kl-zn],oe[ml+kl-ie],oe[ml+kl-zn-ie])&255}}},M.crc={table:(function(){for(var V=new Uint32Array(256),oe=0;oe<256;oe++){for(var Y=oe,ie=0;ie<8;ie++)1&Y?Y=3988292384^Y>>>1:Y>>>=1;V[oe]=Y}return V})(),update:function(V,oe,Y,ie){for(var zn=0;zn<ie;zn++)V=M.crc.table[255&(V^oe[Y+zn])]^V>>>8;return V},crc:function(V,oe,Y){return 4294967295^M.crc.update(4294967295,V,oe,Y)}},M.quantize=function(V,oe,Y){for(var ie=[],zn=0,Et=0;Et<V.length;Et++)ie.push(M.encode.alphaMul(new Uint8Array(V[Et]),Y)),zn+=V[Et].byteLength;var ml=new Uint8Array(zn),rl=new Uint32Array(ml.buffer),Ml=0;for(Et=0;Et<ie.length;Et++){for(var kl=ie[Et],_u=kl.length,Hu=0;Hu<_u;Hu++)ml[Ml+Hu]=kl[Hu];Ml+=_u}var bu={i0:0,i1:ml.length,bst:null,est:null,tdst:0,left:null,right:null};bu.bst=M.quantize.stats(ml,bu.i0,bu.i1),bu.est=M.quantize.estats(bu.bst);for(var dl=[bu];dl.length<oe;){var Tl=0,$l=0;for(Et=0;Et<dl.length;Et++)dl[Et].est.L>Tl&&(Tl=dl[Et].est.L,$l=Et);if(Tl<.001)break;var Bl=dl[$l],Pu=M.quantize.splitPixels(ml,rl,Bl.i0,Bl.i1,Bl.est.e,Bl.est.eMq255),Il={i0:Bl.i0,i1:Pu,bst:null,est:null,tdst:0,left:null,right:null};Il.bst=M.quantize.stats(ml,Il.i0,Il.i1),Il.est=M.quantize.estats(Il.bst);var ud={i0:Pu,i1:Bl.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ud.bst={R:[],m:[],N:Bl.bst.N-Il.bst.N},Et=0;Et<16;Et++)ud.bst.R[Et]=Bl.bst.R[Et]-Il.bst.R[Et];for(Et=0;Et<4;Et++)ud.bst.m[Et]=Bl.bst.m[Et]-Il.bst.m[Et];ud.est=M.quantize.estats(ud.bst),Bl.left=Il,Bl.right=ud,dl[$l]=Il,dl.push(ud)}dl.sort(function(wh,Rd){return Rd.bst.N-wh.bst.N});for(var pd=0;pd<ie.length;pd++){var id=M.quantize.planeDst,rh=new Uint8Array(ie[pd].buffer),qd=new Uint32Array(ie[pd].buffer),oh=rh.length;for(Et=0;Et<oh;Et+=4){for(var Ed=rh[Et]*.00392156862745098,Nl=rh[Et+1]*.00392156862745098,Gd=rh[Et+2]*.00392156862745098,Cd=rh[Et+3]*.00392156862745098,Bu=bu;Bu.left;)Bu=id(Bu.est,Ed,Nl,Gd,Cd)<=0?Bu.left:Bu.right;qd[Et>>2]=Bu.est.rgba}ie[pd]=qd.buffer}return{bufs:ie,plte:dl}},M.quantize.getNearest=function(V,oe,Y,ie,zn){if(V.left==null)return V.tdst=M.quantize.dist(V.est.q,oe,Y,ie,zn),V;var Et=M.quantize.planeDst(V.est,oe,Y,ie,zn),ml=V.left,rl=V.right;Et>0&&(ml=V.right,rl=V.left);var Ml=M.quantize.getNearest(ml,oe,Y,ie,zn);if(Ml.tdst<=Et*Et)return Ml;var kl=M.quantize.getNearest(rl,oe,Y,ie,zn);return kl.tdst<Ml.tdst?kl:Ml},M.quantize.planeDst=function(V,oe,Y,ie,zn){var Et=V.e;return Et[0]*oe+Et[1]*Y+Et[2]*ie+Et[3]*zn-V.eMq},M.quantize.dist=function(V,oe,Y,ie,zn){var Et=oe-V[0],ml=Y-V[1],rl=ie-V[2],Ml=zn-V[3];return Et*Et+ml*ml+rl*rl+Ml*Ml},M.quantize.splitPixels=function(V,oe,Y,ie,zn,Et){var ml=M.quantize.vecDot;for(ie-=4;Y<ie;){for(;ml(V,Y,zn)<=Et;)Y+=4;for(;ml(V,ie,zn)>Et;)ie-=4;if(Y>=ie)break;var rl=oe[Y>>2];oe[Y>>2]=oe[ie>>2],oe[ie>>2]=rl,Y+=4,ie-=4}for(;ml(V,Y,zn)>Et;)Y-=4;return Y+4},M.quantize.vecDot=function(V,oe,Y){return V[oe]*Y[0]+V[oe+1]*Y[1]+V[oe+2]*Y[2]+V[oe+3]*Y[3]},M.quantize.stats=function(V,oe,Y){for(var ie=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],zn=[0,0,0,0],Et=Y-oe>>2,ml=oe;ml<Y;ml+=4){var rl=V[ml]*.00392156862745098,Ml=V[ml+1]*(1/255),kl=V[ml+2]*(1/255),_u=V[ml+3]*(1/255);zn[0]+=rl,zn[1]+=Ml,zn[2]+=kl,zn[3]+=_u,ie[0]+=rl*rl,ie[1]+=rl*Ml,ie[2]+=rl*kl,ie[3]+=rl*_u,ie[5]+=Ml*Ml,ie[6]+=Ml*kl,ie[7]+=Ml*_u,ie[10]+=kl*kl,ie[11]+=kl*_u,ie[15]+=_u*_u}return ie[4]=ie[1],ie[8]=ie[2],ie[12]=ie[3],ie[9]=ie[6],ie[13]=ie[7],ie[14]=ie[11],{R:ie,m:zn,N:Et}},M.quantize.estats=function(V){var oe=V.R,Y=V.m,ie=V.N,zn=Y[0],Et=Y[1],ml=Y[2],rl=Y[3],Ml=ie==0?0:1/ie,kl=[oe[0]-zn*zn*Ml,oe[1]-zn*Et*Ml,oe[2]-zn*ml*Ml,oe[3]-zn*rl*Ml,oe[4]-Et*zn*Ml,oe[5]-Et*Et*Ml,oe[6]-Et*ml*Ml,oe[7]-Et*rl*Ml,oe[8]-ml*zn*Ml,oe[9]-ml*Et*Ml,oe[10]-ml*ml*Ml,oe[11]-ml*rl*Ml,oe[12]-rl*zn*Ml,oe[13]-rl*Et*Ml,oe[14]-rl*ml*Ml,oe[15]-rl*rl*Ml],_u=kl,Hu=M.M4,bu=[.5,.5,.5,.5],dl=0,Tl=0;if(ie!=0)for(var $l=0;$l<10&&(bu=Hu.multVec(_u,bu),Tl=Math.sqrt(Hu.dot(bu,bu)),bu=Hu.sml(1/Tl,bu),!(Math.abs(Tl-dl)<1e-9));$l++)dl=Tl;var Bl=[zn*Ml,Et*Ml,ml*Ml,rl*Ml],Pu=Hu.dot(Hu.sml(255,Bl),bu),Il=Bl[3]<.001?0:1/Bl[3];return{Cov:kl,q:Bl,e:bu,L:dl,eMq255:Pu,eMq:Hu.dot(bu,Bl),rgba:(Math.round(255*Bl[3])<<24|Math.round(255*Bl[2]*Il)<<16|Math.round(255*Bl[1]*Il)<<8|Math.round(255*Bl[0]*Il))>>>0}},M.M4={multVec:function(V,oe){return[V[0]*oe[0]+V[1]*oe[1]+V[2]*oe[2]+V[3]*oe[3],V[4]*oe[0]+V[5]*oe[1]+V[6]*oe[2]+V[7]*oe[3],V[8]*oe[0]+V[9]*oe[1]+V[10]*oe[2]+V[11]*oe[3],V[12]*oe[0]+V[13]*oe[1]+V[14]*oe[2]+V[15]*oe[3]]},dot:function(V,oe){return V[0]*oe[0]+V[1]*oe[1]+V[2]*oe[2]+V[3]*oe[3]},sml:function(V,oe){return[V*oe[0],V*oe[1],V*oe[2],V*oe[3]]}},M.encode.alphaMul=function(V,oe){for(var Y=new Uint8Array(V.length),ie=V.length>>2,zn=0;zn<ie;zn++){var Et=zn<<2,ml=V[Et+3];oe&&(ml=ml<128?0:255);var rl=ml*(1/255);Y[Et+0]=V[Et+0]*rl,Y[Et+1]=V[Et+1]*rl,Y[Et+2]=V[Et+2]*rl,Y[Et+3]=ml}return Y}})(_,s(788))},165:n=>{n.exports=function(h,s){var _,M,$,V,oe,Y,ie,zn,Et,ml,rl,Ml,kl,_u,Hu,bu,dl,Tl,$l,Bl,Pu,Il,ud,pd,id;_=h.state,M=h.next_in,pd=h.input,$=M+(h.avail_in-5),V=h.next_out,id=h.output,oe=V-(s-h.avail_out),Y=V+(h.avail_out-257),ie=_.dmax,zn=_.wsize,Et=_.whave,ml=_.wnext,rl=_.window,Ml=_.hold,kl=_.bits,_u=_.lencode,Hu=_.distcode,bu=(1<<_.lenbits)-1,dl=(1<<_.distbits)-1;e:do{kl<15&&(Ml+=pd[M++]<<kl,kl+=8,Ml+=pd[M++]<<kl,kl+=8),Tl=_u[Ml&bu];t:for(;;){if(Ml>>>=$l=Tl>>>24,kl-=$l,($l=Tl>>>16&255)==0)id[V++]=65535&Tl;else{if(!(16&$l)){if(64&$l){if(32&$l){_.mode=12;break e}h.msg="invalid literal/length code",_.mode=30;break e}Tl=_u[(65535&Tl)+(Ml&(1<<$l)-1)];continue t}for(Bl=65535&Tl,($l&=15)&&(kl<$l&&(Ml+=pd[M++]<<kl,kl+=8),Bl+=Ml&(1<<$l)-1,Ml>>>=$l,kl-=$l),kl<15&&(Ml+=pd[M++]<<kl,kl+=8,Ml+=pd[M++]<<kl,kl+=8),Tl=Hu[Ml&dl];;){if(Ml>>>=$l=Tl>>>24,kl-=$l,16&($l=Tl>>>16&255)){if(Pu=65535&Tl,kl<($l&=15)&&(Ml+=pd[M++]<<kl,(kl+=8)<$l&&(Ml+=pd[M++]<<kl,kl+=8)),(Pu+=Ml&(1<<$l)-1)>ie){h.msg="invalid distance too far back",_.mode=30;break e}if(Ml>>>=$l,kl-=$l,Pu>($l=V-oe)){if(($l=Pu-$l)>Et&&_.sane){h.msg="invalid distance too far back",_.mode=30;break e}if(Il=0,ud=rl,ml===0){if(Il+=zn-$l,$l<Bl){Bl-=$l;do id[V++]=rl[Il++];while(--$l);Il=V-Pu,ud=id}}else if(ml<$l){if(Il+=zn+ml-$l,($l-=ml)<Bl){Bl-=$l;do id[V++]=rl[Il++];while(--$l);if(Il=0,ml<Bl){Bl-=$l=ml;do id[V++]=rl[Il++];while(--$l);Il=V-Pu,ud=id}}}else if(Il+=ml-$l,$l<Bl){Bl-=$l;do id[V++]=rl[Il++];while(--$l);Il=V-Pu,ud=id}for(;Bl>2;)id[V++]=ud[Il++],id[V++]=ud[Il++],id[V++]=ud[Il++],Bl-=3;Bl&&(id[V++]=ud[Il++],Bl>1&&(id[V++]=ud[Il++]))}else{Il=V-Pu;do id[V++]=id[Il++],id[V++]=id[Il++],id[V++]=id[Il++],Bl-=3;while(Bl>2);Bl&&(id[V++]=id[Il++],Bl>1&&(id[V++]=id[Il++]))}break}if(64&$l){h.msg="invalid distance code",_.mode=30;break e}Tl=Hu[(65535&Tl)+(Ml&(1<<$l)-1)]}}break}}while(M<$&&V<Y);M-=Bl=kl>>3,Ml&=(1<<(kl-=Bl<<3))-1,h.next_in=M,h.next_out=V,h.avail_in=M<$?$-M+5:5-(M-$),h.avail_out=V<Y?Y-V+257:257-(V-Y),_.hold=Ml,_.bits=kl}},185:()=>{$3Dmol.workerString=(function(){self.onmessage=function(n){var h=n.data,s=h.type;if(s<0)self.atomData=h.atoms,self.volume=h.volume,self.ps=new ProteinSurface;else{var _=self.ps;_.initparm(h.expandedExtent,s!=1,self.volume),_.fillvoxels(self.atomData,h.extendedAtoms),_.buildboundary(),s!==4&&s!==2||(_.fastdistancemap(),_.boundingatom(!1),_.fillvoxelswaals(self.atomData,h.extendedAtoms)),_.marchingcube(s);var M=_.getFacesAndVertices(h.atomsToShow);self.postMessage(M)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},222:(n,h,s)=>{s.r(h),s.d(h,{CC:()=>M,Color:()=>_,builtinColorSchemes:()=>Et,chains:()=>zn,elementColors:()=>Y,htmlColors:()=>$,residues:()=>ie,ssColors:()=>V});class _{constructor(rl,Ml,kl){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof rl=="number"?(this.r=rl||0,this.g=Ml||0,this.b=kl||0,this):this.set(rl||0)}set(rl){return rl instanceof _?rl.clone():(typeof rl=="number"?this.setHex(rl):typeof rl=="object"&&(this.r=rl?.r||0,this.g=rl?.g||0,this.b=rl?.b||0),this)}setHex(rl){return rl=Math.floor(rl),this.r=(rl>>16&255)/255,this.g=(rl>>8&255)/255,this.b=(255&rl)/255,this}getHex(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)}clone(){return new _(this.r,this.g,this.b)}copy(rl){return this.r=rl.r,this.g=rl.g,this.b=rl.b,this}scaled(){var rl={};return rl.r=Math.round(255*this.r),rl.g=Math.round(255*this.g),rl.b=Math.round(255*this.b),rl.a=1,rl}}class M{static color(rl){if(!rl)return M.cache[0];if(rl instanceof _)return rl;if(typeof rl=="number"&&M.cache[rl]!==void 0)return M.cache[rl];if(rl&&Array.isArray(rl))return rl.map(M.color);let Ml=M.getHex(rl),kl=new _(Ml);return M.cache[Ml]=kl,kl}static getHex(rl){if(Array.isArray(rl))return rl.map(M.getHex);if(typeof rl=="string"){let Ml=rl;if(!isNaN(parseInt(Ml)))return parseInt(Ml);if(Ml=Ml.trim(),Ml.length==4&&Ml[0]=="#"&&(Ml="#"+Ml[1]+Ml[1]+Ml[2]+Ml[2]+Ml[3]+Ml[3]),Ml.length==7&&Ml[0]=="#")return parseInt(Ml.substring(1),16);let kl=M.rgbRegEx.exec(Ml);if(kl){kl[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let Hu=0;for(let bu=2;bu<5;bu++){Hu*=256;let dl=kl[bu].endsWith("%")?255*parseFloat(kl[bu])/100:parseFloat(kl[bu]);Hu+=Math.round(dl)}return Hu}let _u=$[Ml.toLowerCase()];return _u!==void 0?_u:(console.error("color not found",rl.toLowerCase(),$),0)}return rl}}M.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,M.cache={0:new _(0)};const $={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},V={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},oe={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},Y={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:oe,defaultColors:Object.assign({},oe),greenCarbon:Object.assign(Object.assign({},oe),{C:65280}),cyanCarbon:Object.assign(Object.assign({},oe),{C:65535}),magentaCarbon:Object.assign(Object.assign({},oe),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},oe),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},oe),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},oe),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},oe),{C:8388736}),blueCarbon:Object.assign(Object.assign({},oe),{C:255})},ie={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},zn={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},Et={ssPyMol:{prop:"ss",map:V.pyMol},ssJmol:{prop:"ss",map:V.Jmol},Jmol:{prop:"elem",map:Y.Jmol},amino:{prop:"resn",map:ie.amino},shapely:{prop:"resn",map:ie.shapely},nucleic:{prop:"resn",map:ie.nucleic},chain:{prop:"chain",map:zn.atom},rasmol:{prop:"elem",map:Y.rasmol},default:{prop:"elem",map:Y.defaultColors},greenCarbon:{prop:"elem",map:Y.greenCarbon},chainHetatm:{prop:"chain",map:zn.hetatm},cyanCarbon:{prop:"elem",map:Y.cyanCarbon},magentaCarbon:{prop:"elem",map:Y.magentaCarbon},purpleCarbon:{prop:"elem",map:Y.purpleCarbon},whiteCarbon:{prop:"elem",map:Y.whiteCarbon},orangeCarbon:{prop:"elem",map:Y.orangeCarbon},yellowCarbon:{prop:"elem",map:Y.yellowCarbon},blueCarbon:{prop:"elem",map:Y.blueCarbon}}},307:n=>{typeof n.exports=="object"&&(n.exports=window.$3Dmol)},358:(n,h,s)=>{var _=s(981),M=15,$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],V=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(ie,zn,Et,ml,rl,Ml,kl,_u){var Hu,bu,dl,Tl,$l,Bl,Pu,Il,ud,pd=_u.bits,id=0,rh=0,qd=0,oh=0,Ed=0,Nl=0,Gd=0,Cd=0,Bu=0,wh=0,Rd=null,dh=0,Ih=new _.Buf16(16),nd=new _.Buf16(16),Yd=null,Kh=0;for(id=0;id<=M;id++)Ih[id]=0;for(rh=0;rh<ml;rh++)Ih[zn[Et+rh]]++;for(Ed=pd,oh=M;oh>=1&&Ih[oh]===0;oh--);if(Ed>oh&&(Ed=oh),oh===0)return rl[Ml++]=20971520,rl[Ml++]=20971520,_u.bits=1,0;for(qd=1;qd<oh&&Ih[qd]===0;qd++);for(Ed<qd&&(Ed=qd),Cd=1,id=1;id<=M;id++)if(Cd<<=1,(Cd-=Ih[id])<0)return-1;if(Cd>0&&(ie===0||oh!==1))return-1;for(nd[1]=0,id=1;id<M;id++)nd[id+1]=nd[id]+Ih[id];for(rh=0;rh<ml;rh++)zn[Et+rh]!==0&&(kl[nd[zn[Et+rh]]++]=rh);if(ie===0?(Rd=Yd=kl,Bl=19):ie===1?(Rd=$,dh-=257,Yd=V,Kh-=257,Bl=256):(Rd=oe,Yd=Y,Bl=-1),wh=0,rh=0,id=qd,$l=Ml,Nl=Ed,Gd=0,dl=-1,Tl=(Bu=1<<Ed)-1,ie===1&&Bu>852||ie===2&&Bu>592)return 1;for(;;){Pu=id-Gd,kl[rh]<Bl?(Il=0,ud=kl[rh]):kl[rh]>Bl?(Il=Yd[Kh+kl[rh]],ud=Rd[dh+kl[rh]]):(Il=96,ud=0),Hu=1<<id-Gd,qd=bu=1<<Nl;do rl[$l+(wh>>Gd)+(bu-=Hu)]=Pu<<24|Il<<16|ud;while(bu!==0);for(Hu=1<<id-1;wh&Hu;)Hu>>=1;if(Hu!==0?(wh&=Hu-1,wh+=Hu):wh=0,rh++,--Ih[id]===0){if(id===oh)break;id=zn[Et+kl[rh]]}if(id>Ed&&(wh&Tl)!==dl){for(Gd===0&&(Gd=Ed),$l+=qd,Cd=1<<(Nl=id-Gd);Nl+Gd<oh&&!((Cd-=Ih[Nl+Gd])<=0);)Nl++,Cd<<=1;if(Bu+=1<<Nl,ie===1&&Bu>852||ie===2&&Bu>592)return 1;rl[dl=wh&Tl]=Ed<<24|Nl<<16|$l-Ml}}return wh!==0&&(rl[$l+wh]=id-Gd<<24|4194304),_u.bits=Ed,0}},378:(n,h,s)=>{var _;s.r(h),s.d(h,{BackSide:()=>$,Camera:()=>R0,ClampToEdgeWrapping:()=>zn,Coloring:()=>_,Cylinder:()=>Bu.Cylinder,DoubleSide:()=>V,EventDispatcher:()=>Tl,FloatType:()=>kl,Fog:()=>p0,FrontSide:()=>M,Geometry:()=>id,GeometryGroup:()=>pd,GeometryIDCount:()=>rh,ImposterMaterial:()=>Gg,InstancedMaterial:()=>Hf,Light:()=>Nl,Line:()=>Zd,LineBasicMaterial:()=>Il,LineStyle:()=>_d,LinearFilter:()=>Et,LinearMipMapLinearFilter:()=>rl,Material:()=>Bl,MaterialIdCount:()=>Pu,Matrix3:()=>Y.Matrix3,Matrix4:()=>Y.Matrix4,Mesh:()=>xh,MeshDoubleLambertMaterial:()=>fg,MeshLambertMaterial:()=>Rg,MeshOutlineMaterial:()=>eg,NearestFilter:()=>ml,Object3D:()=>oh,Object3DIDCount:()=>qd,Projector:()=>Cd,Quaternion:()=>Y.Quaternion,R32Format:()=>bu,RFormat:()=>Hu,RGBAFormat:()=>_u,Ray:()=>Y.Ray,Raycaster:()=>dh,Renderer:()=>S0,Scene:()=>Ed,ShaderLib:()=>Vm,ShaderUtils:()=>l0,Shading:()=>oe,Sphere:()=>Bu.Sphere,SphereImposterMaterial:()=>Wg,SphereImposterOutlineMaterial:()=>Lg,Sprite:()=>Fp,SpriteAlignment:()=>ie,SpriteMaterial:()=>$g,SpritePlugin:()=>j0,StickImposterMaterial:()=>Bm,StickImposterOutlineMaterial:()=>Lm,Texture:()=>kf,TextureIdCount:()=>Eg,TextureOperations:()=>dl,Triangle:()=>Bu.Triangle,UVMapping:()=>Zp,UnsignedByteType:()=>Ml,Vector2:()=>Y.Vector2,Vector3:()=>Y.Vector3,VolumetricMaterial:()=>$m,basic:()=>cf,clamp:()=>Y.clamp,clone:()=>ym,conversionMatrix3:()=>Y.conversionMatrix3,degToRad:()=>Y.degToRad,instanced:()=>lf,intersectObject:()=>mf,lambert:()=>uf,lambertdouble:()=>Hm,outline:()=>Im,screen:()=>qg,screenaa:()=>vm,sphereimposter:()=>Jg,sphereimposteroutline:()=>ff,sprite:()=>r0,stickimposter:()=>Gm,stickimposteroutline:()=>h0,volumetric:()=>Tm}),(function(Kp){Kp[Kp.NoColors=0]="NoColors",Kp[Kp.FaceColors=1]="FaceColors",Kp[Kp.VertexColors=2]="VertexColors"})(_||(_={}));const M=0,$=1,V=2;var oe;(function(Kp){Kp[Kp.NoShading=0]="NoShading",Kp[Kp.FlatShading=1]="FlatShading",Kp[Kp.SmoothShading=2]="SmoothShading"})(oe||(oe={}));var Y=s(529);const ie={topLeft:new Y.Vector2(1,-1),topCenter:new Y.Vector2(0,-1),topRight:new Y.Vector2(-1,-1),centerLeft:new Y.Vector2(1,0),center:new Y.Vector2(0,0),centerRight:new Y.Vector2(-1,0),bottomLeft:new Y.Vector2(1,1),bottomCenter:new Y.Vector2(0,1),bottomRight:new Y.Vector2(-1,1)},zn=1001,Et=1006,ml=1007,rl=1008,Ml=1009,kl=1010,_u=1021,Hu=1022,bu=1023;var dl;(function(Kp){Kp[Kp.MultiplyOperation=0]="MultiplyOperation",Kp[Kp.MixOperation=1]="MixOperation",Kp[Kp.AddOperation=2]="AddOperation"})(dl||(dl={}));class Tl{constructor(){this.listeners={}}dispatchEvent(rt){var Uu=this.listeners[rt.type];if(Uu!==void 0){rt.target=this;for(var Vd=0,Eh=Uu.length;Vd<Eh;Vd++)Uu[Vd].call(this,rt)}}removeEventListener(rt,Uu){if(Uu){var Vd=this.listeners[rt].indexOf(Uu);Vd!==-1&&this.listeners[rt].splice(Vd,1)}else this.listeners[rt]=[]}addEventListener(rt,Uu){this.listeners[rt]===void 0&&(this.listeners[rt]=[]),this.listeners[rt].indexOf(Uu)===-1&&this.listeners[rt].push(Uu)}}var $l=s(222);class Bl extends Tl{constructor(){super(...arguments),this.id=Pu++,this.name="",this.side=M,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(rt={}){if(rt!==void 0)for(var Uu in rt){var Vd=rt[Uu];if(Vd!==void 0){if(Uu in this){var Eh=this[Uu];Eh instanceof $l.Color&&Vd instanceof $l.Color?Eh.copy(Vd):Eh instanceof $l.Color?Eh.set(Vd):Eh instanceof Y.Vector3&&Vd instanceof Y.Vector3?Eh.copy(Vd):this[Uu]=Vd}}else console.warn("$3Dmol.Material: '"+Uu+"' parameter is undefined.")}}clone(rt=new Bl){return rt.name=this.name,rt.side=this.side,rt.opacity=this.opacity,rt.transparent=this.transparent,rt.depthTest=this.depthTest,rt.depthWrite=this.depthWrite,rt.polygonOffset=this.polygonOffset,rt.polygonOffsetFactor=this.polygonOffsetFactor,rt.polygonOffsetUnits=this.polygonOffsetUnits,rt.alphaTest=this.alphaTest,rt.overdraw=this.overdraw,rt.visible=this.visible,rt}makeShaded(rt){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:rt},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let Pu=0;class Il extends Bl{constructor(rt){super(),this.color=new $l.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(rt)}clone(rt=new Il){return super.clone.call(this,rt),rt.color.copy(this.color),rt}}const ud=65535;class pd{constructor(rt=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=rt}setColor(rt){var Uu=this.vertexArray,Vd=this.colorArray;if(!Uu)throw new Error("vertex array not initialized");if(!Vd)throw new Error("color array not initialized");let Eh=$l.CC.color(rt);for(var ph=0;ph<Uu.length;ph+=3)Vd[ph]=Eh.r,Vd[ph+1]=Eh.g,Vd[ph+2]=Eh.b}setColors(rt){var Uu=this.vertexArray,Vd=this.colorArray;if(!Uu)throw new Error("vertex array not initialized");if(!Vd)throw new Error("color array not initialized");if(Uu.length==Vd.length)for(var Eh=0;Eh<Uu.length;Eh+=3){var ph=rt(Uu[Eh],Uu[Eh+1],Uu[Eh+2]);ph instanceof $l.Color||(ph=$l.CC.color(ph)),Vd[Eh]=ph.r,Vd[Eh+1]=ph.g,Vd[Eh+2]=ph.b}else console.log("Cannot re-color geometry group due to mismatched lengths.")}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var rt,Uu,Vd,Eh,ph=new Y.Vector3,jp=0;jp<this.vertices;++jp)rt=3*jp,Uu=this.vertexArray[rt],Vd=this.vertexArray[rt+1],Eh=this.vertexArray[rt+2],ph.x+=Uu,ph.y+=Vd,ph.z+=Eh;return ph.divideScalar(this.vertices),ph}setNormals(){var rt=this.faceArray,Uu=this.vertexArray,Vd=this.normalArray;if(this.vertices&&this.faceidx){if(!rt)throw new Error("face array not initialized");if(!Uu)throw new Error("vertex array not initialized");if(!Vd)throw new Error("normal array not initialized");for(var Eh,ph,jp,_p,Gp,of,Bp,rf=0;rf<rt.length/3;++rf)Eh=3*rt[3*rf],ph=3*rt[3*rf+1],jp=3*rt[3*rf+2],_p=new Y.Vector3(Uu[Eh],Uu[Eh+1],Uu[Eh+2]),Gp=new Y.Vector3(Uu[ph],Uu[ph+1],Uu[ph+2]),of=new Y.Vector3(Uu[jp],Uu[jp+1],Uu[jp+2]),_p.subVectors(_p,Gp),of.subVectors(of,Gp),of.cross(_p),(Bp=of).normalize(),Vd[Eh]+=Bp.x,Vd[ph]+=Bp.x,Vd[jp]+=Bp.x,Vd[Eh+1]+=Bp.y,Vd[ph+1]+=Bp.y,Vd[jp+1]+=Bp.y,Vd[Eh+2]+=Bp.z,Vd[ph+2]+=Bp.z,Vd[jp+2]+=Bp.z}}setLineIndices(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var rt=this.faceArray,Uu=this.lineArray=new Uint16Array(2*this.faceidx);if(this.lineidx=2*this.faceidx,!rt)throw new Error("face array not initialized");for(var Vd=0;Vd<this.faceidx/3;++Vd){var Eh=3*Vd,ph=2*Eh,jp=rt[Eh],_p=rt[Eh+1],Gp=rt[Eh+2];Uu[ph]=jp,Uu[ph+1]=_p,Uu[ph+2]=jp,Uu[ph+3]=Gp,Uu[ph+4]=_p,Uu[ph+5]=Gp}}}vrml(rt,Uu){var Vd,Eh,ph,jp,_p,Gp,of,Bp,rf,Rh,xf,Ng,em,Fm,Vf,Yg,$f,Kg,If="";if(If+=rt+`Shape {
`+rt+` appearance Appearance {
`+rt+`  material Material {
`+rt+"   diffuseColor "+((Vd=Uu?.color)===null||Vd===void 0?void 0:Vd.r)+" "+((Eh=Uu?.color)===null||Eh===void 0?void 0:Eh.g)+" "+((ph=Uu?.color)===null||ph===void 0?void 0:ph.b)+`
`,Uu.wireframe&&this.colorArray){let dd=this.colorArray;If+=rt+"    emissiveColor "+dd[0]+" "+dd[1]+" "+dd[2]+`
`}Uu?.transparent&&(If+=rt+"   transparency "+(1-Uu.opacity)+`
`),If+=rt+`  }
`,If+=rt+` }
`;var Mm=rt;if(rt+=" ",Uu instanceof Il||Uu.wireframe){let dd,f,E;If+=rt+`geometry IndexedLineSet {
`+rt+` colorPerVertex TRUE
`+rt+` coord Coordinate {
`+rt+`  point [
`;for(let W=0;W<this.vertices;++W){let Q=3*W;dd=(jp=this.vertexArray)===null||jp===void 0?void 0:jp[Q],f=(_p=this.vertexArray)===null||_p===void 0?void 0:_p[Q+1],E=(Gp=this.vertexArray)===null||Gp===void 0?void 0:Gp[Q+2],If+=rt+"   "+dd+" "+f+" "+E+`,
`}if(If+=rt+`  ]
`,If+=rt+` }
`,this.colorArray&&!Uu.wireframe){If+=rt+` color Color {
`+rt+`  color [
`;for(let W=0;W<this.vertices;++W){let Q=3*W;dd=this.colorArray[Q],f=this.colorArray[Q+1],E=this.colorArray[Q+2],If+=rt+"   "+dd+" "+f+" "+E+`,
`}If+=rt+`  ]
`,If+=rt+` }
`}if(If+=rt+` coordIndex [
`,Uu.wireframe&&this.faceArray)for(let W=0;W<this.faceidx;W+=3)dd=(of=this.faceArray)===null||of===void 0?void 0:of[W],f=(Bp=this.faceArray)===null||Bp===void 0?void 0:Bp[W+1],E=(rf=this.faceArray)===null||rf===void 0?void 0:rf[W+2],If+=rt+"  "+dd+", "+f+", "+E+`, -1,
`;else for(let W=0;W<this.vertices-1;W+=2)If+=rt+"  "+W+", "+(W+1)+`, -1,
`;If+=rt+` ]
`,If+=rt+`}
`}else{let dd,f,E;If+=rt+`geometry IndexedFaceSet {
`+rt+` colorPerVertex TRUE
`+rt+` normalPerVertex TRUE
`+rt+` solid FALSE
`,If+=rt+` coord Coordinate {
`+rt+`  point [
`;for(let W=0;W<this.vertices;++W){let Q=3*W;dd=(Rh=this.vertexArray)===null||Rh===void 0?void 0:Rh[Q],f=(xf=this.vertexArray)===null||xf===void 0?void 0:xf[Q+1],E=(Ng=this.vertexArray)===null||Ng===void 0?void 0:Ng[Q+2],If+=rt+"   "+dd+" "+f+" "+E+`,
`}If+=rt+`  ]
`,If+=rt+` }
`,If+=rt+` normal Normal {
`+rt+`  vector [
`;for(let W=0;W<this.vertices;++W){let Q=3*W;dd=(em=this.normalArray)===null||em===void 0?void 0:em[Q],f=(Fm=this.normalArray)===null||Fm===void 0?void 0:Fm[Q+1],E=(Vf=this.normalArray)===null||Vf===void 0?void 0:Vf[Q+2],If+=rt+"   "+dd+" "+f+" "+E+`,
`}if(If+=rt+`  ]
`,If+=rt+` }
`,this.colorArray){If+=rt+` color Color {
`+rt+`  color [
`;for(let W=0;W<this.vertices;++W){let Q=3*W;dd=this.colorArray[Q],f=this.colorArray[Q+1],E=this.colorArray[Q+2],If+=rt+"   "+dd+" "+f+" "+E+`,
`}If+=rt+`  ]
`,If+=rt+` }
`}If+=rt+` coordIndex [
`;for(let W=0;W<this.faceidx;W+=3)dd=(Yg=this.faceArray)===null||Yg===void 0?void 0:Yg[W],f=($f=this.faceArray)===null||$f===void 0?void 0:$f[W+1],E=(Kg=this.faceArray)===null||Kg===void 0?void 0:Kg[W+2],If+=rt+"  "+dd+", "+f+", "+E+`, -1,
`;If+=rt+` ]
`,If+=rt+`}
`}return If+=Mm+"}"}truncateArrayBuffers(rt=!0,Uu=!1){var Vd=this.vertexArray,Eh=this.colorArray,ph=this.normalArray,jp=this.faceArray,_p=this.lineArray,Gp=this.radiusArray;this.vertexArray=Vd?.subarray(0,3*this.vertices)||null,this.colorArray=Eh?.subarray(0,3*this.vertices)||null,rt?(this.normalArray=ph?.subarray(0,3*this.vertices)||null,this.faceArray=jp?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=_p?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),Gp&&(this.radiusArray=Gp.subarray(0,this.vertices)),Uu&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class id extends Tl{constructor(rt=!1,Uu=!1,Vd=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=rh++,this.mesh=rt,this.radii=Uu,this.offset=Vd}updateGeoGroup(rt=0){var Uu,Vd=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!Vd||Vd.vertices+rt>(((Uu=Vd?.vertexArray)===null||Uu===void 0?void 0:Uu.length)||0)/3)&&(Vd=this.addGeoGroup()),Vd}vrml(rt,Uu){for(var Vd="",Eh=this.geometryGroups.length,ph=0;ph<Eh;ph++)Vd+=this.geometryGroups[ph].vrml(rt,Uu)+`,
`;return Vd}addGeoGroup(){var rt=new pd(this.geometryGroups.length);return this.geometryGroups.push(rt),this.groups=this.geometryGroups.length,rt.vertexArray=new Float32Array(196605),rt.colorArray=new Float32Array(196605),this.mesh&&(rt.normalArray=new Float32Array(196605),rt.faceArray=new Uint16Array(393210),rt.lineArray=new Uint16Array(393210)),this.radii&&(rt.radiusArray=new Float32Array(ud)),rt.useOffset=this.offset,rt}setUpNormals(...rt){for(var Uu=0;Uu<this.groups;Uu++)this.geometryGroups[Uu].setNormals(...rt)}setColors(...rt){for(var Uu=this.geometryGroups.length,Vd=0;Vd<Uu;Vd++)this.geometryGroups[Vd].setColors(...rt)}setColor(...rt){let Uu=this.geometryGroups.length;for(var Vd=0;Vd<Uu;Vd++)this.geometryGroups[Vd].setColor(...rt)}setUpWireframe(...rt){let Uu=this.geometryGroups.length;for(var Vd=0;Vd<Uu;Vd++)this.geometryGroups[Vd].setLineIndices(...rt)}initTypedArrays(){for(var rt=0;rt<this.groups;rt++){var Uu=this.geometryGroups[rt];Uu.__inittedArrays!==!0&&Uu.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var rt=0,Uu=0;Uu<this.groups;Uu++)rt+=this.geometryGroups[Uu].vertices;return rt}}let rh=0,qd=0;class oh{constructor(){this.id=qd++,this.name="",this.children=[],this.position=new Y.Vector3,this.rotation=new Y.Vector3,this.matrix=new Y.Matrix4,this.matrixWorld=new Y.Matrix4,this.quaternion=new Y.Quaternion,this.eulerOrder="XYZ",this.up=new Y.Vector3(0,1,0),this.scale=new Y.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(rt){this.matrix.lookAt(rt,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof Y.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(rt){if(rt!==this){rt.parent=this,this.children.push(rt);for(var Uu=this;Uu.parent!==void 0;)Uu=Uu.parent;Uu!==void 0&&Uu instanceof Ed&&Uu.__addObject(rt)}else console.error("Can't add $3Dmol.Object3D to itself")}remove(rt){var Uu=this.children.indexOf(rt);if(Uu!==-1){rt.parent=void 0,this.children.splice(Uu,1);for(var Vd=this;Vd.parent!==void 0;)Vd=Vd.parent;Vd!==void 0&&Vd instanceof Ed&&Vd.__removeObject(rt)}}vrml(rt){rt||(rt=" ");var Uu=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),Vd=0,Eh=0,ph=0;if(Uu!=0){let Gp=Math.sin(Uu/2);Vd=this.quaternion.x/Gp,Eh=this.quaternion.y/Gp,ph=this.quaternion.z/Gp}var jp=rt+`Transform {
`+rt+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+rt+" rotation "+Vd+" "+Eh+" "+ph+" "+Uu+`
`+rt+` children [
`;this.geometry&&(jp+=this.geometry.vrml(rt,this.material));for(var _p=0;_p<this.children.length;_p++)jp+=this.children[_p].vrml(rt+" ")+`,
`;return jp+=` ]
`,jp+="}"}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof Y.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),this.scale.x===1&&this.scale.y===1&&this.scale.z===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(rt){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&rt!==!0||(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var Uu=0;Uu<this.children.length;Uu++)this.children[Uu].updateMatrixWorld(!0)}clone(rt){rt===void 0&&(rt=new oh),rt.name=this.name,rt.up.copy(this.up),rt.position.copy(this.position),rt.rotation instanceof Y.Vector3&&this.rotation instanceof Y.Vector3?rt.rotation.copy(this.rotation):rt.rotation=this.rotation,rt.eulerOrder=this.eulerOrder,rt.scale.copy(this.scale),rt.rotationAutoUpdate=this.rotationAutoUpdate,rt.matrix.copy(this.matrix),rt.matrixWorld.copy(this.matrixWorld),rt.quaternion.copy(this.quaternion),rt.matrixAutoUpdate=this.matrixAutoUpdate,rt.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,rt.useQuaternion=this.useQuaternion,rt.visible=this.visible;for(var Uu=0;Uu<this.children.length;Uu++){var Vd=this.children[Uu];rt.add(Vd.clone())}return rt}setVisible(rt){this.visible=rt;for(var Uu=0;Uu<this.children.length;Uu++)this.children[Uu].setVisible(rt)}}class Ed extends oh{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(rt){if(rt instanceof Nl)this.__lights.indexOf(rt)===-1&&this.__lights.push(rt),rt.target&&rt.target.parent===void 0&&this.add(rt.target);else if(this.__objects.indexOf(rt)===-1){this.__objects.push(rt),this.__objectsAdded.push(rt);var Uu=this.__objectsRemoved.indexOf(rt);Uu!==-1&&this.__objectsRemoved.splice(Uu,1)}for(var Vd=0;Vd<rt.children.length;Vd++)this.__addObject(rt.children[Vd])}__removeObject(rt){var Uu;rt instanceof Nl?(Uu=this.__lights.indexOf(rt))!==-1&&this.__lights.splice(Uu,1):(Uu=this.__objects.indexOf(rt))!==-1&&(this.__objects.splice(Uu,1),this.__objectsRemoved.push(rt),this.__objectsAdded.indexOf(rt)!==-1&&this.__objectsAdded.splice(Uu,1));for(var Vd=0;Vd<rt.children.length;Vd++)this.__removeObject(rt.children[Vd])}}class Nl extends oh{constructor(rt,Uu=1){super(),this.position=new Y.Vector3(0,1,0),this.target=new oh,this.castShadow=!1,this.onlyShadow=!1,this.color=new $l.Color(rt),this.intensity=Uu}}const Gd=new Y.Matrix4;class Cd{static unprojectVector(rt,Uu){return Uu.projectionMatrixInverse.getInverse(Uu.projectionMatrix),Gd.multiplyMatrices(Uu.matrixWorld,Uu.projectionMatrixInverse),rt.applyProjection(Gd)}static projectVector(rt,Uu){return Uu.matrixWorldInverse.getInverse(Uu.matrixWorld),Gd.multiplyMatrices(Uu.projectionMatrix,Uu.matrixWorldInverse),rt.applyProjection(Gd)}projectVector(rt,Uu){return Cd.projectVector(rt,Uu)}unprojectVector(rt,Uu){return Cd.unprojectVector(rt,Uu)}}var Bu=s(99);const wh=(Kp,rt)=>Kp.distance-rt.distance,Rd=new Y.Matrix4;class dh{constructor(rt,Uu,Vd,Eh){this.precision=1e-4,this.linePrecision=.2,this.ray=new Y.Ray(rt,Uu),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=Eh||0,this.far=Vd||1/0}set(rt,Uu){this.ray.set(rt,Uu)}setFromCamera(rt,Uu){Uu.ortho?(this.ray.origin.set(rt.x,rt.y,(Uu.near+Uu.far)/(Uu.near-Uu.far)).unproject(Uu),this.ray.direction.set(0,0,-1).transformDirection(Uu.matrixWorld)):(this.ray.origin.setFromMatrixPosition(Uu.matrixWorld),this.ray.direction.set(rt.x,rt.y,rt.z),Uu.projectionMatrixInverse.getInverse(Uu.projectionMatrix),Rd.multiplyMatrices(Uu.matrixWorld,Uu.projectionMatrixInverse),this.ray.direction.applyProjection(Rd),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(rt,Uu){for(var Vd=[],Eh=0,ph=Uu.length;Eh<ph;Eh++)mf(rt,Uu[Eh],this,Vd);return Vd.sort(wh),Vd}}const Ih=Kp=>Math.min(Math.max(Kp,-1),1);var nd=new Bu.Sphere,Yd=new Bu.Cylinder,Kh=new Bu.Triangle,rp=new Y.Vector3,lh=new Y.Vector3,yp=new Y.Vector3,Cp=new Y.Vector3,vp=new Y.Vector3;function mf(Kp,rt,Uu,Vd){if(vp.getPositionFromMatrix(Kp.matrixWorld),rt.intersectionShape===void 0||rt.hidden)return Vd;var Eh,ph,jp,_p,Gp,of,Bp,rf,Rh,xf,Ng,em,Fm,Vf,Yg=rt.intersectionShape,$f=Uu.linePrecision,Kg=($f*=Kp.matrixWorld.getMaxScaleOnAxis())*$f;if(rt.boundingSphere!==void 0&&rt.boundingSphere instanceof Bu.Sphere&&(nd.copy(rt.boundingSphere),nd.applyMatrix4(Kp.matrixWorld),!Uu.ray.isIntersectionSphere(nd)))return Vd;for(Eh=0,ph=Yg.triangle.length;Eh<ph;Eh++)if(Yg.triangle[Eh]instanceof Bu.Triangle){if(Kh.copy(Yg.triangle[Eh]),Kh.applyMatrix4(Kp.matrixWorld),jp=Kh.getNormal(),(_p=Uu.ray.direction.dot(jp))>=0||(rp.subVectors(Kh.a,Uu.ray.origin),(Bp=jp.dot(rp)/_p)<0))continue;lh.copy(Uu.ray.direction).multiplyScalar(Bp).add(Uu.ray.origin),lh.sub(Kh.a),yp.copy(Kh.b).sub(Kh.a),Cp.copy(Kh.c).sub(Kh.a);var If=yp.dot(Cp),Mm=yp.lengthSq(),dd=Cp.lengthSq();if((em=(Mm*lh.dot(Cp)-If*lh.dot(yp))/(Mm*dd-If*If))<0||em>1||(Ng=(lh.dot(yp)-em*If)/Mm)<0||Ng>1||Ng+em>1)continue;Vd.push({clickable:rt,distance:Bp})}for(Eh=0,ph=Yg.cylinder.length;Eh<ph;Eh++)if(Yg.cylinder[Eh]instanceof Bu.Cylinder){if(Yd.copy(Yg.cylinder[Eh]),Yd.applyMatrix4(Kp.matrixWorld),rp.subVectors(Yd.c1,Uu.ray.origin),Gp=rp.dot(Yd.direction),of=rp.dot(Uu.ray.direction),(Rh=1-(_p=Ih(Uu.ray.direction.dot(Yd.direction)))*_p)==0)continue;Fm=(_p*of-Gp)/Rh,Vf=(of-_p*Gp)/Rh,lh.copy(Yd.direction).multiplyScalar(Fm).add(Yd.c1),yp.copy(Uu.ray.direction).multiplyScalar(Vf).add(Uu.ray.origin),rf=Cp.subVectors(lh,yp).lengthSq();var f=Yd.radius*Yd.radius;if(rf<=f){if((Ng=_p*(em=Bp=(xf=(_p*Gp-of)*(_p*Gp-of)-Rh*(rp.lengthSq()-Gp*Gp-f))<=0?Math.sqrt(rf):(of-_p*Gp-Math.sqrt(xf))/Rh)-Gp)<0||Ng*Ng>Yd.lengthSq()||em<0)continue;Vd.push({clickable:rt,distance:Bp})}}for(Eh=0,ph=Yg.line.length;Eh<ph;Eh+=2){lh.copy(Yg.line[Eh]),lh.applyMatrix4(Kp.matrixWorld),yp.copy(Yg.line[Eh+1]),yp.applyMatrix4(Kp.matrixWorld),Cp.subVectors(yp,lh);var E=Cp.lengthSq();Cp.normalize(),rp.subVectors(lh,Uu.ray.origin);var W=rp.dot(Cp);of=rp.dot(Uu.ray.direction),(Rh=1-(_p=Ih(Uu.ray.direction.dot(Cp)))*_p)!=0&&(Fm=(_p*of-W)/Rh,Vf=(of-_p*W)/Rh,lh.add(Cp.multiplyScalar(Fm)),yp.copy(Uu.ray.direction).multiplyScalar(Vf).add(Uu.ray.origin),(rf=Cp.subVectors(yp,lh).lengthSq())<Kg&&Fm*Fm<E&&Vd.push({clickable:rt,distance:Vf}))}for(Eh=0,ph=Yg.sphere.length;Eh<ph;Eh++)if(Yg.sphere[Eh]instanceof Bu.Sphere&&(nd.copy(Yg.sphere[Eh]),nd.applyMatrix4(Kp.matrixWorld),Uu.ray.isIntersectionSphere(nd))){lh.subVectors(nd.center,Uu.ray.origin);var Q=lh.dot(Uu.ray.direction);if(xf=Q*Q-(lh.lengthSq()-nd.radius*nd.radius),Q<0)return Vd;Bp=xf<=0?Q:Q-Math.sqrt(xf),Vd.push({clickable:rt,distance:Bp})}return Vd}class Zp{}class kf extends Tl{constructor(rt,Uu){super(),this.id=Eg++,this.name="",this.image=rt,this.mapping=new Zp,this.wrapS=zn,this.wrapT=zn,this.anisotropy=1,Uu?(this.format=Hu,this.type=kl,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=ml,this.minFilter=ml):(this.format=_u,this.type=Ml,this.offset=new Y.Vector2(0,0),this.repeat=new Y.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=Et,this.minFilter=rl),this.needsUpdate=!1,this.onUpdate=null}clone(rt=new kf){return rt.image=this.image,rt.mapping=this.mapping,rt.wrapS=this.wrapS,rt.wrapT=this.wrapT,rt.magFilter=this.magFilter,rt.minFilter=this.minFilter,rt.anisotropy=this.anisotropy,rt.format=this.format,rt.type=this.type,rt.offset.copy(this.offset),rt.repeat.copy(this.repeat),rt.premultiplyAlpha=this.premultiplyAlpha,rt.flipY=this.flipY,rt.unpackAlignment=this.unpackAlignment,rt}dispose(){this.dispatchEvent({type:"dispose"})}}let Eg=0;class Gg extends Bl{constructor(rt){super(),this.color=new $l.Color(16777215),this.ambient=new $l.Color(1048575),this.emissive=new $l.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new Y.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=oe.SmoothShading,this.shaderID=null,this.vertexColors=_.NoColors,this.skinning=!1,this.setValues(rt)}clone(rt=new Gg){return super.clone.call(this,rt),rt.color.copy(this.color),rt.ambient.copy(this.ambient),rt.emissive.copy(this.emissive),rt.wrapAround=this.wrapAround,rt.wrapRGB.copy(this.wrapRGB),rt.map=this.map,rt.lightMap=this.lightMap,rt.specularMap=this.specularMap,rt.envMap=this.envMap,rt.combine=this.combine,rt.reflectivity=this.reflectivity,rt.refractionRatio=this.refractionRatio,rt.fog=this.fog,rt.shading=this.shading,rt.shaderID=this.shaderID,rt.vertexColors=this.vertexColors,rt.skinning=this.skinning,rt.morphTargets=this.morphTargets,rt.morphNormals=this.morphNormals,rt}}class Hf extends Bl{constructor(rt){super(),this.color=new $l.Color(16777215),this.ambient=new $l.Color(1048575),this.emissive=new $l.Color(0),this.wrapAround=!1,this.wrapRGB=new Y.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=oe.SmoothShading,this.shaderID="instanced",this.vertexColors=_.NoColors,this.skinning=!1,this.sphere=null,this.setValues(rt)}clone(rt=new Hf){return super.clone.call(this,rt),rt.color.copy(this.color),rt.ambient.copy(this.ambient),rt.emissive.copy(this.emissive),rt.wrapAround=this.wrapAround,rt.wrapRGB.copy(this.wrapRGB),rt.map=this.map,rt.lightMap=this.lightMap,rt.specularMap=this.specularMap,rt.envMap=this.envMap,rt.combine=this.combine,rt.reflectivity=this.reflectivity,rt.refractionRatio=this.refractionRatio,rt.fog=this.fog,rt.shading=this.shading,rt.shaderID=this.shaderID,rt.vertexColors=this.vertexColors,rt.skinning=this.skinning,rt.morphTargets=this.morphTargets,rt.morphNormals=this.morphNormals,rt.sphere=this.sphere,rt}}class Rg extends Bl{constructor(rt){super(),this.color=new $l.Color(16777215),this.ambient=new $l.Color(1048575),this.emissive=new $l.Color(0),this.wrapAround=!1,this.wrapRGB=new Y.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=oe.SmoothShading,this.shaderID="lambert",this.vertexColors=_.NoColors,this.skinning=!1,this.setValues(rt)}clone(rt=new Rg){return super.clone.call(this,rt),rt.color.copy(this.color),rt.ambient.copy(this.ambient),rt.emissive.copy(this.emissive),rt.wrapAround=this.wrapAround,rt.wrapRGB.copy(this.wrapRGB),rt.map=this.map,rt.lightMap=this.lightMap,rt.specularMap=this.specularMap,rt.envMap=this.envMap,rt.combine=this.combine,rt.reflectivity=this.reflectivity,rt.refractionRatio=this.refractionRatio,rt.fog=this.fog,rt.shading=this.shading,rt.shaderID=this.shaderID,rt.vertexColors=this.vertexColors,rt.skinning=this.skinning,rt.morphTargets=this.morphTargets,rt.morphNormals=this.morphNormals,rt}}class fg extends Rg{constructor(rt){super(rt),this.shaderID="lambertdouble",this.side=V,this.outline=!1}clone(rt=new fg){return super.clone.call(this,rt),rt}}class eg extends Bl{constructor(rt){super(),rt=rt||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=$l.CC.color(rt.color||new $l.Color(0,0,0)),this.outlineWidth=rt.width||.1,this.outlinePushback=rt.pushback||1,this.outlineMaxPixels=rt.maxpixels||0}clone(rt=new eg){return super.clone.call(this,rt),rt.fog=this.fog,rt.shaderID=this.shaderID,rt.wireframe=this.wireframe,rt.outlineColor=this.outlineColor,rt.outlineWidth=this.outlineWidth,rt.outlinePushback=this.outlinePushback,rt.outlineMaxPixels=this.outlineMaxPixels,rt}}class Wg extends Gg{constructor(rt){super(rt),this.shaderID="sphereimposter",this.setValues(rt)}clone(rt=new Wg){return super.clone.call(this,rt),rt}}class Lg extends Gg{constructor(rt){super(rt),rt=rt||{},this.shaderID="sphereimposteroutline",this.outlineColor=$l.CC.color(rt.color||new $l.Color(0,0,0)),this.outlineWidth=rt.width||.1,this.outlinePushback=rt.pushback||1,this.outlineMaxPixels=rt.maxpixels||0,this.setValues(rt)}clone(rt=new Lg){return super.clone.call(this,rt),rt.outlineColor=this.outlineColor,rt.outlineWidth=this.outlineWidth,rt.outlinePushback=this.outlinePushback,rt.outlineMaxPixels=this.outlineMaxPixels,rt}}class $g extends Bl{constructor(rt){super(),this.color=new $l.Color(16777215),this.map=new kf,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new Y.Vector2(0,0),this.uvScale=new Y.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=ie.center.clone(),this.setValues(rt),(rt=rt||{}).depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),rt.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),rt.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(rt=new $g){return super.clone.call(this,rt),rt.color.copy(this.color),rt.map=this.map,rt.useScreenCoordinates=this.useScreenCoordinates,rt.screenOffset=this.screenOffset,rt.sizeAttenuation=this.sizeAttenuation,rt.scaleByViewport=this.scaleByViewPort,rt.alignment.copy(this.alignment),rt.uvOffset.copy(this.uvOffset),rt}}class Bm extends Gg{constructor(rt){super(rt),this.shaderID="stickimposter",this.setValues(rt)}clone(rt=new Bm){return super.clone.call(this,rt),rt}}class Lm extends Gg{constructor(rt={}){super(rt),this.shaderID="stickimposteroutline",this.outlineColor=new $l.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,rt.color&&(this.outlineColor=$l.CC.color(rt.color)),rt.width&&(this.outlineWidth=rt.width),rt.pushback&&(this.outlinePushback=rt.pushback),rt.maxpixels&&(this.outlineMaxPixels=rt.maxpixels),this.setValues(rt)}clone(rt=new Lm){return super.clone.call(this,rt),rt.outlineColor=this.outlineColor,rt.outlineWidth=this.outlineWidth,rt.outlinePushback=this.outlinePushback,rt.outlineMaxPixels=this.outlineMaxPixels,rt}}class $m extends Bl{constructor(rt){super(),this.transparent=!1,this.volumetric=!0,this.color=new $l.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=M,this.setValues(rt)}clone(rt=new $m){return super.clone.call(this,rt),rt.transparent=this.transparent,rt.volumetric=this.volumetric,rt.color=this.color,rt.transferfn=this.transferfn,rt.map=this.map,rt.extent=this.extent,rt.maxdepth=this.maxdepth,rt.unit=this.unit,rt.texmatrix=this.texmatrix,rt.transfermin=this.transfermin,rt.transfermax=this.transfermax,rt.subsamples=this.subsamples,rt.shaderID=this.shaderID,rt.side=this.side,rt}}var _d;(function(Kp){Kp[Kp.LineStrip=0]="LineStrip",Kp[Kp.LinePieces=1]="LinePieces"})(_d||(_d={}));class Zd extends oh{constructor(rt,Uu=new Il({color:16777215*Math.random()}),Vd=_d.LineStrip){super(),this.geometry=rt,this.material=Uu,this.type=Vd}clone(rt=new Zd(this.geometry,this.material,this.type)){return super.clone.call(this,rt),rt}}class xh extends oh{constructor(rt,Uu){super(),this.geometry=rt,this.material=Uu}clone(rt){return rt===void 0&&(rt=new xh(this.geometry,this.material)),super.clone.call(this,rt),rt}}class Fp extends oh{constructor(rt=new $g){super(),this.material=rt,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),this.scale.x===1&&this.scale.y===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(rt=new Fp(this.material)){return oh.prototype.clone.call(this,rt),rt}}const ip={opacity:{type:"f",value:1},fogColor:{type:"c",value:new $l.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}},cf={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`.replace("#define GLSLIFY 1",""),fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`.replace("#define GLSLIFY 1",""),uniforms:ip},Jh={opacity:{type:"f",value:1},fogColor:{type:"c",value:new $l.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},lf={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:Jh},vf={opacity:{type:"f",value:1},fogColor:{type:"c",value:new $l.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},uf={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`.replace("#define GLSLIFY 1",""),vertexShader:`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`.replace("#define GLSLIFY 1",""),uniforms:vf},Gf={opacity:{type:"f",value:1},fogColor:{type:"c",value:new $l.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Hm={fragmentShader:`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:Gf},Vg={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new $l.Color(0,0,0)},fogColor:{type:"c",value:new $l.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},Im={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`.replace("#define GLSLIFY 1",""),uniforms:Vg},qg={fragmentShader:`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},vm={fragmentShader:`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},am={opacity:{type:"f",value:1},fogColor:{type:"c",value:new $l.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Jg={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`.replace("#define GLSLIFY 1",""),fragmentShader:`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`.replace("#define GLSLIFY 1",""),uniforms:am},pf={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new $l.Color(0,0,0)},fogColor:{type:"c",value:new $l.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},ff={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`.replace("#define GLSLIFY 1",""),uniforms:pf},r0={fragmentShader:`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`.replace("#define GLSLIFY 1",""),uniforms:{}},M0={opacity:{type:"f",value:1},fogColor:{type:"c",value:new $l.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},wf=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`,Gm={fragmentShader:[wf,`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`].join(`
`),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`,uniforms:M0},h0={fragmentShader:wf+`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`,vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`,uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new $l.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new $l.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},i0={opacity:{type:"f",value:1},fogColor:{type:"c",value:new $l.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}},Tm={fragmentShader:`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `.replace("#define GLSLIFY 1",""),vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`.replace("#define GLSLIFY 1",""),uniforms:i0},Vm={basic:cf,blur:{fragmentShader:`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{}},instanced:lf,lambert:uf,lambertdouble:Hm,outline:Im,screen:qg,screenaa:vm,ssao:{fragmentShader:`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},sphereimposter:Jg,sphereimposteroutline:ff,sprite:r0,stickimposter:Gm,stickimposteroutline:h0,volumetric:Tm};function ym(Kp){let rt={};for(const Vd in Kp){rt[Vd]={},rt[Vd].type=Kp[Vd].type;var Uu=Kp[Vd].value;Uu instanceof $l.Color?rt[Vd].value=Uu.clone():typeof Uu=="number"?rt[Vd].value=Uu:Uu instanceof Array?rt[Vd].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return rt}const l0={clone:ym};class R0 extends oh{constructor(rt=50,Uu=1,Vd=.1,Eh=2e3,ph=!1){super(),this.projectionMatrix=new Y.Matrix4,this.projectionMatrixInverse=new Y.Matrix4,this.matrixWorldInverse=new Y.Matrix4,this.fov=rt,this.aspect=Uu,this.near=Vd,this.far=Eh;var jp=this.position.z;this.right=jp*Math.tan(Math.PI/180*rt),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!ph,this.updateProjectionMatrix()}lookAt(rt){this.matrix.lookAt(this.position,rt,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof Y.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}class p0{constructor(rt,Uu=1,Vd=1e3){this.name="",this.color=new $l.Color(rt),this.near=Uu,this.far=Vd}clone(){return new p0(this.color.getHex(),this.near,this.far)}}class j0{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(rt){this.gl=rt.context,this.renderer=rt,this.precision=rt.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var Uu=0;this.sprite.vertices[Uu++]=-1,this.sprite.vertices[Uu++]=-1,this.sprite.vertices[Uu++]=0,this.sprite.vertices[Uu++]=0,this.sprite.vertices[Uu++]=1,this.sprite.vertices[Uu++]=-1,this.sprite.vertices[Uu++]=1,this.sprite.vertices[Uu++]=0,this.sprite.vertices[Uu++]=1,this.sprite.vertices[Uu++]=1,this.sprite.vertices[Uu++]=1,this.sprite.vertices[Uu++]=1,this.sprite.vertices[Uu++]=-1,this.sprite.vertices[Uu++]=1,this.sprite.vertices[Uu++]=0,this.sprite.vertices[Uu++]=1,Uu=0,this.sprite.faces[Uu++]=0,this.sprite.faces[Uu++]=1,this.sprite.faces[Uu++]=2,this.sprite.faces[Uu++]=0,this.sprite.faces[Uu++]=2,this.sprite.faces[Uu++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(Vm.sprite,this.precision||1),this.sprite.attributes={};const Vd={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),Vd.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),Vd.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),Vd.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),Vd.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),Vd.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),Vd.color=this.gl.getUniformLocation(this.sprite.program,"color"),Vd.map=this.gl.getUniformLocation(this.sprite.program,"map"),Vd.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),Vd.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),Vd.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),Vd.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),Vd.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),Vd.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),Vd.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),Vd.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),Vd.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=Vd}render(rt,Uu,Vd,Eh,ph){var jp,_p,Gp,of,Bp,rf,Rh,xf,Ng,em;if(!this.gl)throw new Error("WebGLRenderer not initialized");let Fm=[];(jp=rt?.__webglSprites)===null||jp===void 0||jp.forEach(Cl=>{(ph&&Cl.material.depthTest==0||!ph&&Cl.material.depthTest)&&Fm.push(Cl)});let Vf=Fm.length;if(!Vf)return;const Yg=this.sprite.attributes,$f=this.sprite.uniforms;if(!$f)throw new Error("Uniforms not defined");var Kg=.5*Vd,If=.5*Eh;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(Yg.position),this.gl.enableVertexAttribArray(Yg.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(Yg.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(Yg.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv($f.projectionMatrix,!1,Uu.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i($f.map,0);var Mm,dd=rt.fog;let f,E,W;dd?(this.gl.uniform3f($f.fogColor,dd.color.r,dd.color.g,dd.color.b),this.gl.uniform1f($f.fogNear,dd.near),this.gl.uniform1f($f.fogFar,dd.far)):(this.gl.uniform1f($f.fogNear,0),this.gl.uniform1f($f.fogFar,0));let Q=[];for(Mm=0;Mm<Vf;Mm++)f=Fm[Mm],E=f.material,E&&(E.depthTest!=0||ph)&&f.visible&&E.opacity!==0&&(E.useScreenCoordinates?f.z=-f.position.z:(f._modelViewMatrix.multiplyMatrices(Uu.matrixWorldInverse,f.matrixWorld),f.z=-f._modelViewMatrix.elements[14]));for(Fm.sort(lg),Mm=0;Mm<Vf;Mm++)if(f=Fm[Mm],E=f.material,E&&f.visible&&E.opacity!==0&&E.map&&E.map.image&&E.map.image.width){this.gl.uniform1f($f?.alphaTest||null,E.alphaTest);var yl=E.map.image.width,Ln=E.map.image.height;Q[0]=yl*this.renderer.devicePixelRatio/Vd,Q[1]=Ln*this.renderer.devicePixelRatio/Eh,E.useScreenCoordinates===!0?(this.gl.uniform1i($f.useScreenCoordinates,1),this.gl.uniform3f($f.screenPosition,(f.position.x*this.renderer.devicePixelRatio-Kg)/Kg,(If-f.position.y*this.renderer.devicePixelRatio)/If,Math.max(0,Math.min(1,f.position.z)))):(this.gl.uniform1i($f.useScreenCoordinates,0),this.gl.uniformMatrix4fv($f.modelViewMatrix,!1,f._modelViewMatrix.elements)),W=1/(E.scaleByViewport?Eh:1),Q[0]*=W*f.scale.x,Q[1]*=W*f.scale.y;let Cl=(_p=E?.alignment)===null||_p===void 0?void 0:_p.x,Al=(Gp=E?.alignment)===null||Gp===void 0?void 0:Gp.y;E.screenOffset&&(Cl=(Cl||0)+2*E.screenOffset.x/yl,Al=(Al||0)+2*E.screenOffset.y/Ln),this.gl.uniform2f($f.uvScale,((of=E?.uvScale)===null||of===void 0?void 0:of.x)||1,((Bp=E?.uvScale)===null||Bp===void 0?void 0:Bp.y)||1),this.gl.uniform2f($f.uvOffset,((rf=E?.uvOffset)===null||rf===void 0?void 0:rf.x)||0,((Rh=E?.uvOffset)===null||Rh===void 0?void 0:Rh.y)||0),this.gl.uniform2f($f.alignment,Cl||0,Al||0),this.gl.uniform1f($f.opacity,E.opacity),this.gl.uniform3f($f.color,((xf=E?.color)===null||xf===void 0?void 0:xf.r)||0,((Ng=E?.color)===null||Ng===void 0?void 0:Ng.g)||0,((em=E?.color)===null||em===void 0?void 0:em.b)||0),this.gl.uniform1f($f.rotation,f.rotation),this.gl.uniform2fv($f.scale,Q),this.renderer.setDepthTest(E.depthTest),this.renderer.setDepthWrite(E.depthWrite),this.renderer.setTexture(E.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(rt,Uu){if(!this.gl)throw new Error("WebGL Rendering context not found");var Vd=this.gl.createProgram();if(!Vd)throw new Error("Error creating webgl program");var Eh=this.gl.createShader(this.gl.FRAGMENT_SHADER),ph=this.gl.createShader(this.gl.VERTEX_SHADER);if(!Eh)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!ph)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var jp="precision "+Uu+` float;
`;if(this.gl.shaderSource(Eh,jp+rt.fragmentShader),this.gl.shaderSource(ph,jp+rt.vertexShader),this.gl.compileShader(Eh),this.gl.compileShader(ph),!this.gl.getShaderParameter(Eh,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(ph,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(Eh)} 
      ${this.gl.getShaderInfoLog(ph)}`);return this.gl.attachShader(Vd,Eh),this.gl.attachShader(Vd,ph),this.gl.linkProgram(Vd),this.gl.getProgramParameter(Vd,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),Vd}}function lg(Kp,rt){return Kp.z!==rt.z?rt.z-Kp.z:rt.id-Kp.id}var sm=null,Cg=null;class S0{constructor(rt){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new Y.Vector3,this._worldInverse=new Y.Matrix4,this._projInverse=new Y.Matrix4,this._textureMatrix=new Y.Matrix4,this._fullProjModelMatrix=new Y.Matrix4,this._fullProjModelMatrixInv=new Y.Matrix4,this._direction=new Y.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new j0,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,rt=rt||{},this.row=rt.row,this.col=rt.col,this.rows=rt.rows,this.cols=rt.cols,this._canvas=rt.canvas!==void 0?rt.canvas:document.createElement("canvas"),this._precision=rt.precision!==void 0?rt.precision:"highp",this._alpha=rt.alpha===void 0||rt.alpha,this._premultipliedAlpha=rt.premultipliedAlpha===void 0||rt.premultipliedAlpha,this._antialias=rt.antialias!==void 0&&rt.antialias,this._upscale=rt.upscale!==void 0?rt.upscale:this._antialias,this._preserveDrawingBuffer=rt.preserveDrawingBuffer!==void 0&&rt.preserveDrawingBuffer,this._clearColor=rt.clearColor!==void 0?new $l.Color(rt.clearColor):new $l.Color(0),this._clearAlpha=rt.clearAlpha!==void 0?rt.clearAlpha:0,this._outlineMaterial=new eg(rt.outline),this._outlineSphereImposterMaterial=new Lg(rt.outline),this._outlineStickImposterMaterial=new Lm(rt.outline),this._outlineEnabled=!!rt.outline,this._AOEnabled=!!rt.ambientOcclusion,rt.ambientOcclusion&&rt.ambientOcclusion.strength!==void 0&&(this._AOstrength=parseFloat(rt.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),rt.ambientOcclusion&&rt.ambientOcclusion.radius!==void 0&&(this._AOradius=parseFloat(rt.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=rt.id,rt.containerWidth!=0&&rt.containerHeight!=0&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(rt,Uu){this._clearColor.setHex(rt),this._clearAlpha=Uu,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(rt){this._outlineMaterial=new eg(rt),this._outlineSphereImposterMaterial=new Lg(rt),this._outlineStickImposterMaterial=new Lm(rt),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(rt){rt&&(rt.strength&&(this._AOstrength=rt.strength),rt.scale&&(this._AOradius=rt.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var rt=this._gl.drawingBufferWidth/this.cols,Uu=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=rt,this._viewportHeight=Uu,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(rt*this.col,Uu*this.row,rt,Uu),this._gl.viewport(rt*this.col,Uu*this.row,rt,Uu)}}setSize(rt,Uu){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=rt*this.devicePixelRatio,this._canvas.height=Uu*this.devicePixelRatio,this._canvas.style.width=rt+"px",this._canvas.style.height=Uu+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(rt,Uu,Vd){var Eh=0;(rt===void 0||rt)&&(Eh|=this._gl.COLOR_BUFFER_BIT),(Uu===void 0||Uu)&&(Eh|=this._gl.DEPTH_BUFFER_BIT),(Vd===void 0||Vd)&&(Eh|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(Eh)}setMaterialFaces(rt,Uu){var Vd=rt.side===V,Eh=rt.side===$;rt.imposter||(Eh=Uu?!Eh:Eh),this._oldDoubleSided!==Vd&&(Vd?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=Vd),this._oldFlipSided!==Eh&&(Eh?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=Eh),this._gl.cullFace(this._gl.BACK)}setDepthTest(rt){this._oldDepthTest!==rt&&(rt?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=rt)}setDepthWrite(rt){this._oldDepthWrite!==rt&&(this._gl.depthMask(rt),this._oldDepthWrite=rt)}setBlending(rt){rt?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(rt,Uu,Vd,Eh){var ph,jp;if(rt.addEventListener("dispose",this.onMaterialDispose.bind(this)),jp=rt.shaderID){var _p=Vm[jp];rt.vertexShader=_p.vertexShader,rt.fragmentShader=_p.fragmentShader,rt.uniforms=l0.clone(_p.uniforms),rt.shaded&&rt.makeShaded(this.SHADE_TEXTURE)}ph={wireframe:rt.wireframe,fragdepth:rt.imposter,volumetric:rt.volumetric,shaded:rt.shaded},rt.program=this.buildProgram(rt.fragmentShader,rt.vertexShader,rt.uniforms,ph)}renderBuffer(rt,Uu,Vd,Eh,ph,jp){var _p,Gp;if(Eh.visible&&(_p=this.setProgram(rt,Uu,Vd,Eh,jp,this))){Gp=_p.attributes;var of,Bp,rf=!1,Rh=Eh.wireframe?1:0,xf=16777215*ph.id+2*_p.id+Rh;if(xf!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=xf,rf=!0),rf&&(this.disableAttributes(),Gp.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ph.__webglVertexBuffer),this.enableAttribute(Gp.position),this._gl.vertexAttribPointer(Gp.position,3,this._gl.FLOAT,!1,0,0)),Gp.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ph.__webglColorBuffer),this.enableAttribute(Gp.color),this._gl.vertexAttribPointer(Gp.color,3,this._gl.FLOAT,!1,0,0)),Gp.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ph.__webglNormalBuffer),this.enableAttribute(Gp.normal),this._gl.vertexAttribPointer(Gp.normal,3,this._gl.FLOAT,!1,0,0)),Gp.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ph.__webglOffsetBuffer),this.enableAttribute(Gp.offset),this._gl.vertexAttribPointer(Gp.offset,3,this._gl.FLOAT,!1,0,0)),Gp.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ph.__webglRadiusBuffer),this.enableAttribute(Gp.radius),this._gl.vertexAttribPointer(Gp.radius,1,this._gl.FLOAT,!1,0,0))),jp instanceof xh){if(Eh.shaderID==="instanced"){var Ng=Eh.sphere.geometryGroups[0];rf&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ph.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Ng.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ph.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Ng.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,ph.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Ng.faceArray,this._gl.STATIC_DRAW)),of=Ng.faceidx,this._extInstanced.vertexAttribDivisorANGLE(Gp.offset,1),this._extInstanced.vertexAttribDivisorANGLE(Gp.radius,1),this._extInstanced.vertexAttribDivisorANGLE(Gp.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,of,this._gl.UNSIGNED_SHORT,0,ph.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(Gp.offset,0),this._extInstanced.vertexAttribDivisorANGLE(Gp.radius,0),this._extInstanced.vertexAttribDivisorANGLE(Gp.color,0)}else Eh.wireframe?(Bp=ph.lineidx,this.setLineWidth(Eh.wireframeLinewidth),rf&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,ph.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,Bp,this._gl.UNSIGNED_SHORT,0)):(of=ph.faceidx,rf&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,ph.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,of,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=of,this.info.render.faces+=of/3}else jp instanceof Zd&&(Bp=ph.vertices,this.setLineWidth(Eh.linewidth),this._gl.drawArrays(this._gl.LINES,0,Bp),this.info.render.calls++)}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(rt,Uu,Vd){let Eh=rt.__lights,ph=rt.fog,jp=[];for(let of=0,Bp=rt.__webglObjects.length;of<Bp;of++){let rf=rt.__webglObjects[of];rf.render&&rf[Vd]&&jp.push(rf)}if(jp.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(rt.__webglObjects,!0,Vd+"Depth",Uu,Eh,ph,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let _p=this._AOshader.uniforms;this._gl.uniform1f(_p.total_strength,this._AOstrength),this._gl.uniform1f(_p.radius,this._AOradius),this._fullProjModelMatrix=new Y.Matrix4,this._fullProjModelMatrixInv=new Y.Matrix4;let Gp=jp[0].object;this._fullProjModelMatrix.multiplyMatrices(Uu.projectionMatrix,Gp._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(_p.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(_p.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(rt,Uu){if(Uu instanceof R0==0)return void console.error("Renderer.render: camera is not an instance of Camera.");var Vd,Eh,ph,jp,_p,Gp=rt.__lights,of=rt.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&rt.updateMatrixWorld(),Uu.parent===void 0&&Uu.updateMatrixWorld(),Uu.matrixWorldInverse.getInverse(Uu.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(rt),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),_p=rt.__webglObjects;let Bp=!1,rf=this._AOEnabled;for(Vd=0,Eh=_p.length;Vd<Eh;Vd++)jp=(ph=_p[Vd]).object,ph.render=!1,jp.visible&&(this.setupMatrices(jp,Uu),this.unrollBufferMaterial(ph),ph.render=!0,ph.volumetric&&(Bp=!0),ph.hasAO&&(rf=!0));if(this.setBlending(!1),rf&&this.setShading(rt,Uu,"opaque"),this.renderObjects(rt.__webglObjects,!0,"opaque",Uu,Gp,of,!1),rf&&this.clearShading(),this.renderSprites(rt,Uu,!1),this.renderObjects(rt.__webglObjects,!0,"transparentDepth",Uu,Gp,of,!0),this.renderObjects(rt.__webglObjects,!1,"transparent",Uu,Gp,of,!0),Bp&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(rt.__webglObjects,!1,"volumetric",Uu,Gp,of,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(rt,Uu,!0),this._bitmap){const Rh=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(Rh),Rh.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let rt=this._viewportWidth,Uu=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,rt,Uu),this._gl.viewport(0,0,rt,Uu),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,rt,Uu,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,rt,Uu,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,rt,Uu,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,rt,Uu,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let rt=this._viewportWidth,Uu=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,rt,Uu),this._gl.viewport(0,0,rt,Uu),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var Vd=this._antialias?Vm.screenaa:Vm.screen;this._screenshader=this.buildProgram(Vd.fragmentShader,Vd.vertexShader,Vd.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition"),this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),this._gl.STATIC_DRAW);let Eh=Vm.ssao;this._AOshader=this.buildProgram(Eh.fragmentShader,Eh.vertexShader,Eh.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let ph=Vm.blur;this._blurshader=this.buildProgram(ph.fragmentShader,ph.vertexShader,ph.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(rt){if(rt.__webglObjects||(rt.__webglObjects=[],rt.__webglObjectsImmediate=[],rt.__webglSprites=[],rt.__webglFlares=[]),rt.__objectsAdded.length){for(;rt.__objectsAdded.length;)this.addObject(rt.__objectsAdded[0],rt),rt.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;rt.__objectsRemoved.length;)this.removeObject(rt.__objectsRemoved[0],rt),rt.__objectsRemoved.splice(0,1);for(var Uu=0,Vd=rt.__webglObjects.length;Uu<Vd;Uu++)this.updateObject(rt.__webglObjects[Uu].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(rt,Uu){rt!=null&&Uu!=null||(rt=this._canvas.width,Uu=this._canvas.height);var Vd=rt/Uu;return this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&(Vd=rt/this.cols/(Uu/this.rows)),Vd}setTexture(rt,Uu,Vd){if(rt.needsUpdate){rt.__webglInit||(rt.__webglInit=!0,rt.addEventListener("dispose",this.onTextureDispose.bind(this)),rt.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+Uu);var Eh=Vd?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(Eh,rt.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,rt.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,rt.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,rt.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,rt.unpackAlignment);var ph=this.paramToGL(rt.format),jp=this.paramToGL(rt.type);if(Vd)this.setTextureParameters(this._gl.TEXTURE_3D,rt),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,rt.image.size.z,rt.image.size.y,rt.image.size.x,0,this._gl.RED,this._gl.FLOAT,rt.image.data);else{var _p=rt.image,Gp=_p.width,of=_p.height;Gp===void 0&&(Gp=_p.length,ph==this._gl.RGBA&&(Gp/=4),of=1),this.setTextureParameters(this._gl.TEXTURE_2D,rt),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,ph,ph,jp,rt.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,ph,Gp,of,0,ph,jp,rt.image)}rt.needsUpdate=!1,rt.onUpdate&&rt.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+Uu),Vd?this._gl.bindTexture(this._gl.TEXTURE_3D,rt.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,rt.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(rt){this._enabledAttributes[rt]||(this._gl.enableVertexAttribArray(rt),this._enabledAttributes[rt]=!0)}disableAttributes(){for(let rt in this._enabledAttributes)this._enabledAttributes[rt]&&(this._gl.disableVertexAttribArray(rt),this._enabledAttributes[rt]=!1)}setPolygonOffset(rt,Uu,Vd){this._oldPolygonOffset!==rt&&(rt?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(rt){rt!==this._oldLineWidth&&(this._gl.lineWidth(rt),this._oldLineWidth=rt)}deallocateGeometry(rt){if(rt.__webglInit=void 0,rt.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(rt.__webglVertexBuffer),rt.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(rt.__webglColorBuffer),rt.geometryGroups!==void 0)for(var Uu=0,Vd=rt.groups;Uu<Vd;Uu++){var Eh=rt.geometryGroups[Uu];Eh.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(Eh.__webglVertexBuffer),Eh.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(Eh.__webglColorBuffer),Eh.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(Eh.__webglNormalBuffer),Eh.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(Eh.__webglFaceBuffer),Eh.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(Eh.__webglLineBuffer)}}deallocateMaterial(rt){var Uu=rt.program;if(Uu!==void 0){var Vd,Eh,ph;rt.program=void 0;var jp=!1;for(Vd=0,Eh=this._programs.length;Vd<Eh;Vd++)if((ph=this._programs[Vd]).program===Uu){ph.usedTimes--,ph.usedTimes===0&&(jp=!0);break}if(jp===!0){var _p=[];for(Vd=0,Eh=this._programs.length;Vd<Eh;Vd++)(ph=this._programs[Vd]).program!==Uu&&_p.push(ph);this._programs=_p,this._gl.deleteProgram(Uu),this.info.memory.programs--}}}deallocateTexture(rt){if(rt.image&&rt.image.__webglTextureCube)this._gl.deleteTexture(rt.image.__webglTextureCube);else{if(!rt.__webglInit)return;rt.__webglInit=!1,this._gl.deleteTexture(rt.__webglTexture)}}onGeometryDispose(rt){var Uu=rt.target;Uu.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(Uu),this.info.memory.geometries--}onTextureDispose(rt){var Uu=rt.target;Uu.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(Uu),this.info.memory.textures--}onMaterialDispose(rt){var Uu=rt.target;Uu.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(Uu)}getShader(rt,Uu){var Vd;return this.isWebGL1()||Uu.startsWith("#version")||(Uu=Uu.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),Uu=`#version 300 es
`+(Uu=(Uu=(Uu=(Uu=(Uu=rt=="fragment"?Uu.replace(/varying/g,"in"):Uu.replace(/varying/g,"out")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;")).replace(/gl_FragColor/g,"glFragColor"))),rt==="fragment"?Vd=this._gl.createShader(this._gl.FRAGMENT_SHADER):rt==="vertex"&&(Vd=this._gl.createShader(this._gl.VERTEX_SHADER)),Vd==null?null:(this._gl.shaderSource(Vd,Uu),this._gl.compileShader(Vd),this._gl.getShaderParameter(Vd,this._gl.COMPILE_STATUS)?Vd:(console.error(this._gl.getShaderInfoLog(Vd)),console.error("could not initialize shader"),null))}buildProgram(rt,Uu,Vd,Eh){var ph,jp,_p,Gp,of=[];for(ph in of.push(rt),of.push(Uu),Eh)of.push(ph),of.push(Eh[ph]);for(Gp=of.join(),ph=0,jp=this._programs.length;ph<jp;ph++){var Bp=this._programs[ph];if(Bp.code===Gp)return Bp.usedTimes++,Bp.program}if(this.isWebGL1()&&Eh.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if((_p=this._gl.createProgram())==null)return null;var rf,Rh,xf,Ng="precision "+this._precision+" float;",em=[Eh.volumetric?"#version 300 es":"",Ng].join(`
`),Fm=[Eh.volumetric?"#version 300 es":"",Eh.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",Eh.shaded?"#define SHADED 1":"",Eh.wireframe?"#define WIREFRAME 1":"",Ng].join(`
`),Vf=this.getShader("fragment",Fm+rt),Yg=this.getShader("vertex",em+Uu);for(Rh in Yg!=null&&this._gl.attachShader(_p,Yg),Vf!=null&&this._gl.attachShader(_p,Vf),this._gl.linkProgram(_p),this._gl.getProgramParameter(_p,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),_p.uniforms={},_p.attributes={},rf=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"],Vd)rf.push(Rh);for(xf=0;xf<rf.length;xf++){var $f=rf[xf];_p.uniforms[$f]=this._gl.getUniformLocation(_p,$f)}for(rf=["position","normal","color","lineDistance","offset","radius"],xf=0;xf<rf.length;xf++){var Kg=rf[xf];_p.attributes[Kg]=this._gl.getAttribLocation(_p,Kg)}return _p.id=this._programs_counter++,this._programs.push({program:_p,code:Gp,usedTimes:1}),this.info.memory.programs=this._programs.length,_p}setProgram(rt,Uu,Vd,Eh,ph,jp){if(Eh.needsUpdate&&(Eh.program&&this.deallocateMaterial(Eh),this.initMaterial(Eh,Uu,Vd,ph),Eh.needsUpdate=!1),Eh.program==null)return null;var _p=!1,Gp=Eh.program,of=Gp.uniforms,Bp=Eh.uniforms;if(Gp!=this._currentProgram&&(this._gl.useProgram(Gp),this._currentProgram=Gp,_p=!0),Eh.id!=this._currentMaterialId&&(this._currentMaterialId=Eh.id,_p=!0),rt!=this._currentCamera&&(this._currentCamera=rt,_p=!0),of.projectionMatrix&&this._gl.uniformMatrix4fv(of.projectionMatrix,!1,rt.projectionMatrix.elements),of.modelViewMatrix&&this._gl.uniformMatrix4fv(of.modelViewMatrix,!1,ph._modelViewMatrix.elements),of.normalMatrix&&this._gl.uniformMatrix3fv(of.normalMatrix,!1,ph._normalMatrix.elements),of.projinv&&(this._projInverse.getInverse(rt.projectionMatrix),this._gl.uniformMatrix4fv(of.projinv,!1,this._projInverse.elements)),of.viewMatrix&&this._gl.uniformMatrix4fv(of.viewMatrix,!1,rt.matrixWorldInverse.elements),of.vWidth&&this._gl.uniform1f(of.vWidth,this._viewportWidth),of.vHeight&&this._gl.uniform1f(of.vHeight,this._viewportHeight),_p){if(Bp.fogColor.value=Vd.color,Bp.fogNear.value=Vd.near,Bp.fogFar.value=Vd.far,Eh.shaderID.startsWith("lambert")||Eh.shaderID==="instanced"||Eh.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(Gp,Uu),this._lightsNeedUpdate=!1),Bp.directionalLightColor.value=this._lights.directional.colors,Bp.directionalLightDirection.value=this._lights.directional.positions;else if(Eh.shaderID.endsWith("outline"))Bp.outlineColor.value=Eh.outlineColor,Bp.outlineWidth.value=Eh.outlineWidth,Bp.outlinePushback.value=Eh.outlinePushback,Bp.outlineMaxPixels.value=Eh.outlineMaxPixels*this.devicePixelRatio;else if(Eh.shaderID==="volumetric"){ph._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(ph._modelViewMatrix),this._projInverse.getInverse(rt.projectionMatrix),this._textureMatrix.multiplyMatrices(ph.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(of.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(of.projinv,!1,this._projInverse.elements);let rf=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);Bp.step.value=ph.material.unit*rf,Bp.maxdepth.value=ph.material.maxdepth*rf,Bp.transfermax.value=ph.material.transfermax,Bp.transfermin.value=ph.material.transfermin,Bp.subsamples.value=ph.material.subsamples,jp.setTexture(ph.material.transferfn,4,!1),jp.setTexture(ph.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}Bp.opacity.value=Eh.opacity,this.loadMaterialUniforms(of,Bp)}return Bp.shading&&(Bp.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),Gp}loadMaterialUniforms(rt,Uu){var Vd,Eh,ph,jp;for(Vd in Uu)rt[Vd]&&(Eh=Uu[Vd].type,ph=Uu[Vd].value,jp=rt[Vd],Eh==="f"?this._gl.uniform1f(jp,ph):Eh==="i"?this._gl.uniform1i(jp,ph):Eh==="fv"?this._gl.uniform3fv(jp,ph):Eh==="c"?this._gl.uniform3f(jp,ph.r,ph.g,ph.b):Eh==="f4"&&this._gl.uniform4f(jp,ph[0],ph[1],ph[2],ph[3]))}addObject(rt,Uu){var Vd,Eh,ph,jp;if(!rt.__webglInit&&(rt.__webglInit=!0,rt._modelViewMatrix=new Y.Matrix4,rt._normalMatrix=new Y.Matrix3,rt.geometry!==void 0&&rt.geometry.__webglInit===void 0&&(rt.geometry.__webglInit=!0,rt.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),rt instanceof xh||rt instanceof Zd))for(Vd=0,Eh=(ph=rt.geometry).geometryGroups.length;Vd<Eh;Vd++)(jp=ph.geometryGroups[Vd]).id=this._geometryGroupCounter++,jp.__webglVertexBuffer||(rt instanceof xh?(this.createMeshBuffers(jp),ph.elementsNeedUpdate=!0,ph.normalsNeedUpdate=!0):rt instanceof Zd&&this.createLineBuffers(jp),ph.verticesNeedUpdate=!0,ph.colorsNeedUpdate=!0);if(!rt.__webglActive){if(rt instanceof xh||rt instanceof Zd)for(Vd=0,Eh=(ph=rt.geometry).geometryGroups.length;Vd<Eh;Vd++)jp=ph.geometryGroups[Vd],this.addBuffer(Uu.__webglObjects,jp,rt);else rt instanceof Fp&&Uu.__webglSprites.push(rt);rt.__webglActive=!0}}updateObject(rt){var Uu,Vd=rt.geometry;if(rt instanceof xh||rt instanceof Zd){for(var Eh=0,ph=Vd.geometryGroups.length;Eh<ph;Eh++)Uu=Vd.geometryGroups[Eh],(Vd.verticesNeedUpdate||Vd.elementsNeedUpdate||Vd.colorsNeedUpdate||Vd.normalsNeedUpdate)&&this.setBuffers(Uu,this._gl.STATIC_DRAW);Vd.verticesNeedUpdate=!1,Vd.elementsNeedUpdate=!1,Vd.normalsNeedUpdate=!1,Vd.colorsNeedUpdate=!1,Vd.buffersNeedUpdate=!1}}removeObject(rt,Uu){rt instanceof xh||rt instanceof Zd?this.removeInstances(Uu.__webglObjects,rt):rt instanceof Fp&&this.removeInstancesDirect(Uu.__webglSprites,rt),rt.__webglActive=!1}removeInstances(rt,Uu){for(var Vd=rt.length-1;Vd>=0;--Vd)rt[Vd].object===Uu&&rt.splice(Vd,1)}removeInstancesDirect(rt,Uu){for(var Vd=rt.length-1;Vd>=0;--Vd)rt[Vd]===Uu&&rt.splice(Vd,1)}unrollBufferMaterial(rt){var Uu=rt.object.material;if(Uu.volumetric)rt.opaque=null,rt.transparent=null,rt.volumetric=Uu;else if(Uu.transparent){if(rt.opaque=null,rt.volumetric=null,rt.transparent=Uu,!Uu.wireframe){let Vd=Uu.clone();Vd.opacity=0,rt.transparentDepth=Vd}}else{if(rt.opaque=Uu,rt.transparent=null,rt.volumetric=null,!Uu.wireframe){let Vd=Uu.clone();Vd.opacity=0,rt.opaqueDepth=Vd}Uu.hasAO&&(rt.hasAO=!0),(this._AOEnabled||rt.hasAO)&&(rt.opaqueShaded=Uu.clone(),rt.opaqueShaded.shaded=!0)}}setBuffers(rt,Uu){var Vd=rt.vertexArray,Eh=rt.colorArray;if(rt.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,rt.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Vd,Uu)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,rt.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Vd,Uu)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,rt.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Eh,Uu),rt.normalArray&&rt.__webglNormalBuffer!==void 0){var ph=rt.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,rt.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,ph,Uu)}if(rt.radiusArray&&rt.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,rt.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,rt.radiusArray,Uu)),rt.faceArray&&rt.__webglFaceBuffer!==void 0){var jp=rt.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,rt.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,jp,Uu)}if(rt.lineArray&&rt.__webglLineBuffer!==void 0){var _p=rt.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,rt.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,_p,Uu)}}createMeshBuffers(rt){rt.radiusArray&&(rt.__webglRadiusBuffer=this._gl.createBuffer()),rt.useOffset&&(rt.__webglOffsetBuffer=this._gl.createBuffer()),rt.__webglVertexBuffer=this._gl.createBuffer(),rt.__webglNormalBuffer=this._gl.createBuffer(),rt.__webglColorBuffer=this._gl.createBuffer(),rt.__webglFaceBuffer=this._gl.createBuffer(),rt.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(rt){rt.__webglVertexBuffer=this._gl.createBuffer(),rt.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(rt,Uu,Vd){rt.push({buffer:Uu,object:Vd,opaque:null,transparent:null})}setupMatrices(rt,Uu){rt._modelViewMatrix.multiplyMatrices(Uu.matrixWorldInverse,rt.matrixWorld),rt._normalMatrix.getInverse(rt._modelViewMatrix),rt._normalMatrix.transpose()}filterFallback(rt){return this._gl.LINEAR}setTextureParameters(rt,Uu){rt==this._gl.TEXTURE_2D?(this._gl.texParameteri(rt,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(rt,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(rt,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(Uu.magFilter)),this._gl.texParameteri(rt,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(Uu.minFilter))):(this._gl.texParameteri(rt,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(rt,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(rt,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(rt,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(rt,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(rt,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(rt,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(rt){return rt===Ml?this._gl.UNSIGNED_BYTE:rt===_u?this._gl.RGBA:rt===ml?this._gl.NEAREST:0}setupLights(rt,Uu){var Vd,Eh,ph,jp,_p,Gp=this._lights,of=Gp.directional.colors,Bp=Gp.directional.positions,rf=0,Rh=0;for(Vd=0,Eh=Uu.length;Vd<Eh;Vd++)if(jp=(ph=Uu[Vd]).color,_p=ph.intensity,ph instanceof Nl){if(this._direction.getPositionFromMatrix(ph.matrixWorld),this._vector3.getPositionFromMatrix(ph.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;Bp[Rh]=this._direction.x,Bp[Rh+1]=this._direction.y,Bp[Rh+2]=this._direction.z,of[Rh]=jp.r*_p,of[Rh+1]=jp.g*_p,of[Rh+2]=jp.b*_p,Rh+=3,rf++}Gp.ambient[0]=0,Gp.ambient[1]=0,Gp.ambient[2]=0,Gp.directional.length=rf}initGL(){try{if(!OffscreenCanvas||this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context."}else(Cg==null||Cg.isContextLost())&&(sm=new OffscreenCanvas(this._canvas.width,this._canvas.height),Cg=sm.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=sm,this._gl=Cg,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});var rt=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(rt[6])}catch(Uu){console.error(Uu)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(rt,Uu,Vd,Eh,ph,jp,_p){var Gp,of,Bp,rf,Rh,xf,Ng;Uu?(Rh=rt.length-1,xf=-1,Ng=-1):(Rh=0,xf=rt.length,Ng=1);for(var em=Rh;em!==xf;em+=Ng)if((Gp=rt[em]).render){if(of=Gp.object,Bp=Gp.buffer,rf=Gp[Vd],(Gp.hasAO||this._AOEnabled)&&Gp[Vd+"Shaded"]&&(rf=Gp[Vd+"Shaded"]),!rf)continue;this.setBlending(_p),this.setDepthTest(rf.depthTest),this.setDepthWrite(rf.depthWrite),this.setPolygonOffset(rf.polygonOffset,rf.polygonOffsetFactor,rf.polygonOffsetUnits);var Fm=of._modelViewMatrix.isReflected();if(this.setMaterialFaces(rf,Fm),this.renderBuffer(Eh,ph,jp,rf,Bp,of),(this._outlineEnabled||rf.outline)&&!rf.wireframe&&rf.shaderID!=="basic"&&rf.opacity!==0){let Vf=this._outlineMaterial;rf.shaderID=="sphereimposter"?Vf=this._outlineSphereImposterMaterial:rf.shaderID=="stickimposter"&&(Vf=this._outlineStickImposterMaterial),this.renderBuffer(Eh,ph,jp,Vf,Bp,of)}}}renderSprites(rt,Uu,Vd){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(rt,Uu,this._currentWidth,this._currentHeight,Vd),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},392:(n,h,s)=>{s.r(h),s.d(h,{assignBonds:()=>V});var _=s(408);const M=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],$=4.95;function V(oe,Y){for(let Et=0,ml=oe.length;Et<ml;Et++)oe[Et].index||(oe[Et].index=Et);const ie={x:{y:{z:[]}}};for(let Et=0;Et<oe.length;Et++){const ml=oe[Et],rl=Math.floor(ml.x/$),Ml=Math.floor(ml.y/$),kl=Math.floor(ml.z/$);ie[rl]||(ie[rl]={}),ie[rl][Ml]||(ie[rl][Ml]={}),ie[rl][Ml][kl]||(ie[rl][Ml][kl]=[]),ie[rl][Ml][kl].push(ml)}function zn(Et,ml){for(let rl=0;rl<Et.length;rl++){const Ml=Et[rl];for(let kl=0;kl<ml.length;kl++){const _u=ml[kl];if((0,_.areConnected)(Ml,_u,Y)){const Hu=Ml.bonds.indexOf(_u.index),bu=_u.bonds.indexOf(Ml.index);Hu===-1&&bu===-1?(Ml.bonds.push(_u.index),Ml.bondOrder.push(1),_u.bonds.push(Ml.index),_u.bondOrder.push(1)):Hu===-1?(Ml.bonds.push(_u.index),Ml.bondOrder.push(_u.bondOrder[bu])):bu===-1&&(_u.bonds.push(Ml.index),_u.bondOrder.push(Ml.bondOrder[Hu]))}}}}for(let Et in ie){const ml=parseInt(Et);for(let rl in ie[ml]){const Ml=parseInt(rl);for(let kl in ie[ml][Ml]){const _u=parseInt(kl),Hu=ie[ml][Ml][_u];for(let bu=0;bu<Hu.length;bu++){const dl=Hu[bu];for(let Tl=bu+1;Tl<Hu.length;Tl++){const $l=Hu[Tl];(0,_.areConnected)(dl,$l,Y)&&dl.bonds.indexOf($l.index)==-1&&(dl.bonds.push($l.index),dl.bondOrder.push(1),$l.bonds.push(dl.index),$l.bondOrder.push(1))}}for(let bu=0;bu<M.length;bu++){const dl=M[bu];ie[ml+dl.x]&&ie[ml+dl.x][Ml+dl.y]&&ie[ml+dl.x][Ml+dl.y][_u+dl.z]&&zn(Hu,ie[ml+dl.x][Ml+dl.y][_u+dl.z])}}}}}},407:n=>{var h=(function(){for(var s,_=[],M=0;M<256;M++){s=M;for(var $=0;$<8;$++)s=1&s?3988292384^s>>>1:s>>>1;_[M]=s}return _})();n.exports=function(s,_,M,$){var V=h,oe=$+M;s^=-1;for(var Y=$;Y<oe;Y++)s=s>>>8^V[255&(s^_[Y])];return-1^s}},408:(n,h,s)=>{s.r(h),s.d(h,{areConnected:()=>$});var _=s(40);const M=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function $(V,oe,Y){if(Y&&Y.unboundCations&&(M.has(V.elem)||M.has(oe.elem)))return!1;let ie=(0,_.bondLength)(V.elem)+(0,_.bondLength)(oe.elem);ie+=.25,ie*=ie;let zn=V.x-oe.x;if(zn*=zn,zn>ie)return!1;let Et=V.y-oe.y;if(Et*=Et,Et>ie)return!1;let ml=V.z-oe.z;if(ml*=ml,ml>ie)return!1;const rl=zn+Et+ml;return!(isNaN(rl)||rl<.5||rl>ie||V.altLoc!==oe.altLoc&&V.altLoc.trim()!==""&&oe.altLoc.trim()!=="")}},471:function(n,h){(function(s){function _(_d,Zd,xh){for(var Fp=(_d.byteLength,0),ip=xh.length;ip>Fp;Fp++){var cf=xh.charCodeAt(Fp);if(128>cf)_d.setUint8(Zd++,cf>>>0&127);else if(2048>cf)_d.setUint8(Zd++,cf>>>6&31|192),_d.setUint8(Zd++,cf>>>0&63|128);else if(65536>cf)_d.setUint8(Zd++,cf>>>12&15|224),_d.setUint8(Zd++,cf>>>6&63|128),_d.setUint8(Zd++,cf>>>0&63|128);else{if(!(1114112>cf))throw new Error("bad codepoint "+cf);_d.setUint8(Zd++,cf>>>18&7|240),_d.setUint8(Zd++,cf>>>12&63|128),_d.setUint8(Zd++,cf>>>6&63|128),_d.setUint8(Zd++,cf>>>0&63|128)}}}function M(_d){for(var Zd=0,xh=0,Fp=_d.length;Fp>xh;xh++){var ip=_d.charCodeAt(xh);if(128>ip)Zd+=1;else if(2048>ip)Zd+=2;else if(65536>ip)Zd+=3;else{if(!(1114112>ip))throw new Error("bad codepoint "+ip);Zd+=4}}return Zd}function $(_d,Zd,xh){var Fp=typeof _d;if(Fp==="string"){if(32>(ip=M(_d)))return Zd.setUint8(xh,160|ip),_(Zd,xh+1,_d),1+ip;if(256>ip)return Zd.setUint8(xh,217),Zd.setUint8(xh+1,ip),_(Zd,xh+2,_d),2+ip;if(65536>ip)return Zd.setUint8(xh,218),Zd.setUint16(xh+1,ip),_(Zd,xh+3,_d),3+ip;if(4294967296>ip)return Zd.setUint8(xh,219),Zd.setUint32(xh+1,ip),_(Zd,xh+5,_d),5+ip}if(_d instanceof Uint8Array){var ip=_d.byteLength,cf=new Uint8Array(Zd.buffer);if(256>ip)return Zd.setUint8(xh,196),Zd.setUint8(xh+1,ip),cf.set(_d,xh+2),2+ip;if(65536>ip)return Zd.setUint8(xh,197),Zd.setUint16(xh+1,ip),cf.set(_d,xh+3),3+ip;if(4294967296>ip)return Zd.setUint8(xh,198),Zd.setUint32(xh+1,ip),cf.set(_d,xh+5),5+ip}if(Fp==="number"){if(!isFinite(_d))throw new Error("Number not finite: "+_d);if(Math.floor(_d)!==_d)return Zd.setUint8(xh,203),Zd.setFloat64(xh+1,_d),9;if(_d>=0){if(128>_d)return Zd.setUint8(xh,_d),1;if(256>_d)return Zd.setUint8(xh,204),Zd.setUint8(xh+1,_d),2;if(65536>_d)return Zd.setUint8(xh,205),Zd.setUint16(xh+1,_d),3;if(4294967296>_d)return Zd.setUint8(xh,206),Zd.setUint32(xh+1,_d),5;throw new Error("Number too big 0x"+_d.toString(16))}if(_d>=-32)return Zd.setInt8(xh,_d),1;if(_d>=-128)return Zd.setUint8(xh,208),Zd.setInt8(xh+1,_d),2;if(_d>=-32768)return Zd.setUint8(xh,209),Zd.setInt16(xh+1,_d),3;if(_d>=-2147483648)return Zd.setUint8(xh,210),Zd.setInt32(xh+1,_d),5;throw new Error("Number too small -0x"+(-_d).toString(16).substr(1))}if(_d===null)return Zd.setUint8(xh,192),1;if(Fp==="boolean")return Zd.setUint8(xh,_d?195:194),1;if(Fp==="object"){var Jh=0,lf=Array.isArray(_d);if(lf)ip=_d.length;else{var vf=Object.keys(_d);ip=vf.length}if(16>ip?(Zd.setUint8(xh,ip|(lf?144:128)),Jh=1):65536>ip?(Zd.setUint8(xh,lf?220:222),Zd.setUint16(xh+1,ip),Jh=3):4294967296>ip&&(Zd.setUint8(xh,lf?221:223),Zd.setUint32(xh+1,ip),Jh=5),lf)for(var uf=0;ip>uf;uf++)Jh+=$(_d[uf],Zd,xh+Jh);else for(uf=0;ip>uf;uf++){var Gf=vf[uf];Jh+=$(Gf,Zd,xh+Jh),Jh+=$(_d[Gf],Zd,xh+Jh)}return Jh}throw new Error("Unknown type "+Fp)}function V(_d){var Zd=typeof _d;if(Zd==="string"){if(32>(xh=M(_d)))return 1+xh;if(256>xh)return 2+xh;if(65536>xh)return 3+xh;if(4294967296>xh)return 5+xh}if(_d instanceof Uint8Array){if(256>(xh=_d.byteLength))return 2+xh;if(65536>xh)return 3+xh;if(4294967296>xh)return 5+xh}if(Zd==="number"){if(Math.floor(_d)!==_d)return 9;if(_d>=0){if(128>_d)return 1;if(256>_d)return 2;if(65536>_d)return 3;if(4294967296>_d)return 5;throw new Error("Number too big 0x"+_d.toString(16))}if(_d>=-32)return 1;if(_d>=-128)return 2;if(_d>=-32768)return 3;if(_d>=-2147483648)return 5;throw new Error("Number too small -0x"+_d.toString(16).substr(1))}if(Zd==="boolean"||_d===null)return 1;if(Zd==="object"){var xh,Fp=0;if(Array.isArray(_d)){xh=_d.length;for(var ip=0;xh>ip;ip++)Fp+=V(_d[ip])}else{var cf=Object.keys(_d);for(xh=cf.length,ip=0;xh>ip;ip++){var Jh=cf[ip];Fp+=V(Jh)+V(_d[Jh])}}if(16>xh)return 1+Fp;if(65536>xh)return 3+Fp;if(4294967296>xh)return 5+Fp;throw new Error("Array or object too long 0x"+xh.toString(16))}throw new Error("Unknown type "+Zd)}function oe(_d){var Zd=new ArrayBuffer(V(_d));return $(_d,new DataView(Zd),0),new Uint8Array(Zd)}function Y(_d,Zd,xh){return Zd?new _d(Zd.buffer,Zd.byteOffset,Zd.byteLength/(xh||1)):void 0}function ie(_d){return Y(DataView,_d)}function zn(_d){return Y(Uint8Array,_d)}function Et(_d){return Y(Int8Array,_d)}function ml(_d){return Y(Int32Array,_d,4)}function rl(_d){return Y(Float32Array,_d,4)}function Ml(_d,Zd){var xh=_d.length/2;Zd||(Zd=new Int16Array(xh));for(var Fp=0,ip=0;xh>Fp;++Fp,ip+=2)Zd[Fp]=_d[ip]<<8^_d[ip+1];return Zd}function kl(_d,Zd){var xh=_d.length;Zd||(Zd=new Uint8Array(2*xh));for(var Fp=ie(Zd),ip=0;xh>ip;++ip)Fp.setInt16(2*ip,_d[ip]);return zn(Zd)}function _u(_d,Zd){var xh=_d.length/4;Zd||(Zd=new Int32Array(xh));for(var Fp=0,ip=0;xh>Fp;++Fp,ip+=4)Zd[Fp]=_d[ip]<<24^_d[ip+1]<<16^_d[ip+2]<<8^_d[ip+3];return Zd}function Hu(_d,Zd){var xh=_d.length;Zd||(Zd=new Uint8Array(4*xh));for(var Fp=ie(Zd),ip=0;xh>ip;++ip)Fp.setInt32(4*ip,_d[ip]);return zn(Zd)}function bu(_d,Zd){var xh=_d.length;Zd||(Zd=new Float32Array(xh/4));for(var Fp=ie(Zd),ip=ie(_d),cf=0,Jh=0,lf=xh/4;lf>cf;++cf,Jh+=4)Fp.setFloat32(Jh,ip.getFloat32(Jh),!0);return Zd}function dl(_d,Zd,xh){var Fp=_d.length,ip=1/Zd;xh||(xh=new Float32Array(Fp));for(var cf=0;Fp>cf;++cf)xh[cf]=_d[cf]*ip;return xh}function Tl(_d,Zd,xh){var Fp=_d.length;xh||(xh=new Int32Array(Fp));for(var ip=0;Fp>ip;++ip)xh[ip]=Math.round(_d[ip]*Zd);return xh}function $l(_d,Zd){var xh,Fp;if(!Zd){var ip=0;for(xh=0,Fp=_d.length;Fp>xh;xh+=2)ip+=_d[xh+1];Zd=new _d.constructor(ip)}var cf=0;for(xh=0,Fp=_d.length;Fp>xh;xh+=2)for(var Jh=_d[xh],lf=_d[xh+1],vf=0;lf>vf;++vf)Zd[cf]=Jh,++cf;return Zd}function Bl(_d){if(_d.length===0)return new Int32Array;var Zd,xh,Fp=2;for(Zd=1,xh=_d.length;xh>Zd;++Zd)_d[Zd-1]!==_d[Zd]&&(Fp+=2);var ip=new Int32Array(Fp),cf=0,Jh=1;for(Zd=1,xh=_d.length;xh>Zd;++Zd)_d[Zd-1]!==_d[Zd]?(ip[cf]=_d[Zd-1],ip[cf+1]=Jh,Jh=1,cf+=2):++Jh;return ip[cf]=_d[_d.length-1],ip[cf+1]=Jh,ip}function Pu(_d,Zd){var xh=_d.length;Zd||(Zd=new _d.constructor(xh)),xh&&(Zd[0]=_d[0]);for(var Fp=1;xh>Fp;++Fp)Zd[Fp]=_d[Fp]+Zd[Fp-1];return Zd}function Il(_d,Zd){var xh=_d.length;Zd||(Zd=new _d.constructor(xh)),Zd[0]=_d[0];for(var Fp=1;xh>Fp;++Fp)Zd[Fp]=_d[Fp]-_d[Fp-1];return Zd}function ud(_d,Zd){var xh,Fp,ip=_d instanceof Int8Array?127:32767,cf=-ip-1,Jh=_d.length;if(!Zd){var lf=0;for(xh=0;Jh>xh;++xh)_d[xh]<ip&&_d[xh]>cf&&++lf;Zd=new Int32Array(lf)}for(xh=0,Fp=0;Jh>xh;){for(var vf=0;_d[xh]===ip||_d[xh]===cf;)vf+=_d[xh],++xh;vf+=_d[xh],++xh,Zd[Fp]=vf,++Fp}return Zd}function pd(_d,Zd){var xh,Fp=32767,ip=-Fp-1,cf=_d.length,Jh=0;for(xh=0;cf>xh;++xh)(uf=_d[xh])===0?++Jh:uf>0?(Jh+=Math.ceil(uf/Fp),uf%Fp===0&&(Jh+=1)):(Jh+=Math.ceil(uf/ip),uf%ip===0&&(Jh+=1));var lf=new Int16Array(Jh),vf=0;for(xh=0;cf>xh;++xh){var uf;if((uf=_d[xh])>=0)for(;uf>=Fp;)lf[vf]=Fp,++vf,uf-=Fp;else for(;ip>=uf;)lf[vf]=ip,++vf,uf-=ip;lf[vf]=uf,++vf}return lf}function id(_d,Zd){return Pu($l(_d),Zd)}function rh(_d){return Bl(Il(_d))}function qd(_d,Zd,xh){return dl($l(_d,ml(xh)),Zd,xh)}function oh(_d,Zd){return Bl(Tl(_d,Zd))}function Ed(_d,Zd,xh){return dl(Pu(_d,ml(xh)),Zd,xh)}function Nl(_d,Zd,xh){return Il(Tl(_d,Zd),xh)}function Gd(_d,Zd,xh){return dl(ud(_d,ml(xh)),Zd,xh)}function Cd(_d,Zd,xh){var Fp=ud(_d,ml(xh));return Ed(Fp,Zd,rl(Fp))}function Bu(_d,Zd,xh){return pd(Nl(_d,Zd))}function wh(_d){var Zd=ie(_d),xh=Zd.getInt32(0),Fp=Zd.getInt32(4),ip=_d.subarray(8,12);return[xh,_d=_d.subarray(12),Fp,ip]}function Rd(_d,Zd,xh,Fp){var ip=new ArrayBuffer(12+Fp.byteLength),cf=new Uint8Array(ip),Jh=new DataView(ip);return Jh.setInt32(0,_d),Jh.setInt32(4,Zd),xh&&cf.set(xh,8),cf.set(Fp,12),cf}function dh(_d){return Rd(2,_d.length,void 0,zn(_d))}function Ih(_d){return Rd(4,_d.length,void 0,Hu(_d))}function nd(_d,Zd){return Rd(5,_d.length/Zd,Hu([Zd]),zn(_d))}function Yd(_d){return Rd(6,_d.length,void 0,Hu(Bl(_d)))}function Kh(_d){return Rd(8,_d.length,void 0,Hu(rh(_d)))}function rp(_d,Zd){return Rd(9,_d.length,Hu([Zd]),Hu(oh(_d,Zd)))}function lh(_d,Zd){return Rd(10,_d.length,Hu([Zd]),kl(Bu(_d,Zd)))}function yp(_d){var Zd={};return eg.forEach(function(xh){_d[xh]!==void 0&&(Zd[xh]=_d[xh])}),_d.bondAtomList&&(Zd.bondAtomList=Ih(_d.bondAtomList)),_d.bondOrderList&&(Zd.bondOrderList=dh(_d.bondOrderList)),Zd.xCoordList=lh(_d.xCoordList,1e3),Zd.yCoordList=lh(_d.yCoordList,1e3),Zd.zCoordList=lh(_d.zCoordList,1e3),_d.bFactorList&&(Zd.bFactorList=lh(_d.bFactorList,100)),_d.atomIdList&&(Zd.atomIdList=Kh(_d.atomIdList)),_d.altLocList&&(Zd.altLocList=Yd(_d.altLocList)),_d.occupancyList&&(Zd.occupancyList=rp(_d.occupancyList,100)),Zd.groupIdList=Kh(_d.groupIdList),Zd.groupTypeList=Ih(_d.groupTypeList),_d.secStructList&&(Zd.secStructList=dh(_d.secStructList)),_d.insCodeList&&(Zd.insCodeList=Yd(_d.insCodeList)),_d.sequenceIndexList&&(Zd.sequenceIndexList=Kh(_d.sequenceIndexList)),Zd.chainIdList=nd(_d.chainIdList,4),_d.chainNameList&&(Zd.chainNameList=nd(_d.chainNameList,4)),Zd}function Cp(_d){function Zd(vf){for(var uf={},Gf=0;vf>Gf;Gf++)uf[cf()]=cf();return uf}function xh(vf){var uf=_d.subarray(Jh,Jh+vf);return Jh+=vf,uf}function Fp(vf){var uf=_d.subarray(Jh,Jh+vf);Jh+=vf;var Gf=65535;if(vf>Gf){for(var Hm=[],Vg=0;Vg<uf.length;Vg+=Gf)Hm.push(String.fromCharCode.apply(null,uf.subarray(Vg,Vg+Gf)));return Hm.join("")}return String.fromCharCode.apply(null,uf)}function ip(vf){for(var uf=new Array(vf),Gf=0;vf>Gf;Gf++)uf[Gf]=cf();return uf}function cf(){var vf,uf,Gf=_d[Jh];if(!(128&Gf))return Jh++,Gf;if((240&Gf)==128)return Jh++,Zd(uf=15&Gf);if((240&Gf)==144)return Jh++,ip(uf=15&Gf);if((224&Gf)==160)return Jh++,Fp(uf=31&Gf);if(!(224&~Gf))return vf=lf.getInt8(Jh),Jh++,vf;switch(Gf){case 192:return Jh++,null;case 194:return Jh++,!1;case 195:return Jh++,!0;case 196:return uf=lf.getUint8(Jh+1),Jh+=2,xh(uf);case 197:return uf=lf.getUint16(Jh+1),Jh+=3,xh(uf);case 198:return uf=lf.getUint32(Jh+1),Jh+=5,xh(uf);case 202:return vf=lf.getFloat32(Jh+1),Jh+=5,vf;case 203:return vf=lf.getFloat64(Jh+1),Jh+=9,vf;case 204:return vf=_d[Jh+1],Jh+=2,vf;case 205:return vf=lf.getUint16(Jh+1),Jh+=3,vf;case 206:return vf=lf.getUint32(Jh+1),Jh+=5,vf;case 208:return vf=lf.getInt8(Jh+1),Jh+=2,vf;case 209:return vf=lf.getInt16(Jh+1),Jh+=3,vf;case 210:return vf=lf.getInt32(Jh+1),Jh+=5,vf;case 217:return uf=lf.getUint8(Jh+1),Jh+=2,Fp(uf);case 218:return uf=lf.getUint16(Jh+1),Jh+=3,Fp(uf);case 219:return uf=lf.getUint32(Jh+1),Jh+=5,Fp(uf);case 220:return uf=lf.getUint16(Jh+1),Jh+=3,ip(uf);case 221:return uf=lf.getUint32(Jh+1),Jh+=5,ip(uf);case 222:return uf=lf.getUint16(Jh+1),Jh+=3,Zd(uf);case 223:return uf=lf.getUint32(Jh+1),Jh+=5,Zd(uf)}throw new Error("Unknown type 0x"+Gf.toString(16))}var Jh=0,lf=new DataView(_d.buffer);return cf()}function vp(_d,Zd,xh,Fp){switch(_d){case 1:return bu(Zd);case 2:return Et(Zd);case 3:return Ml(Zd);case 4:return _u(Zd);case 5:return zn(Zd);case 6:return $l(_u(Zd),new Uint8Array(xh));case 7:return $l(_u(Zd));case 8:return id(_u(Zd));case 9:return qd(_u(Zd),_u(Fp)[0]);case 10:return Cd(Ml(Zd),_u(Fp)[0]);case 11:return dl(Ml(Zd),_u(Fp)[0]);case 12:return Gd(Ml(Zd),_u(Fp)[0]);case 13:return Gd(Et(Zd),_u(Fp)[0]);case 14:return ud(Ml(Zd));case 15:return ud(Et(Zd))}}function mf(_d,Zd){var xh=(Zd=Zd||{}).ignoreFields,Fp={};return Lg.forEach(function(ip){var cf=!!xh&&xh.indexOf(ip)!==-1,Jh=_d[ip];cf||Jh===void 0||(Jh instanceof Uint8Array?Fp[ip]=vp.apply(null,wh(Jh)):Fp[ip]=Jh)}),Fp}function Zp(_d){return String.fromCharCode.apply(null,_d).replace(/\0/g,"")}function kf(_d,Zd,xh){var Fp,ip,cf,Jh,lf,vf,uf=(xh=xh||{}).firstModelOnly,Gf=Zd.onModel,Hm=Zd.onChain,Vg=Zd.onGroup,Im=Zd.onAtom,qg=Zd.onBond,vm=0,am=0,Jg=0,pf=0,ff=0,r0=-1,M0=_d.chainNameList,wf=_d.secStructList,Gm=_d.insCodeList,h0=_d.sequenceIndexList,i0=_d.atomIdList,Tm=_d.bFactorList,Vm=_d.altLocList,ym=_d.occupancyList,l0=_d.bondAtomList,R0=_d.bondOrderList;for(Fp=0,ip=_d.chainsPerModel.length;ip>Fp&&!(uf&&vm>0);++Fp){var p0=_d.chainsPerModel[vm];for(Gf&&Gf({chainCount:p0,modelIndex:vm}),cf=0;p0>cf;++cf){var j0=_d.groupsPerChain[am];if(Hm){var lg=Zp(_d.chainIdList.subarray(4*am,4*am+4)),sm=null;M0&&(sm=Zp(M0.subarray(4*am,4*am+4))),Hm({groupCount:j0,chainIndex:am,modelIndex:vm,chainId:lg,chainName:sm})}for(Jh=0;j0>Jh;++Jh){var Cg=_d.groupList[_d.groupTypeList[Jg]],S0=Cg.atomNameList.length;if(Vg){var Kp=null;wf&&(Kp=wf[Jg]);var rt=null;_d.insCodeList&&(rt=String.fromCharCode(Gm[Jg]));var Uu=null;h0&&(Uu=h0[Jg]),Vg({atomCount:S0,groupIndex:Jg,chainIndex:am,modelIndex:vm,groupId:_d.groupIdList[Jg],groupType:_d.groupTypeList[Jg],groupName:Cg.groupName,singleLetterCode:Cg.singleLetterCode,chemCompType:Cg.chemCompType,secStruct:Kp,insCode:rt,sequenceIndex:Uu})}for(lf=0;S0>lf;++lf){if(Im){var Vd=null;i0&&(Vd=i0[pf]);var Eh=null;Tm&&(Eh=Tm[pf]);var ph=null;Vm&&(ph=String.fromCharCode(Vm[pf]));var jp=null;ym&&(jp=ym[pf]),Im({atomIndex:pf,groupIndex:Jg,chainIndex:am,modelIndex:vm,atomId:Vd,element:Cg.elementList[lf],atomName:Cg.atomNameList[lf],formalCharge:Cg.formalChargeList[lf],xCoord:_d.xCoordList[pf],yCoord:_d.yCoordList[pf],zCoord:_d.zCoordList[pf],bFactor:Eh,altLoc:ph,occupancy:jp})}pf+=1}if(qg){var _p=Cg.bondAtomList;for(lf=0,vf=Cg.bondOrderList.length;vf>lf;++lf)qg({atomIndex1:pf-S0+_p[2*lf],atomIndex2:pf-S0+_p[2*lf+1],bondOrder:Cg.bondOrderList[lf]})}Jg+=1}am+=1}if(ff=r0+1,r0=pf-1,qg&&l0)for(lf=0,vf=l0.length;vf>lf;lf+=2){var Gp=l0[lf],of=l0[lf+1];(Gp>=ff&&r0>=Gp||of>=ff&&r0>=of)&&qg({atomIndex1:Gp,atomIndex2:of,bondOrder:R0?R0[lf/2]:null})}vm+=1}}function Eg(_d){return oe(yp(_d))}function Gg(_d,Zd){return _d instanceof ArrayBuffer&&(_d=new Uint8Array(_d)),mf(_d instanceof Uint8Array?Cp(_d):_d,Zd)}function Hf(_d,Zd,xh,Fp){function ip(){try{var Jh=Gg(cf.response);xh(Jh)}catch(lf){Fp(lf)}}var cf=new XMLHttpRequest;cf.addEventListener("load",ip,!0),cf.addEventListener("error",Fp,!0),cf.responseType="arraybuffer",cf.open("GET",Zd+_d.toUpperCase()),cf.send()}function Rg(_d,Zd,xh){Hf(_d,Lm,Zd,xh)}function fg(_d,Zd,xh){Hf(_d,$m,Zd,xh)}var eg=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],Wg=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],Lg=eg.concat(Wg),$g="v1.0.1",Bm="//mmtf.rcsb.org/v1.0/",Lm=Bm+"full/",$m=Bm+"reduced/";s.encode=Eg,s.decode=Gg,s.traverse=kf,s.fetch=Rg,s.fetchReduced=fg,s.version=$g,s.fetchUrl=Lm,s.fetchReducedUrl=$m,s.encodeMsgpack=oe,s.encodeMmtf=yp,s.decodeMsgpack=Cp,s.decodeMmtf=mf})(h)},529:(n,h,s)=>{s.r(h),s.d(h,{Matrix3:()=>kl,Matrix4:()=>rl,Quaternion:()=>_,Ray:()=>_u,Vector2:()=>M,Vector3:()=>Ml,clamp:()=>$,conversionMatrix3:()=>Hu,degToRad:()=>oe});class _{constructor(dl,Tl,$l,Bl){this.x=dl||0,this.y=Tl||0,this.z=$l||0,this.w=Bl!==void 0?Bl:1}set(dl,Tl,$l,Bl){return this.x=dl,this.y=Tl,this.z=$l,this.w=Bl,this}copy(dl){return this.x=dl.x,this.y=dl.y,this.z=dl.z,this.w=dl.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let dl=this.length();return dl===0?(this.x=0,this.y=0,this.z=0,this.w=1):(dl=1/dl,this.x*=dl,this.y*=dl,this.z*=dl,this.w*=dl),this}multiply(dl){return this.multiplyQuaternions(this,dl)}multiplyScalar(dl){return this.x*=dl,this.y*=dl,this.z*=dl,this.w*=dl,this}multiplyQuaternions(dl,Tl){const $l=dl.x,Bl=dl.y,Pu=dl.z,Il=dl.w,ud=Tl.x,pd=Tl.y,id=Tl.z,rh=Tl.w;return this.x=$l*rh+Il*ud+Bl*id-Pu*pd,this.y=Bl*rh+Il*pd+Pu*ud-$l*id,this.z=Pu*rh+Il*id+$l*pd-Bl*ud,this.w=Il*rh-$l*ud-Bl*pd-Pu*id,this}sub(dl){return this.x-=dl.x,this.y-=dl.y,this.z-=dl.z,this.w-=dl.w,this}clone(){return new _(this.x,this.y,this.z,this.w)}setFromEuler(dl){const Tl=Math.cos(dl.x/2),$l=Math.cos(dl.y/2),Bl=Math.cos(dl.z/2),Pu=Math.sin(dl.x/2),Il=Math.sin(dl.y/2),ud=Math.sin(dl.z/2);return this.x=Pu*$l*Bl+Tl*Il*ud,this.y=Tl*Il*Bl-Pu*$l*ud,this.z=Tl*$l*ud+Pu*Il*Bl,this.w=Tl*$l*Bl-Pu*Il*ud,this}}class M{constructor(dl,Tl){this.x=dl||0,this.y=Tl||0}set(dl,Tl){return this.x=dl,this.y=Tl,this}subVectors(dl,Tl){return this.x=dl.x-Tl.x,this.y=dl.y-Tl.y,this}copy(dl){return this.x=dl.x,this.y=dl.y,this}clone(){return new M(this.x,this.y)}}function $(bu,dl,Tl){return Math.min(Math.max(bu,dl),Tl)}const V=Math.PI/180;function oe(bu){return bu*V}var Y,ie,zn,Et,ml;class rl{constructor(dl=1,Tl=0,$l=0,Bl=0,Pu=0,Il=1,ud=0,pd=0,id=0,rh=0,qd=1,oh=0,Ed=0,Nl=0,Gd=0,Cd=1){dl!==void 0&&typeof dl!="number"?this.elements=new Float32Array(dl):(this.elements=new Float32Array(16),this.elements[0]=dl,this.elements[4]=Tl,this.elements[8]=$l,this.elements[12]=Bl,this.elements[1]=Pu,this.elements[5]=Il,this.elements[9]=ud,this.elements[13]=pd,this.elements[2]=id,this.elements[6]=rh,this.elements[10]=qd,this.elements[14]=oh,this.elements[3]=Ed,this.elements[7]=Nl,this.elements[11]=Gd,this.elements[15]=Cd)}makeScale(dl,Tl,$l){throw new Error("Method not implemented.")}set(dl,Tl,$l,Bl,Pu,Il,ud,pd,id,rh,qd,oh,Ed,Nl,Gd,Cd){const Bu=this.elements;return Bu[0]=dl,Bu[4]=Tl,Bu[8]=$l,Bu[12]=Bl,Bu[1]=Pu,Bu[5]=Il,Bu[9]=ud,Bu[13]=pd,Bu[2]=id,Bu[6]=rh,Bu[10]=qd,Bu[14]=oh,Bu[3]=Ed,Bu[7]=Nl,Bu[11]=Gd,Bu[15]=Cd,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(dl){const Tl=dl.elements;return this.set(Tl[0],Tl[4],Tl[8],Tl[12],Tl[1],Tl[5],Tl[9],Tl[13],Tl[2],Tl[6],Tl[10],Tl[14],Tl[3],Tl[7],Tl[11],Tl[15]),this}matrix3FromTopLeft(){const dl=this.elements;return new kl(dl[0],dl[4],dl[8],dl[1],dl[5],dl[9],dl[2],dl[6],dl[10])}setRotationFromEuler(dl,Tl){const $l=this.elements,{x:Bl,y:Pu,z:Il}=dl,ud=Math.cos(Bl),pd=Math.sin(Bl),id=Math.cos(Pu),rh=Math.sin(Pu),qd=Math.cos(Il),oh=Math.sin(Il);if(Tl===void 0||Tl==="XYZ"){const Ed=ud*qd,Nl=ud*oh,Gd=pd*qd,Cd=pd*oh;$l[0]=id*qd,$l[4]=-id*oh,$l[8]=rh,$l[1]=Nl+Gd*rh,$l[5]=Ed-Cd*rh,$l[9]=-pd*id,$l[2]=Cd-Ed*rh,$l[6]=Gd+Nl*rh,$l[10]=ud*id}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${Tl}`);return this}setRotationFromQuaternion(dl){const Tl=this.elements,{x:$l,y:Bl,z:Pu,w:Il}=dl,ud=$l+$l,pd=Bl+Bl,id=Pu+Pu,rh=$l*ud,qd=$l*pd,oh=$l*id,Ed=Bl*pd,Nl=Bl*id,Gd=Pu*id,Cd=Il*ud,Bu=Il*pd,wh=Il*id;return Tl[0]=1-(Ed+Gd),Tl[4]=qd-wh,Tl[8]=oh+Bu,Tl[1]=qd+wh,Tl[5]=1-(rh+Gd),Tl[9]=Nl-Cd,Tl[2]=oh-Bu,Tl[6]=Nl+Cd,Tl[10]=1-(rh+Ed),this}multiplyMatrices(dl,Tl){const $l=dl.elements,Bl=Tl.elements,Pu=this.elements,Il=$l[0],ud=$l[4],pd=$l[8],id=$l[12],rh=$l[1],qd=$l[5],oh=$l[9],Ed=$l[13],Nl=$l[2],Gd=$l[6],Cd=$l[10],Bu=$l[14],wh=$l[3],Rd=$l[7],dh=$l[11],Ih=$l[15],nd=Bl[0],Yd=Bl[4],Kh=Bl[8],rp=Bl[12],lh=Bl[1],yp=Bl[5],Cp=Bl[9],vp=Bl[13],mf=Bl[2],Zp=Bl[6],kf=Bl[10],Eg=Bl[14],Gg=Bl[3],Hf=Bl[7],Rg=Bl[11],fg=Bl[15];return Pu[0]=Il*nd+ud*lh+pd*mf+id*Gg,Pu[4]=Il*Yd+ud*yp+pd*Zp+id*Hf,Pu[8]=Il*Kh+ud*Cp+pd*kf+id*Rg,Pu[12]=Il*rp+ud*vp+pd*Eg+id*fg,Pu[1]=rh*nd+qd*lh+oh*mf+Ed*Gg,Pu[5]=rh*Yd+qd*yp+oh*Zp+Ed*Hf,Pu[9]=rh*Kh+qd*Cp+oh*kf+Ed*Rg,Pu[13]=rh*rp+qd*vp+oh*Eg+Ed*fg,Pu[2]=Nl*nd+Gd*lh+Cd*mf+Bu*Gg,Pu[6]=Nl*Yd+Gd*yp+Cd*Zp+Bu*Hf,Pu[10]=Nl*Kh+Gd*Cp+Cd*kf+Bu*Rg,Pu[14]=Nl*rp+Gd*vp+Cd*Eg+Bu*fg,Pu[3]=wh*nd+Rd*lh+dh*mf+Ih*Gg,Pu[7]=wh*Yd+Rd*yp+dh*Zp+Ih*Hf,Pu[11]=wh*Kh+Rd*Cp+dh*kf+Ih*Rg,Pu[15]=wh*rp+Rd*vp+dh*Eg+Ih*fg,this}multiplyScalar(dl){const Tl=this.elements;return Tl[0]*=dl,Tl[4]*=dl,Tl[8]*=dl,Tl[12]*=dl,Tl[1]*=dl,Tl[5]*=dl,Tl[9]*=dl,Tl[13]*=dl,Tl[2]*=dl,Tl[6]*=dl,Tl[10]*=dl,Tl[14]*=dl,Tl[3]*=dl,Tl[7]*=dl,Tl[11]*=dl,Tl[15]*=dl,this}makeTranslation(dl,Tl,$l){return this.set(1,0,0,dl,0,1,0,Tl,0,0,1,$l,0,0,0,1),this}snap(dl){const Tl=Math.pow(10,4),$l=this.elements;for(let Bl=0;Bl<16;Bl++){const Pu=Math.round($l[Bl]);Pu===Math.round($l[Bl]*Tl)/Tl&&($l[Bl]=Pu)}return this}transpose(){const dl=this.elements;let Tl;return Tl=dl[1],dl[1]=dl[4],dl[4]=Tl,Tl=dl[2],dl[2]=dl[8],dl[8]=Tl,Tl=dl[6],dl[6]=dl[9],dl[9]=Tl,Tl=dl[3],dl[3]=dl[12],dl[12]=Tl,Tl=dl[7],dl[7]=dl[13],dl[13]=Tl,Tl=dl[11],dl[11]=dl[14],dl[14]=Tl,this}setPosition(dl){const Tl=this.elements;return Tl[12]=dl.x,Tl[13]=dl.y,Tl[14]=dl.z,this}translate(dl){const Tl=this.elements;return Tl[12]+=dl.x,Tl[13]+=dl.y,Tl[14]+=dl.z,this}getInverse(dl,Tl){const $l=this.elements,Bl=dl.elements,Pu=Bl[0],Il=Bl[4],ud=Bl[8],pd=Bl[12],id=Bl[1],rh=Bl[5],qd=Bl[9],oh=Bl[13],Ed=Bl[2],Nl=Bl[6],Gd=Bl[10],Cd=Bl[14],Bu=Bl[3],wh=Bl[7],Rd=Bl[11],dh=Bl[15];$l[0]=qd*Cd*wh-oh*Gd*wh+oh*Nl*Rd-rh*Cd*Rd-qd*Nl*dh+rh*Gd*dh,$l[4]=pd*Gd*wh-ud*Cd*wh-pd*Nl*Rd+Il*Cd*Rd+ud*Nl*dh-Il*Gd*dh,$l[8]=ud*oh*wh-pd*qd*wh+pd*rh*Rd-Il*oh*Rd-ud*rh*dh+Il*qd*dh,$l[12]=pd*qd*Nl-ud*oh*Nl-pd*rh*Gd+Il*oh*Gd+ud*rh*Cd-Il*qd*Cd,$l[1]=oh*Gd*Bu-qd*Cd*Bu-oh*Ed*Rd+id*Cd*Rd+qd*Ed*dh-id*Gd*dh,$l[5]=ud*Cd*Bu-pd*Gd*Bu+pd*Ed*Rd-Pu*Cd*Rd-ud*Ed*dh+Pu*Gd*dh,$l[9]=pd*qd*Bu-ud*oh*Bu-pd*id*Rd+Pu*oh*Rd+ud*id*dh-Pu*qd*dh,$l[13]=ud*oh*Ed-pd*qd*Ed+pd*id*Gd-Pu*oh*Gd-ud*id*Cd+Pu*qd*Cd,$l[2]=rh*Cd*Bu-oh*Nl*Bu+oh*Ed*wh-id*Cd*wh-rh*Ed*dh+id*Nl*dh,$l[6]=pd*Nl*Bu-Il*Cd*Bu-pd*Ed*wh+Pu*Cd*wh+Il*Ed*dh-Pu*Nl*dh,$l[10]=Il*oh*Bu-pd*rh*Bu+pd*id*wh-Pu*oh*wh-Il*id*dh+Pu*rh*dh,$l[14]=pd*rh*Ed-Il*oh*Ed-pd*id*Nl+Pu*oh*Nl+Il*id*Cd-Pu*rh*Cd,$l[3]=qd*Nl*Bu-rh*Gd*Bu-qd*Ed*wh+id*Gd*wh+rh*Ed*Rd-id*Nl*Rd,$l[7]=Il*Gd*Bu-ud*Nl*Bu+ud*Ed*wh-Pu*Gd*wh-Il*Ed*Rd+Pu*Nl*Rd,$l[11]=ud*rh*Bu-Il*qd*Bu-ud*id*wh+Pu*qd*wh+Il*id*Rd-Pu*rh*Rd,$l[15]=Il*qd*Ed-ud*rh*Ed+ud*id*Nl-Pu*qd*Nl-Il*id*Gd+Pu*rh*Gd;const Ih=Pu*$l[0]+id*$l[4]+Ed*$l[8]+Bu*$l[12];if(Ih===0){const nd="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(Tl)throw new Error(nd);return console.warn(nd),this.identity(),this}return this.multiplyScalar(1/Ih),this}isReflected(){const dl=this.elements,Tl=dl[0],$l=dl[4],Bl=dl[8],Pu=dl[1],Il=dl[5],ud=dl[9],pd=dl[2],id=dl[6],rh=dl[10];return Tl*Il*rh+Pu*id*Bl+pd*$l*ud-pd*Il*Bl-Pu*$l*rh-Tl*id*ud<0}scale(dl){const Tl=this.elements,{x:$l}=dl,{y:Bl}=dl,{z:Pu}=dl;return Tl[0]*=$l,Tl[4]*=Bl,Tl[8]*=Pu,Tl[1]*=$l,Tl[5]*=Bl,Tl[9]*=Pu,Tl[2]*=$l,Tl[6]*=Bl,Tl[10]*=Pu,Tl[3]*=$l,Tl[7]*=Bl,Tl[11]*=Pu,this}getMaxScaleOnAxis(){const dl=this.elements,Tl=dl[0]*dl[0]+dl[1]*dl[1]+dl[2]*dl[2],$l=dl[4]*dl[4]+dl[5]*dl[5]+dl[6]*dl[6],Bl=dl[8]*dl[8]+dl[9]*dl[9]+dl[10]*dl[10];return Math.sqrt(Math.max(Tl,Math.max($l,Bl)))}makeFrustum(dl,Tl,$l,Bl,Pu,Il){const ud=this.elements,pd=2*Pu/(Tl-dl),id=2*Pu/(Bl-$l),rh=(Tl+dl)/(Tl-dl),qd=(Bl+$l)/(Bl-$l),oh=-(Il+Pu)/(Il-Pu),Ed=-2*Il*Pu/(Il-Pu);return ud[0]=pd,ud[4]=0,ud[8]=rh,ud[12]=0,ud[1]=0,ud[5]=id,ud[9]=qd,ud[13]=0,ud[2]=0,ud[6]=0,ud[10]=oh,ud[14]=Ed,ud[3]=0,ud[7]=0,ud[11]=-1,ud[15]=0,this}makePerspective(dl,Tl,$l,Bl){const Pu=$l*Math.tan(oe(.5*dl)),Il=-Pu,ud=Il*Tl,pd=Pu*Tl;return this.makeFrustum(ud,pd,Il,Pu,$l,Bl)}makeOrthographic(dl,Tl,$l,Bl,Pu,Il){const ud=this.elements,pd=1/(Tl-dl),id=1/($l-Bl),rh=1/(Il-Pu),qd=(Tl+dl)*pd,oh=($l+Bl)*id,Ed=(Il+Pu)*rh;return ud[0]=2*pd,ud[4]=0,ud[8]=0,ud[12]=-qd,ud[1]=0,ud[5]=2*id,ud[9]=0,ud[13]=-oh,ud[2]=0,ud[6]=0,ud[10]=-2*rh,ud[14]=-Ed,ud[3]=0,ud[7]=0,ud[11]=0,ud[15]=1,this}isEqual(dl){const Tl=dl.elements,$l=this.elements;return $l[0]===Tl[0]&&$l[4]===Tl[4]&&$l[8]===Tl[8]&&$l[12]===Tl[12]&&$l[1]===Tl[1]&&$l[5]===Tl[5]&&$l[9]===Tl[9]&&$l[13]===Tl[13]&&$l[2]===Tl[2]&&$l[6]===Tl[6]&&$l[10]===Tl[10]&&$l[14]===Tl[14]&&$l[3]===Tl[3]&&$l[7]===Tl[7]&&$l[11]===Tl[11]&&$l[15]===Tl[15]}clone(){const dl=this.elements;return new rl(dl[0],dl[4],dl[8],dl[12],dl[1],dl[5],dl[9],dl[13],dl[2],dl[6],dl[10],dl[14],dl[3],dl[7],dl[11],dl[15])}isIdentity(){const dl=this.elements;return dl[0]===1&&dl[4]===0&&dl[8]===0&&dl[12]===0&&dl[1]===0&&dl[5]===1&&dl[9]===0&&dl[13]===0&&dl[2]===0&&dl[6]===0&&dl[10]===1&&dl[14]===0&&dl[3]===0&&dl[7]===0&&dl[11]===0&&dl[15]===1}isNearlyIdentity(dl){return this.clone().snap(dl).isIdentity()}getScale(dl){const Tl=this.elements;return dl=dl||new Ml,zn.set(Tl[0],Tl[1],Tl[2]),Et.set(Tl[4],Tl[5],Tl[6]),ml.set(Tl[8],Tl[9],Tl[10]),dl.x=zn.length(),dl.y=Et.length(),dl.z=ml.length(),dl}lookAt(dl,Tl,$l){const Bl=this.elements;return ml.subVectors(dl,Tl).normalize(),ml.length()===0&&(ml.z=1),zn.crossVectors($l,ml).normalize(),zn.length()===0&&(ml.x+=1e-4,zn.crossVectors($l,ml).normalize()),Et.crossVectors(ml,zn),Bl[0]=zn.x,Bl[4]=Et.x,Bl[8]=ml.x,Bl[1]=zn.y,Bl[5]=Et.y,Bl[9]=ml.y,Bl[2]=zn.z,Bl[6]=Et.z,Bl[10]=ml.z,this}compose(dl,Tl,$l){const Bl=this.elements;return Y.identity(),Y.setRotationFromQuaternion(Tl),ie.makeScale($l.x,$l.y,$l.z),this.multiplyMatrices(Y,ie),Bl[12]=dl.x,Bl[13]=dl.y,Bl[14]=dl.z,this}}Y=new rl,ie=new rl;class Ml{constructor(dl,Tl,$l){this.x=dl||0,this.y=Tl||0,this.z=$l||0,this.atomid=void 0}set(dl,Tl,$l){return this.x=dl,this.y=Tl,this.z=$l,this}copy(dl){return this.x=dl.x,this.y=dl.y,this.z=dl.z,this}add(dl){return this.x+=dl.x,this.y+=dl.y,this.z+=dl.z,this}addVectors(dl,Tl){return this.x=dl.x+Tl.x,this.y=dl.y+Tl.y,this.z=dl.z+Tl.z,this}multiplyVectors(dl,Tl){return this.x=dl.x*Tl.x,this.y=dl.y*Tl.y,this.z=dl.z*Tl.z,this}sub(dl){return this.x-=dl.x,this.y-=dl.y,this.z-=dl.z,this}subVectors(dl,Tl){return this.x=dl.x-Tl.x,this.y=dl.y-Tl.y,this.z=dl.z-Tl.z,this}multiplyScalar(dl){return this.x*=dl,this.y*=dl,this.z*=dl,this}divideScalar(dl){return dl!==0?(this.x/=dl,this.y/=dl,this.z/=dl):(this.x=0,this.y=0,this.z=0),this}max(dl){return this.x=Math.max(this.x,dl.x),this.y=Math.max(this.y,dl.y),this.z=Math.max(this.z,dl.z),this}min(dl){return this.x=Math.min(this.x,dl.x),this.y=Math.min(this.y,dl.y),this.z=Math.min(this.z,dl.z),this}distanceTo(dl){return Math.sqrt(this.distanceToSquared(dl))}distanceToSquared(dl){const Tl=this.x-dl.x,$l=this.y-dl.y,Bl=this.z-dl.z;return Tl*Tl+$l*$l+Bl*Bl}applyMatrix3(dl){const{x:Tl}=this,{y:$l}=this,{z:Bl}=this,Pu=dl.elements;return this.x=Pu[0]*Tl+Pu[3]*$l+Pu[6]*Bl,this.y=Pu[1]*Tl+Pu[4]*$l+Pu[7]*Bl,this.z=Pu[2]*Tl+Pu[5]*$l+Pu[8]*Bl,this}applyMatrix4(dl){const{x:Tl}=this,{y:$l}=this,{z:Bl}=this,Pu=dl.elements;return this.x=Pu[0]*Tl+Pu[4]*$l+Pu[8]*Bl+Pu[12],this.y=Pu[1]*Tl+Pu[5]*$l+Pu[9]*Bl+Pu[13],this.z=Pu[2]*Tl+Pu[6]*$l+Pu[10]*Bl+Pu[14],this}applyProjection(dl){const{x:Tl}=this,{y:$l}=this,{z:Bl}=this,Pu=dl.elements,Il=Pu[3]*Tl+Pu[7]*$l+Pu[11]*Bl+Pu[15];return this.x=(Pu[0]*Tl+Pu[4]*$l+Pu[8]*Bl+Pu[12])/Il,this.y=(Pu[1]*Tl+Pu[5]*$l+Pu[9]*Bl+Pu[13])/Il,this.z=(Pu[2]*Tl+Pu[6]*$l+Pu[10]*Bl+Pu[14])/Il,this}applyQuaternion(dl){const{x:Tl}=this,{y:$l}=this,{z:Bl}=this,Pu=dl.x,Il=dl.y,ud=dl.z,pd=dl.w,id={};id.x=2*($l*ud-Bl*Il),id.y=2*(Bl*Pu-Tl*ud),id.z=2*(Tl*Il-$l*Pu);const rh={};return rh.x=id.y*ud-id.z*Il,rh.y=id.z*Pu-id.x*ud,rh.z=id.x*Il-id.y*Pu,this.x=Tl+pd*id.x+rh.x,this.y=$l+pd*id.y+rh.y,this.z=Bl+pd*id.z+rh.z,this}negate(){return this.multiplyScalar(-1)}dot(dl){return this.x*dl.x+this.y*dl.y+this.z*dl.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(dl){const{x:Tl}=this,{y:$l}=this,{z:Bl}=this;return this.x=$l*dl.z-Bl*dl.y,this.y=Bl*dl.x-Tl*dl.z,this.z=Tl*dl.y-$l*dl.x,this}crossVectors(dl,Tl){return this.x=dl.y*Tl.z-dl.z*Tl.y,this.y=dl.z*Tl.x-dl.x*Tl.z,this.z=dl.x*Tl.y-dl.y*Tl.x,this}equals(dl){return this.x==dl.x&&this.y==dl.y&&this.z==dl.z}getPositionFromMatrix(dl){return this.x=dl.elements[12],this.y=dl.elements[13],this.z=dl.elements[14],this}setEulerFromRotationMatrix(dl,Tl){const $l=dl.elements,Bl=$l[0],Pu=$l[4],Il=$l[8],ud=$l[5],pd=$l[9],id=$l[6],rh=$l[10];return Tl===void 0||Tl==="XYZ"?(this.y=Math.asin($(Il,-1,1)),Math.abs(Il)<.99999?(this.x=Math.atan2(-pd,rh),this.z=Math.atan2(-Pu,Bl)):(this.x=Math.atan2(id,ud),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${Tl}`),this}rotateAboutVector(dl,Tl){dl.normalize();const $l=Math.cos(Tl),Bl=Math.sin(Tl),Pu=this.clone().multiplyScalar($l),Il=dl.clone().cross(this).multiplyScalar(Bl),ud=dl.clone().multiplyScalar(dl.clone().dot(this)).multiplyScalar(1-$l),pd=Pu.add(Il).add(ud);return this.x=pd.x,this.y=pd.y,this.z=pd.z,this}setFromMatrixPosition(dl){const Tl=dl.elements;return this.x=Tl[12],this.y=Tl[13],this.z=Tl[14],this}transformDirection(dl){const{x:Tl}=this,{y:$l}=this,{z:Bl}=this,Pu=dl.elements;return this.x=Pu[0]*Tl+Pu[4]*$l+Pu[8]*Bl,this.y=Pu[1]*Tl+Pu[5]*$l+Pu[9]*Bl,this.z=Pu[2]*Tl+Pu[6]*$l+Pu[10]*Bl,this.normalize()}clone(){return new Ml(this.x,this.y,this.z)}unproject(dl){const Tl=Y;return Tl.multiplyMatrices(dl.matrixWorld,Tl.getInverse(dl.projectionMatrix)),this.applyMatrix4(Tl)}}zn=new Ml,Et=new Ml,ml=new Ml;class kl{constructor(dl=1,Tl=0,$l=0,Bl=0,Pu=1,Il=0,ud=0,pd=0,id=1){this.elements=new Float32Array(9),this.set(dl,Tl,$l,Bl,Pu,Il,ud,pd,id)}set(dl,Tl,$l,Bl,Pu,Il,ud,pd,id){const rh=this.elements;return rh[0]=dl,rh[3]=Tl,rh[6]=$l,rh[1]=Bl,rh[4]=Pu,rh[7]=Il,rh[2]=ud,rh[5]=pd,rh[8]=id,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(dl){const Tl=dl.elements;this.set(Tl[0],Tl[3],Tl[6],Tl[1],Tl[4],Tl[7],Tl[2],Tl[5],Tl[8])}multiplyScalar(dl){const Tl=this.elements;return Tl[0]*=dl,Tl[3]*=dl,Tl[6]*=dl,Tl[1]*=dl,Tl[4]*=dl,Tl[7]*=dl,Tl[2]*=dl,Tl[5]*=dl,Tl[8]*=dl,this}getInverse3(dl){const Tl=dl.elements,$l=this.elements;$l[0]=Tl[4]*Tl[8]-Tl[5]*Tl[7],$l[3]=Tl[6]*Tl[5]-Tl[3]*Tl[8],$l[6]=Tl[3]*Tl[7]-Tl[6]*Tl[4],$l[1]=Tl[7]*Tl[2]-Tl[1]*Tl[8],$l[4]=Tl[0]*Tl[8]-Tl[6]*Tl[2],$l[7]=Tl[1]*Tl[6]-Tl[0]*Tl[7],$l[2]=Tl[1]*Tl[5]-Tl[2]*Tl[4],$l[5]=Tl[2]*Tl[3]-Tl[0]*Tl[5],$l[8]=Tl[0]*Tl[4]-Tl[1]*Tl[3];const Bl=Tl[0]*$l[0]+Tl[3]*$l[1]+Tl[6]*$l[2];return this.multiplyScalar(1/Bl),this}getInverse(dl,Tl){const $l=dl.elements,Bl=this.elements;Bl[0]=$l[10]*$l[5]-$l[6]*$l[9],Bl[1]=-$l[10]*$l[1]+$l[2]*$l[9],Bl[2]=$l[6]*$l[1]-$l[2]*$l[5],Bl[3]=-$l[10]*$l[4]+$l[6]*$l[8],Bl[4]=$l[10]*$l[0]-$l[2]*$l[8],Bl[5]=-$l[6]*$l[0]+$l[2]*$l[4],Bl[6]=$l[9]*$l[4]-$l[5]*$l[8],Bl[7]=-$l[9]*$l[0]+$l[1]*$l[8],Bl[8]=$l[5]*$l[0]-$l[1]*$l[4];const Pu=$l[0]*Bl[0]+$l[1]*Bl[3]+$l[2]*Bl[6];if(Pu===0){const Il="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(Tl)throw new Error(Il);return console.warn(Il),this.identity(),this}return this.multiplyScalar(1/Pu),this}getDeterminant(){const dl=this.elements;return dl[0]*dl[4]*dl[8]+dl[1]*dl[5]*dl[6]+dl[2]*dl[3]*dl[7]-dl[2]*dl[4]*dl[6]-dl[1]*dl[3]*dl[8]-dl[0]*dl[5]*dl[7]}transpose(){let dl;const Tl=this.elements;return dl=Tl[1],Tl[1]=Tl[3],Tl[3]=dl,dl=Tl[2],Tl[2]=Tl[6],Tl[6]=dl,dl=Tl[5],Tl[5]=Tl[7],Tl[7]=dl,this}clone(){const dl=this.elements;return new kl(dl[0],dl[3],dl[6],dl[1],dl[4],dl[7],dl[2],dl[5],dl[8])}getMatrix4(){const dl=this.elements;return new rl(dl[0],dl[3],dl[6],0,dl[1],dl[4],dl[7],0,dl[2],dl[5],dl[8],0)}}class _u{constructor(dl,Tl){this.origin=dl!==void 0?dl:new Ml,this.direction=Tl!==void 0?Tl:new Ml}set(dl,Tl){return this.origin.copy(dl),this.direction.copy(Tl),this}copy(dl){return this.origin.copy(dl.origin),this.direction.copy(dl.direction),this}at(dl,Tl){return(Tl||new Ml).copy(this.direction).multiplyScalar(dl).add(this.origin)}recast(dl){const Tl=zn;return this.origin.copy(this.at(dl,Tl)),this}closestPointToPoint(dl,Tl){const $l=Tl||new Ml;$l.subVectors(dl,this.origin);const Bl=$l.dot(this.direction);return $l.copy(this.direction).multiplyScalar(Bl).add(this.origin)}distanceToPoint(dl){const Tl=zn,$l=Tl.subVectors(dl,this.origin).dot(this.direction);return Tl.copy(this.direction).multiplyScalar($l).add(this.origin),Tl.distanceTo(dl)}isIntersectionCylinder(){}isIntersectionSphere(dl){return this.distanceToPoint(dl.center)<=dl.radius}isIntersectionPlane(dl){return dl.normal.dot(this.direction)!==0||dl.distanceToPoint(this.origin)===0}distanceToPlane(dl){const Tl=dl.normal.dot(this.direction);return Tl===0?dl.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(dl.normal)+dl.constant)/Tl}intersectPlane(dl,Tl){const $l=this.distanceToPlane(dl);if($l!==void 0)return this.at($l,Tl)}applyMatrix4(dl){return this.direction.add(this.origin).applyMatrix4(dl),this.origin.applyMatrix4(dl),this.direction.sub(this.origin),this}clone(){return new _u().copy(this)}}function Hu(bu,dl,Tl,$l,Bl,Pu){$l=$l*Math.PI/180,Bl=Bl*Math.PI/180,Pu=Pu*Math.PI/180;const Il=qd=>qd*qd,ud=Math.cos($l),pd=Math.cos(Bl),id=Math.cos(Pu),rh=Math.sin(Pu);return new kl(bu,dl*id,Tl*pd,0,dl*rh,Tl*(ud-pd*id)/rh,0,0,Tl*Math.sqrt(1-Il(ud)-Il(pd)-Il(id)+2*ud*pd*id)/rh)}},546:(n,h,s)=>{s.r(h),s.d(h,{CustomLinear:()=>zn,Gradient:()=>ml,GradientType:()=>M,ROYGB:()=>Y,RWB:()=>oe,Sinebow:()=>ie,builtinGradients:()=>Et,getGradient:()=>V,normalizeValue:()=>$});var _=s(222);class M{}function $(rl,Ml,kl){return Ml>=rl?(kl<rl&&(kl=rl),kl>Ml&&(kl=Ml),{lo:rl,hi:Ml,val:kl}):(kl>rl&&(kl=rl),kl<Ml&&(kl=Ml),{lo:Ml,hi:rl,val:kl=rl-kl+Ml})}function V(rl){if(rl instanceof M)return rl;if(rl.gradient!==void 0&&Et[rl.gradient]){let Ml=rl.min===void 0?-1:rl.min,kl=rl.max===void 0?1:rl.max;return rl.mid===void 0?rl.colors===void 0?new Et[rl.gradient](Ml,kl):new Et[rl.gradient](Ml,kl,rl.colors):new Et[rl.gradient](Ml,kl,rl.mid)}if(typeof rl.gradient=="string"&&rl.gradient.startsWith("linear_")){let Ml=rl.gradient.split("_");Ml.shift();let kl=rl.min===void 0?-1:rl.min,_u=rl.max===void 0?1:rl.max;return new zn(kl,_u,Ml)}return rl}class oe extends M{constructor(Ml,kl,_u){super(),this.gradient="RWB",this.mult=1,this.mid=_u,this.min=Ml,this.max=kl,kl===void 0&&Array.isArray(Ml)&&Ml.length>=2?(this.max=Ml[1],this.min=Ml[0]):Ml&&kl&&!Array.isArray(Ml)&&(this.min=Ml,this.max=kl)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(Ml,kl){var _u,Hu;if(Ml=this.mult*Ml,kl?(_u=kl[0],Hu=kl[1]):(_u=this.min,Hu=this.max),Ml===void 0)return 16777215;var bu=$(_u,Hu,Ml);_u=bu.lo;var dl,Tl=((Hu=bu.hi)+_u)/2;return(Ml=bu.val)<(Tl=kl&&kl[2]!==void 0?kl[2]:this.mid!==void 0?this.mid:(_u+Hu)/2)?16711680+256*(dl=Math.floor(255*Math.sqrt((Ml-_u)/(Tl-_u))))+dl:Ml>Tl?65536*(dl=Math.floor(255*Math.sqrt(1-(Ml-Tl)/(Hu-Tl))))+256*dl+255:16777215}}class Y extends M{constructor(Ml,kl){super(),this.gradient="ROYGB",this.mult=1,this.min=Ml,this.max=kl,kl===void 0&&Array.isArray(Ml)&&Ml.length>=2?(this.max=Ml[1],this.min=Ml[0]):Ml&&kl&&!Array.isArray(Ml)&&(this.min=Ml,this.max=kl)}valueToHex(Ml,kl){var _u,Hu;if(Ml=this.mult*Ml,kl?(_u=kl[0],Hu=kl[1]):(_u=this.min,Hu=this.max),Ml===void 0)return 16777215;var bu=$(_u,Hu,Ml),dl=((_u=bu.lo)+(Hu=bu.hi))/2,Tl=(_u+dl)/2,$l=(dl+Hu)/2;return(Ml=bu.val)<Tl?16711680+256*Math.floor(255*Math.sqrt((Ml-_u)/(Tl-_u)))+0:Ml<dl?65536*Math.floor(255*Math.sqrt(1-(Ml-Tl)/(dl-Tl)))+65280+0:Ml<$l?65280+1*Math.floor(255*Math.sqrt((Ml-dl)/($l-dl))):0+256*Math.floor(255*Math.sqrt(1-(Ml-$l)/(Hu-$l)))+255}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class ie extends M{constructor(Ml,kl){super(),this.gradient="Sinebow",this.mult=1,this.min=Ml,this.max=kl,kl===void 0&&Array.isArray(Ml)&&Ml.length>=2&&(this.max=Ml[1],this.min=Ml[0]),kl<Ml&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(Ml,kl){var _u,Hu;if(Ml=this.mult*Ml,kl?(_u=kl[0],Hu=kl[1]):(_u=this.min,Hu=this.max),Ml===void 0)return 16777215;var bu=ml.normalizeValue(_u,Hu,Ml);_u=bu.lo,Hu=bu.hi;var dl=((Ml=bu.val)-_u)/(Hu-_u)*5/6+.5,Tl=Math.sin(Math.PI*dl);Tl*=255*Tl;var $l=Math.sin(Math.PI*(dl+1/3));$l*=255*$l;var Bl=Math.sin(Math.PI*(dl+2/3));return Bl*=255*Bl,65536*Math.floor(Tl)+256*Math.floor(Bl)+1*Math.floor($l)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class zn extends M{constructor(Ml,kl,_u){var Hu;if(super(),this.gradient="linear",this.colors=new Array,Array.isArray(Ml)&&Ml.length>=2?(this.max=Ml[1],this.min=Ml[0],Hu=kl):(this.min=Ml,this.max=kl,Hu=_u),Hu)for(let bu of Hu)this.colors.push(_.CC.color(bu));else this.colors.push(_.CC.color(0))}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(Ml,kl){var _u,Hu;if(kl?(_u=kl[0],Hu=kl[1]):(_u=this.min,Hu=this.max),Ml===void 0)return 16777215;var bu=$(_u,Hu,Ml);_u=bu.lo,Hu=bu.hi,Ml=bu.val;let dl=this.colors.length,Tl=(Hu-_u)/dl,$l=Math.min(Math.floor((Ml-_u)/Tl),dl-1),Bl=Math.min($l+1,dl-1),Pu=(Ml-_u-$l*Tl)/Tl,Il=this.colors[$l],ud=this.colors[Bl];return new _.Color(Il.r+Pu*(ud.r-Il.r),Il.g+Pu*(ud.g-Il.g),Il.b+Pu*(ud.b-Il.b)).getHex()}}const Et={rwb:oe,RWB:oe,roygb:Y,ROYGB:Y,sinebow:ie,linear:zn};class ml extends M{valueToHex(Ml,kl){return 0}range(){return null}}ml.RWB=oe,ml.ROYGB=Y,ml.Sinebow=ie,ml.CustomLinear=zn,ml.builtinGradients=Et,ml.normalizeValue=$,ml.getGradient=V},663:(n,h,s)=>{var _=s(981),M=s(701),$=s(407),V=s(165),oe=s(358),Y=-2,ie=12,zn=30;function Et(Bl){return(Bl>>>24&255)+(Bl>>>8&65280)+((65280&Bl)<<8)+((255&Bl)<<24)}function ml(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function rl(Bl){var Pu;return Bl&&Bl.state?(Pu=Bl.state,Bl.total_in=Bl.total_out=Pu.total=0,Bl.msg="",Pu.wrap&&(Bl.adler=1&Pu.wrap),Pu.mode=1,Pu.last=0,Pu.havedict=0,Pu.dmax=32768,Pu.head=null,Pu.hold=0,Pu.bits=0,Pu.lencode=Pu.lendyn=new _.Buf32(852),Pu.distcode=Pu.distdyn=new _.Buf32(592),Pu.sane=1,Pu.back=-1,0):Y}function Ml(Bl){var Pu;return Bl&&Bl.state?((Pu=Bl.state).wsize=0,Pu.whave=0,Pu.wnext=0,rl(Bl)):Y}function kl(Bl,Pu){var Il,ud;return Bl&&Bl.state?(ud=Bl.state,Pu<0?(Il=0,Pu=-Pu):(Il=1+(Pu>>4),Pu<48&&(Pu&=15)),Pu&&(Pu<8||Pu>15)?Y:(ud.window!==null&&ud.wbits!==Pu&&(ud.window=null),ud.wrap=Il,ud.wbits=Pu,Ml(Bl))):Y}function _u(Bl,Pu){var Il,ud;return Bl?(ud=new ml,Bl.state=ud,ud.window=null,(Il=kl(Bl,Pu))!==0&&(Bl.state=null),Il):Y}var Hu,bu,dl=!0;function Tl(Bl){if(dl){var Pu;for(Hu=new _.Buf32(512),bu=new _.Buf32(32),Pu=0;Pu<144;)Bl.lens[Pu++]=8;for(;Pu<256;)Bl.lens[Pu++]=9;for(;Pu<280;)Bl.lens[Pu++]=7;for(;Pu<288;)Bl.lens[Pu++]=8;for(oe(1,Bl.lens,0,288,Hu,0,Bl.work,{bits:9}),Pu=0;Pu<32;)Bl.lens[Pu++]=5;oe(2,Bl.lens,0,32,bu,0,Bl.work,{bits:5}),dl=!1}Bl.lencode=Hu,Bl.lenbits=9,Bl.distcode=bu,Bl.distbits=5}function $l(Bl,Pu,Il,ud){var pd,id=Bl.state;return id.window===null&&(id.wsize=1<<id.wbits,id.wnext=0,id.whave=0,id.window=new _.Buf8(id.wsize)),ud>=id.wsize?(_.arraySet(id.window,Pu,Il-id.wsize,id.wsize,0),id.wnext=0,id.whave=id.wsize):((pd=id.wsize-id.wnext)>ud&&(pd=ud),_.arraySet(id.window,Pu,Il-ud,pd,id.wnext),(ud-=pd)?(_.arraySet(id.window,Pu,Il-ud,ud,0),id.wnext=ud,id.whave=id.wsize):(id.wnext+=pd,id.wnext===id.wsize&&(id.wnext=0),id.whave<id.wsize&&(id.whave+=pd))),0}h.inflateReset=Ml,h.inflateReset2=kl,h.inflateResetKeep=rl,h.inflateInit=function(Bl){return _u(Bl,15)},h.inflateInit2=_u,h.inflate=function(Bl,Pu){var Il,ud,pd,id,rh,qd,oh,Ed,Nl,Gd,Cd,Bu,wh,Rd,dh,Ih,nd,Yd,Kh,rp,lh,yp,Cp,vp,mf=0,Zp=new _.Buf8(4),kf=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Bl||!Bl.state||!Bl.output||!Bl.input&&Bl.avail_in!==0)return Y;(Il=Bl.state).mode===ie&&(Il.mode=13),rh=Bl.next_out,pd=Bl.output,oh=Bl.avail_out,id=Bl.next_in,ud=Bl.input,qd=Bl.avail_in,Ed=Il.hold,Nl=Il.bits,Gd=qd,Cd=oh,yp=0;e:for(;;)switch(Il.mode){case 1:if(Il.wrap===0){Il.mode=13;break}for(;Nl<16;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}if(2&Il.wrap&&Ed===35615){Il.check=0,Zp[0]=255&Ed,Zp[1]=Ed>>>8&255,Il.check=$(Il.check,Zp,2,0),Ed=0,Nl=0,Il.mode=2;break}if(Il.flags=0,Il.head&&(Il.head.done=!1),!(1&Il.wrap)||(((255&Ed)<<8)+(Ed>>8))%31){Bl.msg="incorrect header check",Il.mode=zn;break}if((15&Ed)!=8){Bl.msg="unknown compression method",Il.mode=zn;break}if(Nl-=4,lh=8+(15&(Ed>>>=4)),Il.wbits===0)Il.wbits=lh;else if(lh>Il.wbits){Bl.msg="invalid window size",Il.mode=zn;break}Il.dmax=1<<lh,Bl.adler=Il.check=1,Il.mode=512&Ed?10:ie,Ed=0,Nl=0;break;case 2:for(;Nl<16;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}if(Il.flags=Ed,(255&Il.flags)!=8){Bl.msg="unknown compression method",Il.mode=zn;break}if(57344&Il.flags){Bl.msg="unknown header flags set",Il.mode=zn;break}Il.head&&(Il.head.text=Ed>>8&1),512&Il.flags&&(Zp[0]=255&Ed,Zp[1]=Ed>>>8&255,Il.check=$(Il.check,Zp,2,0)),Ed=0,Nl=0,Il.mode=3;case 3:for(;Nl<32;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Il.head&&(Il.head.time=Ed),512&Il.flags&&(Zp[0]=255&Ed,Zp[1]=Ed>>>8&255,Zp[2]=Ed>>>16&255,Zp[3]=Ed>>>24&255,Il.check=$(Il.check,Zp,4,0)),Ed=0,Nl=0,Il.mode=4;case 4:for(;Nl<16;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Il.head&&(Il.head.xflags=255&Ed,Il.head.os=Ed>>8),512&Il.flags&&(Zp[0]=255&Ed,Zp[1]=Ed>>>8&255,Il.check=$(Il.check,Zp,2,0)),Ed=0,Nl=0,Il.mode=5;case 5:if(1024&Il.flags){for(;Nl<16;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Il.length=Ed,Il.head&&(Il.head.extra_len=Ed),512&Il.flags&&(Zp[0]=255&Ed,Zp[1]=Ed>>>8&255,Il.check=$(Il.check,Zp,2,0)),Ed=0,Nl=0}else Il.head&&(Il.head.extra=null);Il.mode=6;case 6:if(1024&Il.flags&&((Bu=Il.length)>qd&&(Bu=qd),Bu&&(Il.head&&(lh=Il.head.extra_len-Il.length,Il.head.extra||(Il.head.extra=new Array(Il.head.extra_len)),_.arraySet(Il.head.extra,ud,id,Bu,lh)),512&Il.flags&&(Il.check=$(Il.check,ud,Bu,id)),qd-=Bu,id+=Bu,Il.length-=Bu),Il.length))break e;Il.length=0,Il.mode=7;case 7:if(2048&Il.flags){if(qd===0)break e;Bu=0;do lh=ud[id+Bu++],Il.head&&lh&&Il.length<65536&&(Il.head.name+=String.fromCharCode(lh));while(lh&&Bu<qd);if(512&Il.flags&&(Il.check=$(Il.check,ud,Bu,id)),qd-=Bu,id+=Bu,lh)break e}else Il.head&&(Il.head.name=null);Il.length=0,Il.mode=8;case 8:if(4096&Il.flags){if(qd===0)break e;Bu=0;do lh=ud[id+Bu++],Il.head&&lh&&Il.length<65536&&(Il.head.comment+=String.fromCharCode(lh));while(lh&&Bu<qd);if(512&Il.flags&&(Il.check=$(Il.check,ud,Bu,id)),qd-=Bu,id+=Bu,lh)break e}else Il.head&&(Il.head.comment=null);Il.mode=9;case 9:if(512&Il.flags){for(;Nl<16;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}if(Ed!==(65535&Il.check)){Bl.msg="header crc mismatch",Il.mode=zn;break}Ed=0,Nl=0}Il.head&&(Il.head.hcrc=Il.flags>>9&1,Il.head.done=!0),Bl.adler=Il.check=0,Il.mode=ie;break;case 10:for(;Nl<32;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Bl.adler=Il.check=Et(Ed),Ed=0,Nl=0,Il.mode=11;case 11:if(Il.havedict===0)return Bl.next_out=rh,Bl.avail_out=oh,Bl.next_in=id,Bl.avail_in=qd,Il.hold=Ed,Il.bits=Nl,2;Bl.adler=Il.check=1,Il.mode=ie;case ie:if(Pu===5||Pu===6)break e;case 13:if(Il.last){Ed>>>=7&Nl,Nl-=7&Nl,Il.mode=27;break}for(;Nl<3;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}switch(Il.last=1&Ed,Nl-=1,3&(Ed>>>=1)){case 0:Il.mode=14;break;case 1:if(Tl(Il),Il.mode=20,Pu===6){Ed>>>=2,Nl-=2;break e}break;case 2:Il.mode=17;break;case 3:Bl.msg="invalid block type",Il.mode=zn}Ed>>>=2,Nl-=2;break;case 14:for(Ed>>>=7&Nl,Nl-=7&Nl;Nl<32;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}if((65535&Ed)!=(Ed>>>16^65535)){Bl.msg="invalid stored block lengths",Il.mode=zn;break}if(Il.length=65535&Ed,Ed=0,Nl=0,Il.mode=15,Pu===6)break e;case 15:Il.mode=16;case 16:if(Bu=Il.length){if(Bu>qd&&(Bu=qd),Bu>oh&&(Bu=oh),Bu===0)break e;_.arraySet(pd,ud,id,Bu,rh),qd-=Bu,id+=Bu,oh-=Bu,rh+=Bu,Il.length-=Bu;break}Il.mode=ie;break;case 17:for(;Nl<14;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}if(Il.nlen=257+(31&Ed),Ed>>>=5,Nl-=5,Il.ndist=1+(31&Ed),Ed>>>=5,Nl-=5,Il.ncode=4+(15&Ed),Ed>>>=4,Nl-=4,Il.nlen>286||Il.ndist>30){Bl.msg="too many length or distance symbols",Il.mode=zn;break}Il.have=0,Il.mode=18;case 18:for(;Il.have<Il.ncode;){for(;Nl<3;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Il.lens[kf[Il.have++]]=7&Ed,Ed>>>=3,Nl-=3}for(;Il.have<19;)Il.lens[kf[Il.have++]]=0;if(Il.lencode=Il.lendyn,Il.lenbits=7,Cp={bits:Il.lenbits},yp=oe(0,Il.lens,0,19,Il.lencode,0,Il.work,Cp),Il.lenbits=Cp.bits,yp){Bl.msg="invalid code lengths set",Il.mode=zn;break}Il.have=0,Il.mode=19;case 19:for(;Il.have<Il.nlen+Il.ndist;){for(;Ih=(mf=Il.lencode[Ed&(1<<Il.lenbits)-1])>>>16&255,nd=65535&mf,!((dh=mf>>>24)<=Nl);){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}if(nd<16)Ed>>>=dh,Nl-=dh,Il.lens[Il.have++]=nd;else{if(nd===16){for(vp=dh+2;Nl<vp;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}if(Ed>>>=dh,Nl-=dh,Il.have===0){Bl.msg="invalid bit length repeat",Il.mode=zn;break}lh=Il.lens[Il.have-1],Bu=3+(3&Ed),Ed>>>=2,Nl-=2}else if(nd===17){for(vp=dh+3;Nl<vp;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Nl-=dh,lh=0,Bu=3+(7&(Ed>>>=dh)),Ed>>>=3,Nl-=3}else{for(vp=dh+7;Nl<vp;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Nl-=dh,lh=0,Bu=11+(127&(Ed>>>=dh)),Ed>>>=7,Nl-=7}if(Il.have+Bu>Il.nlen+Il.ndist){Bl.msg="invalid bit length repeat",Il.mode=zn;break}for(;Bu--;)Il.lens[Il.have++]=lh}}if(Il.mode===zn)break;if(Il.lens[256]===0){Bl.msg="invalid code -- missing end-of-block",Il.mode=zn;break}if(Il.lenbits=9,Cp={bits:Il.lenbits},yp=oe(1,Il.lens,0,Il.nlen,Il.lencode,0,Il.work,Cp),Il.lenbits=Cp.bits,yp){Bl.msg="invalid literal/lengths set",Il.mode=zn;break}if(Il.distbits=6,Il.distcode=Il.distdyn,Cp={bits:Il.distbits},yp=oe(2,Il.lens,Il.nlen,Il.ndist,Il.distcode,0,Il.work,Cp),Il.distbits=Cp.bits,yp){Bl.msg="invalid distances set",Il.mode=zn;break}if(Il.mode=20,Pu===6)break e;case 20:Il.mode=21;case 21:if(qd>=6&&oh>=258){Bl.next_out=rh,Bl.avail_out=oh,Bl.next_in=id,Bl.avail_in=qd,Il.hold=Ed,Il.bits=Nl,V(Bl,Cd),rh=Bl.next_out,pd=Bl.output,oh=Bl.avail_out,id=Bl.next_in,ud=Bl.input,qd=Bl.avail_in,Ed=Il.hold,Nl=Il.bits,Il.mode===ie&&(Il.back=-1);break}for(Il.back=0;Ih=(mf=Il.lencode[Ed&(1<<Il.lenbits)-1])>>>16&255,nd=65535&mf,!((dh=mf>>>24)<=Nl);){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}if(Ih&&!(240&Ih)){for(Yd=dh,Kh=Ih,rp=nd;Ih=(mf=Il.lencode[rp+((Ed&(1<<Yd+Kh)-1)>>Yd)])>>>16&255,nd=65535&mf,!(Yd+(dh=mf>>>24)<=Nl);){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Ed>>>=Yd,Nl-=Yd,Il.back+=Yd}if(Ed>>>=dh,Nl-=dh,Il.back+=dh,Il.length=nd,Ih===0){Il.mode=26;break}if(32&Ih){Il.back=-1,Il.mode=ie;break}if(64&Ih){Bl.msg="invalid literal/length code",Il.mode=zn;break}Il.extra=15&Ih,Il.mode=22;case 22:if(Il.extra){for(vp=Il.extra;Nl<vp;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Il.length+=Ed&(1<<Il.extra)-1,Ed>>>=Il.extra,Nl-=Il.extra,Il.back+=Il.extra}Il.was=Il.length,Il.mode=23;case 23:for(;Ih=(mf=Il.distcode[Ed&(1<<Il.distbits)-1])>>>16&255,nd=65535&mf,!((dh=mf>>>24)<=Nl);){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}if(!(240&Ih)){for(Yd=dh,Kh=Ih,rp=nd;Ih=(mf=Il.distcode[rp+((Ed&(1<<Yd+Kh)-1)>>Yd)])>>>16&255,nd=65535&mf,!(Yd+(dh=mf>>>24)<=Nl);){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Ed>>>=Yd,Nl-=Yd,Il.back+=Yd}if(Ed>>>=dh,Nl-=dh,Il.back+=dh,64&Ih){Bl.msg="invalid distance code",Il.mode=zn;break}Il.offset=nd,Il.extra=15&Ih,Il.mode=24;case 24:if(Il.extra){for(vp=Il.extra;Nl<vp;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}Il.offset+=Ed&(1<<Il.extra)-1,Ed>>>=Il.extra,Nl-=Il.extra,Il.back+=Il.extra}if(Il.offset>Il.dmax){Bl.msg="invalid distance too far back",Il.mode=zn;break}Il.mode=25;case 25:if(oh===0)break e;if(Bu=Cd-oh,Il.offset>Bu){if((Bu=Il.offset-Bu)>Il.whave&&Il.sane){Bl.msg="invalid distance too far back",Il.mode=zn;break}Bu>Il.wnext?(Bu-=Il.wnext,wh=Il.wsize-Bu):wh=Il.wnext-Bu,Bu>Il.length&&(Bu=Il.length),Rd=Il.window}else Rd=pd,wh=rh-Il.offset,Bu=Il.length;Bu>oh&&(Bu=oh),oh-=Bu,Il.length-=Bu;do pd[rh++]=Rd[wh++];while(--Bu);Il.length===0&&(Il.mode=21);break;case 26:if(oh===0)break e;pd[rh++]=Il.length,oh--,Il.mode=21;break;case 27:if(Il.wrap){for(;Nl<32;){if(qd===0)break e;qd--,Ed|=ud[id++]<<Nl,Nl+=8}if(Cd-=oh,Bl.total_out+=Cd,Il.total+=Cd,Cd&&(Bl.adler=Il.check=Il.flags?$(Il.check,pd,Cd,rh-Cd):M(Il.check,pd,Cd,rh-Cd)),Cd=oh,(Il.flags?Ed:Et(Ed))!==Il.check){Bl.msg="incorrect data check",Il.mode=zn;break}Ed=0,Nl=0}Il.mode=28;case 28:if(Il.wrap&&Il.flags){for(;Nl<32;){if(qd===0)break e;qd--,Ed+=ud[id++]<<Nl,Nl+=8}if(Ed!==(4294967295&Il.total)){Bl.msg="incorrect length check",Il.mode=zn;break}Ed=0,Nl=0}Il.mode=29;case 29:yp=1;break e;case zn:yp=-3;break e;case 31:return-4;default:return Y}return Bl.next_out=rh,Bl.avail_out=oh,Bl.next_in=id,Bl.avail_in=qd,Il.hold=Ed,Il.bits=Nl,(Il.wsize||Cd!==Bl.avail_out&&Il.mode<zn&&(Il.mode<27||Pu!==4))&&$l(Bl,Bl.output,Bl.next_out,Cd-Bl.avail_out)?(Il.mode=31,-4):(Gd-=Bl.avail_in,Cd-=Bl.avail_out,Bl.total_in+=Gd,Bl.total_out+=Cd,Il.total+=Cd,Il.wrap&&Cd&&(Bl.adler=Il.check=Il.flags?$(Il.check,pd,Cd,Bl.next_out-Cd):M(Il.check,pd,Cd,Bl.next_out-Cd)),Bl.data_type=Il.bits+(Il.last?64:0)+(Il.mode===ie?128:0)+(Il.mode===20||Il.mode===15?256:0),(Gd===0&&Cd===0||Pu===4)&&yp===0&&(yp=-5),yp)},h.inflateEnd=function(Bl){if(!Bl||!Bl.state)return Y;var Pu=Bl.state;return Pu.window&&(Pu.window=null),Bl.state=null,0},h.inflateGetHeader=function(Bl,Pu){var Il;return Bl&&Bl.state&&2&(Il=Bl.state).wrap?(Il.head=Pu,Pu.done=!1,0):Y},h.inflateSetDictionary=function(Bl,Pu){var Il,ud=Pu.length;return Bl&&Bl.state?(Il=Bl.state).wrap!==0&&Il.mode!==11?Y:Il.mode===11&&M(1,Pu,ud,0)!==Il.check?-3:$l(Bl,Pu,ud,ud)?(Il.mode=31,-4):(Il.havedict=1,0):Y},h.inflateInfo="pako inflate (from Nodeca project)"},670:n=>{n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},681:n=>{n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},697:(n,h,s)=>{var _=s(981);function M(nd){for(var Yd=nd.length;--Yd>=0;)nd[Yd]=0}var $=256,V=286,oe=30,Y=15,ie=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],zn=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ml=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rl=new Array(576);M(rl);var Ml=new Array(60);M(Ml);var kl=new Array(512);M(kl);var _u=new Array(256);M(_u);var Hu=new Array(29);M(Hu);var bu,dl,Tl,$l=new Array(oe);function Bl(nd,Yd,Kh,rp,lh){this.static_tree=nd,this.extra_bits=Yd,this.extra_base=Kh,this.elems=rp,this.max_length=lh,this.has_stree=nd&&nd.length}function Pu(nd,Yd){this.dyn_tree=nd,this.max_code=0,this.stat_desc=Yd}function Il(nd){return nd<256?kl[nd]:kl[256+(nd>>>7)]}function ud(nd,Yd){nd.pending_buf[nd.pending++]=255&Yd,nd.pending_buf[nd.pending++]=Yd>>>8&255}function pd(nd,Yd,Kh){nd.bi_valid>16-Kh?(nd.bi_buf|=Yd<<nd.bi_valid&65535,ud(nd,nd.bi_buf),nd.bi_buf=Yd>>16-nd.bi_valid,nd.bi_valid+=Kh-16):(nd.bi_buf|=Yd<<nd.bi_valid&65535,nd.bi_valid+=Kh)}function id(nd,Yd,Kh){pd(nd,Kh[2*Yd],Kh[2*Yd+1])}function rh(nd,Yd){var Kh=0;do Kh|=1&nd,nd>>>=1,Kh<<=1;while(--Yd>0);return Kh>>>1}function qd(nd,Yd,Kh){var rp,lh,yp=new Array(16),Cp=0;for(rp=1;rp<=Y;rp++)yp[rp]=Cp=Cp+Kh[rp-1]<<1;for(lh=0;lh<=Yd;lh++){var vp=nd[2*lh+1];vp!==0&&(nd[2*lh]=rh(yp[vp]++,vp))}}function oh(nd){var Yd;for(Yd=0;Yd<V;Yd++)nd.dyn_ltree[2*Yd]=0;for(Yd=0;Yd<oe;Yd++)nd.dyn_dtree[2*Yd]=0;for(Yd=0;Yd<19;Yd++)nd.bl_tree[2*Yd]=0;nd.dyn_ltree[512]=1,nd.opt_len=nd.static_len=0,nd.last_lit=nd.matches=0}function Ed(nd){nd.bi_valid>8?ud(nd,nd.bi_buf):nd.bi_valid>0&&(nd.pending_buf[nd.pending++]=nd.bi_buf),nd.bi_buf=0,nd.bi_valid=0}function Nl(nd,Yd,Kh,rp){var lh=2*Yd,yp=2*Kh;return nd[lh]<nd[yp]||nd[lh]===nd[yp]&&rp[Yd]<=rp[Kh]}function Gd(nd,Yd,Kh){for(var rp=nd.heap[Kh],lh=Kh<<1;lh<=nd.heap_len&&(lh<nd.heap_len&&Nl(Yd,nd.heap[lh+1],nd.heap[lh],nd.depth)&&lh++,!Nl(Yd,rp,nd.heap[lh],nd.depth));)nd.heap[Kh]=nd.heap[lh],Kh=lh,lh<<=1;nd.heap[Kh]=rp}function Cd(nd,Yd,Kh){var rp,lh,yp,Cp,vp=0;if(nd.last_lit!==0)do rp=nd.pending_buf[nd.d_buf+2*vp]<<8|nd.pending_buf[nd.d_buf+2*vp+1],lh=nd.pending_buf[nd.l_buf+vp],vp++,rp===0?id(nd,lh,Yd):(id(nd,(yp=_u[lh])+$+1,Yd),(Cp=ie[yp])!==0&&pd(nd,lh-=Hu[yp],Cp),id(nd,yp=Il(--rp),Kh),(Cp=zn[yp])!==0&&pd(nd,rp-=$l[yp],Cp));while(vp<nd.last_lit);id(nd,256,Yd)}function Bu(nd,Yd){var Kh,rp,lh,yp=Yd.dyn_tree,Cp=Yd.stat_desc.static_tree,vp=Yd.stat_desc.has_stree,mf=Yd.stat_desc.elems,Zp=-1;for(nd.heap_len=0,nd.heap_max=573,Kh=0;Kh<mf;Kh++)yp[2*Kh]!==0?(nd.heap[++nd.heap_len]=Zp=Kh,nd.depth[Kh]=0):yp[2*Kh+1]=0;for(;nd.heap_len<2;)yp[2*(lh=nd.heap[++nd.heap_len]=Zp<2?++Zp:0)]=1,nd.depth[lh]=0,nd.opt_len--,vp&&(nd.static_len-=Cp[2*lh+1]);for(Yd.max_code=Zp,Kh=nd.heap_len>>1;Kh>=1;Kh--)Gd(nd,yp,Kh);lh=mf;do Kh=nd.heap[1],nd.heap[1]=nd.heap[nd.heap_len--],Gd(nd,yp,1),rp=nd.heap[1],nd.heap[--nd.heap_max]=Kh,nd.heap[--nd.heap_max]=rp,yp[2*lh]=yp[2*Kh]+yp[2*rp],nd.depth[lh]=(nd.depth[Kh]>=nd.depth[rp]?nd.depth[Kh]:nd.depth[rp])+1,yp[2*Kh+1]=yp[2*rp+1]=lh,nd.heap[1]=lh++,Gd(nd,yp,1);while(nd.heap_len>=2);nd.heap[--nd.heap_max]=nd.heap[1],(function(kf,Eg){var Gg,Hf,Rg,fg,eg,Wg,Lg=Eg.dyn_tree,$g=Eg.max_code,Bm=Eg.stat_desc.static_tree,Lm=Eg.stat_desc.has_stree,$m=Eg.stat_desc.extra_bits,_d=Eg.stat_desc.extra_base,Zd=Eg.stat_desc.max_length,xh=0;for(fg=0;fg<=Y;fg++)kf.bl_count[fg]=0;for(Lg[2*kf.heap[kf.heap_max]+1]=0,Gg=kf.heap_max+1;Gg<573;Gg++)(fg=Lg[2*Lg[2*(Hf=kf.heap[Gg])+1]+1]+1)>Zd&&(fg=Zd,xh++),Lg[2*Hf+1]=fg,Hf>$g||(kf.bl_count[fg]++,eg=0,Hf>=_d&&(eg=$m[Hf-_d]),Wg=Lg[2*Hf],kf.opt_len+=Wg*(fg+eg),Lm&&(kf.static_len+=Wg*(Bm[2*Hf+1]+eg)));if(xh!==0){do{for(fg=Zd-1;kf.bl_count[fg]===0;)fg--;kf.bl_count[fg]--,kf.bl_count[fg+1]+=2,kf.bl_count[Zd]--,xh-=2}while(xh>0);for(fg=Zd;fg!==0;fg--)for(Hf=kf.bl_count[fg];Hf!==0;)(Rg=kf.heap[--Gg])>$g||(Lg[2*Rg+1]!==fg&&(kf.opt_len+=(fg-Lg[2*Rg+1])*Lg[2*Rg],Lg[2*Rg+1]=fg),Hf--)}})(nd,Yd),qd(yp,Zp,nd.bl_count)}function wh(nd,Yd,Kh){var rp,lh,yp=-1,Cp=Yd[1],vp=0,mf=7,Zp=4;for(Cp===0&&(mf=138,Zp=3),Yd[2*(Kh+1)+1]=65535,rp=0;rp<=Kh;rp++)lh=Cp,Cp=Yd[2*(rp+1)+1],++vp<mf&&lh===Cp||(vp<Zp?nd.bl_tree[2*lh]+=vp:lh!==0?(lh!==yp&&nd.bl_tree[2*lh]++,nd.bl_tree[32]++):vp<=10?nd.bl_tree[34]++:nd.bl_tree[36]++,vp=0,yp=lh,Cp===0?(mf=138,Zp=3):lh===Cp?(mf=6,Zp=3):(mf=7,Zp=4))}function Rd(nd,Yd,Kh){var rp,lh,yp=-1,Cp=Yd[1],vp=0,mf=7,Zp=4;for(Cp===0&&(mf=138,Zp=3),rp=0;rp<=Kh;rp++)if(lh=Cp,Cp=Yd[2*(rp+1)+1],!(++vp<mf&&lh===Cp)){if(vp<Zp)do id(nd,lh,nd.bl_tree);while(--vp!==0);else lh!==0?(lh!==yp&&(id(nd,lh,nd.bl_tree),vp--),id(nd,16,nd.bl_tree),pd(nd,vp-3,2)):vp<=10?(id(nd,17,nd.bl_tree),pd(nd,vp-3,3)):(id(nd,18,nd.bl_tree),pd(nd,vp-11,7));vp=0,yp=lh,Cp===0?(mf=138,Zp=3):lh===Cp?(mf=6,Zp=3):(mf=7,Zp=4)}}M($l);var dh=!1;function Ih(nd,Yd,Kh,rp){pd(nd,0+(rp?1:0),3),(function(lh,yp,Cp,vp){Ed(lh),ud(lh,Cp),ud(lh,~Cp),_.arraySet(lh.pending_buf,lh.window,yp,Cp,lh.pending),lh.pending+=Cp})(nd,Yd,Kh)}h._tr_init=function(nd){dh||((function(){var Yd,Kh,rp,lh,yp,Cp=new Array(16);for(rp=0,lh=0;lh<28;lh++)for(Hu[lh]=rp,Yd=0;Yd<1<<ie[lh];Yd++)_u[rp++]=lh;for(_u[rp-1]=lh,yp=0,lh=0;lh<16;lh++)for($l[lh]=yp,Yd=0;Yd<1<<zn[lh];Yd++)kl[yp++]=lh;for(yp>>=7;lh<oe;lh++)for($l[lh]=yp<<7,Yd=0;Yd<1<<zn[lh]-7;Yd++)kl[256+yp++]=lh;for(Kh=0;Kh<=Y;Kh++)Cp[Kh]=0;for(Yd=0;Yd<=143;)rl[2*Yd+1]=8,Yd++,Cp[8]++;for(;Yd<=255;)rl[2*Yd+1]=9,Yd++,Cp[9]++;for(;Yd<=279;)rl[2*Yd+1]=7,Yd++,Cp[7]++;for(;Yd<=287;)rl[2*Yd+1]=8,Yd++,Cp[8]++;for(qd(rl,287,Cp),Yd=0;Yd<oe;Yd++)Ml[2*Yd+1]=5,Ml[2*Yd]=rh(Yd,5);bu=new Bl(rl,ie,257,V,Y),dl=new Bl(Ml,zn,0,oe,Y),Tl=new Bl(new Array(0),Et,0,19,7)})(),dh=!0),nd.l_desc=new Pu(nd.dyn_ltree,bu),nd.d_desc=new Pu(nd.dyn_dtree,dl),nd.bl_desc=new Pu(nd.bl_tree,Tl),nd.bi_buf=0,nd.bi_valid=0,oh(nd)},h._tr_stored_block=Ih,h._tr_flush_block=function(nd,Yd,Kh,rp){var lh,yp,Cp=0;nd.level>0?(nd.strm.data_type===2&&(nd.strm.data_type=(function(vp){var mf,Zp=4093624447;for(mf=0;mf<=31;mf++,Zp>>>=1)if(1&Zp&&vp.dyn_ltree[2*mf]!==0)return 0;if(vp.dyn_ltree[18]!==0||vp.dyn_ltree[20]!==0||vp.dyn_ltree[26]!==0)return 1;for(mf=32;mf<$;mf++)if(vp.dyn_ltree[2*mf]!==0)return 1;return 0})(nd)),Bu(nd,nd.l_desc),Bu(nd,nd.d_desc),Cp=(function(vp){var mf;for(wh(vp,vp.dyn_ltree,vp.l_desc.max_code),wh(vp,vp.dyn_dtree,vp.d_desc.max_code),Bu(vp,vp.bl_desc),mf=18;mf>=3&&vp.bl_tree[2*ml[mf]+1]===0;mf--);return vp.opt_len+=3*(mf+1)+5+5+4,mf})(nd),lh=nd.opt_len+3+7>>>3,(yp=nd.static_len+3+7>>>3)<=lh&&(lh=yp)):lh=yp=Kh+5,Kh+4<=lh&&Yd!==-1?Ih(nd,Yd,Kh,rp):nd.strategy===4||yp===lh?(pd(nd,2+(rp?1:0),3),Cd(nd,rl,Ml)):(pd(nd,4+(rp?1:0),3),(function(vp,mf,Zp,kf){var Eg;for(pd(vp,mf-257,5),pd(vp,Zp-1,5),pd(vp,kf-4,4),Eg=0;Eg<kf;Eg++)pd(vp,vp.bl_tree[2*ml[Eg]+1],3);Rd(vp,vp.dyn_ltree,mf-1),Rd(vp,vp.dyn_dtree,Zp-1)})(nd,nd.l_desc.max_code+1,nd.d_desc.max_code+1,Cp+1),Cd(nd,nd.dyn_ltree,nd.dyn_dtree)),oh(nd),rp&&Ed(nd)},h._tr_tally=function(nd,Yd,Kh){return nd.pending_buf[nd.d_buf+2*nd.last_lit]=Yd>>>8&255,nd.pending_buf[nd.d_buf+2*nd.last_lit+1]=255&Yd,nd.pending_buf[nd.l_buf+nd.last_lit]=255&Kh,nd.last_lit++,Yd===0?nd.dyn_ltree[2*Kh]++:(nd.matches++,Yd--,nd.dyn_ltree[2*(_u[Kh]+$+1)]++,nd.dyn_dtree[2*Il(Yd)]++),nd.last_lit===nd.lit_bufsize-1},h._tr_align=function(nd){pd(nd,2,3),id(nd,256,rl),(function(Yd){Yd.bi_valid===16?(ud(Yd,Yd.bi_buf),Yd.bi_buf=0,Yd.bi_valid=0):Yd.bi_valid>=8&&(Yd.pending_buf[Yd.pending++]=255&Yd.bi_buf,Yd.bi_buf>>=8,Yd.bi_valid-=8)})(nd)}},701:n=>{n.exports=function(h,s,_,M){for(var $=65535&h,V=h>>>16&65535,oe=0;_!==0;){_-=oe=_>2e3?2e3:_;do V=V+($=$+s[M++]|0)|0;while(--oe);$%=65521,V%=65521}return $|V<<16}},746:n=>{n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},788:(n,h,s)=>{var _={};(0,s(981).assign)(_,s(71),s(3),s(681)),n.exports=_},797:(n,h,s)=>{s.r(h),s.d(h,{VASP:()=>$});var _=s(378),M=s(392);function $(V,oe={}){var Y=[[]],ie={};const zn=oe.assignBonds===void 0||oe.assignBonds;var Et=V.replace(/^\s+/,"").split(/\r?\n/);if(Et.length<3)return Y;if(!Et[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),Y;if(ie.length=parseFloat(Et[1]),ie.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),Y;ie.xVec=new Float32Array(Et[2].replace(/^\s+/,"").split(/\s+/)),ie.yVec=new Float32Array(Et[3].replace(/^\s+/,"").split(/\s+/)),ie.zVec=new Float32Array(Et[4].replace(/^\s+/,"").split(/\s+/));var ml=new _.Matrix3(ie.xVec[0],ie.xVec[1],ie.xVec[2],ie.yVec[0],ie.yVec[1],ie.yVec[2],ie.zVec[0],ie.zVec[1],ie.zVec[2]);ml.multiplyScalar(ie.length),Y.modelData=[{symmetries:[],cryst:{matrix:ml}}];var rl=Et[5].trim().split(/\s+/),Ml=new Int16Array(Et[6].trim().split(/\s+/)),kl=Et[7].trim(),_u=!1;if(kl.match(/S/)&&(_u=!0,kl=Et[8].trim()),kl.toLowerCase()[0]=="c")kl="cartesian";else{if(kl.toLowerCase()[0]!="d")return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),Y;kl="direct"}if(rl.length!=Ml.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(rl),console.log(Ml),Y;_u?Et.splice(0,9):Et.splice(0,8);for(var Hu=0,bu=0,dl=rl.length;bu<dl;bu++){for(var Tl=rl[bu],$l=0,Bl=Ml[bu];$l<Bl;$l++){var Pu=new Float32Array(Et[Hu+$l].trim().split(/\s+/)),Il={};Il.elem=Tl,kl=="cartesian"?(Il.x=ie.length*Pu[0],Il.y=ie.length*Pu[1],Il.z=ie.length*Pu[2]):(Il.x=ie.length*(Pu[0]*ie.xVec[0]+Pu[1]*ie.yVec[0]+Pu[2]*ie.zVec[0]),Il.y=ie.length*(Pu[0]*ie.xVec[1]+Pu[1]*ie.yVec[1]+Pu[2]*ie.zVec[1]),Il.z=ie.length*(Pu[0]*ie.xVec[2]+Pu[1]*ie.yVec[2]+Pu[2]*ie.zVec[2])),Il.bonds=[],Il.bondOrder=[],Y[0].push(Il)}Hu+=Ml[bu]}if(zn)for(let ud=0;ud<Y.length;ud++)(0,M.assignBonds)(Y[ud],oe);return Y}},834:n=>{n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},848:(n,h,s)=>{s.r(h),s.d(h,{VolumeData:()=>Y});var _=s(864),M=s(529),$=s(797),V=s(865),oe=s(75);class Y{constructor(zn,Et,ml){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(Hu){var bu=Hu/(this.size.y*this.size.z),dl=Hu%(this.size.y*this.size.z),Tl=Hu%this.size.z;return bu*=this.unit.x,dl*=this.unit.y,Tl*=this.unit.z,{x:bu+=this.origin.x,y:dl+=this.origin.y,z:Tl+=this.origin.z}},this.vasp=function(Hu){var bu=Hu.replace(/^\s+/,"").split(/[\n\r]/),dl=(0,$.VASP)(Hu)[0].length;if(dl==0)return console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var Tl,$l=1.889725992,Bl=parseFloat(bu[1]);Tl=bu[2].replace(/^\s+/,"").split(/\s+/);var Pu=new M.Vector3(parseFloat(Tl[0]),parseFloat(Tl[1]),parseFloat(Tl[2])).multiplyScalar(Bl*$l);Tl=bu[3].replace(/^\s+/,"").split(/\s+/);var Il=new M.Vector3(parseFloat(Tl[0]),parseFloat(Tl[1]),parseFloat(Tl[2])).multiplyScalar(Bl*$l);Tl=bu[4].replace(/^\s+/,"").split(/\s+/);var ud=new M.Vector3(parseFloat(Tl[0]),parseFloat(Tl[1]),parseFloat(Tl[2])).multiplyScalar(Bl*$l),pd=Pu.x*(Il.y*ud.z-ud.y*Il.z)-Il.x*(Pu.y*ud.z-ud.y*Pu.z)+ud.x*(Pu.y*Il.z-Il.y*Pu.z),id=1/(pd=Math.abs(pd)/Math.pow($l,3));bu.splice(0,8+dl+1);var rh=bu[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),qd=Math.abs(parseFloat(rh[0])),oh=Math.abs(parseFloat(rh[1])),Ed=Math.abs(parseFloat(rh[2])),Nl=this.origin=new M.Vector3(0,0,0);this.size={x:qd,y:oh,z:Ed},this.unit=new M.Vector3(Pu.x,Il.y,ud.z),Pu=Pu.multiplyScalar(1/($l*qd)),Il=Il.multiplyScalar(1/($l*oh)),ud=ud.multiplyScalar(1/($l*Ed)),Pu.y==0&&Pu.z==0&&Il.x==0&&Il.z==0&&ud.x==0&&ud.y==0||(this.matrix=new M.Matrix4(Pu.x,Il.x,ud.x,0,Pu.y,Il.y,ud.y,0,Pu.z,Il.z,ud.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new M.Matrix4().makeTranslation(Nl.x,Nl.y,Nl.z)),this.origin=new M.Vector3(0,0,0),this.unit=new M.Vector3(1,1,1)),bu.splice(0,1);var Gd=bu.join(" "),Cd=(Gd=Gd.replace(/^\s+/,"")).split(/[\s\r]+/);Cd.splice(qd*oh*Ed+1);for(var Bu=Float32Array.from(Cd,parseFloat),wh=0;wh<Bu.length;wh++)Bu[wh]=Bu[wh]*id*.036749309;this.data=Bu},this.dx=function(Hu){var bu,dl=Hu.split(/[\n\r]+/),Tl=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,$l=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,Bl=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,Pu=/data follows/,Il=0;for(Il=0;Il<dl.length;Il++){var ud=dl[Il];if(bu=Tl.exec(ud)){var pd=parseInt(bu[1]),id=parseInt(bu[2]),rh=parseInt(bu[3]);this.size={x:pd,y:id,z:rh}}else if(bu=Bl.exec(ud)){var qd=parseFloat(bu[1]);if(parseFloat(bu[2])==0&&parseFloat(bu[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),ud=dl[Il+=1],(bu=Bl.exec(ud))==null)return void console.error("Parse error in dx delta matrix");var oh=parseFloat(bu[2]);if(parseFloat(bu[1])==0&&parseFloat(bu[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),ud=dl[Il+=1],(bu=Bl.exec(ud))==null)return void console.error("Parse error in dx delta matrix");var Ed=parseFloat(bu[3]);parseFloat(bu[1])==0&&parseFloat(bu[2])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new M.Vector3(qd,oh,Ed)}else if(bu=$l.exec(ud)){var Nl=parseFloat(bu[1]),Gd=parseFloat(bu[2]),Cd=parseFloat(bu[3]);this.origin=new M.Vector3(Nl,Gd,Cd)}else if(bu=Pu.exec(ud))break}if(Il+=1,this.size&&this.origin&&this.unit&&this.size){var Bu=dl.splice(Il).join(" ").split(/[\s\r]+/);this.data=Float32Array.from(Bu,parseFloat)}else console.error("Error parsing dx format")},Et=Et.toLowerCase(),/\.gz$/.test(Et)){Et=Et.replace(/\.gz$/,"");try{this[Et]&&this.isbinary.has(Et)?(typeof zn=="string"&&(zn=(0,_.base64ToArray)(zn)),zn=(0,oe.inflate)(zn)):zn=new TextDecoder("utf-8").decode((0,oe.inflate)(zn))}catch(Hu){console.error(Hu)}}if(this[Et]&&(this.isbinary.has(Et)&&typeof zn=="string"&&(zn=(0,_.base64ToArray)(zn)),this[Et](zn)),ml){if(ml.negate)for(let Hu=0,bu=this.data.length;Hu<bu;Hu++)this.data[Hu]=-this.data[Hu];if(ml.normalize){var rl=0;for(let Hu=0,bu=this.data.length;Hu<bu;Hu++)rl+=this.data[Hu];var Ml=rl/this.data.length;rl=0;for(let Hu=0,bu=this.data.length;Hu<bu;Hu++){var kl=this.data[Hu]-Ml;rl+=kl*kl}var _u=rl/this.data.length;for(let Hu=0,bu=this.data.length;Hu<bu;Hu++)this.data[Hu]=(this.data[Hu]-Ml)/_u}}}getIndex(zn,Et,ml){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new M.Matrix4().getInverse(this.matrix));var rl=new M.Vector3(zn,Et,ml);zn=(rl=rl.applyMatrix4(this.inversematrix)).x,Et=rl.y,ml=rl.z}else zn-=this.origin.x,Et-=this.origin.y,ml-=this.origin.z,zn/=this.unit.x,Et/=this.unit.y,ml/=this.unit.z;return zn=Math.round(zn),Et=Math.round(Et),ml=Math.round(ml),zn<0||zn>=this.size.x||Et<0||Et>=this.size.y||ml<0||ml>=this.size.z?-1:zn*this.size.y*this.size.z+Et*this.size.z+ml}getVal(zn,Et,ml){let rl=this.getIndex(zn,Et,ml);return rl<0?0:this.data[rl]}cube(zn){var Et=zn.split(/\r?\n/);if(!(Et.length<6)){var ml=(0,V.CUBE)(zn,{}).modelData[0].cryst,rl=Et[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Ml=parseFloat(rl[0]),kl=Math.abs(Ml);this.origin=ml.origin,this.size=ml.size,this.unit=ml.unit,this.matrix=ml.matrix4;var _u=6;Ml<0&&_u++;var Hu=Et.splice(kl+_u).join(" "),bu=(Hu=Hu.replace(/^\s+/,"")).split(/[\s\r]+/);this.data=Float32Array.from(bu,parseFloat)}}ccp4(zn){var Et={};zn=new Int8Array(zn);var ml=new Int32Array(zn.buffer,0,56),rl=new Float32Array(zn.buffer,0,56),Ml=new DataView(zn.buffer);if(Et.MAP=String.fromCharCode(Ml.getUint8(208),Ml.getUint8(209),Ml.getUint8(210),Ml.getUint8(211)),Et.MACHST=[Ml.getUint8(212),Ml.getUint8(213)],Et.MACHST[0]===17&&Et.MACHST[1]===17)for(var kl=zn.byteLength,_u=0;_u<kl;_u+=4)Ml.setFloat32(_u,Ml.getFloat32(_u),!0);Et.NX=ml[0],Et.NY=ml[1],Et.NZ=ml[2],Et.MODE=ml[3],Et.NXSTART=ml[4],Et.NYSTART=ml[5],Et.NZSTART=ml[6],Et.MX=ml[7],Et.MY=ml[8],Et.MZ=ml[9],Et.xlen=rl[10],Et.ylen=rl[11],Et.zlen=rl[12],Et.alpha=rl[13],Et.beta=rl[14],Et.gamma=rl[15],Et.MAPC=ml[16],Et.MAPR=ml[17],Et.MAPS=ml[18],Et.DMIN=rl[19],Et.DMAX=rl[20],Et.DMEAN=rl[21],Et.ISPG=ml[22],Et.NSYMBT=ml[23],Et.LSKFLG=ml[24],Et.originX=rl[49],Et.originY=rl[50],Et.originZ=rl[51],Et.ARMS=rl[54];var Hu=Et,bu=[Hu.xlen,0,0],dl=[Hu.ylen*Math.cos(Math.PI/180*Hu.gamma),Hu.ylen*Math.sin(Math.PI/180*Hu.gamma),0],Tl=[Hu.zlen*Math.cos(Math.PI/180*Hu.beta),Hu.zlen*(Math.cos(Math.PI/180*Hu.alpha)-Math.cos(Math.PI/180*Hu.gamma)*Math.cos(Math.PI/180*Hu.beta))/Math.sin(Math.PI/180*Hu.gamma),0];Tl[2]=Math.sqrt(Hu.zlen*Hu.zlen*Math.sin(Math.PI/180*Hu.beta)*Math.sin(Math.PI/180*Hu.beta)-Tl[1]*Tl[1]);var $l=[0,bu,dl,Tl],Bl=[0,Hu.MX,Hu.MY,Hu.MZ],Pu=[0,Hu.MAPC,Hu.MAPR,Hu.MAPS];this.matrix=new M.Matrix4,this.matrix.set($l[Pu[1]][0]/Bl[Pu[1]],$l[Pu[2]][0]/Bl[Pu[2]],$l[Pu[3]][0]/Bl[Pu[3]],0,$l[Pu[1]][1]/Bl[Pu[1]],$l[Pu[2]][1]/Bl[Pu[2]],$l[Pu[3]][1]/Bl[Pu[3]],0,$l[Pu[1]][2]/Bl[Pu[1]],$l[Pu[2]][2]/Bl[Pu[2]],$l[Pu[3]][2]/Bl[Pu[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new M.Matrix4().makeTranslation(Hu.NXSTART+Hu.originX,Hu.NYSTART+Hu.originY,Hu.NZSTART+Hu.originZ)),this.origin=new M.Vector3(0,0,0),this.unit=new M.Vector3(1,1,1),this.size={x:Et.NX,y:Et.NY,z:Et.NZ},this.dimensionorder=[Et.MAPC,Et.MAPR,Et.MAPS];var Il=new Float32Array(zn.buffer,1024+Et.NSYMBT),ud=Et.NX,pd=Et.NY,id=Et.NZ;this.data=new Float32Array(ud*pd*id);for(let rh=0;rh<ud;rh++)for(let qd=0;qd<pd;qd++)for(let oh=0;oh<id;oh++)this.data[(rh*pd+qd)*id+oh]=Il[(oh*pd+qd)*ud+rh]}}},864:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(546),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(848),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(222),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(75);function extend(n,h){for(var s in h)h.hasOwnProperty(s)&&h[s]!==void 0&&(n[s]=h[s]);return n}function deepCopy(n){let h,s,_;if(n==null)return{};if(typeof n!="object"||n===null)return n;for(_ in h=Array.isArray(n)?[]:{},n)s=n[_],h[_]=deepCopy(s);return h}function isNumeric(n){var h=typeof n;return(h==="number"||h==="string")&&!isNaN(n-parseFloat(n))}function isEmptyObject(n){return Object.keys(n).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(n){n&&(!n.volformat||n.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData||(n.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(n.voldata,n.volformat)),n.volscheme&&(n.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(n.volscheme)))}function getExtent(n,h){var s,_,M,$,V,oe,Y,ie,zn,Et,ml=!h;if(s=_=M=9999,$=V=oe=-9999,Y=ie=zn=Et=0,n.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var rl=0;rl<n.length;rl++){var Ml=n[rl];if(Ml!==void 0&&isFinite(Ml.x)&&isFinite(Ml.y)&&isFinite(Ml.z)&&(Et++,Y+=Ml.x,ie+=Ml.y,zn+=Ml.z,s=s<Ml.x?s:Ml.x,_=_<Ml.y?_:Ml.y,M=M<Ml.z?M:Ml.z,$=$>Ml.x?$:Ml.x,V=V>Ml.y?V:Ml.y,oe=oe>Ml.z?oe:Ml.z,Ml.symmetries&&ml))for(var kl=0;kl<Ml.symmetries.length;kl++)Et++,Y+=Ml.symmetries[kl].x,ie+=Ml.symmetries[kl].y,zn+=Ml.symmetries[kl].z,s=s<Ml.symmetries[kl].x?s:Ml.symmetries[kl].x,_=_<Ml.symmetries[kl].y?_:Ml.symmetries[kl].y,M=M<Ml.symmetries[kl].z?M:Ml.symmetries[kl].z,$=$>Ml.symmetries[kl].x?$:Ml.symmetries[kl].x,V=V>Ml.symmetries[kl].y?V:Ml.symmetries[kl].y,oe=oe>Ml.symmetries[kl].z?oe:Ml.symmetries[kl].z}return[[s,_,M],[$,V,oe],[Y/Et,ie/Et,zn/Et]]}function getPropertyRange(n,h){for(var s=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,M=0,$=n.length;M<$;M++){var V=getAtomProperty(n[M],h);V!=null&&(V<s&&(s=V),V>_&&(_=V))}return isFinite(s)||isFinite(_)?isFinite(s)?isFinite(_)||(_=s):s=_:s=_=0,[s,_]}class PausableTimer{constructor(h,s,_){this.total_time_run=0,this.fn=h,this.arg=_,this.countdown=s,this.start_time=new Date().getTime(),this.ident=setTimeout(h,s,_)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(n){for(var h=window.atob(n),s=h.length,_=new Uint8Array(s),M=0;M<s;M++)_[M]=h.charCodeAt(M);return _}function getAtomProperty(n,h){var s=null;return n.properties&&n.properties[h]!==void 0?s=n.properties[h]:n[h]!==void 0&&(s=n[h]),s}function mergeGeos(n,h){var s=h.geometry;s!==void 0&&n.geometryGroups.push(s.geometryGroups[0])}function specStringToObject(n){if(typeof n=="object"||n===void 0||n==null)return n;try{return JSON.parse(n)}catch{}var h=function(ml){return isNumeric(ml)?Math.floor(parseFloat(ml))==parseInt(ml)||ml.indexOf(".")>=0?parseFloat(ml):parseInt(ml):ml==="true"||ml!=="false"&&ml},s={};if((n=n.replace(/%7E/g,"~"))==="all")return s;for(var _=n.split(";"),M=0;M<_.length;M++){var $=_[M].split(":"),V=$[0],oe={},Y=$[1];if(Y)if((Y=Y.replace(/~/g,"=")).indexOf("=")!==-1)for(var ie=Y.split(","),zn=0;zn<ie.length;zn++){var Et=ie[zn].split("=",2);oe[Et[0]]=h(Et[1])}else oe=Y.indexOf(",")!==-1?Y.split(","):h(Y);s[V]=oe}return s}function checkStatus(n){if(!n.ok)throw new Error(`HTTP ${n.status} - ${n.statusText}`);return n}function get(n,h){var s=fetch(n).then(checkStatus).then(_=>_.text());return h?s.then(h):s}function getbin(n,h,s,_){var M;return M=s=="POST"?fetch(n,{method:"POST",body:_}).then($=>checkStatus($)).then($=>$.arrayBuffer()):fetch(n).then($=>checkStatus($)).then($=>$.arrayBuffer()),h?M.then(h):M}function download(n,h,s,_){var M="",$="",V="",oe=null,Y=h.addModel();if(n.indexOf(":")<0&&(n=n.length==4?"pdb:"+n:isNaN(n)?"url:"+n:"cid:"+n),n.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),n="bcif:"+n.slice(5)),n.substring(0,5)==="bcif:")n=n.substring(5).toUpperCase(),V="https://models.rcsb.org/"+n+".bcif.gz",s&&s.noComputeSecondaryStructure===void 0&&(s.noComputeSecondaryStructure=!0),oe=new Promise(function(zn){getbin(V).then(function(Et){Y.addMolData(Et,"bcif.gz",s),h.zoomTo(),h.render(),zn(Y)},function(){console.error("fetch of "+V+" failed.")})});else{if(n.substring(0,4)==="pdb:"){if(M="bcif",s&&s.format&&(M=s.format),s&&s.noComputeSecondaryStructure===void 0&&(s.noComputeSecondaryStructure=!0),!(n=n.substring(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");M=="bcif"?V="https://models.rcsb.org/"+n.toUpperCase()+".bcif.gz":($=s&&s.pdbUri?s.pdbUri:"https://files.rcsb.org/view/",V=$+n+"."+M)}else if(n.substring(0,4)=="cid:"){if(M="sdf",!(n=n.substring(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");V="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+n+"/SDF?record_type=3d"}else n.substring(0,4)=="url:"&&(V=n.substring(4),M=V);var ie=function(zn){Y.addMolData(zn,M,s),h.zoomTo(),h.render()};oe=new Promise(function(zn){M=="bcif"?getbin(V).then(function(Et){ie(Et),zn(Y)}).catch(function(){$=s&&s.pdbUri?s.pdbUri:"https://files.rcsb.org/view/",V=$+n+".pdb",M="pdb",console.warn("falling back to pdb format"),get(V).then(function(Et){ie(Et),zn(Y)}).catch(function(Et){ie(""),zn(Y),console.error("fetch of "+V+" failed: "+Et.statusText)})}):get(V).then(function(Et){ie(Et),zn(Y)}).catch(function(Et){ie(""),zn(Y),console.error("fetch of "+V+" failed: "+Et.statusText)})})}return _?(oe.then(function(zn){_(zn)}),Y):oe}function getColorFromStyle(n,h){let s=h.colorscheme;if(_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]!==void 0)s=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s];else if(typeof s=="string"&&s.endsWith("Carbon")){let $=s.substring(0,s.lastIndexOf("Carbon")).toLowerCase();if(_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[$]!==void 0){let V=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);V.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[$],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]={prop:"elem",map:V},s=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]}}let _=n.color;if(h.color!==void 0&&h.color!="spectrum"&&(_=h.color),s!==void 0){let $,V;if(_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[s]!==void 0)s=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[s],s[n[s.prop]]!==void 0&&(_=s.map[n[s.prop]]);else if(s[n[s.prop]]!==void 0)_=s.map[n[s.prop]];else if(s.prop!==void 0&&s.gradient!==void 0){$=s.prop;var M=s.gradient;M instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(M=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(s));let oe=M.range()||[-1,1];V=getAtomProperty(n,$),V!=null&&(_=M.valueToHex(V,oe))}else s.prop!==void 0&&s.map!==void 0?($=s.prop,V=getAtomProperty(n,$),s.map[V]!==void 0&&(_=s.map[V])):h.colorscheme[n.elem]!==void 0?_=h.colorscheme[n.elem]:console.warn("Could not interpret colorscheme "+s)}else h.colorfunc!==void 0&&(_=h.colorfunc(n));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(_)}function getElement(n){let h=n;return typeof n=="string"?h=document.querySelector("#"+n):typeof n=="object"&&n.get&&(h=n.get(0)),h}function inflateString(n,h=!0){let s;return s=typeof n=="string"?new TextEncoder().encode(n):new Uint8Array(n),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(s,{to:h?"string":null})}},865:(n,h,s)=>{s.r(h),s.d(h,{CUBE:()=>V});var _=s(378),M=s(392);const $={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"};function V(oe,Y){Y=Y||{};const ie=[[]];let zn=oe.split(/\r?\n/);const Et=Y.assignBonds===void 0||Y.assignBonds;if(zn.length<6)return ie;let ml=zn[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const rl=Math.abs(parseFloat(ml[0]));let Ml={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const kl=Ml.origin=new _.Vector3(parseFloat(ml[1]),parseFloat(ml[2]),parseFloat(ml[3]));ml=zn[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),ml=zn[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const _u=ml[0]>0?.529177:1;kl.multiplyScalar(_u);const Hu=Math.abs(ml[0]),bu=new _.Vector3(parseFloat(ml[1]),parseFloat(ml[2]),parseFloat(ml[3])).multiplyScalar(_u);ml=zn[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const dl=Math.abs(ml[0]),Tl=new _.Vector3(parseFloat(ml[1]),parseFloat(ml[2]),parseFloat(ml[3])).multiplyScalar(_u);ml=zn[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const $l=Math.abs(ml[0]),Bl=new _.Vector3(parseFloat(ml[1]),parseFloat(ml[2]),parseFloat(ml[3])).multiplyScalar(_u);if(Ml.size={x:Hu,y:dl,z:$l},Ml.unit=new _.Vector3(bu.x,Tl.y,Bl.z),bu.y!=0||bu.z!=0||Tl.x!=0||Tl.z!=0||Bl.x!=0||Bl.y!=0){Ml.matrix4=new _.Matrix4(bu.x,Tl.x,Bl.x,0,bu.y,Tl.y,Bl.y,0,bu.z,Tl.z,Bl.z,0,0,0,0,1);let rh=new _.Matrix4().makeTranslation(kl.x,kl.y,kl.z);Ml.matrix4=Ml.matrix4.multiplyMatrices(rh,Ml.matrix4),Ml.matrix=Ml.matrix4.matrix3FromTopLeft(),Ml.origin=new _.Vector3(0,0,0),Ml.unit=new _.Vector3(1,1,1)}ie.modelData=[{cryst:Ml}],zn=zn.splice(6,rl);for(var Pu=ie[ie.length-1].length,Il=Pu+zn.length,ud=Pu;ud<Il;++ud){var pd={};pd.serial=ud;var id=zn[ud-Pu].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");pd.elem=$[id[0]],pd.x=parseFloat(id[2])*_u,pd.y=parseFloat(id[3])*_u,pd.z=parseFloat(id[4])*_u,pd.hetflag=!0,pd.bonds=[],pd.bondOrder=[],pd.properties={},ie[ie.length-1].push(pd)}if(Et)for(let rh=0;rh<ie.length;rh++)(0,M.assignBonds)(ie[rh],Y);return ie}},972:(n,h,s)=>{var _=s(981),M=!0,$=!0;try{String.fromCharCode.apply(null,[0])}catch{M=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$=!1}for(var V=new _.Buf8(256),oe=0;oe<256;oe++)V[oe]=oe>=252?6:oe>=248?5:oe>=240?4:oe>=224?3:oe>=192?2:1;function Y(ie,zn){if(zn<65534&&(ie.subarray&&$||!ie.subarray&&M))return String.fromCharCode.apply(null,_.shrinkBuf(ie,zn));for(var Et="",ml=0;ml<zn;ml++)Et+=String.fromCharCode(ie[ml]);return Et}V[254]=V[254]=1,h.string2buf=function(ie){var zn,Et,ml,rl,Ml,kl=ie.length,_u=0;for(rl=0;rl<kl;rl++)(64512&(Et=ie.charCodeAt(rl)))==55296&&rl+1<kl&&(64512&(ml=ie.charCodeAt(rl+1)))==56320&&(Et=65536+(Et-55296<<10)+(ml-56320),rl++),_u+=Et<128?1:Et<2048?2:Et<65536?3:4;for(zn=new _.Buf8(_u),Ml=0,rl=0;Ml<_u;rl++)(64512&(Et=ie.charCodeAt(rl)))==55296&&rl+1<kl&&(64512&(ml=ie.charCodeAt(rl+1)))==56320&&(Et=65536+(Et-55296<<10)+(ml-56320),rl++),Et<128?zn[Ml++]=Et:Et<2048?(zn[Ml++]=192|Et>>>6,zn[Ml++]=128|63&Et):Et<65536?(zn[Ml++]=224|Et>>>12,zn[Ml++]=128|Et>>>6&63,zn[Ml++]=128|63&Et):(zn[Ml++]=240|Et>>>18,zn[Ml++]=128|Et>>>12&63,zn[Ml++]=128|Et>>>6&63,zn[Ml++]=128|63&Et);return zn},h.buf2binstring=function(ie){return Y(ie,ie.length)},h.binstring2buf=function(ie){for(var zn=new _.Buf8(ie.length),Et=0,ml=zn.length;Et<ml;Et++)zn[Et]=ie.charCodeAt(Et);return zn},h.buf2string=function(ie,zn){var Et,ml,rl,Ml,kl=zn||ie.length,_u=new Array(2*kl);for(ml=0,Et=0;Et<kl;)if((rl=ie[Et++])<128)_u[ml++]=rl;else if((Ml=V[rl])>4)_u[ml++]=65533,Et+=Ml-1;else{for(rl&=Ml===2?31:Ml===3?15:7;Ml>1&&Et<kl;)rl=rl<<6|63&ie[Et++],Ml--;Ml>1?_u[ml++]=65533:rl<65536?_u[ml++]=rl:(rl-=65536,_u[ml++]=55296|rl>>10&1023,_u[ml++]=56320|1023&rl)}return Y(_u,ml)},h.utf8border=function(ie,zn){var Et;for((zn=zn||ie.length)>ie.length&&(zn=ie.length),Et=zn-1;Et>=0&&(192&ie[Et])==128;)Et--;return Et<0||Et===0?zn:Et+V[ie[Et]]>zn?Et:zn}},981:(n,h)=>{var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function _(V,oe){return Object.prototype.hasOwnProperty.call(V,oe)}h.assign=function(V){for(var oe=Array.prototype.slice.call(arguments,1);oe.length;){var Y=oe.shift();if(Y){if(typeof Y!="object")throw new TypeError(Y+"must be non-object");for(var ie in Y)_(Y,ie)&&(V[ie]=Y[ie])}}return V},h.shrinkBuf=function(V,oe){return V.length===oe?V:V.subarray?V.subarray(0,oe):(V.length=oe,V)};var M={arraySet:function(V,oe,Y,ie,zn){if(oe.subarray&&V.subarray)V.set(oe.subarray(Y,Y+ie),zn);else for(var Et=0;Et<ie;Et++)V[zn+Et]=oe[Y+Et]},flattenChunks:function(V){var oe,Y,ie,zn,Et,ml;for(ie=0,oe=0,Y=V.length;oe<Y;oe++)ie+=V[oe].length;for(ml=new Uint8Array(ie),zn=0,oe=0,Y=V.length;oe<Y;oe++)Et=V[oe],ml.set(Et,zn),zn+=Et.length;return ml}},$={arraySet:function(V,oe,Y,ie,zn){for(var Et=0;Et<ie;Et++)V[zn+Et]=oe[Y+Et]},flattenChunks:function(V){return[].concat.apply([],V)}};h.setTyped=function(V){V?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,M)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,$))},h.setTyped(s)}},__webpack_module_cache__={};function __webpack_require__(n){var h=__webpack_module_cache__[n];if(h!==void 0)return h.exports;var s=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.d=(n,h)=>{for(var s in h)__webpack_require__.o(h,s)&&!__webpack_require__.o(n,s)&&Object.defineProperty(n,s,{enumerable:!0,get:h[s]})},__webpack_require__.o=(n,h)=>Object.prototype.hasOwnProperty.call(n,h),__webpack_require__.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},__webpack_require__(16),__webpack_require__(185);var __webpack_exports__=__webpack_require__(307);return __webpack_exports__})(),module.exports=factory()})(_3DmolMin)),_3DmolMin.exports}require_3DmolMin();const covalentRadii={H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.61,Fe:1.52,Co:1.5,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.75,Hf:1.87,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69},$3Dmol$1=window.$3Dmol;function mod(n,h){return(n%h+h)%h}function setCustomBondLengths(){function n(h,s){$3Dmol$1.setBondLength(h,s)}Object.keys(covalentRadii).forEach(h=>{n(h,1.05*covalentRadii[h])})}const Visualizer3dmol=reactExports.forwardRef(({viewerParams:n,cifText:h},s)=>{const _=reactExports.useRef(null),M=reactExports.useRef(null),$=reactExports.useRef("gldiv-"+(Math.random()+1).toString(36).substring(7));reactExports.useEffect(()=>{setCustomBondLengths()},[]);const V=()=>{if(M.current=_.current.addModel(),h){let ie=$3Dmol$1.Parsers.CIF(h),zn=ie[0],Et=ie.modelData[0].cryst;M.current.setCrystData(Et.a,Et.b,Et.c,Et.alpha,Et.beta,Et.gamma);let ml=M.current.modelData.cryst.matrix,rl=new $3Dmol$1.Matrix3().getInverse3(ml),Ml=[],kl=[];zn.forEach(bu=>{let dl=new $3Dmol$1.Vector3(bu.x,bu.y,bu.z);if(n.packedCell){let Tl=dl.clone().applyMatrix3(rl);dl=new $3Dmol$1.Vector3(mod(Tl.x,1),mod(Tl.y,1),mod(Tl.z,1)).applyMatrix3(ml)}kl.push({elem:bu.elem,x:dl.x,y:dl.y,z:dl.z})});let _u=.03,Hu=n.supercell;for(let bu=-1;bu<Hu[0]+1;bu++)for(let dl=-1;dl<Hu[1]+1;dl++)for(let Tl=-1;Tl<Hu[2]+1;Tl++){let $l=new $3Dmol$1.Vector3(bu,dl,Tl);if($l.applyMatrix3(ml),bu==-1||bu==Hu[0]||dl==-1||dl==Hu[1]||Tl==-1||Tl==Hu[2])if(n.packedCell)kl.forEach(Bl=>{let Pu=new $3Dmol$1.Vector3(Bl.x,Bl.y,Bl.z);Pu.add($l);let Il=Pu.clone().applyMatrix3(rl);Il.x>-_u&&Il.x<Hu[0]+_u&&Il.y>-_u&&Il.y<Hu[1]+_u&&Il.z>-_u&&Il.z<Hu[2]+_u&&Ml.push({elem:Bl.elem,x:Pu.x,y:Pu.y,z:Pu.z})});else continue;else kl.forEach(Bl=>{Ml.push({elem:Bl.elem,x:Bl.x+$l.x,y:Bl.y+$l.y,z:Bl.z+$l.z})})}M.current.addAtoms(Ml)}},oe=()=>{_.current.removeAllModels(),V();let ie={sphere:{scale:.3,colorscheme:"Jmol"}};n.vdwRadius&&(ie.sphere.scale=1),n.bonds&&(ie.stick={radius:.15,colorscheme:"Jmol"}),_.current.setStyle(ie),_.current.addUnitCell(M.current),M.current.assignBonds(),_.current.removeAllLabels(),n.atomLabels&&M.current.atoms.forEach(zn=>{_.current.addLabel(zn.elem,{position:{x:zn.x,y:zn.y,z:zn.z},fontColor:"black",bold:!0,fontSize:18,showBackground:!1,backgroundOpacity:1,inFront:!0},null,!0)}),_.current.zoomTo(),_.current.zoom(1.4),_.current.render()},Y=(ie,zn)=>{ie=="camera"&&(zn=="x"&&_.current.setView([0,0,0,0,-.5,-.5,-.5,.5]),zn=="y"&&_.current.setView([0,0,0,0,.5,.5,.5,.5]),zn=="z"&&_.current.setView([0,0,0,0,0,0,0,1]),_.current.zoomTo(),_.current.zoom(1.4))};return reactExports.useImperativeHandle(s,()=>({handleEvent:Y})),reactExports.useEffect(()=>{let ie={backgroundColor:"white",orthographic:!0};_.current=$3Dmol$1.createViewer($.current,ie),oe()},[]),reactExports.useEffect(()=>{_.current&&oe()},[n,h]),jsxRuntimeExports.jsx("div",{id:$.current,className:"gldiv",children:"No data!"})});Visualizer3dmol.displayName="Visualizer3dmol";const StructureWindow=({mouseEnabled:n,setMouseEnabledState:h,visualizerRef:s,viewerParams:_,cifText:M})=>{let $="structure-window";n||($+=" disable-mouse");let V="Click to interact",oe="mouse-disabled-note";return n&&(oe="mouse-disabled-note on"),jsxRuntimeExports.jsxs("div",{className:"structure-window-outer",children:[jsxRuntimeExports.jsx("div",{className:"structure-window-click-handler",onClick:()=>h(!0),children:jsxRuntimeExports.jsx("div",{className:$,children:jsxRuntimeExports.jsx(Visualizer3dmol,{ref:s,viewerParams:_,cifText:M})})}),jsxRuntimeExports.jsx("div",{className:oe,onClick:()=>h(!n),children:V})]})},StructureVisualizer=n=>{const[h,s]=reactExports.useState({supercell:n.initSupercell||[2,2,2],bonds:!0,packedCell:!0,atomLabels:!1,vdwRadius:!1}),[_,M]=reactExports.useState(!1),$=reactExports.useRef(null),V=reactExports.useRef(null);reactExports.useEffect(()=>{const zn=Et=>{V&&!V.current.contains(Et.target)&&M(!1)};return document.addEventListener("mousedown",zn),()=>{document.removeEventListener("mousedown",zn)}},[]);const oe=zn=>{M(zn)},Y=(zn,Et)=>{s(ml=>({...ml,[zn]:Et}))},ie=(zn,Et)=>{$.current.handleEvent(zn,Et)};return jsxRuntimeExports.jsxs("div",{ref:V,className:"structure-visualizer",children:[jsxRuntimeExports.jsx(StructureWindow,{visualizerRef:$,viewerParams:h,cifText:n.cifText,mouseEnabled:_,setMouseEnabledState:oe}),jsxRuntimeExports.jsx(ControlBox,{viewerParams:h,onViewerParamChange:Y,onViewerEvent:ie})]})},MCInfoBox=({children:n,style:h=null})=>jsxRuntimeExports.jsx("div",{style:h,children:jsxRuntimeExports.jsx("div",{className:"mc-info-container subsection-shadow overflow-auto rounded",children:n})}),IcsdLogo="/assets/icsd-CyAoXolo.png",CodLogo="/assets/cod-C-fmIdgX.png",MpdsLogo="/assets/mpds-CkkCkplF.png";function sourceUrl(n){return n.database=="MPDS"?`https://mpds.io/#entry/${n.id}`:n.database=="COD"?`http://www.crystallography.net/cod/${n.id}.html`:n.database=="ICSD"?`https://icsd.fiz-karlsruhe.de/linkicsd.xhtml?coll_code=${n.id}`:null}const SourceInfoText=({source:n,metadata:h})=>{if(!("info"in n))return console.warn("source['info'] not present."),null;if(!("info"in h))return console.warn("metadata['info'] not present."),null;let s=[],_=[],M=h?.info?.source?.high_pressure_threshold,$=h?.info?.source?.high_temperature_threshold;n?.info?.is_theoretical&&(s.push("theoretical origin"),_.push("is of theoretical origin")),n?.info?.is_high_pressure&&M&&(s.push("high pressure"),_.push(`was characterized at a pressure higher than ${M.value} ${M.unit}`)),n?.info?.is_high_temperature&&$&&(s.push("high temperature"),_.push(`was characterized at a temperature higher than ${$.value} ${$.unit}`));let V="";if(s.length>0&&(V=s.join("; "),V=`(${V})`),V=="")return null;for(let Y=0;Y<_.length;Y++)Y<_.length-1?_[Y]=_[Y]+";":_[Y]=_[Y]+".";const oe=jsxRuntimeExports.jsx(Popover$1,{id:"popover-basic",children:jsxRuntimeExports.jsxs(Popover$1.Body,{children:["The source database reported that the source crystal",jsxRuntimeExports.jsx("ul",{style:{margin:"0"},children:_.map(Y=>jsxRuntimeExports.jsx("li",{children:Y},Y))})]})});return jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"5px",marginLeft:"10px",alignItems:"center"},children:[V,jsxRuntimeExports.jsx("div",{style:{width:"20px",height:"20px",fontSize:"14px"},children:jsxRuntimeExports.jsx(Eu,{popover:oe,placement:"top"})})]})};function SourceInfo({sources:n,metadata:h}){const s=n[0];return jsxRuntimeExports.jsx("ul",{className:"no-bullets",children:n.map(_=>{let M=null;return _.database=="ICSD"&&(M=IcsdLogo),_.database=="COD"&&(M=CodLogo),_.database=="MPDS"&&(M=MpdsLogo),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("a",{className:"source-a",href:sourceUrl(_),title:"Go to source data",children:jsxRuntimeExports.jsxs("div",{style:{display:"inline-flex",gap:"5px",alignItems:"center"},children:[jsxRuntimeExports.jsx("img",{src:M,style:{height:"20px"}}),_.database," ID: ",_.id]})}),jsxRuntimeExports.jsx(SourceInfoText,{source:s,metadata:h})]},_.id)})})}function GeneralInfoBox({details:n,metadata:h,methodLabel:s}){return jsxRuntimeExports.jsxs(MCInfoBox,{style:{height:"450px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Info"}),jsxRuntimeExports.jsxs("ul",{className:"no-bullets",children:[jsxRuntimeExports.jsxs("li",{children:["Formula (IUPAC): ",Cu(n.general.formula)]}),jsxRuntimeExports.jsxs("li",{children:["Hill formula (full):"," ",Cu(n.general.formula_hill)]}),jsxRuntimeExports.jsxs("li",{children:["Bravais lattice: ",n.general.bravais_lattice]}),jsxRuntimeExports.jsxs("li",{children:["Space group symbol:"," ",Tu(n.general.spacegroup_international)]}),jsxRuntimeExports.jsxs("li",{children:["Space group number: ",n.general.spacegroup_number]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Source"}),jsxRuntimeExports.jsx(SourceInfo,{sources:n.source,metadata:h})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Properties"}),jsxRuntimeExports.jsxs("ul",{className:"no-bullets",children:[jsxRuntimeExports.jsxs("li",{children:["Total energy:"," ",format_aiida_prop(n.properties.total_energy,h.info.properties.total_energy,s,2)]}),jsxRuntimeExports.jsxs("li",{children:["Density:"," ",ku.calculateDensity(n.general.formula_hill,n.properties.cell_volume)," ","kg/m",jsxRuntimeExports.jsx("sup",{children:"3"})]}),jsxRuntimeExports.jsxs("li",{children:["Cell volume:"," ",format_aiida_prop(n.properties.cell_volume,h.info.properties.cell_volume,s,2)]}),jsxRuntimeExports.jsxs("li",{children:["Total magnetization:"," ",format_aiida_prop(n.properties.total_magnetization,h.info.properties.total_magnetization,s,2)]}),jsxRuntimeExports.jsxs("li",{children:["Absolute magnetization:"," ",format_aiida_prop(n.properties.absolute_magnetization,h.info.properties.absolute_magnetization,s,2)]})]})]})]})}const StructureViewerBox=({uuid:n,structureInfo:h,methodLabel:s})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"subsection-title",children:["Structure"," ",jsxRuntimeExports.jsx(Ou,{explore_url:EXPLORE_URLS[s],uuid:n})]}),jsxRuntimeExports.jsxs("div",{className:"structure-view-box subsection-shadow",children:[jsxRuntimeExports.jsx(StructureVisualizer,{cifText:h.cif,initSupercell:[2,2,2]}),jsxRuntimeExports.jsx("div",{className:"download-button-container",children:jsxRuntimeExports.jsx(Au,{aiida_rest_url:AIIDA_API_URLS[s],uuid:n})})]})]});function OverviewSection({params:n,loadedData:h}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"section-heading",children:"General overview"}),jsxRuntimeExports.jsx(Container,{fluid:!0,className:"section-container",children:jsxRuntimeExports.jsxs(Row,{children:[jsxRuntimeExports.jsx(Col,{className:"flex-column",children:jsxRuntimeExports.jsx(StructureViewerBox,{uuid:h.details.general.structure_uuid,structureInfo:h.structureInfo,methodLabel:n.method})}),jsxRuntimeExports.jsx(Col,{className:"flex-column",children:jsxRuntimeExports.jsx("div",{style:{marginTop:"35px"},children:jsxRuntimeExports.jsx(GeneralInfoBox,{details:h.details,metadata:h.metadata,methodLabel:n.method})})})]})})]})}function formatIfFloat(n,h){return typeof n=="number"&&!isNaN(n)?n.toFixed(h):n}const MCTable=({headerRow:n,contents:h,floatPrecision:s=4,style:_=null})=>jsxRuntimeExports.jsx("div",{className:"mc-data-table-container subsection-shadow overflow-auto rounded",style:_,children:jsxRuntimeExports.jsxs(Table,{bordered:!0,style:{margin:0},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsx("tr",{children:n.map((M,$)=>jsxRuntimeExports.jsx("th",{className:"px-2 py-2",children:M},$))})}),jsxRuntimeExports.jsx("tbody",{children:h.map((M,$)=>jsxRuntimeExports.jsx("tr",{children:M.map((V,oe)=>jsxRuntimeExports.jsx("td",{children:formatIfFloat(V,s)},oe))},$))})]})});function bundleLatticeData({baseMatrix:n,transform_matrix:h=null}){const s=h?Su.multiplyMatrices(h,n):n,_=Su.getMatrixParams(s);return{matrix:s,angles:[_.angles[1][2],_.angles[0][2],_.angles[0][1]],lengths:_.lengths}}const CellInfoBox=({structureInfo:n,spacegroup_symbol:h="P1"})=>{const[s,_]=reactExports.useState(!1),[M,$]=reactExports.useState(!1),V=n.aiidaAttributes.cell,oe=ju(h);console.log("Cell transformation matrix:",oe);const Y=bundleLatticeData({baseMatrix:V}),ie=bundleLatticeData({baseMatrix:V,transform_matrix:oe}),zn=M?ie:Y,Et=()=>{_(!s)};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"subsection-title",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsx("div",{style:{flex:1},children:jsxRuntimeExports.jsx("span",{children:"Cell Info"})}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"40px",marginRight:"5px",alignItems:"stretch"},children:jsxRuntimeExports.jsx(Ru,{labelLeft:"Parameters",labelRight:"Matrix",switchLength:"30px",fontSize:"17px",onToggle:Et})})]}),jsxRuntimeExports.jsx("div",{style:{minHeight:"181px",display:"flex",flexDirection:"column",justifyContent:"center"},children:s?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(MCTable,{headerRow:["","x []","y []","z []"],contents:zn.matrix.map((ml,rl)=>[jsxRuntimeExports.jsxs("span",{children:["v",jsxRuntimeExports.jsx("sub",{children:rl+1})]},`v${rl}`),ml[0],ml[1],ml[2]])})}):jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[jsxRuntimeExports.jsx(MCTable,{headerRow:["","a","b","c"],contents:[["Lengths []",...zn.lengths]]}),jsxRuntimeExports.jsx(MCTable,{headerRow:["","","",""],contents:[["Angles []",...zn.angles]]})]})})]})};function cartToFrac(n,h){const s=Su.invertMatrix(h);return console.log("Cell",h),console.log("Inverse Cell",s),n.map(_=>[s[0][0]*_[0]+s[0][1]*_[1]+s[0][2]*_[2],s[1][0]*_[0]+s[1][1]*_[1]+s[1][2]*_[2],s[2][0]*_[0]+s[2][1]*_[1]+s[2][2]*_[2]])}const AtomicSitesInfoBox=({structureInfo:n})=>{const[h,s]=reactExports.useState(!1);console.log("sI",n.aiidaAttributes);const _=n.aiidaAttributes.cell,M=n.aiidaAttributes.sites,$=M.map(Et=>[Et.kind_name,Et.position[0].toFixed(4),Et.position[1].toFixed(4),Et.position[2].toFixed(4)]),V=M.map(Et=>Et.position),oe=cartToFrac(V,_),Y=M.map((Et,ml)=>{const rl=oe[ml];return[Et.kind_name,rl[0].toFixed(4),rl[1].toFixed(4),rl[2].toFixed(4)]}),ie=["Kind label","x []","y []","z []"],zn=["Kind label","x","y","z"];return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"subsection-title flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{style:{flex:1},children:"Atomic positions"}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"40px",marginRight:"5px",alignItems:"stretch"}})]}),jsxRuntimeExports.jsx(MCTable,{headerRow:h?zn:ie,contents:h?Y:$,style:{maxHeight:"332px"}})]})},StructureSection=({params:n,loadedData:h})=>{let s=h.details,_=h.structureInfo;const M=h.metadata,$=n.method;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"section-heading",children:"Structural details"}),jsxRuntimeExports.jsx(Container,{fluid:!0,className:"section-container",children:jsxRuntimeExports.jsxs(Row,{children:[jsxRuntimeExports.jsxs(Col,{className:"flex-column",children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"10px"},children:[jsxRuntimeExports.jsx("div",{className:"subsection-title",children:"General"}),jsxRuntimeExports.jsx(MCInfoBox,{title:"General",children:jsxRuntimeExports.jsxs("ul",{className:"no-bullets",children:[jsxRuntimeExports.jsxs("li",{style:{marginTop:"-5px",marginBottom:"-4px"},children:["Download structure",jsxRuntimeExports.jsx(Au,{aiida_rest_url:AIIDA_API_URLS[n.method],uuid:s.general.structure_uuid})]}),jsxRuntimeExports.jsxs("li",{style:{marginBottom:"9px"},children:["Explore provenance"," ",jsxRuntimeExports.jsx(Ou,{explore_url:EXPLORE_URLS[n.method],uuid:s.general.structure_uuid})]}),jsxRuntimeExports.jsxs("li",{children:["Cell volume:"," ",format_aiida_prop(s.properties.cell_volume,M.info.properties.cell_volume,$,2)]})]})})]}),jsxRuntimeExports.jsx(CellInfoBox,{structureInfo:_,spacegroup_symbol:s.general.spacegroup_international})]}),jsxRuntimeExports.jsx(Col,{className:"flex-column",children:jsxRuntimeExports.jsx(AtomicSitesInfoBox,{structureInfo:_})})]})})]})};function ProvenanceSection(n){let h=n.loadedData.details;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"section-heading",children:"Provenance links"}),jsxRuntimeExports.jsx(Container,{fluid:!0,className:"section-container",children:jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsx("div",{className:"provenance-section",children:jsxRuntimeExports.jsxs("div",{className:"provenance-section-inner",children:[jsxRuntimeExports.jsx("div",{children:"Relevant nodes in the provenance browser:"}),jsxRuntimeExports.jsx("ul",{children:h.provenance_links.map(s=>jsxRuntimeExports.jsxs("li",{children:[s.label," ",jsxRuntimeExports.jsx(Ou,{explore_url:EXPLORE_URLS[n.params.method],uuid:s.uuid})]},s.uuid))})]})})})})]})}var plotlyBasic_min$1={exports:{}},plotlyBasic_min=plotlyBasic_min$1.exports,hasRequiredPlotlyBasic_min;function requirePlotlyBasic_min(){return hasRequiredPlotlyBasic_min||(hasRequiredPlotlyBasic_min=1,(function(n){(function(h,s){n.exports?n.exports=s():h.moduleName=s()})(typeof self<"u"?self:plotlyBasic_min,()=>{var h=(()=>{var s=(ot,Me)=>()=>(Me||ot((Me={exports:{}}).exports,Me),Me.exports),_=s(ot=>{ot.version="3.1.2"}),M=s((ot,Me)=>{(function(m,l,d){l[m]=l[m]||d(),typeof Me<"u"&&Me.exports&&(Me.exports=l[m])})("Promise",typeof window<"u"?window:ot,function(){var m,l,d,x=Object.prototype.toString,v=typeof setImmediate<"u"?function(H){return setImmediate(H)}:setTimeout;try{Object.defineProperty({},"x",{}),m=function(H,C,A,L){return Object.defineProperty(H,C,{value:A,writable:!0,configurable:L!==!1})}}catch{m=function(C,A,L){return C[A]=L,C}}d=(function(){var H,C,A;function L(j,Z){this.fn=j,this.self=Z,this.next=void 0}return{add:function(j,Z){A=new L(j,Z),C?C.next=A:H=A,C=A,A=void 0},drain:function(){var j=H;for(H=C=l=void 0;j;)j.fn.call(j.self),j=j.next}}})();function y(H,C){d.add(H,C),l||(l=v(d.drain))}function w(H){var C,A=typeof H;return H!=null&&(A=="object"||A=="function")&&(C=H.then),typeof C=="function"?C:!1}function S(){for(var H=0;H<this.chain.length;H++)c(this,this.state===1?this.chain[H].success:this.chain[H].failure,this.chain[H]);this.chain.length=0}function c(H,C,A){var L,j;try{C===!1?A.reject(H.msg):(C===!0?L=H.msg:L=C.call(void 0,H.msg),L===A.promise?A.reject(TypeError("Promise-chain cycle")):(j=w(L))?j.call(L,A.resolve,A.reject):A.resolve(L))}catch(Z){A.reject(Z)}}function F(H){var C,A=this;if(!A.triggered){A.triggered=!0,A.def&&(A=A.def);try{(C=w(H))?y(function(){var L=new B(A);try{C.call(H,function(){F.apply(L,arguments)},function(){b.apply(L,arguments)})}catch(j){b.call(L,j)}}):(A.msg=H,A.state=1,A.chain.length>0&&y(S,A))}catch(L){b.call(new B(A),L)}}}function b(H){var C=this;C.triggered||(C.triggered=!0,C.def&&(C=C.def),C.msg=H,C.state=2,C.chain.length>0&&y(S,C))}function R(H,C,A,L){for(var j=0;j<C.length;j++)(function(Z){H.resolve(C[Z]).then(function(nl){A(Z,nl)},L)})(j)}function B(H){this.def=H,this.triggered=!1}function O(H){this.promise=H,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function P(H){if(typeof H!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var C=new O(this);this.then=function(A,L){var j={success:typeof A=="function"?A:!0,failure:typeof L=="function"?L:!1};return j.promise=new this.constructor(function(Z,nl){if(typeof Z!="function"||typeof nl!="function")throw TypeError("Not a function");j.resolve=Z,j.reject=nl}),C.chain.push(j),C.state!==0&&y(S,C),j.promise},this.catch=function(A){return this.then(void 0,A)};try{H.call(void 0,function(A){F.call(C,A)},function(A){b.call(C,A)})}catch(A){b.call(C,A)}}var D=m({},"constructor",P,!1);return P.prototype=D,m(D,"__NPO__",0,!1),m(P,"resolve",function(H){var C=this;return H&&typeof H=="object"&&H.__NPO__===1?H:new C(function(A,L){if(typeof A!="function"||typeof L!="function")throw TypeError("Not a function");A(H)})}),m(P,"reject",function(H){return new this(function(C,A){if(typeof C!="function"||typeof A!="function")throw TypeError("Not a function");A(H)})}),m(P,"all",function(H){var C=this;return x.call(H)!="[object Array]"?C.reject(TypeError("Not an array")):H.length===0?C.resolve([]):new C(function(A,L){if(typeof A!="function"||typeof L!="function")throw TypeError("Not a function");var j=H.length,Z=Array(j),nl=0;R(C,H,function(Pe,se){Z[Pe]=se,++nl===j&&A(Z)},L)})}),m(P,"race",function(H){var C=this;return x.call(H)!="[object Array]"?C.reject(TypeError("Not an array")):new C(function(A,L){if(typeof A!="function"||typeof L!="function")throw TypeError("Not a function");R(C,H,function(j,Z){A(Z)},L)})}),P})}),$=s((ot,Me)=>{(function(){var m={version:"3.8.2"},l=[].slice,d=function(g){return l.call(g)},x=self.document;function v(g){return g&&(g.ownerDocument||g.document||g).documentElement}function y(g){return g&&(g.ownerDocument&&g.ownerDocument.defaultView||g.document&&g||g.defaultView)}if(x)try{d(x.documentElement.childNodes)[0].nodeType}catch{d=function(G){for(var J=G.length,tl=new Array(J);J--;)tl[J]=G[J];return tl}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch{var w=this.Element.prototype,S=w.setAttribute,c=w.setAttributeNS,F=this.CSSStyleDeclaration.prototype,b=F.setProperty;w.setAttribute=function(G,J){S.call(this,G,J+"")},w.setAttributeNS=function(G,J,tl){c.call(this,G,J,tl+"")},F.setProperty=function(G,J,tl){b.call(this,G,J+"",tl)}}m.ascending=R;function R(g,G){return g<G?-1:g>G?1:g>=G?0:NaN}m.descending=function(g,G){return G<g?-1:G>g?1:G>=g?0:NaN},m.min=function(g,G){var J=-1,tl=g.length,hl,xl;if(arguments.length===1){for(;++J<tl;)if((xl=g[J])!=null&&xl>=xl){hl=xl;break}for(;++J<tl;)(xl=g[J])!=null&&hl>xl&&(hl=xl)}else{for(;++J<tl;)if((xl=G.call(g,g[J],J))!=null&&xl>=xl){hl=xl;break}for(;++J<tl;)(xl=G.call(g,g[J],J))!=null&&hl>xl&&(hl=xl)}return hl},m.max=function(g,G){var J=-1,tl=g.length,hl,xl;if(arguments.length===1){for(;++J<tl;)if((xl=g[J])!=null&&xl>=xl){hl=xl;break}for(;++J<tl;)(xl=g[J])!=null&&xl>hl&&(hl=xl)}else{for(;++J<tl;)if((xl=G.call(g,g[J],J))!=null&&xl>=xl){hl=xl;break}for(;++J<tl;)(xl=G.call(g,g[J],J))!=null&&xl>hl&&(hl=xl)}return hl},m.extent=function(g,G){var J=-1,tl=g.length,hl,xl,Zl;if(arguments.length===1){for(;++J<tl;)if((xl=g[J])!=null&&xl>=xl){hl=Zl=xl;break}for(;++J<tl;)(xl=g[J])!=null&&(hl>xl&&(hl=xl),Zl<xl&&(Zl=xl))}else{for(;++J<tl;)if((xl=G.call(g,g[J],J))!=null&&xl>=xl){hl=Zl=xl;break}for(;++J<tl;)(xl=G.call(g,g[J],J))!=null&&(hl>xl&&(hl=xl),Zl<xl&&(Zl=xl))}return[hl,Zl]};function B(g){return g===null?NaN:+g}function O(g){return!isNaN(g)}m.sum=function(g,G){var J=0,tl=g.length,hl,xl=-1;if(arguments.length===1)for(;++xl<tl;)O(hl=+g[xl])&&(J+=hl);else for(;++xl<tl;)O(hl=+G.call(g,g[xl],xl))&&(J+=hl);return J},m.mean=function(g,G){var J=0,tl=g.length,hl,xl=-1,Zl=tl;if(arguments.length===1)for(;++xl<tl;)O(hl=B(g[xl]))?J+=hl:--Zl;else for(;++xl<tl;)O(hl=B(G.call(g,g[xl],xl)))?J+=hl:--Zl;if(Zl)return J/Zl},m.quantile=function(g,G){var J=(g.length-1)*G+1,tl=Math.floor(J),hl=+g[tl-1],xl=J-tl;return xl?hl+xl*(g[tl]-hl):hl},m.median=function(g,G){var J=[],tl=g.length,hl,xl=-1;if(arguments.length===1)for(;++xl<tl;)O(hl=B(g[xl]))&&J.push(hl);else for(;++xl<tl;)O(hl=B(G.call(g,g[xl],xl)))&&J.push(hl);if(J.length)return m.quantile(J.sort(R),.5)},m.variance=function(g,G){var J=g.length,tl=0,hl,xl,Zl=0,jl=-1,Du=0;if(arguments.length===1)for(;++jl<J;)O(hl=B(g[jl]))&&(xl=hl-tl,tl+=xl/++Du,Zl+=xl*(hl-tl));else for(;++jl<J;)O(hl=B(G.call(g,g[jl],jl)))&&(xl=hl-tl,tl+=xl/++Du,Zl+=xl*(hl-tl));if(Du>1)return Zl/(Du-1)},m.deviation=function(){var g=m.variance.apply(this,arguments);return g&&Math.sqrt(g)};function P(g){return{left:function(G,J,tl,hl){for(arguments.length<3&&(tl=0),arguments.length<4&&(hl=G.length);tl<hl;){var xl=tl+hl>>>1;g(G[xl],J)<0?tl=xl+1:hl=xl}return tl},right:function(G,J,tl,hl){for(arguments.length<3&&(tl=0),arguments.length<4&&(hl=G.length);tl<hl;){var xl=tl+hl>>>1;g(G[xl],J)>0?hl=xl:tl=xl+1}return tl}}}var D=P(R);m.bisectLeft=D.left,m.bisect=m.bisectRight=D.right,m.bisector=function(g){return P(g.length===1?function(G,J){return R(g(G),J)}:g)},m.shuffle=function(g,G,J){(tl=arguments.length)<3&&(J=g.length,tl<2&&(G=0));for(var tl=J-G,hl,xl;tl;)xl=Math.random()*tl--|0,hl=g[tl+G],g[tl+G]=g[xl+G],g[xl+G]=hl;return g},m.permute=function(g,G){for(var J=G.length,tl=new Array(J);J--;)tl[J]=g[G[J]];return tl},m.pairs=function(g){for(var G=0,J=g.length-1,tl,hl=g[0],xl=new Array(J<0?0:J);G<J;)xl[G]=[tl=hl,hl=g[++G]];return xl},m.transpose=function(g){if(!(xl=g.length))return[];for(var G=-1,J=m.min(g,H),tl=new Array(J);++G<J;)for(var hl=-1,xl,Zl=tl[G]=new Array(xl);++hl<xl;)Zl[hl]=g[hl][G];return tl};function H(g){return g.length}m.zip=function(){return m.transpose(arguments)},m.keys=function(g){var G=[];for(var J in g)G.push(J);return G},m.values=function(g){var G=[];for(var J in g)G.push(g[J]);return G},m.entries=function(g){var G=[];for(var J in g)G.push({key:J,value:g[J]});return G},m.merge=function(g){for(var G=g.length,J,tl=-1,hl=0,xl,Zl;++tl<G;)hl+=g[tl].length;for(xl=new Array(hl);--G>=0;)for(Zl=g[G],J=Zl.length;--J>=0;)xl[--hl]=Zl[J];return xl};var C=Math.abs;m.range=function(g,G,J){if(arguments.length<3&&(J=1,arguments.length<2&&(G=g,g=0)),(G-g)/J===1/0)throw new Error("infinite range");var tl=[],hl=A(C(J)),xl=-1,Zl;if(g*=hl,G*=hl,J*=hl,J<0)for(;(Zl=g+J*++xl)>G;)tl.push(Zl/hl);else for(;(Zl=g+J*++xl)<G;)tl.push(Zl/hl);return tl};function A(g){for(var G=1;g*G%1;)G*=10;return G}function L(g,G){for(var J in G)Object.defineProperty(g.prototype,J,{value:G[J],enumerable:!1})}m.map=function(g,G){var J=new j;if(g instanceof j)g.forEach(function(jl,Du){J.set(jl,Du)});else if(Array.isArray(g)){var tl=-1,hl=g.length,xl;if(arguments.length===1)for(;++tl<hl;)J.set(tl,g[tl]);else for(;++tl<hl;)J.set(G.call(g,xl=g[tl],tl),xl)}else for(var Zl in g)J.set(Zl,g[Zl]);return J};function j(){this._=Object.create(null)}var Z="__proto__",nl="\0";L(j,{has:q,get:function(g){return this._[Pe(g)]},set:function(g,G){return this._[Pe(g)]=G},remove:ol,keys:nt,values:function(){var g=[];for(var G in this._)g.push(this._[G]);return g},entries:function(){var g=[];for(var G in this._)g.push({key:se(G),value:this._[G]});return g},size:In,empty:_t,forEach:function(g){for(var G in this._)g.call(this,se(G),this._[G])}});function Pe(g){return(g+="")===Z||g[0]===nl?nl+g:g}function se(g){return(g+="")[0]===nl?g.slice(1):g}function q(g){return Pe(g)in this._}function ol(g){return(g=Pe(g))in this._&&delete this._[g]}function nt(){var g=[];for(var G in this._)g.push(se(G));return g}function In(){var g=0;for(var G in this._)++g;return g}function _t(){for(var g in this._)return!1;return!0}m.nest=function(){var g={},G=[],J=[],tl,hl;function xl(jl,Du,Qu){if(Qu>=G.length)return hl?hl.call(g,Du):tl?Du.sort(tl):Du;for(var td=-1,kd=Du.length,Id=G[Qu++],fh,Ph,Nd,ah=new j,uh;++td<kd;)(uh=ah.get(fh=Id(Ph=Du[td])))?uh.push(Ph):ah.set(fh,[Ph]);return jl?(Ph=jl(),Nd=function(kh,Fh){Ph.set(kh,xl(jl,Fh,Qu))}):(Ph={},Nd=function(kh,Fh){Ph[kh]=xl(jl,Fh,Qu)}),ah.forEach(Nd),Ph}function Zl(jl,Du){if(Du>=G.length)return jl;var Qu=[],td=J[Du++];return jl.forEach(function(kd,Id){Qu.push({key:kd,values:Zl(Id,Du)})}),td?Qu.sort(function(kd,Id){return td(kd.key,Id.key)}):Qu}return g.map=function(jl,Du){return xl(Du,jl,0)},g.entries=function(jl){return Zl(xl(m.map,jl,0),0)},g.key=function(jl){return G.push(jl),g},g.sortKeys=function(jl){return J[G.length-1]=jl,g},g.sortValues=function(jl){return tl=jl,g},g.rollup=function(jl){return hl=jl,g},g},m.set=function(g){var G=new Fn;if(g)for(var J=0,tl=g.length;J<tl;++J)G.add(g[J]);return G};function Fn(){this._=Object.create(null)}L(Fn,{has:q,add:function(g){return this._[Pe(g+="")]=!0,g},remove:ol,values:nt,size:In,empty:_t,forEach:function(g){for(var G in this._)g.call(this,se(G))}}),m.behavior={};function al(g){return g}m.rebind=function(g,G){for(var J=1,tl=arguments.length,hl;++J<tl;)g[hl=arguments[J]]=sl(g,G,G[hl]);return g};function sl(g,G,J){return function(){var tl=J.apply(G,arguments);return tl===G?g:tl}}function ce(g,G){if(G in g)return G;G=G.charAt(0).toUpperCase()+G.slice(1);for(var J=0,tl=ll.length;J<tl;++J){var hl=ll[J]+G;if(hl in g)return hl}}var ll=["webkit","ms","moz","Moz","o","O"];function ul(){}m.dispatch=function(){for(var g=new fl,G=-1,J=arguments.length;++G<J;)g[arguments[G]]=bl(g);return g};function fl(){}fl.prototype.on=function(g,G){var J=g.indexOf("."),tl="";if(J>=0&&(tl=g.slice(J+1),g=g.slice(0,J)),g)return arguments.length<2?this[g].on(tl):this[g].on(tl,G);if(arguments.length===2){if(G==null)for(g in this)this.hasOwnProperty(g)&&this[g].on(tl,null);return this}};function bl(g){var G=[],J=new j;function tl(){for(var hl=G,xl=-1,Zl=hl.length,jl;++xl<Zl;)(jl=hl[xl].on)&&jl.apply(this,arguments);return g}return tl.on=function(hl,xl){var Zl=J.get(hl),jl;return arguments.length<2?Zl&&Zl.on:(Zl&&(Zl.on=null,G=G.slice(0,jl=G.indexOf(Zl)).concat(G.slice(jl+1)),J.remove(hl)),xl&&G.push(J.set(hl,{on:xl})),g)},tl}m.event=null;function El(){m.event.preventDefault()}function Ul(){for(var g=m.event,G;G=g.sourceEvent;)g=G;return g}function ql(g){for(var G=new fl,J=0,tl=arguments.length;++J<tl;)G[arguments[J]]=bl(G);return G.of=function(hl,xl){return function(Zl){try{var jl=Zl.sourceEvent=m.event;Zl.target=g,m.event=Zl,G[Zl.type].apply(hl,xl)}finally{m.event=jl}}},G}m.requote=function(g){return g.replace(gu,"\\$&")};var gu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Bn={}.__proto__?function(g,G){g.__proto__=G}:function(g,G){for(var J in G)g[J]=G[J]};function il(g){return Bn(g,st),g}var X=function(g,G){return G.querySelector(g)},cl=function(g,G){return G.querySelectorAll(g)},Sl=function(g,G){var J=g.matches||g[ce(g,"matchesSelector")];return Sl=function(tl,hl){return J.call(tl,hl)},Sl(g,G)};typeof Sizzle=="function"&&(X=function(g,G){return Sizzle(g,G)[0]||null},cl=Sizzle,Sl=Sizzle.matchesSelector),m.selection=function(){return m.select(x.documentElement)};var st=m.selection.prototype=[];st.select=function(g){var G=[],J,tl,hl,xl;g=U(g);for(var Zl=-1,jl=this.length;++Zl<jl;){G.push(J=[]),J.parentNode=(hl=this[Zl]).parentNode;for(var Du=-1,Qu=hl.length;++Du<Qu;)(xl=hl[Du])?(J.push(tl=g.call(xl,xl.__data__,Du,Zl)),tl&&"__data__"in xl&&(tl.__data__=xl.__data__)):J.push(null)}return il(G)};function U(g){return typeof g=="function"?g:function(){return X(g,this)}}st.selectAll=function(g){var G=[],J,tl;g=re(g);for(var hl=-1,xl=this.length;++hl<xl;)for(var Zl=this[hl],jl=-1,Du=Zl.length;++jl<Du;)(tl=Zl[jl])&&(G.push(J=d(g.call(tl,tl.__data__,jl,hl))),J.parentNode=tl);return il(G)};function re(g){return typeof g=="function"?g:function(){return cl(g,this)}}var Ft="http://www.w3.org/1999/xhtml",ls={svg:"http://www.w3.org/2000/svg",xhtml:Ft,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};m.ns={prefix:ls,qualify:function(g){var G=g.indexOf(":"),J=g;return G>=0&&(J=g.slice(0,G))!=="xmlns"&&(g=g.slice(G+1)),ls.hasOwnProperty(J)?{space:ls[J],local:g}:g}},st.attr=function(g,G){if(arguments.length<2){if(typeof g=="string"){var J=this.node();return g=m.ns.qualify(g),g.local?J.getAttributeNS(g.space,g.local):J.getAttribute(g)}for(G in g)this.each(_l(G,g[G]));return this}return this.each(_l(g,G))};function _l(g,G){g=m.ns.qualify(g);function J(){this.removeAttribute(g)}function tl(){this.removeAttributeNS(g.space,g.local)}function hl(){this.setAttribute(g,G)}function xl(){this.setAttributeNS(g.space,g.local,G)}function Zl(){var Du=G.apply(this,arguments);Du==null?this.removeAttribute(g):this.setAttribute(g,Du)}function jl(){var Du=G.apply(this,arguments);Du==null?this.removeAttributeNS(g.space,g.local):this.setAttributeNS(g.space,g.local,Du)}return G==null?g.local?tl:J:typeof G=="function"?g.local?jl:Zl:g.local?xl:hl}function Ll(g){return g.trim().replace(/\s+/g," ")}st.classed=function(g,G){if(arguments.length<2){if(typeof g=="string"){var J=this.node(),tl=(g=yu(g)).length,hl=-1;if(G=J.classList){for(;++hl<tl;)if(!G.contains(g[hl]))return!1}else for(G=J.getAttribute("class");++hl<tl;)if(!zl(g[hl]).test(G))return!1;return!0}for(G in g)this.each(Vu(G,g[G]));return this}return this.each(Vu(g,G))};function zl(g){return new RegExp("(?:^|\\s+)"+m.requote(g)+"(?:\\s+|$)","g")}function yu(g){return(g+"").trim().split(/^|\s+/)}function Vu(g,G){g=yu(g).map(od);var J=g.length;function tl(){for(var xl=-1;++xl<J;)g[xl](this,G)}function hl(){for(var xl=-1,Zl=G.apply(this,arguments);++xl<J;)g[xl](this,Zl)}return typeof G=="function"?hl:tl}function od(g){var G=zl(g);return function(J,tl){if(hl=J.classList)return tl?hl.add(g):hl.remove(g);var hl=J.getAttribute("class")||"";tl?(G.lastIndex=0,G.test(hl)||J.setAttribute("class",Ll(hl+" "+g))):J.setAttribute("class",Ll(hl.replace(G," ")))}}st.style=function(g,G,J){var tl=arguments.length;if(tl<3){if(typeof g!="string"){tl<2&&(G="");for(J in g)this.each(Ad(J,g[J],G));return this}if(tl<2){var hl=this.node();return y(hl).getComputedStyle(hl,null).getPropertyValue(g)}J=""}return this.each(Ad(g,G,J))};function Ad(g,G,J){function tl(){this.style.removeProperty(g)}function hl(){this.style.setProperty(g,G,J)}function xl(){var Zl=G.apply(this,arguments);Zl==null?this.style.removeProperty(g):this.style.setProperty(g,Zl,J)}return G==null?tl:typeof G=="function"?xl:hl}st.property=function(g,G){if(arguments.length<2){if(typeof g=="string")return this.node()[g];for(G in g)this.each(vd(G,g[G]));return this}return this.each(vd(g,G))};function vd(g,G){function J(){delete this[g]}function tl(){this[g]=G}function hl(){var xl=G.apply(this,arguments);xl==null?delete this[g]:this[g]=xl}return G==null?J:typeof G=="function"?hl:tl}st.text=function(g){return arguments.length?this.each(typeof g=="function"?function(){var G=g.apply(this,arguments);this.textContent=G??""}:g==null?function(){this.textContent=""}:function(){this.textContent=g}):this.node().textContent},st.html=function(g){return arguments.length?this.each(typeof g=="function"?function(){var G=g.apply(this,arguments);this.innerHTML=G??""}:g==null?function(){this.innerHTML=""}:function(){this.innerHTML=g}):this.node().innerHTML},st.append=function(g){return g=fd(g),this.select(function(){return this.appendChild(g.apply(this,arguments))})};function fd(g){function G(){var tl=this.ownerDocument,hl=this.namespaceURI;return hl===Ft&&tl.documentElement.namespaceURI===Ft?tl.createElement(g):tl.createElementNS(hl,g)}function J(){return this.ownerDocument.createElementNS(g.space,g.local)}return typeof g=="function"?g:(g=m.ns.qualify(g)).local?J:G}st.insert=function(g,G){return g=fd(g),G=U(G),this.select(function(){return this.insertBefore(g.apply(this,arguments),G.apply(this,arguments)||null)})},st.remove=function(){return this.each(Kl)};function Kl(){var g=this.parentNode;g&&g.removeChild(this)}st.data=function(g,G){var J=-1,tl=this.length,hl,xl;if(!arguments.length){for(g=new Array(tl=(hl=this[0]).length);++J<tl;)(xl=hl[J])&&(g[J]=xl.__data__);return g}function Zl(td,kd){var Id,fh=td.length,Ph=kd.length,Nd=Math.min(fh,Ph),ah=new Array(Ph),uh=new Array(Ph),kh=new Array(fh),Fh,hh;if(G){var Ap=new j,nf=new Array(fh),hf;for(Id=-1;++Id<fh;)(Fh=td[Id])&&(Ap.has(hf=G.call(Fh,Fh.__data__,Id))?kh[Id]=Fh:Ap.set(hf,Fh),nf[Id]=hf);for(Id=-1;++Id<Ph;)(Fh=Ap.get(hf=G.call(kd,hh=kd[Id],Id)))?Fh!==!0&&(ah[Id]=Fh,Fh.__data__=hh):uh[Id]=vu(hh),Ap.set(hf,!0);for(Id=-1;++Id<fh;)Id in nf&&Ap.get(nf[Id])!==!0&&(kh[Id]=td[Id])}else{for(Id=-1;++Id<Nd;)Fh=td[Id],hh=kd[Id],Fh?(Fh.__data__=hh,ah[Id]=Fh):uh[Id]=vu(hh);for(;Id<Ph;++Id)uh[Id]=vu(kd[Id]);for(;Id<fh;++Id)kh[Id]=td[Id]}uh.update=ah,uh.parentNode=ah.parentNode=kh.parentNode=td.parentNode,jl.push(uh),Du.push(ah),Qu.push(kh)}var jl=xd([]),Du=il([]),Qu=il([]);if(typeof g=="function")for(;++J<tl;)Zl(hl=this[J],g.call(hl,hl.parentNode.__data__,J));else for(;++J<tl;)Zl(hl=this[J],g);return Du.enter=function(){return jl},Du.exit=function(){return Qu},Du};function vu(g){return{__data__:g}}st.datum=function(g){return arguments.length?this.property("__data__",g):this.property("__data__")},st.filter=function(g){var G=[],J,tl,hl;typeof g!="function"&&(g=Rl(g));for(var xl=0,Zl=this.length;xl<Zl;xl++){G.push(J=[]),J.parentNode=(tl=this[xl]).parentNode;for(var jl=0,Du=tl.length;jl<Du;jl++)(hl=tl[jl])&&g.call(hl,hl.__data__,jl,xl)&&J.push(hl)}return il(G)};function Rl(g){return function(){return Sl(this,g)}}st.order=function(){for(var g=-1,G=this.length;++g<G;)for(var J=this[g],tl=J.length-1,hl=J[tl],xl;--tl>=0;)(xl=J[tl])&&(hl&&hl!==xl.nextSibling&&hl.parentNode.insertBefore(xl,hl),hl=xl);return this},st.sort=function(g){g=Wu.apply(this,arguments);for(var G=-1,J=this.length;++G<J;)this[G].sort(g);return this.order()};function Wu(g){return arguments.length||(g=R),function(G,J){return G&&J?g(G.__data__,J.__data__):!G-!J}}st.each=function(g){return cd(this,function(G,J,tl){g.call(G,G.__data__,J,tl)})};function cd(g,G){for(var J=0,tl=g.length;J<tl;J++)for(var hl=g[J],xl=0,Zl=hl.length,jl;xl<Zl;xl++)(jl=hl[xl])&&G(jl,xl,J);return g}st.call=function(g){var G=d(arguments);return g.apply(G[0]=this,G),this},st.empty=function(){return!this.node()},st.node=function(){for(var g=0,G=this.length;g<G;g++)for(var J=this[g],tl=0,hl=J.length;tl<hl;tl++){var xl=J[tl];if(xl)return xl}return null},st.size=function(){var g=0;return cd(this,function(){++g}),g};function xd(g){return Bn(g,Td),g}var Td=[];m.selection.enter=xd,m.selection.enter.prototype=Td,Td.append=st.append,Td.empty=st.empty,Td.node=st.node,Td.call=st.call,Td.size=st.size,Td.select=function(g){for(var G=[],J,tl,hl,xl,Zl,jl=-1,Du=this.length;++jl<Du;){hl=(xl=this[jl]).update,G.push(J=[]),J.parentNode=xl.parentNode;for(var Qu=-1,td=xl.length;++Qu<td;)(Zl=xl[Qu])?(J.push(hl[Qu]=tl=g.call(xl.parentNode,Zl.__data__,Qu,jl)),tl.__data__=Zl.__data__):J.push(null)}return il(G)},Td.insert=function(g,G){return arguments.length<2&&(G=Pd(this)),st.insert.call(this,g,G)};function Pd(g){var G,J;return function(tl,hl,xl){var Zl=g[xl].update,jl=Zl.length,Du;for(xl!=J&&(J=xl,G=0),hl>=G&&(G=hl+1);!(Du=Zl[G])&&++G<jl;);return Du}}m.select=function(g){var G;return typeof g=="string"?(G=[X(g,x)],G.parentNode=x.documentElement):(G=[g],G.parentNode=v(g)),il([G])},m.selectAll=function(g){var G;return typeof g=="string"?(G=d(cl(g,x)),G.parentNode=x.documentElement):(G=d(g),G.parentNode=null),il([G])},st.on=function(g,G,J){var tl=arguments.length;if(tl<3){if(typeof g!="string"){tl<2&&(G=!1);for(J in g)this.each(Hd(J,g[J],G));return this}if(tl<2)return(tl=this.node()["__on"+g])&&tl._;J=!1}return this.each(Hd(g,G,J))};function Hd(g,G,J){var tl="__on"+g,hl=g.indexOf("."),xl=Wd;hl>0&&(g=g.slice(0,hl));var Zl=$d.get(g);Zl&&(g=Zl,xl=mh);function jl(){var td=this[tl];td&&(this.removeEventListener(g,td,td.$),delete this[tl])}function Du(){var td=xl(G,d(arguments));jl.call(this),this.addEventListener(g,this[tl]=td,td.$=J),td._=G}function Qu(){var td=new RegExp("^__on([^.]+)"+m.requote(g)+"$"),kd;for(var Id in this)if(kd=Id.match(td)){var fh=this[Id];this.removeEventListener(kd[1],fh,fh.$),delete this[Id]}}return hl?G?Du:jl:G?ul:Qu}var $d=m.map({mouseenter:"mouseover",mouseleave:"mouseout"});x&&$d.forEach(function(g){"on"+g in x&&$d.remove(g)});function Wd(g,G){return function(J){var tl=m.event;m.event=J,G[0]=this.__data__;try{g.apply(this,G)}finally{m.event=tl}}}function mh(g,G){var J=Wd(g,G);return function(tl){var hl=this,xl=tl.relatedTarget;(!xl||xl!==hl&&!(xl.compareDocumentPosition(hl)&8))&&J.call(hl,tl)}}var Dd,bh=0;function Dh(g){var G=".dragsuppress-"+ ++bh,J="click"+G,tl=m.select(y(g)).on("touchmove"+G,El).on("dragstart"+G,El).on("selectstart"+G,El);if(Dd==null&&(Dd="onselectstart"in g?!1:ce(g.style,"userSelect")),Dd){var hl=v(g).style,xl=hl[Dd];hl[Dd]="none"}return function(Zl){if(tl.on(G,null),Dd&&(hl[Dd]=xl),Zl){var jl=function(){tl.on(J,null)};tl.on(J,function(){El(),jl()},!0),setTimeout(jl,0)}}}m.mouse=function(g){return Gh(g,Ul())};var vh=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Gh(g,G){G.changedTouches&&(G=G.changedTouches[0]);var J=g.ownerSVGElement||g;if(J.createSVGPoint){var tl=J.createSVGPoint();if(vh<0){var hl=y(g);if(hl.scrollX||hl.scrollY){J=m.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var xl=J[0][0].getScreenCTM();vh=!(xl.f||xl.e),J.remove()}}return vh?(tl.x=G.pageX,tl.y=G.pageY):(tl.x=G.clientX,tl.y=G.clientY),tl=tl.matrixTransform(g.getScreenCTM().inverse()),[tl.x,tl.y]}var Zl=g.getBoundingClientRect();return[G.clientX-Zl.left-g.clientLeft,G.clientY-Zl.top-g.clientTop]}m.touch=function(g,G,J){if(arguments.length<3&&(J=G,G=Ul().changedTouches),G){for(var tl=0,hl=G.length,xl;tl<hl;++tl)if((xl=G[tl]).identifier===J)return Gh(g,xl)}},m.behavior.drag=function(){var g=ql(hl,"drag","dragstart","dragend"),G=null,J=xl(ul,m.mouse,y,"mousemove","mouseup"),tl=xl(Ql,m.touch,al,"touchmove","touchend");function hl(){this.on("mousedown.drag",J).on("touchstart.drag",tl)}function xl(Zl,jl,Du,Qu,td){return function(){var kd=this,Id=m.event.target.correspondingElement||m.event.target,fh=kd.parentNode,Ph=g.of(kd,arguments),Nd=0,ah=Zl(),uh=".drag"+(ah==null?"":"-"+ah),kh,Fh=m.select(Du(Id)).on(Qu+uh,nf).on(td+uh,hf),hh=Dh(Id),Ap=jl(fh,ah);G?(kh=G.apply(kd,arguments),kh=[kh.x-Ap[0],kh.y-Ap[1]]):kh=[0,0],Ph({type:"dragstart"});function nf(){var sf=jl(fh,ah),Af,Mf;sf&&(Af=sf[0]-Ap[0],Mf=sf[1]-Ap[1],Nd|=Af|Mf,Ap=sf,Ph({type:"drag",x:sf[0]+kh[0],y:sf[1]+kh[1],dx:Af,dy:Mf}))}function hf(){jl(fh,ah)&&(Fh.on(Qu+uh,null).on(td+uh,null),hh(Nd),Ph({type:"dragend"}))}}}return hl.origin=function(Zl){return arguments.length?(G=Zl,hl):G},m.rebind(hl,g,"on")};function Ql(){return m.event.changedTouches[0].identifier}m.touches=function(g,G){return arguments.length<2&&(G=Ul().touches),G?d(G).map(function(J){var tl=Gh(g,J);return tl.identifier=J.identifier,tl}):[]};var Ku=1e-6,gl=Ku*Ku,Dl=Math.PI,Vl=2*Dl,Mu=Vl-Ku,Nu=Dl/2,ed=Dl/180,sd=180/Dl;function Sd(g,G,J){return(G[0]-g[0])*(J[1]-g[1])-(G[1]-g[1])*(J[0]-g[0])}function yd(g){return g>1?Nu:g<-1?-Nu:Math.asin(g)}function bd(g){return((g=Math.exp(g))-1/g)/2}function Kd(g){return((g=Math.exp(g))+1/g)/2}function Jd(g){return((g=Math.exp(2*g))-1)/(g+1)}var th=Math.SQRT2,Hh=2,sp=4;m.interpolateZoom=function(g,G){var J=g[0],tl=g[1],hl=g[2],xl=G[0],Zl=G[1],jl=G[2],Du=xl-J,Qu=Zl-tl,td=Du*Du+Qu*Qu,kd,Id;if(td<gl)Id=Math.log(jl/hl)/th,kd=function(kh){return[J+kh*Du,tl+kh*Qu,hl*Math.exp(th*kh*Id)]};else{var fh=Math.sqrt(td),Ph=(jl*jl-hl*hl+sp*td)/(2*hl*Hh*fh),Nd=(jl*jl-hl*hl-sp*td)/(2*jl*Hh*fh),ah=Math.log(Math.sqrt(Ph*Ph+1)-Ph),uh=Math.log(Math.sqrt(Nd*Nd+1)-Nd);Id=(uh-ah)/th,kd=function(kh){var Fh=kh*Id,hh=Kd(ah),Ap=hl/(Hh*fh)*(hh*Jd(th*Fh+ah)-bd(ah));return[J+Ap*Du,tl+Ap*Qu,hl*hh/Kd(th*Fh+ah)]}}return kd.duration=Id*1e3,kd},m.behavior.zoom=function(){var g={x:0,y:0,k:1},G,J,tl,hl=[960,500],xl=xp,Zl=250,jl=0,Du="mousedown.zoom",Qu="mousemove.zoom",td="mouseup.zoom",kd,Id="touchstart.zoom",fh,Ph=ql(Fh,"zoomstart","zoom","zoomend"),Nd,ah,uh,kh;Up||(Up="onwheel"in x?(Pp=function(){return-m.event.deltaY*(m.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(Pp=function(){return m.event.wheelDelta},"mousewheel"):(Pp=function(){return-m.event.detail},"MozMousePixelScroll"));function Fh(tf){tf.on(Du,hg).on(Up+".zoom",d0).on("dblclick.zoom",Dm).on(Id,_m)}Fh.event=function(tf){tf.each(function(){var wg=Ph.of(this,arguments),Fg=g;Ty?m.select(this).transition().each("start.zoom",function(){g=this.__chart__||{x:0,y:0,k:1},Mf(wg)}).tween("zoom:zoom",function(){var Em=hl[0],s0=hl[1],b0=J?J[0]:Em/2,z0=J?J[1]:s0/2,X0=m.interpolateZoom([(b0-g.x)/g.k,(z0-g.y)/g.k,Em/g.k],[(b0-Fg.x)/Fg.k,(z0-Fg.y)/Fg.k,Em/Fg.k]);return function(iv){var V0=X0(iv),hv=Em/V0[2];this.__chart__=g={x:b0-V0[0]*hv,y:z0-V0[1]*hv,k:hv},xg(wg)}}).each("interrupt.zoom",function(){Pf(wg)}).each("end.zoom",function(){Pf(wg)}):(this.__chart__=g,Mf(wg),xg(wg),Pf(wg))})},Fh.translate=function(tf){return arguments.length?(g={x:+tf[0],y:+tf[1],k:g.k},Af(),Fh):[g.x,g.y]},Fh.scale=function(tf){return arguments.length?(g={x:g.x,y:g.y,k:null},nf(+tf),Af(),Fh):g.k},Fh.scaleExtent=function(tf){return arguments.length?(xl=tf==null?xp:[+tf[0],+tf[1]],Fh):xl},Fh.center=function(tf){return arguments.length?(tl=tf&&[+tf[0],+tf[1]],Fh):tl},Fh.size=function(tf){return arguments.length?(hl=tf&&[+tf[0],+tf[1]],Fh):hl},Fh.duration=function(tf){return arguments.length?(Zl=+tf,Fh):Zl},Fh.x=function(tf){return arguments.length?(ah=tf,Nd=tf.copy(),g={x:0,y:0,k:1},Fh):ah},Fh.y=function(tf){return arguments.length?(kh=tf,uh=tf.copy(),g={x:0,y:0,k:1},Fh):kh};function hh(tf){return[(tf[0]-g.x)/g.k,(tf[1]-g.y)/g.k]}function Ap(tf){return[tf[0]*g.k+g.x,tf[1]*g.k+g.y]}function nf(tf){g.k=Math.max(xl[0],Math.min(xl[1],tf))}function hf(tf,wg){wg=Ap(wg),g.x+=tf[0]-wg[0],g.y+=tf[1]-wg[1]}function sf(tf,wg,Fg,Em){tf.__chart__={x:g.x,y:g.y,k:g.k},nf(Math.pow(2,Em)),hf(J=wg,Fg),tf=m.select(tf),Zl>0&&(tf=tf.transition().duration(Zl)),tf.call(Fh.event)}function Af(){ah&&ah.domain(Nd.range().map(function(tf){return(tf-g.x)/g.k}).map(Nd.invert)),kh&&kh.domain(uh.range().map(function(tf){return(tf-g.y)/g.k}).map(uh.invert))}function Mf(tf){jl++||tf({type:"zoomstart"})}function xg(tf){Af(),tf({type:"zoom",scale:g.k,translate:[g.x,g.y]})}function Pf(tf){--jl||(tf({type:"zoomend"}),J=null)}function hg(){var tf=this,wg=Ph.of(tf,arguments),Fg=0,Em=m.select(y(tf)).on(Qu,z0).on(td,X0),s0=hh(m.mouse(tf)),b0=Dh(tf);m3.call(tf),Mf(wg);function z0(){Fg=1,hf(m.mouse(tf),s0),xg(wg)}function X0(){Em.on(Qu,null).on(td,null),b0(Fg),Pf(wg)}}function _m(){var tf=this,wg=Ph.of(tf,arguments),Fg={},Em=0,s0,b0=".zoom-"+m.event.changedTouches[0].identifier,z0="touchmove"+b0,X0="touchend"+b0,iv=[],V0=m.select(tf),hv=Dh(tf);pv(),Mf(wg),V0.on(Du,null).on(Id,pv);function N0(){var Jv=m.touches(tf);return s0=g.k,Jv.forEach(function(B0){B0.identifier in Fg&&(Fg[B0.identifier]=hh(B0))}),Jv}function pv(){var Jv=m.event.target;m.select(Jv).on(z0,Fy).on(X0,Iw),iv.push(Jv);for(var B0=m.event.changedTouches,Lv=0,u1=B0.length;Lv<u1;++Lv)Fg[B0[Lv].identifier]=null;var Iv=N0(),d2=Date.now();if(Iv.length===1){if(d2-fh<500){var Py=Iv[0];sf(tf,Py,Fg[Py.identifier],Math.floor(Math.log(g.k)/Math.LN2)+1),El()}fh=d2}else if(Iv.length>1){var Py=Iv[0],U1=Iv[1],y3=Py[0]-U1[0],jx=Py[1]-U1[1];Em=y3*y3+jx*jx}}function Fy(){var Jv=m.touches(tf),B0,Lv,u1,Iv;m3.call(tf);for(var d2=0,Py=Jv.length;d2<Py;++d2,Iv=null)if(u1=Jv[d2],Iv=Fg[u1.identifier]){if(Lv)break;B0=u1,Lv=Iv}if(Iv){var U1=(U1=u1[0]-B0[0])*U1+(U1=u1[1]-B0[1])*U1,y3=Em&&Math.sqrt(U1/Em);B0=[(B0[0]+u1[0])/2,(B0[1]+u1[1])/2],Lv=[(Lv[0]+Iv[0])/2,(Lv[1]+Iv[1])/2],nf(y3*s0)}fh=null,hf(B0,Lv),xg(wg)}function Iw(){if(m.event.touches.length){for(var Jv=m.event.changedTouches,B0=0,Lv=Jv.length;B0<Lv;++B0)delete Fg[Jv[B0].identifier];for(var u1 in Fg)return void N0()}m.selectAll(iv).on(b0,null),V0.on(Du,hg).on(Id,_m),hv(),Pf(wg)}}function d0(){var tf=Ph.of(this,arguments);kd?clearTimeout(kd):(m3.call(this),G=hh(J=tl||m.mouse(this)),Mf(tf)),kd=setTimeout(function(){kd=null,Pf(tf)},50),El(),nf(Math.pow(2,Pp()*.002)*g.k),hf(J,G),xg(tf)}function Dm(){var tf=m.mouse(this),wg=Math.log(g.k)/Math.LN2;sf(this,tf,hh(tf),m.event.shiftKey?Math.ceil(wg)-1:Math.floor(wg)+1)}return m.rebind(Fh,Ph,"on")};var xp=[0,1/0],Pp,Up;m.color=fp;function fp(){}fp.prototype.toString=function(){return this.rgb()+""},m.hsl=zh;function zh(g,G,J){return this instanceof zh?(this.h=+g,this.s=+G,void(this.l=+J)):arguments.length<2?g instanceof zh?new zh(g.h,g.s,g.l):Ju(""+g,hd,zh):new zh(g,G,J)}var kp=zh.prototype=new fp;kp.brighter=function(g){return g=Math.pow(.7,arguments.length?g:1),new zh(this.h,this.s,this.l/g)},kp.darker=function(g){return g=Math.pow(.7,arguments.length?g:1),new zh(this.h,this.s,g*this.l)},kp.rgb=function(){return qh(this.h,this.s,this.l)};function qh(g,G,J){var tl,hl;g=isNaN(g)?0:(g%=360)<0?g+360:g,G=isNaN(G)||G<0?0:G>1?1:G,J=J<0?0:J>1?1:J,hl=J<=.5?J*(1+G):J+G-J*G,tl=2*J-hl;function xl(jl){return jl>360?jl-=360:jl<0&&(jl+=360),jl<60?tl+(hl-tl)*jl/60:jl<180?hl:jl<240?tl+(hl-tl)*(240-jl)/60:tl}function Zl(jl){return Math.round(xl(jl)*255)}return new cp(Zl(g+120),Zl(g),Zl(g-120))}m.hcl=bp;function bp(g,G,J){return this instanceof bp?(this.h=+g,this.c=+G,void(this.l=+J)):arguments.length<2?g instanceof bp?new bp(g.h,g.c,g.l):g instanceof mp?ng(g.l,g.a,g.b):ng((g=$u((g=m.rgb(g)).r,g.g,g.b)).l,g.a,g.b):new bp(g,G,J)}var wp=bp.prototype=new fp;wp.brighter=function(g){return new bp(this.h,this.c,Math.min(100,this.l+af*(arguments.length?g:1)))},wp.darker=function(g){return new bp(this.h,this.c,Math.max(0,this.l-af*(arguments.length?g:1)))},wp.rgb=function(){return Sp(this.h,this.c,this.l).rgb()};function Sp(g,G,J){return isNaN(g)&&(g=0),isNaN(G)&&(G=0),new mp(J,Math.cos(g*=ed)*G,Math.sin(g)*G)}m.lab=mp;function mp(g,G,J){return this instanceof mp?(this.l=+g,this.a=+G,void(this.b=+J)):arguments.length<2?g instanceof mp?new mp(g.l,g.a,g.b):g instanceof bp?Sp(g.h,g.c,g.l):$u((g=cp(g)).r,g.g,g.b):new mp(g,G,J)}var af=18,_f=.95047,Lp=1,Ef=1.08883,Lf=mp.prototype=new fp;Lf.brighter=function(g){return new mp(Math.min(100,this.l+af*(arguments.length?g:1)),this.a,this.b)},Lf.darker=function(g){return new mp(Math.max(0,this.l-af*(arguments.length?g:1)),this.a,this.b)},Lf.rgb=function(){return rg(this.l,this.a,this.b)};function rg(g,G,J){var tl=(g+16)/116,hl=tl+G/500,xl=tl-J/200;return hl=gf(hl)*_f,tl=gf(tl)*Lp,xl=gf(xl)*Ef,new cp(yf(3.2404542*hl-1.5371385*tl-.4985314*xl),yf(-.969266*hl+1.8760108*tl+.041556*xl),yf(.0556434*hl-.2040259*tl+1.0572252*xl))}function ng(g,G,J){return g>0?new bp(Math.atan2(J,G)*sd,Math.sqrt(G*G+J*J),g):new bp(NaN,NaN,g)}function gf(g){return g>.206893034?g*g*g:(g-4/29)/7.787037}function Rf(g){return g>.008856?Math.pow(g,1/3):7.787037*g+4/29}function yf(g){return Math.round(255*(g<=.00304?12.92*g:1.055*Math.pow(g,1/2.4)-.055))}m.rgb=cp;function cp(g,G,J){return this instanceof cp?(this.r=~~g,this.g=~~G,void(this.b=~~J)):arguments.length<2?g instanceof cp?new cp(g.r,g.g,g.b):Ju(""+g,cp,qh):new cp(g,G,J)}function _g(g){return new cp(g>>16,g>>8&255,g&255)}function wl(g){return _g(g)+""}var pl=cp.prototype=new fp;pl.brighter=function(g){g=Math.pow(.7,arguments.length?g:1);var G=this.r,J=this.g,tl=this.b,hl=30;return!G&&!J&&!tl?new cp(hl,hl,hl):(G&&G<hl&&(G=hl),J&&J<hl&&(J=hl),tl&&tl<hl&&(tl=hl),new cp(Math.min(255,G/g),Math.min(255,J/g),Math.min(255,tl/g)))},pl.darker=function(g){return g=Math.pow(.7,arguments.length?g:1),new cp(g*this.r,g*this.g,g*this.b)},pl.hsl=function(){return hd(this.r,this.g,this.b)},pl.toString=function(){return"#"+Yu(this.r)+Yu(this.g)+Yu(this.b)};function Yu(g){return g<16?"0"+Math.max(0,g).toString(16):Math.min(255,g).toString(16)}function Ju(g,G,J){var tl=0,hl=0,xl=0,Zl,jl,Du;if(Zl=/([a-z]+)\((.*)\)/.exec(g=g.toLowerCase()),Zl)switch(jl=Zl[2].split(","),Zl[1]){case"hsl":return J(parseFloat(jl[0]),parseFloat(jl[1])/100,parseFloat(jl[2])/100);case"rgb":return G(md(jl[0]),md(jl[1]),md(jl[2]))}return(Du=ld.get(g))?G(Du.r,Du.g,Du.b):(g!=null&&g.charAt(0)==="#"&&!isNaN(Du=parseInt(g.slice(1),16))&&(g.length===4?(tl=(Du&3840)>>4,tl=tl>>4|tl,hl=Du&240,hl=hl>>4|hl,xl=Du&15,xl=xl<<4|xl):g.length===7&&(tl=(Du&16711680)>>16,hl=(Du&65280)>>8,xl=Du&255)),G(tl,hl,xl))}function hd(g,G,J){var tl=Math.min(g/=255,G/=255,J/=255),hl=Math.max(g,G,J),xl=hl-tl,Zl,jl,Du=(hl+tl)/2;return xl?(jl=Du<.5?xl/(hl+tl):xl/(2-hl-tl),g==hl?Zl=(G-J)/xl+(G<J?6:0):G==hl?Zl=(J-g)/xl+2:Zl=(g-G)/xl+4,Zl*=60):(Zl=NaN,jl=Du>0&&Du<1?0:Zl),new zh(Zl,jl,Du)}function $u(g,G,J){g=Xu(g),G=Xu(G),J=Xu(J);var tl=Rf((.4124564*g+.3575761*G+.1804375*J)/_f),hl=Rf((.2126729*g+.7151522*G+.072175*J)/Lp),xl=Rf((.0193339*g+.119192*G+.9503041*J)/Ef);return mp(116*hl-16,500*(tl-hl),200*(hl-xl))}function Xu(g){return(g/=255)<=.04045?g/12.92:Math.pow((g+.055)/1.055,2.4)}function md(g){var G=parseFloat(g);return g.charAt(g.length-1)==="%"?Math.round(G*2.55):G}var ld=m.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ld.forEach(function(g,G){ld.set(g,_g(G))});function Ld(g){return typeof g=="function"?g:function(){return g}}m.functor=Ld,m.xhr=zd(al);function zd(g){return function(G,J,tl){return arguments.length===2&&typeof J=="function"&&(tl=J,J=null),gh(G,J,g,tl)}}function gh(g,G,J,tl){var hl={},xl=m.dispatch("beforesend","progress","load","error"),Zl={},jl=new XMLHttpRequest,Du=null;self.XDomainRequest&&!("withCredentials"in jl)&&/^(http(s)?:)?\/\//.test(g)&&(jl=new XDomainRequest),"onload"in jl?jl.onload=jl.onerror=Qu:jl.onreadystatechange=function(){jl.readyState>3&&Qu()};function Qu(){var td=jl.status,kd;if(!td&&Bh(jl)||td>=200&&td<300||td===304){try{kd=J.call(hl,jl)}catch(Id){xl.error.call(hl,Id);return}xl.load.call(hl,kd)}else xl.error.call(hl,jl)}return jl.onprogress=function(td){var kd=m.event;m.event=td;try{xl.progress.call(hl,jl)}finally{m.event=kd}},hl.header=function(td,kd){return td=(td+"").toLowerCase(),arguments.length<2?Zl[td]:(kd==null?delete Zl[td]:Zl[td]=kd+"",hl)},hl.mimeType=function(td){return arguments.length?(G=td==null?null:td+"",hl):G},hl.responseType=function(td){return arguments.length?(Du=td,hl):Du},hl.response=function(td){return J=td,hl},["get","post"].forEach(function(td){hl[td]=function(){return hl.send.apply(hl,[td].concat(d(arguments)))}}),hl.send=function(td,kd,Id){if(arguments.length===2&&typeof kd=="function"&&(Id=kd,kd=null),jl.open(td,g,!0),G!=null&&!("accept"in Zl)&&(Zl.accept=G+",*/*"),jl.setRequestHeader)for(var fh in Zl)jl.setRequestHeader(fh,Zl[fh]);return G!=null&&jl.overrideMimeType&&jl.overrideMimeType(G),Du!=null&&(jl.responseType=Du),Id!=null&&hl.on("error",Id).on("load",function(Ph){Id(null,Ph)}),xl.beforesend.call(hl,jl),jl.send(kd??null),hl},hl.abort=function(){return jl.abort(),hl},m.rebind(hl,xl,"on"),tl==null?hl:hl.get(ep(tl))}function ep(g){return g.length===1?function(G,J){g(G==null?J:null)}:g}function Bh(g){var G=g.responseType;return G&&G!=="text"?g.response:g.responseText}m.dsv=function(g,G){var J=new RegExp('["'+g+`
]`),tl=g.charCodeAt(0);function hl(Qu,td,kd){arguments.length<3&&(kd=td,td=null);var Id=gh(Qu,G,td==null?xl:Zl(td),kd);return Id.row=function(fh){return arguments.length?Id.response((td=fh)==null?xl:Zl(fh)):td},Id}function xl(Qu){return hl.parse(Qu.responseText)}function Zl(Qu){return function(td){return hl.parse(td.responseText,Qu)}}hl.parse=function(Qu,td){var kd;return hl.parseRows(Qu,function(Id,fh){if(kd)return kd(Id,fh-1);var Ph=function(Nd){for(var ah={},uh=Id.length,kh=0;kh<uh;++kh)ah[Id[kh]]=Nd[kh];return ah};kd=td?function(Nd,ah){return td(Ph(Nd),ah)}:Ph})},hl.parseRows=function(Qu,td){var kd={},Id={},fh=[],Ph=Qu.length,Nd=0,ah=0,uh,kh;function Fh(){if(Nd>=Ph)return Id;if(kh)return kh=!1,kd;var Ap=Nd;if(Qu.charCodeAt(Ap)===34){for(var nf=Ap;nf++<Ph;)if(Qu.charCodeAt(nf)===34){if(Qu.charCodeAt(nf+1)!==34)break;++nf}Nd=nf+2;var hf=Qu.charCodeAt(nf+1);return hf===13?(kh=!0,Qu.charCodeAt(nf+2)===10&&++Nd):hf===10&&(kh=!0),Qu.slice(Ap+1,nf).replace(/""/g,'"')}for(;Nd<Ph;){var hf=Qu.charCodeAt(Nd++),sf=1;if(hf===10)kh=!0;else if(hf===13)kh=!0,Qu.charCodeAt(Nd)===10&&(++Nd,++sf);else if(hf!==tl)continue;return Qu.slice(Ap,Nd-sf)}return Qu.slice(Ap)}for(;(uh=Fh())!==Id;){for(var hh=[];uh!==kd&&uh!==Id;)hh.push(uh),uh=Fh();td&&(hh=td(hh,ah++))==null||fh.push(hh)}return fh},hl.format=function(Qu){if(Array.isArray(Qu[0]))return hl.formatRows(Qu);var td=new Fn,kd=[];return Qu.forEach(function(Id){for(var fh in Id)td.has(fh)||kd.push(td.add(fh))}),[kd.map(Du).join(g)].concat(Qu.map(function(Id){return kd.map(function(fh){return Du(Id[fh])}).join(g)})).join(`
`)},hl.formatRows=function(Qu){return Qu.map(jl).join(`
`)};function jl(Qu){return Qu.map(Du).join(g)}function Du(Qu){return J.test(Qu)?'"'+Qu.replace(/\"/g,'""')+'"':Qu}return hl},m.csv=m.dsv(",","text/csv"),m.tsv=m.dsv("	","text/tab-separated-values");var up,Uh,hp,Ep,Uf=this[ce(this,"requestAnimationFrame")]||function(g){setTimeout(g,17)};m.timer=function(){qp.apply(this,arguments)};function qp(g,G,J){var tl=arguments.length;tl<2&&(G=0),tl<3&&(J=Date.now());var hl=J+G,xl={c:g,t:hl,n:null};return Uh?Uh.n=xl:up=xl,Uh=xl,hp||(Ep=clearTimeout(Ep),hp=1,Uf(Ag)),xl}function Ag(){var g=bf(),G=Ig()-g;G>24?(isFinite(G)&&(clearTimeout(Ep),Ep=setTimeout(Ag,G)),hp=0):(hp=1,Uf(Ag))}m.timer.flush=function(){bf(),Ig()};function bf(){for(var g=Date.now(),G=up;G;)g>=G.t&&G.c(g-G.t)&&(G.c=null),G=G.n;return g}function Ig(){for(var g,G=up,J=1/0;G;)G.c?(G.t<J&&(J=G.t),G=(g=G).n):G=g?g.n=G.n:up=G.n;return Uh=g,J}m.round=function(g,G){return G?Math.round(g*(G=Math.pow(10,G)))/G:Math.round(g)},m.geom={};function yg(g){return g[0]}function pm(g){return g[1]}m.geom.hull=function(g){var G=yg,J=pm;if(arguments.length)return tl(g);function tl(hl){if(hl.length<3)return[];var xl=Ld(G),Zl=Ld(J),jl,Du=hl.length,Qu=[],td=[];for(jl=0;jl<Du;jl++)Qu.push([+xl.call(this,hl[jl],jl),+Zl.call(this,hl[jl],jl),jl]);for(Qu.sort(Tf),jl=0;jl<Du;jl++)td.push([Qu[jl][0],-Qu[jl][1]]);var kd=Mg(Qu),Id=Mg(td),fh=Id[0]===kd[0],Ph=Id[Id.length-1]===kd[kd.length-1],Nd=[];for(jl=kd.length-1;jl>=0;--jl)Nd.push(hl[Qu[kd[jl]][2]]);for(jl=+fh;jl<Id.length-Ph;++jl)Nd.push(hl[Qu[Id[jl]][2]]);return Nd}return tl.x=function(hl){return arguments.length?(G=hl,tl):G},tl.y=function(hl){return arguments.length?(J=hl,tl):J},tl};function Mg(g){for(var G=g.length,J=[0,1],tl=2,hl=2;hl<G;hl++){for(;tl>1&&Sd(g[J[tl-2]],g[J[tl-1]],g[hl])<=0;)--tl;J[tl++]=hl}return J.slice(0,tl)}function Tf(g,G){return g[0]-G[0]||g[1]-G[1]}m.geom.polygon=function(g){return Bn(g,xm),g};var xm=m.geom.polygon.prototype=[];xm.area=function(){for(var g=-1,G=this.length,J,tl=this[G-1],hl=0;++g<G;)J=tl,tl=this[g],hl+=J[1]*tl[0]-J[0]*tl[1];return hl*.5},xm.centroid=function(g){var G=-1,J=this.length,tl=0,hl=0,xl,Zl=this[J-1],jl;for(arguments.length||(g=-1/(6*this.area()));++G<J;)xl=Zl,Zl=this[G],jl=xl[0]*Zl[1]-Zl[0]*xl[1],tl+=(xl[0]+Zl[0])*jl,hl+=(xl[1]+Zl[1])*jl;return[tl*g,hl*g]},xm.clip=function(g){for(var G,J=wm(g),tl=-1,hl=this.length-wm(this),xl,Zl,jl=this[hl-1],Du,Qu,td;++tl<hl;){for(G=g.slice(),g.length=0,Du=this[tl],Qu=G[(Zl=G.length-J)-1],xl=-1;++xl<Zl;)td=G[xl],jg(td,jl,Du)?(jg(Qu,jl,Du)||g.push(Wf(Qu,td,jl,Du)),g.push(td)):jg(Qu,jl,Du)&&g.push(Wf(Qu,td,jl,Du)),Qu=td;J&&g.push(g[0]),jl=Du}return g};function jg(g,G,J){return(J[0]-G[0])*(g[1]-G[1])<(J[1]-G[1])*(g[0]-G[0])}function Wf(g,G,J,tl){var hl=g[0],xl=J[0],Zl=G[0]-hl,jl=tl[0]-xl,Du=g[1],Qu=J[1],td=G[1]-Du,kd=tl[1]-Qu,Id=(jl*(Du-Qu)-kd*(hl-xl))/(kd*Zl-jl*td);return[hl+Id*Zl,Du+Id*td]}function wm(g){var G=g[0],J=g[g.length-1];return!(G[0]-J[0]||G[1]-J[1])}var im,fm,Rm,n0=[],ug,nm,Og=[];function Xg(){Km(this),this.edge=this.site=this.circle=null}function Ug(g){var G=n0.pop()||new Xg;return G.site=g,G}function km(g){Nm(g),Rm.remove(g),n0.push(g),Km(g)}function Am(g){var G=g.circle,J=G.x,tl=G.cy,hl={x:J,y:tl},xl=g.P,Zl=g.N,jl=[g];km(g);for(var Du=xl;Du.circle&&C(J-Du.circle.x)<Ku&&C(tl-Du.circle.cy)<Ku;)xl=Du.P,jl.unshift(Du),km(Du),Du=xl;jl.unshift(Du),Nm(Du);for(var Qu=Zl;Qu.circle&&C(J-Qu.circle.x)<Ku&&C(tl-Qu.circle.cy)<Ku;)Zl=Qu.N,jl.push(Qu),km(Qu),Qu=Zl;jl.push(Qu),Nm(Qu);var td=jl.length,kd;for(kd=1;kd<td;++kd)Qu=jl[kd],Du=jl[kd-1],Sm(Qu.edge,Du.site,Qu.site,hl);Du=jl[0],Qu=jl[td-1],Qu.edge=E0(Du.site,Qu.site,null,hl),a0(Du),a0(Qu)}function um(g){for(var G=g.x,J=g.y,tl,hl,xl,Zl,jl=Rm._;jl;)if(xl=o0(jl,J)-G,xl>Ku)jl=jl.L;else if(Zl=G-bm(jl,J),Zl>Ku){if(!jl.R){tl=jl;break}jl=jl.R}else{xl>-Ku?(tl=jl.P,hl=jl):Zl>-Ku?(tl=jl,hl=jl.N):tl=hl=jl;break}var Du=Ug(g);if(Rm.insert(tl,Du),!(!tl&&!hl)){if(tl===hl){Nm(tl),hl=Ug(tl.site),Rm.insert(Du,hl),Du.edge=hl.edge=E0(tl.site,Du.site),a0(tl),a0(hl);return}if(!hl){Du.edge=E0(tl.site,Du.site);return}Nm(tl),Nm(hl);var Qu=tl.site,td=Qu.x,kd=Qu.y,Id=g.x-td,fh=g.y-kd,Ph=hl.site,Nd=Ph.x-td,ah=Ph.y-kd,uh=2*(Id*ah-fh*Nd),kh=Id*Id+fh*fh,Fh=Nd*Nd+ah*ah,hh={x:(ah*kh-fh*Fh)/uh+td,y:(Id*Fh-Nd*kh)/uh+kd};Sm(hl.edge,Qu,Ph,hh),Du.edge=E0(Qu,g,null,hh),hl.edge=E0(g,Ph,null,hh),a0(tl),a0(hl)}}function o0(g,G){var J=g.site,tl=J.x,hl=J.y,xl=hl-G;if(!xl)return tl;var Zl=g.P;if(!Zl)return-1/0;J=Zl.site;var jl=J.x,Du=J.y,Qu=Du-G;if(!Qu)return jl;var td=jl-tl,kd=1/xl-1/Qu,Id=td/Qu;return kd?(-Id+Math.sqrt(Id*Id-2*kd*(td*td/(-2*Qu)-Du+Qu/2+hl-xl/2)))/kd+tl:(tl+jl)/2}function bm(g,G){var J=g.N;if(J)return o0(J,G);var tl=g.site;return tl.y===G?tl.x:1/0}function Hg(g){this.site=g,this.edges=[]}Hg.prototype.prepare=function(){for(var g=this.edges,G=g.length,J;G--;)J=g[G].edge,(!J.b||!J.a)&&g.splice(G,1);return g.sort(gm),g.length};function P0(g){for(var G=g[0][0],J=g[1][0],tl=g[0][1],hl=g[1][1],xl,Zl,jl,Du,Qu=fm,td=Qu.length,kd,Id,fh,Ph,Nd,ah;td--;)if(kd=Qu[td],!(!kd||!kd.prepare()))for(fh=kd.edges,Ph=fh.length,Id=0;Id<Ph;)ah=fh[Id].end(),jl=ah.x,Du=ah.y,Nd=fh[++Id%Ph].start(),xl=Nd.x,Zl=Nd.y,(C(jl-xl)>Ku||C(Du-Zl)>Ku)&&(fh.splice(Id,0,new t0(Qg(kd.site,ah,C(jl-G)<Ku&&hl-Du>Ku?{x:G,y:C(xl-G)<Ku?Zl:hl}:C(Du-hl)<Ku&&J-jl>Ku?{x:C(Zl-hl)<Ku?xl:J,y:hl}:C(jl-J)<Ku&&Du-tl>Ku?{x:J,y:C(xl-J)<Ku?Zl:tl}:C(Du-tl)<Ku&&jl-G>Ku?{x:C(Zl-tl)<Ku?xl:G,y:tl}:null),kd.site,null)),++Ph)}function gm(g,G){return G.angle-g.angle}function g0(){Km(this),this.x=this.y=this.arc=this.site=this.cy=null}function a0(g){var G=g.P,J=g.N;if(!(!G||!J)){var tl=G.site,hl=g.site,xl=J.site;if(tl!==xl){var Zl=hl.x,jl=hl.y,Du=tl.x-Zl,Qu=tl.y-jl,td=xl.x-Zl,kd=xl.y-jl,Id=2*(Du*kd-Qu*td);if(!(Id>=-gl)){var fh=Du*Du+Qu*Qu,Ph=td*td+kd*kd,Nd=(kd*fh-Qu*Ph)/Id,ah=(Du*Ph-td*fh)/Id,kd=ah+jl,uh=Og.pop()||new g0;uh.arc=g,uh.site=hl,uh.x=Nd+Zl,uh.y=kd+Math.sqrt(Nd*Nd+ah*ah),uh.cy=kd,g.circle=uh;for(var kh=null,Fh=nm._;Fh;)if(uh.y<Fh.y||uh.y===Fh.y&&uh.x<=Fh.x)if(Fh.L)Fh=Fh.L;else{kh=Fh.P;break}else if(Fh.R)Fh=Fh.R;else{kh=Fh;break}nm.insert(kh,uh),kh||(ug=uh)}}}}function Nm(g){var G=g.circle;G&&(G.P||(ug=G.N),nm.remove(G),Og.push(G),Km(G),g.circle=null)}function y0(g,G,J,tl){return function(hl){var xl=hl.a,Zl=hl.b,jl=xl.x,Du=xl.y,Qu=Zl.x,td=Zl.y,kd=0,Id=1,fh=Qu-jl,Ph=td-Du,Nd;if(Nd=g-jl,!(!fh&&Nd>0)){if(Nd/=fh,fh<0){if(Nd<kd)return;Nd<Id&&(Id=Nd)}else if(fh>0){if(Nd>Id)return;Nd>kd&&(kd=Nd)}if(Nd=J-jl,!(!fh&&Nd<0)){if(Nd/=fh,fh<0){if(Nd>Id)return;Nd>kd&&(kd=Nd)}else if(fh>0){if(Nd<kd)return;Nd<Id&&(Id=Nd)}if(Nd=G-Du,!(!Ph&&Nd>0)){if(Nd/=Ph,Ph<0){if(Nd<kd)return;Nd<Id&&(Id=Nd)}else if(Ph>0){if(Nd>Id)return;Nd>kd&&(kd=Nd)}if(Nd=tl-Du,!(!Ph&&Nd<0)){if(Nd/=Ph,Ph<0){if(Nd>Id)return;Nd>kd&&(kd=Nd)}else if(Ph>0){if(Nd<kd)return;Nd<Id&&(Id=Nd)}return kd>0&&(hl.a={x:jl+kd*fh,y:Du+kd*Ph}),Id<1&&(hl.b={x:jl+Id*fh,y:Du+Id*Ph}),hl}}}}}}function Xm(g){for(var G=im,J=y0(g[0][0],g[0][1],g[1][0],g[1][1]),tl=G.length,hl;tl--;)hl=G[tl],(!Ym(hl,g)||!J(hl)||C(hl.a.x-hl.b.x)<Ku&&C(hl.a.y-hl.b.y)<Ku)&&(hl.a=hl.b=null,G.splice(tl,1))}function Ym(g,G){var J=g.b;if(J)return!0;var tl=g.a,hl=G[0][0],xl=G[1][0],Zl=G[0][1],jl=G[1][1],Du=g.l,Qu=g.r,td=Du.x,kd=Du.y,Id=Qu.x,fh=Qu.y,Ph=(td+Id)/2,Nd=(kd+fh)/2,ah,uh;if(fh===kd){if(Ph<hl||Ph>=xl)return;if(td>Id){if(!tl)tl={x:Ph,y:Zl};else if(tl.y>=jl)return;J={x:Ph,y:jl}}else{if(!tl)tl={x:Ph,y:jl};else if(tl.y<Zl)return;J={x:Ph,y:Zl}}}else if(ah=(td-Id)/(fh-kd),uh=Nd-ah*Ph,ah<-1||ah>1)if(td>Id){if(!tl)tl={x:(Zl-uh)/ah,y:Zl};else if(tl.y>=jl)return;J={x:(jl-uh)/ah,y:jl}}else{if(!tl)tl={x:(jl-uh)/ah,y:jl};else if(tl.y<Zl)return;J={x:(Zl-uh)/ah,y:Zl}}else if(kd<fh){if(!tl)tl={x:hl,y:ah*hl+uh};else if(tl.x>=xl)return;J={x:xl,y:ah*xl+uh}}else{if(!tl)tl={x:xl,y:ah*xl+uh};else if(tl.x<hl)return;J={x:hl,y:ah*hl+uh}}return g.a=tl,g.b=J,!0}function x0(g,G){this.l=g,this.r=G,this.a=this.b=null}function E0(g,G,J,tl){var hl=new x0(g,G);return im.push(hl),J&&Sm(hl,g,G,J),tl&&Sm(hl,G,g,tl),fm[g.i].edges.push(new t0(hl,g,G)),fm[G.i].edges.push(new t0(hl,G,g)),hl}function Qg(g,G,J){var tl=new x0(g,null);return tl.a=G,tl.b=J,im.push(tl),tl}function Sm(g,G,J,tl){!g.a&&!g.b?(g.a=tl,g.l=G,g.r=J):g.l===J?g.b=tl:g.a=tl}function t0(g,G,J){var tl=g.a,hl=g.b;this.edge=g,this.site=G,this.angle=J?Math.atan2(J.y-G.y,J.x-G.x):g.l===G?Math.atan2(hl.x-tl.x,tl.y-hl.y):Math.atan2(tl.x-hl.x,hl.y-tl.y)}t0.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function m0(){this._=null}function Km(g){g.U=g.C=g.L=g.R=g.P=g.N=null}m0.prototype={insert:function(g,G){var J,tl,hl;if(g){if(G.P=g,G.N=g.N,g.N&&(g.N.P=G),g.N=G,g.R){for(g=g.R;g.L;)g=g.L;g.L=G}else g.R=G;J=g}else this._?(g=rv(this._),G.P=null,G.N=g,g.P=g.L=G,J=g):(G.P=G.N=null,this._=G,J=null);for(G.L=G.R=null,G.U=J,G.C=!0,g=G;J&&J.C;)tl=J.U,J===tl.L?(hl=tl.R,hl&&hl.C?(J.C=hl.C=!1,tl.C=!0,g=tl):(g===J.R&&(om(this,J),g=J,J=g.U),J.C=!1,tl.C=!0,w0(this,tl))):(hl=tl.L,hl&&hl.C?(J.C=hl.C=!1,tl.C=!0,g=tl):(g===J.L&&(w0(this,J),g=J,J=g.U),J.C=!1,tl.C=!0,om(this,tl))),J=g.U;this._.C=!1},remove:function(g){g.N&&(g.N.P=g.P),g.P&&(g.P.N=g.N),g.N=g.P=null;var G=g.U,J,tl=g.L,hl=g.R,xl,Zl;if(tl?hl?xl=rv(hl):xl=tl:xl=hl,G?G.L===g?G.L=xl:G.R=xl:this._=xl,tl&&hl?(Zl=xl.C,xl.C=g.C,xl.L=tl,tl.U=xl,xl!==hl?(G=xl.U,xl.U=g.U,g=xl.R,G.L=g,xl.R=hl,hl.U=xl):(xl.U=G,G=xl,g=xl.R)):(Zl=g.C,g=xl),g&&(g.U=G),!Zl){if(g&&g.C){g.C=!1;return}do{if(g===this._)break;if(g===G.L){if(J=G.R,J.C&&(J.C=!1,G.C=!0,om(this,G),J=G.R),J.L&&J.L.C||J.R&&J.R.C){(!J.R||!J.R.C)&&(J.L.C=!1,J.C=!0,w0(this,J),J=G.R),J.C=G.C,G.C=J.R.C=!1,om(this,G),g=this._;break}}else if(J=G.L,J.C&&(J.C=!1,G.C=!0,w0(this,G),J=G.L),J.L&&J.L.C||J.R&&J.R.C){(!J.L||!J.L.C)&&(J.R.C=!1,J.C=!0,om(this,J),J=G.L),J.C=G.C,G.C=J.L.C=!1,w0(this,G),g=this._;break}J.C=!0,g=G,G=G.U}while(!g.C);g&&(g.C=!1)}}};function om(g,G){var J=G,tl=G.R,hl=J.U;hl?hl.L===J?hl.L=tl:hl.R=tl:g._=tl,tl.U=hl,J.U=tl,J.R=tl.L,J.R&&(J.R.U=J),tl.L=J}function w0(g,G){var J=G,tl=G.L,hl=J.U;hl?hl.L===J?hl.L=tl:hl.R=tl:g._=tl,tl.U=hl,J.U=tl,J.L=tl.R,J.L&&(J.L.U=J),tl.R=J}function rv(g){for(;g.L;)g=g.L;return g}function Cv(g,G){var J=g.sort(Zm).pop(),tl,hl,xl;for(im=[],fm=new Array(g.length),Rm=new m0,nm=new m0;;)if(xl=ug,J&&(!xl||J.y<xl.y||J.y===xl.y&&J.x<xl.x))(J.x!==tl||J.y!==hl)&&(fm[J.i]=new Hg(J),um(J),tl=J.x,hl=J.y),J=g.pop();else if(xl)Am(xl.arc);else break;G&&(Xm(G),P0(G));var Zl={cells:fm,edges:im};return Rm=nm=im=fm=null,Zl}function Zm(g,G){return G.y-g.y||G.x-g.x}m.geom.voronoi=function(g){var G=yg,J=pm,tl=G,hl=J,xl=bv;if(g)return Zl(g);function Zl(Du){var Qu=new Array(Du.length),td=xl[0][0],kd=xl[0][1],Id=xl[1][0],fh=xl[1][1];return Cv(jl(Du),xl).cells.forEach(function(Ph,Nd){var ah=Ph.edges,uh=Ph.site,kh=Qu[Nd]=ah.length?ah.map(function(Fh){var hh=Fh.start();return[hh.x,hh.y]}):uh.x>=td&&uh.x<=Id&&uh.y>=kd&&uh.y<=fh?[[td,fh],[Id,fh],[Id,kd],[td,kd]]:[];kh.point=Du[Nd]}),Qu}function jl(Du){return Du.map(function(Qu,td){return{x:Math.round(tl(Qu,td)/Ku)*Ku,y:Math.round(hl(Qu,td)/Ku)*Ku,i:td}})}return Zl.links=function(Du){return Cv(jl(Du)).edges.filter(function(Qu){return Qu.l&&Qu.r}).map(function(Qu){return{source:Du[Qu.l.i],target:Du[Qu.r.i]}})},Zl.triangles=function(Du){var Qu=[];return Cv(jl(Du)).cells.forEach(function(td,kd){for(var Id=td.site,fh=td.edges.sort(gm),Ph=-1,Nd=fh.length,ah,uh,kh=fh[Nd-1].edge,Fh=kh.l===Id?kh.r:kh.l;++Ph<Nd;)ah=kh,uh=Fh,kh=fh[Ph].edge,Fh=kh.l===Id?kh.r:kh.l,kd<uh.i&&kd<Fh.i&&wy(Id,uh,Fh)<0&&Qu.push([Du[kd],Du[uh.i],Du[Fh.i]])}),Qu},Zl.x=function(Du){return arguments.length?(tl=Ld(G=Du),Zl):G},Zl.y=function(Du){return arguments.length?(hl=Ld(J=Du),Zl):J},Zl.clipExtent=function(Du){return arguments.length?(xl=Du??bv,Zl):xl===bv?null:xl},Zl.size=function(Du){return arguments.length?Zl.clipExtent(Du&&[[0,0],Du]):xl===bv?null:xl&&xl[1]},Zl};var bv=[[-1e6,-1e6],[1e6,1e6]];function wy(g,G,J){return(g.x-J.x)*(G.y-g.y)-(g.x-G.x)*(J.y-g.y)}m.geom.delaunay=function(g){return m.geom.voronoi().triangles(g)},m.geom.quadtree=function(g,G,J,tl,hl){var xl=yg,Zl=pm,jl;if(jl=arguments.length)return xl=e2,Zl=Cy,jl===3&&(hl=J,tl=G,J=G=0),Du(g);function Du(Qu){var td,kd=Ld(xl),Id=Ld(Zl),fh,Ph,Nd,ah,uh,kh,Fh,hh;if(G!=null)uh=G,kh=J,Fh=tl,hh=hl;else if(Fh=hh=-(uh=kh=1/0),fh=[],Ph=[],ah=Qu.length,jl)for(Nd=0;Nd<ah;++Nd)td=Qu[Nd],td.x<uh&&(uh=td.x),td.y<kh&&(kh=td.y),td.x>Fh&&(Fh=td.x),td.y>hh&&(hh=td.y),fh.push(td.x),Ph.push(td.y);else for(Nd=0;Nd<ah;++Nd){var Ap=+kd(td=Qu[Nd],Nd),nf=+Id(td,Nd);Ap<uh&&(uh=Ap),nf<kh&&(kh=nf),Ap>Fh&&(Fh=Ap),nf>hh&&(hh=nf),fh.push(Ap),Ph.push(nf)}var hf=Fh-uh,sf=hh-kh;hf>sf?hh=kh+hf:Fh=uh+sf;function Af(Pf,hg,_m,d0,Dm,tf,wg,Fg){if(!(isNaN(_m)||isNaN(d0)))if(Pf.leaf){var Em=Pf.x,s0=Pf.y;if(Em!=null)if(C(Em-_m)+C(s0-d0)<.01)Mf(Pf,hg,_m,d0,Dm,tf,wg,Fg);else{var b0=Pf.point;Pf.x=Pf.y=Pf.point=null,Mf(Pf,b0,Em,s0,Dm,tf,wg,Fg),Mf(Pf,hg,_m,d0,Dm,tf,wg,Fg)}else Pf.x=_m,Pf.y=d0,Pf.point=hg}else Mf(Pf,hg,_m,d0,Dm,tf,wg,Fg)}function Mf(Pf,hg,_m,d0,Dm,tf,wg,Fg){var Em=(Dm+wg)*.5,s0=(tf+Fg)*.5,b0=_m>=Em,z0=d0>=s0,X0=z0<<1|b0;Pf.leaf=!1,Pf=Pf.nodes[X0]||(Pf.nodes[X0]=C1()),b0?Dm=Em:wg=Em,z0?tf=s0:Fg=s0,Af(Pf,hg,_m,d0,Dm,tf,wg,Fg)}var xg=C1();if(xg.add=function(Pf){Af(xg,Pf,+kd(Pf,++Nd),+Id(Pf,Nd),uh,kh,Fh,hh)},xg.visit=function(Pf){qv(Pf,xg,uh,kh,Fh,hh)},xg.find=function(Pf){return M3(xg,Pf[0],Pf[1],uh,kh,Fh,hh)},Nd=-1,G==null){for(;++Nd<ah;)Af(xg,Qu[Nd],fh[Nd],Ph[Nd],uh,kh,Fh,hh);--Nd}else Qu.forEach(xg.add);return fh=Ph=Qu=td=null,xg}return Du.x=function(Qu){return arguments.length?(xl=Qu,Du):xl},Du.y=function(Qu){return arguments.length?(Zl=Qu,Du):Zl},Du.extent=function(Qu){return arguments.length?(Qu==null?G=J=tl=hl=null:(G=+Qu[0][0],J=+Qu[0][1],tl=+Qu[1][0],hl=+Qu[1][1]),Du):G==null?null:[[G,J],[tl,hl]]},Du.size=function(Qu){return arguments.length?(Qu==null?G=J=tl=hl=null:(G=J=0,tl=+Qu[0],hl=+Qu[1]),Du):G==null?null:[tl-G,hl-J]},Du};function e2(g){return g.x}function Cy(g){return g.y}function C1(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function qv(g,G,J,tl,hl,xl){if(!g(G,J,tl,hl,xl)){var Zl=(J+hl)*.5,jl=(tl+xl)*.5,Du=G.nodes;Du[0]&&qv(g,Du[0],J,tl,Zl,jl),Du[1]&&qv(g,Du[1],Zl,tl,hl,jl),Du[2]&&qv(g,Du[2],J,jl,Zl,xl),Du[3]&&qv(g,Du[3],Zl,jl,hl,xl)}}function M3(g,G,J,tl,hl,xl,Zl){var jl=1/0,Du;return(function Qu(td,kd,Id,fh,Ph){if(!(kd>xl||Id>Zl||fh<tl||Ph<hl)){if(Nd=td.point){var Nd,ah=G-td.x,uh=J-td.y,kh=ah*ah+uh*uh;if(kh<jl){var Fh=Math.sqrt(jl=kh);tl=G-Fh,hl=J-Fh,xl=G+Fh,Zl=J+Fh,Du=Nd}}for(var hh=td.nodes,Ap=(kd+fh)*.5,nf=(Id+Ph)*.5,hf=G>=Ap,sf=J>=nf,Af=sf<<1|hf,Mf=Af+4;Af<Mf;++Af)if(td=hh[Af&3])switch(Af&3){case 0:Qu(td,kd,Id,Ap,nf);break;case 1:Qu(td,Ap,Id,fh,nf);break;case 2:Qu(td,kd,nf,Ap,Ph);break;case 3:Qu(td,Ap,nf,fh,Ph);break}}})(g,tl,hl,xl,Zl),Du}m.interpolateRgb=G0;function G0(g,G){g=m.rgb(g),G=m.rgb(G);var J=g.r,tl=g.g,hl=g.b,xl=G.r-J,Zl=G.g-tl,jl=G.b-hl;return function(Du){return"#"+Yu(Math.round(J+xl*Du))+Yu(Math.round(tl+Zl*Du))+Yu(Math.round(hl+jl*Du))}}m.interpolateObject=by;function by(g,G){var J={},tl={},hl;for(hl in g)hl in G?J[hl]=K0(g[hl],G[hl]):tl[hl]=g[hl];for(hl in G)hl in g||(tl[hl]=G[hl]);return function(xl){for(hl in J)tl[hl]=J[hl](xl);return tl}}m.interpolateNumber=Yv;function Yv(g,G){return g=+g,G=+G,function(J){return g*(1-J)+G*J}}m.interpolateString=Kv;function Kv(g,G){var J=b1.lastIndex=Zv.lastIndex=0,tl,hl,xl,Zl=-1,jl=[],Du=[];for(g=g+"",G=G+"";(tl=b1.exec(g))&&(hl=Zv.exec(G));)(xl=hl.index)>J&&(xl=G.slice(J,xl),jl[Zl]?jl[Zl]+=xl:jl[++Zl]=xl),(tl=tl[0])===(hl=hl[0])?jl[Zl]?jl[Zl]+=hl:jl[++Zl]=hl:(jl[++Zl]=null,Du.push({i:Zl,x:Yv(tl,hl)})),J=Zv.lastIndex;return J<G.length&&(xl=G.slice(J),jl[Zl]?jl[Zl]+=xl:jl[++Zl]=xl),jl.length<2?Du[0]?(G=Du[0].x,function(Qu){return G(Qu)+""}):function(){return G}:(G=Du.length,function(Qu){for(var td=0,kd;td<G;++td)jl[(kd=Du[td]).i]=kd.x(Qu);return jl.join("")})}var b1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zv=new RegExp(b1.source,"g");m.interpolate=K0;function K0(g,G){for(var J=m.interpolators.length,tl;--J>=0&&!(tl=m.interpolators[J](g,G)););return tl}m.interpolators=[function(g,G){var J=typeof G;return(J==="string"?ld.has(G.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(G)?G0:Kv:G instanceof fp?G0:Array.isArray(G)?G1:J==="object"&&isNaN(G)?by:Yv)(g,G)}],m.interpolateArray=G1;function G1(g,G){var J=[],tl=[],hl=g.length,xl=G.length,Zl=Math.min(g.length,G.length),jl;for(jl=0;jl<Zl;++jl)J.push(K0(g[jl],G[jl]));for(;jl<hl;++jl)tl[jl]=g[jl];for(;jl<xl;++jl)tl[jl]=G[jl];return function(Du){for(jl=0;jl<Zl;++jl)tl[jl]=J[jl](Du);return tl}}var Sy=function(){return al},R3=m.map({linear:Sy,poly:n2,quad:function(){return _y},cubic:function(){return Ey},sin:function(){return n3},exp:function(){return L2},circle:function(){return o2},elastic:Ay,back:a2,bounce:function(){return s2}}),t2=m.map({in:al,out:r2,"in-out":i2,"out-in":function(g){return i2(r2(g))}});m.ease=function(g){var G=g.indexOf("-"),J=G>=0?g.slice(0,G):g,tl=G>=0?g.slice(G+1):"in";return J=R3.get(J)||Sy,tl=t2.get(tl)||al,i3(tl(J.apply(null,l.call(arguments,1))))};function i3(g){return function(G){return G<=0?0:G>=1?1:g(G)}}function r2(g){return function(G){return 1-g(1-G)}}function i2(g){return function(G){return .5*(G<.5?g(2*G):2-g(2-2*G))}}function _y(g){return g*g}function Ey(g){return g*g*g}function D2(g){if(g<=0)return 0;if(g>=1)return 1;var G=g*g,J=G*g;return 4*(g<.5?J:3*(g-G)+J-.75)}function n2(g){return function(G){return Math.pow(G,g)}}function n3(g){return 1-Math.cos(g*Nu)}function L2(g){return Math.pow(2,10*(g-1))}function o2(g){return 1-Math.sqrt(1-g*g)}function Ay(g,G){var J;return arguments.length<2&&(G=.45),arguments.length?J=G/Vl*Math.asin(1/g):(g=1,J=G/4),function(tl){return 1+g*Math.pow(2,-10*tl)*Math.sin((tl-J)*Vl/G)}}function a2(g){return g||(g=1.70158),function(G){return G*G*((g+1)*G-g)}}function s2(g){return g<1/2.75?7.5625*g*g:g<2/2.75?7.5625*(g-=1.5/2.75)*g+.75:g<2.5/2.75?7.5625*(g-=2.25/2.75)*g+.9375:7.5625*(g-=2.625/2.75)*g+.984375}m.interpolateHcl=I2;function I2(g,G){g=m.hcl(g),G=m.hcl(G);var J=g.h,tl=g.c,hl=g.l,xl=G.h-J,Zl=G.c-tl,jl=G.l-hl;return isNaN(Zl)&&(Zl=0,tl=isNaN(tl)?G.c:tl),isNaN(xl)?(xl=0,J=isNaN(J)?G.h:J):xl>180?xl-=360:xl<-180&&(xl+=360),function(Du){return Sp(J+xl*Du,tl+Zl*Du,hl+jl*Du)+""}}m.interpolateHsl=o3;function o3(g,G){g=m.hsl(g),G=m.hsl(G);var J=g.h,tl=g.s,hl=g.l,xl=G.h-J,Zl=G.s-tl,jl=G.l-hl;return isNaN(Zl)&&(Zl=0,tl=isNaN(tl)?G.s:tl),isNaN(xl)?(xl=0,J=isNaN(J)?G.h:J):xl>180?xl-=360:xl<-180&&(xl+=360),function(Du){return qh(J+xl*Du,tl+Zl*Du,hl+jl*Du)+""}}m.interpolateLab=My;function My(g,G){g=m.lab(g),G=m.lab(G);var J=g.l,tl=g.a,hl=g.b,xl=G.l-J,Zl=G.a-tl,jl=G.b-hl;return function(Du){return rg(J+xl*Du,tl+Zl*Du,hl+jl*Du)+""}}m.interpolateRound=Ry;function Ry(g,G){return G-=g,function(J){return Math.round(g+G*J)}}m.transform=function(g){var G=x.createElementNS(m.ns.prefix.svg,"g");return(m.transform=function(J){if(J!=null){G.setAttribute("transform",J);var tl=G.transform.baseVal.consolidate()}return new V1(tl?tl.matrix:u)})(g)};function V1(g){var G=[g.a,g.b],J=[g.c,g.d],tl=ky(G),hl=l2(G,J),xl=ky(a(J,G,-hl))||0;G[0]*J[1]<J[0]*G[1]&&(G[0]*=-1,G[1]*=-1,tl*=-1,hl*=-1),this.rotate=(tl?Math.atan2(G[1],G[0]):Math.atan2(-J[0],J[1]))*sd,this.translate=[g.e,g.f],this.scale=[tl,xl],this.skew=xl?Math.atan2(hl,xl)*sd:0}V1.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function l2(g,G){return g[0]*G[0]+g[1]*G[1]}function ky(g){var G=Math.sqrt(l2(g,g));return G&&(g[0]/=G,g[1]/=G),G}function a(g,G,J){return g[0]+=J*G[0],g[1]+=J*G[1],g}var u={a:1,b:0,c:0,d:1,e:0,f:0};m.interpolateTransform=nh;function z(g){return g.length?g.pop()+",":""}function it(g,G,J,tl){if(g[0]!==G[0]||g[1]!==G[1]){var hl=J.push("translate(",null,",",null,")");tl.push({i:hl-4,x:Yv(g[0],G[0])},{i:hl-2,x:Yv(g[1],G[1])})}else(G[0]||G[1])&&J.push("translate("+G+")")}function Pl(g,G,J,tl){g!==G?(g-G>180?G+=360:G-g>180&&(g+=360),tl.push({i:J.push(z(J)+"rotate(",null,")")-2,x:Yv(g,G)})):G&&J.push(z(J)+"rotate("+G+")")}function Yl(g,G,J,tl){g!==G?tl.push({i:J.push(z(J)+"skewX(",null,")")-2,x:Yv(g,G)}):G&&J.push(z(J)+"skewX("+G+")")}function ad(g,G,J,tl){if(g[0]!==G[0]||g[1]!==G[1]){var hl=J.push(z(J)+"scale(",null,",",null,")");tl.push({i:hl-4,x:Yv(g[0],G[0])},{i:hl-2,x:Yv(g[1],G[1])})}else(G[0]!==1||G[1]!==1)&&J.push(z(J)+"scale("+G+")")}function nh(g,G){var J=[],tl=[];return g=m.transform(g),G=m.transform(G),it(g.translate,G.translate,J,tl),Pl(g.rotate,G.rotate,J,tl),Yl(g.skew,G.skew,J,tl),ad(g.scale,G.scale,J,tl),g=G=null,function(hl){for(var xl=-1,Zl=tl.length,jl;++xl<Zl;)J[(jl=tl[xl]).i]=jl.x(hl);return J.join("")}}function _h(g,G){return G=(G-=g=+g)||1/G,function(J){return(J-g)/G}}function lp(g,G){return G=(G-=g=+g)||1/G,function(J){return Math.max(0,Math.min(1,(J-g)/G))}}m.layout={},m.layout.bundle=function(){return function(g){for(var G=[],J=-1,tl=g.length;++J<tl;)G.push(Xp(g[J]));return G}};function Xp(g){for(var G=g.source,J=g.target,tl=Yp(G,J),hl=[G];G!==tl;)G=G.parent,hl.push(G);for(var xl=hl.length;J!==tl;)hl.splice(xl,0,J),J=J.parent;return hl}function ef(g){for(var G=[],J=g.parent;J!=null;)G.push(g),g=J,J=J.parent;return G.push(g),G}function Yp(g,G){if(g===G)return g;for(var J=ef(g),tl=ef(G),hl=J.pop(),xl=tl.pop(),Zl=null;hl===xl;)Zl=hl,hl=J.pop(),xl=tl.pop();return Zl}m.layout.chord=function(){var g={},G,J,tl,hl,xl=0,Zl,jl,Du;function Qu(){var kd={},Id=[],fh=m.range(hl),Ph=[],Nd,ah,uh,kh,Fh;for(G=[],J=[],Nd=0,kh=-1;++kh<hl;){for(ah=0,Fh=-1;++Fh<hl;)ah+=tl[kh][Fh];Id.push(ah),Ph.push(m.range(hl)),Nd+=ah}for(Zl&&fh.sort(function(xg,Pf){return Zl(Id[xg],Id[Pf])}),jl&&Ph.forEach(function(xg,Pf){xg.sort(function(hg,_m){return jl(tl[Pf][hg],tl[Pf][_m])})}),Nd=(Vl-xl*hl)/Nd,ah=0,kh=-1;++kh<hl;){for(uh=ah,Fh=-1;++Fh<hl;){var hh=fh[kh],Ap=Ph[hh][Fh],nf=tl[hh][Ap],hf=ah,sf=ah+=nf*Nd;kd[hh+"-"+Ap]={index:hh,subindex:Ap,startAngle:hf,endAngle:sf,value:nf}}J[hh]={index:hh,startAngle:uh,endAngle:ah,value:Id[hh]},ah+=xl}for(kh=-1;++kh<hl;)for(Fh=kh-1;++Fh<hl;){var Af=kd[kh+"-"+Fh],Mf=kd[Fh+"-"+kh];(Af.value||Mf.value)&&G.push(Af.value<Mf.value?{source:Mf,target:Af}:{source:Af,target:Mf})}Du&&td()}function td(){G.sort(function(kd,Id){return Du((kd.source.value+kd.target.value)/2,(Id.source.value+Id.target.value)/2)})}return g.matrix=function(kd){return arguments.length?(hl=(tl=kd)&&tl.length,G=J=null,g):tl},g.padding=function(kd){return arguments.length?(xl=kd,G=J=null,g):xl},g.sortGroups=function(kd){return arguments.length?(Zl=kd,G=J=null,g):Zl},g.sortSubgroups=function(kd){return arguments.length?(jl=kd,G=null,g):jl},g.sortChords=function(kd){return arguments.length?(Du=kd,G&&td(),g):Du},g.chords=function(){return G||Qu(),G},g.groups=function(){return J||Qu(),J},g},m.layout.force=function(){var g={},G=m.dispatch("start","tick","end"),J,tl=[1,1],hl,xl,Zl=.9,jl=Oh,Du=op,Qu=-30,td=df,kd=.1,Id=.64,fh=[],Ph=[],Nd,ah,uh;function kh(hh){return function(Ap,nf,hf,sf){if(Ap.point!==hh){var Af=Ap.cx-hh.x,Mf=Ap.cy-hh.y,xg=sf-nf,Pf=Af*Af+Mf*Mf;if(xg*xg/Id<Pf){if(Pf<td){var hg=Ap.charge/Pf;hh.px-=Af*hg,hh.py-=Mf*hg}return!0}if(Ap.point&&Pf&&Pf<td){var hg=Ap.pointCharge/Pf;hh.px-=Af*hg,hh.py-=Mf*hg}}return!Ap.charge}}g.tick=function(){if((xl*=.99)<.005)return J=null,G.end({type:"end",alpha:xl=0}),!0;var hh=fh.length,Ap=Ph.length,nf,hf,sf,Af,Mf,xg,Pf,hg,_m;for(hf=0;hf<Ap;++hf)sf=Ph[hf],Af=sf.source,Mf=sf.target,hg=Mf.x-Af.x,_m=Mf.y-Af.y,(xg=hg*hg+_m*_m)&&(xg=xl*ah[hf]*((xg=Math.sqrt(xg))-Nd[hf])/xg,hg*=xg,_m*=xg,Mf.x-=hg*(Pf=Af.weight+Mf.weight?Af.weight/(Af.weight+Mf.weight):.5),Mf.y-=_m*Pf,Af.x+=hg*(Pf=1-Pf),Af.y+=_m*Pf);if((Pf=xl*kd)&&(hg=tl[0]/2,_m=tl[1]/2,hf=-1,Pf))for(;++hf<hh;)sf=fh[hf],sf.x+=(hg-sf.x)*Pf,sf.y+=(_m-sf.y)*Pf;if(Qu)for(Qh(nf=m.geom.quadtree(fh),xl,uh),hf=-1;++hf<hh;)(sf=fh[hf]).fixed||nf.visit(kh(sf));for(hf=-1;++hf<hh;)sf=fh[hf],sf.fixed?(sf.x=sf.px,sf.y=sf.py):(sf.x-=(sf.px-(sf.px=sf.x))*Zl,sf.y-=(sf.py-(sf.py=sf.y))*Zl);G.tick({type:"tick",alpha:xl})},g.nodes=function(hh){return arguments.length?(fh=hh,g):fh},g.links=function(hh){return arguments.length?(Ph=hh,g):Ph},g.size=function(hh){return arguments.length?(tl=hh,g):tl},g.linkDistance=function(hh){return arguments.length?(jl=typeof hh=="function"?hh:+hh,g):jl},g.distance=g.linkDistance,g.linkStrength=function(hh){return arguments.length?(Du=typeof hh=="function"?hh:+hh,g):Du},g.friction=function(hh){return arguments.length?(Zl=+hh,g):Zl},g.charge=function(hh){return arguments.length?(Qu=typeof hh=="function"?hh:+hh,g):Qu},g.chargeDistance=function(hh){return arguments.length?(td=hh*hh,g):Math.sqrt(td)},g.gravity=function(hh){return arguments.length?(kd=+hh,g):kd},g.theta=function(hh){return arguments.length?(Id=hh*hh,g):Math.sqrt(Id)},g.alpha=function(hh){return arguments.length?(hh=+hh,xl?hh>0?xl=hh:(J.c=null,J.t=NaN,J=null,G.end({type:"end",alpha:xl=0})):hh>0&&(G.start({type:"start",alpha:xl=hh}),J=qp(g.tick)),g):xl},g.start=function(){var hh,Ap=fh.length,nf=Ph.length,hf=tl[0],sf=tl[1],Af,Mf;for(hh=0;hh<Ap;++hh)(Mf=fh[hh]).index=hh,Mf.weight=0;for(hh=0;hh<nf;++hh)Mf=Ph[hh],typeof Mf.source=="number"&&(Mf.source=fh[Mf.source]),typeof Mf.target=="number"&&(Mf.target=fh[Mf.target]),++Mf.source.weight,++Mf.target.weight;for(hh=0;hh<Ap;++hh)Mf=fh[hh],isNaN(Mf.x)&&(Mf.x=xg("x",hf)),isNaN(Mf.y)&&(Mf.y=xg("y",sf)),isNaN(Mf.px)&&(Mf.px=Mf.x),isNaN(Mf.py)&&(Mf.py=Mf.y);if(Nd=[],typeof jl=="function")for(hh=0;hh<nf;++hh)Nd[hh]=+jl.call(this,Ph[hh],hh);else for(hh=0;hh<nf;++hh)Nd[hh]=jl;if(ah=[],typeof Du=="function")for(hh=0;hh<nf;++hh)ah[hh]=+Du.call(this,Ph[hh],hh);else for(hh=0;hh<nf;++hh)ah[hh]=Du;if(uh=[],typeof Qu=="function")for(hh=0;hh<Ap;++hh)uh[hh]=+Qu.call(this,fh[hh],hh);else for(hh=0;hh<Ap;++hh)uh[hh]=Qu;function xg(Pf,hg){if(!Af){for(Af=new Array(Ap),Dm=0;Dm<Ap;++Dm)Af[Dm]=[];for(Dm=0;Dm<nf;++Dm){var _m=Ph[Dm];Af[_m.source.index].push(_m.target),Af[_m.target.index].push(_m.source)}}for(var d0=Af[hh],Dm=-1,tf=d0.length,wg;++Dm<tf;)if(!isNaN(wg=d0[Dm][Pf]))return wg;return Math.random()*hg}return g.resume()},g.resume=function(){return g.alpha(.1)},g.stop=function(){return g.alpha(0)},g.drag=function(){if(hl||(hl=m.behavior.drag().origin(al).on("dragstart.force",zf).on("drag.force",Fh).on("dragend.force",qf)),!arguments.length)return hl;this.on("mouseover.force",Kf).on("mouseout.force",u0).call(hl)};function Fh(hh){hh.px=m.event.x,hh.py=m.event.y,g.resume()}return m.rebind(g,G,"on")};function zf(g){g.fixed|=2}function qf(g){g.fixed&=-7}function Kf(g){g.fixed|=4,g.px=g.x,g.py=g.y}function u0(g){g.fixed&=-5}function Qh(g,G,J){var tl=0,hl=0;if(g.charge=0,!g.leaf)for(var xl=g.nodes,Zl=xl.length,jl=-1,Du;++jl<Zl;)Du=xl[jl],Du!=null&&(Qh(Du,G,J),g.charge+=Du.charge,tl+=Du.charge*Du.cx,hl+=Du.charge*Du.cy);if(g.point){g.leaf||(g.point.x+=Math.random()-.5,g.point.y+=Math.random()-.5);var Qu=G*J[g.point.index];g.charge+=g.pointCharge=Qu,tl+=Qu*g.point.x,hl+=Qu*g.point.y}g.cx=tl/g.charge,g.cy=hl/g.charge}var Oh=20,op=1,df=1/0;m.layout.hierarchy=function(){var g=Pm,G=Dg,J=A0;function tl(hl){var xl=[hl],Zl=[],jl;for(hl.depth=0;(jl=xl.pop())!=null;)if(Zl.push(jl),(Qu=G.call(tl,jl,jl.depth))&&(Du=Qu.length)){for(var Du,Qu,td;--Du>=0;)xl.push(td=Qu[Du]),td.parent=jl,td.depth=jl.depth+1;J&&(jl.value=0),jl.children=Qu}else J&&(jl.value=+J.call(tl,jl,jl.depth)||0),delete jl.children;return ig(hl,function(kd){var Id,fh;g&&(Id=kd.children)&&Id.sort(g),J&&(fh=kd.parent)&&(fh.value+=kd.value)}),Zl}return tl.sort=function(hl){return arguments.length?(g=hl,tl):g},tl.children=function(hl){return arguments.length?(G=hl,tl):G},tl.value=function(hl){return arguments.length?(J=hl,tl):J},tl.revalue=function(hl){return J&&(dg(hl,function(xl){xl.children&&(xl.value=0)}),ig(hl,function(xl){var Zl;xl.children||(xl.value=+J.call(tl,xl,xl.depth)||0),(Zl=xl.parent)&&(Zl.value+=xl.value)})),hl},tl};function Yf(g,G){return m.rebind(g,G,"sort","children","value"),g.nodes=g,g.links=c1,g}function dg(g,G){for(var J=[g];(g=J.pop())!=null;)if(G(g),(hl=g.children)&&(tl=hl.length))for(var tl,hl;--tl>=0;)J.push(hl[tl])}function ig(g,G){for(var J=[g],tl=[];(g=J.pop())!=null;)if(tl.push(g),(Zl=g.children)&&(xl=Zl.length))for(var hl=-1,xl,Zl;++hl<xl;)J.push(Zl[hl]);for(;(g=tl.pop())!=null;)G(g)}function Dg(g){return g.children}function A0(g){return g.value}function Pm(g,G){return G.value-g.value}function c1(g){return m.merge(g.map(function(G){return(G.children||[]).map(function(J){return{source:G,target:J}})}))}m.layout.partition=function(){var g=m.layout.hierarchy(),G=[1,1];function J(xl,Zl,jl,Du){var Qu=xl.children;if(xl.x=Zl,xl.y=xl.depth*Du,xl.dx=jl,xl.dy=Du,Qu&&(kd=Qu.length)){var td=-1,kd,Id,fh;for(jl=xl.value?jl/xl.value:0;++td<kd;)J(Id=Qu[td],Zl,fh=Id.value*jl,Du),Zl+=fh}}function tl(xl){var Zl=xl.children,jl=0;if(Zl&&(Qu=Zl.length))for(var Du=-1,Qu;++Du<Qu;)jl=Math.max(jl,tl(Zl[Du]));return 1+jl}function hl(xl,Zl){var jl=g.call(this,xl,Zl);return J(jl[0],0,G[0],G[1]/tl(jl[0])),jl}return hl.size=function(xl){return arguments.length?(G=xl,hl):G},Yf(hl,g)},m.layout.pie=function(){var g=Number,G=Xv,J=0,tl=Vl,hl=0;function xl(Zl){var jl=Zl.length,Du=Zl.map(function(kh,Fh){return+g.call(xl,kh,Fh)}),Qu=+(typeof J=="function"?J.apply(this,arguments):J),td=(typeof tl=="function"?tl.apply(this,arguments):tl)-Qu,kd=Math.min(Math.abs(td)/jl,+(typeof hl=="function"?hl.apply(this,arguments):hl)),Id=kd*(td<0?-1:1),fh=m.sum(Du),Ph=fh?(td-jl*Id)/fh:0,Nd=m.range(jl),ah=[],uh;return G!=null&&Nd.sort(G===Xv?function(kh,Fh){return Du[Fh]-Du[kh]}:function(kh,Fh){return G(Zl[kh],Zl[Fh])}),Nd.forEach(function(kh){ah[kh]={data:Zl[kh],value:uh=Du[kh],startAngle:Qu,endAngle:Qu+=uh*Ph+Id,padAngle:kd}}),ah}return xl.value=function(Zl){return arguments.length?(g=Zl,xl):g},xl.sort=function(Zl){return arguments.length?(G=Zl,xl):G},xl.startAngle=function(Zl){return arguments.length?(J=Zl,xl):J},xl.endAngle=function(Zl){return arguments.length?(tl=Zl,xl):tl},xl.padAngle=function(Zl){return arguments.length?(hl=Zl,xl):hl},xl};var Xv={};m.layout.stack=function(){var g=al,G=k3,J=T3,tl=Qx,hl=Zx,xl=Xx;function Zl(jl,Du){if(!(Ph=jl.length))return jl;var Qu=jl.map(function(kh,Fh){return g.call(Zl,kh,Fh)}),td=Qu.map(function(kh){return kh.map(function(Fh,hh){return[hl.call(Zl,Fh,hh),xl.call(Zl,Fh,hh)]})}),kd=G.call(Zl,td,Du);Qu=m.permute(Qu,kd),td=m.permute(td,kd);var Id=J.call(Zl,td,Du),fh=Qu[0].length,Ph,Nd,ah,uh;for(ah=0;ah<fh;++ah)for(tl.call(Zl,Qu[0][ah],uh=Id[ah],td[0][ah][1]),Nd=1;Nd<Ph;++Nd)tl.call(Zl,Qu[Nd][ah],uh+=td[Nd-1][ah][1],td[Nd][ah][1]);return jl}return Zl.values=function(jl){return arguments.length?(g=jl,Zl):g},Zl.order=function(jl){return arguments.length?(G=typeof jl=="function"?jl:sx.get(jl)||k3,Zl):G},Zl.offset=function(jl){return arguments.length?(J=typeof jl=="function"?jl:Jx.get(jl)||T3,Zl):J},Zl.x=function(jl){return arguments.length?(hl=jl,Zl):hl},Zl.y=function(jl){return arguments.length?(xl=jl,Zl):xl},Zl.out=function(jl){return arguments.length?(tl=jl,Zl):tl},Zl};function Zx(g){return g.x}function Xx(g){return g.y}function Qx(g,G,J){g.y0=G,g.y=J}var sx=m.map({"inside-out":function(g){var G=g.length,J,tl,hl=g.map(ew),xl=g.map(tw),Zl=m.range(G).sort(function(kd,Id){return hl[kd]-hl[Id]}),jl=0,Du=0,Qu=[],td=[];for(J=0;J<G;++J)tl=Zl[J],jl<Du?(jl+=xl[tl],Qu.push(tl)):(Du+=xl[tl],td.push(tl));return td.reverse().concat(Qu)},reverse:function(g){return m.range(g.length).reverse()},default:k3}),Jx=m.map({silhouette:function(g){var G=g.length,J=g[0].length,tl=[],hl=0,xl,Zl,jl,Du=[];for(Zl=0;Zl<J;++Zl){for(xl=0,jl=0;xl<G;xl++)jl+=g[xl][Zl][1];jl>hl&&(hl=jl),tl.push(jl)}for(Zl=0;Zl<J;++Zl)Du[Zl]=(hl-tl[Zl])/2;return Du},wiggle:function(g){var G=g.length,J=g[0],tl=J.length,hl,xl,Zl,jl,Du,Qu,td,kd,Id,fh=[];for(fh[0]=kd=Id=0,xl=1;xl<tl;++xl){for(hl=0,jl=0;hl<G;++hl)jl+=g[hl][xl][1];for(hl=0,Du=0,td=J[xl][0]-J[xl-1][0];hl<G;++hl){for(Zl=0,Qu=(g[hl][xl][1]-g[hl][xl-1][1])/(2*td);Zl<hl;++Zl)Qu+=(g[Zl][xl][1]-g[Zl][xl-1][1])/td;Du+=Qu*g[hl][xl][1]}fh[xl]=kd-=jl?Du/jl*td:0,kd<Id&&(Id=kd)}for(xl=0;xl<tl;++xl)fh[xl]-=Id;return fh},expand:function(g){var G=g.length,J=g[0].length,tl=1/G,hl,xl,Zl,jl=[];for(xl=0;xl<J;++xl){for(hl=0,Zl=0;hl<G;hl++)Zl+=g[hl][xl][1];if(Zl)for(hl=0;hl<G;hl++)g[hl][xl][1]/=Zl;else for(hl=0;hl<G;hl++)g[hl][xl][1]=tl}for(xl=0;xl<J;++xl)jl[xl]=0;return jl},zero:T3});function k3(g){return m.range(g.length)}function T3(g){for(var G=-1,J=g[0].length,tl=[];++G<J;)tl[G]=0;return tl}function ew(g){for(var G=1,J=0,tl=g[0][1],hl,xl=g.length;G<xl;++G)(hl=g[G][1])>tl&&(J=G,tl=hl);return J}function tw(g){return g.reduce(lx,0)}function lx(g,G){return g+G[1]}m.layout.histogram=function(){var g=!0,G=Number,J=iw,tl=rw;function hl(xl,Zl){for(var jl=[],Du=xl.map(G,this),Qu=J.call(this,Du,Zl),td=tl.call(this,Qu,Du,Zl),kd,Zl=-1,Id=Du.length,fh=td.length-1,Ph=g?1:1/Id,Nd;++Zl<fh;)kd=jl[Zl]=[],kd.dx=td[Zl+1]-(kd.x=td[Zl]),kd.y=0;if(fh>0)for(Zl=-1;++Zl<Id;)Nd=Du[Zl],Nd>=Qu[0]&&Nd<=Qu[1]&&(kd=jl[m.bisect(td,Nd,1,fh)-1],kd.y+=Ph,kd.push(xl[Zl]));return jl}return hl.value=function(xl){return arguments.length?(G=xl,hl):G},hl.range=function(xl){return arguments.length?(J=Ld(xl),hl):J},hl.bins=function(xl){return arguments.length?(tl=typeof xl=="number"?function(Zl){return F3(Zl,xl)}:Ld(xl),hl):tl},hl.frequency=function(xl){return arguments.length?(g=!!xl,hl):g},hl};function rw(g,G){return F3(g,Math.ceil(Math.log(G.length)/Math.LN2+1))}function F3(g,G){for(var J=-1,tl=+g[0],hl=(g[1]-tl)/G,xl=[];++J<=G;)xl[J]=hl*J+tl;return xl}function iw(g){return[m.min(g),m.max(g)]}m.layout.pack=function(){var g=m.layout.hierarchy().sort(cx),G=0,J=[1,1],tl;function hl(xl,Zl){var jl=g.call(this,xl,Zl),Du=jl[0],Qu=J[0],td=J[1],kd=tl==null?Math.sqrt:typeof tl=="function"?tl:function(){return tl};if(Du.x=Du.y=0,ig(Du,function(fh){fh.r=+kd(fh.value)}),ig(Du,L3),G){var Id=G*(tl?1:Math.max(2*Du.r/Qu,2*Du.r/td))/2;ig(Du,function(fh){fh.r+=Id}),ig(Du,L3),ig(Du,function(fh){fh.r-=Id})}return I3(Du,Qu/2,td/2,tl?1:1/Math.max(2*Du.r/Qu,2*Du.r/td)),jl}return hl.size=function(xl){return arguments.length?(J=xl,hl):J},hl.radius=function(xl){return arguments.length?(tl=xl==null||typeof xl=="function"?xl:+xl,hl):tl},hl.padding=function(xl){return arguments.length?(G=+xl,hl):G},Yf(hl,g)};function cx(g,G){return g.value-G.value}function a3(g,G){var J=g._pack_next;g._pack_next=G,G._pack_prev=g,G._pack_next=J,J._pack_prev=G}function P3(g,G){g._pack_next=G,G._pack_prev=g}function D3(g,G){var J=G.x-g.x,tl=G.y-g.y,hl=g.r+G.r;return .999*hl*hl>J*J+tl*tl}function L3(g){if(!(G=g.children)||!(Id=G.length))return;var G,J=1/0,tl=-1/0,hl=1/0,xl=-1/0,Zl,jl,Du,Qu,td,kd,Id;function fh(hh){J=Math.min(hh.x-hh.r,J),tl=Math.max(hh.x+hh.r,tl),hl=Math.min(hh.y-hh.r,hl),xl=Math.max(hh.y+hh.r,xl)}if(G.forEach(ux),Zl=G[0],Zl.x=-Zl.r,Zl.y=0,fh(Zl),Id>1&&(jl=G[1],jl.x=jl.r,jl.y=0,fh(jl),Id>2))for(Du=G[2],O3(Zl,jl,Du),fh(Du),a3(Zl,Du),Zl._pack_prev=Du,a3(Du,jl),jl=Zl._pack_next,Qu=3;Qu<Id;Qu++){O3(Zl,jl,Du=G[Qu]);var Ph=0,Nd=1,ah=1;for(td=jl._pack_next;td!==jl;td=td._pack_next,Nd++)if(D3(td,Du)){Ph=1;break}if(Ph==1)for(kd=Zl._pack_prev;kd!==td._pack_prev&&!D3(kd,Du);kd=kd._pack_prev,ah++);Ph?(Nd<ah||Nd==ah&&jl.r<Zl.r?P3(Zl,jl=td):P3(Zl=kd,jl),Qu--):(a3(Zl,Du),jl=Du,fh(Du))}var uh=(J+tl)/2,kh=(hl+xl)/2,Fh=0;for(Qu=0;Qu<Id;Qu++)Du=G[Qu],Du.x-=uh,Du.y-=kh,Fh=Math.max(Fh,Du.r+Math.sqrt(Du.x*Du.x+Du.y*Du.y));g.r=Fh,G.forEach(nw)}function ux(g){g._pack_next=g._pack_prev=g}function nw(g){delete g._pack_next,delete g._pack_prev}function I3(g,G,J,tl){var hl=g.children;if(g.x=G+=tl*g.x,g.y=J+=tl*g.y,g.r*=tl,hl)for(var xl=-1,Zl=hl.length;++xl<Zl;)I3(hl[xl],G,J,tl)}function O3(g,G,J){var tl=g.r+J.r,hl=G.x-g.x,xl=G.y-g.y;if(tl&&(hl||xl)){var Zl=G.r+J.r,jl=hl*hl+xl*xl;Zl*=Zl,tl*=tl;var Du=.5+(tl-Zl)/(2*jl),Qu=Math.sqrt(Math.max(0,2*Zl*(tl+jl)-(tl-=jl)*tl-Zl*Zl))/(2*jl);J.x=g.x+Du*hl+Qu*xl,J.y=g.y+Du*xl-Qu*hl}else J.x=g.x+tl,J.y=g.y}m.layout.tree=function(){var g=m.layout.hierarchy().sort(null).value(null),G=dx,J=[1,1],tl=null;function hl(td,kd){var Id=g.call(this,td,kd),fh=Id[0],Ph=xl(fh);if(ig(Ph,Zl),Ph.parent.m=-Ph.z,dg(Ph,jl),tl)dg(fh,Qu);else{var Nd=fh,ah=fh,uh=fh;dg(fh,function(Ap){Ap.x<Nd.x&&(Nd=Ap),Ap.x>ah.x&&(ah=Ap),Ap.depth>uh.depth&&(uh=Ap)});var kh=G(Nd,ah)/2-Nd.x,Fh=J[0]/(ah.x+G(ah,Nd)/2+kh),hh=J[1]/(uh.depth||1);dg(fh,function(Ap){Ap.x=(Ap.x+kh)*Fh,Ap.y=Ap.depth*hh})}return Id}function xl(td){for(var kd={A:null,children:[td]},Id=[kd],fh;(fh=Id.pop())!=null;)for(var Ph=fh.children,Nd,ah=0,uh=Ph.length;ah<uh;++ah)Id.push((Ph[ah]=Nd={_:Ph[ah],parent:fh,children:(Nd=Ph[ah].children)&&Nd.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:ah}).a=Nd);return kd.children[0]}function Zl(td){var kd=td.children,Id=td.parent.children,fh=td.i?Id[td.i-1]:null;if(kd.length){z3(td);var Ph=(kd[0].z+kd[kd.length-1].z)/2;fh?(td.z=fh.z+G(td._,fh._),td.m=td.z-Ph):td.z=Ph}else fh&&(td.z=fh.z+G(td._,fh._));td.parent.A=Du(td,fh,td.parent.A||Id[0])}function jl(td){td._.x=td.z+td.parent.m,td.m+=td.parent.m}function Du(td,kd,Id){if(kd){for(var fh=td,Ph=td,Nd=kd,ah=fh.parent.children[0],uh=fh.m,kh=Ph.m,Fh=Nd.m,hh=ah.m,Ap;Nd=l3(Nd),fh=s3(fh),Nd&&fh;)ah=s3(ah),Ph=l3(Ph),Ph.a=td,Ap=Nd.z+Fh-fh.z-uh+G(Nd._,fh._),Ap>0&&(hx(ow(Nd,td,Id),td,Ap),uh+=Ap,kh+=Ap),Fh+=Nd.m,uh+=fh.m,hh+=ah.m,kh+=Ph.m;Nd&&!l3(Ph)&&(Ph.t=Nd,Ph.m+=Fh-kh),fh&&!s3(ah)&&(ah.t=fh,ah.m+=uh-hh,Id=td)}return Id}function Qu(td){td.x*=J[0],td.y=td.depth*J[1]}return hl.separation=function(td){return arguments.length?(G=td,hl):G},hl.size=function(td){return arguments.length?(tl=(J=td)==null?Qu:null,hl):tl?null:J},hl.nodeSize=function(td){return arguments.length?(tl=(J=td)==null?null:Qu,hl):tl?J:null},Yf(hl,g)};function dx(g,G){return g.parent==G.parent?1:2}function s3(g){var G=g.children;return G.length?G[0]:g.t}function l3(g){var G=g.children,J;return(J=G.length)?G[J-1]:g.t}function hx(g,G,J){var tl=J/(G.i-g.i);G.c-=tl,G.s+=J,g.c+=tl,G.z+=J,G.m+=J}function z3(g){for(var G=0,J=0,tl=g.children,hl=tl.length,xl;--hl>=0;)xl=tl[hl],xl.z+=G,xl.m+=G,G+=xl.s+(J+=xl.c)}function ow(g,G,J){return g.a.parent===G.parent?g.a:J}m.layout.cluster=function(){var g=m.layout.hierarchy().sort(null).value(null),G=dx,J=[1,1],tl=!1;function hl(xl,Zl){var jl=g.call(this,xl,Zl),Du=jl[0],Qu,td=0;ig(Du,function(Nd){var ah=Nd.children;ah&&ah.length?(Nd.x=px(ah),Nd.y=aw(ah)):(Nd.x=Qu?td+=G(Nd,Qu):0,Nd.y=0,Qu=Nd)});var kd=fx(Du),Id=N3(Du),fh=kd.x-G(kd,Id)/2,Ph=Id.x+G(Id,kd)/2;return ig(Du,tl?function(Nd){Nd.x=(Nd.x-Du.x)*J[0],Nd.y=(Du.y-Nd.y)*J[1]}:function(Nd){Nd.x=(Nd.x-fh)/(Ph-fh)*J[0],Nd.y=(1-(Du.y?Nd.y/Du.y:1))*J[1]}),jl}return hl.separation=function(xl){return arguments.length?(G=xl,hl):G},hl.size=function(xl){return arguments.length?(tl=(J=xl)==null,hl):tl?null:J},hl.nodeSize=function(xl){return arguments.length?(tl=(J=xl)!=null,hl):tl?J:null},Yf(hl,g)};function aw(g){return 1+m.max(g,function(G){return G.y})}function px(g){return g.reduce(function(G,J){return G+J.x},0)/g.length}function fx(g){var G=g.children;return G&&G.length?fx(G[0]):g}function N3(g){var G=g.children,J;return G&&(J=G.length)?N3(G[J-1]):g}m.layout.treemap=function(){var g=m.layout.hierarchy(),G=Math.round,J=[1,1],tl=null,hl=c3,xl=!1,Zl,jl="squarify",Du=.5*(1+Math.sqrt(5));function Qu(Nd,ah){for(var uh=-1,kh=Nd.length,Fh,hh;++uh<kh;)hh=(Fh=Nd[uh]).value*(ah<0?0:ah),Fh.area=isNaN(hh)||hh<=0?0:hh}function td(Nd){var ah=Nd.children;if(ah&&ah.length){var uh=hl(Nd),kh=[],Fh=ah.slice(),hh,Ap=1/0,nf,hf=jl==="slice"?uh.dx:jl==="dice"?uh.dy:jl==="slice-dice"?Nd.depth&1?uh.dy:uh.dx:Math.min(uh.dx,uh.dy),sf;for(Qu(Fh,uh.dx*uh.dy/Nd.value),kh.area=0;(sf=Fh.length)>0;)kh.push(hh=Fh[sf-1]),kh.area+=hh.area,jl!=="squarify"||(nf=Id(kh,hf))<=Ap?(Fh.pop(),Ap=nf):(kh.area-=kh.pop().area,fh(kh,hf,uh,!1),hf=Math.min(uh.dx,uh.dy),kh.length=kh.area=0,Ap=1/0);kh.length&&(fh(kh,hf,uh,!0),kh.length=kh.area=0),ah.forEach(td)}}function kd(Nd){var ah=Nd.children;if(ah&&ah.length){var uh=hl(Nd),kh=ah.slice(),Fh,hh=[];for(Qu(kh,uh.dx*uh.dy/Nd.value),hh.area=0;Fh=kh.pop();)hh.push(Fh),hh.area+=Fh.area,Fh.z!=null&&(fh(hh,Fh.z?uh.dx:uh.dy,uh,!kh.length),hh.length=hh.area=0);ah.forEach(kd)}}function Id(Nd,ah){for(var uh=Nd.area,kh,Fh=0,hh=1/0,Ap=-1,nf=Nd.length;++Ap<nf;)(kh=Nd[Ap].area)&&(kh<hh&&(hh=kh),kh>Fh&&(Fh=kh));return uh*=uh,ah*=ah,uh?Math.max(ah*Fh*Du/uh,uh/(ah*hh*Du)):1/0}function fh(Nd,ah,uh,kh){var Fh=-1,hh=Nd.length,Ap=uh.x,nf=uh.y,hf=ah?G(Nd.area/ah):0,sf;if(ah==uh.dx){for((kh||hf>uh.dy)&&(hf=uh.dy);++Fh<hh;)sf=Nd[Fh],sf.x=Ap,sf.y=nf,sf.dy=hf,Ap+=sf.dx=Math.min(uh.x+uh.dx-Ap,hf?G(sf.area/hf):0);sf.z=!0,sf.dx+=uh.x+uh.dx-Ap,uh.y+=hf,uh.dy-=hf}else{for((kh||hf>uh.dx)&&(hf=uh.dx);++Fh<hh;)sf=Nd[Fh],sf.x=Ap,sf.y=nf,sf.dx=hf,nf+=sf.dy=Math.min(uh.y+uh.dy-nf,hf?G(sf.area/hf):0);sf.z=!1,sf.dy+=uh.y+uh.dy-nf,uh.x+=hf,uh.dx-=hf}}function Ph(Nd){var ah=Zl||g(Nd),uh=ah[0];return uh.x=uh.y=0,uh.value?(uh.dx=J[0],uh.dy=J[1]):uh.dx=uh.dy=0,Zl&&g.revalue(uh),Qu([uh],uh.dx*uh.dy/uh.value),(Zl?kd:td)(uh),xl&&(Zl=ah),ah}return Ph.size=function(Nd){return arguments.length?(J=Nd,Ph):J},Ph.padding=function(Nd){if(!arguments.length)return tl;function ah(Fh){var hh=Nd.call(Ph,Fh,Fh.depth);return hh==null?c3(Fh):Z0(Fh,typeof hh=="number"?[hh,hh,hh,hh]:hh)}function uh(Fh){return Z0(Fh,Nd)}var kh;return hl=(tl=Nd)==null?c3:(kh=typeof Nd)=="function"?ah:(kh==="number"&&(Nd=[Nd,Nd,Nd,Nd]),uh),Ph},Ph.round=function(Nd){return arguments.length?(G=Nd?Math.round:Number,Ph):G!=Number},Ph.sticky=function(Nd){return arguments.length?(xl=Nd,Zl=null,Ph):xl},Ph.ratio=function(Nd){return arguments.length?(Du=Nd,Ph):Du},Ph.mode=function(Nd){return arguments.length?(jl=Nd+"",Ph):jl},Yf(Ph,g)};function c3(g){return{x:g.x,y:g.y,dx:g.dx,dy:g.dy}}function Z0(g,G){var J=g.x+G[3],tl=g.y+G[0],hl=g.dx-G[1]-G[3],xl=g.dy-G[0]-G[2];return hl<0&&(J+=hl/2,hl=0),xl<0&&(tl+=xl/2,xl=0),{x:J,y:tl,dx:hl,dy:xl}}m.random={normal:function(g,G){var J=arguments.length;return J<2&&(G=1),J<1&&(g=0),function(){var tl,hl,xl;do tl=Math.random()*2-1,hl=Math.random()*2-1,xl=tl*tl+hl*hl;while(!xl||xl>1);return g+G*tl*Math.sqrt(-2*Math.log(xl)/xl)}},logNormal:function(){var g=m.random.normal.apply(m,arguments);return function(){return Math.exp(g())}},bates:function(g){var G=m.random.irwinHall(g);return function(){return G()/g}},irwinHall:function(g){return function(){for(var G=0,J=0;J<g;J++)G+=Math.random();return G}}},m.scale={};function O2(g){var G=g[0],J=g[g.length-1];return G<J?[G,J]:[J,G]}function c2(g){return g.rangeExtent?g.rangeExtent():O2(g.range())}function sw(g,G,J,tl){var hl=J(g[0],g[1]),xl=tl(G[0],G[1]);return function(Zl){return xl(hl(Zl))}}function u3(g,G){var J=0,tl=g.length-1,hl=g[J],xl=g[tl],Zl;return xl<hl&&(Zl=J,J=tl,tl=Zl,Zl=hl,hl=xl,xl=Zl),g[J]=G.floor(hl),g[tl]=G.ceil(xl),g}function gx(g){return g?{floor:function(G){return Math.floor(G/g)*g},ceil:function(G){return Math.ceil(G/g)*g}}:lw}var lw={floor:al,ceil:al};function cw(g,G,J,tl){var hl=[],xl=[],Zl=0,jl=Math.min(g.length,G.length)-1;for(g[jl]<g[0]&&(g=g.slice().reverse(),G=G.slice().reverse());++Zl<=jl;)hl.push(J(g[Zl-1],g[Zl])),xl.push(tl(G[Zl-1],G[Zl]));return function(Du){var Qu=m.bisect(g,Du,1,jl)-1;return xl[Qu](hl[Qu](Du))}}m.scale.linear=function(){return mx([0,1],[0,1],K0,!1)};function mx(g,G,J,tl){var hl,xl;function Zl(){var Du=Math.min(g.length,G.length)>2?cw:sw,Qu=tl?lp:_h;return hl=Du(g,G,Qu,J),xl=Du(G,g,Qu,K0),jl}function jl(Du){return hl(Du)}return jl.invert=function(Du){return xl(Du)},jl.domain=function(Du){return arguments.length?(g=Du.map(Number),Zl()):g},jl.range=function(Du){return arguments.length?(G=Du,Zl()):G},jl.rangeRound=function(Du){return jl.range(Du).interpolate(Ry)},jl.clamp=function(Du){return arguments.length?(tl=Du,Zl()):tl},jl.interpolate=function(Du){return arguments.length?(J=Du,Zl()):J},jl.ticks=function(Du){return H3(g,Du)},jl.tickFormat=function(Du,Qu){return d3_scale_linearTickFormat(g,Du,Qu)},jl.nice=function(Du){return yx(g,Du),Zl()},jl.copy=function(){return mx(g,G,J,tl)},Zl()}function vx(g,G){return m.rebind(g,G,"range","rangeRound","interpolate","clamp")}function yx(g,G){return u3(g,gx(B3(g,G)[2])),u3(g,gx(B3(g,G)[2])),g}function B3(g,G){G==null&&(G=10);var J=O2(g),tl=J[1]-J[0],hl=Math.pow(10,Math.floor(Math.log(tl/G)/Math.LN10)),xl=G/tl*hl;return xl<=.15?hl*=10:xl<=.35?hl*=5:xl<=.75&&(hl*=2),J[0]=Math.ceil(J[0]/hl)*hl,J[1]=Math.floor(J[1]/hl)*hl+hl*.5,J[2]=hl,J}function H3(g,G){return m.range.apply(m,B3(g,G))}m.scale.log=function(){return xx(m.scale.linear().domain([0,1]),10,!0,[1,10])};function xx(g,G,J,tl){function hl(jl){return(J?Math.log(jl<0?0:jl):-Math.log(jl>0?0:-jl))/Math.log(G)}function xl(jl){return J?Math.pow(G,jl):-Math.pow(G,-jl)}function Zl(jl){return g(hl(jl))}return Zl.invert=function(jl){return xl(g.invert(jl))},Zl.domain=function(jl){return arguments.length?(J=jl[0]>=0,g.domain((tl=jl.map(Number)).map(hl)),Zl):tl},Zl.base=function(jl){return arguments.length?(G=+jl,g.domain(tl.map(hl)),Zl):G},Zl.nice=function(){var jl=u3(tl.map(hl),J?Math:uw);return g.domain(jl),tl=jl.map(xl),Zl},Zl.ticks=function(){var jl=O2(tl),Du=[],Qu=jl[0],td=jl[1],kd=Math.floor(hl(Qu)),Id=Math.ceil(hl(td)),fh=G%1?2:G;if(isFinite(Id-kd)){if(J){for(;kd<Id;kd++)for(var Ph=1;Ph<fh;Ph++)Du.push(xl(kd)*Ph);Du.push(xl(kd))}else for(Du.push(xl(kd));kd++<Id;)for(var Ph=fh-1;Ph>0;Ph--)Du.push(xl(kd)*Ph);for(kd=0;Du[kd]<Qu;kd++);for(Id=Du.length;Du[Id-1]>td;Id--);Du=Du.slice(kd,Id)}return Du},Zl.copy=function(){return xx(g.copy(),G,J,tl)},vx(Zl,g)}var uw={floor:function(g){return-Math.ceil(-g)},ceil:function(g){return-Math.floor(-g)}};m.scale.pow=function(){return G3(m.scale.linear(),1,[0,1])};function G3(g,G,J){var tl=d3(G),hl=d3(1/G);function xl(Zl){return g(tl(Zl))}return xl.invert=function(Zl){return hl(g.invert(Zl))},xl.domain=function(Zl){return arguments.length?(g.domain((J=Zl.map(Number)).map(tl)),xl):J},xl.ticks=function(Zl){return H3(J,Zl)},xl.tickFormat=function(Zl,jl){return d3_scale_linearTickFormat(J,Zl,jl)},xl.nice=function(Zl){return xl.domain(yx(J,Zl))},xl.exponent=function(Zl){return arguments.length?(tl=d3(G=Zl),hl=d3(1/G),g.domain(J.map(tl)),xl):G},xl.copy=function(){return G3(g.copy(),G,J)},vx(xl,g)}function d3(g){return function(G){return G<0?-Math.pow(-G,g):Math.pow(G,g)}}m.scale.sqrt=function(){return m.scale.pow().exponent(.5)},m.scale.ordinal=function(){return wx([],{t:"range",a:[[]]})};function wx(g,G){var J,tl,hl;function xl(jl){return tl[((J.get(jl)||(G.t==="range"?J.set(jl,g.push(jl)):NaN))-1)%tl.length]}function Zl(jl,Du){return m.range(g.length).map(function(Qu){return jl+Du*Qu})}return xl.domain=function(jl){if(!arguments.length)return g;g=[],J=new j;for(var Du=-1,Qu=jl.length,td;++Du<Qu;)J.has(td=jl[Du])||J.set(td,g.push(td));return xl[G.t].apply(xl,G.a)},xl.range=function(jl){return arguments.length?(tl=jl,hl=0,G={t:"range",a:arguments},xl):tl},xl.rangePoints=function(jl,Du){arguments.length<2&&(Du=0);var Qu=jl[0],td=jl[1],kd=g.length<2?(Qu=(Qu+td)/2,0):(td-Qu)/(g.length-1+Du);return tl=Zl(Qu+kd*Du/2,kd),hl=0,G={t:"rangePoints",a:arguments},xl},xl.rangeRoundPoints=function(jl,Du){arguments.length<2&&(Du=0);var Qu=jl[0],td=jl[1],kd=g.length<2?(Qu=td=Math.round((Qu+td)/2),0):(td-Qu)/(g.length-1+Du)|0;return tl=Zl(Qu+Math.round(kd*Du/2+(td-Qu-(g.length-1+Du)*kd)/2),kd),hl=0,G={t:"rangeRoundPoints",a:arguments},xl},xl.rangeBands=function(jl,Du,Qu){arguments.length<2&&(Du=0),arguments.length<3&&(Qu=Du);var td=jl[1]<jl[0],kd=jl[td-0],Id=jl[1-td],fh=(Id-kd)/(g.length-Du+2*Qu);return tl=Zl(kd+fh*Qu,fh),td&&tl.reverse(),hl=fh*(1-Du),G={t:"rangeBands",a:arguments},xl},xl.rangeRoundBands=function(jl,Du,Qu){arguments.length<2&&(Du=0),arguments.length<3&&(Qu=Du);var td=jl[1]<jl[0],kd=jl[td-0],Id=jl[1-td],fh=Math.floor((Id-kd)/(g.length-Du+2*Qu));return tl=Zl(kd+Math.round((Id-kd-(g.length-Du)*fh)/2),fh),td&&tl.reverse(),hl=Math.round(fh*(1-Du)),G={t:"rangeRoundBands",a:arguments},xl},xl.rangeBand=function(){return hl},xl.rangeExtent=function(){return O2(G.a[0])},xl.copy=function(){return wx(g,G)},xl.domain(g)}m.scale.category10=function(){return m.scale.ordinal().range(dw)},m.scale.category20=function(){return m.scale.ordinal().range(Cx)},m.scale.category20b=function(){return m.scale.ordinal().range(bx)},m.scale.category20c=function(){return m.scale.ordinal().range(hw)};var dw=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(wl),Cx=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(wl),bx=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(wl),hw=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(wl);m.scale.quantile=function(){return V3([],[])};function V3(g,G){var J;function tl(){var xl=0,Zl=G.length;for(J=[];++xl<Zl;)J[xl-1]=m.quantile(g,xl/Zl);return hl}function hl(xl){if(!isNaN(xl=+xl))return G[m.bisect(J,xl)]}return hl.domain=function(xl){return arguments.length?(g=xl.map(B).filter(O).sort(R),tl()):g},hl.range=function(xl){return arguments.length?(G=xl,tl()):G},hl.quantiles=function(){return J},hl.invertExtent=function(xl){return xl=G.indexOf(xl),xl<0?[NaN,NaN]:[xl>0?J[xl-1]:g[0],xl<J.length?J[xl]:g[g.length-1]]},hl.copy=function(){return V3(g,G)},tl()}m.scale.quantize=function(){return j3(0,1,[0,1])};function j3(g,G,J){var tl,hl;function xl(jl){return J[Math.max(0,Math.min(hl,Math.floor(tl*(jl-g))))]}function Zl(){return tl=J.length/(G-g),hl=J.length-1,xl}return xl.domain=function(jl){return arguments.length?(g=+jl[0],G=+jl[jl.length-1],Zl()):[g,G]},xl.range=function(jl){return arguments.length?(J=jl,Zl()):J},xl.invertExtent=function(jl){return jl=J.indexOf(jl),jl=jl<0?NaN:jl/tl+g,[jl,jl+1/tl]},xl.copy=function(){return j3(g,G,J)},Zl()}m.scale.threshold=function(){return U3([.5],[0,1])};function U3(g,G){function J(tl){if(tl<=tl)return G[m.bisect(g,tl)]}return J.domain=function(tl){return arguments.length?(g=tl,J):g},J.range=function(tl){return arguments.length?(G=tl,J):G},J.invertExtent=function(tl){return tl=G.indexOf(tl),[g[tl-1],g[tl]]},J.copy=function(){return U3(g,G)},J}m.scale.identity=function(){return W3([0,1])};function W3(g){function G(J){return+J}return G.invert=G,G.domain=G.range=function(J){return arguments.length?(g=J.map(G),G):g},G.ticks=function(J){return H3(g,J)},G.tickFormat=function(J,tl){return d3_scale_linearTickFormat(g,J,tl)},G.copy=function(){return W3(g)},G}m.svg={};function Sx(){return 0}m.svg.arc=function(){var g=_x,G=Ex,J=Sx,tl=h3,hl=p3,xl=$3,Zl=pw;function jl(){var Qu=Math.max(0,+g.apply(this,arguments)),td=Math.max(0,+G.apply(this,arguments)),kd=hl.apply(this,arguments)-Nu,Id=xl.apply(this,arguments)-Nu,fh=Math.abs(Id-kd),Ph=kd>Id?0:1;if(td<Qu&&(Nd=td,td=Qu,Qu=Nd),fh>=Mu)return Du(td,Ph)+(Qu?Du(Qu,1-Ph):"")+"Z";var Nd,ah,uh,kh,Fh=0,hh=0,Ap,nf,hf,sf,Af,Mf,xg,Pf,hg=[];if((kh=(+Zl.apply(this,arguments)||0)/2)&&(uh=tl===h3?Math.sqrt(Qu*Qu+td*td):+tl.apply(this,arguments),Ph||(hh*=-1),td&&(hh=yd(uh/td*Math.sin(kh))),Qu&&(Fh=yd(uh/Qu*Math.sin(kh)))),td){Ap=td*Math.cos(kd+hh),nf=td*Math.sin(kd+hh),hf=td*Math.cos(Id-hh),sf=td*Math.sin(Id-hh);var _m=Math.abs(Id-kd-2*hh)<=Dl?0:1;if(hh&&z2(Ap,nf,hf,sf)===Ph^_m){var d0=(kd+Id)/2;Ap=td*Math.cos(d0),nf=td*Math.sin(d0),hf=sf=null}}else Ap=nf=0;if(Qu){Af=Qu*Math.cos(Id-Fh),Mf=Qu*Math.sin(Id-Fh),xg=Qu*Math.cos(kd+Fh),Pf=Qu*Math.sin(kd+Fh);var Dm=Math.abs(kd-Id+2*Fh)<=Dl?0:1;if(Fh&&z2(Af,Mf,xg,Pf)===1-Ph^Dm){var tf=(kd+Id)/2;Af=Qu*Math.cos(tf),Mf=Qu*Math.sin(tf),xg=Pf=null}}else Af=Mf=0;if(fh>Ku&&(Nd=Math.min(Math.abs(td-Qu)/2,+J.apply(this,arguments)))>.001){ah=Qu<td^Ph?0:1;var wg=Nd,Fg=Nd;if(fh<Dl){var Em=xg==null?[Af,Mf]:hf==null?[Ap,nf]:Wf([Ap,nf],[xg,Pf],[hf,sf],[Af,Mf]),s0=Ap-Em[0],b0=nf-Em[1],z0=hf-Em[0],X0=sf-Em[1],iv=1/Math.sin(Math.acos((s0*z0+b0*X0)/(Math.sqrt(s0*s0+b0*b0)*Math.sqrt(z0*z0+X0*X0)))/2),V0=Math.sqrt(Em[0]*Em[0]+Em[1]*Em[1]);Fg=Math.min(Nd,(Qu-V0)/(iv-1)),wg=Math.min(Nd,(td-V0)/(iv+1))}if(hf!=null){var hv=u2(xg==null?[Af,Mf]:[xg,Pf],[Ap,nf],td,wg,Ph),N0=u2([hf,sf],[Af,Mf],td,wg,Ph);Nd===wg?hg.push("M",hv[0],"A",wg,",",wg," 0 0,",ah," ",hv[1],"A",td,",",td," 0 ",1-Ph^z2(hv[1][0],hv[1][1],N0[1][0],N0[1][1]),",",Ph," ",N0[1],"A",wg,",",wg," 0 0,",ah," ",N0[0]):hg.push("M",hv[0],"A",wg,",",wg," 0 1,",ah," ",N0[0])}else hg.push("M",Ap,",",nf);if(xg!=null){var pv=u2([Ap,nf],[xg,Pf],Qu,-Fg,Ph),Fy=u2([Af,Mf],hf==null?[Ap,nf]:[hf,sf],Qu,-Fg,Ph);Nd===Fg?hg.push("L",Fy[0],"A",Fg,",",Fg," 0 0,",ah," ",Fy[1],"A",Qu,",",Qu," 0 ",Ph^z2(Fy[1][0],Fy[1][1],pv[1][0],pv[1][1]),",",1-Ph," ",pv[1],"A",Fg,",",Fg," 0 0,",ah," ",pv[0]):hg.push("L",Fy[0],"A",Fg,",",Fg," 0 0,",ah," ",pv[0])}else hg.push("L",Af,",",Mf)}else hg.push("M",Ap,",",nf),hf!=null&&hg.push("A",td,",",td," 0 ",_m,",",Ph," ",hf,",",sf),hg.push("L",Af,",",Mf),xg!=null&&hg.push("A",Qu,",",Qu," 0 ",Dm,",",1-Ph," ",xg,",",Pf);return hg.push("Z"),hg.join("")}function Du(Qu,td){return"M0,"+Qu+"A"+Qu+","+Qu+" 0 1,"+td+" 0,"+-Qu+"A"+Qu+","+Qu+" 0 1,"+td+" 0,"+Qu}return jl.innerRadius=function(Qu){return arguments.length?(g=Ld(Qu),jl):g},jl.outerRadius=function(Qu){return arguments.length?(G=Ld(Qu),jl):G},jl.cornerRadius=function(Qu){return arguments.length?(J=Ld(Qu),jl):J},jl.padRadius=function(Qu){return arguments.length?(tl=Qu==h3?h3:Ld(Qu),jl):tl},jl.startAngle=function(Qu){return arguments.length?(hl=Ld(Qu),jl):hl},jl.endAngle=function(Qu){return arguments.length?(xl=Ld(Qu),jl):xl},jl.padAngle=function(Qu){return arguments.length?(Zl=Ld(Qu),jl):Zl},jl.centroid=function(){var Qu=(+g.apply(this,arguments)+ +G.apply(this,arguments))/2,td=(+hl.apply(this,arguments)+ +xl.apply(this,arguments))/2-Nu;return[Math.cos(td)*Qu,Math.sin(td)*Qu]},jl};var h3="auto";function _x(g){return g.innerRadius}function Ex(g){return g.outerRadius}function p3(g){return g.startAngle}function $3(g){return g.endAngle}function pw(g){return g&&g.padAngle}function z2(g,G,J,tl){return(g-J)*G-(G-tl)*g>0?0:1}function u2(g,G,J,tl,hl){var xl=g[0]-G[0],Zl=g[1]-G[1],jl=(hl?tl:-tl)/Math.sqrt(xl*xl+Zl*Zl),Du=jl*Zl,Qu=-jl*xl,td=g[0]+Du,kd=g[1]+Qu,Id=G[0]+Du,fh=G[1]+Qu,Ph=(td+Id)/2,Nd=(kd+fh)/2,ah=Id-td,uh=fh-kd,kh=ah*ah+uh*uh,Fh=J-tl,hh=td*fh-Id*kd,Ap=(uh<0?-1:1)*Math.sqrt(Math.max(0,Fh*Fh*kh-hh*hh)),nf=(hh*uh-ah*Ap)/kh,hf=(-hh*ah-uh*Ap)/kh,sf=(hh*uh+ah*Ap)/kh,Af=(-hh*ah+uh*Ap)/kh,Mf=nf-Ph,xg=hf-Nd,Pf=sf-Ph,hg=Af-Nd;return Mf*Mf+xg*xg>Pf*Pf+hg*hg&&(nf=sf,hf=Af),[[nf-Du,hf-Qu],[nf*J/Fh,hf*J/Fh]]}function Ax(){return!0}function Mx(g){var G=yg,J=pm,tl=Ax,hl=Qv,xl=hl.key,Zl=.7;function jl(Du){var Qu=[],td=[],kd=-1,Id=Du.length,fh,Ph=Ld(G),Nd=Ld(J);function ah(){Qu.push("M",hl(g(td),Zl))}for(;++kd<Id;)tl.call(this,fh=Du[kd],kd)?td.push([+Ph.call(this,fh,kd),+Nd.call(this,fh,kd)]):td.length&&(ah(),td=[]);return td.length&&ah(),Qu.length?Qu.join(""):null}return jl.x=function(Du){return arguments.length?(G=Du,jl):G},jl.y=function(Du){return arguments.length?(J=Du,jl):J},jl.defined=function(Du){return arguments.length?(tl=Du,jl):tl},jl.interpolate=function(Du){return arguments.length?(typeof Du=="function"?xl=hl=Du:xl=(hl=q3.get(Du)||Qv).key,jl):xl},jl.tension=function(Du){return arguments.length?(Zl=Du,jl):Zl},jl}m.svg.line=function(){return Mx(al)};var q3=m.map({linear:Qv,"linear-closed":Rx,step:fw,"step-before":Y3,"step-after":K3,basis:kx,"basis-open":yw,"basis-closed":xw,bundle:ww,cardinal:vw,"cardinal-open":gw,"cardinal-closed":mw,monotone:Sw});q3.forEach(function(g,G){G.key=g,G.closed=/-closed$/.test(g)});function Qv(g){return g.length>1?g.join("L"):g+"Z"}function Rx(g){return g.join("L")+"Z"}function fw(g){for(var G=0,J=g.length,tl=g[0],hl=[tl[0],",",tl[1]];++G<J;)hl.push("H",(tl[0]+(tl=g[G])[0])/2,"V",tl[1]);return J>1&&hl.push("H",tl[0]),hl.join("")}function Y3(g){for(var G=0,J=g.length,tl=g[0],hl=[tl[0],",",tl[1]];++G<J;)hl.push("V",(tl=g[G])[1],"H",tl[0]);return hl.join("")}function K3(g){for(var G=0,J=g.length,tl=g[0],hl=[tl[0],",",tl[1]];++G<J;)hl.push("H",(tl=g[G])[0],"V",tl[1]);return hl.join("")}function gw(g,G){return g.length<4?Qv(g):g[1]+f3(g.slice(1,-1),Z3(g,G))}function mw(g,G){return g.length<3?Rx(g):g[0]+f3((g.push(g[0]),g),Z3([g[g.length-2]].concat(g,[g[1]]),G))}function vw(g,G){return g.length<3?Qv(g):g[0]+f3(g,Z3(g,G))}function f3(g,G){if(G.length<1||g.length!=G.length&&g.length!=G.length+2)return Qv(g);var J=g.length!=G.length,tl="",hl=g[0],xl=g[1],Zl=G[0],jl=Zl,Du=1;if(J&&(tl+="Q"+(xl[0]-Zl[0]*2/3)+","+(xl[1]-Zl[1]*2/3)+","+xl[0]+","+xl[1],hl=g[1],Du=2),G.length>1){jl=G[1],xl=g[Du],Du++,tl+="C"+(hl[0]+Zl[0])+","+(hl[1]+Zl[1])+","+(xl[0]-jl[0])+","+(xl[1]-jl[1])+","+xl[0]+","+xl[1];for(var Qu=2;Qu<G.length;Qu++,Du++)xl=g[Du],jl=G[Qu],tl+="S"+(xl[0]-jl[0])+","+(xl[1]-jl[1])+","+xl[0]+","+xl[1]}if(J){var td=g[Du];tl+="Q"+(xl[0]+jl[0]*2/3)+","+(xl[1]+jl[1]*2/3)+","+td[0]+","+td[1]}return tl}function Z3(g,G){for(var J=[],tl=(1-G)/2,hl,xl=g[0],Zl=g[1],jl=1,Du=g.length;++jl<Du;)hl=xl,xl=Zl,Zl=g[jl],J.push([tl*(Zl[0]-hl[0]),tl*(Zl[1]-hl[1])]);return J}function kx(g){if(g.length<3)return Qv(g);var G=1,J=g.length,tl=g[0],hl=tl[0],xl=tl[1],Zl=[hl,hl,hl,(tl=g[1])[0]],jl=[xl,xl,xl,tl[1]],Du=[hl,",",xl,"L",Dv(j1,Zl),",",Dv(j1,jl)];for(g.push(g[J-1]);++G<=J;)tl=g[G],Zl.shift(),Zl.push(tl[0]),jl.shift(),jl.push(tl[1]),X3(Du,Zl,jl);return g.pop(),Du.push("L",tl),Du.join("")}function yw(g){if(g.length<4)return Qv(g);for(var G=[],J=-1,tl=g.length,hl,xl=[0],Zl=[0];++J<3;)hl=g[J],xl.push(hl[0]),Zl.push(hl[1]);for(G.push(Dv(j1,xl)+","+Dv(j1,Zl)),--J;++J<tl;)hl=g[J],xl.shift(),xl.push(hl[0]),Zl.shift(),Zl.push(hl[1]),X3(G,xl,Zl);return G.join("")}function xw(g){for(var G,J=-1,tl=g.length,hl=tl+4,xl,Zl=[],jl=[];++J<4;)xl=g[J%tl],Zl.push(xl[0]),jl.push(xl[1]);for(G=[Dv(j1,Zl),",",Dv(j1,jl)],--J;++J<hl;)xl=g[J%tl],Zl.shift(),Zl.push(xl[0]),jl.shift(),jl.push(xl[1]),X3(G,Zl,jl);return G.join("")}function ww(g,G){var J=g.length-1;if(J)for(var tl=g[0][0],hl=g[0][1],xl=g[J][0]-tl,Zl=g[J][1]-hl,jl=-1,Du,Qu;++jl<=J;)Du=g[jl],Qu=jl/J,Du[0]=G*Du[0]+(1-G)*(tl+Qu*xl),Du[1]=G*Du[1]+(1-G)*(hl+Qu*Zl);return kx(g)}function Dv(g,G){return g[0]*G[0]+g[1]*G[1]+g[2]*G[2]+g[3]*G[3]}var Tx=[0,2/3,1/3,0],Fx=[0,1/3,2/3,0],j1=[0,1/6,2/3,1/6];function X3(g,G,J){g.push("C",Dv(Tx,G),",",Dv(Tx,J),",",Dv(Fx,G),",",Dv(Fx,J),",",Dv(j1,G),",",Dv(j1,J))}function Q3(g,G){return(G[1]-g[1])/(G[0]-g[0])}function Cw(g){for(var G=0,J=g.length-1,tl=[],hl=g[0],xl=g[1],Zl=tl[0]=Q3(hl,xl);++G<J;)tl[G]=(Zl+(Zl=Q3(hl=xl,xl=g[G+1])))/2;return tl[G]=Zl,tl}function bw(g){for(var G=[],J,tl,hl,xl,Zl=Cw(g),jl=-1,Du=g.length-1;++jl<Du;)J=Q3(g[jl],g[jl+1]),C(J)<Ku?Zl[jl]=Zl[jl+1]=0:(tl=Zl[jl]/J,hl=Zl[jl+1]/J,xl=tl*tl+hl*hl,xl>9&&(xl=J*3/Math.sqrt(xl),Zl[jl]=xl*tl,Zl[jl+1]=xl*hl));for(jl=-1;++jl<=Du;)xl=(g[Math.min(Du,jl+1)][0]-g[Math.max(0,jl-1)][0])/(6*(1+Zl[jl]*Zl[jl])),G.push([xl||0,Zl[jl]*xl||0]);return G}function Sw(g){return g.length<3?Qv(g):g[0]+f3(g,bw(g))}m.svg.line.radial=function(){var g=Mx(Px);return g.radius=g.x,delete g.x,g.angle=g.y,delete g.y,g};function Px(g){for(var G,J=-1,tl=g.length,hl,xl;++J<tl;)G=g[J],hl=G[0],xl=G[1]-Nu,G[0]=hl*Math.cos(xl),G[1]=hl*Math.sin(xl);return g}function Dx(g){var G=yg,J=yg,tl=0,hl=pm,xl=Ax,Zl=Qv,jl=Zl.key,Du=Zl,Qu="L",td=.7;function kd(Id){var fh=[],Ph=[],Nd=[],ah=-1,uh=Id.length,kh,Fh=Ld(G),hh=Ld(tl),Ap=G===J?function(){return hf}:Ld(J),nf=tl===hl?function(){return sf}:Ld(hl),hf,sf;function Af(){fh.push("M",Zl(g(Nd),td),Qu,Du(g(Ph.reverse()),td),"Z")}for(;++ah<uh;)xl.call(this,kh=Id[ah],ah)?(Ph.push([hf=+Fh.call(this,kh,ah),sf=+hh.call(this,kh,ah)]),Nd.push([+Ap.call(this,kh,ah),+nf.call(this,kh,ah)])):Ph.length&&(Af(),Ph=[],Nd=[]);return Ph.length&&Af(),fh.length?fh.join(""):null}return kd.x=function(Id){return arguments.length?(G=J=Id,kd):J},kd.x0=function(Id){return arguments.length?(G=Id,kd):G},kd.x1=function(Id){return arguments.length?(J=Id,kd):J},kd.y=function(Id){return arguments.length?(tl=hl=Id,kd):hl},kd.y0=function(Id){return arguments.length?(tl=Id,kd):tl},kd.y1=function(Id){return arguments.length?(hl=Id,kd):hl},kd.defined=function(Id){return arguments.length?(xl=Id,kd):xl},kd.interpolate=function(Id){return arguments.length?(typeof Id=="function"?jl=Zl=Id:jl=(Zl=q3.get(Id)||Qv).key,Du=Zl.reverse||Zl,Qu=Zl.closed?"M":"L",kd):jl},kd.tension=function(Id){return arguments.length?(td=Id,kd):td},kd}Y3.reverse=K3,K3.reverse=Y3,m.svg.area=function(){return Dx(al)},m.svg.area.radial=function(){var g=Dx(Px);return g.radius=g.x,delete g.x,g.innerRadius=g.x0,delete g.x0,g.outerRadius=g.x1,delete g.x1,g.angle=g.y,delete g.y,g.startAngle=g.y0,delete g.y0,g.endAngle=g.y1,delete g.y1,g};function Lx(g){return g.source}function Ix(g){return g.target}m.svg.chord=function(){var g=Lx,G=Ix,J=_w,tl=p3,hl=$3;function xl(td,kd){var Id=Zl(this,g,td,kd),fh=Zl(this,G,td,kd);return"M"+Id.p0+Du(Id.r,Id.p1,Id.a1-Id.a0)+(jl(Id,fh)?Qu(Id.r,Id.p1,Id.r,Id.p0):Qu(Id.r,Id.p1,fh.r,fh.p0)+Du(fh.r,fh.p1,fh.a1-fh.a0)+Qu(fh.r,fh.p1,Id.r,Id.p0))+"Z"}function Zl(td,kd,Id,fh){var Ph=kd.call(td,Id,fh),Nd=J.call(td,Ph,fh),ah=tl.call(td,Ph,fh)-Nu,uh=hl.call(td,Ph,fh)-Nu;return{r:Nd,a0:ah,a1:uh,p0:[Nd*Math.cos(ah),Nd*Math.sin(ah)],p1:[Nd*Math.cos(uh),Nd*Math.sin(uh)]}}function jl(td,kd){return td.a0==kd.a0&&td.a1==kd.a1}function Du(td,kd,Id){return"A"+td+","+td+" 0 "+ +(Id>Dl)+",1 "+kd}function Qu(td,kd,Id,fh){return"Q 0,0 "+fh}return xl.radius=function(td){return arguments.length?(J=Ld(td),xl):J},xl.source=function(td){return arguments.length?(g=Ld(td),xl):g},xl.target=function(td){return arguments.length?(G=Ld(td),xl):G},xl.startAngle=function(td){return arguments.length?(tl=Ld(td),xl):tl},xl.endAngle=function(td){return arguments.length?(hl=Ld(td),xl):hl},xl};function _w(g){return g.radius}m.svg.diagonal=function(){var g=Lx,G=Ix,J=Ox;function tl(hl,xl){var Zl=g.call(this,hl,xl),jl=G.call(this,hl,xl),Du=(Zl.y+jl.y)/2,Qu=[Zl,{x:Zl.x,y:Du},{x:jl.x,y:Du},jl];return Qu=Qu.map(J),"M"+Qu[0]+"C"+Qu[1]+" "+Qu[2]+" "+Qu[3]}return tl.source=function(hl){return arguments.length?(g=Ld(hl),tl):g},tl.target=function(hl){return arguments.length?(G=Ld(hl),tl):G},tl.projection=function(hl){return arguments.length?(J=hl,tl):J},tl};function Ox(g){return[g.x,g.y]}m.svg.diagonal.radial=function(){var g=m.svg.diagonal(),G=Ox,J=g.projection;return g.projection=function(tl){return arguments.length?J(Ew(G=tl)):G},g};function Ew(g){return function(){var G=g.apply(this,arguments),J=G[0],tl=G[1]-Nu;return[J*Math.cos(tl),J*Math.sin(tl)]}}m.svg.symbol=function(){var g=Mw,G=Aw;function J(tl,hl){return(Nx.get(g.call(this,tl,hl))||zx)(G.call(this,tl,hl))}return J.type=function(tl){return arguments.length?(g=Ld(tl),J):g},J.size=function(tl){return arguments.length?(G=Ld(tl),J):G},J};function Aw(){return 64}function Mw(){return"circle"}function zx(g){var G=Math.sqrt(g/Dl);return"M0,"+G+"A"+G+","+G+" 0 1,1 0,"+-G+"A"+G+","+G+" 0 1,1 0,"+G+"Z"}var Nx=m.map({circle:zx,cross:function(g){var G=Math.sqrt(g/5)/2;return"M"+-3*G+","+-G+"H"+-G+"V"+-3*G+"H"+G+"V"+-G+"H"+3*G+"V"+G+"H"+G+"V"+3*G+"H"+-G+"V"+G+"H"+-3*G+"Z"},diamond:function(g){var G=Math.sqrt(g/(2*Bx)),J=G*Bx;return"M0,"+-G+"L"+J+",0 0,"+G+" "+-J+",0Z"},square:function(g){var G=Math.sqrt(g)/2;return"M"+-G+","+-G+"L"+G+","+-G+" "+G+","+G+" "+-G+","+G+"Z"},"triangle-down":function(g){var G=Math.sqrt(g/g3),J=G*g3/2;return"M0,"+J+"L"+G+","+-J+" "+-G+","+-J+"Z"},"triangle-up":function(g){var G=Math.sqrt(g/g3),J=G*g3/2;return"M0,"+-J+"L"+G+","+J+" "+-G+","+J+"Z"}});m.svg.symbolTypes=Nx.keys();var g3=Math.sqrt(3),Bx=Math.tan(30*ed);st.transition=function(g){for(var G=Ty||++Gx,J=ex(g),tl=[],hl,xl,Zl=B2||{time:Date.now(),ease:D2,delay:0,duration:250},jl=-1,Du=this.length;++jl<Du;){tl.push(hl=[]);for(var Qu=this[jl],td=-1,kd=Qu.length;++td<kd;)(xl=Qu[td])&&v3(xl,td,J,G,Zl),hl.push(xl)}return N2(tl,J,G)},st.interrupt=function(g){return this.each(g==null?m3:Hx(ex(g)))};var m3=Hx(ex());function Hx(g){return function(){var G,J,tl;(G=this[g])&&(tl=G[J=G.active])&&(tl.timer.c=null,tl.timer.t=NaN,--G.count?delete G[J]:delete this[g],G.active+=.5,tl.event&&tl.event.interrupt.call(this,this.__data__,tl.index))}}function N2(g,G,J){return Bn(g,C0),g.namespace=G,g.id=J,g}var C0=[],Gx=0,Ty,B2;C0.call=st.call,C0.empty=st.empty,C0.node=st.node,C0.size=st.size,m.transition=function(g,G){return g&&g.transition?Ty?g.transition(G):g:m.selection().transition(g)},m.transition.prototype=C0,C0.select=function(g){var G=this.id,J=this.namespace,tl=[],hl,xl,Zl;g=U(g);for(var jl=-1,Du=this.length;++jl<Du;){tl.push(hl=[]);for(var Qu=this[jl],td=-1,kd=Qu.length;++td<kd;)(Zl=Qu[td])&&(xl=g.call(Zl,Zl.__data__,td,jl))?("__data__"in Zl&&(xl.__data__=Zl.__data__),v3(xl,td,J,G,Zl[J][G]),hl.push(xl)):hl.push(null)}return N2(tl,J,G)},C0.selectAll=function(g){var G=this.id,J=this.namespace,tl=[],hl,xl,Zl,jl,Du;g=re(g);for(var Qu=-1,td=this.length;++Qu<td;)for(var kd=this[Qu],Id=-1,fh=kd.length;++Id<fh;)if(Zl=kd[Id]){Du=Zl[J][G],xl=g.call(Zl,Zl.__data__,Id,Qu),tl.push(hl=[]);for(var Ph=-1,Nd=xl.length;++Ph<Nd;)(jl=xl[Ph])&&v3(jl,Ph,J,G,Du),hl.push(jl)}return N2(tl,J,G)},C0.filter=function(g){var G=[],J,tl,hl;typeof g!="function"&&(g=Rl(g));for(var xl=0,Zl=this.length;xl<Zl;xl++){G.push(J=[]);for(var tl=this[xl],jl=0,Du=tl.length;jl<Du;jl++)(hl=tl[jl])&&g.call(hl,hl.__data__,jl,xl)&&J.push(hl)}return N2(G,this.namespace,this.id)},C0.tween=function(g,G){var J=this.id,tl=this.namespace;return arguments.length<2?this.node()[tl][J].tween.get(g):cd(this,G==null?function(hl){hl[tl][J].tween.remove(g)}:function(hl){hl[tl][J].tween.set(g,G)})};function J3(g,G,J,tl){var hl=g.id,xl=g.namespace;return cd(g,typeof J=="function"?function(Zl,jl,Du){Zl[xl][hl].tween.set(G,tl(J.call(Zl,Zl.__data__,jl,Du)))}:(J=tl(J),function(Zl){Zl[xl][hl].tween.set(G,J)}))}C0.attr=function(g,G){if(arguments.length<2){for(G in g)this.attr(G,g[G]);return this}var J=g=="transform"?nh:K0,tl=m.ns.qualify(g);function hl(){this.removeAttribute(tl)}function xl(){this.removeAttributeNS(tl.space,tl.local)}function Zl(Du){return Du==null?hl:(Du+="",function(){var Qu=this.getAttribute(tl),td;return Qu!==Du&&(td=J(Qu,Du),function(kd){this.setAttribute(tl,td(kd))})})}function jl(Du){return Du==null?xl:(Du+="",function(){var Qu=this.getAttributeNS(tl.space,tl.local),td;return Qu!==Du&&(td=J(Qu,Du),function(kd){this.setAttributeNS(tl.space,tl.local,td(kd))})})}return J3(this,"attr."+g,G,tl.local?jl:Zl)},C0.attrTween=function(g,G){var J=m.ns.qualify(g);function tl(xl,Zl){var jl=G.call(this,xl,Zl,this.getAttribute(J));return jl&&function(Du){this.setAttribute(J,jl(Du))}}function hl(xl,Zl){var jl=G.call(this,xl,Zl,this.getAttributeNS(J.space,J.local));return jl&&function(Du){this.setAttributeNS(J.space,J.local,jl(Du))}}return this.tween("attr."+g,J.local?hl:tl)},C0.style=function(g,G,J){var tl=arguments.length;if(tl<3){if(typeof g!="string"){tl<2&&(G="");for(J in g)this.style(J,g[J],G);return this}J=""}function hl(){this.style.removeProperty(g)}function xl(Zl){return Zl==null?hl:(Zl+="",function(){var jl=y(this).getComputedStyle(this,null).getPropertyValue(g),Du;return jl!==Zl&&(Du=K0(jl,Zl),function(Qu){this.style.setProperty(g,Du(Qu),J)})})}return J3(this,"style."+g,G,xl)},C0.styleTween=function(g,G,J){arguments.length<3&&(J="");function tl(hl,xl){var Zl=G.call(this,hl,xl,y(this).getComputedStyle(this,null).getPropertyValue(g));return Zl&&function(jl){this.style.setProperty(g,Zl(jl),J)}}return this.tween("style."+g,tl)},C0.text=function(g){return J3(this,"text",g,Rw)};function Rw(g){return g==null&&(g=""),function(){this.textContent=g}}C0.remove=function(){var g=this.namespace;return this.each("end.transition",function(){var G;this[g].count<2&&(G=this.parentNode)&&G.removeChild(this)})},C0.ease=function(g){var G=this.id,J=this.namespace;return arguments.length<1?this.node()[J][G].ease:(typeof g!="function"&&(g=m.ease.apply(m,arguments)),cd(this,function(tl){tl[J][G].ease=g}))},C0.delay=function(g){var G=this.id,J=this.namespace;return arguments.length<1?this.node()[J][G].delay:cd(this,typeof g=="function"?function(tl,hl,xl){tl[J][G].delay=+g.call(tl,tl.__data__,hl,xl)}:(g=+g,function(tl){tl[J][G].delay=g}))},C0.duration=function(g){var G=this.id,J=this.namespace;return arguments.length<1?this.node()[J][G].duration:cd(this,typeof g=="function"?function(tl,hl,xl){tl[J][G].duration=Math.max(1,g.call(tl,tl.__data__,hl,xl))}:(g=Math.max(1,g),function(tl){tl[J][G].duration=g}))},C0.each=function(g,G){var J=this.id,tl=this.namespace;if(arguments.length<2){var hl=B2,xl=Ty;try{Ty=J,cd(this,function(Zl,jl,Du){B2=Zl[tl][J],g.call(Zl,Zl.__data__,jl,Du)})}finally{B2=hl,Ty=xl}}else cd(this,function(Zl){var jl=Zl[tl][J];(jl.event||(jl.event=m.dispatch("start","end","interrupt"))).on(g,G)});return this},C0.transition=function(){for(var g=this.id,G=++Gx,J=this.namespace,tl=[],hl,xl,Zl,jl,Du=0,Qu=this.length;Du<Qu;Du++){tl.push(hl=[]);for(var xl=this[Du],td=0,kd=xl.length;td<kd;td++)(Zl=xl[td])&&(jl=Zl[J][g],v3(Zl,td,J,G,{time:jl.time,ease:jl.ease,delay:jl.delay+jl.duration,duration:jl.duration})),hl.push(Zl)}return N2(tl,J,G)};function ex(g){return g==null?"__transition__":"__transition_"+g+"__"}function v3(g,G,J,tl,hl){var xl=g[J]||(g[J]={active:0,count:0}),Zl=xl[tl],jl,Du,Qu,td,kd;function Id(Nd){var ah=Zl.delay;if(Du.t=ah+jl,ah<=Nd)return fh(Nd-ah);Du.c=fh}function fh(Nd){var ah=xl.active,uh=xl[ah];uh&&(uh.timer.c=null,uh.timer.t=NaN,--xl.count,delete xl[ah],uh.event&&uh.event.interrupt.call(g,g.__data__,uh.index));for(var kh in xl)if(+kh<tl){var Fh=xl[kh];Fh.timer.c=null,Fh.timer.t=NaN,--xl.count,delete xl[kh]}Du.c=Ph,qp(function(){return Du.c&&Ph(Nd||1)&&(Du.c=null,Du.t=NaN),1},0,jl),xl.active=tl,Zl.event&&Zl.event.start.call(g,g.__data__,G),kd=[],Zl.tween.forEach(function(hh,Ap){(Ap=Ap.call(g,g.__data__,G))&&kd.push(Ap)}),td=Zl.ease,Qu=Zl.duration}function Ph(Nd){for(var ah=Nd/Qu,uh=td(ah),kh=kd.length;kh>0;)kd[--kh].call(g,uh);if(ah>=1)return Zl.event&&Zl.event.end.call(g,g.__data__,G),--xl.count?delete xl[tl]:delete g[J],1}Zl||(jl=hl.time,Du=qp(Id,0,jl),Zl=xl[tl]={tween:new j,time:jl,timer:Du,delay:hl.delay,duration:hl.duration,ease:hl.ease,index:G},hl=null,++xl.count)}m.svg.axis=function(){var g=m.scale.linear(),G=Vx,J=6,tl=6,hl=3,xl=[10],Zl=null,jl;function Du(Qu){Qu.each(function(){var td=m.select(this),kd=this.__chart__||g,Id=this.__chart__=g.copy(),fh=Zl??(Id.ticks?Id.ticks.apply(Id,xl):Id.domain()),Ph=jl??(Id.tickFormat?Id.tickFormat.apply(Id,xl):al),Nd=td.selectAll(".tick").data(fh,Id),ah=Nd.enter().insert("g",".domain").attr("class","tick").style("opacity",Ku),uh=m.transition(Nd.exit()).style("opacity",Ku).remove(),kh=m.transition(Nd.order()).style("opacity",1),Fh=Math.max(J,0)+hl,hh,Ap=c2(Id),nf=td.selectAll(".domain").data([0]),hf=(nf.enter().append("path").attr("class","domain"),m.transition(nf));ah.append("line"),ah.append("text");var sf=ah.select("line"),Af=kh.select("line"),Mf=Nd.select("text").text(Ph),xg=ah.select("text"),Pf=kh.select("text"),hg=G==="top"||G==="left"?-1:1,_m,d0,Dm,tf;if(G==="bottom"||G==="top"?(hh=Tw,_m="x",Dm="y",d0="x2",tf="y2",Mf.attr("dy",hg<0?"0em":".71em").style("text-anchor","middle"),hf.attr("d","M"+Ap[0]+","+hg*tl+"V0H"+Ap[1]+"V"+hg*tl)):(hh=Fw,_m="y",Dm="x",d0="y2",tf="x2",Mf.attr("dy",".32em").style("text-anchor",hg<0?"end":"start"),hf.attr("d","M"+hg*tl+","+Ap[0]+"H0V"+Ap[1]+"H"+hg*tl)),sf.attr(tf,hg*J),xg.attr(Dm,hg*Fh),Af.attr(d0,0).attr(tf,hg*J),Pf.attr(_m,0).attr(Dm,hg*Fh),Id.rangeBand){var wg=Id,Fg=wg.rangeBand()/2;kd=Id=function(Em){return wg(Em)+Fg}}else kd.rangeBand?kd=Id:uh.call(hh,Id,kd);ah.call(hh,kd,Id),kh.call(hh,Id,Id)})}return Du.scale=function(Qu){return arguments.length?(g=Qu,Du):g},Du.orient=function(Qu){return arguments.length?(G=Qu in kw?Qu+"":Vx,Du):G},Du.ticks=function(){return arguments.length?(xl=d(arguments),Du):xl},Du.tickValues=function(Qu){return arguments.length?(Zl=Qu,Du):Zl},Du.tickFormat=function(Qu){return arguments.length?(jl=Qu,Du):jl},Du.tickSize=function(Qu){var td=arguments.length;return td?(J=+Qu,tl=+arguments[td-1],Du):J},Du.innerTickSize=function(Qu){return arguments.length?(J=+Qu,Du):J},Du.outerTickSize=function(Qu){return arguments.length?(tl=+Qu,Du):tl},Du.tickPadding=function(Qu){return arguments.length?(hl=+Qu,Du):hl},Du.tickSubdivide=function(){return arguments.length&&Du},Du};var Vx="bottom",kw={top:1,right:1,bottom:1,left:1};function Tw(g,G,J){g.attr("transform",function(tl){var hl=G(tl);return"translate("+(isFinite(hl)?hl:J(tl))+",0)"})}function Fw(g,G,J){g.attr("transform",function(tl){var hl=G(tl);return"translate(0,"+(isFinite(hl)?hl:J(tl))+")"})}m.svg.brush=function(){var g=ql(td,"brushstart","brush","brushend"),G=null,J=null,tl=[0,0],hl=[0,0],xl,Zl,jl=!0,Du=!0,Qu=tx[0];function td(Nd){Nd.each(function(){var ah=m.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ph).on("touchstart.brush",Ph),uh=ah.selectAll(".background").data([0]);uh.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),ah.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var kh=ah.selectAll(".resize").data(Qu,al);kh.exit().remove(),kh.enter().append("g").attr("class",function(nf){return"resize "+nf}).style("cursor",function(nf){return Pw[nf]}).append("rect").attr("x",function(nf){return/[ew]$/.test(nf)?-3:null}).attr("y",function(nf){return/^[ns]/.test(nf)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),kh.style("display",td.empty()?"none":null);var Fh=m.transition(ah),hh=m.transition(uh),Ap;G&&(Ap=c2(G),hh.attr("x",Ap[0]).attr("width",Ap[1]-Ap[0]),Id(Fh)),J&&(Ap=c2(J),hh.attr("y",Ap[0]).attr("height",Ap[1]-Ap[0]),fh(Fh)),kd(Fh)})}td.event=function(Nd){Nd.each(function(){var ah=g.of(this,arguments),uh={x:tl,y:hl,i:xl,j:Zl},kh=this.__chart__||uh;this.__chart__=uh,Ty?m.select(this).transition().each("start.brush",function(){xl=kh.i,Zl=kh.j,tl=kh.x,hl=kh.y,ah({type:"brushstart"})}).tween("brush:brush",function(){var Fh=G1(tl,uh.x),hh=G1(hl,uh.y);return xl=Zl=null,function(Ap){tl=uh.x=Fh(Ap),hl=uh.y=hh(Ap),ah({type:"brush",mode:"resize"})}}).each("end.brush",function(){xl=uh.i,Zl=uh.j,ah({type:"brush",mode:"resize"}),ah({type:"brushend"})}):(ah({type:"brushstart"}),ah({type:"brush",mode:"resize"}),ah({type:"brushend"}))})};function kd(Nd){Nd.selectAll(".resize").attr("transform",function(ah){return"translate("+tl[+/e$/.test(ah)]+","+hl[+/^s/.test(ah)]+")"})}function Id(Nd){Nd.select(".extent").attr("x",tl[0]),Nd.selectAll(".extent,.n>rect,.s>rect").attr("width",tl[1]-tl[0])}function fh(Nd){Nd.select(".extent").attr("y",hl[0]),Nd.selectAll(".extent,.e>rect,.w>rect").attr("height",hl[1]-hl[0])}function Ph(){var Nd=this,ah=m.select(m.event.target),uh=g.of(Nd,arguments),kh=m.select(Nd),Fh=ah.datum(),hh=!/^(n|s)$/.test(Fh)&&G,Ap=!/^(e|w)$/.test(Fh)&&J,nf=ah.classed("extent"),hf=Dh(Nd),sf,Af=m.mouse(Nd),Mf,xg=m.select(y(Nd)).on("keydown.brush",_m).on("keyup.brush",d0);if(m.event.changedTouches?xg.on("touchmove.brush",Dm).on("touchend.brush",wg):xg.on("mousemove.brush",Dm).on("mouseup.brush",wg),kh.interrupt().selectAll("*").interrupt(),nf)Af[0]=tl[0]-Af[0],Af[1]=hl[0]-Af[1];else if(Fh){var Pf=+/w$/.test(Fh),hg=+/^n/.test(Fh);Mf=[tl[1-Pf]-Af[0],hl[1-hg]-Af[1]],Af[0]=tl[Pf],Af[1]=hl[hg]}else m.event.altKey&&(sf=Af.slice());kh.style("pointer-events","none").selectAll(".resize").style("display",null),m.select("body").style("cursor",ah.style("cursor")),uh({type:"brushstart"}),Dm();function _m(){m.event.keyCode==32&&(nf||(sf=null,Af[0]-=tl[1],Af[1]-=hl[1],nf=2),El())}function d0(){m.event.keyCode==32&&nf==2&&(Af[0]+=tl[1],Af[1]+=hl[1],nf=0,El())}function Dm(){var Fg=m.mouse(Nd),Em=!1;Mf&&(Fg[0]+=Mf[0],Fg[1]+=Mf[1]),nf||(m.event.altKey?(sf||(sf=[(tl[0]+tl[1])/2,(hl[0]+hl[1])/2]),Af[0]=tl[+(Fg[0]<sf[0])],Af[1]=hl[+(Fg[1]<sf[1])]):sf=null),hh&&tf(Fg,G,0)&&(Id(kh),Em=!0),Ap&&tf(Fg,J,1)&&(fh(kh),Em=!0),Em&&(kd(kh),uh({type:"brush",mode:nf?"move":"resize"}))}function tf(Fg,Em,s0){var b0=c2(Em),z0=b0[0],X0=b0[1],iv=Af[s0],V0=s0?hl:tl,hv=V0[1]-V0[0],N0,pv;if(nf&&(z0-=iv,X0-=hv+iv),N0=(s0?Du:jl)?Math.max(z0,Math.min(X0,Fg[s0])):Fg[s0],nf?pv=(N0+=iv)+hv:(sf&&(iv=Math.max(z0,Math.min(X0,2*sf[s0]-N0))),iv<N0?(pv=N0,N0=iv):pv=iv),V0[0]!=N0||V0[1]!=pv)return s0?Zl=null:xl=null,V0[0]=N0,V0[1]=pv,!0}function wg(){Dm(),kh.style("pointer-events","all").selectAll(".resize").style("display",td.empty()?"none":null),m.select("body").style("cursor",null),xg.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),hf(),uh({type:"brushend"})}}return td.x=function(Nd){return arguments.length?(G=Nd,Qu=tx[!G<<1|!J],td):G},td.y=function(Nd){return arguments.length?(J=Nd,Qu=tx[!G<<1|!J],td):J},td.clamp=function(Nd){return arguments.length?(G&&J?(jl=!!Nd[0],Du=!!Nd[1]):G?jl=!!Nd:J&&(Du=!!Nd),td):G&&J?[jl,Du]:G?jl:J?Du:null},td.extent=function(Nd){var ah,uh,kh,Fh,hh;return arguments.length?(G&&(ah=Nd[0],uh=Nd[1],J&&(ah=ah[0],uh=uh[0]),xl=[ah,uh],G.invert&&(ah=G(ah),uh=G(uh)),uh<ah&&(hh=ah,ah=uh,uh=hh),(ah!=tl[0]||uh!=tl[1])&&(tl=[ah,uh])),J&&(kh=Nd[0],Fh=Nd[1],G&&(kh=kh[1],Fh=Fh[1]),Zl=[kh,Fh],J.invert&&(kh=J(kh),Fh=J(Fh)),Fh<kh&&(hh=kh,kh=Fh,Fh=hh),(kh!=hl[0]||Fh!=hl[1])&&(hl=[kh,Fh])),td):(G&&(xl?(ah=xl[0],uh=xl[1]):(ah=tl[0],uh=tl[1],G.invert&&(ah=G.invert(ah),uh=G.invert(uh)),uh<ah&&(hh=ah,ah=uh,uh=hh))),J&&(Zl?(kh=Zl[0],Fh=Zl[1]):(kh=hl[0],Fh=hl[1],J.invert&&(kh=J.invert(kh),Fh=J.invert(Fh)),Fh<kh&&(hh=kh,kh=Fh,Fh=hh))),G&&J?[[ah,kh],[uh,Fh]]:G?[ah,uh]:J&&[kh,Fh])},td.clear=function(){return td.empty()||(tl=[0,0],hl=[0,0],xl=Zl=null),td},td.empty=function(){return!!G&&tl[0]==tl[1]||!!J&&hl[0]==hl[1]},m.rebind(td,g,"on")};var Pw={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},tx=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];m.text=zd(function(g){return g.responseText}),m.json=function(g,G){return gh(g,"application/json",Dw,G)};function Dw(g){return JSON.parse(g.responseText)}m.html=function(g,G){return gh(g,"text/html",Lw,G)};function Lw(g){var G=x.createRange();return G.selectNode(x.body),G.createContextualFragment(g.responseText)}m.xml=zd(function(g){return g.responseXML}),typeof Me=="object"&&Me.exports?Me.exports=m:this.d3=m}).apply(self)}),V=s((ot,Me)=>{(function(m,l){typeof ot=="object"&&typeof Me<"u"?l(ot):(m=m||self,l(m.d3=m.d3||{}))})(ot,function(m){var l=new Date,d=new Date;function x(Rl,Wu,cd,xd){function Td(Pd){return Rl(Pd=arguments.length===0?new Date:new Date(+Pd)),Pd}return Td.floor=function(Pd){return Rl(Pd=new Date(+Pd)),Pd},Td.ceil=function(Pd){return Rl(Pd=new Date(Pd-1)),Wu(Pd,1),Rl(Pd),Pd},Td.round=function(Pd){var Hd=Td(Pd),$d=Td.ceil(Pd);return Pd-Hd<$d-Pd?Hd:$d},Td.offset=function(Pd,Hd){return Wu(Pd=new Date(+Pd),Hd==null?1:Math.floor(Hd)),Pd},Td.range=function(Pd,Hd,$d){var Wd=[],mh;if(Pd=Td.ceil(Pd),$d=$d==null?1:Math.floor($d),!(Pd<Hd)||!($d>0))return Wd;do Wd.push(mh=new Date(+Pd)),Wu(Pd,$d),Rl(Pd);while(mh<Pd&&Pd<Hd);return Wd},Td.filter=function(Pd){return x(function(Hd){if(Hd>=Hd)for(;Rl(Hd),!Pd(Hd);)Hd.setTime(Hd-1)},function(Hd,$d){if(Hd>=Hd)if($d<0)for(;++$d<=0;)for(;Wu(Hd,-1),!Pd(Hd););else for(;--$d>=0;)for(;Wu(Hd,1),!Pd(Hd););})},cd&&(Td.count=function(Pd,Hd){return l.setTime(+Pd),d.setTime(+Hd),Rl(l),Rl(d),Math.floor(cd(l,d))},Td.every=function(Pd){return Pd=Math.floor(Pd),!isFinite(Pd)||!(Pd>0)?null:Pd>1?Td.filter(xd?function(Hd){return xd(Hd)%Pd===0}:function(Hd){return Td.count(0,Hd)%Pd===0}):Td}),Td}var v=x(function(){},function(Rl,Wu){Rl.setTime(+Rl+Wu)},function(Rl,Wu){return Wu-Rl});v.every=function(Rl){return Rl=Math.floor(Rl),!isFinite(Rl)||!(Rl>0)?null:Rl>1?x(function(Wu){Wu.setTime(Math.floor(Wu/Rl)*Rl)},function(Wu,cd){Wu.setTime(+Wu+cd*Rl)},function(Wu,cd){return(cd-Wu)/Rl}):v};var y=v.range,w=1e3,S=6e4,c=36e5,F=864e5,b=6048e5,R=x(function(Rl){Rl.setTime(Rl-Rl.getMilliseconds())},function(Rl,Wu){Rl.setTime(+Rl+Wu*w)},function(Rl,Wu){return(Wu-Rl)/w},function(Rl){return Rl.getUTCSeconds()}),B=R.range,O=x(function(Rl){Rl.setTime(Rl-Rl.getMilliseconds()-Rl.getSeconds()*w)},function(Rl,Wu){Rl.setTime(+Rl+Wu*S)},function(Rl,Wu){return(Wu-Rl)/S},function(Rl){return Rl.getMinutes()}),P=O.range,D=x(function(Rl){Rl.setTime(Rl-Rl.getMilliseconds()-Rl.getSeconds()*w-Rl.getMinutes()*S)},function(Rl,Wu){Rl.setTime(+Rl+Wu*c)},function(Rl,Wu){return(Wu-Rl)/c},function(Rl){return Rl.getHours()}),H=D.range,C=x(function(Rl){Rl.setHours(0,0,0,0)},function(Rl,Wu){Rl.setDate(Rl.getDate()+Wu)},function(Rl,Wu){return(Wu-Rl-(Wu.getTimezoneOffset()-Rl.getTimezoneOffset())*S)/F},function(Rl){return Rl.getDate()-1}),A=C.range;function L(Rl){return x(function(Wu){Wu.setDate(Wu.getDate()-(Wu.getDay()+7-Rl)%7),Wu.setHours(0,0,0,0)},function(Wu,cd){Wu.setDate(Wu.getDate()+cd*7)},function(Wu,cd){return(cd-Wu-(cd.getTimezoneOffset()-Wu.getTimezoneOffset())*S)/b})}var j=L(0),Z=L(1),nl=L(2),Pe=L(3),se=L(4),q=L(5),ol=L(6),nt=j.range,In=Z.range,_t=nl.range,Fn=Pe.range,al=se.range,sl=q.range,ce=ol.range,ll=x(function(Rl){Rl.setDate(1),Rl.setHours(0,0,0,0)},function(Rl,Wu){Rl.setMonth(Rl.getMonth()+Wu)},function(Rl,Wu){return Wu.getMonth()-Rl.getMonth()+(Wu.getFullYear()-Rl.getFullYear())*12},function(Rl){return Rl.getMonth()}),ul=ll.range,fl=x(function(Rl){Rl.setMonth(0,1),Rl.setHours(0,0,0,0)},function(Rl,Wu){Rl.setFullYear(Rl.getFullYear()+Wu)},function(Rl,Wu){return Wu.getFullYear()-Rl.getFullYear()},function(Rl){return Rl.getFullYear()});fl.every=function(Rl){return!isFinite(Rl=Math.floor(Rl))||!(Rl>0)?null:x(function(Wu){Wu.setFullYear(Math.floor(Wu.getFullYear()/Rl)*Rl),Wu.setMonth(0,1),Wu.setHours(0,0,0,0)},function(Wu,cd){Wu.setFullYear(Wu.getFullYear()+cd*Rl)})};var bl=fl.range,El=x(function(Rl){Rl.setUTCSeconds(0,0)},function(Rl,Wu){Rl.setTime(+Rl+Wu*S)},function(Rl,Wu){return(Wu-Rl)/S},function(Rl){return Rl.getUTCMinutes()}),Ul=El.range,ql=x(function(Rl){Rl.setUTCMinutes(0,0,0)},function(Rl,Wu){Rl.setTime(+Rl+Wu*c)},function(Rl,Wu){return(Wu-Rl)/c},function(Rl){return Rl.getUTCHours()}),gu=ql.range,Bn=x(function(Rl){Rl.setUTCHours(0,0,0,0)},function(Rl,Wu){Rl.setUTCDate(Rl.getUTCDate()+Wu)},function(Rl,Wu){return(Wu-Rl)/F},function(Rl){return Rl.getUTCDate()-1}),il=Bn.range;function X(Rl){return x(function(Wu){Wu.setUTCDate(Wu.getUTCDate()-(Wu.getUTCDay()+7-Rl)%7),Wu.setUTCHours(0,0,0,0)},function(Wu,cd){Wu.setUTCDate(Wu.getUTCDate()+cd*7)},function(Wu,cd){return(cd-Wu)/b})}var cl=X(0),Sl=X(1),st=X(2),U=X(3),re=X(4),Ft=X(5),ls=X(6),_l=cl.range,Ll=Sl.range,zl=st.range,yu=U.range,Vu=re.range,od=Ft.range,Ad=ls.range,vd=x(function(Rl){Rl.setUTCDate(1),Rl.setUTCHours(0,0,0,0)},function(Rl,Wu){Rl.setUTCMonth(Rl.getUTCMonth()+Wu)},function(Rl,Wu){return Wu.getUTCMonth()-Rl.getUTCMonth()+(Wu.getUTCFullYear()-Rl.getUTCFullYear())*12},function(Rl){return Rl.getUTCMonth()}),fd=vd.range,Kl=x(function(Rl){Rl.setUTCMonth(0,1),Rl.setUTCHours(0,0,0,0)},function(Rl,Wu){Rl.setUTCFullYear(Rl.getUTCFullYear()+Wu)},function(Rl,Wu){return Wu.getUTCFullYear()-Rl.getUTCFullYear()},function(Rl){return Rl.getUTCFullYear()});Kl.every=function(Rl){return!isFinite(Rl=Math.floor(Rl))||!(Rl>0)?null:x(function(Wu){Wu.setUTCFullYear(Math.floor(Wu.getUTCFullYear()/Rl)*Rl),Wu.setUTCMonth(0,1),Wu.setUTCHours(0,0,0,0)},function(Wu,cd){Wu.setUTCFullYear(Wu.getUTCFullYear()+cd*Rl)})};var vu=Kl.range;m.timeDay=C,m.timeDays=A,m.timeFriday=q,m.timeFridays=sl,m.timeHour=D,m.timeHours=H,m.timeInterval=x,m.timeMillisecond=v,m.timeMilliseconds=y,m.timeMinute=O,m.timeMinutes=P,m.timeMonday=Z,m.timeMondays=In,m.timeMonth=ll,m.timeMonths=ul,m.timeSaturday=ol,m.timeSaturdays=ce,m.timeSecond=R,m.timeSeconds=B,m.timeSunday=j,m.timeSundays=nt,m.timeThursday=se,m.timeThursdays=al,m.timeTuesday=nl,m.timeTuesdays=_t,m.timeWednesday=Pe,m.timeWednesdays=Fn,m.timeWeek=j,m.timeWeeks=nt,m.timeYear=fl,m.timeYears=bl,m.utcDay=Bn,m.utcDays=il,m.utcFriday=Ft,m.utcFridays=od,m.utcHour=ql,m.utcHours=gu,m.utcMillisecond=v,m.utcMilliseconds=y,m.utcMinute=El,m.utcMinutes=Ul,m.utcMonday=Sl,m.utcMondays=Ll,m.utcMonth=vd,m.utcMonths=fd,m.utcSaturday=ls,m.utcSaturdays=Ad,m.utcSecond=R,m.utcSeconds=B,m.utcSunday=cl,m.utcSundays=_l,m.utcThursday=re,m.utcThursdays=Vu,m.utcTuesday=st,m.utcTuesdays=zl,m.utcWednesday=U,m.utcWednesdays=yu,m.utcWeek=cl,m.utcWeeks=_l,m.utcYear=Kl,m.utcYears=vu,Object.defineProperty(m,"__esModule",{value:!0})})}),oe=s((ot,Me)=>{(function(m,l){typeof ot=="object"&&typeof Me<"u"?l(ot,V()):(m=m||self,l(m.d3=m.d3||{},m.d3))})(ot,function(m,l){function d(Ql){if(0<=Ql.y&&Ql.y<100){var Ku=new Date(-1,Ql.m,Ql.d,Ql.H,Ql.M,Ql.S,Ql.L);return Ku.setFullYear(Ql.y),Ku}return new Date(Ql.y,Ql.m,Ql.d,Ql.H,Ql.M,Ql.S,Ql.L)}function x(Ql){if(0<=Ql.y&&Ql.y<100){var Ku=new Date(Date.UTC(-1,Ql.m,Ql.d,Ql.H,Ql.M,Ql.S,Ql.L));return Ku.setUTCFullYear(Ql.y),Ku}return new Date(Date.UTC(Ql.y,Ql.m,Ql.d,Ql.H,Ql.M,Ql.S,Ql.L))}function v(Ql,Ku,gl){return{y:Ql,m:Ku,d:gl,H:0,M:0,S:0,L:0}}function y(Ql){var Ku=Ql.dateTime,gl=Ql.date,Dl=Ql.time,Vl=Ql.periods,Mu=Ql.days,Nu=Ql.shortDays,ed=Ql.months,sd=Ql.shortMonths,Sd=B(Vl),yd=O(Vl),bd=B(Mu),Kd=O(Mu),Jd=B(Nu),th=O(Nu),Hh=B(ed),sp=O(ed),xp=B(sd),Pp=O(sd),Up={a:rg,A:ng,b:gf,B:Rf,c:null,d:ll,e:ll,f:Ul,H:ul,I:fl,j:bl,L:El,m:ql,M:gu,p:yf,q:cp,Q:Hd,s:$d,S:Bn,u:il,U:X,V:cl,w:Sl,W:st,x:null,X:null,y:U,Y:re,Z:Ft,"%":Pd},fp={a:_g,A:wl,b:pl,B:Yu,c:null,d:ls,e:ls,f:Vu,H:_l,I:Ll,j:zl,L:yu,m:od,M:Ad,p:Ju,q:hd,Q:Hd,s:$d,S:vd,u:fd,U:Kl,V:vu,w:Rl,W:Wu,x:null,X:null,y:cd,Y:xd,Z:Td,"%":Pd},zh={a:Sp,A:mp,b:af,B:_f,c:Lp,d:se,e:se,f:Fn,H:ol,I:ol,j:q,L:_t,m:Pe,M:nt,p:wp,q:nl,Q:sl,s:ce,S:In,u:D,U:H,V:C,w:P,W:A,x:Ef,X:Lf,y:j,Y:L,Z,"%":al};Up.x=kp(gl,Up),Up.X=kp(Dl,Up),Up.c=kp(Ku,Up),fp.x=kp(gl,fp),fp.X=kp(Dl,fp),fp.c=kp(Ku,fp);function kp($u,Xu){return function(md){var ld=[],Ld=-1,zd=0,gh=$u.length,ep,Bh,up;for(md instanceof Date||(md=new Date(+md));++Ld<gh;)$u.charCodeAt(Ld)===37&&(ld.push($u.slice(zd,Ld)),(Bh=w[ep=$u.charAt(++Ld)])!=null?ep=$u.charAt(++Ld):Bh=ep==="e"?" ":"0",(up=Xu[ep])&&(ep=up(md,Bh)),ld.push(ep),zd=Ld+1);return ld.push($u.slice(zd,Ld)),ld.join("")}}function qh($u,Xu){return function(md){var ld=v(1900,void 0,1),Ld=bp(ld,$u,md+="",0),zd,gh;if(Ld!=md.length)return null;if("Q"in ld)return new Date(ld.Q);if("s"in ld)return new Date(ld.s*1e3+("L"in ld?ld.L:0));if(Xu&&!("Z"in ld)&&(ld.Z=0),"p"in ld&&(ld.H=ld.H%12+ld.p*12),ld.m===void 0&&(ld.m="q"in ld?ld.q:0),"V"in ld){if(ld.V<1||ld.V>53)return null;"w"in ld||(ld.w=1),"Z"in ld?(zd=x(v(ld.y,0,1)),gh=zd.getUTCDay(),zd=gh>4||gh===0?l.utcMonday.ceil(zd):l.utcMonday(zd),zd=l.utcDay.offset(zd,(ld.V-1)*7),ld.y=zd.getUTCFullYear(),ld.m=zd.getUTCMonth(),ld.d=zd.getUTCDate()+(ld.w+6)%7):(zd=d(v(ld.y,0,1)),gh=zd.getDay(),zd=gh>4||gh===0?l.timeMonday.ceil(zd):l.timeMonday(zd),zd=l.timeDay.offset(zd,(ld.V-1)*7),ld.y=zd.getFullYear(),ld.m=zd.getMonth(),ld.d=zd.getDate()+(ld.w+6)%7)}else("W"in ld||"U"in ld)&&("w"in ld||(ld.w="u"in ld?ld.u%7:"W"in ld?1:0),gh="Z"in ld?x(v(ld.y,0,1)).getUTCDay():d(v(ld.y,0,1)).getDay(),ld.m=0,ld.d="W"in ld?(ld.w+6)%7+ld.W*7-(gh+5)%7:ld.w+ld.U*7-(gh+6)%7);return"Z"in ld?(ld.H+=ld.Z/100|0,ld.M+=ld.Z%100,x(ld)):d(ld)}}function bp($u,Xu,md,ld){for(var Ld=0,zd=Xu.length,gh=md.length,ep,Bh;Ld<zd;){if(ld>=gh)return-1;if(ep=Xu.charCodeAt(Ld++),ep===37){if(ep=Xu.charAt(Ld++),Bh=zh[ep in w?Xu.charAt(Ld++):ep],!Bh||(ld=Bh($u,md,ld))<0)return-1}else if(ep!=md.charCodeAt(ld++))return-1}return ld}function wp($u,Xu,md){var ld=Sd.exec(Xu.slice(md));return ld?($u.p=yd[ld[0].toLowerCase()],md+ld[0].length):-1}function Sp($u,Xu,md){var ld=Jd.exec(Xu.slice(md));return ld?($u.w=th[ld[0].toLowerCase()],md+ld[0].length):-1}function mp($u,Xu,md){var ld=bd.exec(Xu.slice(md));return ld?($u.w=Kd[ld[0].toLowerCase()],md+ld[0].length):-1}function af($u,Xu,md){var ld=xp.exec(Xu.slice(md));return ld?($u.m=Pp[ld[0].toLowerCase()],md+ld[0].length):-1}function _f($u,Xu,md){var ld=Hh.exec(Xu.slice(md));return ld?($u.m=sp[ld[0].toLowerCase()],md+ld[0].length):-1}function Lp($u,Xu,md){return bp($u,Ku,Xu,md)}function Ef($u,Xu,md){return bp($u,gl,Xu,md)}function Lf($u,Xu,md){return bp($u,Dl,Xu,md)}function rg($u){return Nu[$u.getDay()]}function ng($u){return Mu[$u.getDay()]}function gf($u){return sd[$u.getMonth()]}function Rf($u){return ed[$u.getMonth()]}function yf($u){return Vl[+($u.getHours()>=12)]}function cp($u){return 1+~~($u.getMonth()/3)}function _g($u){return Nu[$u.getUTCDay()]}function wl($u){return Mu[$u.getUTCDay()]}function pl($u){return sd[$u.getUTCMonth()]}function Yu($u){return ed[$u.getUTCMonth()]}function Ju($u){return Vl[+($u.getUTCHours()>=12)]}function hd($u){return 1+~~($u.getUTCMonth()/3)}return{format:function($u){var Xu=kp($u+="",Up);return Xu.toString=function(){return $u},Xu},parse:function($u){var Xu=qh($u+="",!1);return Xu.toString=function(){return $u},Xu},utcFormat:function($u){var Xu=kp($u+="",fp);return Xu.toString=function(){return $u},Xu},utcParse:function($u){var Xu=qh($u+="",!0);return Xu.toString=function(){return $u},Xu}}}var w={"-":"",_:" ",0:"0"},S=/^\s*\d+/,c=/^%/,F=/[\\^$*+?|[\]().{}]/g;function b(Ql,Ku,gl){var Dl=Ql<0?"-":"",Vl=(Dl?-Ql:Ql)+"",Mu=Vl.length;return Dl+(Mu<gl?new Array(gl-Mu+1).join(Ku)+Vl:Vl)}function R(Ql){return Ql.replace(F,"\\$&")}function B(Ql){return new RegExp("^(?:"+Ql.map(R).join("|")+")","i")}function O(Ql){for(var Ku={},gl=-1,Dl=Ql.length;++gl<Dl;)Ku[Ql[gl].toLowerCase()]=gl;return Ku}function P(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+1));return Dl?(Ql.w=+Dl[0],gl+Dl[0].length):-1}function D(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+1));return Dl?(Ql.u=+Dl[0],gl+Dl[0].length):-1}function H(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+2));return Dl?(Ql.U=+Dl[0],gl+Dl[0].length):-1}function C(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+2));return Dl?(Ql.V=+Dl[0],gl+Dl[0].length):-1}function A(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+2));return Dl?(Ql.W=+Dl[0],gl+Dl[0].length):-1}function L(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+4));return Dl?(Ql.y=+Dl[0],gl+Dl[0].length):-1}function j(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+2));return Dl?(Ql.y=+Dl[0]+(+Dl[0]>68?1900:2e3),gl+Dl[0].length):-1}function Z(Ql,Ku,gl){var Dl=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Ku.slice(gl,gl+6));return Dl?(Ql.Z=Dl[1]?0:-(Dl[2]+(Dl[3]||"00")),gl+Dl[0].length):-1}function nl(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+1));return Dl?(Ql.q=Dl[0]*3-3,gl+Dl[0].length):-1}function Pe(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+2));return Dl?(Ql.m=Dl[0]-1,gl+Dl[0].length):-1}function se(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+2));return Dl?(Ql.d=+Dl[0],gl+Dl[0].length):-1}function q(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+3));return Dl?(Ql.m=0,Ql.d=+Dl[0],gl+Dl[0].length):-1}function ol(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+2));return Dl?(Ql.H=+Dl[0],gl+Dl[0].length):-1}function nt(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+2));return Dl?(Ql.M=+Dl[0],gl+Dl[0].length):-1}function In(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+2));return Dl?(Ql.S=+Dl[0],gl+Dl[0].length):-1}function _t(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+3));return Dl?(Ql.L=+Dl[0],gl+Dl[0].length):-1}function Fn(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl,gl+6));return Dl?(Ql.L=Math.floor(Dl[0]/1e3),gl+Dl[0].length):-1}function al(Ql,Ku,gl){var Dl=c.exec(Ku.slice(gl,gl+1));return Dl?gl+Dl[0].length:-1}function sl(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl));return Dl?(Ql.Q=+Dl[0],gl+Dl[0].length):-1}function ce(Ql,Ku,gl){var Dl=S.exec(Ku.slice(gl));return Dl?(Ql.s=+Dl[0],gl+Dl[0].length):-1}function ll(Ql,Ku){return b(Ql.getDate(),Ku,2)}function ul(Ql,Ku){return b(Ql.getHours(),Ku,2)}function fl(Ql,Ku){return b(Ql.getHours()%12||12,Ku,2)}function bl(Ql,Ku){return b(1+l.timeDay.count(l.timeYear(Ql),Ql),Ku,3)}function El(Ql,Ku){return b(Ql.getMilliseconds(),Ku,3)}function Ul(Ql,Ku){return El(Ql,Ku)+"000"}function ql(Ql,Ku){return b(Ql.getMonth()+1,Ku,2)}function gu(Ql,Ku){return b(Ql.getMinutes(),Ku,2)}function Bn(Ql,Ku){return b(Ql.getSeconds(),Ku,2)}function il(Ql){var Ku=Ql.getDay();return Ku===0?7:Ku}function X(Ql,Ku){return b(l.timeSunday.count(l.timeYear(Ql)-1,Ql),Ku,2)}function cl(Ql,Ku){var gl=Ql.getDay();return Ql=gl>=4||gl===0?l.timeThursday(Ql):l.timeThursday.ceil(Ql),b(l.timeThursday.count(l.timeYear(Ql),Ql)+(l.timeYear(Ql).getDay()===4),Ku,2)}function Sl(Ql){return Ql.getDay()}function st(Ql,Ku){return b(l.timeMonday.count(l.timeYear(Ql)-1,Ql),Ku,2)}function U(Ql,Ku){return b(Ql.getFullYear()%100,Ku,2)}function re(Ql,Ku){return b(Ql.getFullYear()%1e4,Ku,4)}function Ft(Ql){var Ku=Ql.getTimezoneOffset();return(Ku>0?"-":(Ku*=-1,"+"))+b(Ku/60|0,"0",2)+b(Ku%60,"0",2)}function ls(Ql,Ku){return b(Ql.getUTCDate(),Ku,2)}function _l(Ql,Ku){return b(Ql.getUTCHours(),Ku,2)}function Ll(Ql,Ku){return b(Ql.getUTCHours()%12||12,Ku,2)}function zl(Ql,Ku){return b(1+l.utcDay.count(l.utcYear(Ql),Ql),Ku,3)}function yu(Ql,Ku){return b(Ql.getUTCMilliseconds(),Ku,3)}function Vu(Ql,Ku){return yu(Ql,Ku)+"000"}function od(Ql,Ku){return b(Ql.getUTCMonth()+1,Ku,2)}function Ad(Ql,Ku){return b(Ql.getUTCMinutes(),Ku,2)}function vd(Ql,Ku){return b(Ql.getUTCSeconds(),Ku,2)}function fd(Ql){var Ku=Ql.getUTCDay();return Ku===0?7:Ku}function Kl(Ql,Ku){return b(l.utcSunday.count(l.utcYear(Ql)-1,Ql),Ku,2)}function vu(Ql,Ku){var gl=Ql.getUTCDay();return Ql=gl>=4||gl===0?l.utcThursday(Ql):l.utcThursday.ceil(Ql),b(l.utcThursday.count(l.utcYear(Ql),Ql)+(l.utcYear(Ql).getUTCDay()===4),Ku,2)}function Rl(Ql){return Ql.getUTCDay()}function Wu(Ql,Ku){return b(l.utcMonday.count(l.utcYear(Ql)-1,Ql),Ku,2)}function cd(Ql,Ku){return b(Ql.getUTCFullYear()%100,Ku,2)}function xd(Ql,Ku){return b(Ql.getUTCFullYear()%1e4,Ku,4)}function Td(){return"+0000"}function Pd(){return"%"}function Hd(Ql){return+Ql}function $d(Ql){return Math.floor(+Ql/1e3)}var Wd;mh({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mh(Ql){return Wd=y(Ql),m.timeFormat=Wd.format,m.timeParse=Wd.parse,m.utcFormat=Wd.utcFormat,m.utcParse=Wd.utcParse,Wd}var Dd="%Y-%m-%dT%H:%M:%S.%LZ";function bh(Ql){return Ql.toISOString()}var Dh=Date.prototype.toISOString?bh:m.utcFormat(Dd);function vh(Ql){var Ku=new Date(Ql);return isNaN(Ku)?null:Ku}var Gh=+new Date("2000-01-01T00:00:00.000Z")?vh:m.utcParse(Dd);m.isoFormat=Dh,m.isoParse=Gh,m.timeFormatDefaultLocale=mh,m.timeFormatLocale=y,Object.defineProperty(m,"__esModule",{value:!0})})}),Y=s((ot,Me)=>{(function(m,l){typeof ot=="object"&&typeof Me<"u"?l(ot):(m=typeof globalThis<"u"?globalThis:m||self,l(m.d3=m.d3||{}))})(ot,function(m){function l(Pe){return Math.abs(Pe=Math.round(Pe))>=1e21?Pe.toLocaleString("en").replace(/,/g,""):Pe.toString(10)}function d(Pe,se){if((q=(Pe=se?Pe.toExponential(se-1):Pe.toExponential()).indexOf("e"))<0)return null;var q,ol=Pe.slice(0,q);return[ol.length>1?ol[0]+ol.slice(2):ol,+Pe.slice(q+1)]}function x(Pe){return Pe=d(Math.abs(Pe)),Pe?Pe[1]:NaN}function v(Pe,se){return function(q,ol){for(var nt=q.length,In=[],_t=0,Fn=Pe[0],al=0;nt>0&&Fn>0&&(al+Fn+1>ol&&(Fn=Math.max(1,ol-al)),In.push(q.substring(nt-=Fn,nt+Fn)),!((al+=Fn+1)>ol));)Fn=Pe[_t=(_t+1)%Pe.length];return In.reverse().join(se)}}function y(Pe){return function(se){return se.replace(/[0-9]/g,function(q){return Pe[+q]})}}var w=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function S(Pe){if(!(se=w.exec(Pe)))throw new Error("invalid format: "+Pe);var se;return new c({fill:se[1],align:se[2],sign:se[3],symbol:se[4],zero:se[5],width:se[6],comma:se[7],precision:se[8]&&se[8].slice(1),trim:se[9],type:se[10]})}S.prototype=c.prototype;function c(Pe){this.fill=Pe.fill===void 0?" ":Pe.fill+"",this.align=Pe.align===void 0?">":Pe.align+"",this.sign=Pe.sign===void 0?"-":Pe.sign+"",this.symbol=Pe.symbol===void 0?"":Pe.symbol+"",this.zero=!!Pe.zero,this.width=Pe.width===void 0?void 0:+Pe.width,this.comma=!!Pe.comma,this.precision=Pe.precision===void 0?void 0:+Pe.precision,this.trim=!!Pe.trim,this.type=Pe.type===void 0?"":Pe.type+""}c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function F(Pe){e:for(var se=Pe.length,q=1,ol=-1,nt;q<se;++q)switch(Pe[q]){case".":ol=nt=q;break;case"0":ol===0&&(ol=q),nt=q;break;default:if(!+Pe[q])break e;ol>0&&(ol=0);break}return ol>0?Pe.slice(0,ol)+Pe.slice(nt+1):Pe}var b;function R(Pe,se){var q=d(Pe,se);if(!q)return Pe+"";var ol=q[0],nt=q[1],In=nt-(b=Math.max(-8,Math.min(8,Math.floor(nt/3)))*3)+1,_t=ol.length;return In===_t?ol:In>_t?ol+new Array(In-_t+1).join("0"):In>0?ol.slice(0,In)+"."+ol.slice(In):"0."+new Array(1-In).join("0")+d(Pe,Math.max(0,se+In-1))[0]}function B(Pe,se){var q=d(Pe,se);if(!q)return Pe+"";var ol=q[0],nt=q[1];return nt<0?"0."+new Array(-nt).join("0")+ol:ol.length>nt+1?ol.slice(0,nt+1)+"."+ol.slice(nt+1):ol+new Array(nt-ol.length+2).join("0")}var O={"%":function(Pe,se){return(Pe*100).toFixed(se)},b:function(Pe){return Math.round(Pe).toString(2)},c:function(Pe){return Pe+""},d:l,e:function(Pe,se){return Pe.toExponential(se)},f:function(Pe,se){return Pe.toFixed(se)},g:function(Pe,se){return Pe.toPrecision(se)},o:function(Pe){return Math.round(Pe).toString(8)},p:function(Pe,se){return B(Pe*100,se)},r:B,s:R,X:function(Pe){return Math.round(Pe).toString(16).toUpperCase()},x:function(Pe){return Math.round(Pe).toString(16)}};function P(Pe){return Pe}var D=Array.prototype.map,H=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function C(Pe){var se=Pe.grouping===void 0||Pe.thousands===void 0?P:v(D.call(Pe.grouping,Number),Pe.thousands+""),q=Pe.currency===void 0?"":Pe.currency[0]+"",ol=Pe.currency===void 0?"":Pe.currency[1]+"",nt=Pe.decimal===void 0?".":Pe.decimal+"",In=Pe.numerals===void 0?P:y(D.call(Pe.numerals,String)),_t=Pe.percent===void 0?"%":Pe.percent+"",Fn=Pe.minus===void 0?"-":Pe.minus+"",al=Pe.nan===void 0?"NaN":Pe.nan+"";function sl(ll){ll=S(ll);var ul=ll.fill,fl=ll.align,bl=ll.sign,El=ll.symbol,Ul=ll.zero,ql=ll.width,gu=ll.comma,Bn=ll.precision,il=ll.trim,X=ll.type;X==="n"?(gu=!0,X="g"):O[X]||(Bn===void 0&&(Bn=12),il=!0,X="g"),(Ul||ul==="0"&&fl==="=")&&(Ul=!0,ul="0",fl="=");var cl=El==="$"?q:El==="#"&&/[boxX]/.test(X)?"0"+X.toLowerCase():"",Sl=El==="$"?ol:/[%p]/.test(X)?_t:"",st=O[X],U=/[defgprs%]/.test(X);Bn=Bn===void 0?6:/[gprs]/.test(X)?Math.max(1,Math.min(21,Bn)):Math.max(0,Math.min(20,Bn));function re(Ft){var ls=cl,_l=Sl,Ll,zl,yu;if(X==="c")_l=st(Ft)+_l,Ft="";else{Ft=+Ft;var Vu=Ft<0||1/Ft<0;if(Ft=isNaN(Ft)?al:st(Math.abs(Ft),Bn),il&&(Ft=F(Ft)),Vu&&+Ft==0&&bl!=="+"&&(Vu=!1),ls=(Vu?bl==="("?bl:Fn:bl==="-"||bl==="("?"":bl)+ls,_l=(X==="s"?H[8+b/3]:"")+_l+(Vu&&bl==="("?")":""),U){for(Ll=-1,zl=Ft.length;++Ll<zl;)if(yu=Ft.charCodeAt(Ll),48>yu||yu>57){_l=(yu===46?nt+Ft.slice(Ll+1):Ft.slice(Ll))+_l,Ft=Ft.slice(0,Ll);break}}}gu&&!Ul&&(Ft=se(Ft,1/0));var od=ls.length+Ft.length+_l.length,Ad=od<ql?new Array(ql-od+1).join(ul):"";switch(gu&&Ul&&(Ft=se(Ad+Ft,Ad.length?ql-_l.length:1/0),Ad=""),fl){case"<":Ft=ls+Ft+_l+Ad;break;case"=":Ft=ls+Ad+Ft+_l;break;case"^":Ft=Ad.slice(0,od=Ad.length>>1)+ls+Ft+_l+Ad.slice(od);break;default:Ft=Ad+ls+Ft+_l;break}return In(Ft)}return re.toString=function(){return ll+""},re}function ce(ll,ul){var fl=sl((ll=S(ll),ll.type="f",ll)),bl=Math.max(-8,Math.min(8,Math.floor(x(ul)/3)))*3,El=Math.pow(10,-bl),Ul=H[8+bl/3];return function(ql){return fl(El*ql)+Ul}}return{format:sl,formatPrefix:ce}}var A;L({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function L(Pe){return A=C(Pe),m.format=A.format,m.formatPrefix=A.formatPrefix,A}function j(Pe){return Math.max(0,-x(Math.abs(Pe)))}function Z(Pe,se){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(x(se)/3)))*3-x(Math.abs(Pe)))}function nl(Pe,se){return Pe=Math.abs(Pe),se=Math.abs(se)-Pe,Math.max(0,x(se)-x(Pe))+1}m.FormatSpecifier=c,m.formatDefaultLocale=L,m.formatLocale=C,m.formatSpecifier=S,m.precisionFixed=j,m.precisionPrefix=Z,m.precisionRound=nl,Object.defineProperty(m,"__esModule",{value:!0})})}),ie=s((ot,Me)=>{Me.exports=function(m){for(var l=m.length,d,x=0;x<l;x++)if(d=m.charCodeAt(x),(d<9||d>13)&&d!==32&&d!==133&&d!==160&&d!==5760&&d!==6158&&(d<8192||d>8205)&&d!==8232&&d!==8233&&d!==8239&&d!==8287&&d!==8288&&d!==12288&&d!==65279)return!1;return!0}}),zn=s((ot,Me)=>{var m=ie();Me.exports=function(l){var d=typeof l;if(d==="string"){var x=l;if(l=+l,l===0&&m(x))return!1}else if(d!=="number")return!1;return l-l<1}}),Et=s((ot,Me)=>{Me.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}}),ml=s((ot,Me)=>{(function(m,l){typeof ot=="object"&&typeof Me<"u"?l(ot):(m=typeof globalThis<"u"?globalThis:m||self,l(m["base64-arraybuffer"]={}))})(ot,function(m){for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=typeof Uint8Array>"u"?[]:new Uint8Array(256),x=0;x<l.length;x++)d[l.charCodeAt(x)]=x;var v=function(w){var S=new Uint8Array(w),c,F=S.length,b="";for(c=0;c<F;c+=3)b+=l[S[c]>>2],b+=l[(S[c]&3)<<4|S[c+1]>>4],b+=l[(S[c+1]&15)<<2|S[c+2]>>6],b+=l[S[c+2]&63];return F%3===2?b=b.substring(0,b.length-1)+"=":F%3===1&&(b=b.substring(0,b.length-2)+"=="),b},y=function(w){var S=w.length*.75,c=w.length,F,b=0,R,B,O,P;w[w.length-1]==="="&&(S--,w[w.length-2]==="="&&S--);var D=new ArrayBuffer(S),H=new Uint8Array(D);for(F=0;F<c;F+=4)R=d[w.charCodeAt(F)],B=d[w.charCodeAt(F+1)],O=d[w.charCodeAt(F+2)],P=d[w.charCodeAt(F+3)],H[b++]=R<<2|B>>4,H[b++]=(B&15)<<4|O>>2,H[b++]=(O&3)<<6|P&63;return D};m.decode=y,m.encode=v,Object.defineProperty(m,"__esModule",{value:!0})})}),rl=s((ot,Me)=>{Me.exports=function(m){return window&&window.process&&window.process.versions?Object.prototype.toString.call(m)==="[object Object]":Object.prototype.toString.call(m)==="[object Object]"&&Object.getPrototypeOf(m).hasOwnProperty("hasOwnProperty")}}),Ml=s(ot=>{var Me=ml().decode,m=rl(),l=Array.isArray,d=ArrayBuffer,x=DataView;function v(R){return d.isView(R)&&!(R instanceof x)}ot.isTypedArray=v;function y(R){return l(R)||v(R)}ot.isArrayOrTypedArray=y;function w(R){return!y(R[0])}ot.isArray1D=w,ot.ensureArray=function(R,B){return l(R)||(R=[]),R.length=B,R};var S={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};S.uint8c=S.u1c,S.uint8=S.u1,S.int8=S.i1,S.uint16=S.u2,S.int16=S.i2,S.uint32=S.u4,S.int32=S.i4,S.float32=S.f4,S.float64=S.f8;function c(R){return R.constructor===ArrayBuffer}ot.isArrayBuffer=c,ot.decodeTypedArraySpec=function(R){var B=[],O=F(R),P=O.dtype,D=S[P];if(!D)throw new Error('Error in dtype: "'+P+'"');var H=D.BYTES_PER_ELEMENT,C=O.bdata;c(C)||(C=Me(C));var A=O.shape===void 0?[C.byteLength/H]:(""+O.shape).split(",");A.reverse();var L=A.length,j,Z,nl=+A[0],Pe=H*nl,se=0;if(L===1)B=new D(C);else if(L===2)for(j=+A[1],Z=0;Z<j;Z++)B[Z]=new D(C,se,nl),se+=Pe;else if(L===3){j=+A[1];for(var q=+A[2],ol=0;ol<q;ol++)for(B[ol]=[],Z=0;Z<j;Z++)B[ol][Z]=new D(C,se,nl),se+=Pe}else throw new Error("ndim: "+L+'is not supported with the shape:"'+O.shape+'"');return B.bdata=O.bdata,B.dtype=O.dtype,B.shape=A.reverse().join(","),R._inputArray=B,B},ot.isTypedArraySpec=function(R){return m(R)&&R.hasOwnProperty("dtype")&&typeof R.dtype=="string"&&R.hasOwnProperty("bdata")&&(typeof R.bdata=="string"||c(R.bdata))&&(R.shape===void 0||R.hasOwnProperty("shape")&&(typeof R.shape=="string"||typeof R.shape=="number"))};function F(R){return{bdata:R.bdata,dtype:R.dtype,shape:R.shape}}ot.concat=function(){var R=[],B=!0,O=0,P,D,H,C,A,L,j,Z;for(H=0;H<arguments.length;H++)C=arguments[H],L=C.length,L&&(D?R.push(C):(D=C,A=L),l(C)?P=!1:(B=!1,O?P!==C.constructor&&(P=!1):P=C.constructor),O+=L);if(!O)return[];if(!R.length)return D;if(B)return D.concat.apply(D,R);if(P){for(j=new P(O),j.set(D),H=0;H<R.length;H++)C=R[H],j.set(C,A),A+=C.length;return j}for(j=new Array(O),Z=0;Z<D.length;Z++)j[Z]=D[Z];for(H=0;H<R.length;H++){for(C=R[H],Z=0;Z<C.length;Z++)j[A+Z]=C[Z];A+=Z}return j},ot.maxRowLength=function(R){return b(R,Math.max,0)},ot.minRowLength=function(R){return b(R,Math.min,1/0)};function b(R,B,O){if(y(R))if(y(R[0])){for(var P=O,D=0;D<R.length;D++)P=B(P,R[D].length);return P}else return R.length;return 0}}),kl=s((ot,Me)=>{var m=zn(),l=Ml().isArrayOrTypedArray;Me.exports=function(b,R){if(m(R))R=String(R);else if(typeof R!="string"||R.substr(R.length-4)==="[-1]")throw"bad property string";var B=R.split("."),O,P,D,H;for(H=0;H<B.length;H++)if(String(B[H]).slice(0,2)==="__")throw"bad property string";for(H=0;H<B.length;){if(O=String(B[H]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),O){if(O[1])B[H]=O[1];else if(H===0)B.splice(0,1);else throw"bad property string";for(P=O[2].substr(1,O[2].length-2).split("]["),D=0;D<P.length;D++)H++,B.splice(H,0,Number(P[D]))}H++}return typeof b!="object"?F(b,R,B):{set:y(b,B,R),get:d(b,B),astr:R,parts:B,obj:b}};function d(b,R){return function(B){var O=b,P,D,H,C,A;for(C=0;C<R.length-1;C++){if(P=R[C],P===-1){for(D=!0,H=[],A=0;A<O.length;A++)H[A]=d(O[A],R.slice(C+1))(B),H[A]!==H[0]&&(D=!1);return D?H[0]:H}if(typeof P=="number"&&!l(O)||(O=O[P],typeof O!="object"||O===null))return}if(!(typeof O!="object"||O===null)&&(H=O[R[C]],!(!B&&H===null)))return H}}var x=/(^|\.)args\[/;function v(b,R){return b===void 0||b===null&&!R.match(x)}function y(b,R,B){return function(O){var P=b,D="",H=v(O,B),C,A;for(A=0;A<R.length-1;A++){if(C=R[A],typeof C=="number"&&!l(P))throw"array index but container is not an array";if(C===-1){if(H=!S(P,R.slice(A+1),O,B),H)break;return}if(!c(P,C,R[A+1],H))break;if(P=P[C],typeof P!="object"||P===null)throw"container is not an object";D=w(D,C)}if(H){if(A===R.length-1&&(delete P[R[A]],Array.isArray(P)&&+R[A]===P.length-1))for(;P.length&&P[P.length-1]===void 0;)P.pop()}else P[R[A]]=O}}function w(b,R){var B=R;return m(R)?B="["+R+"]":b&&(B="."+R),b+B}function S(b,R,B,O){var P=l(B),D=!0,H=B,C=O.replace("-1",0),A=P?!1:v(B,C),L=R[0],j;for(j=0;j<b.length;j++)C=O.replace("-1",j),P&&(H=B[j%B.length],A=v(H,C)),A&&(D=!1),c(b,j,L,A)&&y(b[j],R,O.replace("-1",j))(H);return D}function c(b,R,B,O){if(b[R]===void 0){if(O)return!1;typeof B=="number"?b[R]=[]:b[R]={}}return!0}function F(b,R,B){return{set:function(){throw"bad container"},get:function(){},astr:R,parts:B,obj:b}}}),_u=s((ot,Me)=>{var m=kl(),l=/^\w*$/,d=0,x=1,v=2,y=3,w=4;Me.exports=function(S,c,F,b){F=F||"name",b=b||"value";var R,B,O,P={};c&&c.length?(O=m(S,c),B=O.get()):B=S,c=c||"";var D={};if(B)for(R=0;R<B.length;R++)D[B[R][F]]=R;var H=l.test(b),C={set:function(A,L){var j=L===null?w:d;if(!B){if(!O||j===w)return;B=[],O.set(B)}var Z=D[A];if(Z===void 0){if(j===w)return;j=j|y,Z=B.length,D[A]=Z}else L!==(H?B[Z][b]:m(B[Z],b).get())&&(j=j|v);var nl=B[Z]=B[Z]||{};return nl[F]=A,H?nl[b]=L:m(nl,b).set(L),L!==null&&(j=j&~w),P[Z]=P[Z]|j,C},get:function(A){if(B){var L=D[A];if(L!==void 0)return H?B[L][b]:m(B[L],b).get()}},rename:function(A,L){var j=D[A];return j===void 0||(P[j]=P[j]|x,D[L]=j,delete D[A],B[j][F]=L),C},remove:function(A){var L=D[A];if(L===void 0)return C;var j=B[L];if(Object.keys(j).length>2)return P[L]=P[L]|v,C.set(A,null);if(H){for(R=L;R<B.length;R++)P[R]=P[R]|y;for(R=L;R<B.length;R++)D[B[R][F]]--;B.splice(L,1),delete D[A]}else m(j,b).set(null),P[L]=P[L]|v|w;return C},constructUpdate:function(){for(var A,L,j={},Z=Object.keys(P),nl=0;nl<Z.length;nl++)L=Z[nl],A=c+"["+L+"]",B[L]?(P[L]&x&&(j[A+"."+F]=B[L][F]),P[L]&v&&(H?j[A+"."+b]=P[L]&w?null:B[L][b]:j[A+"."+b]=P[L]&w?null:m(B[L],b).get())):j[A]=null;return j}};return C}}),Hu=s((ot,Me)=>{var m=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,l=/^[^\.\[\]]+$/;Me.exports=function(d,x){for(;x;){var v=d.match(m);if(v)d=v[1];else if(d.match(l))d="";else throw new Error("bad relativeAttr call:"+[d,x]);if(x.charAt(0)==="^")x=x.slice(1);else break}return d&&x.charAt(0)!=="["?d+"."+x:d+x}}),bu=s((ot,Me)=>{var m=zn();Me.exports=function(l,d){if(l>0)return Math.log(l)/Math.LN10;var x=Math.log(Math.min(d[0],d[1]))/Math.LN10;return m(x)||(x=Math.log(Math.max(d[0],d[1]))/Math.LN10-6),x}}),dl=s((ot,Me)=>{var m=Ml().isArrayOrTypedArray,l=rl();Me.exports=function d(x,v){for(var y in v){var w=v[y],S=x[y];if(S!==w)if(y.charAt(0)==="_"||typeof w=="function"){if(y in x)continue;x[y]=w}else if(m(w)&&m(S)&&l(w[0])){if(y==="customdata"||y==="ids")continue;for(var c=Math.min(w.length,S.length),F=0;F<c;F++)S[F]!==w[F]&&l(w[F])&&l(S[F])&&d(S[F],w[F])}else l(w)&&l(S)&&(d(S,w),Object.keys(S).length||delete x[y])}}}),Tl=s((ot,Me)=>{function m(d,x){var v=d%x;return v<0?v+x:v}function l(d,x){return Math.abs(d)>x/2?d-Math.round(d/x)*x:d}Me.exports={mod:m,modHalf:l}}),$l=s((ot,Me)=>{(function(m){var l=/^\s+/,d=/\s+$/,x=0,v=m.round,y=m.min,w=m.max,S=m.random;function c(U,re){if(U=U||"",re=re||{},U instanceof c)return U;if(!(this instanceof c))return new c(U,re);var Ft=F(U);this._originalInput=U,this._r=Ft.r,this._g=Ft.g,this._b=Ft.b,this._a=Ft.a,this._roundA=v(100*this._a)/100,this._format=re.format||Ft.format,this._gradientType=re.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=Ft.ok,this._tc_id=x++}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var U=this.toRgb();return(U.r*299+U.g*587+U.b*114)/1e3},getLuminance:function(){var U=this.toRgb(),re,Ft,ls,_l,Ll,zl;return re=U.r/255,Ft=U.g/255,ls=U.b/255,re<=.03928?_l=re/12.92:_l=m.pow((re+.055)/1.055,2.4),Ft<=.03928?Ll=Ft/12.92:Ll=m.pow((Ft+.055)/1.055,2.4),ls<=.03928?zl=ls/12.92:zl=m.pow((ls+.055)/1.055,2.4),.2126*_l+.7152*Ll+.0722*zl},setAlpha:function(U){return this._a=ll(U),this._roundA=v(100*this._a)/100,this},toHsv:function(){var U=O(this._r,this._g,this._b);return{h:U.h*360,s:U.s,v:U.v,a:this._a}},toHsvString:function(){var U=O(this._r,this._g,this._b),re=v(U.h*360),Ft=v(U.s*100),ls=v(U.v*100);return this._a==1?"hsv("+re+", "+Ft+"%, "+ls+"%)":"hsva("+re+", "+Ft+"%, "+ls+"%, "+this._roundA+")"},toHsl:function(){var U=R(this._r,this._g,this._b);return{h:U.h*360,s:U.s,l:U.l,a:this._a}},toHslString:function(){var U=R(this._r,this._g,this._b),re=v(U.h*360),Ft=v(U.s*100),ls=v(U.l*100);return this._a==1?"hsl("+re+", "+Ft+"%, "+ls+"%)":"hsla("+re+", "+Ft+"%, "+ls+"%, "+this._roundA+")"},toHex:function(U){return D(this._r,this._g,this._b,U)},toHexString:function(U){return"#"+this.toHex(U)},toHex8:function(U){return H(this._r,this._g,this._b,this._a,U)},toHex8String:function(U){return"#"+this.toHex8(U)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(ul(this._r,255)*100)+"%",g:v(ul(this._g,255)*100)+"%",b:v(ul(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+v(ul(this._r,255)*100)+"%, "+v(ul(this._g,255)*100)+"%, "+v(ul(this._b,255)*100)+"%)":"rgba("+v(ul(this._r,255)*100)+"%, "+v(ul(this._g,255)*100)+"%, "+v(ul(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:sl[D(this._r,this._g,this._b,!0)]||!1},toFilter:function(U){var re="#"+C(this._r,this._g,this._b,this._a),Ft=re,ls=this._gradientType?"GradientType = 1, ":"";if(U){var _l=c(U);Ft="#"+C(_l._r,_l._g,_l._b,_l._a)}return"progid:DXImageTransform.Microsoft.gradient("+ls+"startColorstr="+re+",endColorstr="+Ft+")"},toString:function(U){var re=!!U;U=U||this._format;var Ft=!1,ls=this._a<1&&this._a>=0,_l=!re&&ls&&(U==="hex"||U==="hex6"||U==="hex3"||U==="hex4"||U==="hex8"||U==="name");return _l?U==="name"&&this._a===0?this.toName():this.toRgbString():(U==="rgb"&&(Ft=this.toRgbString()),U==="prgb"&&(Ft=this.toPercentageRgbString()),(U==="hex"||U==="hex6")&&(Ft=this.toHexString()),U==="hex3"&&(Ft=this.toHexString(!0)),U==="hex4"&&(Ft=this.toHex8String(!0)),U==="hex8"&&(Ft=this.toHex8String()),U==="name"&&(Ft=this.toName()),U==="hsl"&&(Ft=this.toHslString()),U==="hsv"&&(Ft=this.toHsvString()),Ft||this.toHexString())},clone:function(){return c(this.toString())},_applyModification:function(U,re){var Ft=U.apply(null,[this].concat([].slice.call(re)));return this._r=Ft._r,this._g=Ft._g,this._b=Ft._b,this.setAlpha(Ft._a),this},lighten:function(){return this._applyModification(Z,arguments)},brighten:function(){return this._applyModification(nl,arguments)},darken:function(){return this._applyModification(Pe,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(L,arguments)},greyscale:function(){return this._applyModification(j,arguments)},spin:function(){return this._applyModification(se,arguments)},_applyCombination:function(U,re){return U.apply(null,[this].concat([].slice.call(re)))},analogous:function(){return this._applyCombination(_t,arguments)},complement:function(){return this._applyCombination(q,arguments)},monochromatic:function(){return this._applyCombination(Fn,arguments)},splitcomplement:function(){return this._applyCombination(In,arguments)},triad:function(){return this._applyCombination(ol,arguments)},tetrad:function(){return this._applyCombination(nt,arguments)}},c.fromRatio=function(U,re){if(typeof U=="object"){var Ft={};for(var ls in U)U.hasOwnProperty(ls)&&(ls==="a"?Ft[ls]=U[ls]:Ft[ls]=gu(U[ls]));U=Ft}return c(U,re)};function F(U){var re={r:0,g:0,b:0},Ft=1,ls=null,_l=null,Ll=null,zl=!1,yu=!1;return typeof U=="string"&&(U=Sl(U)),typeof U=="object"&&(cl(U.r)&&cl(U.g)&&cl(U.b)?(re=b(U.r,U.g,U.b),zl=!0,yu=String(U.r).substr(-1)==="%"?"prgb":"rgb"):cl(U.h)&&cl(U.s)&&cl(U.v)?(ls=gu(U.s),_l=gu(U.v),re=P(U.h,ls,_l),zl=!0,yu="hsv"):cl(U.h)&&cl(U.s)&&cl(U.l)&&(ls=gu(U.s),Ll=gu(U.l),re=B(U.h,ls,Ll),zl=!0,yu="hsl"),U.hasOwnProperty("a")&&(Ft=U.a)),Ft=ll(Ft),{ok:zl,format:U.format||yu,r:y(255,w(re.r,0)),g:y(255,w(re.g,0)),b:y(255,w(re.b,0)),a:Ft}}function b(U,re,Ft){return{r:ul(U,255)*255,g:ul(re,255)*255,b:ul(Ft,255)*255}}function R(U,re,Ft){U=ul(U,255),re=ul(re,255),Ft=ul(Ft,255);var ls=w(U,re,Ft),_l=y(U,re,Ft),Ll,zl,yu=(ls+_l)/2;if(ls==_l)Ll=zl=0;else{var Vu=ls-_l;switch(zl=yu>.5?Vu/(2-ls-_l):Vu/(ls+_l),ls){case U:Ll=(re-Ft)/Vu+(re<Ft?6:0);break;case re:Ll=(Ft-U)/Vu+2;break;case Ft:Ll=(U-re)/Vu+4;break}Ll/=6}return{h:Ll,s:zl,l:yu}}function B(U,re,Ft){var ls,_l,Ll;U=ul(U,360),re=ul(re,100),Ft=ul(Ft,100);function zl(od,Ad,vd){return vd<0&&(vd+=1),vd>1&&(vd-=1),vd<1/6?od+(Ad-od)*6*vd:vd<1/2?Ad:vd<2/3?od+(Ad-od)*(2/3-vd)*6:od}if(re===0)ls=_l=Ll=Ft;else{var yu=Ft<.5?Ft*(1+re):Ft+re-Ft*re,Vu=2*Ft-yu;ls=zl(Vu,yu,U+1/3),_l=zl(Vu,yu,U),Ll=zl(Vu,yu,U-1/3)}return{r:ls*255,g:_l*255,b:Ll*255}}function O(U,re,Ft){U=ul(U,255),re=ul(re,255),Ft=ul(Ft,255);var ls=w(U,re,Ft),_l=y(U,re,Ft),Ll,zl,yu=ls,Vu=ls-_l;if(zl=ls===0?0:Vu/ls,ls==_l)Ll=0;else{switch(ls){case U:Ll=(re-Ft)/Vu+(re<Ft?6:0);break;case re:Ll=(Ft-U)/Vu+2;break;case Ft:Ll=(U-re)/Vu+4;break}Ll/=6}return{h:Ll,s:zl,v:yu}}function P(U,re,Ft){U=ul(U,360)*6,re=ul(re,100),Ft=ul(Ft,100);var ls=m.floor(U),_l=U-ls,Ll=Ft*(1-re),zl=Ft*(1-_l*re),yu=Ft*(1-(1-_l)*re),Vu=ls%6,od=[Ft,zl,Ll,Ll,yu,Ft][Vu],Ad=[yu,Ft,Ft,zl,Ll,Ll][Vu],vd=[Ll,Ll,yu,Ft,Ft,zl][Vu];return{r:od*255,g:Ad*255,b:vd*255}}function D(U,re,Ft,ls){var _l=[ql(v(U).toString(16)),ql(v(re).toString(16)),ql(v(Ft).toString(16))];return ls&&_l[0].charAt(0)==_l[0].charAt(1)&&_l[1].charAt(0)==_l[1].charAt(1)&&_l[2].charAt(0)==_l[2].charAt(1)?_l[0].charAt(0)+_l[1].charAt(0)+_l[2].charAt(0):_l.join("")}function H(U,re,Ft,ls,_l){var Ll=[ql(v(U).toString(16)),ql(v(re).toString(16)),ql(v(Ft).toString(16)),ql(Bn(ls))];return _l&&Ll[0].charAt(0)==Ll[0].charAt(1)&&Ll[1].charAt(0)==Ll[1].charAt(1)&&Ll[2].charAt(0)==Ll[2].charAt(1)&&Ll[3].charAt(0)==Ll[3].charAt(1)?Ll[0].charAt(0)+Ll[1].charAt(0)+Ll[2].charAt(0)+Ll[3].charAt(0):Ll.join("")}function C(U,re,Ft,ls){var _l=[ql(Bn(ls)),ql(v(U).toString(16)),ql(v(re).toString(16)),ql(v(Ft).toString(16))];return _l.join("")}c.equals=function(U,re){return!U||!re?!1:c(U).toRgbString()==c(re).toRgbString()},c.random=function(){return c.fromRatio({r:S(),g:S(),b:S()})};function A(U,re){re=re===0?0:re||10;var Ft=c(U).toHsl();return Ft.s-=re/100,Ft.s=fl(Ft.s),c(Ft)}function L(U,re){re=re===0?0:re||10;var Ft=c(U).toHsl();return Ft.s+=re/100,Ft.s=fl(Ft.s),c(Ft)}function j(U){return c(U).desaturate(100)}function Z(U,re){re=re===0?0:re||10;var Ft=c(U).toHsl();return Ft.l+=re/100,Ft.l=fl(Ft.l),c(Ft)}function nl(U,re){re=re===0?0:re||10;var Ft=c(U).toRgb();return Ft.r=w(0,y(255,Ft.r-v(255*-(re/100)))),Ft.g=w(0,y(255,Ft.g-v(255*-(re/100)))),Ft.b=w(0,y(255,Ft.b-v(255*-(re/100)))),c(Ft)}function Pe(U,re){re=re===0?0:re||10;var Ft=c(U).toHsl();return Ft.l-=re/100,Ft.l=fl(Ft.l),c(Ft)}function se(U,re){var Ft=c(U).toHsl(),ls=(Ft.h+re)%360;return Ft.h=ls<0?360+ls:ls,c(Ft)}function q(U){var re=c(U).toHsl();return re.h=(re.h+180)%360,c(re)}function ol(U){var re=c(U).toHsl(),Ft=re.h;return[c(U),c({h:(Ft+120)%360,s:re.s,l:re.l}),c({h:(Ft+240)%360,s:re.s,l:re.l})]}function nt(U){var re=c(U).toHsl(),Ft=re.h;return[c(U),c({h:(Ft+90)%360,s:re.s,l:re.l}),c({h:(Ft+180)%360,s:re.s,l:re.l}),c({h:(Ft+270)%360,s:re.s,l:re.l})]}function In(U){var re=c(U).toHsl(),Ft=re.h;return[c(U),c({h:(Ft+72)%360,s:re.s,l:re.l}),c({h:(Ft+216)%360,s:re.s,l:re.l})]}function _t(U,re,Ft){re=re||6,Ft=Ft||30;var ls=c(U).toHsl(),_l=360/Ft,Ll=[c(U)];for(ls.h=(ls.h-(_l*re>>1)+720)%360;--re;)ls.h=(ls.h+_l)%360,Ll.push(c(ls));return Ll}function Fn(U,re){re=re||6;for(var Ft=c(U).toHsv(),ls=Ft.h,_l=Ft.s,Ll=Ft.v,zl=[],yu=1/re;re--;)zl.push(c({h:ls,s:_l,v:Ll})),Ll=(Ll+yu)%1;return zl}c.mix=function(U,re,Ft){Ft=Ft===0?0:Ft||50;var ls=c(U).toRgb(),_l=c(re).toRgb(),Ll=Ft/100,zl={r:(_l.r-ls.r)*Ll+ls.r,g:(_l.g-ls.g)*Ll+ls.g,b:(_l.b-ls.b)*Ll+ls.b,a:(_l.a-ls.a)*Ll+ls.a};return c(zl)},c.readability=function(U,re){var Ft=c(U),ls=c(re);return(m.max(Ft.getLuminance(),ls.getLuminance())+.05)/(m.min(Ft.getLuminance(),ls.getLuminance())+.05)},c.isReadable=function(U,re,Ft){var ls=c.readability(U,re),_l,Ll;switch(Ll=!1,_l=st(Ft),_l.level+_l.size){case"AAsmall":case"AAAlarge":Ll=ls>=4.5;break;case"AAlarge":Ll=ls>=3;break;case"AAAsmall":Ll=ls>=7;break}return Ll},c.mostReadable=function(U,re,Ft){var ls=null,_l=0,Ll,zl,yu,Vu;Ft=Ft||{},zl=Ft.includeFallbackColors,yu=Ft.level,Vu=Ft.size;for(var od=0;od<re.length;od++)Ll=c.readability(U,re[od]),Ll>_l&&(_l=Ll,ls=c(re[od]));return c.isReadable(U,ls,{level:yu,size:Vu})||!zl?ls:(Ft.includeFallbackColors=!1,c.mostReadable(U,["#fff","#000"],Ft))};var al=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},sl=c.hexNames=ce(al);function ce(U){var re={};for(var Ft in U)U.hasOwnProperty(Ft)&&(re[U[Ft]]=Ft);return re}function ll(U){return U=parseFloat(U),(isNaN(U)||U<0||U>1)&&(U=1),U}function ul(U,re){El(U)&&(U="100%");var Ft=Ul(U);return U=y(re,w(0,parseFloat(U))),Ft&&(U=parseInt(U*re,10)/100),m.abs(U-re)<1e-6?1:U%re/parseFloat(re)}function fl(U){return y(1,w(0,U))}function bl(U){return parseInt(U,16)}function El(U){return typeof U=="string"&&U.indexOf(".")!=-1&&parseFloat(U)===1}function Ul(U){return typeof U=="string"&&U.indexOf("%")!=-1}function ql(U){return U.length==1?"0"+U:""+U}function gu(U){return U<=1&&(U=U*100+"%"),U}function Bn(U){return m.round(parseFloat(U)*255).toString(16)}function il(U){return bl(U)/255}var X=(function(){var U="[-\\+]?\\d+%?",re="[-\\+]?\\d*\\.\\d+%?",Ft="(?:"+re+")|(?:"+U+")",ls="[\\s|\\(]+("+Ft+")[,|\\s]+("+Ft+")[,|\\s]+("+Ft+")\\s*\\)?",_l="[\\s|\\(]+("+Ft+")[,|\\s]+("+Ft+")[,|\\s]+("+Ft+")[,|\\s]+("+Ft+")\\s*\\)?";return{CSS_UNIT:new RegExp(Ft),rgb:new RegExp("rgb"+ls),rgba:new RegExp("rgba"+_l),hsl:new RegExp("hsl"+ls),hsla:new RegExp("hsla"+_l),hsv:new RegExp("hsv"+ls),hsva:new RegExp("hsva"+_l),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function cl(U){return!!X.CSS_UNIT.exec(U)}function Sl(U){U=U.replace(l,"").replace(d,"").toLowerCase();var re=!1;if(al[U])U=al[U],re=!0;else if(U=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Ft;return(Ft=X.rgb.exec(U))?{r:Ft[1],g:Ft[2],b:Ft[3]}:(Ft=X.rgba.exec(U))?{r:Ft[1],g:Ft[2],b:Ft[3],a:Ft[4]}:(Ft=X.hsl.exec(U))?{h:Ft[1],s:Ft[2],l:Ft[3]}:(Ft=X.hsla.exec(U))?{h:Ft[1],s:Ft[2],l:Ft[3],a:Ft[4]}:(Ft=X.hsv.exec(U))?{h:Ft[1],s:Ft[2],v:Ft[3]}:(Ft=X.hsva.exec(U))?{h:Ft[1],s:Ft[2],v:Ft[3],a:Ft[4]}:(Ft=X.hex8.exec(U))?{r:bl(Ft[1]),g:bl(Ft[2]),b:bl(Ft[3]),a:il(Ft[4]),format:re?"name":"hex8"}:(Ft=X.hex6.exec(U))?{r:bl(Ft[1]),g:bl(Ft[2]),b:bl(Ft[3]),format:re?"name":"hex"}:(Ft=X.hex4.exec(U))?{r:bl(Ft[1]+""+Ft[1]),g:bl(Ft[2]+""+Ft[2]),b:bl(Ft[3]+""+Ft[3]),a:il(Ft[4]+""+Ft[4]),format:re?"name":"hex8"}:(Ft=X.hex3.exec(U))?{r:bl(Ft[1]+""+Ft[1]),g:bl(Ft[2]+""+Ft[2]),b:bl(Ft[3]+""+Ft[3]),format:re?"name":"hex"}:!1}function st(U){var re,Ft;return U=U||{level:"AA",size:"small"},re=(U.level||"AA").toUpperCase(),Ft=(U.size||"small").toLowerCase(),re!=="AA"&&re!=="AAA"&&(re="AA"),Ft!=="small"&&Ft!=="large"&&(Ft="small"),{level:re,size:Ft}}typeof Me<"u"&&Me.exports?Me.exports=c:window.tinycolor=c})(Math)}),Bl=s(ot=>{var Me=rl(),m=Array.isArray;function l(x,v){var y,w;for(y=0;y<x.length;y++){if(w=x[y],w!==null&&typeof w=="object")return!1;w!==void 0&&(v[y]=w)}return!0}ot.extendFlat=function(){return d(arguments,!1,!1,!1)},ot.extendDeep=function(){return d(arguments,!0,!1,!1)},ot.extendDeepAll=function(){return d(arguments,!0,!0,!1)},ot.extendDeepNoArrays=function(){return d(arguments,!0,!1,!0)};function d(x,v,y,w){var S=x[0],c=x.length,F,b,R,B,O,P,D;if(c===2&&m(S)&&m(x[1])&&S.length===0){if(D=l(x[1],S),D)return S;S.splice(0,S.length)}for(var H=1;H<c;H++){F=x[H];for(b in F)R=S[b],B=F[b],w&&m(B)?S[b]=B:v&&B&&(Me(B)||(O=m(B)))?(O?(O=!1,P=R&&m(R)?R:[]):P=R&&Me(R)?R:{},S[b]=d([P,B],v,y,w)):(typeof B<"u"||y)&&(S[b]=B)}return S}}),Pu=s((ot,Me)=>{Me.exports=function(m){var l=m.variantValues,d=m.editType,x=m.colorEditType;x===void 0&&(x=d);var v={editType:d,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};m.noNumericWeightValues&&(v.valType="enumerated",v.values=v.extras,v.extras=void 0,v.min=void 0,v.max=void 0);var y={family:{valType:"string",noBlank:!0,strict:!0,editType:d},size:{valType:"number",min:1,editType:d},color:{valType:"color",editType:x},weight:v,style:{editType:d,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:m.noFontVariant?void 0:{editType:d,valType:"enumerated",values:l||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:m.noFontTextcase?void 0:{editType:d,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:m.noFontLineposition?void 0:{editType:d,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:m.noFontShadow?void 0:{editType:d,valType:"string",dflt:m.autoShadowDflt?"auto":"none"},editType:d};return m.autoSize&&(y.size.dflt="auto"),m.autoColor&&(y.color.dflt="auto"),m.arrayOk&&(y.family.arrayOk=!0,y.weight.arrayOk=!0,y.style.arrayOk=!0,m.noFontVariant||(y.variant.arrayOk=!0),m.noFontTextcase||(y.textcase.arrayOk=!0),m.noFontLineposition||(y.lineposition.arrayOk=!0),m.noFontShadow||(y.shadow.arrayOk=!0),y.size.arrayOk=!0,y.color.arrayOk=!0),y}}),Il=s((ot,Me)=>{Me.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}}),ud=s((ot,Me)=>{var m=Il(),l=Pu(),d=l({editType:"none"});d.family.dflt=m.HOVERFONT,d.size.dflt=m.HOVERFONTSIZE,Me.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:d,grouptitlefont:l({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},showarrow:{valType:"boolean",dflt:!0,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}}),pd=s((ot,Me)=>{var m=Pu(),l=ud().hoverlabel,d=Bl().extendFlat;Me.exports={hoverlabel:{bgcolor:d({},l.bgcolor,{arrayOk:!0}),bordercolor:d({},l.bordercolor,{arrayOk:!0}),font:m({arrayOk:!0,editType:"none"}),align:d({},l.align,{arrayOk:!0}),namelength:d({},l.namelength,{arrayOk:!0}),showarrow:d({},l.showarrow),editType:"none"}}}),id=s((ot,Me)=>{var m=Pu(),l=pd();Me.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:m({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:l.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},uirevision:{valType:"any",editType:"none"}}}),rh=s((ot,Me)=>{var m=$l(),l={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},d=l.RdBu;function x(w,S){if(S||(S=d),!w)return S;function c(){try{w=l[w]||JSON.parse(w)}catch{w=S}}return typeof w=="string"&&(c(),typeof w=="string"&&c()),v(w)?w:S}function v(w){var S=0;if(!Array.isArray(w)||w.length<2||!w[0]||!w[w.length-1]||+w[0][0]!=0||+w[w.length-1][0]!=1)return!1;for(var c=0;c<w.length;c++){var F=w[c];if(F.length!==2||+F[0]<S||!m(F[1]).isValid())return!1;S=+F[0]}return!0}function y(w){return l[w]!==void 0?!0:v(w)}Me.exports={scales:l,defaultScale:d,get:x,isValid:y}}),qd=s(ot=>{ot.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ot.defaultLine="#444",ot.lightLine="#eee",ot.background="#fff",ot.borderLine="#BEC8D9",ot.lightFraction=1e3/11}),oh=s((ot,Me)=>{var m=$l(),l=zn(),d=Ml().isTypedArray,x=Me.exports={},v=qd();x.defaults=v.defaults;var y=x.defaultLine=v.defaultLine;x.lightLine=v.lightLine;var w=x.background=v.background;x.tinyRGB=function(c){var F=c.toRgb();return"rgb("+Math.round(F.r)+", "+Math.round(F.g)+", "+Math.round(F.b)+")"},x.rgb=function(c){return x.tinyRGB(m(c))},x.opacity=function(c){return c?m(c).getAlpha():0},x.addOpacity=function(c,F){var b=m(c).toRgb();return"rgba("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+", "+F+")"},x.combine=function(c,F){var b=m(c).toRgb();if(b.a===1)return m(c).toRgbString();var R=m(F||w).toRgb(),B=R.a===1?R:{r:255*(1-R.a)+R.r*R.a,g:255*(1-R.a)+R.g*R.a,b:255*(1-R.a)+R.b*R.a},O={r:B.r*(1-b.a)+b.r*b.a,g:B.g*(1-b.a)+b.g*b.a,b:B.b*(1-b.a)+b.b*b.a};return m(O).toRgbString()},x.interpolate=function(c,F,b){var R=m(c).toRgb(),B=m(F).toRgb(),O={r:b*R.r+(1-b)*B.r,g:b*R.g+(1-b)*B.g,b:b*R.b+(1-b)*B.b};return m(O).toRgbString()},x.contrast=function(c,F,b){var R=m(c);R.getAlpha()!==1&&(R=m(x.combine(c,w)));var B=R.isDark()?F?R.lighten(F):w:b?R.darken(b):y;return B.toString()},x.stroke=function(c,F){var b=m(F);c.style({stroke:x.tinyRGB(b),"stroke-opacity":b.getAlpha()})},x.fill=function(c,F){var b=m(F);c.style({fill:x.tinyRGB(b),"fill-opacity":b.getAlpha()})},x.clean=function(c){if(!(!c||typeof c!="object")){var F=Object.keys(c),b,R,B,O;for(b=0;b<F.length;b++)if(B=F[b],O=c[B],B.substr(B.length-5)==="color")if(Array.isArray(O))for(R=0;R<O.length;R++)O[R]=S(O[R]);else c[B]=S(O);else if(B.substr(B.length-10)==="colorscale"&&Array.isArray(O))for(R=0;R<O.length;R++)Array.isArray(O[R])&&(O[R][1]=S(O[R][1]));else if(Array.isArray(O)){var P=O[0];if(!Array.isArray(P)&&P&&typeof P=="object")for(R=0;R<O.length;R++)x.clean(O[R])}else O&&typeof O=="object"&&!d(O)&&x.clean(O)}};function S(c){if(l(c)||typeof c!="string")return c;var F=c.trim();if(F.substr(0,3)!=="rgb")return c;var b=F.match(/^rgba?\s*\(([^()]*)\)$/);if(!b)return c;var R=b[1].trim().split(/\s*[\s,]\s*/),B=F.charAt(3)==="a"&&R.length===4;if(!B&&R.length!==3)return c;for(var O=0;O<R.length;O++){if(!R[O].length||(R[O]=Number(R[O]),!(R[O]>=0)))return c;if(O===3)R[O]>1&&(R[O]=1);else if(R[O]>=1)return c}var P=Math.round(R[0]*255)+", "+Math.round(R[1]*255)+", "+Math.round(R[2]*255);return B?"rgba("+P+", "+R[3]+")":"rgb("+P+")"}}),Ed=s((ot,Me)=>{Me.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}}),Nl=s(ot=>{ot.counter=function(Me,m,l,d){var x=(m||"")+(l?"":"$"),v=d===!1?"":"^";return Me==="xy"?new RegExp(v+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+x):new RegExp(v+Me+"([2-9]|[1-9][0-9]+)?"+x)}}),Gd=s(ot=>{var Me=zn(),m=$l(),l=Bl().extendFlat,d=id(),x=rh(),v=oh(),y=Ed().DESELECTDIM,w=kl(),S=Nl().counter,c=Tl().modHalf,F=Ml().isArrayOrTypedArray,b=Ml().isTypedArraySpec,R=Ml().decodeTypedArraySpec;ot.valObjectMeta={data_array:{coerceFunction:function(O,P,D){P.set(F(O)?O:b(O)?R(O):D)}},enumerated:{coerceFunction:function(O,P,D,H){H.coerceNumber&&(O=+O),H.values.indexOf(O)===-1?P.set(D):P.set(O)},validateFunction:function(O,P){P.coerceNumber&&(O=+O);for(var D=P.values,H=0;H<D.length;H++){var C=String(D[H]);if(C.charAt(0)==="/"&&C.charAt(C.length-1)==="/"){var A=new RegExp(C.substr(1,C.length-2));if(A.test(O))return!0}else if(O===D[H])return!0}return!1}},boolean:{coerceFunction:function(O,P,D){O===!0||O===!1?P.set(O):P.set(D)}},number:{coerceFunction:function(O,P,D,H){b(O)&&(O=R(O)),!Me(O)||H.min!==void 0&&O<H.min||H.max!==void 0&&O>H.max?P.set(D):P.set(+O)}},integer:{coerceFunction:function(O,P,D,H){if((H.extras||[]).indexOf(O)!==-1){P.set(O);return}b(O)&&(O=R(O)),O%1||!Me(O)||H.min!==void 0&&O<H.min||H.max!==void 0&&O>H.max?P.set(D):P.set(+O)}},string:{coerceFunction:function(O,P,D,H){if(typeof O!="string"){var C=typeof O=="number";H.strict===!0||!C?P.set(D):P.set(String(O))}else H.noBlank&&!O?P.set(D):P.set(O)}},color:{coerceFunction:function(O,P,D){b(O)&&(O=R(O)),m(O).isValid()?P.set(O):P.set(D)}},colorlist:{coerceFunction:function(O,P,D){function H(C){return m(C).isValid()}!Array.isArray(O)||!O.length?P.set(D):O.every(H)?P.set(O):P.set(D)}},colorscale:{coerceFunction:function(O,P,D){P.set(x.get(O,D))}},angle:{coerceFunction:function(O,P,D){b(O)&&(O=R(O)),O==="auto"?P.set("auto"):Me(O)?P.set(c(+O,360)):P.set(D)}},subplotid:{coerceFunction:function(O,P,D,H){var C=H.regex||S(D);if(typeof O=="string"&&C.test(O)){P.set(O);return}P.set(D)},validateFunction:function(O,P){var D=P.dflt;return O===D?!0:typeof O!="string"?!1:!!S(D).test(O)}},flaglist:{coerceFunction:function(O,P,D,H){if((H.extras||[]).indexOf(O)!==-1){P.set(O);return}if(typeof O!="string"){P.set(D);return}for(var C=O.split("+"),A=0;A<C.length;){var L=C[A];H.flags.indexOf(L)===-1||C.indexOf(L)<A?C.splice(A,1):A++}C.length?P.set(C.join("+")):P.set(D)}},any:{coerceFunction:function(O,P,D){O===void 0?P.set(D):P.set(b(O)?R(O):O)}},info_array:{coerceFunction:function(O,P,D,H){function C(al,sl,ce){var ll,ul={set:function(fl){ll=fl}};return ce===void 0&&(ce=sl.dflt),ot.valObjectMeta[sl.valType].coerceFunction(al,ul,ce,sl),ll}if(b(O)&&(O=R(O)),!F(O)){P.set(D);return}var A=H.dimensions===2||H.dimensions==="1-2"&&Array.isArray(O)&&F(O[0]),L=H.items,j=[],Z=Array.isArray(L),nl=Z&&A&&F(L[0]),Pe=A&&Z&&!nl,se=Z&&!Pe?L.length:O.length,q,ol,nt,In,_t,Fn;if(D=Array.isArray(D)?D:[],A)for(q=0;q<se;q++)for(j[q]=[],nt=F(O[q])?O[q]:[],Pe?_t=L.length:Z?_t=L[q].length:_t=nt.length,ol=0;ol<_t;ol++)Pe?In=L[ol]:Z?In=L[q][ol]:In=L,Fn=C(nt[ol],In,(D[q]||[])[ol]),Fn!==void 0&&(j[q][ol]=Fn);else for(q=0;q<se;q++)Fn=C(O[q],Z?L[q]:L,D[q]),Fn!==void 0&&(j[q]=Fn);P.set(j)},validateFunction:function(O,P){if(!F(O))return!1;var D=P.items,H=Array.isArray(D),C=P.dimensions===2;if(!P.freeLength&&O.length!==D.length)return!1;for(var A=0;A<O.length;A++)if(C){if(!F(O[A])||!P.freeLength&&O[A].length!==D[A].length)return!1;for(var L=0;L<O[A].length;L++)if(!B(O[A][L],H?D[A][L]:D))return!1}else if(!B(O[A],H?D[A]:D))return!1;return!0}}},ot.coerce=function(O,P,D,H,C){var A=w(D,H).get(),L=w(O,H),j=w(P,H),Z=L.get(),nl=P._template;if(Z===void 0&&nl&&(Z=w(nl,H).get(),nl=0),C===void 0&&(C=A.dflt),A.arrayOk){if(F(Z))return j.set(Z),Z;if(b(Z))return Z=R(Z),j.set(Z),Z}var Pe=ot.valObjectMeta[A.valType].coerceFunction;Pe(Z,j,C,A);var se=j.get();return nl&&se===C&&!B(Z,A)&&(Z=w(nl,H).get(),Pe(Z,j,C,A),se=j.get()),se},ot.coerce2=function(O,P,D,H,C){var A=w(O,H),L=ot.coerce(O,P,D,H,C),j=A.get();return j!=null?L:!1},ot.coerceFont=function(O,P,D,H){H||(H={}),D=l({},D),D=l(D,H.overrideDflt||{});var C={family:O(P+".family",D.family),size:O(P+".size",D.size),color:O(P+".color",D.color),weight:O(P+".weight",D.weight),style:O(P+".style",D.style)};if(H.noFontVariant||(C.variant=O(P+".variant",D.variant)),H.noFontLineposition||(C.lineposition=O(P+".lineposition",D.lineposition)),H.noFontTextcase||(C.textcase=O(P+".textcase",D.textcase)),!H.noFontShadow){var A=D.shadow;A==="none"&&H.autoShadowDflt&&(A="auto"),C.shadow=O(P+".shadow",A)}return C},ot.coercePattern=function(O,P,D,H){var C=O(P+".shape"),A;if(C||(A=O(P+".path")),C||A){C&&O(P+".solidity"),O(P+".size");var L=O(P+".fillmode"),j=L==="overlay";if(!H){var Z=O(P+".bgcolor",j?D:void 0);O(P+".fgcolor",j?v.contrast(Z):D)}O(P+".fgopacity",j?.5:1)}},ot.coerceHoverinfo=function(O,P,D){var H=P._module.attributes,C=H.hoverinfo?H:d,A=C.hoverinfo,L;if(D._dataLength===1){var j=A.dflt==="all"?A.flags.slice():A.dflt.split("+");j.splice(j.indexOf("name"),1),L=j.join("+")}return ot.coerce(O,P,C,"hoverinfo",L)},ot.coerceSelectionMarkerOpacity=function(O,P){if(O.marker){var D=O.marker.opacity;if(D!==void 0){var H,C;!F(D)&&!O.selected&&!O.unselected&&(H=D,C=y*D),P("selected.marker.opacity",H),P("unselected.marker.opacity",C)}}};function B(O,P){var D=ot.valObjectMeta[P.valType];if(P.arrayOk&&F(O))return!0;if(D.validateFunction)return D.validateFunction(O,P);var H={},C=H,A={set:function(L){C=L}};return D.coerceFunction(O,A,H,P),C!==H}ot.validate=B}),Cd=s((ot,Me)=>{var m={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/un/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},l={};function d(x,v){for(var y in x){var w=x[y];w.valType?v[y]=w.dflt:(v[y]||(v[y]={}),d(w,v[y]))}}d(m,l),Me.exports={configAttributes:m,dfltConfig:l}}),Bu=s((ot,Me)=>{var m=$(),l=zn(),d=[];Me.exports=function(x,v){if(d.indexOf(x)!==-1)return;d.push(x);var y=1e3;l(v)?y=v:v==="long"&&(y=3e3);var w=m.select("body").selectAll(".plotly-notifier").data([0]);w.enter().append("div").classed("plotly-notifier",!0);var S=w.selectAll(".notifier-note").data(d);function c(F){F.duration(700).style("opacity",0).each("end",function(b){var R=d.indexOf(b);R!==-1&&d.splice(R,1),m.select(this).remove()})}S.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(F){var b=m.select(this);b.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){b.transition().call(c)});for(var R=b.append("p"),B=F.split(/<br\s*\/?>/g),O=0;O<B.length;O++)O&&R.append("br"),R.append("span").text(B[O]);v==="stick"?b.transition().duration(350).style("opacity",1):b.transition().duration(700).style("opacity",1).transition().delay(y).call(c)})}}),wh=s((ot,Me)=>{var m=Cd().dfltConfig,l=Bu(),d=Me.exports={};d.log=function(){var x;if(m.logging>1){var v=["LOG:"];for(x=0;x<arguments.length;x++)v.push(arguments[x]);console.trace.apply(console,v)}if(m.notifyOnLogging>1){var y=[];for(x=0;x<arguments.length;x++)y.push(arguments[x]);l(y.join("<br>"),"long")}},d.warn=function(){var x;if(m.logging>0){var v=["WARN:"];for(x=0;x<arguments.length;x++)v.push(arguments[x]);console.trace.apply(console,v)}if(m.notifyOnLogging>0){var y=[];for(x=0;x<arguments.length;x++)y.push(arguments[x]);l(y.join("<br>"),"stick")}},d.error=function(){var x;if(m.logging>0){var v=["ERROR:"];for(x=0;x<arguments.length;x++)v.push(arguments[x]);console.error.apply(console,v)}if(m.notifyOnLogging>0){var y=[];for(x=0;x<arguments.length;x++)y.push(arguments[x]);l(y.join("<br>"),"stick")}}}),Rd=s((ot,Me)=>{Me.exports=function(){}}),dh=s((ot,Me)=>{Me.exports=function(m,l){if(l instanceof RegExp){for(var d=l.toString(),x=0;x<m.length;x++)if(m[x]instanceof RegExp&&m[x].toString()===d)return m;m.push(l)}else(l||l===0)&&m.indexOf(l)===-1&&m.push(l);return m}}),Ih=s((ot,Me)=>{Me.exports=m;function m(){var l=new Float32Array(16);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}}),nd=s((ot,Me)=>{Me.exports=m;function m(l){var d=new Float32Array(16);return d[0]=l[0],d[1]=l[1],d[2]=l[2],d[3]=l[3],d[4]=l[4],d[5]=l[5],d[6]=l[6],d[7]=l[7],d[8]=l[8],d[9]=l[9],d[10]=l[10],d[11]=l[11],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15],d}}),Yd=s((ot,Me)=>{Me.exports=m;function m(l,d){return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=d[6],l[7]=d[7],l[8]=d[8],l[9]=d[9],l[10]=d[10],l[11]=d[11],l[12]=d[12],l[13]=d[13],l[14]=d[14],l[15]=d[15],l}}),Kh=s((ot,Me)=>{Me.exports=m;function m(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}}),rp=s((ot,Me)=>{Me.exports=m;function m(l,d){if(l===d){var x=d[1],v=d[2],y=d[3],w=d[6],S=d[7],c=d[11];l[1]=d[4],l[2]=d[8],l[3]=d[12],l[4]=x,l[6]=d[9],l[7]=d[13],l[8]=v,l[9]=w,l[11]=d[14],l[12]=y,l[13]=S,l[14]=c}else l[0]=d[0],l[1]=d[4],l[2]=d[8],l[3]=d[12],l[4]=d[1],l[5]=d[5],l[6]=d[9],l[7]=d[13],l[8]=d[2],l[9]=d[6],l[10]=d[10],l[11]=d[14],l[12]=d[3],l[13]=d[7],l[14]=d[11],l[15]=d[15];return l}}),lh=s((ot,Me)=>{Me.exports=m;function m(l,d){var x=d[0],v=d[1],y=d[2],w=d[3],S=d[4],c=d[5],F=d[6],b=d[7],R=d[8],B=d[9],O=d[10],P=d[11],D=d[12],H=d[13],C=d[14],A=d[15],L=x*c-v*S,j=x*F-y*S,Z=x*b-w*S,nl=v*F-y*c,Pe=v*b-w*c,se=y*b-w*F,q=R*H-B*D,ol=R*C-O*D,nt=R*A-P*D,In=B*C-O*H,_t=B*A-P*H,Fn=O*A-P*C,al=L*Fn-j*_t+Z*In+nl*nt-Pe*ol+se*q;return al?(al=1/al,l[0]=(c*Fn-F*_t+b*In)*al,l[1]=(y*_t-v*Fn-w*In)*al,l[2]=(H*se-C*Pe+A*nl)*al,l[3]=(O*Pe-B*se-P*nl)*al,l[4]=(F*nt-S*Fn-b*ol)*al,l[5]=(x*Fn-y*nt+w*ol)*al,l[6]=(C*Z-D*se-A*j)*al,l[7]=(R*se-O*Z+P*j)*al,l[8]=(S*_t-c*nt+b*q)*al,l[9]=(v*nt-x*_t-w*q)*al,l[10]=(D*Pe-H*Z+A*L)*al,l[11]=(B*Z-R*Pe-P*L)*al,l[12]=(c*ol-S*In-F*q)*al,l[13]=(x*In-v*ol+y*q)*al,l[14]=(H*j-D*nl-C*L)*al,l[15]=(R*nl-B*j+O*L)*al,l):null}}),yp=s((ot,Me)=>{Me.exports=m;function m(l,d){var x=d[0],v=d[1],y=d[2],w=d[3],S=d[4],c=d[5],F=d[6],b=d[7],R=d[8],B=d[9],O=d[10],P=d[11],D=d[12],H=d[13],C=d[14],A=d[15];return l[0]=c*(O*A-P*C)-B*(F*A-b*C)+H*(F*P-b*O),l[1]=-(v*(O*A-P*C)-B*(y*A-w*C)+H*(y*P-w*O)),l[2]=v*(F*A-b*C)-c*(y*A-w*C)+H*(y*b-w*F),l[3]=-(v*(F*P-b*O)-c*(y*P-w*O)+B*(y*b-w*F)),l[4]=-(S*(O*A-P*C)-R*(F*A-b*C)+D*(F*P-b*O)),l[5]=x*(O*A-P*C)-R*(y*A-w*C)+D*(y*P-w*O),l[6]=-(x*(F*A-b*C)-S*(y*A-w*C)+D*(y*b-w*F)),l[7]=x*(F*P-b*O)-S*(y*P-w*O)+R*(y*b-w*F),l[8]=S*(B*A-P*H)-R*(c*A-b*H)+D*(c*P-b*B),l[9]=-(x*(B*A-P*H)-R*(v*A-w*H)+D*(v*P-w*B)),l[10]=x*(c*A-b*H)-S*(v*A-w*H)+D*(v*b-w*c),l[11]=-(x*(c*P-b*B)-S*(v*P-w*B)+R*(v*b-w*c)),l[12]=-(S*(B*C-O*H)-R*(c*C-F*H)+D*(c*O-F*B)),l[13]=x*(B*C-O*H)-R*(v*C-y*H)+D*(v*O-y*B),l[14]=-(x*(c*C-F*H)-S*(v*C-y*H)+D*(v*F-y*c)),l[15]=x*(c*O-F*B)-S*(v*O-y*B)+R*(v*F-y*c),l}}),Cp=s((ot,Me)=>{Me.exports=m;function m(l){var d=l[0],x=l[1],v=l[2],y=l[3],w=l[4],S=l[5],c=l[6],F=l[7],b=l[8],R=l[9],B=l[10],O=l[11],P=l[12],D=l[13],H=l[14],C=l[15],A=d*S-x*w,L=d*c-v*w,j=d*F-y*w,Z=x*c-v*S,nl=x*F-y*S,Pe=v*F-y*c,se=b*D-R*P,q=b*H-B*P,ol=b*C-O*P,nt=R*H-B*D,In=R*C-O*D,_t=B*C-O*H;return A*_t-L*In+j*nt+Z*ol-nl*q+Pe*se}}),vp=s((ot,Me)=>{Me.exports=m;function m(l,d,x){var v=d[0],y=d[1],w=d[2],S=d[3],c=d[4],F=d[5],b=d[6],R=d[7],B=d[8],O=d[9],P=d[10],D=d[11],H=d[12],C=d[13],A=d[14],L=d[15],j=x[0],Z=x[1],nl=x[2],Pe=x[3];return l[0]=j*v+Z*c+nl*B+Pe*H,l[1]=j*y+Z*F+nl*O+Pe*C,l[2]=j*w+Z*b+nl*P+Pe*A,l[3]=j*S+Z*R+nl*D+Pe*L,j=x[4],Z=x[5],nl=x[6],Pe=x[7],l[4]=j*v+Z*c+nl*B+Pe*H,l[5]=j*y+Z*F+nl*O+Pe*C,l[6]=j*w+Z*b+nl*P+Pe*A,l[7]=j*S+Z*R+nl*D+Pe*L,j=x[8],Z=x[9],nl=x[10],Pe=x[11],l[8]=j*v+Z*c+nl*B+Pe*H,l[9]=j*y+Z*F+nl*O+Pe*C,l[10]=j*w+Z*b+nl*P+Pe*A,l[11]=j*S+Z*R+nl*D+Pe*L,j=x[12],Z=x[13],nl=x[14],Pe=x[15],l[12]=j*v+Z*c+nl*B+Pe*H,l[13]=j*y+Z*F+nl*O+Pe*C,l[14]=j*w+Z*b+nl*P+Pe*A,l[15]=j*S+Z*R+nl*D+Pe*L,l}}),mf=s((ot,Me)=>{Me.exports=m;function m(l,d,x){var v=x[0],y=x[1],w=x[2],S,c,F,b,R,B,O,P,D,H,C,A;return d===l?(l[12]=d[0]*v+d[4]*y+d[8]*w+d[12],l[13]=d[1]*v+d[5]*y+d[9]*w+d[13],l[14]=d[2]*v+d[6]*y+d[10]*w+d[14],l[15]=d[3]*v+d[7]*y+d[11]*w+d[15]):(S=d[0],c=d[1],F=d[2],b=d[3],R=d[4],B=d[5],O=d[6],P=d[7],D=d[8],H=d[9],C=d[10],A=d[11],l[0]=S,l[1]=c,l[2]=F,l[3]=b,l[4]=R,l[5]=B,l[6]=O,l[7]=P,l[8]=D,l[9]=H,l[10]=C,l[11]=A,l[12]=S*v+R*y+D*w+d[12],l[13]=c*v+B*y+H*w+d[13],l[14]=F*v+O*y+C*w+d[14],l[15]=b*v+P*y+A*w+d[15]),l}}),Zp=s((ot,Me)=>{Me.exports=m;function m(l,d,x){var v=x[0],y=x[1],w=x[2];return l[0]=d[0]*v,l[1]=d[1]*v,l[2]=d[2]*v,l[3]=d[3]*v,l[4]=d[4]*y,l[5]=d[5]*y,l[6]=d[6]*y,l[7]=d[7]*y,l[8]=d[8]*w,l[9]=d[9]*w,l[10]=d[10]*w,l[11]=d[11]*w,l[12]=d[12],l[13]=d[13],l[14]=d[14],l[15]=d[15],l}}),kf=s((ot,Me)=>{Me.exports=m;function m(l,d,x,v){var y=v[0],w=v[1],S=v[2],c=Math.sqrt(y*y+w*w+S*S),F,b,R,B,O,P,D,H,C,A,L,j,Z,nl,Pe,se,q,ol,nt,In,_t,Fn,al,sl;return Math.abs(c)<1e-6?null:(c=1/c,y*=c,w*=c,S*=c,F=Math.sin(x),b=Math.cos(x),R=1-b,B=d[0],O=d[1],P=d[2],D=d[3],H=d[4],C=d[5],A=d[6],L=d[7],j=d[8],Z=d[9],nl=d[10],Pe=d[11],se=y*y*R+b,q=w*y*R+S*F,ol=S*y*R-w*F,nt=y*w*R-S*F,In=w*w*R+b,_t=S*w*R+y*F,Fn=y*S*R+w*F,al=w*S*R-y*F,sl=S*S*R+b,l[0]=B*se+H*q+j*ol,l[1]=O*se+C*q+Z*ol,l[2]=P*se+A*q+nl*ol,l[3]=D*se+L*q+Pe*ol,l[4]=B*nt+H*In+j*_t,l[5]=O*nt+C*In+Z*_t,l[6]=P*nt+A*In+nl*_t,l[7]=D*nt+L*In+Pe*_t,l[8]=B*Fn+H*al+j*sl,l[9]=O*Fn+C*al+Z*sl,l[10]=P*Fn+A*al+nl*sl,l[11]=D*Fn+L*al+Pe*sl,d!==l&&(l[12]=d[12],l[13]=d[13],l[14]=d[14],l[15]=d[15]),l)}}),Eg=s((ot,Me)=>{Me.exports=m;function m(l,d,x){var v=Math.sin(x),y=Math.cos(x),w=d[4],S=d[5],c=d[6],F=d[7],b=d[8],R=d[9],B=d[10],O=d[11];return d!==l&&(l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l[12]=d[12],l[13]=d[13],l[14]=d[14],l[15]=d[15]),l[4]=w*y+b*v,l[5]=S*y+R*v,l[6]=c*y+B*v,l[7]=F*y+O*v,l[8]=b*y-w*v,l[9]=R*y-S*v,l[10]=B*y-c*v,l[11]=O*y-F*v,l}}),Gg=s((ot,Me)=>{Me.exports=m;function m(l,d,x){var v=Math.sin(x),y=Math.cos(x),w=d[0],S=d[1],c=d[2],F=d[3],b=d[8],R=d[9],B=d[10],O=d[11];return d!==l&&(l[4]=d[4],l[5]=d[5],l[6]=d[6],l[7]=d[7],l[12]=d[12],l[13]=d[13],l[14]=d[14],l[15]=d[15]),l[0]=w*y-b*v,l[1]=S*y-R*v,l[2]=c*y-B*v,l[3]=F*y-O*v,l[8]=w*v+b*y,l[9]=S*v+R*y,l[10]=c*v+B*y,l[11]=F*v+O*y,l}}),Hf=s((ot,Me)=>{Me.exports=m;function m(l,d,x){var v=Math.sin(x),y=Math.cos(x),w=d[0],S=d[1],c=d[2],F=d[3],b=d[4],R=d[5],B=d[6],O=d[7];return d!==l&&(l[8]=d[8],l[9]=d[9],l[10]=d[10],l[11]=d[11],l[12]=d[12],l[13]=d[13],l[14]=d[14],l[15]=d[15]),l[0]=w*y+b*v,l[1]=S*y+R*v,l[2]=c*y+B*v,l[3]=F*y+O*v,l[4]=b*y-w*v,l[5]=R*y-S*v,l[6]=B*y-c*v,l[7]=O*y-F*v,l}}),Rg=s((ot,Me)=>{Me.exports=m;function m(l,d,x){var v,y,w,S=x[0],c=x[1],F=x[2],b=Math.sqrt(S*S+c*c+F*F);return Math.abs(b)<1e-6?null:(b=1/b,S*=b,c*=b,F*=b,v=Math.sin(d),y=Math.cos(d),w=1-y,l[0]=S*S*w+y,l[1]=c*S*w+F*v,l[2]=F*S*w-c*v,l[3]=0,l[4]=S*c*w-F*v,l[5]=c*c*w+y,l[6]=F*c*w+S*v,l[7]=0,l[8]=S*F*w+c*v,l[9]=c*F*w-S*v,l[10]=F*F*w+y,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)}}),fg=s((ot,Me)=>{Me.exports=m;function m(l,d,x){var v=d[0],y=d[1],w=d[2],S=d[3],c=v+v,F=y+y,b=w+w,R=v*c,B=v*F,O=v*b,P=y*F,D=y*b,H=w*b,C=S*c,A=S*F,L=S*b;return l[0]=1-(P+H),l[1]=B+L,l[2]=O-A,l[3]=0,l[4]=B-L,l[5]=1-(R+H),l[6]=D+C,l[7]=0,l[8]=O+A,l[9]=D-C,l[10]=1-(R+P),l[11]=0,l[12]=x[0],l[13]=x[1],l[14]=x[2],l[15]=1,l}}),eg=s((ot,Me)=>{Me.exports=m;function m(l,d){return l[0]=d[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=d[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=d[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}}),Wg=s((ot,Me)=>{Me.exports=m;function m(l,d){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=d[0],l[13]=d[1],l[14]=d[2],l[15]=1,l}}),Lg=s((ot,Me)=>{Me.exports=m;function m(l,d){var x=Math.sin(d),v=Math.cos(d);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=v,l[6]=x,l[7]=0,l[8]=0,l[9]=-x,l[10]=v,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}}),$g=s((ot,Me)=>{Me.exports=m;function m(l,d){var x=Math.sin(d),v=Math.cos(d);return l[0]=v,l[1]=0,l[2]=-x,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=x,l[9]=0,l[10]=v,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}}),Bm=s((ot,Me)=>{Me.exports=m;function m(l,d){var x=Math.sin(d),v=Math.cos(d);return l[0]=v,l[1]=x,l[2]=0,l[3]=0,l[4]=-x,l[5]=v,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}}),Lm=s((ot,Me)=>{Me.exports=m;function m(l,d){var x=d[0],v=d[1],y=d[2],w=d[3],S=x+x,c=v+v,F=y+y,b=x*S,R=v*S,B=v*c,O=y*S,P=y*c,D=y*F,H=w*S,C=w*c,A=w*F;return l[0]=1-B-D,l[1]=R+A,l[2]=O-C,l[3]=0,l[4]=R-A,l[5]=1-b-D,l[6]=P+H,l[7]=0,l[8]=O+C,l[9]=P-H,l[10]=1-b-B,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}}),$m=s((ot,Me)=>{Me.exports=m;function m(l,d,x,v,y,w,S){var c=1/(x-d),F=1/(y-v),b=1/(w-S);return l[0]=w*2*c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=w*2*F,l[6]=0,l[7]=0,l[8]=(x+d)*c,l[9]=(y+v)*F,l[10]=(S+w)*b,l[11]=-1,l[12]=0,l[13]=0,l[14]=S*w*2*b,l[15]=0,l}}),_d=s((ot,Me)=>{Me.exports=m;function m(l,d,x,v,y){var w=1/Math.tan(d/2),S=1/(v-y);return l[0]=w/x,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=w,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(y+v)*S,l[11]=-1,l[12]=0,l[13]=0,l[14]=2*y*v*S,l[15]=0,l}}),Zd=s((ot,Me)=>{Me.exports=m;function m(l,d,x,v){var y=Math.tan(d.upDegrees*Math.PI/180),w=Math.tan(d.downDegrees*Math.PI/180),S=Math.tan(d.leftDegrees*Math.PI/180),c=Math.tan(d.rightDegrees*Math.PI/180),F=2/(S+c),b=2/(y+w);return l[0]=F,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=b,l[6]=0,l[7]=0,l[8]=-((S-c)*F*.5),l[9]=(y-w)*b*.5,l[10]=v/(x-v),l[11]=-1,l[12]=0,l[13]=0,l[14]=v*x/(x-v),l[15]=0,l}}),xh=s((ot,Me)=>{Me.exports=m;function m(l,d,x,v,y,w,S){var c=1/(d-x),F=1/(v-y),b=1/(w-S);return l[0]=-2*c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*F,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*b,l[11]=0,l[12]=(d+x)*c,l[13]=(y+v)*F,l[14]=(S+w)*b,l[15]=1,l}}),Fp=s((ot,Me)=>{var m=Kh();Me.exports=l;function l(d,x,v,y){var w,S,c,F,b,R,B,O,P,D,H=x[0],C=x[1],A=x[2],L=y[0],j=y[1],Z=y[2],nl=v[0],Pe=v[1],se=v[2];return Math.abs(H-nl)<1e-6&&Math.abs(C-Pe)<1e-6&&Math.abs(A-se)<1e-6?m(d):(B=H-nl,O=C-Pe,P=A-se,D=1/Math.sqrt(B*B+O*O+P*P),B*=D,O*=D,P*=D,w=j*P-Z*O,S=Z*B-L*P,c=L*O-j*B,D=Math.sqrt(w*w+S*S+c*c),D?(D=1/D,w*=D,S*=D,c*=D):(w=0,S=0,c=0),F=O*c-P*S,b=P*w-B*c,R=B*S-O*w,D=Math.sqrt(F*F+b*b+R*R),D?(D=1/D,F*=D,b*=D,R*=D):(F=0,b=0,R=0),d[0]=w,d[1]=F,d[2]=B,d[3]=0,d[4]=S,d[5]=b,d[6]=O,d[7]=0,d[8]=c,d[9]=R,d[10]=P,d[11]=0,d[12]=-(w*H+S*C+c*A),d[13]=-(F*H+b*C+R*A),d[14]=-(B*H+O*C+P*A),d[15]=1,d)}}),ip=s((ot,Me)=>{Me.exports=m;function m(l){return"mat4("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+", "+l[9]+", "+l[10]+", "+l[11]+", "+l[12]+", "+l[13]+", "+l[14]+", "+l[15]+")"}}),cf=s((ot,Me)=>{Me.exports={create:Ih(),clone:nd(),copy:Yd(),identity:Kh(),transpose:rp(),invert:lh(),adjoint:yp(),determinant:Cp(),multiply:vp(),translate:mf(),scale:Zp(),rotate:kf(),rotateX:Eg(),rotateY:Gg(),rotateZ:Hf(),fromRotation:Rg(),fromRotationTranslation:fg(),fromScaling:eg(),fromTranslation:Wg(),fromXRotation:Lg(),fromYRotation:$g(),fromZRotation:Bm(),fromQuat:Lm(),frustum:$m(),perspective:_d(),perspectiveFromFieldOfView:Zd(),ortho:xh(),lookAt:Fp(),str:ip()}}),Jh=s(ot=>{var Me=cf();ot.init2dArray=function(m,l){for(var d=new Array(m),x=0;x<m;x++)d[x]=new Array(l);return d},ot.transposeRagged=function(m){var l=0,d=m.length,x,v;for(x=0;x<d;x++)l=Math.max(l,m[x].length);var y=new Array(l);for(x=0;x<l;x++)for(y[x]=new Array(d),v=0;v<d;v++)y[x][v]=m[v][x];return y},ot.dot=function(m,l){if(!(m.length&&l.length)||m.length!==l.length)return null;var d=m.length,x,v;if(m[0].length)for(x=new Array(d),v=0;v<d;v++)x[v]=ot.dot(m[v],l);else if(l[0].length){var y=ot.transposeRagged(l);for(x=new Array(y.length),v=0;v<y.length;v++)x[v]=ot.dot(m,y[v])}else for(x=0,v=0;v<d;v++)x+=m[v]*l[v];return x},ot.translationMatrix=function(m,l){return[[1,0,m],[0,1,l],[0,0,1]]},ot.rotationMatrix=function(m){var l=m*Math.PI/180;return[[Math.cos(l),-Math.sin(l),0],[Math.sin(l),Math.cos(l),0],[0,0,1]]},ot.rotationXYMatrix=function(m,l,d){return ot.dot(ot.dot(ot.translationMatrix(l,d),ot.rotationMatrix(m)),ot.translationMatrix(-l,-d))},ot.apply3DTransform=function(m){return function(){var l=arguments,d=arguments.length===1?l[0]:[l[0],l[1],l[2]||0];return ot.dot(m,[d[0],d[1],d[2],1]).slice(0,3)}},ot.apply2DTransform=function(m){return function(){var l=arguments;l.length===3&&(l=l[0]);var d=arguments.length===1?l[0]:[l[0],l[1]];return ot.dot(m,[d[0],d[1],1]).slice(0,2)}},ot.apply2DTransform2=function(m){var l=ot.apply2DTransform(m);return function(d){return l(d.slice(0,2)).concat(l(d.slice(2,4)))}},ot.convertCssMatrix=function(m){if(m){var l=m.length;if(l===16)return m;if(l===6)return[m[0],m[1],0,0,m[2],m[3],0,0,0,0,1,0,m[4],m[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ot.inverseTransformMatrix=function(m){var l=[];return Me.invert(l,m),[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}}),lf=s((ot,Me)=>{var m=$(),l=wh(),d=Jh(),x=cf();function v(H){var C;if(typeof H=="string"){if(C=document.getElementById(H),C===null)throw new Error("No DOM element with id '"+H+"' exists on the page.");return C}else if(H==null)throw new Error("DOM element provided is null or undefined");return H}function y(H){var C=m.select(H);return C.node()instanceof HTMLElement&&C.size()&&C.classed("js-plotly-plot")}function w(H){var C=H&&H.parentNode;C&&C.removeChild(H)}function S(H,C){c("global",H,C)}function c(H,C,A){var L="plotly.js-style-"+H,j=document.getElementById(L);if(!(j&&j.matches(".no-inline-styles"))){j||(j=document.createElement("style"),j.setAttribute("id",L),j.appendChild(document.createTextNode("")),document.head.appendChild(j));var Z=j.sheet;Z?Z.insertRule?Z.insertRule(C+"{"+A+"}",0):Z.addRule?Z.addRule(C,A,0):l.warn("addStyleRule failed"):l.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function F(H){var C="plotly.js-style-"+H,A=document.getElementById(C);A&&w(A)}function b(H,C,A,L,j,Z){var nl=L.split(":"),Pe=j.split(":"),se="data-btn-style-event-added";Z||(Z=document),Z.querySelectorAll(H).forEach(function(q){q.getAttribute(se)||(q.addEventListener("mouseenter",function(){var ol=this.querySelector(A);ol&&(ol.style[nl[0]]=nl[1])}),q.addEventListener("mouseleave",function(){var ol=this.querySelector(A);ol&&(C&&this.matches(C)?ol.style[nl[0]]=nl[1]:ol.style[Pe[0]]=Pe[1])}),q.setAttribute(se,!0))})}function R(H){var C=O(H),A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return C.forEach(function(L){var j=B(L);if(j){var Z=d.convertCssMatrix(j);A=x.multiply(A,A,Z)}}),A}function B(H){var C=window.getComputedStyle(H,null),A=C.getPropertyValue("-webkit-transform")||C.getPropertyValue("-moz-transform")||C.getPropertyValue("-ms-transform")||C.getPropertyValue("-o-transform")||C.getPropertyValue("transform");return A==="none"?null:A.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(L){return+L})}function O(H){for(var C=[];P(H);)C.push(H),H=H.parentNode,typeof ShadowRoot=="function"&&H instanceof ShadowRoot&&(H=H.host);return C}function P(H){return H&&(H instanceof Element||H instanceof HTMLElement)}function D(H,C){return H&&C&&H.top===C.top&&H.left===C.left&&H.right===C.right&&H.bottom===C.bottom}Me.exports={getGraphDiv:v,isPlotDiv:y,removeElement:w,addStyleRule:S,addRelatedStyleRule:c,deleteRelatedStyleRule:F,setStyleOnHover:b,getFullTransformMatrix:R,getElementTransformMatrix:B,getElementAndAncestors:O,equalDomRects:D}}),vf=s((ot,Me)=>{Me.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}}),uf=s((ot,Me)=>{var m=Bl().extendFlat,l=rl(),d={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},x={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},v=d.flags.slice().concat(["fullReplot"]),y=x.flags.slice().concat("layoutReplot");Me.exports={traces:d,layout:x,traceFlags:function(){return w(v)},layoutFlags:function(){return w(y)},update:function(F,b){var R=b.editType;if(R&&R!=="none")for(var B=R.split("+"),O=0;O<B.length;O++)F[B[O]]=!0},overrideAll:S};function w(F){for(var b={},R=0;R<F.length;R++)b[F[R]]=!1;return b}function S(F,b,R){var B=m({},F);for(var O in B){var P=B[O];l(P)&&(B[O]=c(P,b,R,O))}return R==="from-root"&&(B.editType=b),B}function c(F,b,R,B){if(F.valType){var O=m({},F);if(O.editType=b,Array.isArray(F.items)){O.items=new Array(F.items.length);for(var P=0;P<F.items.length;P++)O.items[P]=c(F.items[P],b)}return O}else return S(F,b,B.charAt(0)==="_"?"nested":"from-root")}}),Gf=s(ot=>{ot.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ot.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},path:{valType:"string",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}}),Hm=s((ot,Me)=>{Me.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}}),Vg=s(ot=>{var Me=Hm(),m=Me.FORMAT_LINK,l=Me.DATE_FORMAT_LINK;function d(v){var y=v&&v.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(y?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),`Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".`,m,"for details on the formatting syntax.",`Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".`,l,"for details on the date formatting syntax."].join(" ")}ot.templateFormatStringDescription=d;function x(v){var y=v.description?" "+v.description:"",w=v.keys||[];if(w.length>0){for(var S=[],c=0;c<w.length;c++)S[c]="`"+w[c]+"`";y=y+"Finally, the template string has access to ",w.length===1?y=y+"variable "+S[0]:y=y+"variables "+S.slice(0,-1).join(", ")+" and "+S.slice(-1)+"."}return y}ot.hovertemplateAttrs=function(v,y){v=v||{},y=y||{},x(y);var w={valType:"string",dflt:"",editType:v.editType||"none"};return v.arrayOk!==!1&&(w.arrayOk=!0),w},ot.texttemplateAttrs=function(v,y){v=v||{},y=y||{},x(y);var w={valType:"string",dflt:"",editType:v.editType||"calc"};return v.arrayOk!==!1&&(w.arrayOk=!0),w},ot.shapeTexttemplateAttrs=function(v,y){v=v||{},y=y||{},v.newshape,x(y);var w={valType:"string",dflt:"",editType:v.editType||"arraydraw"};return w}}),Im=s((ot,Me)=>{function m(A,L){return L?L.d2l(A):A}function l(A,L){return L?L.l2d(A):A}function d(A){return A.x0}function x(A){return A.x1}function v(A){return A.y0}function y(A){return A.y1}function w(A){return A.x0shift||0}function S(A){return A.x1shift||0}function c(A){return A.y0shift||0}function F(A){return A.y1shift||0}function b(A,L){return m(A.x1,L)+S(A)-m(A.x0,L)-w(A)}function R(A,L,j){return m(A.y1,j)+F(A)-m(A.y0,j)-c(A)}function B(A,L){return Math.abs(b(A,L))}function O(A,L,j){return Math.abs(R(A,L,j))}function P(A,L,j){return A.type!=="line"?void 0:Math.sqrt(Math.pow(b(A,L),2)+Math.pow(R(A,L,j),2))}function D(A,L){return l((m(A.x1,L)+S(A)+m(A.x0,L)+w(A))/2,L)}function H(A,L,j){return l((m(A.y1,j)+F(A)+m(A.y0,j)+c(A))/2,j)}function C(A,L,j){return A.type!=="line"?void 0:R(A,L,j)/b(A,L)}Me.exports={x0:d,x1:x,y0:v,y1:y,slope:C,dx:b,dy:R,width:B,height:O,length:P,xcenter:D,ycenter:H}}),qg=s((ot,Me)=>{var m=uf().overrideAll,l=id(),d=Pu(),x=Gf().dash,v=Bl().extendFlat,y=Vg().shapeTexttemplateAttrs,w=Im();Me.exports=m({newshape:{visible:v({},l.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:v({},l.legend,{}),legendgroup:v({},l.legendgroup,{}),legendgrouptitle:{text:v({},l.legendgrouptitle.text,{}),font:d({})},legendrank:v({},l.legendrank,{}),legendwidth:v({},l.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:v({},x,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:v({},l.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:y({newshape:!0},{keys:Object.keys(w)}),font:d({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")}),vm=s((ot,Me)=>{var m=Gf().dash,l=Bl().extendFlat;Me.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:l({},m,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}}),am=s((ot,Me)=>{Me.exports=function(m){var l=m.editType;return{t:{valType:"number",dflt:0,editType:l},r:{valType:"number",dflt:0,editType:l},b:{valType:"number",dflt:0,editType:l},l:{valType:"number",dflt:0,editType:l},editType:l}}}),Jg=s((ot,Me)=>{var m=Pu(),l=vf(),d=qd(),x=qg(),v=vm(),y=am(),w=Bl().extendFlat,S=m({editType:"calc"});S.family.dflt='"Open Sans", verdana, arial, sans-serif',S.size.dflt=12,S.color.dflt=d.defaultLine,Me.exports={font:S,title:{text:{valType:"string",editType:"layoutstyle"},font:m({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:m({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:w(y({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:d.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:d.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:d.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:x.newshape,activeshape:x.activeshape,newselection:v.newselection,activeselection:v.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:w({},l.transition,{editType:"none"})}}),pf=s(()=>{(function(){if(!document.getElementById("ce8d464691048653ffe3a57c6c18ab566e8366f186677868cf724621a857b4fe")){var ot=document.createElement("style");ot.id="ce8d464691048653ffe3a57c6c18ab566e8366f186677868cf724621a857b4fe",ot.textContent=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0 0 0/0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(width <= 480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`,document.head.appendChild(ot)}})()}),ff=s(ot=>{var Me=wh(),m=Rd(),l=dh(),d=rl(),x=lf().addStyleRule,v=Bl(),y=id(),w=Jg(),S=v.extendFlat,c=v.extendDeepAll;ot.modules={},ot.allCategories={},ot.allTypes=[],ot.subplotsRegistry={},ot.componentsRegistry={},ot.layoutArrayContainers=[],ot.layoutArrayRegexes=[],ot.traceLayoutAttributes={},ot.localeRegistry={},ot.apiMethodRegistry={},ot.collectableSubplotTypes=null,ot.register=function(A){if(ot.collectableSubplotTypes=null,A)A&&!Array.isArray(A)&&(A=[A]);else throw new Error("No argument passed to Plotly.register.");for(var L=0;L<A.length;L++){var j=A[L];if(!j)throw new Error("Invalid module was attempted to be registered!");switch(j.moduleType){case"trace":F(j);break;case"transform":B(j);break;case"component":R(j);break;case"locale":O(j);break;case"apiMethod":var Z=j.name;ot.apiMethodRegistry[Z]=j.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ot.getModule=function(A){var L=ot.modules[C(A)];return L?L._module:!1},ot.traceIs=function(A,L){if(A=C(A),A==="various")return!1;var j=ot.modules[A];return j||(A&&Me.log("Unrecognized trace type "+A+"."),j=ot.modules[y.type.dflt]),!!j.categories[L]},ot.getComponentMethod=function(A,L){var j=ot.componentsRegistry[A];return j&&j[L]||m},ot.call=function(){var A=arguments[0],L=[].slice.call(arguments,1);return ot.apiMethodRegistry[A].apply(null,L)};function F(A){var L=A.name,j=A.categories,Z=A.meta;if(ot.modules[L]){Me.log("Type "+L+" already registered");return}ot.subplotsRegistry[A.basePlotModule.name]||b(A.basePlotModule);for(var nl={},Pe=0;Pe<j.length;Pe++)nl[j[Pe]]=!0,ot.allCategories[j[Pe]]=!0;ot.modules[L]={_module:A,categories:nl},Z&&Object.keys(Z).length&&(ot.modules[L].meta=Z),ot.allTypes.push(L);for(var se in ot.componentsRegistry)D(se,L);A.layoutAttributes&&S(ot.traceLayoutAttributes,A.layoutAttributes);var q=A.basePlotModule,ol=q.name;if(ol==="mapbox"){var nt=q.constants.styleRules;for(var In in nt)x(".js-plotly-plot .plotly .mapboxgl-"+In,nt[In])}ol==="map"&&pf(),(ol==="geo"||ol==="mapbox"||ol==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function b(A){var L=A.name;if(ot.subplotsRegistry[L]){Me.log("Plot type "+L+" already registered.");return}P(A),ot.subplotsRegistry[L]=A;for(var j in ot.componentsRegistry)H(j,A.name)}function R(A){if(typeof A.name!="string")throw new Error("Component module *name* must be a string.");var L=A.name;ot.componentsRegistry[L]=A,A.layoutAttributes&&(A.layoutAttributes._isLinkedToArray&&l(ot.layoutArrayContainers,L),P(A));for(var j in ot.modules)D(L,j);for(var Z in ot.subplotsRegistry)H(L,Z);A.schema&&A.schema.layout&&c(w,A.schema.layout)}function B(A){if(typeof A.name!="string")throw new Error("Transform module *name* must be a string.");var L="Transform module "+A.name,j=typeof A.transform=="function",Z=typeof A.calcTransform=="function";if(!j&&!Z)throw new Error(L+" is missing a *transform* or *calcTransform* method.");j&&Z&&Me.log([L+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),d(A.attributes)||Me.log(L+" registered without an *attributes* object."),typeof A.supplyDefaults!="function"&&Me.log(L+" registered without a *supplyDefaults* method.")}function O(A){var L=A.name,j=L.split("-")[0],Z=A.dictionary,nl=A.format,Pe=Z&&Object.keys(Z).length,se=nl&&Object.keys(nl).length,q=ot.localeRegistry,ol=q[L];if(ol||(q[L]=ol={}),j!==L){var nt=q[j];nt||(q[j]=nt={}),Pe&&nt.dictionary===ol.dictionary&&(nt.dictionary=Z),se&&nt.format===ol.format&&(nt.format=nl)}Pe&&(ol.dictionary=Z),se&&(ol.format=nl)}function P(A){if(A.layoutAttributes){var L=A.layoutAttributes._arrayAttrRegexps;if(L)for(var j=0;j<L.length;j++)l(ot.layoutArrayRegexes,L[j])}}function D(A,L){var j=ot.componentsRegistry[A].schema;if(!(!j||!j.traces)){var Z=j.traces[L];Z&&c(ot.modules[L]._module.attributes,Z)}}function H(A,L){var j=ot.componentsRegistry[A].schema;if(!(!j||!j.subplots)){var Z=ot.subplotsRegistry[L],nl=Z.layoutAttributes,Pe=Z.attr==="subplot"?Z.name:Z.attr;Array.isArray(Pe)&&(Pe=Pe[0]);var se=j.subplots[Pe];nl&&se&&c(nl,se)}}function C(A){return typeof A=="object"&&(A=A.type),A}}),r0=s(ot=>{var Me=oe().timeFormat,m=zn(),l=wh(),d=Tl().mod,x=Et(),v=x.BADNUM,y=x.ONEDAY,w=x.ONEHOUR,S=x.ONEMIN,c=x.ONESEC,F=x.EPOCHJD,b=ff(),R=oe().utcFormat,B=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,O=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,P=new Date().getFullYear()-70;function D(al){return al&&b.componentsRegistry.calendars&&typeof al=="string"&&al!=="gregorian"}ot.dateTick0=function(al,sl){var ce=H(al,!!sl);if(sl<2)return ce;var ll=ot.dateTime2ms(ce,al);return ll+=y*(sl-1),ot.ms2DateTime(ll,0,al)};function H(al,sl){return D(al)?sl?b.getComponentMethod("calendars","CANONICAL_SUNDAY")[al]:b.getComponentMethod("calendars","CANONICAL_TICK")[al]:sl?"2000-01-02":"2000-01-01"}ot.dfltRange=function(al){return D(al)?b.getComponentMethod("calendars","DFLTRANGE")[al]:["2000-01-01","2001-01-01"]},ot.isJSDate=function(al){return typeof al=="object"&&al!==null&&typeof al.getTime=="function"};var C,A;ot.dateTime2ms=function(al,sl){if(ot.isJSDate(al)){var ce=al.getTimezoneOffset()*S,ll=(al.getUTCMinutes()-al.getMinutes())*S+(al.getUTCSeconds()-al.getSeconds())*c+(al.getUTCMilliseconds()-al.getMilliseconds());if(ll){var ul=3*S;ce=ce-ul/2+d(ll-ce+ul/2,ul)}return al=Number(al)-ce,al>=C&&al<=A?al:v}if(typeof al!="string"&&typeof al!="number")return v;al=String(al);var fl=D(sl),bl=al.charAt(0);fl&&(bl==="G"||bl==="g")&&(al=al.substr(1),sl="");var El=fl&&sl.substr(0,7)==="chinese",Ul=al.match(El?O:B);if(!Ul)return v;var ql=Ul[1],gu=Ul[3]||"1",Bn=Number(Ul[5]||1),il=Number(Ul[7]||0),X=Number(Ul[9]||0),cl=Number(Ul[11]||0);if(fl){if(ql.length===2)return v;ql=Number(ql);var Sl;try{var st=b.getComponentMethod("calendars","getCal")(sl);if(El){var U=gu.charAt(gu.length-1)==="i";gu=parseInt(gu,10),Sl=st.newDate(ql,st.toMonthIndex(ql,gu,U),Bn)}else Sl=st.newDate(ql,Number(gu),Bn)}catch{return v}return Sl?(Sl.toJD()-F)*y+il*w+X*S+cl*c:v}ql.length===2?ql=(Number(ql)+2e3-P)%100+P:ql=Number(ql),gu-=1;var re=new Date(Date.UTC(2e3,gu,Bn,il,X));return re.setUTCFullYear(ql),re.getUTCMonth()!==gu||re.getUTCDate()!==Bn?v:re.getTime()+cl*c},C=ot.MIN_MS=ot.dateTime2ms("-9999"),A=ot.MAX_MS=ot.dateTime2ms("9999-12-31 23:59:59.9999"),ot.isDateTime=function(al,sl){return ot.dateTime2ms(al,sl)!==v};function L(al,sl){return String(al+Math.pow(10,sl)).substr(1)}var j=90*y,Z=3*w,nl=5*S;ot.ms2DateTime=function(al,sl,ce){if(typeof al!="number"||!(al>=C&&al<=A))return v;sl||(sl=0);var ll=Math.floor(d(al+.05,1)*10),ul=Math.round(al-ll/10),fl,bl,El,Ul,ql,gu;if(D(ce)){var Bn=Math.floor(ul/y)+F,il=Math.floor(d(al,y));try{fl=b.getComponentMethod("calendars","getCal")(ce).fromJD(Bn).formatDate("yyyy-mm-dd")}catch{fl=R("G%Y-%m-%d")(new Date(ul))}if(fl.charAt(0)==="-")for(;fl.length<11;)fl="-0"+fl.substr(1);else for(;fl.length<10;)fl="0"+fl;bl=sl<j?Math.floor(il/w):0,El=sl<j?Math.floor(il%w/S):0,Ul=sl<Z?Math.floor(il%S/c):0,ql=sl<nl?il%c*10+ll:0}else gu=new Date(ul),fl=R("%Y-%m-%d")(gu),bl=sl<j?gu.getUTCHours():0,El=sl<j?gu.getUTCMinutes():0,Ul=sl<Z?gu.getUTCSeconds():0,ql=sl<nl?gu.getUTCMilliseconds()*10+ll:0;return Pe(fl,bl,El,Ul,ql)},ot.ms2DateTimeLocal=function(al){if(!(al>=C+y&&al<=A-y))return v;var sl=Math.floor(d(al+.05,1)*10),ce=new Date(Math.round(al-sl/10)),ll=Me("%Y-%m-%d")(ce),ul=ce.getHours(),fl=ce.getMinutes(),bl=ce.getSeconds(),El=ce.getUTCMilliseconds()*10+sl;return Pe(ll,ul,fl,bl,El)};function Pe(al,sl,ce,ll,ul){if((sl||ce||ll||ul)&&(al+=" "+L(sl,2)+":"+L(ce,2),(ll||ul)&&(al+=":"+L(ll,2),ul))){for(var fl=4;ul%10===0;)fl-=1,ul/=10;al+="."+L(ul,fl)}return al}ot.cleanDate=function(al,sl,ce){if(al===v)return sl;if(ot.isJSDate(al)||typeof al=="number"&&isFinite(al)){if(D(ce))return l.error("JS Dates and milliseconds are incompatible with world calendars",al),sl;if(al=ot.ms2DateTimeLocal(+al),!al&&sl!==void 0)return sl}else if(!ot.isDateTime(al,ce))return l.error("unrecognized date",al),sl;return al};var se=/%\d?f/g,q=/%h/g,ol={1:"1",2:"1",3:"2",4:"2"};function nt(al,sl,ce,ll){al=al.replace(se,function(fl){var bl=Math.min(+fl.charAt(1)||6,6),El=(sl/1e3%1+2).toFixed(bl).substr(2).replace(/0+$/,"")||"0";return El});var ul=new Date(Math.floor(sl+.05));if(al=al.replace(q,function(){return ol[ce("%q")(ul)]}),D(ll))try{al=b.getComponentMethod("calendars","worldCalFmt")(al,sl,ll)}catch{return"Invalid"}return ce(al)(ul)}var In=[59,59.9,59.99,59.999,59.9999];function _t(al,sl){var ce=d(al+.05,y),ll=L(Math.floor(ce/w),2)+":"+L(d(Math.floor(ce/S),60),2);if(sl!=="M"){m(sl)||(sl=0);var ul=Math.min(d(al/c,60),In[sl]),fl=(100+ul).toFixed(sl).substr(1);sl>0&&(fl=fl.replace(/0+$/,"").replace(/[\.]$/,"")),ll+=":"+fl}return ll}ot.formatDate=function(al,sl,ce,ll,ul,fl){if(ul=D(ul)&&ul,!sl)if(ce==="y")sl=fl.year;else if(ce==="m")sl=fl.month;else if(ce==="d")sl=fl.dayMonth+`
`+fl.year;else return _t(al,ce)+`
`+nt(fl.dayMonthYear,al,ll,ul);return nt(sl,al,ll,ul)};var Fn=3*y;ot.incrementMonth=function(al,sl,ce){ce=D(ce)&&ce;var ll=d(al,y);if(al=Math.round(al-ll),ce)try{var ul=Math.round(al/y)+F,fl=b.getComponentMethod("calendars","getCal")(ce),bl=fl.fromJD(ul);return sl%12?fl.add(bl,sl,"m"):fl.add(bl,sl/12,"y"),(bl.toJD()-F)*y+ll}catch{l.error("invalid ms "+al+" in calendar "+ce)}var El=new Date(al+Fn);return El.setUTCMonth(El.getUTCMonth()+sl)+ll-Fn},ot.findExactDates=function(al,sl){for(var ce=0,ll=0,ul=0,fl=0,bl,El,Ul=D(sl)&&b.getComponentMethod("calendars","getCal")(sl),ql=0;ql<al.length;ql++){if(El=al[ql],!m(El)){fl++;continue}if(!(El%y))if(Ul)try{bl=Ul.fromJD(El/y+F),bl.day()===1?bl.month()===1?ce++:ll++:ul++}catch{}else bl=new Date(El),bl.getUTCDate()===1?bl.getUTCMonth()===0?ce++:ll++:ul++}ll+=ce,ul+=ll;var gu=al.length-fl;return{exactYears:ce/gu,exactMonths:ll/gu,exactDays:ul/gu}}}),M0=s((ot,Me)=>{Me.exports=function(m){return m}}),wf=s(ot=>{var Me=zn(),m=wh(),l=M0(),d=Et().BADNUM,x=1e-9;ot.findBin=function(c,F,b){if(Me(F.start))return b?Math.ceil((c-F.start)/F.size-x)-1:Math.floor((c-F.start)/F.size+x);var R=0,B=F.length,O=0,P=B>1?(F[B-1]-F[0])/(B-1):1,D,H;for(P>=0?H=b?v:y:H=b?S:w,c+=P*x*(b?-1:1)*(P>=0?1:-1);R<B&&O++<100;)D=Math.floor((R+B)/2),H(F[D],c)?R=D+1:B=D;return O>90&&m.log("Long binary search..."),R-1};function v(c,F){return c<F}function y(c,F){return c<=F}function w(c,F){return c>F}function S(c,F){return c>=F}ot.sorterAsc=function(c,F){return c-F},ot.sorterDes=function(c,F){return F-c},ot.distinctVals=function(c){var F=c.slice();F.sort(ot.sorterAsc);var b;for(b=F.length-1;b>-1&&F[b]===d;b--);for(var R=F[b]-F[0]||1,B=R/(b||1)/1e4,O=[],P,D=0;D<=b;D++){var H=F[D],C=H-P;P===void 0?(O.push(H),P=H):C>B&&(R=Math.min(R,C),O.push(H),P=H)}return{vals:O,minDiff:R}},ot.roundUp=function(c,F,b){for(var R=0,B=F.length-1,O,P=0,D=b?0:1,H=b?1:0,C=b?Math.ceil:Math.floor;R<B&&P++<100;)O=C((R+B)/2),F[O]<=c?R=O+D:B=O-H;return F[R]},ot.sort=function(c,F){for(var b=0,R=0,B=1;B<c.length;B++){var O=F(c[B],c[B-1]);if(O<0?b=1:O>0&&(R=1),b&&R)return c.sort(F)}return R?c:c.reverse()},ot.findIndexOfMin=function(c,F){F=F||l;for(var b=1/0,R,B=0;B<c.length;B++){var O=F(c[B]);O<b&&(b=O,R=B)}return R}}),Gm=s((ot,Me)=>{Me.exports=function(m){return Object.keys(m).sort()}}),h0=s(ot=>{var Me=zn(),m=Ml().isArrayOrTypedArray;ot.aggNums=function(l,d,x,v){var y,w;if((!v||v>x.length)&&(v=x.length),Me(d)||(d=!1),m(x[0])){for(w=new Array(v),y=0;y<v;y++)w[y]=ot.aggNums(l,d,x[y]);x=w}for(y=0;y<v;y++)Me(d)?Me(x[y])&&(d=l(+d,+x[y])):d=x[y];return d},ot.len=function(l){return ot.aggNums(function(d){return d+1},0,l)},ot.mean=function(l,d){return d||(d=ot.len(l)),ot.aggNums(function(x,v){return x+v},0,l)/d},ot.geometricMean=function(l,d){return d||(d=ot.len(l)),Math.pow(ot.aggNums(function(x,v){return x*v},1,l),1/d)},ot.midRange=function(l){if(!(l===void 0||l.length===0))return(ot.aggNums(Math.max,null,l)+ot.aggNums(Math.min,null,l))/2},ot.variance=function(l,d,x){return d||(d=ot.len(l)),Me(x)||(x=ot.mean(l,d)),ot.aggNums(function(v,y){return v+Math.pow(y-x,2)},0,l)/d},ot.stdev=function(l,d,x){return Math.sqrt(ot.variance(l,d,x))},ot.median=function(l){var d=l.slice().sort();return ot.interp(d,.5)},ot.interp=function(l,d){if(!Me(d))throw"n should be a finite number";if(d=d*l.length-.5,d<0)return l[0];if(d>l.length-1)return l[l.length-1];var x=d%1;return x*l[Math.ceil(d)]+(1-x)*l[Math.floor(d)]}}),i0=s((ot,Me)=>{var m=Tl(),l=m.mod,d=m.modHalf,x=Math.PI,v=2*x;function y(H){return H/180*x}function w(H){return H/x*180}function S(H){return Math.abs(H[1]-H[0])>v-1e-14}function c(H,C){return d(C-H,v)}function F(H,C){return Math.abs(c(H,C))}function b(H,C){if(S(C))return!0;var A,L;C[0]<C[1]?(A=C[0],L=C[1]):(A=C[1],L=C[0]),A=l(A,v),L=l(L,v),A>L&&(L+=v);var j=l(H,v),Z=j+v;return j>=A&&j<=L||Z>=A&&Z<=L}function R(H,C,A,L){if(!b(C,L))return!1;var j,Z;return A[0]<A[1]?(j=A[0],Z=A[1]):(j=A[1],Z=A[0]),H>=j&&H<=Z}function B(H,C,A,L,j,Z,nl){j=j||0,Z=Z||0;var Pe=S([A,L]),se,q,ol,nt,In;Pe?(se=0,q=x,ol=v):A<L?(se=A,ol=L):(se=L,ol=A),H<C?(nt=H,In=C):(nt=C,In=H);function _t(ce,ll){return[ce*Math.cos(ll)+j,Z-ce*Math.sin(ll)]}var Fn=Math.abs(ol-se)<=x?0:1;function al(ce,ll,ul){return"A"+[ce,ce]+" "+[0,Fn,ul]+" "+_t(ce,ll)}var sl;return Pe?nt===null?sl="M"+_t(In,se)+al(In,q,0)+al(In,ol,0)+"Z":sl="M"+_t(nt,se)+al(nt,q,0)+al(nt,ol,0)+"ZM"+_t(In,se)+al(In,q,1)+al(In,ol,1)+"Z":nt===null?(sl="M"+_t(In,se)+al(In,ol,0),nl&&(sl+="L0,0Z")):sl="M"+_t(nt,se)+"L"+_t(In,se)+al(In,ol,0)+"L"+_t(nt,ol)+al(nt,se,1)+"Z",sl}function O(H,C,A,L,j){return B(null,H,C,A,L,j,0)}function P(H,C,A,L,j){return B(null,H,C,A,L,j,1)}function D(H,C,A,L,j,Z){return B(H,C,A,L,j,Z,1)}Me.exports={deg2rad:y,rad2deg:w,angleDelta:c,angleDist:F,isFullCircle:S,isAngleInsideSector:b,isPtInsideSector:R,pathArc:O,pathSector:P,pathAnnulus:D}}),Tm=s(ot=>{ot.isLeftAnchor=function(Me){return Me.xanchor==="left"||Me.xanchor==="auto"&&Me.x<=1/3},ot.isCenterAnchor=function(Me){return Me.xanchor==="center"||Me.xanchor==="auto"&&Me.x>1/3&&Me.x<2/3},ot.isRightAnchor=function(Me){return Me.xanchor==="right"||Me.xanchor==="auto"&&Me.x>=2/3},ot.isTopAnchor=function(Me){return Me.yanchor==="top"||Me.yanchor==="auto"&&Me.y>=2/3},ot.isMiddleAnchor=function(Me){return Me.yanchor==="middle"||Me.yanchor==="auto"&&Me.y>1/3&&Me.y<2/3},ot.isBottomAnchor=function(Me){return Me.yanchor==="bottom"||Me.yanchor==="auto"&&Me.y<=1/3}}),Vm=s(ot=>{var Me=Tl().mod;ot.segmentsIntersect=m;function m(y,w,S,c,F,b,R,B){var O=S-y,P=F-y,D=R-F,H=c-w,C=b-w,A=B-b,L=O*A-D*H;if(L===0)return null;var j=(P*A-D*C)/L,Z=(P*H-O*C)/L;return Z<0||Z>1||j<0||j>1?null:{x:y+O*j,y:w+H*j}}ot.segmentDistance=function(y,w,S,c,F,b,R,B){if(m(y,w,S,c,F,b,R,B))return 0;var O=S-y,P=c-w,D=R-F,H=B-b,C=O*O+P*P,A=D*D+H*H,L=Math.min(l(O,P,C,F-y,b-w),l(O,P,C,R-y,B-w),l(D,H,A,y-F,w-b),l(D,H,A,S-F,c-b));return Math.sqrt(L)};function l(y,w,S,c,F){var b=c*y+F*w;if(b<0)return c*c+F*F;if(b>S){var R=c-y,B=F-w;return R*R+B*B}else{var O=c*w-F*y;return O*O/S}}var d,x,v;ot.getTextLocation=function(y,w,S,c){if((y!==x||c!==v)&&(d={},x=y,v=c),d[S])return d[S];var F=y.getPointAtLength(Me(S-c/2,w)),b=y.getPointAtLength(Me(S+c/2,w)),R=Math.atan((b.y-F.y)/(b.x-F.x)),B=y.getPointAtLength(Me(S,w)),O=(B.x*4+F.x+b.x)/6,P=(B.y*4+F.y+b.y)/6,D={x:O,y:P,theta:R};return d[S]=D,D},ot.clearLocationCache=function(){x=null},ot.getVisibleSegment=function(y,w,S){var c=w.left,F=w.right,b=w.top,R=w.bottom,B=0,O=y.getTotalLength(),P=O,D,H;function C(L){var j=y.getPointAtLength(L);L===0?D=j:L===O&&(H=j);var Z=j.x<c?c-j.x:j.x>F?j.x-F:0,nl=j.y<b?b-j.y:j.y>R?j.y-R:0;return Math.sqrt(Z*Z+nl*nl)}for(var A=C(B);A;){if(B+=A+S,B>P)return;A=C(B)}for(A=C(P);A;){if(P-=A+S,B>P)return;A=C(P)}return{min:B,max:P,len:P-B,total:O,isClosed:B===0&&P===O&&Math.abs(D.x-H.x)<.1&&Math.abs(D.y-H.y)<.1}},ot.findPointOnPath=function(y,w,S,c){c=c||{};for(var F=c.pathLength||y.getTotalLength(),b=c.tolerance||.001,R=c.iterationLimit||30,B=y.getPointAtLength(0)[S]>y.getPointAtLength(F)[S]?-1:1,O=0,P=0,D=F,H,C,A;O<R;){if(H=(P+D)/2,C=y.getPointAtLength(H),A=C[S]-w,Math.abs(A)<b)return C;B*A>0?D=H:P=H,O++}return C}}),ym=s(ot=>{var Me={};ot.throttle=function(l,d,x){var v=Me[l],y=Date.now();if(!v){for(var w in Me)Me[w].ts<y-6e4&&delete Me[w];v=Me[l]={ts:0,timer:null}}m(v);function S(){x(),v.ts=Date.now(),v.onDone&&(v.onDone(),v.onDone=null)}if(y>v.ts+d){S();return}v.timer=setTimeout(function(){S(),v.timer=null},d)},ot.done=function(l){var d=Me[l];return!d||!d.timer?Promise.resolve():new Promise(function(x){var v=d.onDone;d.onDone=function(){v&&v(),x(),d.onDone=null}})},ot.clear=function(l){if(l)m(Me[l]),delete Me[l];else for(var d in Me)ot.clear(d)};function m(l){l&&l.timer!==null&&(clearTimeout(l.timer),l.timer=null)}}),l0=s((ot,Me)=>{Me.exports=function(m){m._responsiveChartHandler&&(window.removeEventListener("resize",m._responsiveChartHandler),delete m._responsiveChartHandler)}}),R0=s((ot,Me)=>{Me.exports=x,Me.exports.isMobile=x,Me.exports.default=x;var m=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,l=/CrOS/,d=/android|ipad|playbook|silk/i;function x(v){v||(v={});let y=v.ua;if(!y&&typeof navigator<"u"&&(y=navigator.userAgent),y&&y.headers&&typeof y.headers["user-agent"]=="string"&&(y=y.headers["user-agent"]),typeof y!="string")return!1;let w=m.test(y)&&!l.test(y)||!!v.tablet&&d.test(y);return!w&&v.tablet&&v.featureDetect&&navigator&&navigator.maxTouchPoints>1&&y.indexOf("Macintosh")!==-1&&y.indexOf("Safari")!==-1&&(w=!0),w}}),p0=s((ot,Me)=>{var m=zn(),l=R0();Me.exports=function(x){var v;if(x&&x.hasOwnProperty("userAgent")?v=x.userAgent:v=d(),typeof v!="string")return!0;var y=l({ua:{headers:{"user-agent":v}},tablet:!0,featureDetect:!1});if(!y)for(var w=v.split(" "),S=1;S<w.length;S++){var c=w[S];if(c.indexOf("Safari")!==-1)for(var F=S-1;F>-1;F--){var b=w[F];if(b.substr(0,8)==="Version/"){var R=b.substr(8).split(".")[0];if(m(R)&&(R=+R),R>=13)return!0}}}return y};function d(){var x;return typeof navigator<"u"&&(x=navigator.userAgent),x&&x.headers&&typeof x.headers["user-agent"]=="string"&&(x=x.headers["user-agent"]),x}}),j0=s((ot,Me)=>{var m=$();Me.exports=function(l,d,x){var v=l.selectAll("g."+x.replace(/\s/g,".")).data(d,function(w){return w[0].trace.uid});v.exit().remove(),v.enter().append("g").attr("class",x),v.order();var y=l.classed("rangeplot")?"nodeRangePlot3":"node3";return v.each(function(w){w[0][y]=m.select(this)}),v}}),lg=s((ot,Me)=>{var m=ff();Me.exports=function(l,d){for(var x=l._context.locale,v=0;v<2;v++){for(var y=l._context.locales,w=0;w<2;w++){var S=(y[x]||{}).dictionary;if(S){var c=S[d];if(c)return c}y=m.localeRegistry}var F=x.split("-")[0];if(F===x)break;x=F}return d}}),sm=s((ot,Me)=>{Me.exports=function(m){for(var l={},d=[],x=0,v=0;v<m.length;v++){var y=m[v];l[y]!==1&&(l[y]=1,d[x++]=y)}return d}}),Cg=s((ot,Me)=>{Me.exports=function(x){for(var v=d(x)?l:m,y=[],w=0;w<x.length;w++){var S=x[w];v(S)&&y.push(S)}return y};function m(x){return x.visible===!0}function l(x){var v=x[0].trace;return v.visible===!0&&v._length!==0}function d(x){return Array.isArray(x)&&Array.isArray(x[0])&&x[0][0]&&x[0][0].trace}}),S0=s((ot,Me)=>{Me.exports=function(m,l){if(!l)return m;var d=1/Math.abs(l),x=d>1?(d*m+d*l)/d:m+l,v=String(x).length;if(v>16){var y=String(l).length,w=String(m).length;if(v>=w+y){var S=parseFloat(x).toPrecision(12);S.indexOf("e+")===-1&&(x=+S)}}return x}}),Kp=s((ot,Me)=>{var m=zn(),l=Et().BADNUM,d=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;Me.exports=function(x){return typeof x=="string"&&(x=x.replace(d,"")),m(x)?Number(x):l}}),rt=s((ot,Me)=>{var m=$(),l=oe().utcFormat,d=Y().format,x=zn(),v=Et(),y=v.FP_SAFE,w=-y,S=v.BADNUM,c=Me.exports={};c.adjustFormat=function(st){return!st||/^\d[.]\df/.test(st)||/[.]\d%/.test(st)?st:st==="0.f"?"~f":/^\d%/.test(st)?"~%":/^\ds/.test(st)?"~s":!/^[~,.0$]/.test(st)&&/[&fps]/.test(st)?"~"+st:st};var F={};c.warnBadFormat=function(st){var U=String(st);F[U]||(F[U]=1,c.warn('encountered bad format: "'+U+'"'))},c.noFormat=function(st){return String(st)},c.numberFormat=function(st){var U;try{U=d(c.adjustFormat(st))}catch{return c.warnBadFormat(st),c.noFormat}return U},c.nestedProperty=kl(),c.keyedContainer=_u(),c.relativeAttr=Hu(),c.isPlainObject=rl(),c.toLogRange=bu(),c.relinkPrivateKeys=dl();var b=Ml();c.isArrayBuffer=b.isArrayBuffer,c.isTypedArray=b.isTypedArray,c.isArrayOrTypedArray=b.isArrayOrTypedArray,c.isArray1D=b.isArray1D,c.ensureArray=b.ensureArray,c.concat=b.concat,c.maxRowLength=b.maxRowLength,c.minRowLength=b.minRowLength;var R=Tl();c.mod=R.mod,c.modHalf=R.modHalf;var B=Gd();c.valObjectMeta=B.valObjectMeta,c.coerce=B.coerce,c.coerce2=B.coerce2,c.coerceFont=B.coerceFont,c.coercePattern=B.coercePattern,c.coerceHoverinfo=B.coerceHoverinfo,c.coerceSelectionMarkerOpacity=B.coerceSelectionMarkerOpacity,c.validate=B.validate;var O=r0();c.dateTime2ms=O.dateTime2ms,c.isDateTime=O.isDateTime,c.ms2DateTime=O.ms2DateTime,c.ms2DateTimeLocal=O.ms2DateTimeLocal,c.cleanDate=O.cleanDate,c.isJSDate=O.isJSDate,c.formatDate=O.formatDate,c.incrementMonth=O.incrementMonth,c.dateTick0=O.dateTick0,c.dfltRange=O.dfltRange,c.findExactDates=O.findExactDates,c.MIN_MS=O.MIN_MS,c.MAX_MS=O.MAX_MS;var P=wf();c.findBin=P.findBin,c.sorterAsc=P.sorterAsc,c.sorterDes=P.sorterDes,c.distinctVals=P.distinctVals,c.roundUp=P.roundUp,c.sort=P.sort,c.findIndexOfMin=P.findIndexOfMin,c.sortObjectKeys=Gm();var D=h0();c.aggNums=D.aggNums,c.len=D.len,c.mean=D.mean,c.geometricMean=D.geometricMean,c.median=D.median,c.midRange=D.midRange,c.variance=D.variance,c.stdev=D.stdev,c.interp=D.interp;var H=Jh();c.init2dArray=H.init2dArray,c.transposeRagged=H.transposeRagged,c.dot=H.dot,c.translationMatrix=H.translationMatrix,c.rotationMatrix=H.rotationMatrix,c.rotationXYMatrix=H.rotationXYMatrix,c.apply3DTransform=H.apply3DTransform,c.apply2DTransform=H.apply2DTransform,c.apply2DTransform2=H.apply2DTransform2,c.convertCssMatrix=H.convertCssMatrix,c.inverseTransformMatrix=H.inverseTransformMatrix;var C=i0();c.deg2rad=C.deg2rad,c.rad2deg=C.rad2deg,c.angleDelta=C.angleDelta,c.angleDist=C.angleDist,c.isFullCircle=C.isFullCircle,c.isAngleInsideSector=C.isAngleInsideSector,c.isPtInsideSector=C.isPtInsideSector,c.pathArc=C.pathArc,c.pathSector=C.pathSector,c.pathAnnulus=C.pathAnnulus;var A=Tm();c.isLeftAnchor=A.isLeftAnchor,c.isCenterAnchor=A.isCenterAnchor,c.isRightAnchor=A.isRightAnchor,c.isTopAnchor=A.isTopAnchor,c.isMiddleAnchor=A.isMiddleAnchor,c.isBottomAnchor=A.isBottomAnchor;var L=Vm();c.segmentsIntersect=L.segmentsIntersect,c.segmentDistance=L.segmentDistance,c.getTextLocation=L.getTextLocation,c.clearLocationCache=L.clearLocationCache,c.getVisibleSegment=L.getVisibleSegment,c.findPointOnPath=L.findPointOnPath;var j=Bl();c.extendFlat=j.extendFlat,c.extendDeep=j.extendDeep,c.extendDeepAll=j.extendDeepAll,c.extendDeepNoArrays=j.extendDeepNoArrays;var Z=wh();c.log=Z.log,c.warn=Z.warn,c.error=Z.error;var nl=Nl();c.counterRegex=nl.counter;var Pe=ym();c.throttle=Pe.throttle,c.throttleDone=Pe.done,c.clearThrottle=Pe.clear;var se=lf();c.getGraphDiv=se.getGraphDiv,c.isPlotDiv=se.isPlotDiv,c.removeElement=se.removeElement,c.addStyleRule=se.addStyleRule,c.addRelatedStyleRule=se.addRelatedStyleRule,c.deleteRelatedStyleRule=se.deleteRelatedStyleRule,c.setStyleOnHover=se.setStyleOnHover,c.getFullTransformMatrix=se.getFullTransformMatrix,c.getElementTransformMatrix=se.getElementTransformMatrix,c.getElementAndAncestors=se.getElementAndAncestors,c.equalDomRects=se.equalDomRects,c.clearResponsive=l0(),c.preserveDrawingBuffer=p0(),c.makeTraceGroups=j0(),c._=lg(),c.notifier=Bu(),c.filterUnique=sm(),c.filterVisible=Cg(),c.pushUnique=dh(),c.increment=S0(),c.cleanNumber=Kp(),c.ensureNumber=function(st){return x(st)?(st=Number(st),st>y||st<w?S:st):S},c.isIndex=function(st,U){return U!==void 0&&st>=U?!1:x(st)&&st>=0&&st%1===0},c.noop=Rd(),c.identity=M0(),c.repeat=function(st,U){for(var re=new Array(U),Ft=0;Ft<U;Ft++)re[Ft]=st;return re},c.swapAttrs=function(st,U,re,Ft){re||(re="x"),Ft||(Ft="y");for(var ls=0;ls<U.length;ls++){var _l=U[ls],Ll=c.nestedProperty(st,_l.replace("?",re)),zl=c.nestedProperty(st,_l.replace("?",Ft)),yu=Ll.get();Ll.set(zl.get()),zl.set(yu)}},c.raiseToTop=function(st){st.parentNode.appendChild(st)},c.cancelTransition=function(st){return st.transition().duration(0)},c.constrain=function(st,U,re){return U>re?Math.max(re,Math.min(U,st)):Math.max(U,Math.min(re,st))},c.bBoxIntersect=function(st,U,re){return re=re||0,st.left<=U.right+re&&U.left<=st.right+re&&st.top<=U.bottom+re&&U.top<=st.bottom+re},c.simpleMap=function(st,U,re,Ft,ls){for(var _l=st.length,Ll=new Array(_l),zl=0;zl<_l;zl++)Ll[zl]=U(st[zl],re,Ft,ls);return Ll},c.randstr=function st(U,re,Ft,ls){if(Ft||(Ft=16),re===void 0&&(re=24),re<=0)return"0";var _l=Math.log(Math.pow(2,re))/Math.log(Ft),Ll="",zl,yu,Vu;for(zl=2;_l===1/0;zl*=2)_l=Math.log(Math.pow(2,re/zl))/Math.log(Ft)*zl;var od=_l-Math.floor(_l);for(zl=0;zl<Math.floor(_l);zl++)Vu=Math.floor(Math.random()*Ft).toString(Ft),Ll=Vu+Ll;od&&(yu=Math.pow(Ft,od),Vu=Math.floor(Math.random()*yu).toString(Ft),Ll=Vu+Ll);var Ad=parseInt(Ll,Ft);return U&&U[Ll]||Ad!==1/0&&Ad>=Math.pow(2,re)?ls>10?(c.warn("randstr failed uniqueness"),Ll):st(U,re,Ft,(ls||0)+1):Ll},c.OptionControl=function(st,U){st||(st={}),U||(U="opt");var re={};return re.optionList=[],re._newoption=function(Ft){Ft[U]=st,re[Ft.name]=Ft,re.optionList.push(Ft)},re["_"+U]=st,re},c.smooth=function(st,U){if(U=Math.round(U)||0,U<2)return st;var re=st.length,Ft=2*re,ls=2*U-1,_l=new Array(ls),Ll=new Array(re),zl,yu,Vu,od;for(zl=0;zl<ls;zl++)_l[zl]=(1-Math.cos(Math.PI*(zl+1)/U))/(2*U);for(zl=0;zl<re;zl++){for(od=0,yu=0;yu<ls;yu++)Vu=zl+yu+1-U,Vu<-re?Vu-=Ft*Math.round(Vu/Ft):Vu>=Ft&&(Vu-=Ft*Math.floor(Vu/Ft)),Vu<0?Vu=-1-Vu:Vu>=re&&(Vu=Ft-1-Vu),od+=st[Vu]*_l[yu];Ll[zl]=od}return Ll},c.syncOrAsync=function(st,U,re){var Ft,ls;function _l(){return c.syncOrAsync(st,U,re)}for(;st.length;)if(ls=st.splice(0,1)[0],Ft=ls(U),Ft&&Ft.then)return Ft.then(_l);return re&&re(U)},c.stripTrailingSlash=function(st){return st.substr(-1)==="/"?st.substr(0,st.length-1):st},c.noneOrAll=function(st,U,re){if(st){var Ft=!1,ls=!0,_l,Ll;for(_l=0;_l<re.length;_l++)Ll=st[re[_l]],Ll!=null?Ft=!0:ls=!1;if(Ft&&!ls)for(_l=0;_l<re.length;_l++)st[re[_l]]=U[re[_l]]}},c.mergeArray=function(st,U,re,Ft){var ls=typeof Ft=="function";if(c.isArrayOrTypedArray(st))for(var _l=Math.min(st.length,U.length),Ll=0;Ll<_l;Ll++){var zl=st[Ll];U[Ll][re]=ls?Ft(zl):zl}},c.mergeArrayCastPositive=function(st,U,re){return c.mergeArray(st,U,re,function(Ft){var ls=+Ft;return isFinite(ls)&&ls>0?ls:0})},c.fillArray=function(st,U,re,Ft){if(Ft=Ft||c.identity,c.isArrayOrTypedArray(st))for(var ls=0;ls<U.length;ls++)U[ls][re]=Ft(st[ls])},c.castOption=function(st,U,re,Ft){Ft=Ft||c.identity;var ls=c.nestedProperty(st,re).get();return c.isArrayOrTypedArray(ls)?Array.isArray(U)&&c.isArrayOrTypedArray(ls[U[0]])?Ft(ls[U[0]][U[1]]):Ft(ls[U]):ls},c.extractOption=function(st,U,re,Ft){if(re in st)return st[re];var ls=c.nestedProperty(U,Ft).get();if(!Array.isArray(ls))return ls};function q(st){var U={};for(var re in st)for(var Ft=st[re],ls=0;ls<Ft.length;ls++)U[Ft[ls]]=+re;return U}c.tagSelected=function(st,U,re){var Ft=U.selectedpoints,ls=U._indexToPoints,_l;ls&&(_l=q(ls));function Ll(Ad){return Ad!==void 0&&Ad<st.length}for(var zl=0;zl<Ft.length;zl++){var yu=Ft[zl];if(c.isIndex(yu)||c.isArrayOrTypedArray(yu)&&c.isIndex(yu[0])&&c.isIndex(yu[1])){var Vu=_l?_l[yu]:yu,od=re?re[Vu]:Vu;Ll(od)&&(st[od].selected=1)}}},c.selIndices2selPoints=function(st){var U=st.selectedpoints,re=st._indexToPoints;if(re){for(var Ft=q(re),ls=[],_l=0;_l<U.length;_l++){var Ll=U[_l];if(c.isIndex(Ll)){var zl=Ft[Ll];c.isIndex(zl)&&ls.push(zl)}}return ls}else return U},c.getTargetArray=function(st,U){var re=U.target;if(typeof re=="string"&&re){var Ft=c.nestedProperty(st,re).get();return c.isArrayOrTypedArray(Ft)?Ft:!1}else if(c.isArrayOrTypedArray(re))return re;return!1};function ol(st,U,re){var Ft={};typeof U!="object"&&(U={});var ls=re==="pieLike"?-1:3,_l=Object.keys(st),Ll,zl,yu;for(Ll=0;Ll<_l.length;Ll++)zl=_l[Ll],yu=st[zl],!(zl.charAt(0)==="_"||typeof yu=="function")&&(zl==="module"?Ft[zl]=yu:Array.isArray(yu)?zl==="colorscale"||ls===-1?Ft[zl]=yu.slice():Ft[zl]=yu.slice(0,ls):c.isTypedArray(yu)?ls===-1?Ft[zl]=yu.subarray():Ft[zl]=yu.subarray(0,ls):yu&&typeof yu=="object"?Ft[zl]=ol(st[zl],U[zl],re):Ft[zl]=yu);for(_l=Object.keys(U),Ll=0;Ll<_l.length;Ll++)zl=_l[Ll],yu=U[zl],(typeof yu!="object"||!(zl in Ft)||typeof Ft[zl]!="object")&&(Ft[zl]=yu);return Ft}c.minExtend=ol,c.titleCase=function(st){return st.charAt(0).toUpperCase()+st.substr(1)},c.containsAny=function(st,U){for(var re=0;re<U.length;re++)if(st.indexOf(U[re])!==-1)return!0;return!1};var nt=/Version\/[\d\.]+.*Safari/;c.isSafari=function(){return nt.test(window.navigator.userAgent)};var In=/iPad|iPhone|iPod/;c.isIOS=function(){return In.test(window.navigator.userAgent)};var _t=/Macintosh.+AppleWebKit.+Gecko\)$/;c.isMacWKWebView=()=>_t.test(window.navigator.userAgent);var Fn=/Firefox\/(\d+)\.\d+/;c.getFirefoxVersion=function(){var st=Fn.exec(window.navigator.userAgent);if(st&&st.length===2){var U=parseInt(st[1]);if(!isNaN(U))return U}return null},c.isD3Selection=function(st){return st instanceof m.selection},c.ensureSingle=function(st,U,re,Ft){var ls=st.select(U+(re?"."+re:""));if(ls.size())return ls;var _l=st.append(U);return re&&_l.classed(re,!0),Ft&&_l.call(Ft),_l},c.ensureSingleById=function(st,U,re,Ft){var ls=st.select(U+"#"+re);if(ls.size())return ls;var _l=st.append(U).attr("id",re);return Ft&&_l.call(Ft),_l},c.objectFromPath=function(st,U){for(var re=st.split("."),Ft,ls=Ft={},_l=0;_l<re.length;_l++){var Ll=re[_l],zl=null,yu=re[_l].match(/(.*)\[([0-9]+)\]/);yu?(Ll=yu[1],zl=yu[2],Ft=Ft[Ll]=[],_l===re.length-1?Ft[zl]=U:Ft[zl]={},Ft=Ft[zl]):(_l===re.length-1?Ft[Ll]=U:Ft[Ll]={},Ft=Ft[Ll])}return ls};var al=/^([^\[\.]+)\.(.+)?/,sl=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function ce(st){return st.slice(0,2)==="__"}c.expandObjectPaths=function(st){var U,re,Ft,ls,_l,Ll,zl;if(typeof st=="object"&&!Array.isArray(st)){for(re in st)if(st.hasOwnProperty(re))if(U=re.match(al)){if(ls=st[re],Ft=U[1],ce(Ft))continue;delete st[re],st[Ft]=c.extendDeepNoArrays(st[Ft]||{},c.objectFromPath(re,c.expandObjectPaths(ls))[Ft])}else if(U=re.match(sl)){if(ls=st[re],Ft=U[1],ce(Ft))continue;if(_l=parseInt(U[2]),delete st[re],st[Ft]=st[Ft]||[],U[3]===".")zl=U[4],Ll=st[Ft][_l]=st[Ft][_l]||{},c.extendDeepNoArrays(Ll,c.objectFromPath(zl,c.expandObjectPaths(ls)));else{if(ce(Ft))continue;st[Ft][_l]=c.expandObjectPaths(ls)}}else{if(ce(re))continue;st[re]=c.expandObjectPaths(st[re])}}return st},c.numSeparate=function(st,U,re){if(re||(re=!1),typeof U!="string"||U.length===0)throw new Error("Separator string required for formatting!");typeof st=="number"&&(st=String(st));var Ft=/(\d+)(\d{3})/,ls=U.charAt(0),_l=U.charAt(1),Ll=st.split("."),zl=Ll[0],yu=Ll.length>1?ls+Ll[1]:"";if(_l&&(Ll.length>1||zl.length>4||re))for(;Ft.test(zl);)zl=zl.replace(Ft,"$1"+_l+"$2");return zl+yu},c.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var ll=/^\w*$/;c.templateString=function(st,U){var re={};return st.replace(c.TEMPLATE_STRING_REGEX,function(Ft,ls){var _l;return ll.test(ls)?_l=U[ls]:(re[ls]=re[ls]||c.nestedProperty(U,ls).get,_l=re[ls](!0)),_l!==void 0?_l:""})};var ul={max:10,count:0,name:"hovertemplate"};c.hovertemplateString=function(){return gu.apply(ul,arguments)};var fl={max:10,count:0,name:"texttemplate"};c.texttemplateString=function(){return gu.apply(fl,arguments)};var bl=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function El(st){var U=st.match(bl);return U?{key:U[1],op:U[2],number:Number(U[3])}:{key:st,op:null,number:null}}var Ul={max:10,count:0,name:"texttemplate",parseMultDiv:!0};c.texttemplateStringForShapes=function(){return gu.apply(Ul,arguments)};var ql=/^[:|\|]/;function gu(st,U,re){var Ft=this,ls=arguments;return U||(U={}),st.replace(c.TEMPLATE_STRING_REGEX,function(_l,Ll,zl){var yu=Ll==="xother"||Ll==="yother",Vu=Ll==="_xother"||Ll==="_yother",od=Ll==="_xother_"||Ll==="_yother_",Ad=Ll==="xother_"||Ll==="yother_",vd=yu||Vu||Ad||od,fd=Ll;(Vu||od)&&(fd=fd.substring(1)),(Ad||od)&&(fd=fd.substring(0,fd.length-1));var Kl=null,vu=null;if(Ft.parseMultDiv){var Rl=El(fd);fd=Rl.key,Kl=Rl.op,vu=Rl.number}var Wu;if(vd){if(Wu=U[fd],Wu===void 0)return""}else{var cd,xd;for(xd=3;xd<ls.length;xd++)if(cd=ls[xd],!!cd){if(cd.hasOwnProperty(fd)){Wu=cd[fd];break}if(ll.test(fd)||(Wu=c.nestedProperty(cd,fd).get(!0)),Wu!==void 0)break}}if(Wu!==void 0&&(Kl==="*"&&(Wu*=vu),Kl==="/"&&(Wu/=vu)),Wu===void 0&&Ft)return Ft.count<Ft.max&&(c.warn("Variable '"+fd+"' in "+Ft.name+" could not be found!"),Wu=_l),Ft.count===Ft.max&&c.warn("Too many "+Ft.name+" warnings - additional warnings will be suppressed"),Ft.count++,_l;if(zl){var Td;if(zl[0]===":"&&(Td=re?re.numberFormat:c.numberFormat,Wu!==""&&(Wu=Td(zl.replace(ql,""))(Wu))),zl[0]==="|"){Td=re?re.timeFormat:l;var Pd=c.dateTime2ms(Wu);Wu=c.formatDate(Pd,zl.replace(ql,""),!1,Td)}}else{var Hd=fd+"Label";U.hasOwnProperty(Hd)&&(Wu=U[Hd])}return vd&&(Wu="("+Wu+")",(Vu||od)&&(Wu=" "+Wu),(Ad||od)&&(Wu=Wu+" ")),Wu})}var Bn=48,il=57;c.subplotSort=function(st,U){for(var re=Math.min(st.length,U.length)+1,Ft=0,ls=0,_l=0;_l<re;_l++){var Ll=st.charCodeAt(_l)||0,zl=U.charCodeAt(_l)||0,yu=Ll>=Bn&&Ll<=il,Vu=zl>=Bn&&zl<=il;if(yu&&(Ft=10*Ft+Ll-Bn),Vu&&(ls=10*ls+zl-Bn),!yu||!Vu){if(Ft!==ls)return Ft-ls;if(Ll!==zl)return Ll-zl}}return ls-Ft};var X=2e9;c.seedPseudoRandom=function(){X=2e9},c.pseudoRandom=function(){var st=X;return X=(69069*X+1)%4294967296,Math.abs(X-st)<429496729?c.pseudoRandom():X/4294967296},c.fillText=function(st,U,re){var Ft=Array.isArray(re)?function(Ll){re.push(Ll)}:function(Ll){re.text=Ll},ls=c.extractOption(st,U,"htx","hovertext");if(c.isValidTextValue(ls))return Ft(ls);var _l=c.extractOption(st,U,"tx","text");if(c.isValidTextValue(_l))return Ft(_l)},c.isValidTextValue=function(st){return st||st===0},c.formatPercent=function(st,U){U=U||0;for(var re=(Math.round(100*st*Math.pow(10,U))*Math.pow(.1,U)).toFixed(U)+"%",Ft=0;Ft<U;Ft++)re.indexOf(".")!==-1&&(re=re.replace("0%","%"),re=re.replace(".%","%"));return re},c.isHidden=function(st){var U=window.getComputedStyle(st).display;return!U||U==="none"},c.strTranslate=function(st,U){return st||U?"translate("+st+","+U+")":""},c.strRotate=function(st){return st?"rotate("+st+")":""},c.strScale=function(st){return st!==1?"scale("+st+")":""},c.getTextTransform=function(st){var U=st.noCenter,re=st.textX,Ft=st.textY,ls=st.targetX,_l=st.targetY,Ll=st.anchorX||0,zl=st.anchorY||0,yu=st.rotate,Vu=st.scale;return Vu?Vu>1&&(Vu=1):Vu=0,c.strTranslate(ls-Vu*(re+Ll),_l-Vu*(Ft+zl))+c.strScale(Vu)+(yu?"rotate("+yu+(U?"":" "+re+" "+Ft)+")":"")},c.setTransormAndDisplay=function(st,U){st.attr("transform",c.getTextTransform(U)),st.style("display",U.scale?null:"none")},c.ensureUniformFontSize=function(st,U){var re=c.extendFlat({},U);return re.size=Math.max(U.size,st._fullLayout.uniformtext.minsize||0),re},c.join2=function(st,U,re){var Ft=st.length;return Ft>1?st.slice(0,-1).join(U)+re+st[Ft-1]:st.join(U)},c.bigFont=function(st){return Math.round(1.2*st)};var cl=c.getFirefoxVersion(),Sl=cl!==null&&cl<86;c.getPositionFromD3Event=function(){return Sl?[m.event.layerX,m.event.layerY]:[m.event.offsetX,m.event.offsetY]}}),Uu=s(()=>{var ot=rt(),Me={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X:focus-within .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group a":"display:grid;place-content:center;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;border:none;background:rgba(0,0,0,0);","X .modebar-btn svg":"position:relative;","X .modebar-btn:focus-visible":"outline:1px solid #000;outline-offset:1px;border-radius:3px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(l in Me)m=l.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),ot.addStyleRule(m,Me[l]);var m,l}),Vd=s((ot,Me)=>{Me.exports=!0}),Eh=s((ot,Me)=>{var m=Vd(),l;typeof window.matchMedia=="function"?l=!window.matchMedia("(hover: none)").matches:l=m,Me.exports=l}),ph=s((ot,Me)=>{var m=typeof Reflect=="object"?Reflect:null,l=m&&typeof m.apply=="function"?m.apply:function(j,Z,nl){return Function.prototype.apply.call(j,Z,nl)},d;m&&typeof m.ownKeys=="function"?d=m.ownKeys:Object.getOwnPropertySymbols?d=function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:d=function(j){return Object.getOwnPropertyNames(j)};function x(j){console&&console.warn&&console.warn(j)}var v=Number.isNaN||function(j){return j!==j};function y(){y.init.call(this)}Me.exports=y,Me.exports.once=C,y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var w=10;function S(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(j){if(typeof j!="number"||j<0||v(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");w=j}}),y.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||v(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this};function c(j){return j._maxListeners===void 0?y.defaultMaxListeners:j._maxListeners}y.prototype.getMaxListeners=function(){return c(this)},y.prototype.emit=function(j){for(var Z=[],nl=1;nl<arguments.length;nl++)Z.push(arguments[nl]);var Pe=j==="error",se=this._events;if(se!==void 0)Pe=Pe&&se.error===void 0;else if(!Pe)return!1;if(Pe){var q;if(Z.length>0&&(q=Z[0]),q instanceof Error)throw q;var ol=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw ol.context=q,ol}var nt=se[j];if(nt===void 0)return!1;if(typeof nt=="function")l(nt,this,Z);else for(var In=nt.length,_t=P(nt,In),nl=0;nl<In;++nl)l(_t[nl],this,Z);return!0};function F(j,Z,nl,Pe){var se,q,ol;if(S(nl),q=j._events,q===void 0?(q=j._events=Object.create(null),j._eventsCount=0):(q.newListener!==void 0&&(j.emit("newListener",Z,nl.listener?nl.listener:nl),q=j._events),ol=q[Z]),ol===void 0)ol=q[Z]=nl,++j._eventsCount;else if(typeof ol=="function"?ol=q[Z]=Pe?[nl,ol]:[ol,nl]:Pe?ol.unshift(nl):ol.push(nl),se=c(j),se>0&&ol.length>se&&!ol.warned){ol.warned=!0;var nt=new Error("Possible EventEmitter memory leak detected. "+ol.length+" "+String(Z)+" listeners added. Use emitter.setMaxListeners() to increase limit");nt.name="MaxListenersExceededWarning",nt.emitter=j,nt.type=Z,nt.count=ol.length,x(nt)}return j}y.prototype.addListener=function(j,Z){return F(this,j,Z,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(j,Z){return F(this,j,Z,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function R(j,Z,nl){var Pe={fired:!1,wrapFn:void 0,target:j,type:Z,listener:nl},se=b.bind(Pe);return se.listener=nl,Pe.wrapFn=se,se}y.prototype.once=function(j,Z){return S(Z),this.on(j,R(this,j,Z)),this},y.prototype.prependOnceListener=function(j,Z){return S(Z),this.prependListener(j,R(this,j,Z)),this},y.prototype.removeListener=function(j,Z){var nl,Pe,se,q,ol;if(S(Z),Pe=this._events,Pe===void 0)return this;if(nl=Pe[j],nl===void 0)return this;if(nl===Z||nl.listener===Z)--this._eventsCount===0?this._events=Object.create(null):(delete Pe[j],Pe.removeListener&&this.emit("removeListener",j,nl.listener||Z));else if(typeof nl!="function"){for(se=-1,q=nl.length-1;q>=0;q--)if(nl[q]===Z||nl[q].listener===Z){ol=nl[q].listener,se=q;break}if(se<0)return this;se===0?nl.shift():D(nl,se),nl.length===1&&(Pe[j]=nl[0]),Pe.removeListener!==void 0&&this.emit("removeListener",j,ol||Z)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(j){var Z,nl,Pe;if(nl=this._events,nl===void 0)return this;if(nl.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):nl[j]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete nl[j]),this;if(arguments.length===0){var se=Object.keys(nl),q;for(Pe=0;Pe<se.length;++Pe)q=se[Pe],q!=="removeListener"&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Z=nl[j],typeof Z=="function")this.removeListener(j,Z);else if(Z!==void 0)for(Pe=Z.length-1;Pe>=0;Pe--)this.removeListener(j,Z[Pe]);return this};function B(j,Z,nl){var Pe=j._events;if(Pe===void 0)return[];var se=Pe[Z];return se===void 0?[]:typeof se=="function"?nl?[se.listener||se]:[se]:nl?H(se):P(se,se.length)}y.prototype.listeners=function(j){return B(this,j,!0)},y.prototype.rawListeners=function(j){return B(this,j,!1)},y.listenerCount=function(j,Z){return typeof j.listenerCount=="function"?j.listenerCount(Z):O.call(j,Z)},y.prototype.listenerCount=O;function O(j){var Z=this._events;if(Z!==void 0){var nl=Z[j];if(typeof nl=="function")return 1;if(nl!==void 0)return nl.length}return 0}y.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]};function P(j,Z){for(var nl=new Array(Z),Pe=0;Pe<Z;++Pe)nl[Pe]=j[Pe];return nl}function D(j,Z){for(;Z+1<j.length;Z++)j[Z]=j[Z+1];j.pop()}function H(j){for(var Z=new Array(j.length),nl=0;nl<Z.length;++nl)Z[nl]=j[nl].listener||j[nl];return Z}function C(j,Z){return new Promise(function(nl,Pe){function se(ol){j.removeListener(Z,q),Pe(ol)}function q(){typeof j.removeListener=="function"&&j.removeListener("error",se),nl([].slice.call(arguments))}L(j,Z,q,{once:!0}),Z!=="error"&&A(j,se,{once:!0})})}function A(j,Z,nl){typeof j.on=="function"&&L(j,"error",Z,nl)}function L(j,Z,nl,Pe){if(typeof j.on=="function")Pe.once?j.once(Z,nl):j.on(Z,nl);else if(typeof j.addEventListener=="function")j.addEventListener(Z,function se(q){Pe.once&&j.removeEventListener(Z,se),nl(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}}),jp=s((ot,Me)=>{var m=ph().EventEmitter,l={init:function(d){if(d._ev instanceof m)return d;var x=new m,v=new m;return d._ev=x,d._internalEv=v,d.on=x.on.bind(x),d.once=x.once.bind(x),d.removeListener=x.removeListener.bind(x),d.removeAllListeners=x.removeAllListeners.bind(x),d._internalOn=v.on.bind(v),d._internalOnce=v.once.bind(v),d._removeInternalListener=v.removeListener.bind(v),d._removeAllInternalListeners=v.removeAllListeners.bind(v),d.emit=function(y,w){x.emit(y,w),v.emit(y,w)},typeof d.addEventListener=="function"&&d.addEventListener("wheel",()=>{},{passive:!0}),d},triggerHandler:function(d,x,v){var y,w=d._ev;if(!w)return;var S=w._events[x];if(!S)return;function c(b){if(b.listener){if(w.removeListener(x,b.listener),!b.fired)return b.fired=!0,b.listener.apply(w,[v])}else return b.apply(w,[v])}S=Array.isArray(S)?S:[S];var F;for(F=0;F<S.length-1;F++)c(S[F]);return y=c(S[F]),y},purge:function(d){return delete d._ev,delete d.on,delete d.once,delete d.removeListener,delete d.removeAllListeners,delete d.emit,delete d._ev,delete d._internalEv,delete d._internalOn,delete d._internalOnce,delete d._removeInternalListener,delete d._removeAllInternalListeners,d}};Me.exports=l}),_p=s((ot,Me)=>{var m=rt(),l=Cd().dfltConfig;function d(v,y){for(var w=[],S,c=0;c<y.length;c++)S=y[c],S===v?w[c]=S:typeof S=="object"?w[c]=Array.isArray(S)?m.extendDeep([],S):m.extendDeepAll({},S):w[c]=S;return w}var x={};x.add=function(v,y,w,S,c){var F,b;if(v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},b=v.undoQueue.index,v.autoplay){v.undoQueue.inSequence||(v.autoplay=!1);return}!v.undoQueue.sequence||v.undoQueue.beginSequence?(F={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},v.undoQueue.queue.splice(b,v.undoQueue.queue.length-b,F),v.undoQueue.index+=1):F=v.undoQueue.queue[b-1],v.undoQueue.beginSequence=!1,F&&(F.undo.calls.unshift(y),F.undo.args.unshift(w),F.redo.calls.push(S),F.redo.args.push(c)),v.undoQueue.queue.length>l.queueLength&&(v.undoQueue.queue.shift(),v.undoQueue.index--)},x.startSequence=function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!0,v.undoQueue.beginSequence=!0},x.stopSequence=function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!1,v.undoQueue.beginSequence=!1},x.undo=function(v){var y,w;if(!(v.undoQueue===void 0||isNaN(v.undoQueue.index)||v.undoQueue.index<=0)){for(v.undoQueue.index--,y=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,w=0;w<y.undo.calls.length;w++)x.plotDo(v,y.undo.calls[w],y.undo.args[w]);v.undoQueue.inSequence=!1,v.autoplay=!1}},x.redo=function(v){var y,w;if(!(v.undoQueue===void 0||isNaN(v.undoQueue.index)||v.undoQueue.index>=v.undoQueue.queue.length)){for(y=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,w=0;w<y.redo.calls.length;w++)x.plotDo(v,y.redo.calls[w],y.redo.args[w]);v.undoQueue.inSequence=!1,v.autoplay=!1,v.undoQueue.index++}},x.plotDo=function(v,y,w){v.autoplay=!0,w=d(v,w),y.apply(null,w)},Me.exports=x}),Gp=s((ot,Me)=>{Me.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}}),of=s(ot=>{var Me=ff(),m=rt(),l=id(),d=Jg(),x=Gp(),v=vf(),y=Cd().configAttributes,w=uf(),S=m.extendDeepAll,c=m.isPlainObject,F=m.isArrayOrTypedArray,b=m.nestedProperty,R=m.valObjectMeta,B="_isSubplotObj",O="_isLinkedToArray",P="_arrayAttrRegexps",D="_deprecated",H=[B,O,P,D];ot.IS_SUBPLOT_OBJ=B,ot.IS_LINKED_TO_ARRAY=O,ot.DEPRECATED=D,ot.UNDERSCORE_ATTRS=H,ot.get=function(){var _t={};return Me.allTypes.forEach(function(Fn){_t[Fn]=j(Fn)}),{defs:{valObjects:R,metaKeys:H.concat(["description","role","editType","impliedEdits"]),editType:{traces:w.traces,layout:w.layout},impliedEdits:{}},traces:_t,layout:Z(),frames:nl(),animation:Pe(v),config:Pe(y)}},ot.crawl=function(_t,Fn,al,sl){var ce=al||0;sl=sl||"",Object.keys(_t).forEach(function(ll){var ul=_t[ll];if(H.indexOf(ll)===-1){var fl=(sl?sl+".":"")+ll;Fn(ul,ll,_t,ce,fl),!ot.isValObject(ul)&&c(ul)&&ll!=="impliedEdits"&&ot.crawl(ul,Fn,ce+1,fl)}})},ot.isValObject=function(_t){return _t&&_t.valType!==void 0},ot.findArrayAttributes=function(_t){var Fn=[],al=[],sl=[],ce,ll;function ul(bl,El,Ul,ql){al=al.slice(0,ql).concat([El]),sl=sl.slice(0,ql).concat([bl&&bl._isLinkedToArray]);var gu=bl&&(bl.valType==="data_array"||bl.arrayOk===!0)&&!(al[ql-1]==="colorbar"&&(El==="ticktext"||El==="tickvals"));gu&&fl(ce,0,"")}function fl(bl,El,Ul){var ql=bl[al[El]],gu=Ul+al[El];if(El===al.length-1)F(ql)&&Fn.push(ll+gu);else if(sl[El]){if(Array.isArray(ql))for(var Bn=0;Bn<ql.length;Bn++)c(ql[Bn])&&fl(ql[Bn],El+1,gu+"["+Bn+"].")}else c(ql)&&fl(ql,El+1,gu+".")}return ce=_t,ll="",ot.crawl(l,ul),_t._module&&_t._module.attributes&&ot.crawl(_t._module.attributes,ul),Fn},ot.getTraceValObject=function(_t,Fn){var al=Fn[0],sl=1,ce,ll,ul=_t._module;if(ul||(ul=(Me.modules[_t.type||l.type.dflt]||{})._module),!ul)return!1;if(ce=ul.attributes,ll=ce&&ce[al],!ll){var fl=ul.basePlotModule;fl&&fl.attributes&&(ll=fl.attributes[al])}return ll||(ll=l[al]),A(ll,Fn,sl)},ot.getLayoutValObject=function(_t,Fn){var al=C(_t,Fn[0]);return A(al,Fn,1)};function C(_t,Fn){var al,sl,ce,ll,ul=_t._basePlotModules;if(ul){var fl;for(al=0;al<ul.length;al++){if(ce=ul[al],ce.attrRegex&&ce.attrRegex.test(Fn)){if(ce.layoutAttrOverrides)return ce.layoutAttrOverrides;!fl&&ce.layoutAttributes&&(fl=ce.layoutAttributes)}var bl=ce.baseLayoutAttrOverrides;if(bl&&Fn in bl)return bl[Fn]}if(fl)return fl}var El=_t._modules;if(El){for(al=0;al<El.length;al++)if(ll=El[al].layoutAttributes,ll&&Fn in ll)return ll[Fn]}for(sl in Me.componentsRegistry){if(ce=Me.componentsRegistry[sl],ce.name==="colorscale"&&Fn.indexOf("coloraxis")===0)return ce.layoutAttributes[Fn];if(!ce.schema&&Fn===ce.name)return ce.layoutAttributes}return Fn in d?d[Fn]:!1}function A(_t,Fn,al){if(!_t)return!1;if(_t._isLinkedToArray){if(L(Fn[al]))al++;else if(al<Fn.length)return!1}for(;al<Fn.length;al++){var sl=_t[Fn[al]];if(c(sl))_t=sl;else break;if(al===Fn.length-1)break;if(_t._isLinkedToArray){if(al++,!L(Fn[al]))return!1}else if(_t.valType==="info_array"){al++;var ce=Fn[al];if(!L(ce))return!1;var ll=_t.items;if(Array.isArray(ll)){if(ce>=ll.length)return!1;if(_t.dimensions===2){if(al++,Fn.length===al)return _t;var ul=Fn[al];if(!L(ul))return!1;_t=ll[ce][ul]}else _t=ll[ce]}else _t=ll}}return _t}function L(_t){return _t===Math.round(_t)&&_t>=0}function j(_t){var Fn,al;Fn=Me.modules[_t]._module,al=Fn.basePlotModule;var sl={};sl.type=null;var ce=S({},l),ll=S({},Fn.attributes);ot.crawl(ll,function(bl,El,Ul,ql,gu){b(ce,gu).set(void 0),bl===void 0&&b(ll,gu).set(void 0)}),S(sl,ce),Me.traceIs(_t,"noOpacity")&&delete sl.opacity,Me.traceIs(_t,"showLegend")||(delete sl.showlegend,delete sl.legendgroup),Me.traceIs(_t,"noHover")&&(delete sl.hoverinfo,delete sl.hoverlabel),Fn.selectPoints||delete sl.selectedpoints,S(sl,ll),al.attributes&&S(sl,al.attributes),sl.type=_t;var ul={meta:Fn.meta||{},categories:Fn.categories||{},animatable:!!Fn.animatable,type:_t,attributes:Pe(sl)};if(Fn.layoutAttributes){var fl={};S(fl,Fn.layoutAttributes),ul.layoutAttributes=Pe(fl)}return Fn.animatable||ot.crawl(ul,function(bl){ot.isValObject(bl)&&"anim"in bl&&delete bl.anim}),ul}function Z(){var _t={},Fn,al;S(_t,d);for(Fn in Me.subplotsRegistry)if(al=Me.subplotsRegistry[Fn],!!al.layoutAttributes)if(Array.isArray(al.attr))for(var sl=0;sl<al.attr.length;sl++)nt(_t,al,al.attr[sl]);else{var ce=al.attr==="subplot"?al.name:al.attr;nt(_t,al,ce)}for(Fn in Me.componentsRegistry){al=Me.componentsRegistry[Fn];var ll=al.schema;if(ll&&(ll.subplots||ll.layout)){var ul=ll.subplots;if(ul&&ul.xaxis&&!ul.yaxis)for(var fl in ul.xaxis)delete _t.yaxis[fl];delete _t.xaxis.shift,delete _t.xaxis.autoshift}else al.name==="colorscale"?S(_t,al.layoutAttributes):al.layoutAttributes&&In(_t,al.layoutAttributes,al.name)}return{layoutAttributes:Pe(_t)}}function nl(){var _t={frames:S({},x)};return Pe(_t),_t.frames}function Pe(_t){return se(_t),q(_t),ol(_t),_t}function se(_t){function Fn(sl){return{valType:"string",editType:"none"}}function al(sl,ce,ll){ot.isValObject(sl)?(sl.arrayOk===!0||sl.valType==="data_array")&&(ll[ce+"src"]=Fn()):c(sl)&&(sl.role="object")}ot.crawl(_t,al)}function q(_t){function Fn(al,sl,ce){if(al){var ll=al[O];ll&&(delete al[O],ce[sl]={items:{}},ce[sl].items[ll]=al,ce[sl].role="object")}}ot.crawl(_t,Fn)}function ol(_t){function Fn(al){for(var sl in al)if(c(al[sl]))Fn(al[sl]);else if(Array.isArray(al[sl]))for(var ce=0;ce<al[sl].length;ce++)Fn(al[sl][ce]);else al[sl]instanceof RegExp&&(al[sl]=al[sl].toString())}Fn(_t)}function nt(_t,Fn,al){var sl=b(_t,al),ce=S({},Fn.layoutAttributes);ce[B]=!0,sl.set(ce)}function In(_t,Fn,al){var sl=b(_t,al);sl.set(S(sl.get()||{},Fn))}}),Bp=s(ot=>{var Me=rt(),m=id(),l="templateitemname",d={name:{valType:"string",editType:"none"}};d[l]={valType:"string",editType:"calc"},ot.templatedArray=function(y,w){return w._isLinkedToArray=y,w.name=d.name,w[l]=d[l],w},ot.traceTemplater=function(y){var w={},S,c;for(S in y)c=y[S],Array.isArray(c)&&c.length&&(w[S]=0);function F(b){S=Me.coerce(b,{},m,"type");var R={type:S,_template:null};if(S in w){c=y[S];var B=w[S]%c.length;w[S]++,R._template=c[B]}return R}return{newTrace:F}},ot.newContainer=function(y,w,S){var c=y._template,F=c&&(c[w]||S&&c[S]);Me.isPlainObject(F)||(F=null);var b=y[w]={_template:F};return b},ot.arrayTemplater=function(y,w,S){var c=y._template,F=c&&c[v(w)],b=c&&c[w];(!Array.isArray(b)||!b.length)&&(b=[]);var R={};function B(P){var D={name:P.name,_input:P},H=D[l]=P[l];if(!x(H))return D._template=F,D;for(var C=0;C<b.length;C++){var A=b[C];if(A.name===H)return R[H]=1,D._template=A,D}return D[S]=P[S]||!1,D._template=!1,D}function O(){for(var P=[],D=0;D<b.length;D++){var H=b[D],C=H.name;if(x(C)&&!R[C]){var A={_template:H,name:C,_input:{_templateitemname:C}};A[l]=H[l],P.push(A),R[C]=1}}return P}return{newItem:B,defaultItems:O}};function x(y){return y&&typeof y=="string"}function v(y){var w=y.length-1;return y.charAt(w)!=="s"&&Me.warn("bad argument to arrayDefaultKey: "+y),y.substr(0,y.length-1)+"defaults"}ot.arrayDefaultKey=v,ot.arrayEditor=function(y,w,S){var c=(Me.nestedProperty(y,w).get()||[]).length,F=S._index,b=F>=c&&(S._input||{})._templateitemname;b&&(F=c);var R=w+"["+F+"]",B;function O(){B={},b&&(B[R]={},B[R][l]=b)}O();function P(A,L){B[A]=L}function D(A,L){b?Me.nestedProperty(B[R],A).set(L):B[R+"."+A]=L}function H(){var A=B;return O(),A}function C(A,L){A&&D(A,L);var j=H();for(var Z in j)Me.nestedProperty(y,Z).set(j[Z])}return{modifyBase:P,modifyItem:D,getUpdateObj:H,applyUpdate:C}}}),rf=s((ot,Me)=>{var m=Nl().counter;Me.exports={idRegex:{x:m("x","( domain)?"),y:m("y","( domain)?")},attrRegex:m("[xy]axis"),xAxisMatch:m("xaxis"),yAxisMatch:m("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}}),Rh=s(ot=>{var Me=ff(),m=rf();ot.id2name=function(d){if(!(typeof d!="string"||!d.match(m.AX_ID_PATTERN))){var x=d.split(" ")[0].substr(1);return x==="1"&&(x=""),d.charAt(0)+"axis"+x}},ot.name2id=function(d){if(d.match(m.AX_NAME_PATTERN)){var x=d.substr(5);return x==="1"&&(x=""),d.charAt(0)+x}},ot.cleanId=function(d,x,v){var y=/( domain)$/.test(d);if(!(typeof d!="string"||!d.match(m.AX_ID_PATTERN))&&!(x&&d.charAt(0)!==x)&&!(y&&!v)){var w=d.split(" ")[0].substr(1).replace(/^0+/,"");return w==="1"&&(w=""),d.charAt(0)+w+(y&&v?" domain":"")}},ot.list=function(d,x,v){var y=d._fullLayout;if(!y)return[];var w=ot.listIds(d,x),S=new Array(w.length),c;for(c=0;c<w.length;c++){var F=w[c];S[c]=y[F.charAt(0)+"axis"+F.substr(1)]}if(!v){var b=y._subplots.gl3d||[];for(c=0;c<b.length;c++){var R=y[b[c]];x?S.push(R[x+"axis"]):S.push(R.xaxis,R.yaxis,R.zaxis)}}return S},ot.listIds=function(d,x){var v=d._fullLayout;if(!v)return[];var y=v._subplots;return x?y[x+"axis"]:y.xaxis.concat(y.yaxis)},ot.getFromId=function(d,x,v){var y=d._fullLayout;return x=x===void 0||typeof x!="string"?x:x.replace(" domain",""),v==="x"?x=x.replace(/y[0-9]*/,""):v==="y"&&(x=x.replace(/x[0-9]*/,"")),y[ot.id2name(x)]},ot.getFromTrace=function(d,x,v){var y=d._fullLayout,w=null;if(Me.traceIs(x,"gl3d")){var S=x.scene;S.substr(0,5)==="scene"&&(w=y[S][v+"axis"])}else w=ot.getFromId(d,x[v+"axis"]||v);return w},ot.idSort=function(d,x){var v=d.charAt(0),y=x.charAt(0);return v!==y?v>y?1:-1:+(d.substr(1)||1)-+(x.substr(1)||1)},ot.ref2id=function(d){return/^[xyz]/.test(d)?d.split(" ")[0]:!1};function l(d,x){if(x&&x.length){for(var v=0;v<x.length;v++)if(x[v][d])return!0}return!1}ot.isLinked=function(d,x){return l(x,d._axisMatchGroups)||l(x,d._axisConstraintGroups)}}),xf=s((ot,Me)=>{function m(d){var x=d._fullLayout._zoomlayer;x&&x.selectAll(".outline-controllers").remove()}function l(d){var x=d._fullLayout._zoomlayer;x&&x.selectAll(".select-outline").remove(),d._fullLayout._outlining=!1}Me.exports={clearOutlineControllers:m,clearOutline:l}}),Ng=s((ot,Me)=>{Me.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}}),em=s(ot=>{var Me=ff();rf().SUBPLOT_PATTERN,ot.getSubplotCalcData=function(m,l,d){var x=Me.subplotsRegistry[l];if(!x)return[];for(var v=x.attr,y=[],w=0;w<m.length;w++){var S=m[w],c=S[0].trace;c[v]===d&&y.push(S)}return y},ot.getModuleCalcData=function(m,l,d){var x=[],v=[],y;if(typeof l=="string"?y=Me.getModule(l).plot:typeof l=="function"?y=l:y=l.plot,!y)return[x,m];for(var w=d,S=0;S<m.length;S++){var c=m[S],F=c[0].trace,b=F.zorder!==void 0;F.visible!==!0||F._length===0||(F._module&&F._module.plot===y&&(!b||F.zorder===w)?x.push(c):v.push(c))}return[x,v]},ot.getSubplotData=function(m,l,d){if(!Me.subplotsRegistry[l])return[];for(var x=Me.subplotsRegistry[l].attr,v=[],y,w,S,c=0;c<m.length;c++)y=m[c],y[x]===d&&v.push(y);return v}}),Fm=s(ot=>{var Me=ff(),m=rt();ot.manageCommandObserver=function(w,S,c,F){var b={},R=!0;S&&S._commandObserver&&(b=S._commandObserver),b.cache||(b.cache={}),b.lookupTable={};var B=ot.hasSimpleAPICommandBindings(w,c,b.lookupTable);if(S&&S._commandObserver){if(B)return b;if(S._commandObserver.remove)return S._commandObserver.remove(),S._commandObserver=null,b}if(B){l(w,B,b.cache),b.check=function(){if(R){var D=l(w,B,b.cache);return D.changed&&F&&b.lookupTable[D.value]!==void 0&&(b.disable(),Promise.resolve(F({value:D.value,type:B.type,prop:B.prop,traces:B.traces,index:b.lookupTable[D.value]})).then(b.enable,b.enable)),D.changed}};for(var O=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],P=0;P<O.length;P++)w._internalOn(O[P],b.check);b.remove=function(){for(var D=0;D<O.length;D++)w._removeInternalListener(O[D],b.check)}}else m.log("Unable to automatically bind plot updates to API command"),b.lookupTable={},b.remove=function(){};return b.disable=function(){R=!1},b.enable=function(){R=!0},S&&(S._commandObserver=b),b},ot.hasSimpleAPICommandBindings=function(w,S,c){var F,b=S.length,R;for(F=0;F<b;F++){var B,O=S[F],P=O.method,D=O.args;if(Array.isArray(D)||(D=[]),!P)return!1;var H=ot.computeAPICommandBindings(w,P,D);if(H.length!==1)return!1;if(!R)R=H[0],Array.isArray(R.traces)&&R.traces.sort();else{if(B=H[0],B.type!==R.type||B.prop!==R.prop)return!1;if(Array.isArray(R.traces))if(Array.isArray(B.traces)){B.traces.sort();for(var C=0;C<R.traces.length;C++)if(R.traces[C]!==B.traces[C])return!1}else return!1;else if(B.prop!==R.prop)return!1}B=H[0];var A=B.value;if(Array.isArray(A))if(A.length===1)A=A[0];else return!1;c&&(c[A]=F)}return R};function l(w,S,c){var F,b,R,B=!1;if(S.type==="data")F=w._fullData[S.traces!==null?S.traces[0]:0];else if(S.type==="layout")F=w._fullLayout;else return!1;return b=m.nestedProperty(F,S.prop).get(),R=c[S.type]=c[S.type]||{},R.hasOwnProperty(S.prop)&&R[S.prop]!==b&&(B=!0),R[S.prop]=b,{changed:B,value:b}}ot.executeAPICommand=function(w,S,c){if(S==="skip")return Promise.resolve();var F=Me.apiMethodRegistry[S],b=[w];Array.isArray(c)||(c=[]);for(var R=0;R<c.length;R++)b.push(c[R]);return F.apply(null,b).catch(function(B){return m.warn("API call to Plotly."+S+" rejected.",B),Promise.reject(B)})},ot.computeAPICommandBindings=function(w,S,c){var F;switch(Array.isArray(c)||(c=[]),S){case"restyle":F=v(w,c);break;case"relayout":F=x(w,c);break;case"update":F=v(w,[c[0],c[2]]).concat(x(w,[c[1]]));break;case"animate":F=d(w,c);break;default:F=[]}return F};function d(w,S){return Array.isArray(S[0])&&S[0].length===1&&["string","number"].indexOf(typeof S[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:S[0][0].toString()}]:[]}function x(w,S){var c=[],F=S[0],b={};if(typeof F=="string")b[F]=S[1];else if(m.isPlainObject(F))b=F;else return c;return y(b,function(R,B,O){c.push({type:"layout",prop:R,value:O})},"",0),c}function v(w,S){var c,F,b,R,B=[];if(F=S[0],b=S[1],c=S[2],R={},typeof F=="string")R[F]=b;else if(m.isPlainObject(F))R=F,c===void 0&&(c=b);else return B;return c===void 0&&(c=null),y(R,function(O,P,D){var H,C;if(Array.isArray(D)){C=D.slice();var A=Math.min(C.length,w.data.length);c&&(A=Math.min(A,c.length)),H=[];for(var L=0;L<A;L++)H[L]=c?c[L]:L}else C=D,H=c?c.slice():null;if(H===null)Array.isArray(C)&&(C=C[0]);else if(Array.isArray(H)){if(!Array.isArray(C)){var j=C;C=[];for(var Z=0;Z<H.length;Z++)C[Z]=j}C.length=Math.min(H.length,C.length)}B.push({type:"data",prop:O,traces:H,value:C})},"",0),B}function y(w,S,c,F){Object.keys(w).forEach(function(b){var R=w[b];if(b[0]!=="_"){var B=c+(F>0?".":"")+b;m.isPlainObject(R)?y(R,S,B,F+1):S(B,b,R)}})}}),Vf=s((ot,Me)=>{var m=$(),l=oe().timeFormatLocale,d=Y().formatLocale,x=zn(),v=ml(),y=ff(),w=of(),S=Bp(),c=rt(),F=oh(),b=Et().BADNUM,R=Rh(),B=xf().clearOutline,O=Ng(),P=vf(),D=Gp(),H=em().getModuleCalcData,C=c.relinkPrivateKeys,A=c._,L=Me.exports={};c.extendFlat(L,y),L.attributes=id(),L.attributes.type.values=L.allTypes,L.fontAttrs=Pu(),L.layoutAttributes=Jg();var j=Fm();L.executeAPICommand=j.executeAPICommand,L.computeAPICommandBindings=j.computeAPICommandBindings,L.manageCommandObserver=j.manageCommandObserver,L.hasSimpleAPICommandBindings=j.hasSimpleAPICommandBindings,L.redrawText=function(Bn){return Bn=c.getGraphDiv(Bn),new Promise(function(il){setTimeout(function(){Bn._fullLayout&&(y.getComponentMethod("annotations","draw")(Bn),y.getComponentMethod("legend","draw")(Bn),y.getComponentMethod("colorbar","draw")(Bn),il(L.previousPromises(Bn)))},300)})},L.resize=function(Bn){Bn=c.getGraphDiv(Bn);var il,X=new Promise(function(cl,Sl){(!Bn||c.isHidden(Bn))&&Sl(new Error("Resize must be passed a displayed plot div element.")),Bn._redrawTimer&&clearTimeout(Bn._redrawTimer),Bn._resolveResize&&(il=Bn._resolveResize),Bn._resolveResize=cl,Bn._redrawTimer=setTimeout(function(){if(!Bn.layout||Bn.layout.width&&Bn.layout.height||c.isHidden(Bn)){cl(Bn);return}delete Bn.layout.width,delete Bn.layout.height;var st=Bn.changed;Bn.autoplay=!0,y.call("relayout",Bn,{autosize:!0}).then(function(){Bn.changed=st,Bn._resolveResize===cl&&(delete Bn._resolveResize,cl(Bn))})},100)});return il&&il(X),X},L.previousPromises=function(Bn){if((Bn._promises||[]).length)return Promise.all(Bn._promises).then(function(){Bn._promises=[]})},L.addLinks=function(Bn){if(!(!Bn._context.showLink&&!Bn._context.showSources)){var il=Bn._fullLayout,X=c.ensureSingle(il._paper,"text","js-plot-link-container",function(Ft){Ft.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:F.defaultLine,"pointer-events":"all"}).each(function(){var ls=m.select(this);ls.append("tspan").classed("js-link-to-tool",!0),ls.append("tspan").classed("js-link-spacer",!0),ls.append("tspan").classed("js-sourcelinks",!0)})}),cl=X.node(),Sl={y:il._paper.attr("height")-9};document.body.contains(cl)&&cl.getComputedTextLength()>=il.width-20?(Sl["text-anchor"]="start",Sl.x=5):(Sl["text-anchor"]="end",Sl.x=il._paper.attr("width")-7),X.attr(Sl);var st=X.select(".js-link-to-tool"),U=X.select(".js-link-spacer"),re=X.select(".js-sourcelinks");Bn._context.showSources&&Bn._context.showSources(Bn),Bn._context.showLink&&Z(Bn,st),U.text(st.text()&&re.text()?" - ":"")}};function Z(Bn,il){il.text("");var X=il.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Bn._context.linkText+" ");if(Bn._context.sendData)X.on("click",function(){L.sendDataToCloud(Bn)});else{var cl=window.location.pathname.split("/"),Sl=window.location.search;X.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+cl[2].split(".")[0]+"/"+cl[1]+Sl})}}L.sendDataToCloud=function(Bn){var il=(window.PLOTLYENV||{}).BASE_URL||Bn._context.plotlyServerURL;if(il){Bn.emit("plotly_beforeexport");var X=m.select(Bn).append("div").attr("id","hiddenform").style("display","none"),cl=X.append("form").attr({action:il+"/external",method:"post",target:"_blank"}),Sl=cl.append("input").attr({type:"text",name:"data"});return Sl.node().value=L.graphJson(Bn,!1,"keepdata"),cl.node().submit(),X.remove(),Bn.emit("plotly_afterexport"),!1}};var nl=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],Pe=["year","month","dayMonth","dayMonthYear"];L.supplyDefaults=function(Bn,il){var X=il&&il.skipUpdateCalc,cl=Bn._fullLayout||{};if(cl._skipDefaults){delete cl._skipDefaults;return}var Sl=Bn._fullLayout={},st=Bn.layout||{},U=Bn._fullData||[],re=Bn._fullData=[],Ft=Bn.data||[],ls=Bn.calcdata||[],_l=Bn._context||{},Ll;Bn._transitionData||L.createTransitionData(Bn),Sl._dfltTitle={plot:A(Bn,"Click to enter Plot title"),subtitle:A(Bn,"Click to enter Plot subtitle"),x:A(Bn,"Click to enter X axis title"),y:A(Bn,"Click to enter Y axis title"),colorbar:A(Bn,"Click to enter Colorscale title"),annotation:A(Bn,"new text")},Sl._traceWord=A(Bn,"trace");var zl=ol(Bn,nl);if(Sl._mapboxAccessToken=_l.mapboxAccessToken,cl._initialAutoSizeIsDone){var yu=cl.width,Vu=cl.height;L.supplyLayoutGlobalDefaults(st,Sl,zl),st.width||(Sl.width=yu),st.height||(Sl.height=Vu),L.sanitizeMargins(Sl)}else{L.supplyLayoutGlobalDefaults(st,Sl,zl);var od=!st.width||!st.height,Ad=Sl.autosize,vd=_l.autosizable,fd=od&&(Ad||vd);fd?L.plotAutoSize(Bn,st,Sl):od&&L.sanitizeMargins(Sl),!Ad&&od&&(st.width=Sl.width,st.height=Sl.height)}Sl._d3locale=nt(zl,Sl.separators),Sl._extraFormat=ol(Bn,Pe),Sl._initialAutoSizeIsDone=!0,Sl._dataLength=Ft.length,Sl._modules=[],Sl._visibleModules=[],Sl._basePlotModules=[];var Kl=Sl._subplots=q(),vu=Sl._splomAxes={x:{},y:{}},Rl=Sl._splomSubplots={};Sl._splomGridDflt={},Sl._scatterStackOpts={},Sl._firstScatter={},Sl._alignmentOpts={},Sl._colorAxes={},Sl._requestRangeslider={},Sl._traceUids=se(U,Ft),L.supplyDataDefaults(Ft,re,st,Sl);var Wu=Object.keys(vu.x),cd=Object.keys(vu.y);if(Wu.length>1&&cd.length>1){for(y.getComponentMethod("grid","sizeDefaults")(st,Sl),Ll=0;Ll<Wu.length;Ll++)c.pushUnique(Kl.xaxis,Wu[Ll]);for(Ll=0;Ll<cd.length;Ll++)c.pushUnique(Kl.yaxis,cd[Ll]);for(var xd in Rl)c.pushUnique(Kl.cartesian,xd)}if(Sl._has=L._hasPlotType.bind(Sl),U.length===re.length)for(Ll=0;Ll<re.length;Ll++)C(re[Ll],U[Ll]);L.supplyLayoutModuleDefaults(st,Sl,re,Bn._transitionData);var Td=Sl._visibleModules,Pd=[];for(Ll=0;Ll<Td.length;Ll++){var Hd=Td[Ll].crossTraceDefaults;Hd&&c.pushUnique(Pd,Hd)}for(Ll=0;Ll<Pd.length;Ll++)Pd[Ll](re,Sl);Sl._hasOnlyLargeSploms=Sl._basePlotModules.length===1&&Sl._basePlotModules[0].name==="splom"&&Wu.length>15&&cd.length>15&&Sl.shapes.length===0&&Sl.images.length===0,L.linkSubplots(re,Sl,U,cl),L.cleanPlot(re,Sl,U,cl);var $d=!!(cl._has&&cl._has("cartesian")),Wd=!!(Sl._has&&Sl._has("cartesian")),mh=$d,Dd=Wd;mh&&!Dd?cl._bgLayer.remove():Dd&&!mh&&(Sl._shouldCreateBgLayer=!0),cl._zoomlayer&&!Bn._dragging&&B({_fullLayout:cl}),In(re,Sl),C(Sl,cl),y.getComponentMethod("colorscale","crossTraceDefaults")(re,Sl),Sl._preGUI||(Sl._preGUI={}),Sl._tracePreGUI||(Sl._tracePreGUI={});var bh=Sl._tracePreGUI,Dh={},vh;for(vh in bh)Dh[vh]="old";for(Ll=0;Ll<re.length;Ll++)vh=re[Ll]._fullInput.uid,Dh[vh]||(bh[vh]={}),Dh[vh]="new";for(vh in Dh)Dh[vh]==="old"&&delete bh[vh];al(Sl),y.getComponentMethod("rangeslider","makeData")(Sl),!X&&ls.length===re.length&&L.supplyDefaultsUpdateCalc(ls,re)},L.supplyDefaultsUpdateCalc=function(Bn,il){for(var X=0;X<il.length;X++){var cl=il[X],Sl=(Bn[X]||[])[0];if(Sl&&Sl.trace){var st=Sl.trace;if(st._hasCalcTransform){var U=st._arrayAttrs,re,Ft,ls;for(re=0;re<U.length;re++)Ft=U[re],ls=c.nestedProperty(st,Ft).get().slice(),c.nestedProperty(cl,Ft).set(ls)}Sl.trace=cl}}};function se(Bn,il){var X=il.length,cl=[],Sl,st;for(Sl=0;Sl<Bn.length;Sl++){var U=Bn[Sl]._fullInput;U!==st&&cl.push(U),st=U}var re=cl.length,Ft=new Array(X),ls={};function _l(yu,Vu){Ft[Vu]=yu,ls[yu]=1}function Ll(yu,Vu){if(yu&&typeof yu=="string"&&!ls[yu])return _l(yu,Vu),!0}for(Sl=0;Sl<X;Sl++){var zl=il[Sl].uid;typeof zl=="number"&&(zl=String(zl)),!Ll(zl,Sl)&&(Sl<re&&Ll(cl[Sl].uid,Sl)||_l(c.randstr(ls),Sl))}return Ft}function q(){var Bn=y.collectableSubplotTypes,il={},X,cl;if(!Bn){Bn=[];var Sl=y.subplotsRegistry;for(var st in Sl){var U=Sl[st],re=U.attr;if(re&&(Bn.push(st),Array.isArray(re)))for(cl=0;cl<re.length;cl++)c.pushUnique(Bn,re[cl])}}for(X=0;X<Bn.length;X++)il[Bn[X]]=[];return il}function ol(Bn,il){var X=Bn._context.locale;X||(X="en-US");var cl=!1,Sl={};function st(Ll){for(var zl=!0,yu=0;yu<il.length;yu++){var Vu=il[yu];Sl[Vu]||(Ll[Vu]?Sl[Vu]=Ll[Vu]:zl=!1)}zl&&(cl=!0)}for(var U=0;U<2;U++){for(var re=Bn._context.locales,Ft=0;Ft<2;Ft++){var ls=(re[X]||{}).format;if(ls&&(st(ls),cl))break;re=y.localeRegistry}var _l=X.split("-")[0];if(cl||_l===X)break;X=_l}return cl||st(y.localeRegistry.en.format),Sl}function nt(Bn,il){return Bn.decimal=il.charAt(0),Bn.thousands=il.charAt(1),{numberFormat:function(X){try{X=d(Bn).format(c.adjustFormat(X))}catch{return c.warnBadFormat(X),c.noFormat}return X},timeFormat:l(Bn).utcFormat}}function In(Bn,il){var X,cl=[];il.meta&&(X=il._meta={meta:il.meta,layout:{meta:il.meta}});for(var Sl=0;Sl<Bn.length;Sl++){var st=Bn[Sl];st.meta?cl[st.index]=st._meta={meta:st.meta}:il.meta&&(st._meta={meta:il.meta}),il.meta&&(st._meta.layout={meta:il.meta})}cl.length&&(X||(X=il._meta={}),X.data=cl)}L.createTransitionData=function(Bn){Bn._transitionData||(Bn._transitionData={}),Bn._transitionData._frames||(Bn._transitionData._frames=[]),Bn._transitionData._frameHash||(Bn._transitionData._frameHash={}),Bn._transitionData._counter||(Bn._transitionData._counter=0),Bn._transitionData._interruptCallbacks||(Bn._transitionData._interruptCallbacks=[])},L._hasPlotType=function(Bn){var il,X=this._basePlotModules||[];for(il=0;il<X.length;il++)if(X[il].name===Bn)return!0;var cl=this._modules||[];for(il=0;il<cl.length;il++){var Sl=cl[il].name;if(Sl===Bn)return!0;var st=y.modules[Sl];if(st&&st.categories[Bn])return!0}return!1},L.cleanPlot=function(Bn,il,X,cl){var Sl,st,U=cl._basePlotModules||[];for(Sl=0;Sl<U.length;Sl++){var re=U[Sl];re.clean&&re.clean(Bn,il,X,cl)}var Ft=cl._has&&cl._has("gl"),ls=il._has&&il._has("gl");Ft&&!ls&&cl._glcontainer!==void 0&&(cl._glcontainer.selectAll(".gl-canvas").remove(),cl._glcontainer.selectAll(".no-webgl").remove(),cl._glcanvas=null);var _l=!!cl._infolayer;e:for(Sl=0;Sl<X.length;Sl++){var Ll=X[Sl],zl=Ll.uid;for(st=0;st<Bn.length;st++){var yu=Bn[st];if(zl===yu.uid)continue e}_l&&cl._infolayer.select(".cb"+zl).remove()}},L.linkSubplots=function(Bn,il,X,cl){var Sl,st,U=cl._plots||{},re=il._plots={},Ft=il._subplots,ls={_fullData:Bn,_fullLayout:il},_l=Ft.cartesian||[];for(Sl=0;Sl<_l.length;Sl++){var Ll=_l[Sl],zl=U[Ll],yu=R.getFromId(ls,Ll,"x"),Vu=R.getFromId(ls,Ll,"y"),od;for(zl?od=re[Ll]=zl:(od=re[Ll]={},od.id=Ll),yu._counterAxes.push(Vu._id),Vu._counterAxes.push(yu._id),yu._subplotsWith.push(Ll),Vu._subplotsWith.push(Ll),od.xaxis=yu,od.yaxis=Vu,od._hasClipOnAxisFalse=!1,st=0;st<Bn.length;st++){var Ad=Bn[st];if(Ad.xaxis===od.xaxis._id&&Ad.yaxis===od.yaxis._id&&Ad.cliponaxis===!1){od._hasClipOnAxisFalse=!0;break}}}var vd=R.list(ls,null,!0),fd;for(Sl=0;Sl<vd.length;Sl++){fd=vd[Sl];var Kl=null;fd.overlaying&&(Kl=R.getFromId(ls,fd.overlaying),Kl&&Kl.overlaying&&(fd.overlaying=!1,Kl=null)),fd._mainAxis=Kl||fd,Kl&&(fd.domain=Kl.domain.slice()),fd._anchorAxis=fd.anchor==="free"?null:R.getFromId(ls,fd.anchor)}for(Sl=0;Sl<vd.length;Sl++)if(fd=vd[Sl],fd._counterAxes.sort(R.idSort),fd._subplotsWith.sort(c.subplotSort),fd._mainSubplot=_t(fd,il),fd._counterAxes.length&&(fd.spikemode&&fd.spikemode.indexOf("across")!==-1||fd.automargin&&fd.mirror&&fd.anchor!=="free"||y.getComponentMethod("rangeslider","isVisible")(fd))){var vu=1,Rl=0;for(st=0;st<fd._counterAxes.length;st++){var Wu=R.getFromId(ls,fd._counterAxes[st]);vu=Math.min(vu,Wu.domain[0]),Rl=Math.max(Rl,Wu.domain[1])}vu<Rl&&(fd._counterDomainMin=vu,fd._counterDomainMax=Rl)}};function _t(Bn,il){var X={_fullLayout:il},cl=Bn._id.charAt(0)==="x",Sl=Bn._mainAxis._anchorAxis,st="",U="",re="";if(Sl&&(re=Sl._mainAxis._id,st=cl?Bn._id+re:re+Bn._id),!st||!il._plots[st]){st="";for(var Ft=Bn._counterAxes,ls=0;ls<Ft.length;ls++){var _l=Ft[ls],Ll=cl?Bn._id+_l:_l+Bn._id;U||(U=Ll);var zl=R.getFromId(X,_l);if(re&&zl.overlaying===re){st=Ll;break}}}return st||U}L.clearExpandedTraceDefaultColors=function(Bn){var il,X,cl;function Sl(U,re,Ft,ls){X[ls]=re,X.length=ls+1,U.valType==="color"&&U.dflt===void 0&&il.push(X.join("."))}for(X=[],il=Bn._module._colorAttrs,il||(Bn._module._colorAttrs=il=[],w.crawl(Bn._module.attributes,Sl)),cl=0;cl<il.length;cl++){var st=c.nestedProperty(Bn,"_input."+il[cl]);st.get()||c.nestedProperty(Bn,il[cl]).set(null)}},L.supplyDataDefaults=function(Bn,il,X,cl){var Sl=cl._modules,st=cl._visibleModules,U=cl._basePlotModules,re=0,Ft,ls,_l;cl._transformModules=[];function Ll(vd){il.push(vd);var fd=vd._module;fd&&(c.pushUnique(Sl,fd),vd.visible===!0&&c.pushUnique(st,fd),c.pushUnique(U,vd._module.basePlotModule),vd._input.visible!==!1&&re++)}var zl={},yu=[],Vu=(X.template||{}).data||{},od=S.traceTemplater(Vu);for(Ft=0;Ft<Bn.length;Ft++)_l=Bn[Ft],ls=od.newTrace(_l),ls.uid=cl._traceUids[Ft],L.supplyTraceDefaults(_l,ls,re,cl,Ft),ls.index=Ft,ls._input=_l,ls._fullInput=ls,Ll(ls),y.traceIs(ls,"carpetAxis")&&(zl[ls.carpet]=ls),y.traceIs(ls,"carpetDependent")&&yu.push(Ft);for(Ft=0;Ft<yu.length;Ft++)if(ls=il[yu[Ft]],!!ls.visible){var Ad=zl[ls.carpet];if(ls._carpet=Ad,!Ad||!Ad.visible){ls.visible=!1;continue}ls.xaxis=Ad.xaxis,ls.yaxis=Ad.yaxis}},L.supplyAnimationDefaults=function(Bn){Bn=Bn||{};var il,X={};function cl(Sl,st){return c.coerce(Bn||{},X,P,Sl,st)}if(cl("mode"),cl("direction"),cl("fromcurrent"),Array.isArray(Bn.frame))for(X.frame=[],il=0;il<Bn.frame.length;il++)X.frame[il]=L.supplyAnimationFrameDefaults(Bn.frame[il]||{});else X.frame=L.supplyAnimationFrameDefaults(Bn.frame||{});if(Array.isArray(Bn.transition))for(X.transition=[],il=0;il<Bn.transition.length;il++)X.transition[il]=L.supplyAnimationTransitionDefaults(Bn.transition[il]||{});else X.transition=L.supplyAnimationTransitionDefaults(Bn.transition||{});return X},L.supplyAnimationFrameDefaults=function(Bn){var il={};function X(cl,Sl){return c.coerce(Bn||{},il,P.frame,cl,Sl)}return X("duration"),X("redraw"),il},L.supplyAnimationTransitionDefaults=function(Bn){var il={};function X(cl,Sl){return c.coerce(Bn||{},il,P.transition,cl,Sl)}return X("duration"),X("easing"),il},L.supplyFrameDefaults=function(Bn){var il={};function X(cl,Sl){return c.coerce(Bn,il,D,cl,Sl)}return X("group"),X("name"),X("traces"),X("baseframe"),X("data"),X("layout"),il},L.supplyTraceDefaults=function(Bn,il,X,cl,Sl){var st=cl.colorway||F.defaults,U=st[X%st.length],re;function Ft(Kl,vu){return c.coerce(Bn,il,L.attributes,Kl,vu)}var ls=Ft("visible");Ft("type"),Ft("name",cl._traceWord+" "+Sl),Ft("uirevision",cl.uirevision);var _l=L.getModule(il);if(il._module=_l,_l){var Ll=_l.basePlotModule,zl=Ll.attr,yu=Ll.attributes;if(zl&&yu){var Vu=cl._subplots,od="";if(Array.isArray(zl))for(re=0;re<zl.length;re++){var Ad=zl[re],vd=c.coerce(Bn,il,yu,Ad);Vu[Ad]&&c.pushUnique(Vu[Ad],vd),od+=vd}else od=c.coerce(Bn,il,yu,zl);Vu[Ll.name]&&c.pushUnique(Vu[Ll.name],od)}}if(ls&&(Ft("customdata"),Ft("ids"),Ft("meta"),y.traceIs(il,"showLegend")?(c.coerce(Bn,il,_l.attributes.showlegend?_l.attributes:L.attributes,"showlegend"),Ft("legend"),Ft("legendwidth"),Ft("legendgroup"),Ft("legendgrouptitle.text"),Ft("legendrank"),il._dfltShowLegend=!0):il._dfltShowLegend=!1,_l&&_l.supplyDefaults(Bn,il,U,cl),y.traceIs(il,"noOpacity")||Ft("opacity"),y.traceIs(il,"notLegendIsolatable")&&(il.visible=!!il.visible),y.traceIs(il,"noHover")||(il.hovertemplate||c.coerceHoverinfo(Bn,il,cl),il.type!=="parcats"&&y.getComponentMethod("fx","supplyDefaults")(Bn,il,U,cl)),_l&&_l.selectPoints)){var fd=Ft("selectedpoints");c.isTypedArray(fd)&&(il.selectedpoints=Array.from(fd))}return il},L.supplyLayoutGlobalDefaults=function(Bn,il,X){function cl(Ll,zl){return c.coerce(Bn,il,L.layoutAttributes,Ll,zl)}var Sl=Bn.template;c.isPlainObject(Sl)&&(il.template=Sl,il._template=Sl.layout,il._dataTemplate=Sl.data),cl("autotypenumbers");var st=c.coerceFont(cl,"font"),U=st.size;c.coerceFont(cl,"title.font",st,{overrideDflt:{size:Math.round(U*1.4)}}),cl("title.text",il._dfltTitle.plot),cl("title.xref");var re=cl("title.yref");cl("title.pad.t"),cl("title.pad.r"),cl("title.pad.b"),cl("title.pad.l");var Ft=cl("title.automargin");cl("title.x"),cl("title.xanchor"),cl("title.y"),cl("title.yanchor"),cl("title.subtitle.text",il._dfltTitle.subtitle),c.coerceFont(cl,"title.subtitle.font",st,{overrideDflt:{size:Math.round(il.title.font.size*.7)}}),Ft&&(re==="paper"&&(il.title.y!==0&&(il.title.y=1),il.title.yanchor==="auto"&&(il.title.yanchor=il.title.y===0?"top":"bottom")),re==="container"&&(il.title.y==="auto"&&(il.title.y=1),il.title.yanchor==="auto"&&(il.title.yanchor=il.title.y<.5?"bottom":"top")));var ls=cl("uniformtext.mode");ls&&cl("uniformtext.minsize"),cl("autosize",!(Bn.width&&Bn.height)),cl("width"),cl("height"),cl("minreducedwidth"),cl("minreducedheight"),cl("margin.l"),cl("margin.r"),cl("margin.t"),cl("margin.b"),cl("margin.pad"),cl("margin.autoexpand"),Bn.width&&Bn.height&&L.sanitizeMargins(il),y.getComponentMethod("grid","sizeDefaults")(Bn,il),cl("paper_bgcolor"),cl("separators",X.decimal+X.thousands),cl("hidesources"),cl("colorway"),cl("datarevision");var _l=cl("uirevision");cl("editrevision",_l),cl("selectionrevision",_l),y.getComponentMethod("modebar","supplyLayoutDefaults")(Bn,il),y.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Bn,il,cl),y.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(Bn,il,cl),cl("meta"),c.isPlainObject(Bn.transition)&&(cl("transition.duration"),cl("transition.easing"),cl("transition.ordering")),y.getComponentMethod("calendars","handleDefaults")(Bn,il,"calendar"),y.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Bn,il,cl),c.coerce(Bn,il,O,"scattermode")};function Fn(Bn){return typeof Bn=="string"&&Bn.substr(Bn.length-2)==="px"&&parseFloat(Bn)}L.plotAutoSize=function(Bn,il,X){var cl=Bn._context||{},Sl=cl.frameMargins,st,U,re=c.isPlotDiv(Bn);if(re&&Bn.emit("plotly_autosize"),cl.fillFrame)st=window.innerWidth,U=window.innerHeight,document.body.style.overflow="hidden";else{var Ft=re?window.getComputedStyle(Bn):{};if(st=Fn(Ft.width)||Fn(Ft.maxWidth)||X.width,U=Fn(Ft.height)||Fn(Ft.maxHeight)||X.height,x(Sl)&&Sl>0){var ls=1-2*Sl;st=Math.round(ls*st),U=Math.round(ls*U)}}var _l=L.layoutAttributes.width.min,Ll=L.layoutAttributes.height.min;st<_l&&(st=_l),U<Ll&&(U=Ll);var zl=!il.width&&Math.abs(X.width-st)>1,yu=!il.height&&Math.abs(X.height-U)>1;(yu||zl)&&(zl&&(X.width=st),yu&&(X.height=U)),Bn._initialAutoSize||(Bn._initialAutoSize={width:st,height:U}),L.sanitizeMargins(X)},L.supplyLayoutModuleDefaults=function(Bn,il,X,cl){var Sl=y.componentsRegistry,st=il._basePlotModules,U,re,Ft,ls=y.subplotsRegistry.cartesian;for(U in Sl)Ft=Sl[U],Ft.includeBasePlot&&Ft.includeBasePlot(Bn,il);st.length||st.push(ls),il._has("cartesian")&&(y.getComponentMethod("grid","contentDefaults")(Bn,il),ls.finalizeSubplots(Bn,il));for(var _l in il._subplots)il._subplots[_l].sort(c.subplotSort);for(re=0;re<st.length;re++)Ft=st[re],Ft.supplyLayoutDefaults&&Ft.supplyLayoutDefaults(Bn,il,X);var Ll=il._modules;for(re=0;re<Ll.length;re++)Ft=Ll[re],Ft.supplyLayoutDefaults&&Ft.supplyLayoutDefaults(Bn,il,X);var zl=il._transformModules;for(re=0;re<zl.length;re++)Ft=zl[re],Ft.supplyLayoutDefaults&&Ft.supplyLayoutDefaults(Bn,il,X,cl);for(U in Sl)Ft=Sl[U],Ft.supplyLayoutDefaults&&Ft.supplyLayoutDefaults(Bn,il,X)},L.purge=function(Bn){var il=Bn._fullLayout||{};il._glcontainer!==void 0&&(il._glcontainer.selectAll(".gl-canvas").remove(),il._glcontainer.remove(),il._glcanvas=null),il._modeBar&&il._modeBar.destroy(),Bn._transitionData&&(Bn._transitionData._interruptCallbacks&&(Bn._transitionData._interruptCallbacks.length=0),Bn._transitionData._animationRaf&&window.cancelAnimationFrame(Bn._transitionData._animationRaf)),c.clearThrottle(),c.clearResponsive(Bn),delete Bn.data,delete Bn.layout,delete Bn._fullData,delete Bn._fullLayout,delete Bn.calcdata,delete Bn.empty,delete Bn.fid,delete Bn.undoqueue,delete Bn.undonum,delete Bn.autoplay,delete Bn.changed,delete Bn._promises,delete Bn._redrawTimer,delete Bn._hmlumcount,delete Bn._hmpixcount,delete Bn._transitionData,delete Bn._transitioning,delete Bn._initialAutoSize,delete Bn._transitioningWithDuration,delete Bn._dragging,delete Bn._dragged,delete Bn._dragdata,delete Bn._hoverdata,delete Bn._snapshotInProgress,delete Bn._editing,delete Bn._mouseDownTime,delete Bn._legendMouseDownTime,Bn.removeAllListeners&&Bn.removeAllListeners()},L.style=function(Bn){var il=Bn._fullLayout._visibleModules,X=[],cl;for(cl=0;cl<il.length;cl++){var Sl=il[cl];Sl.style&&c.pushUnique(X,Sl.style)}for(cl=0;cl<X.length;cl++)X[cl](Bn)},L.sanitizeMargins=function(Bn){if(!(!Bn||!Bn.margin)){var il=Bn.width,X=Bn.height,cl=Bn.margin,Sl=il-(cl.l+cl.r),st=X-(cl.t+cl.b),U;Sl<0&&(U=(il-1)/(cl.l+cl.r),cl.l=Math.floor(U*cl.l),cl.r=Math.floor(U*cl.r)),st<0&&(U=(X-1)/(cl.t+cl.b),cl.t=Math.floor(U*cl.t),cl.b=Math.floor(U*cl.b))}},L.clearAutoMarginIds=function(Bn){Bn._fullLayout._pushmarginIds={}},L.allowAutoMargin=function(Bn,il){Bn._fullLayout._pushmarginIds[il]=1};function al(Bn){var il=Bn.margin;if(!Bn._size){var X=Bn._size={l:Math.round(il.l),r:Math.round(il.r),t:Math.round(il.t),b:Math.round(il.b),p:Math.round(il.pad)};X.w=Math.round(Bn.width)-X.l-X.r,X.h=Math.round(Bn.height)-X.t-X.b}Bn._pushmargin||(Bn._pushmargin={}),Bn._pushmarginIds||(Bn._pushmarginIds={}),Bn._reservedMargin||(Bn._reservedMargin={})}var sl=2,ce=2;L.autoMargin=function(Bn,il,X){var cl=Bn._fullLayout,Sl=cl.width,st=cl.height,U=cl.margin,re=cl.minreducedwidth,Ft=cl.minreducedheight,ls=c.constrain(Sl-U.l-U.r,sl,re),_l=c.constrain(st-U.t-U.b,ce,Ft),Ll=Math.max(0,Sl-ls),zl=Math.max(0,st-_l),yu=cl._pushmargin,Vu=cl._pushmarginIds;if(U.autoexpand!==!1){if(!X)delete yu[il],delete Vu[il];else{var od=X.pad;if(od===void 0&&(od=Math.min(12,U.l,U.r,U.t,U.b)),Ll){var Ad=(X.l+X.r)/Ll;Ad>1&&(X.l/=Ad,X.r/=Ad)}if(zl){var vd=(X.t+X.b)/zl;vd>1&&(X.t/=vd,X.b/=vd)}var fd=X.xl!==void 0?X.xl:X.x,Kl=X.xr!==void 0?X.xr:X.x,vu=X.yt!==void 0?X.yt:X.y,Rl=X.yb!==void 0?X.yb:X.y;yu[il]={l:{val:fd,size:X.l+od},r:{val:Kl,size:X.r+od},b:{val:Rl,size:X.b+od},t:{val:vu,size:X.t+od}},Vu[il]=1}if(!cl._replotting)return L.doAutoMargin(Bn)}};function ll(Bn){if("_redrawFromAutoMarginCount"in Bn._fullLayout)return!1;var il=R.list(Bn,"",!0);for(var X in il)if(il[X].autoshift||il[X].shift)return!0;return!1}L.doAutoMargin=function(Bn){var il=Bn._fullLayout,X=il.width,cl=il.height;il._size||(il._size={}),al(il);var Sl=il._size,st=il.margin,U={t:0,b:0,l:0,r:0},re=c.extendFlat({},Sl),Ft=st.l,ls=st.r,_l=st.t,Ll=st.b,zl=il._pushmargin,yu=il._pushmarginIds,Vu=il.minreducedwidth,od=il.minreducedheight;if(st.autoexpand!==!1){for(var Ad in zl)yu[Ad]||delete zl[Ad];var vd=Bn._fullLayout._reservedMargin;for(var fd in vd)for(var Kl in vd[fd]){var vu=vd[fd][Kl];U[Kl]=Math.max(U[Kl],vu)}zl.base={l:{val:0,size:Ft},r:{val:1,size:ls},t:{val:1,size:_l},b:{val:0,size:Ll}};for(var Rl in U){var Wu=0;for(var cd in zl)cd!=="base"&&x(zl[cd][Rl].size)&&(Wu=zl[cd][Rl].size>Wu?zl[cd][Rl].size:Wu);var xd=Math.max(0,st[Rl]-Wu);U[Rl]=Math.max(0,U[Rl]-xd)}for(var Td in zl){var Pd=zl[Td].l||{},Hd=zl[Td].b||{},$d=Pd.val,Wd=Pd.size,mh=Hd.val,Dd=Hd.size,bh=X-U.r-U.l,Dh=cl-U.t-U.b;for(var vh in zl){if(x(Wd)&&zl[vh].r){var Gh=zl[vh].r.val,Ql=zl[vh].r.size;if(Gh>$d){var Ku=(Wd*Gh+(Ql-bh)*$d)/(Gh-$d),gl=(Ql*(1-$d)+(Wd-bh)*(1-Gh))/(Gh-$d);Ku+gl>Ft+ls&&(Ft=Ku,ls=gl)}}if(x(Dd)&&zl[vh].t){var Dl=zl[vh].t.val,Vl=zl[vh].t.size;if(Dl>mh){var Mu=(Dd*Dl+(Vl-Dh)*mh)/(Dl-mh),Nu=(Vl*(1-mh)+(Dd-Dh)*(1-Dl))/(Dl-mh);Mu+Nu>Ll+_l&&(Ll=Mu,_l=Nu)}}}}}var ed=c.constrain(X-st.l-st.r,sl,Vu),sd=c.constrain(cl-st.t-st.b,ce,od),Sd=Math.max(0,X-ed),yd=Math.max(0,cl-sd);if(Sd){var bd=(Ft+ls)/Sd;bd>1&&(Ft/=bd,ls/=bd)}if(yd){var Kd=(Ll+_l)/yd;Kd>1&&(Ll/=Kd,_l/=Kd)}if(Sl.l=Math.round(Ft)+U.l,Sl.r=Math.round(ls)+U.r,Sl.t=Math.round(_l)+U.t,Sl.b=Math.round(Ll)+U.b,Sl.p=Math.round(st.pad),Sl.w=Math.round(X)-Sl.l-Sl.r,Sl.h=Math.round(cl)-Sl.t-Sl.b,!il._replotting&&(L.didMarginChange(re,Sl)||ll(Bn))){"_redrawFromAutoMarginCount"in il?il._redrawFromAutoMarginCount++:il._redrawFromAutoMarginCount=1;var Jd=3*(1+Object.keys(yu).length);if(il._redrawFromAutoMarginCount<Jd)return y.call("_doPlot",Bn);il._size=re,c.warn("Too many auto-margin redraws.")}ul(Bn)};function ul(Bn){var il=R.list(Bn,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(X){for(var cl=0;cl<il.length;cl++){var Sl=il[cl][X];Sl&&Sl()}})}var fl=["l","r","t","b","p","w","h"];L.didMarginChange=function(Bn,il){for(var X=0;X<fl.length;X++){var cl=fl[X],Sl=Bn[cl],st=il[cl];if(!x(Sl)||Math.abs(st-Sl)>1)return!0}return!1},L.graphJson=function(Bn,il,X,cl,Sl,st){(Sl&&il&&!Bn._fullData||Sl&&!il&&!Bn._fullLayout)&&L.supplyDefaults(Bn);var U=Sl?Bn._fullData:Bn.data,re=Sl?Bn._fullLayout:Bn.layout,Ft=(Bn._transitionData||{})._frames;function ls(zl,yu){if(typeof zl=="function")return yu?"_function_":null;if(c.isPlainObject(zl)){var Vu={},od;return Object.keys(zl).sort().forEach(function(Kl){if(["_","["].indexOf(Kl.charAt(0))===-1){if(typeof zl[Kl]=="function"){yu&&(Vu[Kl]="_function");return}if(X==="keepdata"){if(Kl.substr(Kl.length-3)==="src")return}else if(X==="keepstream"){if(od=zl[Kl+"src"],typeof od=="string"&&od.indexOf(":")>0&&!c.isPlainObject(zl.stream))return}else if(X!=="keepall"&&(od=zl[Kl+"src"],typeof od=="string"&&od.indexOf(":")>0))return;Vu[Kl]=ls(zl[Kl],yu)}}),Vu}var Ad=Array.isArray(zl),vd=c.isTypedArray(zl);if((Ad||vd)&&zl.dtype&&zl.shape){var fd=zl.bdata;return ls({dtype:zl.dtype,shape:zl.shape,bdata:c.isArrayBuffer(fd)?v.encode(fd):fd},yu)}return Ad?zl.map(function(Kl){return ls(Kl,yu)}):vd?c.simpleMap(zl,c.identity):c.isJSDate(zl)?c.ms2DateTimeLocal(+zl):zl}var _l={data:(U||[]).map(function(zl){var yu=ls(zl);return il&&delete yu.fit,yu})};if(!il&&(_l.layout=ls(re),Sl)){var Ll=re._size;_l.layout.computed={margin:{b:Ll.b,l:Ll.l,r:Ll.r,t:Ll.t}}}return Ft&&(_l.frames=ls(Ft)),st&&(_l.config=ls(Bn._context,!0)),cl==="object"?_l:JSON.stringify(_l)},L.modifyFrames=function(Bn,il){var X,cl,Sl,st=Bn._transitionData._frames,U=Bn._transitionData._frameHash;for(X=0;X<il.length;X++)switch(cl=il[X],cl.type){case"replace":Sl=cl.value;var re=(st[cl.index]||{}).name,Ft=Sl.name;st[cl.index]=U[Ft]=Sl,Ft!==re&&(delete U[re],U[Ft]=Sl);break;case"insert":Sl=cl.value,U[Sl.name]=Sl,st.splice(cl.index,0,Sl);break;case"delete":Sl=st[cl.index],delete U[Sl.name],st.splice(cl.index,1);break}return Promise.resolve()},L.computeFrame=function(Bn,il){var X=Bn._transitionData._frameHash,cl,Sl,st,U;if(!il)throw new Error("computeFrame must be given a string frame name");var re=X[il.toString()];if(!re)return!1;for(var Ft=[re],ls=[re.name];re.baseframe&&(re=X[re.baseframe.toString()])&&ls.indexOf(re.name)===-1;)Ft.push(re),ls.push(re.name);for(var _l={};re=Ft.pop();)if(re.layout&&(_l.layout=L.extendLayout(_l.layout,re.layout)),re.data){if(_l.data||(_l.data=[]),Sl=re.traces,!Sl)for(Sl=[],cl=0;cl<re.data.length;cl++)Sl[cl]=cl;for(_l.traces||(_l.traces=[]),cl=0;cl<re.data.length;cl++)st=Sl[cl],st!=null&&(U=_l.traces.indexOf(st),U===-1&&(U=_l.data.length,_l.traces[U]=st),_l.data[U]=L.extendTrace(_l.data[U],re.data[cl]))}return _l},L.recomputeFrameHash=function(Bn){for(var il=Bn._transitionData._frameHash={},X=Bn._transitionData._frames,cl=0;cl<X.length;cl++){var Sl=X[cl];Sl&&Sl.name&&(il[Sl.name]=Sl)}},L.extendObjectWithContainers=function(Bn,il,X){var cl,Sl,st,U,re,Ft,ls,_l,Ll=c.extendDeepNoArrays({},il||{}),zl=c.expandObjectPaths(Ll),yu={};if(X&&X.length)for(st=0;st<X.length;st++)cl=c.nestedProperty(zl,X[st]),Sl=cl.get(),Sl===void 0?c.nestedProperty(yu,X[st]).set(null):(cl.set(null),c.nestedProperty(yu,X[st]).set(Sl));if(Bn=c.extendDeepNoArrays(Bn||{},zl),X&&X.length){for(st=0;st<X.length;st++)if(re=c.nestedProperty(yu,X[st]),ls=re.get(),!!ls){for(Ft=c.nestedProperty(Bn,X[st]),_l=Ft.get(),Array.isArray(_l)||(_l=[],Ft.set(_l)),U=0;U<ls.length;U++){var Vu=ls[U];Vu===null?_l[U]=null:_l[U]=L.extendObjectWithContainers(_l[U],Vu)}Ft.set(_l)}}return Bn},L.dataArrayContainers=["transforms","dimensions"],L.layoutArrayContainers=y.layoutArrayContainers,L.extendTrace=function(Bn,il){return L.extendObjectWithContainers(Bn,il,L.dataArrayContainers)},L.extendLayout=function(Bn,il){return L.extendObjectWithContainers(Bn,il,L.layoutArrayContainers)},L.transition=function(Bn,il,X,cl,Sl,st){var U={redraw:Sl.redraw},re={},Ft=[];return U.prepareFn=function(){for(var ls=Array.isArray(il)?il.length:0,_l=cl.slice(0,ls),Ll=0;Ll<_l.length;Ll++){var zl=_l[Ll],yu=Bn._fullData[zl],Vu=yu._module;if(Vu){if(Vu.animatable){var od=Vu.basePlotModule.name;re[od]||(re[od]=[]),re[od].push(zl)}Bn.data[_l[Ll]]=L.extendTrace(Bn.data[_l[Ll]],il[Ll])}}var Ad=c.expandObjectPaths(c.extendDeepNoArrays({},X)),vd=/^[xy]axis[0-9]*$/;for(var fd in Ad)vd.test(fd)&&delete Ad[fd].range;L.extendLayout(Bn.layout,Ad),delete Bn.calcdata,L.supplyDefaults(Bn),L.doCalcdata(Bn);var Kl=c.expandObjectPaths(X);if(Kl){var vu=Bn._fullLayout._plots;for(var Rl in vu){var Wu=vu[Rl],cd=Wu.xaxis,xd=Wu.yaxis,Td=cd.range.slice(),Pd=xd.range.slice(),Hd=null,$d=null,Wd=null,mh=null;Array.isArray(Kl[cd._name+".range"])?Hd=Kl[cd._name+".range"].slice():Array.isArray((Kl[cd._name]||{}).range)&&(Hd=Kl[cd._name].range.slice()),Array.isArray(Kl[xd._name+".range"])?$d=Kl[xd._name+".range"].slice():Array.isArray((Kl[xd._name]||{}).range)&&($d=Kl[xd._name].range.slice()),Td&&Hd&&(cd.r2l(Td[0])!==cd.r2l(Hd[0])||cd.r2l(Td[1])!==cd.r2l(Hd[1]))&&(Wd={xr0:Td,xr1:Hd}),Pd&&$d&&(xd.r2l(Pd[0])!==xd.r2l($d[0])||xd.r2l(Pd[1])!==xd.r2l($d[1]))&&(mh={yr0:Pd,yr1:$d}),(Wd||mh)&&Ft.push(c.extendFlat({plotinfo:Wu},Wd,mh))}}return Promise.resolve()},U.runFn=function(ls){var _l,Ll=Bn._fullLayout._basePlotModules,zl=Ft.length,yu;if(X)for(yu=0;yu<Ll.length;yu++)Ll[yu].transitionAxes&&Ll[yu].transitionAxes(Bn,Ft,st,ls);zl?(_l=c.extendFlat({},st),_l.duration=0,delete re.cartesian):_l=st;for(var Vu in re){var od=re[Vu],Ad=Bn._fullData[od[0]]._module;Ad.basePlotModule.plot(Bn,od,_l,ls)}},bl(Bn,st,U)},L.transitionFromReact=function(Bn,il,X,cl){var Sl=Bn._fullLayout,st=Sl.transition,U={},re=[];return U.prepareFn=function(){var Ft=Sl._plots;U.redraw=!1,il.anim==="some"&&(U.redraw=!0),X.anim==="some"&&(U.redraw=!0);for(var ls in Ft){var _l=Ft[ls],Ll=_l.xaxis,zl=_l.yaxis,yu=cl[Ll._name].range.slice(),Vu=cl[zl._name].range.slice(),od=Ll.range.slice(),Ad=zl.range.slice();Ll.setScale(),zl.setScale();var vd=null,fd=null;(Ll.r2l(yu[0])!==Ll.r2l(od[0])||Ll.r2l(yu[1])!==Ll.r2l(od[1]))&&(vd={xr0:yu,xr1:od}),(zl.r2l(Vu[0])!==zl.r2l(Ad[0])||zl.r2l(Vu[1])!==zl.r2l(Ad[1]))&&(fd={yr0:Vu,yr1:Ad}),(vd||fd)&&re.push(c.extendFlat({plotinfo:_l},vd,fd))}return Promise.resolve()},U.runFn=function(Ft){for(var ls=Bn._fullData,_l=Bn._fullLayout,Ll=_l._basePlotModules,zl,yu,Vu,od=[],Ad=0;Ad<ls.length;Ad++)od.push(Ad);function vd(){if(Bn._fullLayout)for(var Kl=0;Kl<Ll.length;Kl++)Ll[Kl].transitionAxes&&Ll[Kl].transitionAxes(Bn,re,zl,Ft)}function fd(){if(Bn._fullLayout)for(var Kl=0;Kl<Ll.length;Kl++)Ll[Kl].plot(Bn,Vu,yu,Ft)}re.length&&il.anim?st.ordering==="traces first"?(zl=c.extendFlat({},st,{duration:0}),Vu=od,yu=st,setTimeout(vd,st.duration),fd()):(zl=st,Vu=null,yu=c.extendFlat({},st,{duration:0}),setTimeout(fd,zl.duration),vd()):re.length?(zl=st,vd()):il.anim&&(Vu=od,yu=st,fd())},bl(Bn,st,U)};function bl(Bn,il,X){var cl=!1;function Sl(Ll){var zl=Promise.resolve();if(!Ll)return zl;for(;Ll.length;)zl=zl.then(Ll.shift());return zl}function st(Ll){if(Ll)for(;Ll.length;)Ll.shift()}function U(){return Bn.emit("plotly_transitioning",[]),new Promise(function(Ll){Bn._transitioning=!0,il.duration>0&&(Bn._transitioningWithDuration=!0),Bn._transitionData._interruptCallbacks.push(function(){cl=!0}),X.redraw&&Bn._transitionData._interruptCallbacks.push(function(){return y.call("redraw",Bn)}),Bn._transitionData._interruptCallbacks.push(function(){Bn.emit("plotly_transitioninterrupted",[])});var zl=0,yu=0;function Vu(){return zl++,function(){yu++,!cl&&yu===zl&&re(Ll)}}X.runFn(Vu),setTimeout(Vu())})}function re(Ll){if(Bn._transitionData)return st(Bn._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(X.redraw)return y.call("redraw",Bn)}).then(function(){Bn._transitioning=!1,Bn._transitioningWithDuration=!1,Bn.emit("plotly_transitioned",[])}).then(Ll)}function Ft(){if(Bn._transitionData)return Bn._transitioning=!1,Sl(Bn._transitionData._interruptCallbacks)}var ls=[L.previousPromises,Ft,X.prepareFn,L.rehover,L.reselect,U],_l=c.syncOrAsync(ls,Bn);return(!_l||!_l.then)&&(_l=Promise.resolve()),_l.then(function(){return Bn})}L.doCalcdata=function(Bn,il){var X=R.list(Bn),cl=Bn._fullData,Sl=Bn._fullLayout,st,U,re,Ft,ls=new Array(cl.length),_l=(Bn.calcdata||[]).slice();for(Bn.calcdata=ls,Sl._numBoxes=0,Sl._numViolins=0,Sl._violinScaleGroupStats={},Bn._hmpixcount=0,Bn._hmlumcount=0,Sl._piecolormap={},Sl._sunburstcolormap={},Sl._treemapcolormap={},Sl._iciclecolormap={},Sl._funnelareacolormap={},re=0;re<cl.length;re++)if(Array.isArray(il)&&il.indexOf(re)===-1){ls[re]=_l[re];continue}for(re=0;re<cl.length;re++)st=cl[re],st._arrayAttrs=w.findArrayAttributes(st),st._extremes={};var Ll=Sl._subplots.polar||[];for(re=0;re<Ll.length;re++)X.push(Sl[Ll[re]].radialaxis,Sl[Ll[re]].angularaxis);for(var zl in Sl._colorAxes){var yu=Sl[zl];yu.cauto!==!1&&(delete yu.cmin,delete yu.cmax)}var Vu=!1;function od(fd){if(st=cl[fd],U=st._module,st.visible===!0&&st.transforms){if(U&&U.calc){var Kl=U.calc(Bn,st);Kl[0]&&Kl[0].t&&Kl[0].t._scene&&delete Kl[0].t._scene.dirty}for(Ft=0;Ft<st.transforms.length;Ft++){var vu=st.transforms[Ft];U=transformsRegistry[vu.type],U&&U.calcTransform&&(st._hasCalcTransform=!0,Vu=!0,U.calcTransform(Bn,st,vu))}}}function Ad(fd,Kl){if(st=cl[fd],U=st._module,!!U.isContainer===Kl){var vu=[];if(st.visible===!0&&st._length!==0){delete st._indexToPoints;var Rl=st.transforms||[];for(Ft=Rl.length-1;Ft>=0;Ft--)if(Rl[Ft].enabled){st._indexToPoints=Rl[Ft]._indexToPoints;break}U&&U.calc&&(vu=U.calc(Bn,st))}(!Array.isArray(vu)||!vu[0])&&(vu=[{x:b,y:b}]),vu[0].t||(vu[0].t={}),vu[0].trace=st,ls[fd]=vu}}for(ql(X,cl,Sl),re=0;re<cl.length;re++)Ad(re,!0);for(re=0;re<cl.length;re++)od(re);for(Vu&&ql(X,cl,Sl),re=0;re<cl.length;re++)Ad(re,!0);for(re=0;re<cl.length;re++)Ad(re,!1);gu(Bn);var vd=Ul(X,Bn);if(vd.length){for(Sl._numBoxes=0,Sl._numViolins=0,re=0;re<vd.length;re++)Ad(vd[re],!0);for(re=0;re<vd.length;re++)Ad(vd[re],!1);gu(Bn)}y.getComponentMethod("fx","calc")(Bn),y.getComponentMethod("errorbars","calc")(Bn)};var El=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function Ul(Bn,il){var X=[],cl,Sl,st,U,re;function Ft(vh,Gh,Ql){var Ku=Gh._id.charAt(0);if(vh==="histogram2dcontour"){var gl=Gh._counterAxes[0],Dl=R.getFromId(il,gl),Vl=Ku==="x"||gl==="x"&&Dl.type==="category",Mu=Ku==="y"||gl==="y"&&Dl.type==="category";return function(Nu,ed){return Nu===0||ed===0||Vl&&Nu===Ql[ed].length-1||Mu&&ed===Ql.length-1?-1:(Ku==="y"?ed:Nu)-1}}else return function(Nu,ed){return Ku==="y"?ed:Nu}}var ls={min:function(vh){return c.aggNums(Math.min,null,vh)},max:function(vh){return c.aggNums(Math.max,null,vh)},sum:function(vh){return c.aggNums(function(Gh,Ql){return Gh+Ql},null,vh)},total:function(vh){return c.aggNums(function(Gh,Ql){return Gh+Ql},null,vh)},mean:function(vh){return c.mean(vh)},"geometric mean":function(vh){return c.geometricMean(vh)},median:function(vh){return c.median(vh)}};function _l(vh,Gh){return vh[1]-Gh[1]}function Ll(vh,Gh){return Gh[1]-vh[1]}for(cl=0;cl<Bn.length;cl++){var zl=Bn[cl];if(zl.type==="category"){var yu=zl.categoryorder.match(El);if(yu){var Vu=yu[1],od=yu[2],Ad=zl._id.charAt(0),vd=Ad==="x",fd=[];for(Sl=0;Sl<zl._categories.length;Sl++)fd.push([zl._categories[Sl],[]]);for(Sl=0;Sl<zl._traceIndices.length;Sl++){var Kl=zl._traceIndices[Sl],vu=il._fullData[Kl];if(vu.visible===!0){var Rl=vu.type;y.traceIs(vu,"histogram")&&(delete vu._xautoBinFinished,delete vu._yautoBinFinished);var Wu=Rl==="splom",cd=Rl==="scattergl",xd=il.calcdata[Kl];for(st=0;st<xd.length;st++){var Td=xd[st],Pd,Hd;if(Wu){var $d=vu._axesDim[zl._id];if(!vd){var Wd=vu._diag[$d][0];Wd&&(zl=il._fullLayout[R.id2name(Wd)])}var mh=Td.trace.dimensions[$d].values;for(U=0;U<mh.length;U++)for(Pd=zl._categoriesMap[mh[U]],re=0;re<Td.trace.dimensions.length;re++)if(re!==$d){var Dd=Td.trace.dimensions[re];fd[Pd][1].push(Dd.values[U])}}else if(cd){for(U=0;U<Td.t.x.length;U++)vd?(Pd=Td.t.x[U],Hd=Td.t.y[U]):(Pd=Td.t.y[U],Hd=Td.t.x[U]),fd[Pd][1].push(Hd);Td.t&&Td.t._scene&&delete Td.t._scene.dirty}else if(Td.hasOwnProperty("z")){Hd=Td.z;var bh=Ft(vu.type,zl,Hd);for(U=0;U<Hd.length;U++)for(re=0;re<Hd[U].length;re++)Pd=bh(re,U),Pd+1&&fd[Pd][1].push(Hd[U][re])}else for(Pd=Td.p,Pd===void 0&&(Pd=Td[Ad]),Hd=Td.s,Hd===void 0&&(Hd=Td.v),Hd===void 0&&(Hd=vd?Td.y:Td.x),Array.isArray(Hd)||(Hd===void 0?Hd=[]:Hd=[Hd]),U=0;U<Hd.length;U++)fd[Pd][1].push(Hd[U])}}}zl._categoriesValue=fd;var Dh=[];for(Sl=0;Sl<fd.length;Sl++)Dh.push([fd[Sl][0],ls[Vu](fd[Sl][1])]);Dh.sort(od==="descending"?Ll:_l),zl._categoriesAggregatedValue=Dh,zl._initialCategories=Dh.map(function(vh){return vh[0]}),X=X.concat(zl.sortByInitialCategories())}}}return X}function ql(Bn,il,X){var cl={};function Sl(Ft){Ft.clearCalc(),Ft.type==="multicategory"&&Ft.setupMultiCategory(il),cl[Ft._id]=1}c.simpleMap(Bn,Sl);for(var st=X._axisMatchGroups||[],U=0;U<st.length;U++)for(var re in st[U])cl[re]||Sl(X[R.id2name(re)])}function gu(Bn){var il=Bn._fullLayout,X=il._visibleModules,cl={},Sl,st,U;for(st=0;st<X.length;st++){var re=X[st],Ft=re.crossTraceCalc;if(Ft){var ls=re.basePlotModule.name;cl[ls]?c.pushUnique(cl[ls],Ft):cl[ls]=[Ft]}}for(U in cl){var _l=cl[U],Ll=il._subplots[U];if(Array.isArray(Ll))for(Sl=0;Sl<Ll.length;Sl++){var zl=Ll[Sl],yu=U==="cartesian"?il._plots[zl]:il[zl];for(st=0;st<_l.length;st++)_l[st](Bn,yu,zl)}else for(st=0;st<_l.length;st++)_l[st](Bn)}}L.rehover=function(Bn){Bn._fullLayout._rehover&&Bn._fullLayout._rehover()},L.redrag=function(Bn){Bn._fullLayout._redrag&&Bn._fullLayout._redrag()},L.reselect=function(Bn){var il=Bn._fullLayout,X=(Bn.layout||{}).selections,cl=il._previousSelections;il._previousSelections=X;var Sl=il._reselect||JSON.stringify(X)!==JSON.stringify(cl);y.getComponentMethod("selections","reselect")(Bn,Sl)},L.generalUpdatePerTraceModule=function(Bn,il,X,cl){var Sl=il.traceHash,st={},U;for(U=0;U<X.length;U++){var re=X[U],Ft=re[0].trace;Ft.visible&&(st[Ft.type]=st[Ft.type]||[],st[Ft.type].push(re))}for(var ls in Sl)if(!st[ls]){var _l=Sl[ls][0],Ll=_l[0].trace;Ll.visible=!1,st[ls]=[_l]}for(var zl in st){var yu=st[zl],Vu=yu[0][0].trace._module;Vu.plot(Bn,il,c.filterVisible(yu),cl)}il.traceHash=st},L.plotBasePlot=function(Bn,il,X,cl,Sl){var st=y.getModule(Bn),U=H(il.calcdata,st)[0];st.plot(il,U,cl,Sl)},L.cleanBasePlot=function(Bn,il,X,cl,Sl){var st=Sl._has&&Sl._has(Bn),U=X._has&&X._has(Bn);st&&!U&&Sl["_"+Bn+"layer"].selectAll("g.trace").remove()}}),Yg=s(ot=>{ot.xmlns="http://www.w3.org/2000/xmlns/",ot.svg="http://www.w3.org/2000/svg",ot.xlink="http://www.w3.org/1999/xlink",ot.svgAttrs={xmlns:ot.svg,"xmlns:xlink":ot.xlink}}),$f=s((ot,Me)=>{Me.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}}),Kg=s(ot=>{var Me=$(),m=rt(),l=m.strTranslate,d=Yg(),x=$f().LINE_SPACING,v=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ot.convertToTspans=function(ce,ll,ul){var fl=ce.text(),bl=!ce.attr("data-notex")&&ll&&ll._context.typesetMath&&typeof MathJax<"u"&&fl.match(v),El=Me.select(ce.node().parentNode);if(El.empty())return;var Ul=ce.attr("class")?ce.attr("class").split(" ")[0]:"text";Ul+="-math",El.selectAll("svg."+Ul).remove(),El.selectAll("g."+Ul+"-group").remove(),ce.style("display",null).attr({"data-unformatted":fl,"data-math":"N"});function ql(){El.empty()||(Ul=ce.attr("class")+"-math",El.select("svg."+Ul).remove()),ce.text("").style("white-space","pre");var gu=_t(ce.node(),fl);gu&&ce.style("pointer-events","all"),ot.positionText(ce),ul&&ul.call(ce)}return bl?(ll&&ll._promises||[]).push(new Promise(function(gu){ce.style("display","none");var Bn=parseInt(ce.node().style.fontSize,10),il={fontSize:Bn};F(bl[2],il,function(X,cl,Sl){El.selectAll("svg."+Ul).remove(),El.selectAll("g."+Ul+"-group").remove();var st=X&&X.select("svg");if(!st||!st.node()){ql(),gu();return}var U=El.append("g").classed(Ul+"-group",!0).attr({"pointer-events":"none","data-unformatted":fl,"data-math":"Y"});U.node().appendChild(st.node()),cl&&cl.node()&&st.node().insertBefore(cl.node().cloneNode(!0),st.node().firstChild);var re=Sl.width,Ft=Sl.height;st.attr({class:Ul,height:Ft,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ls=ce.node().style.fill||"black",_l=st.select("g");_l.attr({fill:ls,stroke:ls});var Ll=_l.node().getBoundingClientRect(),zl=Ll.width,yu=Ll.height;(zl>re||yu>Ft)&&(st.style("overflow","hidden"),Ll=st.node().getBoundingClientRect(),zl=Ll.width,yu=Ll.height);var Vu=+ce.attr("x"),od=+ce.attr("y"),Ad=Bn||ce.node().getBoundingClientRect().height,vd=-Ad/4;if(Ul[0]==="y")U.attr({transform:"rotate("+[-90,Vu,od]+")"+l(-zl/2,vd-yu/2)});else if(Ul[0]==="l")od=vd-yu/2;else if(Ul[0]==="a"&&Ul.indexOf("atitle")!==0)Vu=0,od=vd;else{var fd=ce.attr("text-anchor");Vu=Vu-zl*(fd==="middle"?.5:fd==="end"?1:0),od=od+vd-yu/2}st.attr({x:Vu,y:od}),ul&&ul.call(ce,U),gu(U)})})):ql(),ce};var y=/(<|&lt;|&#60;)/g,w=/(>|&gt;|&#62;)/g;function S(ce){return ce.replace(y,"\\lt ").replace(w,"\\gt ")}var c=[["$","$"],["\\(","\\)"]];function F(ce,ll,ul){var fl=parseInt((MathJax.version||"").split(".")[0]);if(fl!==2&&fl!==3){m.warn("No MathJax version:",MathJax.version);return}var bl,El,Ul,ql,gu=function(){return El=m.extendDeepAll({},MathJax.Hub.config),Ul=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:c},displayAlign:"left"})},Bn=function(){El=m.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=c},il=function(){if(bl=MathJax.Hub.config.menuSettings.renderer,bl!=="SVG")return MathJax.Hub.setRenderer("SVG")},X=function(){bl=MathJax.config.startup.output,bl!=="svg"&&(MathJax.config.startup.output="svg")},cl=function(){var ls="math-output-"+m.randstr({},64);ql=Me.select("body").append("div").attr({id:ls}).style({visibility:"hidden",position:"absolute","font-size":ll.fontSize+"px"}).text(S(ce));var _l=ql.node();return fl===2?MathJax.Hub.Typeset(_l):MathJax.typeset([_l])},Sl=function(){var ls=ql.select(fl===2?".MathJax_SVG":".MathJax"),_l=!ls.empty()&&ql.select("svg").node();if(!_l)m.log("There was an error in the tex syntax.",ce),ul();else{var Ll=_l.getBoundingClientRect(),zl;fl===2?zl=Me.select("body").select("#MathJax_SVG_glyphs"):zl=ls.select("defs"),ul(ls,zl,Ll)}ql.remove()},st=function(){if(bl!=="SVG")return MathJax.Hub.setRenderer(bl)},U=function(){bl!=="svg"&&(MathJax.config.startup.output=bl)},re=function(){return Ul!==void 0&&(MathJax.Hub.processSectionDelay=Ul),MathJax.Hub.Config(El)},Ft=function(){MathJax.config=El};fl===2?MathJax.Hub.Queue(gu,il,cl,Sl,st,re):fl===3&&(Bn(),X(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){cl(),Sl(),U(),Ft()}))}var b={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},R={sub:"0.3em",sup:"-0.6em"},B={sub:"-0.21em",sup:"0.42em"},O="",P=["http:","https:","mailto:","",void 0,":"],D=ot.NEWLINES=/(\r\n?|\n)/g,H=/(<[^<>]*>)/,C=/<(\/?)([^ >]*)(\s+(.*))?>/i,A=/<br(\s+.*)?>/i;ot.BR_TAG_ALL=/<br(\s+.*)?>/gi;var L=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,j=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,Z=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,nl=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function Pe(ce,ll){if(!ce)return null;var ul=ce.match(ll),fl=ul&&(ul[3]||ul[4]);return fl&&nt(fl)}var se=/(^|;)\s*color:/;ot.plainText=function(ce,ll){ll=ll||{};for(var ul=ll.len!==void 0&&ll.len!==-1?ll.len:1/0,fl=ll.allowedTags!==void 0?ll.allowedTags:["br"],bl="...",El=bl.length,Ul=ce.split(H),ql=[],gu="",Bn=0,il=0;il<Ul.length;il++){var X=Ul[il],cl=X.match(C),Sl=cl&&cl[2].toLowerCase();if(Sl)fl.indexOf(Sl)!==-1&&(ql.push(X),gu=Sl);else{var st=X.length;if(Bn+st<ul)ql.push(X),Bn+=st;else if(Bn<ul){var U=ul-Bn;gu&&(gu!=="br"||U<=El||st<=El)&&ql.pop(),ul>El?ql.push(X.substr(0,U-El)+bl):ql.push(X.substr(0,U));break}gu=""}}return ql.join("")};var q={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},ol=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function nt(ce){return ce.replace(ol,function(ll,ul){var fl;return ul.charAt(0)==="#"?fl=In(ul.charAt(1)==="x"?parseInt(ul.substr(2),16):parseInt(ul.substr(1),10)):fl=q[ul],fl||ll})}ot.convertEntities=nt;function In(ce){if(!(ce>1114111)){var ll=String.fromCodePoint;if(ll)return ll(ce);var ul=String.fromCharCode;return ce<=65535?ul(ce):ul((ce>>10)+55232,ce%1024+56320)}}function _t(ce,ll){ll=ll.replace(D," ");var ul=!1,fl=[],bl,El=-1;function Ul(){El++;var yu=document.createElementNS(d.svg,"tspan");Me.select(yu).attr({class:"line",dy:El*x+"em"}),ce.appendChild(yu),bl=yu;var Vu=fl;if(fl=[{node:yu}],Vu.length>1)for(var od=1;od<Vu.length;od++)ql(Vu[od])}function ql(yu){var Vu=yu.type,od={},Ad;if(Vu==="a"){Ad="a";var vd=yu.target,fd=yu.href,Kl=yu.popup;fd&&(od={"xlink:xlink:show":vd==="_blank"||vd.charAt(0)!=="_"?"new":"replace",target:vd,"xlink:xlink:href":fd},Kl&&(od.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Kl+'");return false;'))}else Ad="tspan";yu.style&&(od.style=yu.style);var vu=document.createElementNS(d.svg,Ad);if(Vu==="sup"||Vu==="sub"){gu(bl,O),bl.appendChild(vu);var Rl=document.createElementNS(d.svg,"tspan");gu(Rl,O),Me.select(Rl).attr("dy",B[Vu]),od.dy=R[Vu],bl.appendChild(vu),bl.appendChild(Rl)}else bl.appendChild(vu);Me.select(vu).attr(od),bl=yu.node=vu,fl.push(yu)}function gu(yu,Vu){yu.appendChild(document.createTextNode(Vu))}function Bn(yu){if(fl.length===1){m.log("Ignoring unexpected end tag </"+yu+">.",ll);return}var Vu=fl.pop();yu!==Vu.type&&m.log("Start tag <"+Vu.type+"> doesnt match end tag <"+yu+">. Pretending it did match.",ll),bl=fl[fl.length-1].node}var il=A.test(ll);il?Ul():(bl=ce,fl=[{node:ce}]);for(var X=ll.split(H),cl=0;cl<X.length;cl++){var Sl=X[cl],st=Sl.match(C),U=st&&st[2].toLowerCase(),re=b[U];if(U==="br")Ul();else if(re===void 0)gu(bl,nt(Sl));else if(st[1])Bn(U);else{var Ft=st[4],ls={type:U},_l=Pe(Ft,L);if(_l?(_l=_l.replace(se,"$1 fill:"),re&&(_l+=";"+re)):re&&(_l=re),_l&&(ls.style=_l),U==="a"){ul=!0;var Ll=Pe(Ft,j);if(Ll){var zl=Fn(Ll);zl&&(ls.href=zl,ls.target=Pe(Ft,Z)||"_blank",ls.popup=Pe(Ft,nl))}}ql(ls)}}return ul}function Fn(ce){var ll=encodeURI(decodeURI(ce)),ul=document.createElement("a"),fl=document.createElement("a");ul.href=ce,fl.href=ll;var bl=ul.protocol,El=fl.protocol;return P.indexOf(bl)!==-1&&P.indexOf(El)!==-1?ll:""}ot.sanitizeHTML=function(ce){ce=ce.replace(D," ");for(var ll=document.createElement("p"),ul=ll,fl=[],bl=ce.split(H),El=0;El<bl.length;El++){var Ul=bl[El],ql=Ul.match(C),gu=ql&&ql[2].toLowerCase();if(gu in b)if(ql[1])fl.length&&(ul=fl.pop());else{var Bn=ql[4],il=Pe(Bn,L),X=il?{style:il}:{};if(gu==="a"){var cl=Pe(Bn,j);if(cl){var Sl=Fn(cl);if(Sl){X.href=Sl;var st=Pe(Bn,Z);st&&(X.target=st)}}}var U=document.createElement(gu);ul.appendChild(U),Me.select(U).attr(X),ul=U,fl.push(U)}else ul.appendChild(document.createTextNode(nt(Ul)))}var re="innerHTML";return ll[re]},ot.lineCount=function(ce){return ce.selectAll("tspan.line").size()||1},ot.positionText=function(ce,ll,ul){return ce.each(function(){var fl=Me.select(this);function bl(ql,gu){return gu===void 0?(gu=fl.attr(ql),gu===null&&(fl.attr(ql,0),gu=0)):fl.attr(ql,gu),gu}var El=bl("x",ll),Ul=bl("y",ul);this.nodeName==="text"&&fl.selectAll("tspan.line").attr({x:El,y:Ul})})};function al(ce,ll,ul){var fl=ul.horizontalAlign,bl=ul.verticalAlign||"top",El=ce.node().getBoundingClientRect(),Ul=ll.node().getBoundingClientRect(),ql,gu,Bn;return bl==="bottom"?gu=function(){return El.bottom-ql.height}:bl==="middle"?gu=function(){return El.top+(El.height-ql.height)/2}:gu=function(){return El.top},fl==="right"?Bn=function(){return El.right-ql.width}:fl==="center"?Bn=function(){return El.left+(El.width-ql.width)/2}:Bn=function(){return El.left},function(){ql=this.node().getBoundingClientRect();var il=Bn()-Ul.left,X=gu()-Ul.top,cl=ul.gd||{};if(ul.gd){cl._fullLayout._calcInverseTransform(cl);var Sl=m.apply3DTransform(cl._fullLayout._invTransform)(il,X);il=Sl[0],X=Sl[1]}return this.style({top:X+"px",left:il+"px","z-index":1e3}),this}}var sl="1px ";ot.makeTextShadow=function(ce){var ll=sl,ul=sl,fl=sl;return ll+ul+fl+ce+", -"+ll+"-"+ul+fl+ce+", "+ll+"-"+ul+fl+ce+", -"+ll+ul+fl+ce},ot.makeEditable=function(ce,ll){var ul=ll.gd,fl=ll.delegate,bl=Me.dispatch("edit","input","cancel"),El=fl||ce;if(ce.style({"pointer-events":fl?"none":"all"}),ce.size()!==1)throw new Error("boo");function Ul(){gu(),ce.style({opacity:0});var Bn=El.attr("class"),il;Bn?il="."+Bn.split(" ")[0]+"-math-group":il="[class*=-math-group]",il&&Me.select(ce.node().parentNode).select(il).style({opacity:0})}function ql(Bn){var il=Bn.node(),X=document.createRange();X.selectNodeContents(il);var cl=window.getSelection();cl.removeAllRanges(),cl.addRange(X),il.focus()}function gu(){var Bn=Me.select(ul),il=Bn.select(".svg-container"),X=il.append("div"),cl=ce.node().style,Sl=parseFloat(cl.fontSize||12),st=ll.text;st===void 0&&(st=ce.attr("data-unformatted")),X.classed("plugin-editable editable",!0).style({position:"absolute","font-family":cl.fontFamily||"Arial","font-size":Sl,color:ll.fill||cl.fill||"black",opacity:1,"background-color":ll.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Sl/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(st).call(al(ce,il,ll)).on("blur",function(){ul._editing=!1,ce.text(this.textContent).style({opacity:1});var U=Me.select(this).attr("class"),re;U?re="."+U.split(" ")[0]+"-math-group":re="[class*=-math-group]",re&&Me.select(ce.node().parentNode).select(re).style({opacity:0});var Ft=this.textContent;Me.select(this).transition().duration(0).remove(),Me.select(document).on("mouseup",null),bl.edit.call(ce,Ft)}).on("focus",function(){var U=this;ul._editing=!0,Me.select(document).on("mouseup",function(){if(Me.event.target===U)return!1;document.activeElement===X.node()&&X.node().blur()})}).on("keyup",function(){Me.event.which===27?(ul._editing=!1,ce.style({opacity:1}),Me.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),bl.cancel.call(ce,this.textContent)):(bl.input.call(ce,this.textContent),Me.select(this).call(al(ce,il,ll)))}).on("keydown",function(){Me.event.which===13&&this.blur()}).call(ql)}return ll.immediate?Ul():El.on("click",Ul),Me.rebind(ce,bl,"on")}}),If=s((ot,Me)=>{var m=$(),l=$l(),d=zn(),x=rt(),v=oh(),y=rh().isValid;function w(D,H,C){var A=H?x.nestedProperty(D,H).get()||{}:D,L=A[C||"color"];L&&L._inputArray&&(L=L._inputArray);var j=!1;if(x.isArrayOrTypedArray(L)){for(var Z=0;Z<L.length;Z++)if(d(L[Z])){j=!0;break}}return x.isPlainObject(A)&&(j||A.showscale===!0||d(A.cmin)&&d(A.cmax)||y(A.colorscale)||x.isPlainObject(A.colorbar))}var S=["showscale","autocolorscale","colorscale","reversescale","colorbar"],c=["min","max","mid","auto"];function F(D){var H=D._colorAx,C=H||D,A={},L,j,Z;for(j=0;j<S.length;j++)Z=S[j],A[Z]=C[Z];if(H)for(L="c",j=0;j<c.length;j++)Z=c[j],A[Z]=C["c"+Z];else{var nl;for(j=0;j<c.length;j++){if(Z=c[j],nl="c"+Z,nl in C){A[Z]=C[nl];continue}nl="z"+Z,nl in C&&(A[Z]=C[nl])}L=nl.charAt(0)}return A._sync=function(Pe,se){var q=c.indexOf(Pe)!==-1?L+Pe:Pe;C[q]=C["_"+q]=se},A}function b(D){for(var H=F(D),C=H.min,A=H.max,L=H.reversescale?R(H.colorscale):H.colorscale,j=L.length,Z=new Array(j),nl=new Array(j),Pe=0;Pe<j;Pe++){var se=L[Pe];Z[Pe]=C+se[0]*(A-C),nl[Pe]=se[1]}return{domain:Z,range:nl}}function R(D){for(var H=D.length,C=new Array(H),A=H-1,L=0;A>=0;A--,L++){var j=D[A];C[L]=[1-j[0],j[1]]}return C}function B(D,H){H=H||{};for(var C=D.domain,A=D.range,L=A.length,j=new Array(L),Z=0;Z<L;Z++){var nl=l(A[Z]).toRgb();j[Z]=[nl.r,nl.g,nl.b,nl.a]}var Pe=m.scale.linear().domain(C).range(j).clamp(!0),se=H.noNumericCheck,q=H.returnArray,ol;return se&&q?ol=Pe:se?ol=function(nt){return P(Pe(nt))}:q?ol=function(nt){return d(nt)?Pe(nt):l(nt).isValid()?nt:v.defaultLine}:ol=function(nt){return d(nt)?P(Pe(nt)):l(nt).isValid()?nt:v.defaultLine},ol.domain=Pe.domain,ol.range=function(){return A},ol}function O(D,H){return B(b(D),H)}function P(D){var H={r:D[0],g:D[1],b:D[2],a:D[3]};return l(H).toRgbString()}Me.exports={hasColorscale:w,extractOpts:F,extractScale:b,flipScale:R,makeColorScaleFunc:B,makeColorScaleFuncFromTrace:O}}),Mm=s((ot,Me)=>{var m=Hm(),l=m.FORMAT_LINK,d=m.DATE_FORMAT_LINK;function x(w,S){return{valType:"string",dflt:"",editType:"none",description:(S?v:y)("hover text",w)+["By default the values are formatted using "+(S?"generic number format":"`"+w+"axis.hoverformat`")+"."].join(" ")}}function v(w,S){return["Sets the "+w+" formatting rule"+(S?"for `"+S+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+l+"."].join(" ")}function y(w,S){return v(w,S)+[" And for dates see: "+d+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}Me.exports={axisHoverFormat:x,descriptionOnlyNumbers:v,descriptionWithDates:y}}),dd=s((ot,Me)=>{var m=Pu(),l=qd(),d=Gf().dash,x=Bl().extendFlat,v=Bp().templatedArray;Vg().templateFormatStringDescription;var y=Mm().descriptionWithDates,w=Et().ONEDAY,S=rf(),c=S.HOUR_PATTERN,F=S.WEEKDAY_PATTERN,b={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},R=x({},b,{values:b.values.slice().concat(["sync"])});function B(se){return{valType:"integer",min:0,dflt:se?5:0,editType:"ticks"}}var O={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},P={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},D={valType:"data_array",editType:"ticks"},H={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function C(se){var q={valType:"number",min:0,editType:"ticks"};return se||(q.dflt=5),q}function A(se){var q={valType:"number",min:0,editType:"ticks"};return se||(q.dflt=1),q}var L={valType:"color",dflt:l.defaultLine,editType:"ticks"},j={valType:"color",dflt:l.lightLine,editType:"ticks"};function Z(se){var q={valType:"number",min:0,editType:"ticks"};return se||(q.dflt=1),q}var nl=x({},d,{editType:"ticks"}),Pe={valType:"boolean",editType:"ticks"};Me.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:l.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:m({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},modebardisable:{valType:"flaglist",flags:["autoscale","zoominout"],extras:["none"],dflt:"none",editType:"modebar"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[S.idRegex.x.toString(),S.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[S.idRegex.x.toString(),S.idRegex.y.toString()],editType:"calc"},rangebreaks:v("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[F,c,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:w},editType:"calc"}),tickmode:R,nticks:B(),tick0:O,dtick:P,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:D,ticktext:{valType:"data_array",editType:"ticks"},ticks:H,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:C(),tickwidth:A(),tickcolor:L,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:x({},d,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:m({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B","SI extended"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:y("tick label")},tickformatstops:v("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:y("hover text")},unifiedhovertitle:{text:{valType:"string",dflt:"",editType:"none"},editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:l.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:Pe,gridcolor:j,gridwidth:Z(),griddash:nl,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:l.defaultLine,editType:"ticks"},zerolinelayer:{valType:"enumerated",values:["above traces","below traces"],dflt:"below traces",editType:"plot"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:l.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",S.idRegex.x.toString(),S.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",S.idRegex.x.toString(),S.idRegex.y.toString()],editType:"plot"},minor:{tickmode:b,nticks:B("minor"),tick0:O,dtick:P,tickvals:D,ticks:H,ticklen:C("minor"),tickwidth:A("minor"),tickcolor:L,gridcolor:j,gridwidth:Z("minor"),griddash:nl,showgrid:Pe,editType:"ticks"},minorloglabels:{valType:"enumerated",values:["small digits","complete","none"],dflt:"small digits",editType:"calc"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc"}}),f=s((ot,Me)=>{var m=dd(),l=Pu(),d=Bl().extendFlat,x=uf().overrideAll;Me.exports=x({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:m.linecolor,outlinewidth:m.linewidth,bordercolor:m.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:m.minor.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:d({},m.ticks,{dflt:""}),ticklabeloverflow:d({},m.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,labelalias:m.labelalias,tickfont:l({}),tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,separatethousands:m.separatethousands,exponentformat:m.exponentformat,minexponent:m.minexponent,showexponent:m.showexponent,title:{text:{valType:"string"},font:l({}),side:{valType:"enumerated",values:["right","top","bottom"]}}},"colorbars","from-root")}),E=s((ot,Me)=>{var m=f(),l=Nl().counter,d=Gm(),x=rh().scales;d(x);function v(y){return"`"+y+"`"}Me.exports=function(y,w){y=y||"",w=w||{};var S=w.cLetter||"c";"onlyIfNumerical"in w&&w.onlyIfNumerical;var c="noScale"in w?w.noScale:y==="marker.line",F="showScaleDflt"in w?w.showScaleDflt:S==="z",b=typeof w.colorscaleDflt=="string"?x[w.colorscaleDflt]:null,R=w.editTypeOverride||"",B=y?y+".":"",O;"colorAttr"in w?(O=w.colorAttr,w.colorAttr):(O={z:"z",c:"color"}[S],""+v(B+O));var P=S+"auto",D=S+"min",H=S+"max",C=S+"mid",A={};A[D]=A[H]=void 0;var L={};L[P]=!1;var j={};return O==="color"&&(j.color={valType:"color",arrayOk:!0,editType:R||"style"},w.anim&&(j.color.anim=!0)),j[P]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:A},j[D]={valType:"number",dflt:null,editType:R||"plot",impliedEdits:L},j[H]={valType:"number",dflt:null,editType:R||"plot",impliedEdits:L},j[C]={valType:"number",dflt:null,editType:"calc",impliedEdits:A},j.colorscale={valType:"colorscale",editType:"calc",dflt:b,impliedEdits:{autocolorscale:!1}},j.autocolorscale={valType:"boolean",dflt:w.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},j.reversescale={valType:"boolean",dflt:!1,editType:"plot"},c||(j.showscale={valType:"boolean",dflt:F,editType:"calc"},j.colorbar=m),w.noColorAxis||(j.coloraxis={valType:"subplotid",regex:l("coloraxis"),dflt:null,editType:"calc"}),j}}),W=s((ot,Me)=>{var m=Bl().extendFlat,l=E(),d=rh().scales;Me.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:d.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:d.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:d.RdBu,editType:"calc"}},coloraxis:m({_isSubplotObj:!0,editType:"calc"},l("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}}),Q=s((ot,Me)=>{var m=rt();Me.exports=function(l){return m.isPlainObject(l.colorbar)}}),yl=s(ot=>{var Me=zn(),m=rt(),l=Et(),d=l.ONEDAY,x=l.ONEWEEK;ot.dtick=function(v,y){var w=y==="log",S=y==="date",c=y==="category",F=S?d:1;if(!v)return F;if(Me(v))return v=Number(v),v<=0?F:c?Math.max(1,Math.round(v)):S?Math.max(.1,v):v;if(typeof v!="string"||!(S||w))return F;var b=v.charAt(0),R=v.substr(1);return R=Me(R)?Number(R):0,R<=0||!(S&&b==="M"&&R===Math.round(R)||w&&b==="L"||w&&b==="D"&&(R===1||R===2))?F:v},ot.tick0=function(v,y,w,S){if(y==="date")return m.cleanDate(v,m.dateTick0(w,S%x===0?1:0));if(!(S==="D1"||S==="D2"))return Me(v)?Number(v):0}}),Ln=s((ot,Me)=>{var m=yl(),l=rt().isArrayOrTypedArray,d=Ml().isTypedArraySpec,x=Ml().decodeTypedArraySpec;Me.exports=function(v,y,w,S,c){c||(c={});var F=c.isMinor,b=F?v.minor||{}:v,R=F?y.minor:y,B=F?"minor.":"";function O(Z){var nl=b[Z];return d(nl)&&(nl=x(nl)),nl!==void 0?nl:(R._template||{})[Z]}var P=O("tick0"),D=O("dtick"),H=O("tickvals"),C=l(H)?"array":D?"linear":"auto",A=w(B+"tickmode",C);if(A==="auto"||A==="sync")w(B+"nticks");else if(A==="linear"){var L=R.dtick=m.dtick(D,S);R.tick0=m.tick0(P,S,y.calendar,L)}else if(S!=="multicategory"){var j=w(B+"tickvals");j===void 0?R.tickmode="auto":F||w("ticktext")}}}),Cl=s((ot,Me)=>{var m=rt(),l=dd();Me.exports=function(d,x,v,y){var w=y.isMinor,S=w?d.minor||{}:d,c=w?x.minor:x,F=w?l.minor:l,b=w?"minor.":"",R=m.coerce2(S,c,F,"ticklen",w?(x.ticklen||5)*.6:void 0),B=m.coerce2(S,c,F,"tickwidth",w?x.tickwidth||1:void 0),O=m.coerce2(S,c,F,"tickcolor",(w?x.tickcolor:void 0)||c.color),P=v(b+"ticks",!w&&y.outerTicks||R||B||O?"outside":"");P||(delete c.ticklen,delete c.tickwidth,delete c.tickcolor)}}),Al=s((ot,Me)=>{Me.exports=function(m){var l=["showexponent","showtickprefix","showticksuffix"],d=l.filter(function(v){return m[v]!==void 0}),x=function(v){return m[v]===m[d[0]]};if(d.every(x)||d.length===1)return m[d[0]]}}),vl=s((ot,Me)=>{var m=rt(),l=Bp();Me.exports=function(d,x,v){var y=v.name,w=v.inclusionAttr||"visible",S=x[y],c=m.isArrayOrTypedArray(d[y])?d[y]:[],F=x[y]=[],b=l.arrayTemplater(x,y,w),R,B;for(R=0;R<c.length;R++){var O=c[R];m.isPlainObject(O)?B=b.newItem(O):(B=b.newItem({}),B[w]=!1),B._index=R,B[w]!==!1&&v.handleItemDefaults(O,B,x,v),F.push(B)}var P=b.defaultItems();for(R=0;R<P.length;R++)B=P[R],B._index=F.length,v.handleItemDefaults({},B,x,v,{}),F.push(B);if(m.isArrayOrTypedArray(S)){var D=Math.min(S.length,F.length);for(R=0;R<D;R++)m.relinkPrivateKeys(F[R],S[R])}return F}}),Fl=s((ot,Me)=>{var m=rt(),l=oh().contrast,d=dd(),x=Al(),v=vl();Me.exports=function(w,S,c,F,b){b||(b={});var R=c("labelalias");m.isPlainObject(R)||delete S.labelalias;var B=x(w),O=c("showticklabels");if(O){b.noTicklabelshift||c("ticklabelshift"),b.noTicklabelstandoff||c("ticklabelstandoff");var P=b.font||{},D=S.color,H=S.ticklabelposition||"",C=H.indexOf("inside")!==-1?l(b.bgColor):D&&D!==d.color.dflt?D:P.color;if(m.coerceFont(c,"tickfont",P,{overrideDflt:{color:C}}),!b.noTicklabelstep&&F!=="multicategory"&&F!=="log"&&c("ticklabelstep"),!b.noAng){var A=c("tickangle");!b.noAutotickangles&&A==="auto"&&c("autotickangles")}if(F!=="category"){var L=c("tickformat");v(w,S,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:y}),S.tickformatstops.length||delete S.tickformatstops,!b.noExp&&!L&&F!=="date"&&(c("showexponent",B),c("exponentformat"),c("minexponent"),c("separatethousands"))}!b.noMinorloglabels&&F==="log"&&c("minorloglabels")}};function y(w,S){function c(b,R){return m.coerce(w,S,d.tickformatstops,b,R)}var F=c("enabled");F&&(c("dtickrange"),c("value"))}}),Ol=s((ot,Me)=>{var m=Al();Me.exports=function(l,d,x,v,y){y||(y={});var w=y.tickSuffixDflt,S=m(l),c=x("tickprefix");c&&x("showtickprefix",S);var F=x("ticksuffix",w);F&&x("showticksuffix",S)}}),mu=s((ot,Me)=>{var m=rt(),l=Bp(),d=Ln(),x=Cl(),v=Fl(),y=Ol(),w=f();Me.exports=function(S,c,F){var b=l.newContainer(c,"colorbar"),R=S.colorbar||{};function B(ce,ll){return m.coerce(R,b,w,ce,ll)}var O=F.margin||{t:0,b:0,l:0,r:0},P=F.width-O.l-O.r,D=F.height-O.t-O.b,H=B("orientation"),C=H==="v",A=B("thicknessmode");B("thickness",A==="fraction"?30/(C?P:D):30);var L=B("lenmode");B("len",L==="fraction"?1:C?D:P);var j=B("yref"),Z=B("xref"),nl=j==="paper",Pe=Z==="paper",se,q,ol,nt="left";C?(ol="middle",nt=Pe?"left":"right",se=Pe?1.02:1,q=.5):(ol=nl?"bottom":"top",nt="center",se=.5,q=nl?1.02:1),m.coerce(R,b,{x:{valType:"number",min:Pe?-2:0,max:Pe?3:1,dflt:se}},"x"),m.coerce(R,b,{y:{valType:"number",min:nl?-2:0,max:nl?3:1,dflt:q}},"y"),B("xanchor",nt),B("xpad"),B("yanchor",ol),B("ypad"),m.noneOrAll(R,b,["x","y"]),B("outlinecolor"),B("outlinewidth"),B("bordercolor"),B("borderwidth"),B("bgcolor");var In=m.coerce(R,b,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:C?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");B("ticklabeloverflow",In.indexOf("inside")!==-1?"hide past domain":"hide past div"),d(R,b,B,"linear");var _t=F.font,Fn={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:_t};In.indexOf("inside")!==-1&&(Fn.bgColor="black"),y(R,b,B,"linear",Fn),v(R,b,B,"linear",Fn),x(R,b,B,"linear",Fn),B("title.text",F._dfltTitle.colorbar);var al=b.showticklabels?b.tickfont:_t,sl=m.extendFlat({},_t,{family:al.family,size:m.bigFont(al.size)});m.coerceFont(B,"title.font",sl),B("title.side",C?"top":"right")}}),Xl=s((ot,Me)=>{var m=zn(),l=rt(),d=Q(),x=mu(),v=rh().isValid,y=ff().traceIs;function w(S,c){var F=c.slice(0,c.length-1);return c?l.nestedProperty(S,F).get()||{}:S}Me.exports=function S(c,F,b,R,B){var O=B.prefix,P=B.cLetter,D="_module"in F,H=w(c,O),C=w(F,O),A=w(F._template||{},O)||{},L=function(){return delete c.coloraxis,delete F.coloraxis,S(c,F,b,R,B)};if(D){var j=b._colorAxes||{},Z=R(O+"coloraxis");if(Z){var nl=y(F,"contour")&&l.nestedProperty(F,"contours.coloring").get()||"heatmap",Pe=j[Z];Pe?(Pe[2].push(L),Pe[0]!==nl&&(Pe[0]=!1,l.warn(["Ignoring coloraxis:",Z,"setting","as it is linked to incompatible colorscales."].join(" ")))):j[Z]=[nl,F,[L]];return}}var se=H[P+"min"],q=H[P+"max"],ol=m(se)&&m(q)&&se<q,nt=R(O+P+"auto",!ol);nt?R(O+P+"mid"):(R(O+P+"min"),R(O+P+"max"));var In=H.colorscale,_t=A.colorscale,Fn;if(In!==void 0&&(Fn=!v(In)),_t!==void 0&&(Fn=!v(_t)),R(O+"autocolorscale",Fn),R(O+"colorscale"),R(O+"reversescale"),O!=="marker.line."){var al;O&&D&&(al=d(H));var sl=R(O+"showscale",al);sl&&(O&&A&&(C._template=A),x(H,C,b))}}}),Wl=s((ot,Me)=>{var m=rt(),l=Bp(),d=W(),x=Xl();Me.exports=function(v,y){function w(P,D){return m.coerce(v,y,d,P,D)}w("colorscale.sequential"),w("colorscale.sequentialminus"),w("colorscale.diverging");var S=y._colorAxes,c,F;function b(P,D){return m.coerce(c,F,d.coloraxis,P,D)}for(var R in S){var B=S[R];if(B[0])c=v[R]||{},F=l.newContainer(y,R,"coloraxis"),F._name=R,x(c,F,y,b,{prefix:"",cLetter:"c"});else{for(var O=0;O<B[2].length;O++)B[2][O]();delete y._colorAxes[R]}}}}),hu=s((ot,Me)=>{var m=rt(),l=If().hasColorscale,d=If().extractOpts;Me.exports=function(x,v){function y(B,O){var P=B["_"+O];P!==void 0&&(B[O]=P)}function w(B,O){var P=O.container?m.nestedProperty(B,O.container).get():B;if(P)if(P.coloraxis)P._colorAx=v[P.coloraxis];else{var D=d(P),H=D.auto;(H||D.min===void 0)&&y(P,O.min),(H||D.max===void 0)&&y(P,O.max),D.autocolorscale&&y(P,"colorscale")}}for(var S=0;S<x.length;S++){var c=x[S],F=c._module.colorbar;if(F)if(Array.isArray(F))for(var b=0;b<F.length;b++)w(c,F[b]);else w(c,F);l(c,"marker.line")&&w(c,{container:"marker.line",min:"cmin",max:"cmax"})}for(var R in v._colorAxes)w(v[R],{min:"cmin",max:"cmax"})}}),Jl=s((ot,Me)=>{var m=zn(),l=rt(),d=If().extractOpts;Me.exports=function(x,v,y){var w=x._fullLayout,S=y.vals,c=y.containerStr,F=c?l.nestedProperty(v,c).get():v,b=d(F),R=b.auto!==!1,B=b.min,O=b.max,P=b.mid,D=function(){return l.aggNums(Math.min,null,S)},H=function(){return l.aggNums(Math.max,null,S)};if(B===void 0?B=D():R&&(F._colorAx&&m(B)?B=Math.min(B,D()):B=D()),O===void 0?O=H():R&&(F._colorAx&&m(O)?O=Math.max(O,H()):O=H()),R&&P!==void 0&&(O-P>P-B?B=P-(O-P):O-P<P-B&&(O=P+(P-B))),B===O&&(B-=.5,O+=.5),b._sync("min",B),b._sync("max",O),b.autocolorscale){var C;B*O<0?C=w.colorscale.diverging:B>=0?C=w.colorscale.sequential:C=w.colorscale.sequentialminus,b._sync("colorscale",C)}}}),Gu=s((ot,Me)=>{var m=rh(),l=If();Me.exports={moduleType:"component",name:"colorscale",attributes:E(),layoutAttributes:W(),supplyLayoutDefaults:Wl(),handleDefaults:Xl(),crossTraceDefaults:hu(),calc:Jl(),scales:m.scales,defaultScale:m.defaultScale,getScale:m.get,isValidScale:m.isValid,hasColorscale:l.hasColorscale,extractOpts:l.extractOpts,extractScale:l.extractScale,flipScale:l.flipScale,makeColorScaleFunc:l.makeColorScaleFunc,makeColorScaleFuncFromTrace:l.makeColorScaleFuncFromTrace}}),Zu=s((ot,Me)=>{var m=rt(),l=Ml().isTypedArraySpec;Me.exports={hasLines:function(d){return d.visible&&d.mode&&d.mode.indexOf("lines")!==-1},hasMarkers:function(d){return d.visible&&(d.mode&&d.mode.indexOf("markers")!==-1||d.type==="splom")},hasText:function(d){return d.visible&&d.mode&&d.mode.indexOf("text")!==-1},isBubble:function(d){var x=d.marker;return m.isPlainObject(x)&&(m.isArrayOrTypedArray(x.size)||l(x.size))}}}),rd=s((ot,Me)=>{var m=zn();Me.exports=function(l,d){d||(d=2);var x=l.marker,v=x.sizeref||1,y=x.sizemin||0,w=x.sizemode==="area"?function(S){return Math.sqrt(S/v)}:function(S){return S/v};return function(S){var c=w(S/d);return m(c)&&c>0?Math.max(c,y):0}}}),wd=s(ot=>{var Me=rt();ot.getSubplot=function(y){return y.subplot||y.xaxis+y.yaxis||y.geo},ot.isTraceInSubplots=function(y,w){if(y.type==="splom"){for(var S=y.xaxes||[],c=y.yaxes||[],F=0;F<S.length;F++)for(var b=0;b<c.length;b++)if(w.indexOf(S[F]+c[b])!==-1)return!0;return!1}return w.indexOf(ot.getSubplot(y))!==-1},ot.flat=function(y,w){for(var S=new Array(y.length),c=0;c<y.length;c++)S[c]=w;return S},ot.p2c=function(y,w){for(var S=new Array(y.length),c=0;c<y.length;c++)S[c]=y[c].p2c(w);return S},ot.getDistanceFunction=function(y,w,S,c){return y==="closest"?c||ot.quadrature(w,S):y.charAt(0)==="x"?w:S},ot.getClosest=function(y,w,S){if(S.index!==!1)S.index>=0&&S.index<y.length?S.distance=0:S.index=!1;else for(var c=1/0,F=y.length,b=0;b<F;b++)c=w(y[b]),c<=S.distance&&(S.index=b,S.distance=c);return S},ot.inbox=function(y,w,S){return y*w<0||y===0?S:1/0},ot.quadrature=function(y,w){return function(S){var c=y(S),F=w(S);return Math.sqrt(c*c+F*F)}},ot.makeEventData=function(y,w,S){var c="index"in y?y.index:y.pointNumber,F={data:w._input,fullData:w,curveNumber:w.index,pointNumber:c};if(w._indexToPoints){var b=w._indexToPoints[c];b.length===1?F.pointIndex=b[0]:F.pointIndices=b}else F.pointIndex=c;return w._module.eventData?F=w._module.eventData(F,y,w,S,c):("xVal"in y?F.x=y.xVal:"x"in y&&(F.x=y.x),"yVal"in y?F.y=y.yVal:"y"in y&&(F.y=y.y),y.xa&&(F.xaxis=y.xa),y.ya&&(F.yaxis=y.ya),y.zLabelVal!==void 0&&(F.z=y.zLabelVal)),ot.appendArrayPointValue(F,w,c),F},ot.appendArrayPointValue=function(y,w,S){var c=w._arrayAttrs;if(c)for(var F=0;F<c.length;F++){var b=c[F],R=l(b);if(y[R]===void 0){var B=Me.nestedProperty(w,b).get(),O=d(B,S);O!==void 0&&(y[R]=O)}}},ot.appendArrayMultiPointValues=function(y,w,S){var c=w._arrayAttrs;if(c)for(var F=0;F<c.length;F++){var b=c[F],R=l(b);if(y[R]===void 0){for(var B=Me.nestedProperty(w,b).get(),O=new Array(S.length),P=0;P<S.length;P++)O[P]=d(B,S[P]);y[R]=O}}};var m={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function l(y){return m[y]||y}function d(y,w){if(Array.isArray(w)){if(Array.isArray(y)&&Array.isArray(y[w[0]]))return y[w[0]][w[1]]}else return y[w]}var x={x:!0,y:!0},v={"x unified":!0,"y unified":!0};ot.isUnifiedHover=function(y){return typeof y!="string"?!1:!!v[y]},ot.isXYhover=function(y){return typeof y!="string"?!1:!!x[y]}}),gd=s((ot,Me)=>{Me.exports=d;var m={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},l=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function d(y){var w=[];return y.replace(l,function(S,c,F){var b=c.toLowerCase();for(F=v(F),b=="m"&&F.length>2&&(w.push([c].concat(F.splice(0,2))),b="l",c=c=="m"?"l":"L");;){if(F.length==m[b])return F.unshift(c),w.push(F);if(F.length<m[b])throw new Error("malformed path data");w.push([c].concat(F.splice(0,m[b])))}}),w}var x=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function v(y){var w=y.match(x);return w?w.map(Number):[]}}),jd=s((ot,Me)=>{var m=gd(),l=function(P,D){return D?Math.round(P*(D=Math.pow(10,D)))/D:Math.round(P)},d="M0,0Z",x=Math.sqrt(2),v=Math.sqrt(3),y=Math.PI,w=Math.cos,S=Math.sin;Me.exports={circle:{n:0,f:function(P,D,H){if(c(D))return d;var C=l(P,2),A="M"+C+",0A"+C+","+C+" 0 1,1 0,-"+C+"A"+C+","+C+" 0 0,1 "+C+",0Z";return H?O(D,H,A):A}},square:{n:1,f:function(P,D,H){if(c(D))return d;var C=l(P,2);return O(D,H,"M"+C+","+C+"H-"+C+"V-"+C+"H"+C+"Z")}},diamond:{n:2,f:function(P,D,H){if(c(D))return d;var C=l(P*1.3,2);return O(D,H,"M"+C+",0L0,"+C+"L-"+C+",0L0,-"+C+"Z")}},cross:{n:3,f:function(P,D,H){if(c(D))return d;var C=l(P*.4,2),A=l(P*1.2,2);return O(D,H,"M"+A+","+C+"H"+C+"V"+A+"H-"+C+"V"+C+"H-"+A+"V-"+C+"H-"+C+"V-"+A+"H"+C+"V-"+C+"H"+A+"Z")}},x:{n:4,f:function(P,D,H){if(c(D))return d;var C=l(P*.8/x,2),A="l"+C+","+C,L="l"+C+",-"+C,j="l-"+C+",-"+C,Z="l-"+C+","+C;return O(D,H,"M0,"+C+A+L+j+L+j+Z+j+Z+A+Z+A+"Z")}},"triangle-up":{n:5,f:function(P,D,H){if(c(D))return d;var C=l(P*2/v,2),A=l(P/2,2),L=l(P,2);return O(D,H,"M-"+C+","+A+"H"+C+"L0,-"+L+"Z")}},"triangle-down":{n:6,f:function(P,D,H){if(c(D))return d;var C=l(P*2/v,2),A=l(P/2,2),L=l(P,2);return O(D,H,"M-"+C+",-"+A+"H"+C+"L0,"+L+"Z")}},"triangle-left":{n:7,f:function(P,D,H){if(c(D))return d;var C=l(P*2/v,2),A=l(P/2,2),L=l(P,2);return O(D,H,"M"+A+",-"+C+"V"+C+"L-"+L+",0Z")}},"triangle-right":{n:8,f:function(P,D,H){if(c(D))return d;var C=l(P*2/v,2),A=l(P/2,2),L=l(P,2);return O(D,H,"M-"+A+",-"+C+"V"+C+"L"+L+",0Z")}},"triangle-ne":{n:9,f:function(P,D,H){if(c(D))return d;var C=l(P*.6,2),A=l(P*1.2,2);return O(D,H,"M-"+A+",-"+C+"H"+C+"V"+A+"Z")}},"triangle-se":{n:10,f:function(P,D,H){if(c(D))return d;var C=l(P*.6,2),A=l(P*1.2,2);return O(D,H,"M"+C+",-"+A+"V"+C+"H-"+A+"Z")}},"triangle-sw":{n:11,f:function(P,D,H){if(c(D))return d;var C=l(P*.6,2),A=l(P*1.2,2);return O(D,H,"M"+A+","+C+"H-"+C+"V-"+A+"Z")}},"triangle-nw":{n:12,f:function(P,D,H){if(c(D))return d;var C=l(P*.6,2),A=l(P*1.2,2);return O(D,H,"M-"+C+","+A+"V-"+C+"H"+A+"Z")}},pentagon:{n:13,f:function(P,D,H){if(c(D))return d;var C=l(P*.951,2),A=l(P*.588,2),L=l(-P,2),j=l(P*-.309,2),Z=l(P*.809,2);return O(D,H,"M"+C+","+j+"L"+A+","+Z+"H-"+A+"L-"+C+","+j+"L0,"+L+"Z")}},hexagon:{n:14,f:function(P,D,H){if(c(D))return d;var C=l(P,2),A=l(P/2,2),L=l(P*v/2,2);return O(D,H,"M"+L+",-"+A+"V"+A+"L0,"+C+"L-"+L+","+A+"V-"+A+"L0,-"+C+"Z")}},hexagon2:{n:15,f:function(P,D,H){if(c(D))return d;var C=l(P,2),A=l(P/2,2),L=l(P*v/2,2);return O(D,H,"M-"+A+","+L+"H"+A+"L"+C+",0L"+A+",-"+L+"H-"+A+"L-"+C+",0Z")}},octagon:{n:16,f:function(P,D,H){if(c(D))return d;var C=l(P*.924,2),A=l(P*.383,2);return O(D,H,"M-"+A+",-"+C+"H"+A+"L"+C+",-"+A+"V"+A+"L"+A+","+C+"H-"+A+"L-"+C+","+A+"V-"+A+"Z")}},star:{n:17,f:function(P,D,H){if(c(D))return d;var C=P*1.4,A=l(C*.225,2),L=l(C*.951,2),j=l(C*.363,2),Z=l(C*.588,2),nl=l(-C,2),Pe=l(C*-.309,2),se=l(C*.118,2),q=l(C*.809,2),ol=l(C*.382,2);return O(D,H,"M"+A+","+Pe+"H"+L+"L"+j+","+se+"L"+Z+","+q+"L0,"+ol+"L-"+Z+","+q+"L-"+j+","+se+"L-"+L+","+Pe+"H-"+A+"L0,"+nl+"Z")}},hexagram:{n:18,f:function(P,D,H){if(c(D))return d;var C=l(P*.66,2),A=l(P*.38,2),L=l(P*.76,2);return O(D,H,"M-"+L+",0l-"+A+",-"+C+"h"+L+"l"+A+",-"+C+"l"+A+","+C+"h"+L+"l-"+A+","+C+"l"+A+","+C+"h-"+L+"l-"+A+","+C+"l-"+A+",-"+C+"h-"+L+"Z")}},"star-triangle-up":{n:19,f:function(P,D,H){if(c(D))return d;var C=l(P*v*.8,2),A=l(P*.8,2),L=l(P*1.6,2),j=l(P*4,2),Z="A "+j+","+j+" 0 0 1 ";return O(D,H,"M-"+C+","+A+Z+C+","+A+Z+"0,-"+L+Z+"-"+C+","+A+"Z")}},"star-triangle-down":{n:20,f:function(P,D,H){if(c(D))return d;var C=l(P*v*.8,2),A=l(P*.8,2),L=l(P*1.6,2),j=l(P*4,2),Z="A "+j+","+j+" 0 0 1 ";return O(D,H,"M"+C+",-"+A+Z+"-"+C+",-"+A+Z+"0,"+L+Z+C+",-"+A+"Z")}},"star-square":{n:21,f:function(P,D,H){if(c(D))return d;var C=l(P*1.1,2),A=l(P*2,2),L="A "+A+","+A+" 0 0 1 ";return O(D,H,"M-"+C+",-"+C+L+"-"+C+","+C+L+C+","+C+L+C+",-"+C+L+"-"+C+",-"+C+"Z")}},"star-diamond":{n:22,f:function(P,D,H){if(c(D))return d;var C=l(P*1.4,2),A=l(P*1.9,2),L="A "+A+","+A+" 0 0 1 ";return O(D,H,"M-"+C+",0"+L+"0,"+C+L+C+",0"+L+"0,-"+C+L+"-"+C+",0Z")}},"diamond-tall":{n:23,f:function(P,D,H){if(c(D))return d;var C=l(P*.7,2),A=l(P*1.4,2);return O(D,H,"M0,"+A+"L"+C+",0L0,-"+A+"L-"+C+",0Z")}},"diamond-wide":{n:24,f:function(P,D,H){if(c(D))return d;var C=l(P*1.4,2),A=l(P*.7,2);return O(D,H,"M0,"+A+"L"+C+",0L0,-"+A+"L-"+C+",0Z")}},hourglass:{n:25,f:function(P,D,H){if(c(D))return d;var C=l(P,2);return O(D,H,"M"+C+","+C+"H-"+C+"L"+C+",-"+C+"H-"+C+"Z")},noDot:!0},bowtie:{n:26,f:function(P,D,H){if(c(D))return d;var C=l(P,2);return O(D,H,"M"+C+","+C+"V-"+C+"L-"+C+","+C+"V-"+C+"Z")},noDot:!0},"circle-cross":{n:27,f:function(P,D,H){if(c(D))return d;var C=l(P,2);return O(D,H,"M0,"+C+"V-"+C+"M"+C+",0H-"+C+"M"+C+",0A"+C+","+C+" 0 1,1 0,-"+C+"A"+C+","+C+" 0 0,1 "+C+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(P,D,H){if(c(D))return d;var C=l(P,2),A=l(P/x,2);return O(D,H,"M"+A+","+A+"L-"+A+",-"+A+"M"+A+",-"+A+"L-"+A+","+A+"M"+C+",0A"+C+","+C+" 0 1,1 0,-"+C+"A"+C+","+C+" 0 0,1 "+C+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(P,D,H){if(c(D))return d;var C=l(P,2);return O(D,H,"M0,"+C+"V-"+C+"M"+C+",0H-"+C+"M"+C+","+C+"H-"+C+"V-"+C+"H"+C+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(P,D,H){if(c(D))return d;var C=l(P,2);return O(D,H,"M"+C+","+C+"L-"+C+",-"+C+"M"+C+",-"+C+"L-"+C+","+C+"M"+C+","+C+"H-"+C+"V-"+C+"H"+C+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(P,D,H){if(c(D))return d;var C=l(P*1.3,2);return O(D,H,"M"+C+",0L0,"+C+"L-"+C+",0L0,-"+C+"ZM0,-"+C+"V"+C+"M-"+C+",0H"+C)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(P,D,H){if(c(D))return d;var C=l(P*1.3,2),A=l(P*.65,2);return O(D,H,"M"+C+",0L0,"+C+"L-"+C+",0L0,-"+C+"ZM-"+A+",-"+A+"L"+A+","+A+"M-"+A+","+A+"L"+A+",-"+A)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(P,D,H){if(c(D))return d;var C=l(P*1.4,2);return O(D,H,"M0,"+C+"V-"+C+"M"+C+",0H-"+C)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(P,D,H){if(c(D))return d;var C=l(P,2);return O(D,H,"M"+C+","+C+"L-"+C+",-"+C+"M"+C+",-"+C+"L-"+C+","+C)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(P,D,H){if(c(D))return d;var C=l(P*1.2,2),A=l(P*.85,2);return O(D,H,"M0,"+C+"V-"+C+"M"+C+",0H-"+C+"M"+A+","+A+"L-"+A+",-"+A+"M"+A+",-"+A+"L-"+A+","+A)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(P,D,H){if(c(D))return d;var C=l(P/2,2),A=l(P,2);return O(D,H,"M"+C+","+A+"V-"+A+"M"+(C-A)+",-"+A+"V"+A+"M"+A+","+C+"H-"+A+"M-"+A+","+(C-A)+"H"+A)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(P,D,H){if(c(D))return d;var C=l(P*1.2,2),A=l(P*1.6,2),L=l(P*.8,2);return O(D,H,"M-"+C+","+L+"L0,0M"+C+","+L+"L0,0M0,-"+A+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(P,D,H){if(c(D))return d;var C=l(P*1.2,2),A=l(P*1.6,2),L=l(P*.8,2);return O(D,H,"M-"+C+",-"+L+"L0,0M"+C+",-"+L+"L0,0M0,"+A+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(P,D,H){if(c(D))return d;var C=l(P*1.2,2),A=l(P*1.6,2),L=l(P*.8,2);return O(D,H,"M"+L+","+C+"L0,0M"+L+",-"+C+"L0,0M-"+A+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(P,D,H){if(c(D))return d;var C=l(P*1.2,2),A=l(P*1.6,2),L=l(P*.8,2);return O(D,H,"M-"+L+","+C+"L0,0M-"+L+",-"+C+"L0,0M"+A+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(P,D,H){if(c(D))return d;var C=l(P*1.4,2);return O(D,H,"M"+C+",0H-"+C)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(P,D,H){if(c(D))return d;var C=l(P*1.4,2);return O(D,H,"M0,"+C+"V-"+C)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(P,D,H){if(c(D))return d;var C=l(P,2);return O(D,H,"M"+C+",-"+C+"L-"+C+","+C)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(P,D,H){if(c(D))return d;var C=l(P,2);return O(D,H,"M"+C+","+C+"L-"+C+",-"+C)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(P,D,H){if(c(D))return d;var C=l(P,2),A=l(P*2,2);return O(D,H,"M0,0L-"+C+","+A+"H"+C+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(P,D,H){if(c(D))return d;var C=l(P,2),A=l(P*2,2);return O(D,H,"M0,0L-"+C+",-"+A+"H"+C+"Z")},noDot:!0},"arrow-left":{n:47,f:function(P,D,H){if(c(D))return d;var C=l(P*2,2),A=l(P,2);return O(D,H,"M0,0L"+C+",-"+A+"V"+A+"Z")},noDot:!0},"arrow-right":{n:48,f:function(P,D,H){if(c(D))return d;var C=l(P*2,2),A=l(P,2);return O(D,H,"M0,0L-"+C+",-"+A+"V"+A+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(P,D,H){if(c(D))return d;var C=l(P,2),A=l(P*2,2);return O(D,H,"M-"+C+",0H"+C+"M0,0L-"+C+","+A+"H"+C+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(P,D,H){if(c(D))return d;var C=l(P,2),A=l(P*2,2);return O(D,H,"M-"+C+",0H"+C+"M0,0L-"+C+",-"+A+"H"+C+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(P,D,H){if(c(D))return d;var C=l(P*2,2),A=l(P,2);return O(D,H,"M0,-"+A+"V"+A+"M0,0L"+C+",-"+A+"V"+A+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(P,D,H){if(c(D))return d;var C=l(P*2,2),A=l(P,2);return O(D,H,"M0,-"+A+"V"+A+"M0,0L-"+C+",-"+A+"V"+A+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(P,D,H){if(c(D))return d;var C=y/2.5,A=2*P*w(C),L=2*P*S(C);return O(D,H,"M0,0L"+-A+","+L+"L"+A+","+L+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(P,D,H){if(c(D))return d;var C=y/4,A=2*P*w(C),L=2*P*S(C);return O(D,H,"M0,0L"+-A+","+L+"A "+2*P+","+2*P+" 0 0 1 "+A+","+L+"Z")},backoff:.4,noDot:!0}};function c(P){return P===null}var F,b,R,B;function O(P,D,H){if((!P||P%360===0)&&!D)return H;if(R===P&&B===D&&F===H)return b;R=P,B=D,F=H;function C(Fn,al){var sl=w(Fn),ce=S(Fn),ll=al[0],ul=al[1]+(D||0);return[ll*sl-ul*ce,ll*ce+ul*sl]}for(var A=P/180*y,L=0,j=0,Z=m(H),nl="",Pe=0;Pe<Z.length;Pe++){var se=Z[Pe],q=se[0],ol=L,nt=j;if(q==="M"||q==="L")L=+se[1],j=+se[2];else if(q==="m"||q==="l")L+=+se[1],j+=+se[2];else if(q==="H")L=+se[1];else if(q==="h")L+=+se[1];else if(q==="V")j=+se[1];else if(q==="v")j+=+se[1];else if(q==="A"){L=+se[1],j=+se[2];var In=C(A,[+se[6],+se[7]]);se[6]=In[0],se[7]=In[1],se[3]=+se[3]+P}(q==="H"||q==="V")&&(q="L"),(q==="h"||q==="v")&&(q="l"),(q==="m"||q==="l")&&(L-=ol,j-=nt);var _t=C(A,[L,j]);(q==="H"||q==="V")&&(q="L"),(q==="M"||q==="L"||q==="m"||q==="l")&&(se[1]=_t[0],se[2]=_t[1]),se[0]=q,nl+=se[0]+se.slice(1).join(",")}return b=nl,nl}}),Qd=s((ot,Me)=>{var m=$(),l=rt(),d=l.numberFormat,x=zn(),v=$l(),y=ff(),w=oh(),S=Gu(),c=l.strTranslate,F=Kg(),b=Yg(),R=$f(),B=R.LINE_SPACING,O=Ed().DESELECTDIM,P=Zu(),D=rd(),H=wd().appendArrayPointValue,C=Me.exports={};C.font=function(Kl,vu){var Rl=vu.variant,Wu=vu.style,cd=vu.weight,xd=vu.color,Td=vu.size,Pd=vu.family,Hd=vu.shadow,$d=vu.lineposition,Wd=vu.textcase;Pd&&Kl.style("font-family",Pd),Td+1&&Kl.style("font-size",Td+"px"),xd&&Kl.call(w.fill,xd),cd&&Kl.style("font-weight",cd),Wu&&Kl.style("font-style",Wu),Rl&&Kl.style("font-variant",Rl),Wd&&Kl.style("text-transform",A(j(Wd))),Hd&&Kl.style("text-shadow",Hd==="auto"?F.makeTextShadow(w.contrast(xd)):A(Hd)),$d&&Kl.style("text-decoration-line",A(Z($d)))};function A(Kl){return Kl==="none"?void 0:Kl}var L={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function j(Kl){return L[Kl]}function Z(Kl){return Kl.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}C.setPosition=function(Kl,vu,Rl){Kl.attr("x",vu).attr("y",Rl)},C.setSize=function(Kl,vu,Rl){Kl.attr("width",vu).attr("height",Rl)},C.setRect=function(Kl,vu,Rl,Wu,cd){Kl.call(C.setPosition,vu,Rl).call(C.setSize,Wu,cd)},C.translatePoint=function(Kl,vu,Rl,Wu){var cd=Rl.c2p(Kl.x),xd=Wu.c2p(Kl.y);if(x(cd)&&x(xd)&&vu.node())vu.node().nodeName==="text"?vu.attr("x",cd).attr("y",xd):vu.attr("transform",c(cd,xd));else return!1;return!0},C.translatePoints=function(Kl,vu,Rl){Kl.each(function(Wu){var cd=m.select(this);C.translatePoint(Wu,cd,vu,Rl)})},C.hideOutsideRangePoint=function(Kl,vu,Rl,Wu,cd,xd){vu.attr("display",Rl.isPtWithinRange(Kl,cd)&&Wu.isPtWithinRange(Kl,xd)?null:"none")},C.hideOutsideRangePoints=function(Kl,vu){if(vu._hasClipOnAxisFalse){var Rl=vu.xaxis,Wu=vu.yaxis;Kl.each(function(cd){var xd=cd[0].trace,Td=xd.xcalendar,Pd=xd.ycalendar,Hd=y.traceIs(xd,"bar-like")?".bartext":".point,.textpoint";Kl.selectAll(Hd).each(function($d){C.hideOutsideRangePoint($d,m.select(this),Rl,Wu,Td,Pd)})})}},C.crispRound=function(Kl,vu,Rl){return!vu||!x(vu)?Rl||0:Kl._context.staticPlot?vu:vu<1?1:Math.round(vu)},C.singleLineStyle=function(Kl,vu,Rl,Wu,cd){vu.style("fill","none");var xd=(((Kl||[])[0]||{}).trace||{}).line||{},Td=Rl||xd.width||0,Pd=cd||xd.dash||"";w.stroke(vu,Wu||xd.color),C.dashLine(vu,Pd,Td)},C.lineGroupStyle=function(Kl,vu,Rl,Wu){Kl.style("fill","none").each(function(cd){var xd=(((cd||[])[0]||{}).trace||{}).line||{},Td=vu||xd.width||0,Pd=Wu||xd.dash||"";m.select(this).call(w.stroke,Rl||xd.color).call(C.dashLine,Pd,Td)})},C.dashLine=function(Kl,vu,Rl){Rl=+Rl||0,vu=C.dashStyle(vu,Rl),Kl.style({"stroke-dasharray":vu,"stroke-width":Rl+"px"})},C.dashStyle=function(Kl,vu){vu=+vu||1;var Rl=Math.max(vu,3);return Kl==="solid"?Kl="":Kl==="dot"?Kl=Rl+"px,"+Rl+"px":Kl==="dash"?Kl=3*Rl+"px,"+3*Rl+"px":Kl==="longdash"?Kl=5*Rl+"px,"+5*Rl+"px":Kl==="dashdot"?Kl=3*Rl+"px,"+Rl+"px,"+Rl+"px,"+Rl+"px":Kl==="longdashdot"&&(Kl=5*Rl+"px,"+2*Rl+"px,"+Rl+"px,"+2*Rl+"px"),Kl};function nl(Kl,vu,Rl,Wu){var cd=vu.fillpattern,xd=vu.fillgradient,Td=C.getPatternAttr,Pd=cd&&(Td(cd.shape,0,"")||Td(cd.path,0,""));if(Pd){var Hd=Td(cd.bgcolor,0,null),$d=Td(cd.fgcolor,0,null),Wd=cd.fgopacity,mh=Td(cd.size,0,8),Dd=Td(cd.solidity,0,.3),bh=vu.uid;C.pattern(Kl,"point",Rl,bh,Pd,mh,Dd,void 0,cd.fillmode,Hd,$d,Wd)}else if(xd&&xd.type!=="none"){var Dh=xd.type,vh="scatterfill-"+vu.uid;if(Wu&&(vh="legendfill-"+vu.uid),!Wu&&(xd.start!==void 0||xd.stop!==void 0)){var Gh,Ql;Dh==="horizontal"?(Gh={x:xd.start,y:0},Ql={x:xd.stop,y:0}):Dh==="vertical"&&(Gh={x:0,y:xd.start},Ql={x:0,y:xd.stop}),Gh.x=vu._xA.c2p(Gh.x===void 0?vu._extremes.x.min[0].val:Gh.x,!0),Gh.y=vu._yA.c2p(Gh.y===void 0?vu._extremes.y.min[0].val:Gh.y,!0),Ql.x=vu._xA.c2p(Ql.x===void 0?vu._extremes.x.max[0].val:Ql.x,!0),Ql.y=vu._yA.c2p(Ql.y===void 0?vu._extremes.y.max[0].val:Ql.y,!0),Kl.call(_t,Rl,vh,"linear",xd.colorscale,"fill",Gh,Ql,!0,!1)}else Dh==="horizontal"&&(Dh=Dh+"reversed"),Kl.call(C.gradient,Rl,vh,Dh,xd.colorscale,"fill")}else vu.fillcolor&&Kl.call(w.fill,vu.fillcolor)}C.singleFillStyle=function(Kl,vu){var Rl=m.select(Kl.node()),Wu=Rl.data(),cd=((Wu[0]||[])[0]||{}).trace||{};nl(Kl,cd,vu,!1)},C.fillGroupStyle=function(Kl,vu,Rl){Kl.style("stroke-width",0).each(function(Wu){var cd=m.select(this);Wu[0].trace&&nl(cd,Wu[0].trace,vu,Rl)})};var Pe=jd();C.symbolNames=[],C.symbolFuncs=[],C.symbolBackOffs=[],C.symbolNeedLines={},C.symbolNoDot={},C.symbolNoFill={},C.symbolList=[],Object.keys(Pe).forEach(function(Kl){var vu=Pe[Kl],Rl=vu.n;C.symbolList.push(Rl,String(Rl),Kl,Rl+100,String(Rl+100),Kl+"-open"),C.symbolNames[Rl]=Kl,C.symbolFuncs[Rl]=vu.f,C.symbolBackOffs[Rl]=vu.backoff||0,vu.needLine&&(C.symbolNeedLines[Rl]=!0),vu.noDot?C.symbolNoDot[Rl]=!0:C.symbolList.push(Rl+200,String(Rl+200),Kl+"-dot",Rl+300,String(Rl+300),Kl+"-open-dot"),vu.noFill&&(C.symbolNoFill[Rl]=!0)});var se=C.symbolNames.length,q="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";C.symbolNumber=function(Kl){if(x(Kl))Kl=+Kl;else if(typeof Kl=="string"){var vu=0;Kl.indexOf("-open")>0&&(vu=100,Kl=Kl.replace("-open","")),Kl.indexOf("-dot")>0&&(vu+=200,Kl=Kl.replace("-dot","")),Kl=C.symbolNames.indexOf(Kl),Kl>=0&&(Kl+=vu)}return Kl%100>=se||Kl>=400?0:Math.floor(Math.max(Kl,0))};function ol(Kl,vu,Rl,Wu){var cd=Kl%100;return C.symbolFuncs[cd](vu,Rl,Wu)+(Kl>=200?q:"")}var nt=d("~f"),In={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};C.gradient=function(Kl,vu,Rl,Wu,cd,xd){var Td=In[Wu];return _t(Kl,vu,Rl,Td.type,cd,xd,Td.start,Td.stop,!1,Td.reversed)};function _t(Kl,vu,Rl,Wu,cd,xd,Td,Pd,Hd,$d){var Wd=cd.length,mh;Wu==="linear"?mh={node:"linearGradient",attrs:{x1:Td.x,y1:Td.y,x2:Pd.x,y2:Pd.y,gradientUnits:Hd?"userSpaceOnUse":"objectBoundingBox"},reversed:$d}:Wu==="radial"&&(mh={node:"radialGradient",reversed:$d});for(var Dd=new Array(Wd),bh=0;bh<Wd;bh++)mh.reversed?Dd[Wd-1-bh]=[nt((1-cd[bh][0])*100),cd[bh][1]]:Dd[bh]=[nt(cd[bh][0]*100),cd[bh][1]];var Dh=vu._fullLayout,vh="g"+Dh._uid+"-"+Rl,Gh=Dh._defs.select(".gradients").selectAll("#"+vh).data([Wu+Dd.join(";")],l.identity);Gh.exit().remove(),Gh.enter().append(mh.node).each(function(){var Ql=m.select(this);mh.attrs&&Ql.attr(mh.attrs),Ql.attr("id",vh);var Ku=Ql.selectAll("stop").data(Dd);Ku.exit().remove(),Ku.enter().append("stop"),Ku.each(function(gl){var Dl=v(gl[1]);m.select(this).attr({offset:gl[0]+"%","stop-color":w.tinyRGB(Dl),"stop-opacity":Dl.getAlpha()})})}),Kl.style(xd,Sl(vh,vu)).style(xd+"-opacity",null),Kl.classed("gradient_filled",!0)}C.pattern=function(Kl,vu,Rl,Wu,cd,xd,Td,Pd,Hd,$d,Wd,mh){var Dd=vu==="legend";Pd&&(Hd==="overlay"?($d=Pd,Wd=w.contrast($d)):($d=void 0,Wd=Pd));var bh=Rl._fullLayout,Dh="p"+bh._uid+"-"+Wu,vh,Gh,Ql=function(Kd,Jd,th,Hh,sp){return Hh+(sp-Hh)*(Kd-Jd)/(th-Jd)},Ku,gl,Dl,Vl,Mu={},Nu=v(Wd),ed=w.tinyRGB(Nu),sd=Nu.getAlpha(),Sd=mh*sd;switch(cd){case"/":vh=xd*Math.sqrt(2),Gh=xd*Math.sqrt(2),Ku="M-"+vh/4+","+Gh/4+"l"+vh/2+",-"+Gh/2+"M0,"+Gh+"L"+vh+",0M"+vh/4*3+","+Gh/4*5+"l"+vh/2+",-"+Gh/2,gl=Td*xd,Vl="path",Mu={d:Ku,opacity:Sd,stroke:ed,"stroke-width":gl+"px"};break;case"\\":vh=xd*Math.sqrt(2),Gh=xd*Math.sqrt(2),Ku="M"+vh/4*3+",-"+Gh/4+"l"+vh/2+","+Gh/2+"M0,0L"+vh+","+Gh+"M-"+vh/4+","+Gh/4*3+"l"+vh/2+","+Gh/2,gl=Td*xd,Vl="path",Mu={d:Ku,opacity:Sd,stroke:ed,"stroke-width":gl+"px"};break;case"x":vh=xd*Math.sqrt(2),Gh=xd*Math.sqrt(2),Ku="M-"+vh/4+","+Gh/4+"l"+vh/2+",-"+Gh/2+"M0,"+Gh+"L"+vh+",0M"+vh/4*3+","+Gh/4*5+"l"+vh/2+",-"+Gh/2+"M"+vh/4*3+",-"+Gh/4+"l"+vh/2+","+Gh/2+"M0,0L"+vh+","+Gh+"M-"+vh/4+","+Gh/4*3+"l"+vh/2+","+Gh/2,gl=xd-xd*Math.sqrt(1-Td),Vl="path",Mu={d:Ku,opacity:Sd,stroke:ed,"stroke-width":gl+"px"};break;case"|":vh=xd,Gh=xd,Vl="path",Ku="M"+vh/2+",0L"+vh/2+","+Gh,gl=Td*xd,Vl="path",Mu={d:Ku,opacity:Sd,stroke:ed,"stroke-width":gl+"px"};break;case"-":vh=xd,Gh=xd,Vl="path",Ku="M0,"+Gh/2+"L"+vh+","+Gh/2,gl=Td*xd,Vl="path",Mu={d:Ku,opacity:Sd,stroke:ed,"stroke-width":gl+"px"};break;case"+":vh=xd,Gh=xd,Vl="path",Ku="M"+vh/2+",0L"+vh/2+","+Gh+"M0,"+Gh/2+"L"+vh+","+Gh/2,gl=xd-xd*Math.sqrt(1-Td),Vl="path",Mu={d:Ku,opacity:Sd,stroke:ed,"stroke-width":gl+"px"};break;case".":vh=xd,Gh=xd,Td<Math.PI/4?Dl=Math.sqrt(Td*xd*xd/Math.PI):Dl=Ql(Td,Math.PI/4,1,xd/2,xd/Math.sqrt(2)),Vl="circle",Mu={cx:vh/2,cy:Gh/2,r:Dl,opacity:Sd,fill:ed};break;default:vh=xd,Gh=xd,Vl="path",Mu={d:cd,opacity:Sd,fill:ed};break}var yd=[cd||"noSh",$d||"noBg",Wd||"noFg",xd,Td].join(";"),bd=bh._defs.select(".patterns").selectAll("#"+Dh).data([yd],l.identity);bd.exit().remove(),bd.enter().append("pattern").each(function(){var Kd=m.select(this);if(Kd.attr({id:Dh,width:vh+"px",height:Gh+"px",patternUnits:"userSpaceOnUse",patternTransform:Dd?"scale(0.8)":""}),$d){var Jd=v($d),th=w.tinyRGB(Jd),Hh=Jd.getAlpha(),sp=Kd.selectAll("rect").data([0]);sp.exit().remove(),sp.enter().append("rect").attr({width:vh+"px",height:Gh+"px",fill:th,"fill-opacity":Hh})}var xp=Kd.selectAll(Vl).data([0]);xp.exit().remove(),xp.enter().append(Vl).attr(Mu)}),Kl.style("fill",Sl(Dh,Rl)).style("fill-opacity",null),Kl.classed("pattern_filled",!0)},C.initGradients=function(Kl){var vu=Kl._fullLayout,Rl=l.ensureSingle(vu._defs,"g","gradients");Rl.selectAll("linearGradient,radialGradient").remove(),m.select(Kl).selectAll(".gradient_filled").classed("gradient_filled",!1)},C.initPatterns=function(Kl){var vu=Kl._fullLayout,Rl=l.ensureSingle(vu._defs,"g","patterns");Rl.selectAll("pattern").remove(),m.select(Kl).selectAll(".pattern_filled").classed("pattern_filled",!1)},C.getPatternAttr=function(Kl,vu,Rl){return Kl&&l.isArrayOrTypedArray(Kl)?vu<Kl.length?Kl[vu]:Rl:Kl},C.pointStyle=function(Kl,vu,Rl,Wu){if(Kl.size()){var cd=C.makePointStyleFns(vu);Kl.each(function(xd){C.singlePointStyle(xd,m.select(this),vu,cd,Rl,Wu)})}},C.singlePointStyle=function(Kl,vu,Rl,Wu,cd,xd){var Td=Rl.marker,Pd=Td.line;if(xd&&xd.i>=0&&Kl.i===void 0&&(Kl.i=xd.i),vu.style("opacity",Wu.selectedOpacityFn?Wu.selectedOpacityFn(Kl):Kl.mo===void 0?Td.opacity:Kl.mo),Wu.ms2mrc){var Hd;Kl.ms==="various"||Td.size==="various"?Hd=3:Hd=Wu.ms2mrc(Kl.ms),Kl.mrc=Hd,Wu.selectedSizeFn&&(Hd=Kl.mrc=Wu.selectedSizeFn(Kl));var $d=C.symbolNumber(Kl.mx||Td.symbol)||0;Kl.om=$d%200>=100;var Wd=fd(Kl,Rl),mh=re(Kl,Rl);vu.attr("d",ol($d,Hd,Wd,mh))}var Dd=!1,bh,Dh,vh;if(Kl.so)vh=Pd.outlierwidth,Dh=Pd.outliercolor,bh=Td.outliercolor;else{var Gh=(Pd||{}).width;vh=(Kl.mlw+1||Gh+1||(Kl.trace?(Kl.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Kl?Dh=Kl.mlcc=Wu.lineScale(Kl.mlc):l.isArrayOrTypedArray(Pd.color)?Dh=w.defaultLine:Dh=Pd.color,l.isArrayOrTypedArray(Td.color)&&(bh=w.defaultLine,Dd=!0),"mc"in Kl?bh=Kl.mcc=Wu.markerScale(Kl.mc):bh=Td.color||Td.colors||"rgba(0,0,0,0)",Wu.selectedColorFn&&(bh=Wu.selectedColorFn(Kl))}if(Kl.om)vu.call(w.stroke,bh).style({"stroke-width":(vh||1)+"px",fill:"none"});else{vu.style("stroke-width",(Kl.isBlank?0:vh)+"px");var Ql=Td.gradient,Ku=Kl.mgt;Ku?Dd=!0:Ku=Ql&&Ql.type,l.isArrayOrTypedArray(Ku)&&(Ku=Ku[0],In[Ku]||(Ku=0));var gl=Td.pattern,Dl=C.getPatternAttr,Vl=gl&&(Dl(gl.shape,Kl.i,"")||Dl(gl.path,Kl.i,""));if(Ku&&Ku!=="none"){var Mu=Kl.mgc;Mu?Dd=!0:Mu=Ql.color;var Nu=Rl.uid;Dd&&(Nu+="-"+Kl.i),C.gradient(vu,cd,Nu,Ku,[[0,Mu],[1,bh]],"fill")}else if(Vl){var ed=!1,sd=gl.fgcolor;!sd&&xd&&xd.color&&(sd=xd.color,ed=!0);var Sd=Dl(sd,Kl.i,xd&&xd.color||null),yd=Dl(gl.bgcolor,Kl.i,null),bd=gl.fgopacity,Kd=Dl(gl.size,Kl.i,8),Jd=Dl(gl.solidity,Kl.i,.3);ed=ed||Kl.mcc||l.isArrayOrTypedArray(gl.shape)||l.isArrayOrTypedArray(gl.path)||l.isArrayOrTypedArray(gl.bgcolor)||l.isArrayOrTypedArray(gl.fgcolor)||l.isArrayOrTypedArray(gl.size)||l.isArrayOrTypedArray(gl.solidity);var th=Rl.uid;ed&&(th+="-"+Kl.i),C.pattern(vu,"point",cd,th,Vl,Kd,Jd,Kl.mcc,gl.fillmode,yd,Sd,bd)}else l.isArrayOrTypedArray(bh)?w.fill(vu,bh[Kl.i]):w.fill(vu,bh);vh&&w.stroke(vu,Dh)}},C.makePointStyleFns=function(Kl){var vu={},Rl=Kl.marker;return vu.markerScale=C.tryColorscale(Rl,""),vu.lineScale=C.tryColorscale(Rl,"line"),y.traceIs(Kl,"symbols")&&(vu.ms2mrc=P.isBubble(Kl)?D(Kl):function(){return(Rl.size||6)/2}),Kl.selectedpoints&&l.extendFlat(vu,C.makeSelectedPointStyleFns(Kl)),vu},C.makeSelectedPointStyleFns=function(Kl){var vu={},Rl=Kl.selected||{},Wu=Kl.unselected||{},cd=Kl.marker||{},xd=Rl.marker||{},Td=Wu.marker||{},Pd=cd.opacity,Hd=xd.opacity,$d=Td.opacity,Wd=Hd!==void 0,mh=$d!==void 0;(l.isArrayOrTypedArray(Pd)||Wd||mh)&&(vu.selectedOpacityFn=function(Dl){var Vl=Dl.mo===void 0?cd.opacity:Dl.mo;return Dl.selected?Wd?Hd:Vl:mh?$d:O*Vl});var Dd=cd.color,bh=xd.color,Dh=Td.color;(bh||Dh)&&(vu.selectedColorFn=function(Dl){var Vl=Dl.mcc||Dd;return Dl.selected?bh||Vl:Dh||Vl});var vh=cd.size,Gh=xd.size,Ql=Td.size,Ku=Gh!==void 0,gl=Ql!==void 0;return y.traceIs(Kl,"symbols")&&(Ku||gl)&&(vu.selectedSizeFn=function(Dl){var Vl=Dl.mrc||vh/2;return Dl.selected?Ku?Gh/2:Vl:gl?Ql/2:Vl}),vu},C.makeSelectedTextStyleFns=function(Kl){var vu={},Rl=Kl.selected||{},Wu=Kl.unselected||{},cd=Kl.textfont||{},xd=Rl.textfont||{},Td=Wu.textfont||{},Pd=cd.color,Hd=xd.color,$d=Td.color;return vu.selectedTextColorFn=function(Wd){var mh=Wd.tc||Pd;return Wd.selected?Hd||mh:$d||(Hd?mh:w.addOpacity(mh,O))},vu},C.selectedPointStyle=function(Kl,vu){if(!(!Kl.size()||!vu.selectedpoints)){var Rl=C.makeSelectedPointStyleFns(vu),Wu=vu.marker||{},cd=[];Rl.selectedOpacityFn&&cd.push(function(xd,Td){xd.style("opacity",Rl.selectedOpacityFn(Td))}),Rl.selectedColorFn&&cd.push(function(xd,Td){w.fill(xd,Rl.selectedColorFn(Td))}),Rl.selectedSizeFn&&cd.push(function(xd,Td){var Pd=Td.mx||Wu.symbol||0,Hd=Rl.selectedSizeFn(Td);xd.attr("d",ol(C.symbolNumber(Pd),Hd,fd(Td,vu),re(Td,vu))),Td.mrc2=Hd}),cd.length&&Kl.each(function(xd){for(var Td=m.select(this),Pd=0;Pd<cd.length;Pd++)cd[Pd](Td,xd)})}},C.tryColorscale=function(Kl,vu){var Rl=vu?l.nestedProperty(Kl,vu).get():Kl;if(Rl){var Wu=Rl.color;if((Rl.colorscale||Rl._colorAx)&&l.isArrayOrTypedArray(Wu))return S.makeColorScaleFuncFromTrace(Rl)}return l.identity};var Fn={start:1,end:-1,middle:0,bottom:1,top:-1};function al(Kl,vu,Rl,Wu,cd){var xd=m.select(Kl.node().parentNode),Td=vu.indexOf("top")!==-1?"top":vu.indexOf("bottom")!==-1?"bottom":"middle",Pd=vu.indexOf("left")!==-1?"end":vu.indexOf("right")!==-1?"start":"middle",Hd=Wu?Wu/.8+1:0,$d=(F.lineCount(Kl)-1)*B+1,Wd=Fn[Pd]*Hd,mh=Rl*.75+Fn[Td]*Hd+(Fn[Td]-1)*$d*Rl/2;Kl.attr("text-anchor",Pd),cd||xd.attr("transform",c(Wd,mh))}function sl(Kl,vu){var Rl=Kl.ts||vu.textfont.size;return x(Rl)&&Rl>0?Rl:0}C.textPointStyle=function(Kl,vu,Rl){if(Kl.size()){var Wu;if(vu.selectedpoints){var cd=C.makeSelectedTextStyleFns(vu);Wu=cd.selectedTextColorFn}var xd=vu.texttemplate,Td=Rl._fullLayout;Kl.each(function(Pd){var Hd=m.select(this),$d=xd?l.extractOption(Pd,vu,"txt","texttemplate"):l.extractOption(Pd,vu,"tx","text");if(!$d&&$d!==0){Hd.remove();return}if(xd){var Wd=vu._module.formatLabels,mh=Wd?Wd(Pd,vu,Td):{},Dd={};H(Dd,vu,Pd.i);var bh=vu._meta||{};$d=l.texttemplateString($d,mh,Td._d3locale,Dd,Pd,bh)}var Dh=Pd.tp||vu.textposition,vh=sl(Pd,vu),Gh=Wu?Wu(Pd):Pd.tc||vu.textfont.color;Hd.call(C.font,{family:Pd.tf||vu.textfont.family,weight:Pd.tw||vu.textfont.weight,style:Pd.ty||vu.textfont.style,variant:Pd.tv||vu.textfont.variant,textcase:Pd.tC||vu.textfont.textcase,lineposition:Pd.tE||vu.textfont.lineposition,shadow:Pd.tS||vu.textfont.shadow,size:vh,color:Gh}).text($d).call(F.convertToTspans,Rl).call(al,Dh,vh,Pd.mrc)})}},C.selectedTextStyle=function(Kl,vu){if(!(!Kl.size()||!vu.selectedpoints)){var Rl=C.makeSelectedTextStyleFns(vu);Kl.each(function(Wu){var cd=m.select(this),xd=Rl.selectedTextColorFn(Wu),Td=Wu.tp||vu.textposition,Pd=sl(Wu,vu);w.fill(cd,xd);var Hd=y.traceIs(vu,"bar-like");al(cd,Td,Pd,Wu.mrc2||Wu.mrc,Hd)})}};var ce=.5;C.smoothopen=function(Kl,vu){if(Kl.length<3)return"M"+Kl.join("L");var Rl="M"+Kl[0],Wu=[],cd;for(cd=1;cd<Kl.length-1;cd++)Wu.push(Ul(Kl[cd-1],Kl[cd],Kl[cd+1],vu));for(Rl+="Q"+Wu[0][0]+" "+Kl[1],cd=2;cd<Kl.length-1;cd++)Rl+="C"+Wu[cd-2][1]+" "+Wu[cd-1][0]+" "+Kl[cd];return Rl+="Q"+Wu[Kl.length-3][1]+" "+Kl[Kl.length-1],Rl},C.smoothclosed=function(Kl,vu){if(Kl.length<3)return"M"+Kl.join("L")+"Z";var Rl="M"+Kl[0],Wu=Kl.length-1,cd=[Ul(Kl[Wu],Kl[0],Kl[1],vu)],xd;for(xd=1;xd<Wu;xd++)cd.push(Ul(Kl[xd-1],Kl[xd],Kl[xd+1],vu));for(cd.push(Ul(Kl[Wu-1],Kl[Wu],Kl[0],vu)),xd=1;xd<=Wu;xd++)Rl+="C"+cd[xd-1][1]+" "+cd[xd][0]+" "+Kl[xd];return Rl+="C"+cd[Wu][1]+" "+cd[0][0]+" "+Kl[0]+"Z",Rl};var ll,ul;function fl(Kl,vu,Rl){return Rl&&(Kl=Bn(Kl)),vu?El(Kl[1]):bl(Kl[0])}function bl(Kl){var vu=m.round(Kl,2);return ll=vu,vu}function El(Kl){var vu=m.round(Kl,2);return ul=vu,vu}function Ul(Kl,vu,Rl,Wu){var cd=Kl[0]-vu[0],xd=Kl[1]-vu[1],Td=Rl[0]-vu[0],Pd=Rl[1]-vu[1],Hd=Math.pow(cd*cd+xd*xd,ce/2),$d=Math.pow(Td*Td+Pd*Pd,ce/2),Wd=($d*$d*cd-Hd*Hd*Td)*Wu,mh=($d*$d*xd-Hd*Hd*Pd)*Wu,Dd=3*$d*(Hd+$d),bh=3*Hd*(Hd+$d);return[[bl(vu[0]+(Dd&&Wd/Dd)),El(vu[1]+(Dd&&mh/Dd))],[bl(vu[0]-(bh&&Wd/bh)),El(vu[1]-(bh&&mh/bh))]]}var ql={hv:function(Kl,vu,Rl){return"H"+bl(vu[0])+"V"+fl(vu,1,Rl)},vh:function(Kl,vu,Rl){return"V"+El(vu[1])+"H"+fl(vu,0,Rl)},hvh:function(Kl,vu,Rl){return"H"+bl((Kl[0]+vu[0])/2)+"V"+El(vu[1])+"H"+fl(vu,0,Rl)},vhv:function(Kl,vu,Rl){return"V"+El((Kl[1]+vu[1])/2)+"H"+bl(vu[0])+"V"+fl(vu,1,Rl)}},gu=function(Kl,vu,Rl){return"L"+fl(vu,0,Rl)+","+fl(vu,1,Rl)};C.steps=function(Kl){var vu=ql[Kl]||gu;return function(Rl){for(var Wu="M"+bl(Rl[0][0])+","+El(Rl[0][1]),cd=Rl.length,xd=1;xd<cd;xd++)Wu+=vu(Rl[xd-1],Rl[xd],xd===cd-1);return Wu}};function Bn(Kl,vu){var Rl=Kl.backoff,Wu=Kl.trace,cd=Kl.d,xd=Kl.i;if(Rl&&Wu&&Wu.marker&&Wu.marker.angle%360===0&&Wu.line&&Wu.line.shape!=="spline"){var Td=l.isArrayOrTypedArray(Rl),Pd=Kl,Hd=vu?vu[0]:ll||0,$d=vu?vu[1]:ul||0,Wd=Pd[0],mh=Pd[1],Dd=Wd-Hd,bh=mh-$d,Dh=Math.atan2(bh,Dd),vh=Td?Rl[xd]:Rl;if(vh==="auto"){var Gh=Pd.i;Wu.type==="scatter"&&Gh--;var Ql=Pd.marker,Ku=Ql.symbol;l.isArrayOrTypedArray(Ku)&&(Ku=Ku[Gh]);var gl=Ql.size;l.isArrayOrTypedArray(gl)&&(gl=gl[Gh]),vh=Ql?C.symbolBackOffs[C.symbolNumber(Ku)]*gl:0,vh+=C.getMarkerStandoff(cd[Gh],Wu)||0}var Dl=Wd-vh*Math.cos(Dh),Vl=mh-vh*Math.sin(Dh);(Dl<=Wd&&Dl>=Hd||Dl>=Wd&&Dl<=Hd)&&(Vl<=mh&&Vl>=$d||Vl>=mh&&Vl<=$d)&&(Kl=[Dl,Vl])}return Kl}C.applyBackoff=Bn,C.makeTester=function(){var Kl=l.ensureSingleById(m.select("body"),"svg","js-plotly-tester",function(Rl){Rl.attr(b.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),vu=l.ensureSingle(Kl,"path","js-reference-point",function(Rl){Rl.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});C.tester=Kl,C.testref=vu},C.savedBBoxes={};var il=0,X=1e4;C.bBox=function(Kl,vu,Rl){Rl||(Rl=cl(Kl));var Wu;if(Rl){if(Wu=C.savedBBoxes[Rl],Wu)return l.extendFlat({},Wu)}else if(Kl.childNodes.length===1){var cd=Kl.childNodes[0];if(Rl=cl(cd),Rl){var xd=+cd.getAttribute("x")||0,Td=+cd.getAttribute("y")||0,Pd=cd.getAttribute("transform");if(!Pd){var Hd=C.bBox(cd,!1,Rl);return xd&&(Hd.left+=xd,Hd.right+=xd),Td&&(Hd.top+=Td,Hd.bottom+=Td),Hd}if(Rl+="~"+xd+"~"+Td+"~"+Pd,Wu=C.savedBBoxes[Rl],Wu)return l.extendFlat({},Wu)}}var $d,Wd;vu?$d=Kl:(Wd=C.tester.node(),$d=Kl.cloneNode(!0),Wd.appendChild($d)),m.select($d).attr("transform",null).call(F.positionText,0,0);var mh=$d.getBoundingClientRect(),Dd=C.testref.node().getBoundingClientRect();vu||Wd.removeChild($d);var bh={height:mh.height,width:mh.width,left:mh.left-Dd.left,top:mh.top-Dd.top,right:mh.right-Dd.left,bottom:mh.bottom-Dd.top};return il>=X&&(C.savedBBoxes={},il=0),Rl&&(C.savedBBoxes[Rl]=bh),il++,l.extendFlat({},bh)};function cl(Kl){var vu=Kl.getAttribute("data-unformatted");if(vu!==null)return vu+Kl.getAttribute("data-math")+Kl.getAttribute("text-anchor")+Kl.getAttribute("style")}C.setClipUrl=function(Kl,vu,Rl){Kl.attr("clip-path",Sl(vu,Rl))};function Sl(Kl,vu){if(!Kl)return null;var Rl=vu._context,Wu=Rl._exportedPlot?"":Rl._baseUrl||"";return Wu?"url('"+Wu+"#"+Kl+"')":"url(#"+Kl+")"}C.getTranslate=function(Kl){var vu=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,Rl=Kl.attr?"attr":"getAttribute",Wu=Kl[Rl]("transform")||"",cd=Wu.replace(vu,function(xd,Td,Pd){return[Td,Pd].join(" ")}).split(" ");return{x:+cd[0]||0,y:+cd[1]||0}},C.setTranslate=function(Kl,vu,Rl){var Wu=/(\btranslate\(.*?\);?)/,cd=Kl.attr?"attr":"getAttribute",xd=Kl.attr?"attr":"setAttribute",Td=Kl[cd]("transform")||"";return vu=vu||0,Rl=Rl||0,Td=Td.replace(Wu,"").trim(),Td+=c(vu,Rl),Td=Td.trim(),Kl[xd]("transform",Td),Td},C.getScale=function(Kl){var vu=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,Rl=Kl.attr?"attr":"getAttribute",Wu=Kl[Rl]("transform")||"",cd=Wu.replace(vu,function(xd,Td,Pd){return[Td,Pd].join(" ")}).split(" ");return{x:+cd[0]||1,y:+cd[1]||1}},C.setScale=function(Kl,vu,Rl){var Wu=/(\bscale\(.*?\);?)/,cd=Kl.attr?"attr":"getAttribute",xd=Kl.attr?"attr":"setAttribute",Td=Kl[cd]("transform")||"";return vu=vu||1,Rl=Rl||1,Td=Td.replace(Wu,"").trim(),Td+="scale("+vu+","+Rl+")",Td=Td.trim(),Kl[xd]("transform",Td),Td};var st=/\s*sc.*/;C.setPointGroupScale=function(Kl,vu,Rl){if(vu=vu||1,Rl=Rl||1,!!Kl){var Wu=vu===1&&Rl===1?"":"scale("+vu+","+Rl+")";Kl.each(function(){var cd=(this.getAttribute("transform")||"").replace(st,"");cd+=Wu,cd=cd.trim(),this.setAttribute("transform",cd)})}};var U=/translate\([^)]*\)\s*$/;C.setTextPointsScale=function(Kl,vu,Rl){Kl&&Kl.each(function(){var Wu,cd=m.select(this),xd=cd.select("text");if(xd.node()){var Td=parseFloat(xd.attr("x")||0),Pd=parseFloat(xd.attr("y")||0),Hd=(cd.attr("transform")||"").match(U);vu===1&&Rl===1?Wu=[]:Wu=[c(Td,Pd),"scale("+vu+","+Rl+")",c(-Td,-Pd)],Hd&&Wu.push(Hd),cd.attr("transform",Wu.join(""))}})};function re(Kl,vu){var Rl;return Kl&&(Rl=Kl.mf),Rl===void 0&&(Rl=vu.marker&&vu.marker.standoff||0),!vu._geo&&!vu._xA?-Rl:Rl}C.getMarkerStandoff=re;var Ft=Math.atan2,ls=Math.cos,_l=Math.sin;function Ll(Kl,vu){var Rl=vu[0],Wu=vu[1];return[Rl*ls(Kl)-Wu*_l(Kl),Rl*_l(Kl)+Wu*ls(Kl)]}var zl,yu,Vu,od,Ad,vd;function fd(Kl,vu){var Rl=Kl.ma;Rl===void 0&&(Rl=vu.marker.angle,(!Rl||l.isArrayOrTypedArray(Rl))&&(Rl=0));var Wu,cd,xd=vu.marker.angleref;if(xd==="previous"||xd==="north"){if(vu._geo){var Td=vu._geo.project(Kl.lonlat);Wu=Td[0],cd=Td[1]}else{var Pd=vu._xA,Hd=vu._yA;if(Pd&&Hd)Wu=Pd.c2p(Kl.x),cd=Hd.c2p(Kl.y);else return 90}if(vu._geo){var $d=Kl.lonlat[0],Wd=Kl.lonlat[1],mh=vu._geo.project([$d,Wd+1e-5]),Dd=vu._geo.project([$d+1e-5,Wd]),bh=Ft(Dd[1]-cd,Dd[0]-Wu),Dh=Ft(mh[1]-cd,mh[0]-Wu),vh;if(xd==="north")vh=Rl/180*Math.PI;else if(xd==="previous"){var Gh=$d/180*Math.PI,Ql=Wd/180*Math.PI,Ku=zl/180*Math.PI,gl=yu/180*Math.PI,Dl=Ku-Gh,Vl=ls(gl)*_l(Dl),Mu=_l(gl)*ls(Ql)-ls(gl)*_l(Ql)*ls(Dl);vh=-Ft(Vl,Mu)-Math.PI,zl=$d,yu=Wd}var Nu=Ll(bh,[ls(vh),0]),ed=Ll(Dh,[_l(vh),0]);Rl=Ft(Nu[1]+ed[1],Nu[0]+ed[0])/Math.PI*180,xd==="previous"&&!(vd===vu.uid&&Kl.i===Ad+1)&&(Rl=null)}if(xd==="previous"&&!vu._geo)if(vd===vu.uid&&Kl.i===Ad+1&&x(Wu)&&x(cd)){var sd=Wu-Vu,Sd=cd-od,yd=vu.line&&vu.line.shape||"",bd=yd.slice(yd.length-1);bd==="h"&&(Sd=0),bd==="v"&&(sd=0),Rl+=Ft(Sd,sd)/Math.PI*180+90}else Rl=null}return Vu=Wu,od=cd,Ad=Kl.i,vd=vu.uid,Rl}C.getMarkerAngle=fd}),ih=s((ot,Me)=>{var m=$(),l=zn(),d=Vf(),x=ff(),v=rt(),y=v.strTranslate,w=Qd(),S=oh(),c=Kg(),F=Ed(),b=$f().OPPOSITE_SIDE,R=/ [XY][0-9]* /,B=1.6,O=1.6;function P(D,H,C){var A=D._fullLayout,L=C.propContainer,j=C.propName,Z=C.placeholder,nl=C.traceIndex,Pe=C.avoid||{},se=C.attributes,q=C.transform,ol=C.containerGroup,nt=1,In=L.title,_t=(In&&In.text?In.text:"").trim(),Fn=!1,al=In&&In.font?In.font:{},sl=al.family,ce=al.size,ll=al.color,ul=al.weight,fl=al.style,bl=al.variant,El=al.textcase,Ul=al.lineposition,ql=al.shadow,gu=C.subtitlePropName,Bn=!!gu,il=C.subtitlePlaceholder,X=(L.title||{}).subtitle||{text:"",font:{}},cl=(X.text||"").trim(),Sl=!1,st=1,U=X.font,re=U.family,Ft=U.size,ls=U.color,_l=U.weight,Ll=U.style,zl=U.variant,yu=U.textcase,Vu=U.lineposition,od=U.shadow,Ad;j==="title.text"?Ad="titleText":j.indexOf("axis")!==-1?Ad="axisTitleText":j.indexOf("colorbar")!==-1&&(Ad="colorbarTitleText");var vd=D._context.edits[Ad];function fd(Dd,bh){return Dd===void 0||bh===void 0?!1:Dd.replace(R," % ")===bh.replace(R," % ")}_t===""?nt=0:fd(_t,Z)&&(vd||(_t=""),nt=.2,Fn=!0),Bn&&(cl===""?st=0:fd(cl,il)&&(vd||(cl=""),st=.2,Sl=!0)),C._meta?_t=v.templateString(_t,C._meta):A._meta&&(_t=v.templateString(_t,A._meta));var Kl=_t||cl||vd,vu;ol||(ol=v.ensureSingle(A._infolayer,"g","g-"+H),vu=A._hColorbarMoveTitle);var Rl=ol.selectAll("text."+H).data(Kl?[0]:[]);Rl.enter().append("text"),Rl.text(_t).attr("class",H),Rl.exit().remove();var Wu=null,cd=H+"-subtitle",xd=cl||vd;if(Bn&&(Wu=ol.selectAll("text."+cd).data(xd?[0]:[]),Wu.enter().append("text"),Wu.text(cl).attr("class",cd),Wu.exit().remove()),!Kl)return ol;function Td(Dd,bh){v.syncOrAsync([Pd,Hd],{title:Dd,subtitle:bh})}function Pd(Dd){var bh=Dd.title,Dh=Dd.subtitle,vh;!q&&vu&&(q={}),q?(vh="",q.rotate&&(vh+="rotate("+[q.rotate,se.x,se.y]+")"),(q.offset||vu)&&(vh+=y(0,(q.offset||0)-(vu||0)))):vh=null,bh.attr("transform",vh);function Gh(Mu){if(Mu){var Nu=m.select(Mu.node().parentNode).select("."+cd);if(!Nu.empty()){var ed=Mu.node().getBBox();if(ed.height){var sd=ed.y+ed.height+B*Ft;Nu.attr("y",sd)}}}}if(bh.style("opacity",nt*S.opacity(ll)).call(w.font,{color:S.rgb(ll),size:m.round(ce,2),family:sl,weight:ul,style:fl,variant:bl,textcase:El,shadow:ql,lineposition:Ul}).attr(se).call(c.convertToTspans,D,Gh),Dh&&!Dh.empty()){var Ql=ol.select("."+H+"-math-group"),Ku=bh.node().getBBox(),gl=Ql.node()?Ql.node().getBBox():void 0,Dl=gl?gl.y+gl.height+B*Ft:Ku.y+Ku.height+O*Ft,Vl=v.extendFlat({},se,{y:Dl});Dh.attr("transform",vh),Dh.style("opacity",st*S.opacity(ls)).call(w.font,{color:S.rgb(ls),size:m.round(Ft,2),family:re,weight:_l,style:Ll,variant:zl,textcase:yu,shadow:od,lineposition:Vu}).attr(Vl).call(c.convertToTspans,D)}return d.previousPromises(D)}function Hd(Dd){var bh=Dd.title,Dh=m.select(bh.node().parentNode);if(Pe&&Pe.selection&&Pe.side&&_t){Dh.attr("transform",null);var vh=b[Pe.side],Gh=Pe.side==="left"||Pe.side==="top"?-1:1,Ql=l(Pe.pad)?Pe.pad:2,Ku=w.bBox(Dh.node()),gl={t:0,b:0,l:0,r:0},Dl=D._fullLayout._reservedMargin;for(var Vl in Dl)for(var Mu in Dl[Vl]){var Nu=Dl[Vl][Mu];gl[Mu]=Math.max(gl[Mu],Nu)}var ed={left:gl.l,top:gl.t,right:A.width-gl.r,bottom:A.height-gl.b},sd=Pe.maxShift||Gh*(ed[Pe.side]-Ku[Pe.side]),Sd=0;if(sd<0)Sd=sd;else{var yd=Pe.offsetLeft||0,bd=Pe.offsetTop||0;Ku.left-=yd,Ku.right-=yd,Ku.top-=bd,Ku.bottom-=bd,Pe.selection.each(function(){var Jd=w.bBox(this);v.bBoxIntersect(Ku,Jd,Ql)&&(Sd=Math.max(Sd,Gh*(Jd[Pe.side]-Ku[vh])+Ql))}),Sd=Math.min(sd,Sd),L._titleScoot=Math.abs(Sd)}if(Sd>0||sd<0){var Kd={left:[-Sd,0],right:[Sd,0],top:[0,-Sd],bottom:[0,Sd]}[Pe.side];Dh.attr("transform",y(Kd[0],Kd[1]))}}}Rl.call(Td,Wu);function $d(Dd,bh){Dd.text(bh).on("mouseover.opacity",function(){m.select(this).transition().duration(F.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){m.select(this).transition().duration(F.HIDE_PLACEHOLDER).style("opacity",0)})}if(vd&&(_t?Rl.on(".opacity",null):($d(Rl,Z),Fn=!0),Rl.call(c.makeEditable,{gd:D}).on("edit",function(Dd){nl!==void 0?x.call("_guiRestyle",D,j,Dd,nl):x.call("_guiRelayout",D,j,Dd)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Td)}).on("input",function(Dd){this.text(Dd||" ").call(c.positionText,se.x,se.y)}),Bn)){if(Bn&&!_t){var Wd=Rl.node().getBBox(),mh=Wd.y+Wd.height+O*Ft;Wu.attr("y",mh)}cl?Wu.on(".opacity",null):($d(Wu,il),Sl=!0),Wu.call(c.makeEditable,{gd:D}).on("edit",function(Dd){x.call("_guiRelayout",D,"title.subtitle.text",Dd)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Td)}).on("input",function(Dd){this.text(Dd||" ").call(c.positionText,Wu.attr("x"),Wu.attr("y"))})}return Rl.classed("js-placeholder",Fn),Wu&&!Wu.empty()&&Wu.classed("js-placeholder",Sl),ol}Me.exports={draw:P,SUBTITLE_PADDING_EM:O,SUBTITLE_PADDING_MATHJAX_EM:B}}),Hl=s((ot,Me)=>{var m=$(),l=oe().utcFormat,d=rt(),x=d.numberFormat,v=zn(),y=d.cleanNumber,w=d.ms2DateTime,S=d.dateTime2ms,c=d.ensureNumber,F=d.isArrayOrTypedArray,b=Et(),R=b.FP_SAFE,B=b.BADNUM,O=b.LOG_CLIP,P=b.ONEWEEK,D=b.ONEDAY,H=b.ONEHOUR,C=b.ONEMIN,A=b.ONESEC,L=Rh(),j=rf(),Z=j.HOUR_PATTERN,nl=j.WEEKDAY_PATTERN;function Pe(q){return Math.pow(10,q)}function se(q){return q!=null}Me.exports=function(q,ol){ol=ol||{};var nt=q._id||"x",In=nt.charAt(0);function _t(X,cl){if(X>0)return Math.log(X)/Math.LN10;if(X<=0&&cl&&q.range&&q.range.length===2){var Sl=q.range[0],st=q.range[1];return .5*(Sl+st-2*O*Math.abs(Sl-st))}else return B}function Fn(X,cl,Sl,st){if((st||{}).msUTC&&v(X))return+X;var U=S(X,Sl||q.calendar);if(U===B)if(v(X)){X=+X;var re=Math.floor(d.mod(X+.05,1)*10),Ft=Math.round(X-re/10);U=S(new Date(Ft))+re/10}else return B;return U}function al(X,cl,Sl){return w(X,cl,Sl||q.calendar)}function sl(X){return q._categories[Math.round(X)]}function ce(X){if(se(X)){if(q._categoriesMap===void 0&&(q._categoriesMap={}),q._categoriesMap[X]!==void 0)return q._categoriesMap[X];q._categories.push(typeof X=="number"?String(X):X);var cl=q._categories.length-1;return q._categoriesMap[X]=cl,cl}return B}function ll(X,cl){for(var Sl=new Array(cl),st=0;st<cl;st++){var U=(X[0]||[])[st],re=(X[1]||[])[st];Sl[st]=ul([U,re])}return Sl}function ul(X){if(q._categoriesMap)return q._categoriesMap[X]}function fl(X){var cl=ul(X);if(cl!==void 0)return cl;if(v(X))return+X}function bl(X){return v(X)?+X:ul(X)}function El(X,cl,Sl){return m.round(Sl+cl*X,2)}function Ul(X,cl,Sl){return(X-Sl)/cl}var ql=function(X){return v(X)?El(X,q._m,q._b):B},gu=function(X){return Ul(X,q._m,q._b)};if(q.rangebreaks){var Bn=In==="y";ql=function(X){if(!v(X))return B;var cl=q._rangebreaks.length;if(!cl)return El(X,q._m,q._b);var Sl=Bn;q.range[0]>q.range[1]&&(Sl=!Sl);for(var st=Sl?-1:1,U=st*X,re=0,Ft=0;Ft<cl;Ft++){var ls=st*q._rangebreaks[Ft].min,_l=st*q._rangebreaks[Ft].max;if(U<ls)break;if(U>_l)re=Ft+1;else{re=U<(ls+_l)/2?Ft:Ft+1;break}}var Ll=q._B[re]||0;return isFinite(Ll)?El(X,q._m2,Ll):0},gu=function(X){var cl=q._rangebreaks.length;if(!cl)return Ul(X,q._m,q._b);for(var Sl=0,st=0;st<cl&&!(X<q._rangebreaks[st].pmin);st++)X>q._rangebreaks[st].pmax&&(Sl=st+1);return Ul(X,q._m2,q._B[Sl])}}q.c2l=q.type==="log"?_t:c,q.l2c=q.type==="log"?Pe:c,q.l2p=ql,q.p2l=gu,q.c2p=q.type==="log"?function(X,cl){return ql(_t(X,cl))}:ql,q.p2c=q.type==="log"?function(X){return Pe(gu(X))}:gu,["linear","-"].indexOf(q.type)!==-1?(q.d2r=q.r2d=q.d2c=q.r2c=q.d2l=q.r2l=y,q.c2d=q.c2r=q.l2d=q.l2r=c,q.d2p=q.r2p=function(X){return q.l2p(y(X))},q.p2d=q.p2r=gu,q.cleanPos=c):q.type==="log"?(q.d2r=q.d2l=function(X,cl){return _t(y(X),cl)},q.r2d=q.r2c=function(X){return Pe(y(X))},q.d2c=q.r2l=y,q.c2d=q.l2r=c,q.c2r=_t,q.l2d=Pe,q.d2p=function(X,cl){return q.l2p(q.d2r(X,cl))},q.p2d=function(X){return Pe(gu(X))},q.r2p=function(X){return q.l2p(y(X))},q.p2r=gu,q.cleanPos=c):q.type==="date"?(q.d2r=q.r2d=d.identity,q.d2c=q.r2c=q.d2l=q.r2l=Fn,q.c2d=q.c2r=q.l2d=q.l2r=al,q.d2p=q.r2p=function(X,cl,Sl){return q.l2p(Fn(X,0,Sl))},q.p2d=q.p2r=function(X,cl,Sl){return al(gu(X),cl,Sl)},q.cleanPos=function(X){return d.cleanDate(X,B,q.calendar)}):q.type==="category"?(q.d2c=q.d2l=ce,q.r2d=q.c2d=q.l2d=sl,q.d2r=q.d2l_noadd=fl,q.r2c=function(X){var cl=bl(X);return cl!==void 0?cl:q.fraction2r(.5)},q.l2r=q.c2r=c,q.r2l=bl,q.d2p=function(X){return q.l2p(q.r2c(X))},q.p2d=function(X){return sl(gu(X))},q.r2p=q.d2p,q.p2r=gu,q.cleanPos=function(X){return typeof X=="string"&&X!==""?X:c(X)}):q.type==="multicategory"&&(q.r2d=q.c2d=q.l2d=sl,q.d2r=q.d2l_noadd=fl,q.r2c=function(X){var cl=fl(X);return cl!==void 0?cl:q.fraction2r(.5)},q.r2c_just_indices=ul,q.l2r=q.c2r=c,q.r2l=fl,q.d2p=function(X){return q.l2p(q.r2c(X))},q.p2d=function(X){return sl(gu(X))},q.r2p=q.d2p,q.p2r=gu,q.cleanPos=function(X){return Array.isArray(X)||typeof X=="string"&&X!==""?X:c(X)},q.setupMultiCategory=function(X){var cl=q._traceIndices,Sl,st,U=q._matchGroup;if(U&&q._categories.length===0){for(var re in U)if(re!==nt){var Ft=ol[L.id2name(re)];cl=cl.concat(Ft._traceIndices)}}var ls=[[0,{}],[0,{}]],_l=[];for(Sl=0;Sl<cl.length;Sl++){var Ll=X[cl[Sl]];if(In in Ll){var zl=Ll[In],yu=Ll._length||d.minRowLength(zl);if(F(zl[0])&&F(zl[1]))for(st=0;st<yu;st++){var Vu=zl[0][st],od=zl[1][st];se(Vu)&&se(od)&&(_l.push([Vu,od]),Vu in ls[0][1]||(ls[0][1][Vu]=ls[0][0]++),od in ls[1][1]||(ls[1][1][od]=ls[1][0]++))}}}for(_l.sort(function(Ad,vd){var fd=ls[0][1],Kl=fd[Ad[0]]-fd[vd[0]];if(Kl)return Kl;var vu=ls[1][1];return vu[Ad[1]]-vu[vd[1]]}),Sl=0;Sl<_l.length;Sl++)ce(_l[Sl])}),q.fraction2r=function(X){var cl=q.r2l(q.range[0]),Sl=q.r2l(q.range[1]);return q.l2r(cl+X*(Sl-cl))},q.r2fraction=function(X){var cl=q.r2l(q.range[0]),Sl=q.r2l(q.range[1]);return(q.r2l(X)-cl)/(Sl-cl)},q.limitRange=function(X){var cl=q.minallowed,Sl=q.maxallowed;if(!(cl===void 0&&Sl===void 0)){X||(X="range");var st=d.nestedProperty(q,X).get(),U=d.simpleMap(st,q.r2l),re=U[1]<U[0];re&&U.reverse();var Ft=d.simpleMap([cl,Sl],q.r2l);if(cl!==void 0&&U[0]<Ft[0]&&(st[re?1:0]=cl),Sl!==void 0&&U[1]>Ft[1]&&(st[re?0:1]=Sl),st[0]===st[1]){var ls=q.l2r(cl),_l=q.l2r(Sl);if(cl!==void 0){var Ll=ls+1;Sl!==void 0&&(Ll=Math.min(Ll,_l)),st[re?1:0]=Ll}if(Sl!==void 0){var zl=_l+1;cl!==void 0&&(zl=Math.max(zl,ls)),st[re?0:1]=zl}}}},q.cleanRange=function(X,cl){q._cleanRange(X,cl),q.limitRange(X)},q._cleanRange=function(X,cl){cl||(cl={}),X||(X="range");var Sl=d.nestedProperty(q,X).get(),st,U;if(q.type==="date"?U=d.dfltRange(q.calendar):In==="y"?U=j.DFLTRANGEY:q._name==="realaxis"?U=[0,1]:U=cl.dfltRange||j.DFLTRANGEX,U=U.slice(),(q.rangemode==="tozero"||q.rangemode==="nonnegative")&&(U[0]=0),!Sl||Sl.length!==2){d.nestedProperty(q,X).set(U);return}var re=Sl[0]===null,Ft=Sl[1]===null;for(q.type==="date"&&!q.autorange&&(Sl[0]=d.cleanDate(Sl[0],B,q.calendar),Sl[1]=d.cleanDate(Sl[1],B,q.calendar)),st=0;st<2;st++)if(q.type==="date"){if(!d.isDateTime(Sl[st],q.calendar)){q[X]=U;break}if(q.r2l(Sl[0])===q.r2l(Sl[1])){var ls=d.constrain(q.r2l(Sl[0]),d.MIN_MS+1e3,d.MAX_MS-1e3);Sl[0]=q.l2r(ls-1e3),Sl[1]=q.l2r(ls+1e3);break}}else{if(!v(Sl[st]))if(!(re||Ft)&&v(Sl[1-st]))Sl[st]=Sl[1-st]*(st?10:.1);else{q[X]=U;break}if(Sl[st]<-R?Sl[st]=-R:Sl[st]>R&&(Sl[st]=R),Sl[0]===Sl[1]){var _l=Math.max(1,Math.abs(Sl[0]*1e-6));Sl[0]-=_l,Sl[1]+=_l}}},q.setScale=function(X){var cl=ol._size;if(q.overlaying){var Sl=L.getFromId({_fullLayout:ol},q.overlaying);q.domain=Sl.domain}var st=X&&q._r?"_r":"range",U=q.calendar;q.cleanRange(st);var re=q.r2l(q[st][0],U),Ft=q.r2l(q[st][1],U),ls=In==="y";if(ls?(q._offset=cl.t+(1-q.domain[1])*cl.h,q._length=cl.h*(q.domain[1]-q.domain[0]),q._m=q._length/(re-Ft),q._b=-q._m*Ft):(q._offset=cl.l+q.domain[0]*cl.w,q._length=cl.w*(q.domain[1]-q.domain[0]),q._m=q._length/(Ft-re),q._b=-q._m*re),q._rangebreaks=[],q._lBreaks=0,q._m2=0,q._B=[],q.rangebreaks){var _l,Ll;if(q._rangebreaks=q.locateBreaks(Math.min(re,Ft),Math.max(re,Ft)),q._rangebreaks.length){for(_l=0;_l<q._rangebreaks.length;_l++)Ll=q._rangebreaks[_l],q._lBreaks+=Math.abs(Ll.max-Ll.min);var zl=ls;re>Ft&&(zl=!zl),zl&&q._rangebreaks.reverse();var yu=zl?-1:1;for(q._m2=yu*q._length/(Math.abs(Ft-re)-q._lBreaks),q._B.push(-q._m2*(ls?Ft:re)),_l=0;_l<q._rangebreaks.length;_l++)Ll=q._rangebreaks[_l],q._B.push(q._B[q._B.length-1]-yu*q._m2*(Ll.max-Ll.min));for(_l=0;_l<q._rangebreaks.length;_l++)Ll=q._rangebreaks[_l],Ll.pmin=ql(Ll.min),Ll.pmax=ql(Ll.max)}}if(!isFinite(q._m)||!isFinite(q._b)||q._length<0)throw ol._replotting=!1,new Error("Something went wrong with axis scaling")},q.maskBreaks=function(X){var cl=q.rangebreaks||[],Sl,st,U,re,Ft;cl._cachedPatterns||(cl._cachedPatterns=cl.map(function(fd){return fd.enabled&&fd.bounds?d.simpleMap(fd.bounds,fd.pattern?y:q.d2c):null})),cl._cachedValues||(cl._cachedValues=cl.map(function(fd){return fd.enabled&&fd.values?d.simpleMap(fd.values,q.d2c).sort(d.sorterAsc):null}));for(var ls=0;ls<cl.length;ls++){var _l=cl[ls];if(_l.enabled){if(_l.bounds){var Ll=_l.pattern;switch(Sl=cl._cachedPatterns[ls],st=Sl[0],U=Sl[1],Ll){case nl:Ft=new Date(X),re=Ft.getUTCDay(),st>U&&(U+=7,re<st&&(re+=7));break;case Z:Ft=new Date(X);var zl=Ft.getUTCHours(),yu=Ft.getUTCMinutes(),Vu=Ft.getUTCSeconds(),od=Ft.getUTCMilliseconds();re=zl+(yu/60+Vu/3600+od/36e5),st>U&&(U+=24,re<st&&(re+=24));break;case"":re=X;break}if(re>=st&&re<U)return B}else for(var Ad=cl._cachedValues[ls],vd=0;vd<Ad.length;vd++)if(st=Ad[vd],U=st+_l.dvalue,X>=st&&X<U)return B}}return X},q.locateBreaks=function(X,cl){var Sl,st,U,re,Ft=[];if(!q.rangebreaks)return Ft;var ls=q.rangebreaks.slice().sort(function(vu,Rl){return vu.pattern===nl&&Rl.pattern===Z?-1:Rl.pattern===nl&&vu.pattern===Z?1:0}),_l=function(vu,Rl){if(vu=d.constrain(vu,X,cl),Rl=d.constrain(Rl,X,cl),vu!==Rl){for(var Wu=!0,cd=0;cd<Ft.length;cd++){var xd=Ft[cd];vu<xd.max&&Rl>=xd.min&&(vu<xd.min&&(xd.min=vu),Rl>xd.max&&(xd.max=Rl),Wu=!1)}Wu&&Ft.push({min:vu,max:Rl})}};for(Sl=0;Sl<ls.length;Sl++){var Ll=ls[Sl];if(Ll.enabled)if(Ll.bounds){var zl=X,yu=cl;Ll.pattern&&(zl=Math.floor(zl)),st=d.simpleMap(Ll.bounds,Ll.pattern?y:q.r2l),U=st[0],re=st[1];var Vu=new Date(zl),od,Ad;switch(Ll.pattern){case nl:Ad=P,od=((re<U?7:0)+(re-U))*D,zl+=U*D-(Vu.getUTCDay()*D+Vu.getUTCHours()*H+Vu.getUTCMinutes()*C+Vu.getUTCSeconds()*A+Vu.getUTCMilliseconds());break;case Z:Ad=D,od=((re<U?24:0)+(re-U))*H,zl+=U*H-(Vu.getUTCHours()*H+Vu.getUTCMinutes()*C+Vu.getUTCSeconds()*A+Vu.getUTCMilliseconds());break;default:zl=Math.min(st[0],st[1]),yu=Math.max(st[0],st[1]),Ad=yu-zl,od=Ad}for(var vd=zl;vd<yu;vd+=Ad)_l(vd,vd+od)}else for(var fd=d.simpleMap(Ll.values,q.d2c),Kl=0;Kl<fd.length;Kl++)U=fd[Kl],re=U+Ll.dvalue,_l(U,re)}return Ft.sort(function(vu,Rl){return vu.min-Rl.min}),Ft},q.makeCalcdata=function(X,cl,Sl){var st,U,re,Ft,ls=q.type,_l=ls==="date"&&X[cl+"calendar"];if(cl in X){if(st=X[cl],Ft=X._length||d.minRowLength(st),d.isTypedArray(st)&&(ls==="linear"||ls==="log")){if(Ft===st.length)return st;if(st.subarray)return st.subarray(0,Ft)}if(ls==="multicategory")return ll(st,Ft);for(U=new Array(Ft),re=0;re<Ft;re++)U[re]=q.d2c(st[re],0,_l,Sl)}else{var Ll=cl+"0"in X?q.d2c(X[cl+"0"],0,_l):0,zl=X["d"+cl]?Number(X["d"+cl]):1;for(st=X[{x:"y",y:"x"}[cl]],Ft=X._length||st.length,U=new Array(Ft),re=0;re<Ft;re++)U[re]=Ll+re*zl}if(q.rangebreaks)for(re=0;re<Ft;re++)U[re]=q.maskBreaks(U[re]);return U},q.isValidRange=function(X,cl){return Array.isArray(X)&&X.length===2&&(cl&&X[0]===null||v(q.r2l(X[0])))&&(cl&&X[1]===null||v(q.r2l(X[1])))},q.getAutorangeDflt=function(X,cl){var Sl=!q.isValidRange(X,"nullOk");return Sl&&cl&&cl.reverseDflt?Sl="reversed":X&&(X[0]===null&&X[1]===null?Sl=!0:X[0]===null&&X[1]!==null?Sl="min":X[0]!==null&&X[1]===null&&(Sl="max")),Sl},q.isReversed=function(){var X=q.autorange;return X==="reversed"||X==="min reversed"||X==="max reversed"},q.isPtWithinRange=function(X,cl){var Sl=q.c2l(X[In],null,cl),st=q.r2l(q.range[0]),U=q.r2l(q.range[1]);return st<U?st<=Sl&&Sl<=U:U<=Sl&&Sl<=st},q._emptyCategories=function(){q._categories=[],q._categoriesMap={}},q.clearCalc=function(){var X=q._matchGroup;if(X){var cl=null,Sl=null;for(var st in X){var U=ol[L.id2name(st)];if(U._categories){cl=U._categories,Sl=U._categoriesMap;break}}cl&&Sl?(q._categories=cl,q._categoriesMap=Sl):q._emptyCategories()}else q._emptyCategories();if(q._initialCategories)for(var re=0;re<q._initialCategories.length;re++)ce(q._initialCategories[re])},q.sortByInitialCategories=function(){var X=[];if(q._emptyCategories(),q._initialCategories)for(var cl=0;cl<q._initialCategories.length;cl++)ce(q._initialCategories[cl]);X=X.concat(q._traceIndices);var Sl=q._matchGroup;for(var st in Sl)if(nt!==st){var U=ol[L.id2name(st)];U._categories=q._categories,U._categoriesMap=q._categoriesMap,X=X.concat(U._traceIndices)}return X};var il=ol._d3locale;q.type==="date"&&(q._dateFormat=il?il.timeFormat:l,q._extraFormat=ol._extraFormat),q._separators=ol.separators,q._numFormat=il?il.numberFormat:x,delete q._minDtick,delete q._forceTick0}}),Iu=s((ot,Me)=>{var m=zn(),l=rt(),d=Et().BADNUM,x=l.isArrayOrTypedArray,v=l.isDateTime,y=l.cleanNumber,w=Math.round;Me.exports=function(O,P,D){var H=O,C=D.noMultiCategory;if(x(H)&&!H.length)return"-";if(!C&&B(H))return"multicategory";if(C&&Array.isArray(H[0])){for(var A=[],L=0;L<H.length;L++)if(x(H[L]))for(var j=0;j<H[L].length;j++)A.push(H[L][j]);H=A}if(F(H,P))return"date";var Z=D.autotypenumbers!=="strict";return R(H,Z)?"category":c(H,Z)?"linear":"-"};function S(O,P){return P?m(O):typeof O=="number"}function c(O,P){for(var D=O.length,H=0;H<D;H++)if(S(O[H],P))return!0;return!1}function F(O,P){for(var D=O.length,H=b(D),C=0,A=0,L={},j=0;j<D;j+=H){var Z=w(j),nl=O[Z],Pe=String(nl);L[Pe]||(L[Pe]=1,v(nl,P)&&C++,m(nl)&&A++)}return C>A*2}function b(O){return Math.max(1,(O-1)/1e3)}function R(O,P){for(var D=O.length,H=b(D),C=0,A=0,L={},j=0;j<D;j+=H){var Z=w(j),nl=O[Z],Pe=String(nl);if(!L[Pe]){L[Pe]=1;var se=typeof nl;se==="boolean"?A++:(P?y(nl)!==d:se==="number")?C++:se==="string"&&A++}}return A>C*2}function B(O){return x(O[0])&&x(O[1])}}),Fd=s((ot,Me)=>{var m=$(),l=zn(),d=rt(),x=Et().FP_SAFE,v=ff(),y=Qd(),w=Rh(),S=w.getFromId,c=w.isLinked;Me.exports={applyAutorangeOptions:ol,getAutoRange:F,makePadFn:R,doAutoRange:D,findExtremes:H,concatExtremes:P};function F(nt,In){var _t,Fn,al=[],sl=nt._fullLayout,ce=R(sl,In,0),ll=R(sl,In,1),ul=P(nt,In),fl=ul.min,bl=ul.max;if(fl.length===0||bl.length===0)return d.simpleMap(In.range,In.r2l);var El=fl[0].val,Ul=bl[0].val;for(_t=1;_t<fl.length&&El===Ul;_t++)El=Math.min(El,fl[_t].val);for(_t=1;_t<bl.length&&El===Ul;_t++)Ul=Math.max(Ul,bl[_t].val);var ql=In.autorange,gu=ql==="reversed"||ql==="min reversed"||ql==="max reversed";if(!gu&&In.range){var Bn=d.simpleMap(In.range,In.r2l);gu=Bn[1]<Bn[0]}In.autorange==="reversed"&&(In.autorange=!0);var il=In.rangemode,X=il==="tozero",cl=il==="nonnegative",Sl=In._length,st=Sl/10,U=0,re,Ft,ls,_l,Ll,zl;for(_t=0;_t<fl.length;_t++)for(re=fl[_t],Fn=0;Fn<bl.length;Fn++)Ft=bl[Fn],zl=Ft.val-re.val-b(In,re.val,Ft.val),zl>0&&(Ll=Sl-ce(re)-ll(Ft),Ll>st?zl/Ll>U&&(ls=re,_l=Ft,U=zl/Ll):zl/Sl>U&&(ls={val:re.val,nopad:1},_l={val:Ft.val,nopad:1},U=zl/Sl));function yu(fd,Kl){return Math.max(fd,ll(Kl))}if(El===Ul){var Vu=El-1,od=El+1;if(X)if(El===0)al=[0,1];else{var Ad=(El>0?bl:fl).reduce(yu,0),vd=El/(1-Math.min(.5,Ad/Sl));al=El>0?[0,vd]:[vd,0]}else cl?al=[Math.max(0,Vu),Math.max(1,od)]:al=[Vu,od]}else X?(ls.val>=0&&(ls={val:0,nopad:1}),_l.val<=0&&(_l={val:0,nopad:1})):cl&&(ls.val-U*ce(ls)<0&&(ls={val:0,nopad:1}),_l.val<=0&&(_l={val:1,nopad:1})),U=(_l.val-ls.val-b(In,re.val,Ft.val))/(Sl-ce(ls)-ll(_l)),al=[ls.val-U*ce(ls),_l.val+U*ll(_l)];return al=ol(al,In),In.limitRange&&In.limitRange(),gu&&al.reverse(),d.simpleMap(al,In.l2r||Number)}function b(nt,In,_t){var Fn=0;if(nt.rangebreaks)for(var al=nt.locateBreaks(In,_t),sl=0;sl<al.length;sl++){var ce=al[sl];Fn+=ce.max-ce.min}return Fn}function R(nt,In,_t){var Fn=.05*In._length,al=In._anchorAxis||{};if((In.ticklabelposition||"").indexOf("inside")!==-1||(al.ticklabelposition||"").indexOf("inside")!==-1){var sl=In.isReversed();if(!sl){var ce=d.simpleMap(In.range,In.r2l);sl=ce[1]<ce[0]}sl&&(_t=!_t)}var ll=0;return c(nt,In._id)||(ll=O(nt,In,_t)),Fn=Math.max(ll,Fn),In.constrain==="domain"&&In._inputDomain&&(Fn*=(In._inputDomain[1]-In._inputDomain[0])/(In.domain[1]-In.domain[0])),function(ul){return ul.nopad?0:ul.pad+(ul.extrapad?Fn:ll)}}var B=3;function O(nt,In,_t){var Fn=0,al=In._id.charAt(0)==="x";for(var sl in nt._plots){var ce=nt._plots[sl];if(!(In._id!==ce.xaxis._id&&In._id!==ce.yaxis._id)){var ll=(al?ce.yaxis:ce.xaxis)||{};if((ll.ticklabelposition||"").indexOf("inside")!==-1&&(!_t&&(ll.side==="left"||ll.side==="bottom")||_t&&(ll.side==="top"||ll.side==="right"))){if(ll._vals){var ul=d.deg2rad(ll._tickAngles[ll._id+"tick"]||0),fl=Math.abs(Math.cos(ul)),bl=Math.abs(Math.sin(ul));if(!ll._vals[0].bb){var El=ll._id+"tick",Ul=ll._selections[El];Ul.each(function(cl){var Sl=m.select(this),st=Sl.select(".text-math-group");st.empty()&&(cl.bb=y.bBox(Sl.node()))})}for(var ql=0;ql<ll._vals.length;ql++){var gu=ll._vals[ql],Bn=gu.bb;if(Bn){var il=2*B+Bn.width,X=2*B+Bn.height;Fn=Math.max(Fn,al?Math.max(il*fl,X*bl):Math.max(X*fl,il*bl))}}}ll.ticks==="inside"&&ll.ticklabelposition==="inside"&&(Fn+=ll.ticklen||0)}}}return Fn}function P(nt,In,_t){var Fn=In._id,al=nt._fullData,sl=nt._fullLayout,ce=[],ll=[],ul,fl,bl;function El(il,X){for(ul=0;ul<X.length;ul++){var cl=il[X[ul]],Sl=(cl._extremes||{})[Fn];if(cl.visible===!0&&Sl){for(fl=0;fl<Sl.min.length;fl++)bl=Sl.min[fl],C(ce,bl.val,bl.pad,{extrapad:bl.extrapad});for(fl=0;fl<Sl.max.length;fl++)bl=Sl.max[fl],A(ll,bl.val,bl.pad,{extrapad:bl.extrapad})}}}if(El(al,In._traceIndices),El(sl.annotations||[],In._annIndices||[]),El(sl.shapes||[],In._shapeIndices||[]),In._matchGroup&&!_t){for(var Ul in In._matchGroup)if(Ul!==In._id){var ql=S(nt,Ul),gu=P(nt,ql,!0),Bn=In._length/ql._length;for(fl=0;fl<gu.min.length;fl++)bl=gu.min[fl],C(ce,bl.val,bl.pad*Bn,{extrapad:bl.extrapad});for(fl=0;fl<gu.max.length;fl++)bl=gu.max[fl],A(ll,bl.val,bl.pad*Bn,{extrapad:bl.extrapad})}}return{min:ce,max:ll}}function D(nt,In,_t){if(In.setScale(),In.autorange){In.range=_t?_t.slice():F(nt,In),In._r=In.range.slice(),In._rl=d.simpleMap(In._r,In.r2l);var Fn=In._input,al={};al[In._attr+".range"]=In.range,al[In._attr+".autorange"]=In.autorange,v.call("_storeDirectGUIEdit",nt.layout,nt._fullLayout._preGUI,al),Fn.range=In.range.slice(),Fn.autorange=In.autorange}var sl=In._anchorAxis;if(sl&&sl.rangeslider){var ce=sl.rangeslider[In._name];ce&&ce.rangemode==="auto"&&(ce.range=F(nt,In)),sl._input.rangeslider[In._name]=d.extendFlat({},ce)}}function H(nt,In,_t){_t||(_t={}),nt._m||nt.setScale();var Fn=[],al=[],sl=In.length,ce=_t.padded||!1,ll=_t.tozero&&(nt.type==="linear"||nt.type==="-"),ul=nt.type==="log",fl=!1,bl=_t.vpadLinearized||!1,El,Ul,ql,gu,Bn,il,X,cl,Sl;function st(yu){if(Array.isArray(yu))return fl=!0,function(od){return Math.max(Number(yu[od]||0),0)};var Vu=Math.max(Number(yu||0),0);return function(){return Vu}}var U=st((nt._m>0?_t.ppadplus:_t.ppadminus)||_t.ppad||0),re=st((nt._m>0?_t.ppadminus:_t.ppadplus)||_t.ppad||0),Ft=st(_t.vpadplus||_t.vpad),ls=st(_t.vpadminus||_t.vpad);if(!fl){if(cl=1/0,Sl=-1/0,ul)for(El=0;El<sl;El++)Ul=In[El],Ul<cl&&Ul>0&&(cl=Ul),Ul>Sl&&Ul<x&&(Sl=Ul);else for(El=0;El<sl;El++)Ul=In[El],Ul<cl&&Ul>-x&&(cl=Ul),Ul>Sl&&Ul<x&&(Sl=Ul);In=[cl,Sl],sl=2}var _l={tozero:ll,extrapad:ce};function Ll(yu){ql=In[yu],l(ql)&&(il=U(yu),X=re(yu),bl?(gu=nt.c2l(ql)-ls(yu),Bn=nt.c2l(ql)+Ft(yu)):(cl=ql-ls(yu),Sl=ql+Ft(yu),ul&&cl<Sl/10&&(cl=Sl/10),gu=nt.c2l(cl),Bn=nt.c2l(Sl)),ll&&(gu=Math.min(0,gu),Bn=Math.max(0,Bn)),j(gu)&&C(Fn,gu,X,_l),j(Bn)&&A(al,Bn,il,_l))}var zl=Math.min(6,sl);for(El=0;El<zl;El++)Ll(El);for(El=sl-1;El>=zl;El--)Ll(El);return{min:Fn,max:al,opts:_t}}function C(nt,In,_t,Fn){L(nt,In,_t,Fn,Z)}function A(nt,In,_t,Fn){L(nt,In,_t,Fn,nl)}function L(nt,In,_t,Fn,al){for(var sl=Fn.tozero,ce=Fn.extrapad,ll=!0,ul=0;ul<nt.length&&ll;ul++){var fl=nt[ul];if(al(fl.val,In)&&fl.pad>=_t&&(fl.extrapad||!ce)){ll=!1;break}else al(In,fl.val)&&fl.pad<=_t&&(ce||!fl.extrapad)&&(nt.splice(ul,1),ul--)}if(ll){var bl=sl&&In===0;nt.push({val:In,pad:bl?0:_t,extrapad:bl?!1:ce})}}function j(nt){return l(nt)&&Math.abs(nt)<x}function Z(nt,In){return nt<=In}function nl(nt,In){return nt>=In}function Pe(nt,In){var _t=In.autorangeoptions;return _t&&_t.minallowed!==void 0&&q(In,_t.minallowed,_t.maxallowed)?_t.minallowed:_t&&_t.clipmin!==void 0&&q(In,_t.clipmin,_t.clipmax)?Math.max(nt,In.d2l(_t.clipmin)):nt}function se(nt,In){var _t=In.autorangeoptions;return _t&&_t.maxallowed!==void 0&&q(In,_t.minallowed,_t.maxallowed)?_t.maxallowed:_t&&_t.clipmax!==void 0&&q(In,_t.clipmin,_t.clipmax)?Math.min(nt,In.d2l(_t.clipmax)):nt}function q(nt,In,_t){return In!==void 0&&_t!==void 0?(In=nt.d2l(In),_t=nt.d2l(_t),In<_t):!0}function ol(nt,In){if(!In||!In.autorangeoptions)return nt;var _t=nt[0],Fn=nt[1],al=In.autorangeoptions.include;if(al!==void 0){var sl=In.d2l(_t),ce=In.d2l(Fn);d.isArrayOrTypedArray(al)||(al=[al]);for(var ll=0;ll<al.length;ll++){var ul=In.d2l(al[ll]);sl>=ul&&(sl=ul,_t=ul),ce<=ul&&(ce=ul,Fn=ul)}}return _t=Pe(_t,In),Fn=se(Fn,In),[_t,Fn]}}),Ud=s((ot,Me)=>{var m=$(),l=zn(),d=Vf(),x=ff(),v=rt(),y=v.strTranslate,w=Kg(),S=ih(),c=oh(),F=Qd(),b=dd(),R=yl(),B=Et(),O=B.ONEMAXYEAR,P=B.ONEAVGYEAR,D=B.ONEMINYEAR,H=B.ONEMAXQUARTER,C=B.ONEAVGQUARTER,A=B.ONEMINQUARTER,L=B.ONEMAXMONTH,j=B.ONEAVGMONTH,Z=B.ONEMINMONTH,nl=B.ONEWEEK,Pe=B.ONEDAY,se=Pe/2,q=B.ONEHOUR,ol=B.ONEMIN,nt=B.ONESEC,In=B.ONEMILLI,_t=B.ONEMICROSEC,Fn=B.MINUS_SIGN,al=B.BADNUM,sl={K:"zeroline"},ce={K:"gridline",L:"path"},ll={K:"minor-gridline",L:"path"},ul={K:"tick",L:"path"},fl={K:"tick",L:"text"},bl={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},El=$f(),Ul=El.MID_SHIFT,ql=El.CAP_SHIFT,gu=El.LINE_SPACING,Bn=El.OPPOSITE_SIDE,il=3,X=Me.exports={};X.setConvert=Hl();var cl=Iu(),Sl=Rh(),st=Sl.idSort,U=Sl.isLinked;X.id2name=Sl.id2name,X.name2id=Sl.name2id,X.cleanId=Sl.cleanId,X.list=Sl.list,X.listIds=Sl.listIds,X.getFromId=Sl.getFromId,X.getFromTrace=Sl.getFromTrace;var re=Fd();X.getAutoRange=re.getAutoRange,X.findExtremes=re.findExtremes;var Ft=1e-4;function ls(wl){var pl=(wl[1]-wl[0])*Ft;return[wl[0]-pl,wl[1]+pl]}X.coerceRef=function(wl,pl,Yu,Ju,hd,$u){var Xu=Ju.charAt(Ju.length-1),md=Yu._fullLayout._subplots[Xu+"axis"],ld=Ju+"ref",Ld={};return hd||(hd=md[0]||(typeof $u=="string"?$u:$u[0])),$u||($u=hd),md=md.concat(md.map(function(zd){return zd+" domain"})),Ld[ld]={valType:"enumerated",values:md.concat($u?typeof $u=="string"?[$u]:$u:[]),dflt:hd},v.coerce(wl,pl,Ld,ld)},X.getRefType=function(wl){return wl===void 0?wl:wl==="paper"?"paper":wl==="pixel"?"pixel":/( domain)$/.test(wl)?"domain":"range"},X.coercePosition=function(wl,pl,Yu,Ju,hd,$u){var Xu,md,ld=X.getRefType(Ju);if(ld!=="range")Xu=v.ensureNumber,md=Yu(hd,$u);else{var Ld=X.getFromId(pl,Ju);$u=Ld.fraction2r($u),md=Yu(hd,$u),Xu=Ld.cleanPos}wl[hd]=Xu(md)},X.cleanPosition=function(wl,pl,Yu){var Ju=Yu==="paper"||Yu==="pixel"?v.ensureNumber:X.getFromId(pl,Yu).cleanPos;return Ju(wl)},X.redrawComponents=function(wl,pl){pl=pl||X.listIds(wl);var Yu=wl._fullLayout;function Ju(hd,$u,Xu,md){for(var ld=x.getComponentMethod(hd,$u),Ld={},zd=0;zd<pl.length;zd++)for(var gh=Yu[X.id2name(pl[zd])],ep=gh[Xu],Bh=0;Bh<ep.length;Bh++){var up=ep[Bh];if(!Ld[up]&&(ld(wl,up),Ld[up]=1,md))return}}Ju("annotations","drawOne","_annIndices"),Ju("shapes","drawOne","_shapeIndices"),Ju("images","draw","_imgIndices",!0),Ju("selections","drawOne","_selectionIndices")};var _l=X.getDataConversions=function(wl,pl,Yu,Ju){var hd,$u=Yu==="x"||Yu==="y"||Yu==="z"?Yu:Ju;if(v.isArrayOrTypedArray($u)){if(hd={type:cl(Ju,void 0,{autotypenumbers:wl._fullLayout.autotypenumbers}),_categories:[]},X.setConvert(hd),hd.type==="category")for(var Xu=0;Xu<Ju.length;Xu++)hd.d2c(Ju[Xu])}else hd=X.getFromTrace(wl,pl,$u);return hd?{d2c:hd.d2c,c2d:hd.c2d}:$u==="ids"?{d2c:zl,c2d:zl}:{d2c:Ll,c2d:Ll}};function Ll(wl){return+wl}function zl(wl){return String(wl)}X.getDataToCoordFunc=function(wl,pl,Yu,Ju){return _l(wl,pl,Yu,Ju).d2c},X.counterLetter=function(wl){var pl=wl.charAt(0);if(pl==="x")return"y";if(pl==="y")return"x"},X.minDtick=function(wl,pl,Yu,Ju){["log","category","multicategory"].indexOf(wl.type)!==-1||!Ju?wl._minDtick=0:wl._minDtick===void 0?(wl._minDtick=pl,wl._forceTick0=Yu):wl._minDtick&&((wl._minDtick/pl+1e-6)%1<2e-6&&((Yu-wl._forceTick0)/pl%1+1.000001)%1<2e-6?(wl._minDtick=pl,wl._forceTick0=Yu):((pl/wl._minDtick+1e-6)%1>2e-6||((Yu-wl._forceTick0)/wl._minDtick%1+1.000001)%1>2e-6)&&(wl._minDtick=0))},X.saveRangeInitial=function(wl,pl){for(var Yu=X.list(wl,"",!0),Ju=!1,hd=0;hd<Yu.length;hd++){var $u=Yu[hd],Xu=$u._rangeInitial0===void 0&&$u._rangeInitial1===void 0,md=Xu||$u.range[0]!==$u._rangeInitial0||$u.range[1]!==$u._rangeInitial1,ld=$u.autorange;(Xu&&ld!==!0||pl&&md)&&($u._rangeInitial0=ld==="min"||ld==="max reversed"?void 0:$u.range[0],$u._rangeInitial1=ld==="max"||ld==="min reversed"?void 0:$u.range[1],$u._autorangeInitial=ld,Ju=!0)}return Ju},X.saveShowSpikeInitial=function(wl,pl){for(var Yu=X.list(wl,"",!0),Ju=!1,hd="on",$u=0;$u<Yu.length;$u++){var Xu=Yu[$u],md=Xu._showSpikeInitial===void 0,ld=md||Xu.showspikes!==Xu._showspikes;(md||pl&&ld)&&(Xu._showSpikeInitial=Xu.showspikes,Ju=!0),hd==="on"&&!Xu.showspikes&&(hd="off")}return wl._fullLayout._cartesianSpikesEnabled=hd,Ju},X.autoBin=function(wl,pl,Yu,Ju,hd,$u){var Xu=v.aggNums(Math.min,null,wl),md=v.aggNums(Math.max,null,wl);if(pl.type==="category"||pl.type==="multicategory")return{start:Xu-.5,end:md+.5,size:Math.max(1,Math.round($u)||1),_dataSpan:md-Xu};hd||(hd=pl.calendar);var ld;if(pl.type==="log"?ld={type:"linear",range:[Xu,md]}:ld={type:pl.type,range:v.simpleMap([Xu,md],pl.c2r,0,hd),calendar:hd},X.setConvert(ld),$u=$u&&R.dtick($u,ld.type),$u)ld.dtick=$u,ld.tick0=R.tick0(void 0,ld.type,hd);else{var Ld;if(Yu)Ld=(md-Xu)/Yu;else{var zd=v.distinctVals(wl),gh=Math.pow(10,Math.floor(Math.log(zd.minDiff)/Math.LN10)),ep=gh*v.roundUp(zd.minDiff/gh,[.9,1.9,4.9,9.9],!0);Ld=Math.max(ep,2*v.stdev(wl)/Math.pow(wl.length,Ju?.25:.4)),l(Ld)||(Ld=1)}X.autoTicks(ld,Ld)}var Bh=ld.dtick,up=X.tickIncrement(X.tickFirst(ld),Bh,"reverse",hd),Uh,hp;if(typeof Bh=="number")up=yu(up,wl,ld,Xu,md),hp=1+Math.floor((md-up)/Bh),Uh=up+hp*Bh;else for(ld.dtick.charAt(0)==="M"&&(up=Vu(up,wl,Bh,Xu,hd)),Uh=up,hp=0;Uh<=md;)Uh=X.tickIncrement(Uh,Bh,!1,hd),hp++;return{start:pl.c2r(up,0,hd),end:pl.c2r(Uh,0,hd),size:Bh,_dataSpan:md-Xu}};function yu(wl,pl,Yu,Ju,hd){var $u=0,Xu=0,md=0,ld=0;function Ld(Bh){return(1+(Bh-wl)*100/Yu.dtick)%100<2}for(var zd=0;zd<pl.length;zd++)pl[zd]%1===0?md++:l(pl[zd])||ld++,Ld(pl[zd])&&$u++,Ld(pl[zd]+Yu.dtick/2)&&Xu++;var gh=pl.length-ld;if(md===gh&&Yu.type!=="date")Yu.dtick<1?wl=Ju-.5*Yu.dtick:(wl-=.5,wl+Yu.dtick<Ju&&(wl+=Yu.dtick));else if(Xu<gh*.1&&($u>gh*.3||Ld(Ju)||Ld(hd))){var ep=Yu.dtick/2;wl+=wl+ep<Ju?ep:-ep}return wl}function Vu(wl,pl,Yu,Ju,hd){var $u=v.findExactDates(pl,hd),Xu=.8;if($u.exactDays>Xu){var md=Number(Yu.substr(1));$u.exactYears>Xu&&md%12===0?wl=X.tickIncrement(wl,"M6","reverse")+Pe*1.5:$u.exactMonths>Xu?wl=X.tickIncrement(wl,"M1","reverse")+Pe*15.5:wl-=se;var ld=X.tickIncrement(wl,Yu);if(ld<=Ju)return ld}return wl}X.prepMinorTicks=function(wl,pl,Yu){if(!pl.minor.dtick){delete wl.dtick;var Ju=pl.dtick&&l(pl._tmin),hd;if(Ju){var $u=X.tickIncrement(pl._tmin,pl.dtick,!0);hd=[pl._tmin,$u*.99+pl._tmin*.01]}else{var Xu=v.simpleMap(pl.range,pl.r2l);hd=[Xu[0],.8*Xu[0]+.2*Xu[1]]}if(wl.range=v.simpleMap(hd,pl.l2r),wl._isMinor=!0,X.prepTicks(wl,Yu),Ju){var md=l(pl.dtick),ld=l(wl.dtick),Ld=md?pl.dtick:+pl.dtick.substring(1),zd=ld?wl.dtick:+wl.dtick.substring(1);md&&ld?od(Ld,zd)?Ld===2*nl&&zd===2*Pe&&(wl.dtick=nl):Ld===2*nl&&zd===3*Pe?wl.dtick=nl:Ld===nl&&!(pl._input.minor||{}).nticks?wl.dtick=Pe:Ad(Ld/zd,2.5)?wl.dtick=Ld/2:wl.dtick=Ld:String(pl.dtick).charAt(0)==="M"?ld?wl.dtick="M1":od(Ld,zd)?Ld>=12&&zd===2&&(wl.dtick="M3"):wl.dtick=pl.dtick:String(wl.dtick).charAt(0)==="L"?String(pl.dtick).charAt(0)==="L"?od(Ld,zd)||(wl.dtick=Ad(Ld/zd,2.5)?pl.dtick/2:pl.dtick):wl.dtick="D1":wl.dtick==="D2"&&+pl.dtick>1&&(wl.dtick=1)}wl.range=pl.range}pl.minor._tick0Init===void 0&&(wl.tick0=pl.tick0)};function od(wl,pl){return Math.abs((wl/pl+.5)%1-.5)<.001}function Ad(wl,pl){return Math.abs(wl/pl-1)<.001}X.prepTicks=function(wl,pl){var Yu=v.simpleMap(wl.range,wl.r2l,void 0,void 0,pl);if(wl.tickmode==="auto"||!wl.dtick){var Ju=wl.nticks,hd;Ju||(wl.type==="category"||wl.type==="multicategory"?(hd=wl.tickfont?v.bigFont(wl.tickfont.size||12):15,Ju=wl._length/hd):(hd=wl._id.charAt(0)==="y"?40:80,Ju=v.constrain(wl._length/hd,4,9)+1),wl._name==="radialaxis"&&(Ju*=2)),wl.minor&&wl.minor.tickmode!=="array"||wl.tickmode==="array"&&(Ju*=100),wl._roughDTick=Math.abs(Yu[1]-Yu[0])/Ju,X.autoTicks(wl,wl._roughDTick),wl._minDtick>0&&wl.dtick<wl._minDtick*2&&(wl.dtick=wl._minDtick,wl.tick0=wl.l2r(wl._forceTick0))}wl.ticklabelmode==="period"&&fd(wl),wl.tick0||(wl.tick0=wl.type==="date"?"2000-01-01":0),wl.type==="date"&&wl.dtick<.1&&(wl.dtick=.1),Dd(wl)};function vd(wl){return+wl.substring(1)}function fd(wl){var pl;function Yu(){return!(l(wl.dtick)||wl.dtick.charAt(0)!=="M")}var Ju=Yu(),hd=X.getTickFormat(wl);if(hd){var $u=wl._dtickInit!==wl.dtick;/%[fLQsSMX]/.test(hd)||(/%[HI]/.test(hd)?(pl=q,$u&&!Ju&&wl.dtick<q&&(wl.dtick=q)):/%p/.test(hd)?(pl=se,$u&&!Ju&&wl.dtick<se&&(wl.dtick=se)):/%[Aadejuwx]/.test(hd)?(pl=Pe,$u&&!Ju&&wl.dtick<Pe&&(wl.dtick=Pe)):/%[UVW]/.test(hd)?(pl=nl,$u&&!Ju&&wl.dtick<nl&&(wl.dtick=nl)):/%[Bbm]/.test(hd)?(pl=j,$u&&(Ju?vd(wl.dtick)<1:wl.dtick<Z)&&(wl.dtick="M1")):/%[q]/.test(hd)?(pl=C,$u&&(Ju?vd(wl.dtick)<3:wl.dtick<A)&&(wl.dtick="M3")):/%[Yy]/.test(hd)&&(pl=P,$u&&(Ju?vd(wl.dtick)<12:wl.dtick<D)&&(wl.dtick="M12")))}Ju=Yu(),Ju&&wl.tick0===wl._dowTick0&&(wl.tick0=wl._rawTick0),wl._definedDelta=pl}function Kl(wl,pl,Yu){for(var Ju=0;Ju<wl.length;Ju++){var hd=wl[Ju].value,$u=Ju,Xu=Ju+1;Ju<wl.length-1?($u=Ju,Xu=Ju+1):Ju>0?($u=Ju-1,Xu=Ju):($u=Ju,Xu=Ju);var md=wl[$u].value,ld=wl[Xu].value,Ld=Math.abs(ld-md),zd=Yu||Ld,gh=0;zd>=D?Ld>=D&&Ld<=O?gh=Ld:gh=P:Yu===C&&zd>=A?Ld>=A&&Ld<=H?gh=Ld:gh=C:zd>=Z?Ld>=Z&&Ld<=L?gh=Ld:gh=j:Yu===nl&&zd>=nl?gh=nl:zd>=Pe?gh=Pe:Yu===se&&zd>=se?gh=se:Yu===q&&zd>=q&&(gh=q);var ep;gh>=Ld&&(gh=Ld,ep=!0);var Bh=hd+gh;if(pl.rangebreaks&&gh>0){for(var up=84,Uh=0,hp=0;hp<up;hp++){var Ep=(hp+.5)/up;pl.maskBreaks(hd*(1-Ep)+Ep*Bh)!==al&&Uh++}gh*=Uh/up,gh||(wl[Ju].drop=!0),ep&&Ld>nl&&(gh=Ld)}(gh>0||Ju===0)&&(wl[Ju].periodX=hd+gh/2)}}X.calcTicks=function(wl,pl){for(var Yu=wl.type,Ju=wl.calendar,hd=wl.ticklabelstep,$u=wl.ticklabelmode==="period",Xu=wl.range[0]>wl.range[1],md=!wl.ticklabelindex||v.isArrayOrTypedArray(wl.ticklabelindex)?wl.ticklabelindex:[wl.ticklabelindex],ld=v.simpleMap(wl.range,wl.r2l,void 0,void 0,pl),Ld=ld[1]<ld[0],zd=Math.min(ld[0],ld[1]),gh=Math.max(ld[0],ld[1]),ep=Math.max(1e3,wl._length||0),Bh=[],up=[],Uh=[],hp=[],Ep=[],Uf=wl.minor&&(wl.minor.ticks||wl.minor.showgrid),qp=1;qp>=(Uf?0:1);qp--){var Ag=!qp;qp?(wl._dtickInit=wl.dtick,wl._tick0Init=wl.tick0):(wl.minor._dtickInit=wl.minor.dtick,wl.minor._tick0Init=wl.minor.tick0);var bf=qp?wl:v.extendFlat({},wl,wl.minor);if(Ag?X.prepMinorTicks(bf,wl,pl):X.prepTicks(bf,pl),bf.tickmode==="array"){qp?(Uh=[],Bh=Wu(wl,!Ag)):(hp=[],up=Wu(wl,!Ag));continue}if(bf.tickmode==="sync"){Uh=[],Bh=Rl(wl);continue}var Ig=ls(ld),yg=Ig[0],pm=Ig[1],Mg=l(bf.dtick),Tf=Yu==="log"&&!(Mg||bf.dtick.charAt(0)==="L"),xm=X.tickFirst(bf,pl);if(qp){if(wl._tmin=xm,xm<yg!==Ld)break;(Yu==="category"||Yu==="multicategory")&&(pm=Ld?Math.max(-.5,pm):Math.min(wl._categories.length-.5,pm))}var jg=null,Wf=xm,wm;if(qp){var im;Mg?im=wl.dtick:Yu==="date"?typeof wl.dtick=="string"&&wl.dtick.charAt(0)==="M"&&(im=j*wl.dtick.substring(1)):im=wl._roughDTick,wm=Math.round((wl.r2l(Wf)-wl.r2l(wl.tick0))/im)-1}var fm=bf.dtick;for(bf.rangebreaks&&bf._tick0Init!==bf.tick0&&(Wf=ng(Wf,wl),Ld||(Wf=X.tickIncrement(Wf,fm,!Ld,Ju))),qp&&$u&&(Wf=X.tickIncrement(Wf,fm,!Ld,Ju),wm--);Ld?Wf>=pm:Wf<=pm;Wf=X.tickIncrement(Wf,fm,Ld,Ju)){if(qp&&wm++,bf.rangebreaks&&!Ld){if(Wf<yg)continue;if(bf.maskBreaks(Wf)===al&&ng(Wf,bf)>=gh)break}if(Uh.length>ep||Wf===jg)break;jg=Wf;var Rm={value:Wf};qp?(Tf&&Wf!==(Wf|0)&&(Rm.simpleLabel=!0),hd>1&&wm%hd&&(Rm.skipLabel=!0),Uh.push(Rm)):(Rm.minor=!0,hp.push(Rm))}}if(!hp||hp.length<2)md=!1;else{var n0=(hp[1].value-hp[0].value)*(Xu?-1:1);_g(n0,wl.tickformat)||(md=!1)}if(!md)Ep=Uh;else{var ug=Uh.concat(hp);$u&&Uh.length&&(ug=ug.slice(1)),ug=ug.sort(function(Qg,Sm){return Qg.value-Sm.value}).filter(function(Qg,Sm,t0){return Sm===0||Qg.value!==t0[Sm-1].value});var nm=ug.map(function(Qg,Sm){return Qg.minor===void 0&&!Qg.skipLabel?Sm:null}).filter(function(Qg){return Qg!==null});nm.forEach(function(Qg){md.map(function(Sm){var t0=Qg+Sm;t0>=0&&t0<ug.length&&v.pushUnique(Ep,ug[t0])})})}if(Uf){var Og=wl.minor.ticks==="inside"&&wl.ticks==="outside"||wl.minor.ticks==="outside"&&wl.ticks==="inside";if(!Og){for(var Xg=Uh.map(function(Qg){return Qg.value}),Ug=[],km=0;km<hp.length;km++){var Am=hp[km],um=Am.value;if(Xg.indexOf(um)===-1){for(var o0=!1,bm=0;!o0&&bm<Uh.length;bm++)1e7+Uh[bm].value===1e7+um&&(o0=!0);o0||Ug.push(Am)}}hp=Ug}}$u&&Kl(Ep,wl,wl._definedDelta);var Hg;if(wl.rangebreaks){var P0=wl._id.charAt(0)==="y",gm=1;wl.tickmode==="auto"&&(gm=wl.tickfont?wl.tickfont.size:12);var g0=NaN;for(Hg=Uh.length-1;Hg>-1;Hg--){if(Uh[Hg].drop){Uh.splice(Hg,1);continue}Uh[Hg].value=ng(Uh[Hg].value,wl);var a0=wl.c2p(Uh[Hg].value);(P0?g0>a0-gm:g0<a0+gm)?Uh.splice(Ld?Hg+1:Hg,1):g0=a0}}rg(wl)&&Math.abs(ld[1]-ld[0])===360&&Uh.pop(),wl._tmax=(Uh[Uh.length-1]||{}).value,wl._prevDateHead="",wl._inCalcTicks=!0;var Nm,y0=function(Qg){Qg.text="",wl._prevDateHead=Nm};Uh=Uh.concat(hp);function Xm(Qg,Sm){var t0=X.tickText(Qg,Sm.value,!1,Sm.simpleLabel),m0=Sm.periodX;return m0!==void 0&&(t0.periodX=m0,(m0>gh||m0<zd)&&(m0>gh&&(t0.periodX=gh),m0<zd&&(t0.periodX=zd),y0(t0))),t0}var Ym;for(Hg=0;Hg<Uh.length;Hg++){var x0=Uh[Hg].minor,E0=Uh[Hg].value;x0?(md&&Ep.indexOf(Uh[Hg])!==-1?Ym=Xm(wl,Uh[Hg]):Ym={x:E0},Ym.minor=!0,up.push(Ym)):(Nm=wl._prevDateHead,Ym=Xm(wl,Uh[Hg]),(Uh[Hg].skipLabel||md&&Ep.indexOf(Uh[Hg])===-1)&&y0(Ym),Bh.push(Ym))}return Bh=Bh.concat(up),wl._inCalcTicks=!1,$u&&Bh.length&&(Bh[0].noTick=!0),Bh};function vu(wl,pl){return wl.rangebreaks&&(pl=pl.filter(function(Yu){return wl.maskBreaks(Yu.x)!==al})),pl}function Rl(wl){var pl=wl._mainAxis,Yu=[];if(pl._vals){for(var Ju=0;Ju<pl._vals.length;Ju++)if(!pl._vals[Ju].noTick){var hd=pl.l2p(pl._vals[Ju].x),$u=wl.p2l(hd),Xu=X.tickText(wl,$u);pl._vals[Ju].minor&&(Xu.minor=!0,Xu.text=""),Yu.push(Xu)}}return Yu=vu(wl,Yu),Yu}function Wu(wl,pl){var Yu=v.simpleMap(wl.range,wl.r2l),Ju=ls(Yu),hd=Math.min(Ju[0],Ju[1]),$u=Math.max(Ju[0],Ju[1]),Xu=wl.type==="category"?wl.d2l_noadd:wl.d2l;wl.type==="log"&&String(wl.dtick).charAt(0)!=="L"&&(wl.dtick="L"+Math.pow(10,Math.floor(Math.min(wl.range[0],wl.range[1]))-1));for(var md=[],ld=0;ld<=1;ld++)if(!(pl!==void 0&&(pl&&ld||pl===!1&&!ld))&&!(ld&&!wl.minor)){var Ld=ld?wl.minor.tickvals:wl.tickvals,zd=ld?[]:wl.ticktext;if(Ld){v.isArrayOrTypedArray(zd)||(zd=[]);for(var gh=0;gh<Ld.length;gh++){var ep=Xu(Ld[gh]);if(ep>hd&&ep<$u){var Bh=X.tickText(wl,ep,!1,String(zd[gh]));ld&&(Bh.minor=!0,Bh.text=""),md.push(Bh)}}}}return md=vu(wl,md),md}var cd=[2,5,10],xd=[1,2,3,6,12],Td=[1,2,5,10,15,30],Pd=[1,2,3,7,14],Hd=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],$d=[-.301,0,.301,.699,1],Wd=[15,30,45,90,180];function mh(wl,pl,Yu){return pl*v.roundUp(wl/pl,Yu)}X.autoTicks=function(wl,pl,Yu){var Ju;function hd(gh){return Math.pow(gh,Math.floor(Math.log(pl)/Math.LN10))}if(wl.type==="date"){wl.tick0=v.dateTick0(wl.calendar,0);var $u=2*pl;if($u>P)pl/=P,Ju=hd(10),wl.dtick="M"+12*mh(pl,Ju,cd);else if($u>j)pl/=j,wl.dtick="M"+mh(pl,1,xd);else if($u>Pe){if(wl.dtick=mh(pl,Pe,wl._hasDayOfWeekBreaks?[1,2,7,14]:Pd),!Yu){var Xu=X.getTickFormat(wl),md=wl.ticklabelmode==="period";md&&(wl._rawTick0=wl.tick0),/%[uVW]/.test(Xu)?wl.tick0=v.dateTick0(wl.calendar,2):wl.tick0=v.dateTick0(wl.calendar,1),md&&(wl._dowTick0=wl.tick0)}}else $u>q?wl.dtick=mh(pl,q,xd):$u>ol?wl.dtick=mh(pl,ol,Td):$u>nt?wl.dtick=mh(pl,nt,Td):(Ju=hd(10),wl.dtick=mh(pl,Ju,cd))}else if(wl.type==="log"){wl.tick0=0;var ld=v.simpleMap(wl.range,wl.r2l);if(wl._isMinor&&(pl*=1.5),pl>.7)wl.dtick=Math.ceil(pl);else if(Math.abs(ld[1]-ld[0])<1){var Ld=1.5*Math.abs((ld[1]-ld[0])/pl);pl=Math.abs(Math.pow(10,ld[1])-Math.pow(10,ld[0]))/Ld,Ju=hd(10),wl.dtick="L"+mh(pl,Ju,cd)}else wl.dtick=pl>.3?"D2":"D1"}else wl.type==="category"||wl.type==="multicategory"?(wl.tick0=0,wl.dtick=Math.ceil(Math.max(pl,1))):rg(wl)?(wl.tick0=0,Ju=1,wl.dtick=mh(pl,Ju,Wd)):(wl.tick0=0,Ju=hd(10),wl.dtick=mh(pl,Ju,cd));if(wl.dtick===0&&(wl.dtick=1),!l(wl.dtick)&&typeof wl.dtick!="string"){var zd=wl.dtick;throw wl.dtick=1,"ax.dtick error: "+String(zd)}};function Dd(wl){var pl=wl.dtick;if(wl._tickexponent=0,!l(pl)&&typeof pl!="string"&&(pl=1),(wl.type==="category"||wl.type==="multicategory")&&(wl._tickround=null),wl.type==="date"){var Yu=wl.r2l(wl.tick0),Ju=wl.l2r(Yu).replace(/(^-|i)/g,""),hd=Ju.length;if(String(pl).charAt(0)==="M")hd>10||Ju.substr(5)!=="01-01"?wl._tickround="d":wl._tickround=+pl.substr(1)%12===0?"y":"m";else if(pl>=Pe&&hd<=10||pl>=Pe*15)wl._tickround="d";else if(pl>=ol&&hd<=16||pl>=q)wl._tickround="M";else if(pl>=nt&&hd<=19||pl>=ol)wl._tickround="S";else{var $u=wl.l2r(Yu+pl).replace(/^-/,"").length;wl._tickround=Math.max(hd,$u)-20,wl._tickround<0&&(wl._tickround=4)}}else if(l(pl)||pl.charAt(0)==="L"){var Xu=wl.range.map(wl.r2d||Number);l(pl)||(pl=Number(pl.substr(1))),wl._tickround=2-Math.floor(Math.log(pl)/Math.LN10+.01);var md=Math.max(Math.abs(Xu[0]),Math.abs(Xu[1])),ld=Math.floor(Math.log(md)/Math.LN10+.01),Ld=wl.minexponent===void 0?3:wl.minexponent;Math.abs(ld)>Ld&&(Nu(wl.exponentformat)&&wl.exponentformat!=="SI extended"&&!ed(ld)||Nu(wl.exponentformat)&&wl.exponentformat==="SI extended"&&!sd(ld)?wl._tickexponent=3*Math.round((ld-1)/3):wl._tickexponent=ld)}else wl._tickround=null}X.tickIncrement=function(wl,pl,Yu,Ju){var hd=Yu?-1:1;if(l(pl))return v.increment(wl,hd*pl);var $u=pl.charAt(0),Xu=hd*Number(pl.substr(1));if($u==="M")return v.incrementMonth(wl,Xu,Ju);if($u==="L")return Math.log(Math.pow(10,wl)+Xu)/Math.LN10;if($u==="D"){var md=pl==="D2"?$d:Hd,ld=wl+hd*.01,Ld=v.roundUp(v.mod(ld,1),md,Yu);return Math.floor(ld)+Math.log(m.round(Math.pow(10,Ld),1))/Math.LN10}throw"unrecognized dtick "+String(pl)},X.tickFirst=function(wl,pl){var Yu=wl.r2l||Number,Ju=v.simpleMap(wl.range,Yu,void 0,void 0,pl),hd=Ju[1]<Ju[0],$u=hd?Math.floor:Math.ceil,Xu=ls(Ju)[0],md=wl.dtick,ld=Yu(wl.tick0);if(l(md)){var Ld=$u((Xu-ld)/md)*md+ld;return(wl.type==="category"||wl.type==="multicategory")&&(Ld=v.constrain(Ld,0,wl._categories.length-1)),Ld}var zd=md.charAt(0),gh=Number(md.substr(1));if(zd==="M"){for(var ep=0,Bh=ld,up,Uh,hp;ep<10;){if(up=X.tickIncrement(Bh,md,hd,wl.calendar),(up-Xu)*(Bh-Xu)<=0)return hd?Math.min(Bh,up):Math.max(Bh,up);Uh=(Xu-(Bh+up)/2)/(up-Bh),hp=zd+(Math.abs(Math.round(Uh))||1)*gh,Bh=X.tickIncrement(Bh,hp,Uh<0?!hd:hd,wl.calendar),ep++}return v.error("tickFirst did not converge",wl),Bh}else{if(zd==="L")return Math.log($u((Math.pow(10,Xu)-ld)/gh)*gh+ld)/Math.LN10;if(zd==="D"){var Ep=md==="D2"?$d:Hd,Uf=v.roundUp(v.mod(Xu,1),Ep,hd);return Math.floor(Xu)+Math.log(m.round(Math.pow(10,Uf),1))/Math.LN10}else throw"unrecognized dtick "+String(md)}},X.tickText=function(wl,pl,Yu,Ju){var hd=bh(wl,pl),$u=wl.tickmode==="array",Xu=Yu||$u,md=wl.type,ld=md==="category"?wl.d2l_noadd:wl.d2l,Ld,zd=function(hp){var Ep=wl.l2p(hp);return Ep>=0&&Ep<=wl._length?hp:null};if($u&&v.isArrayOrTypedArray(wl.ticktext)){var gh=v.simpleMap(wl.range,wl.r2l),ep=(Math.abs(gh[1]-gh[0])-(wl._lBreaks||0))/1e4;for(Ld=0;Ld<wl.ticktext.length&&!(Math.abs(pl-ld(wl.tickvals[Ld]))<ep);Ld++);if(Ld<wl.ticktext.length)return hd.text=String(wl.ticktext[Ld]),hd.xbnd=[zd(hd.x-.5),zd(hd.x+wl.dtick-.5)],hd}function Bh(hp){if(hp===void 0)return!0;if(Yu)return hp==="none";var Ep={first:wl._tmin,last:wl._tmax}[hp];return hp!=="all"&&pl!==Ep}var up=Yu?"never":wl.exponentformat!=="none"&&Bh(wl.showexponent)?"hide":"";if(md==="date"?Dh(wl,hd,Yu,Xu):md==="log"?vh(wl,hd,Yu,Xu,up):md==="category"?Gh(wl,hd):md==="multicategory"?Ql(wl,hd,Yu):rg(wl)?gl(wl,hd,Yu,Xu,up):Ku(wl,hd,Yu,Xu,up),Ju||(wl.tickprefix&&!Bh(wl.showtickprefix)&&(hd.text=wl.tickprefix+hd.text),wl.ticksuffix&&!Bh(wl.showticksuffix)&&(hd.text+=wl.ticksuffix)),wl.labelalias&&wl.labelalias.hasOwnProperty(hd.text)){var Uh=wl.labelalias[hd.text];typeof Uh=="string"&&(hd.text=Uh)}return(wl.tickson==="boundaries"||wl.showdividers)&&(hd.xbnd=[zd(hd.x-.5),zd(hd.x+wl.dtick-.5)]),hd},X.hoverLabelText=function(wl,pl,Yu){Yu&&(wl=v.extendFlat({},wl,{hoverformat:Yu}));var Ju=v.isArrayOrTypedArray(pl)?pl[0]:pl,hd=v.isArrayOrTypedArray(pl)?pl[1]:void 0;if(hd!==void 0&&hd!==Ju)return X.hoverLabelText(wl,Ju,Yu)+" - "+X.hoverLabelText(wl,hd,Yu);var $u=wl.type==="log"&&Ju<=0,Xu=X.tickText(wl,wl.c2l($u?-Ju:Ju),"hover").text;return $u?Ju===0?"0":Fn+Xu:Xu};function bh(wl,pl,Yu){var Ju=wl.tickfont||{};return{x:pl,dx:0,dy:0,text:Yu||"",fontSize:Ju.size,font:Ju.family,fontWeight:Ju.weight,fontStyle:Ju.style,fontVariant:Ju.variant,fontTextcase:Ju.textcase,fontLineposition:Ju.lineposition,fontShadow:Ju.shadow,fontColor:Ju.color}}function Dh(wl,pl,Yu,Ju){var hd=wl._tickround,$u=Yu&&wl.hoverformat||X.getTickFormat(wl);Ju=!$u&&Ju,Ju&&(l(hd)?hd=4:hd={y:"m",m:"d",d:"M",M:"S",S:4}[hd]);var Xu=v.formatDate(pl.x,$u,hd,wl._dateFormat,wl.calendar,wl._extraFormat),md,ld=Xu.indexOf(`
`);if(ld!==-1&&(md=Xu.substr(ld+1),Xu=Xu.substr(0,ld)),Ju&&(md!==void 0&&(Xu==="00:00:00"||Xu==="00:00")?(Xu=md,md=""):Xu.length===8&&(Xu=Xu.replace(/:00$/,""))),md)if(Yu)hd==="d"?Xu+=", "+md:Xu=md+(Xu?", "+Xu:"");else if(!wl._inCalcTicks||wl._prevDateHead!==md)wl._prevDateHead=md,Xu+="<br>"+md;else{var Ld=gf(wl),zd=wl._trueSide||wl.side;(!Ld&&zd==="top"||Ld&&zd==="bottom")&&(Xu+="<br> ")}pl.text=Xu}function vh(wl,pl,Yu,Ju,hd){var $u=wl.dtick,Xu=pl.x,md=wl.tickformat,ld=typeof $u=="string"&&$u.charAt(0);if(hd==="never"&&(hd=""),Ju&&ld!=="L"&&($u="L3",ld="L"),md||ld==="L")pl.text=yd(Math.pow(10,Xu),wl,hd,Ju);else if(l($u)||ld==="D"&&(wl.minorloglabels==="complete"||v.mod(Xu+.01,1)<.1)){wl.minorloglabels==="complete"&&!(v.mod(Xu+.01,1)<.1)&&(pl.fontSize*=.75);var Ld=Math.pow(10,Xu).toExponential(0),zd=Ld.split("e"),gh=+zd[1],ep=Math.abs(gh),Bh=wl.exponentformat;Bh==="power"||Nu(Bh)&&Bh!=="SI extended"&&ed(gh)||Nu(Bh)&&Bh==="SI extended"&&sd(gh)?(pl.text=zd[0],ep>0&&(pl.text+="x10"),pl.text==="1x10"&&(pl.text="10"),gh!==0&&gh!==1&&(pl.text+="<sup>"+(gh>0?"":Fn)+ep+"</sup>"),pl.fontSize*=1.25):(Bh==="e"||Bh==="E")&&ep>2?pl.text=zd[0]+Bh+(gh>0?"+":Fn)+ep:(pl.text=yd(Math.pow(10,Xu),wl,"","fakehover"),$u==="D1"&&wl._id.charAt(0)==="y"&&(pl.dy-=pl.fontSize/6))}else if(ld==="D")pl.text=wl.minorloglabels==="none"?"":String(Math.round(Math.pow(10,v.mod(Xu,1)))),pl.fontSize*=.75;else throw"unrecognized dtick "+String($u);if(wl.dtick==="D1"){var up=String(pl.text).charAt(0);(up==="0"||up==="1")&&(wl._id.charAt(0)==="y"?pl.dx-=pl.fontSize/4:(pl.dy+=pl.fontSize/2,pl.dx+=(wl.range[1]>wl.range[0]?1:-1)*pl.fontSize*(Xu<0?.5:.25)))}}function Gh(wl,pl){var Yu=wl._categories[Math.round(pl.x)];Yu===void 0&&(Yu=""),pl.text=String(Yu)}function Ql(wl,pl,Yu){var Ju=Math.round(pl.x),hd=wl._categories[Ju]||[],$u=hd[1]===void 0?"":String(hd[1]),Xu=hd[0]===void 0?"":String(hd[0]);Yu?pl.text=Xu+" - "+$u:(pl.text=$u,pl.text2=Xu)}function Ku(wl,pl,Yu,Ju,hd){hd==="never"?hd="":wl.showexponent==="all"&&Math.abs(pl.x/wl.dtick)<1e-6&&(hd="hide"),pl.text=yd(pl.x,wl,hd,Ju)}function gl(wl,pl,Yu,Ju,hd){if(wl.thetaunit==="radians"&&!Yu){var $u=pl.x/180;if($u===0)pl.text="0";else{var Xu=Dl($u);if(Xu[1]>=100)pl.text=yd(v.deg2rad(pl.x),wl,hd,Ju);else{var md=pl.x<0;Xu[1]===1?Xu[0]===1?pl.text="":pl.text=Xu[0]+"":pl.text=["<sup>",Xu[0],"</sup>","","<sub>",Xu[1],"</sub>",""].join(""),md&&(pl.text=Fn+pl.text)}}}else pl.text=yd(pl.x,wl,hd,Ju)}function Dl(wl){function pl(md,ld){return Math.abs(md-ld)<=1e-6}function Yu(md,ld){return pl(ld,0)?md:Yu(ld,md%ld)}function Ju(md){for(var ld=1;!pl(Math.round(md*ld)/ld,md);)ld*=10;return ld}var hd=Ju(wl),$u=wl*hd,Xu=Math.abs(Yu($u,hd));return[Math.round($u/Xu),Math.round(hd/Xu)]}var Vl=["f","p","n","","m","","k","M","G","T"],Mu=["q","r","y","z","a",...Vl,"P","E","Z","Y","R","Q"],Nu=wl=>["SI","SI extended","B"].includes(wl);function ed(wl){return wl>14||wl<-15}function sd(wl){return wl>32||wl<-30}function Sd(wl,pl){return Nu(pl)?!!(pl==="SI extended"&&sd(wl)||pl!=="SI extended"&&ed(wl)):!1}function yd(wl,pl,Yu,Ju){var hd=wl<0,$u=pl._tickround,Xu=Yu||pl.exponentformat||"B",md=pl._tickexponent,ld=X.getTickFormat(pl),Ld=pl.separatethousands;if(Ju){var zd={exponentformat:Xu,minexponent:pl.minexponent,dtick:pl.showexponent==="none"?pl.dtick:l(wl)&&Math.abs(wl)||1,range:pl.showexponent==="none"?pl.range.map(pl.r2d):[0,wl||1]};Dd(zd),$u=(Number(zd._tickround)||0)+4,md=zd._tickexponent,pl.hoverformat&&(ld=pl.hoverformat)}if(ld)return pl._numFormat(ld)(wl).replace(/-/g,Fn);var gh=Math.pow(10,-$u)/2;if(Xu==="none"&&(md=0),wl=Math.abs(wl),wl<gh)wl="0",hd=!1;else{if(wl+=gh,md&&(wl*=Math.pow(10,-md),$u+=md),$u===0)wl=String(Math.floor(wl));else if($u<0){wl=String(Math.round(wl)),wl=wl.substr(0,wl.length+$u);for(var ep=$u;ep<0;ep++)wl+="0"}else{wl=String(wl);var Bh=wl.indexOf(".")+1;Bh&&(wl=wl.substr(0,Bh+$u).replace(/\.?0+$/,""))}wl=v.numSeparate(wl,pl._separators,Ld)}if(md&&Xu!=="hide"){Sd(md,Xu)&&(Xu="power");var up;md<0?up=Fn+-md:Xu!=="power"?up="+"+md:up=String(md),Xu==="e"||Xu==="E"?wl+=Xu+up:Xu==="power"?wl+="10<sup>"+up+"</sup>":Xu==="B"&&md===9?wl+="B":Nu(Xu)&&(wl+=Xu==="SI extended"?Mu[md/3+10]:Vl[md/3+5])}return hd?Fn+wl:wl}X.getTickFormat=function(wl){var pl;function Yu(ld){return typeof ld!="string"?ld:Number(ld.replace("M",""))*j}function Ju(ld,Ld){var zd=["L","D"];if(typeof ld==typeof Ld){if(typeof ld=="number")return ld-Ld;var gh=zd.indexOf(ld.charAt(0)),ep=zd.indexOf(Ld.charAt(0));return gh===ep?Number(ld.replace(/(L|D)/g,""))-Number(Ld.replace(/(L|D)/g,"")):gh-ep}else return typeof ld=="number"?1:-1}function hd(ld,Ld,zd){var gh=zd||function(up){return up},ep=Ld[0],Bh=Ld[1];return(!ep&&typeof ep!="number"||gh(ep)<=gh(ld))&&(!Bh&&typeof Bh!="number"||gh(Bh)>=gh(ld))}function $u(ld,Ld){var zd=Ld[0]===null,gh=Ld[1]===null,ep=Ju(ld,Ld[0])>=0,Bh=Ju(ld,Ld[1])<=0;return(zd||ep)&&(gh||Bh)}var Xu,md;if(wl.tickformatstops&&wl.tickformatstops.length>0)switch(wl.type){case"date":case"linear":{for(pl=0;pl<wl.tickformatstops.length;pl++)if(md=wl.tickformatstops[pl],md.enabled&&hd(wl.dtick,md.dtickrange,Yu)){Xu=md;break}break}case"log":{for(pl=0;pl<wl.tickformatstops.length;pl++)if(md=wl.tickformatstops[pl],md.enabled&&$u(wl.dtick,md.dtickrange)){Xu=md;break}break}}return Xu?Xu.value:wl.tickformat},X.getSubplots=function(wl,pl){var Yu=wl._fullLayout._subplots,Ju=Yu.cartesian.concat(Yu.gl2d||[]),hd=pl?X.findSubplotsWithAxis(Ju,pl):Ju;return hd.sort(function($u,Xu){var md=$u.substr(1).split("y"),ld=Xu.substr(1).split("y");return md[0]===ld[0]?+md[1]-+ld[1]:+md[0]-+ld[0]}),hd},X.findSubplotsWithAxis=function(wl,pl){for(var Yu=new RegExp(pl._id.charAt(0)==="x"?"^"+pl._id+"y":pl._id+"$"),Ju=[],hd=0;hd<wl.length;hd++){var $u=wl[hd];Yu.test($u)&&Ju.push($u)}return Ju},X.makeClipPaths=function(wl){var pl=wl._fullLayout;if(!pl._hasOnlyLargeSploms){var Yu={_offset:0,_length:pl.width,_id:""},Ju={_offset:0,_length:pl.height,_id:""},hd=X.list(wl,"x",!0),$u=X.list(wl,"y",!0),Xu=[],md,ld;for(md=0;md<hd.length;md++)for(Xu.push({x:hd[md],y:Ju}),ld=0;ld<$u.length;ld++)md===0&&Xu.push({x:Yu,y:$u[ld]}),Xu.push({x:hd[md],y:$u[ld]});var Ld=pl._clips.selectAll(".axesclip").data(Xu,function(zd){return zd.x._id+zd.y._id});Ld.enter().append("clipPath").classed("axesclip",!0).attr("id",function(zd){return"clip"+pl._uid+zd.x._id+zd.y._id}).append("rect"),Ld.exit().remove(),Ld.each(function(zd){m.select(this).select("rect").attr({x:zd.x._offset||0,y:zd.y._offset||0,width:zd.x._length||1,height:zd.y._length||1})})}},X.draw=function(wl,pl,Yu){var Ju=wl._fullLayout;pl==="redraw"&&Ju._paper.selectAll("g.subplot").each(function(ld){var Ld=ld[0],zd=Ju._plots[Ld];if(zd){var gh=zd.xaxis,ep=zd.yaxis;zd.xaxislayer.selectAll("."+gh._id+"tick").remove(),zd.yaxislayer.selectAll("."+ep._id+"tick").remove(),zd.xaxislayer.selectAll("."+gh._id+"tick2").remove(),zd.yaxislayer.selectAll("."+ep._id+"tick2").remove(),zd.xaxislayer.selectAll("."+gh._id+"divider").remove(),zd.yaxislayer.selectAll("."+ep._id+"divider").remove(),zd.minorGridlayer&&zd.minorGridlayer.selectAll("path").remove(),zd.gridlayer&&zd.gridlayer.selectAll("path").remove(),zd.zerolinelayer&&zd.zerolinelayer.selectAll("path").remove(),zd.zerolinelayerAbove&&zd.zerolinelayerAbove.selectAll("path").remove(),Ju._infolayer.select(".g-"+gh._id+"title").remove(),Ju._infolayer.select(".g-"+ep._id+"title").remove()}});var hd=!pl||pl==="redraw"?X.listIds(wl):pl,$u=X.list(wl),Xu=$u.filter(function(ld){return ld.autoshift}).map(function(ld){return ld.overlaying});hd.map(function(ld){var Ld=X.getFromId(wl,ld);if(Ld.tickmode==="sync"&&Ld.overlaying){var zd=hd.findIndex(function(gh){return gh===Ld.overlaying});zd>=0&&hd.unshift(hd.splice(zd,1).shift())}});var md={false:{left:0,right:0}};return v.syncOrAsync(hd.map(function(ld){return function(){if(ld){var Ld=X.getFromId(wl,ld);Yu||(Yu={}),Yu.axShifts=md,Yu.overlayingShiftedAx=Xu;var zd=X.drawOne(wl,Ld,Yu);return Ld._shiftPusher&&yf(Ld,Ld._fullDepth||0,md,!0),Ld._r=Ld.range.slice(),Ld._rl=v.simpleMap(Ld._r,Ld.r2l),zd}}}))},X.drawOne=function(wl,pl,Yu){Yu=Yu||{};var Ju=Yu.axShifts||{},hd=Yu.overlayingShiftedAx||[],$u,Xu,md;pl.setScale();var ld=wl._fullLayout,Ld=pl._id,zd=Ld.charAt(0),gh=X.counterLetter(Ld),ep=ld._plots[pl._mainSubplot],Bh=pl.zerolinelayer==="above traces";if(!ep)return;if(pl._shiftPusher=pl.autoshift||hd.indexOf(pl._id)!==-1||hd.indexOf(pl.overlaying)!==-1,pl._shiftPusher&pl.anchor==="free"){var up=pl.linewidth/2||0;pl.ticks==="inside"&&(up+=pl.ticklen),yf(pl,up,Ju,!0),yf(pl,pl.shift||0,Ju,!1)}(Yu.skipTitle!==!0||pl._shift===void 0)&&(pl._shift=cp(pl,Ju));var Uh=ep[zd+"axislayer"],hp=pl._mainLinePosition,Ep=hp+=pl._shift,Uf=pl._mainMirrorPosition,qp=pl._vals=X.calcTicks(pl),Ag=[pl.mirror,Ep,Uf].join("_");for($u=0;$u<qp.length;$u++)qp[$u].axInfo=Ag;pl._selections={},pl._tickAngles&&(pl._prevTickAngles=pl._tickAngles),pl._tickAngles={},pl._depth=null;var bf={};function Ig(Qg){var Sm=Ld+(Qg||"tick");return bf[Sm]||(bf[Sm]=Hh(pl,Sm,Ep)),bf[Sm]}if(pl.visible){var yg=X.makeTransTickFn(pl),pm=X.makeTransTickLabelFn(pl),Mg,Tf,xm=pl.ticks==="inside",jg=pl.ticks==="outside";if(pl.tickson==="boundaries"){var Wf=Kd(pl,qp);Tf=X.clipEnds(pl,Wf),Mg=xm?Tf:Wf}else Tf=X.clipEnds(pl,qp),Mg=xm&&pl.ticklabelmode!=="period"?Tf:qp;var wm=pl._gridVals=Tf,im=th(pl,qp);if(!ld._hasOnlyLargeSploms){var fm=pl._subplotsWith,Rm={};for($u=0;$u<fm.length;$u++){Xu=fm[$u],md=ld._plots[Xu];var n0=md[gh+"axis"],ug=n0._mainAxis._id;if(!Rm[ug]){Rm[ug]=1;var nm=zd==="x"?"M0,"+n0._offset+"v"+n0._length:"M"+n0._offset+",0h"+n0._length;X.drawGrid(wl,pl,{vals:wm,counterAxis:n0,layer:md.gridlayer.select("."+Ld),minorLayer:md.minorGridlayer.select("."+Ld),path:nm,transFn:yg}),X.drawZeroLine(wl,pl,{counterAxis:n0,layer:Bh?md.zerolinelayerAbove:md.zerolinelayer,path:nm,transFn:yg})}}}var Og,Xg=X.getTickSigns(pl),Ug=X.getTickSigns(pl,"minor");if(pl.ticks||pl.minor&&pl.minor.ticks){var km=X.makeTickPath(pl,Ep,Xg[2]),Am=X.makeTickPath(pl,Ep,Ug[2],{minor:!0}),um,o0,bm,Hg;if(pl._anchorAxis&&pl.mirror&&pl.mirror!==!0?(um=X.makeTickPath(pl,Uf,Xg[3]),o0=X.makeTickPath(pl,Uf,Ug[3],{minor:!0}),bm=km+um,Hg=Am+o0):(um="",o0="",bm=km,Hg=Am),pl.showdividers&&jg&&pl.tickson==="boundaries"){var P0={};for($u=0;$u<im.length;$u++)P0[im[$u].x]=1;Og=function(Qg){return P0[Qg.x]?um:bm}}else Og=function(Qg){return Qg.minor?Hg:bm}}if(X.drawTicks(wl,pl,{vals:Mg,layer:Uh,path:Og,transFn:yg}),pl.mirror==="allticks"){var gm=Object.keys(pl._linepositions||{});for($u=0;$u<gm.length;$u++){Xu=gm[$u],md=ld._plots[Xu];var g0=pl._linepositions[Xu]||[],a0=g0[0],Nm=g0[1],y0=g0[2],Xm=X.makeTickPath(pl,a0,y0?Xg[0]:Ug[0],{minor:y0})+X.makeTickPath(pl,Nm,y0?Xg[1]:Ug[1],{minor:y0});X.drawTicks(wl,pl,{vals:Mg,layer:md[zd+"axislayer"],path:Xm,transFn:yg})}}var Ym=[];if(Ym.push(function(){return X.drawLabels(wl,pl,{vals:qp,layer:Uh,plotinfo:md,transFn:pm,labelFns:X.makeLabelFns(pl,Ep)})}),pl.type==="multicategory"){var x0={x:2,y:10}[zd];Ym.push(function(){var Qg={x:"height",y:"width"}[zd],Sm=Ig()[Qg]+x0+(pl._tickAngles[Ld+"tick"]?pl.tickfont.size*gu:0);return X.drawLabels(wl,pl,{vals:Jd(pl,qp),layer:Uh,cls:Ld+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:yg,labelFns:X.makeLabelFns(pl,Ep+Sm*Xg[4])})}),Ym.push(function(){return pl._depth=Xg[4]*(Ig("tick2")[pl.side]-Ep),Up(wl,pl,{vals:im,layer:Uh,path:X.makeTickPath(pl,Ep,Xg[4],{len:pl._depth}),transFn:yg})})}else pl.title.hasOwnProperty("standoff")&&Ym.push(function(){pl._depth=Xg[4]*(Ig()[pl.side]-Ep)});var E0=x.getComponentMethod("rangeslider","isVisible")(pl);return!Yu.skipTitle&&!(E0&&pl.side==="bottom")&&Ym.push(function(){return zh(wl,pl)}),Ym.push(function(){var Qg=pl.side.charAt(0),Sm=Bn[pl.side].charAt(0),t0=X.getPxPosition(wl,pl),m0=jg?pl.ticklen:0,Km,om,w0,rv;(pl.automargin||E0||pl._shiftPusher)&&(pl.type==="multicategory"?Km=Ig("tick2"):(Km=Ig(),zd==="x"&&Qg==="b"&&(pl._depth=Math.max(Km.width>0?Km.bottom-t0:0,m0))));var Cv=0,Zm=0;if(pl._shiftPusher&&(Cv=Math.max(m0,Km.height>0?Qg==="l"?t0-Km.left:Km.right-t0:0),pl.title.text!==ld._dfltTitle[zd]&&(Zm=(pl._titleStandoff||0)+(pl._titleScoot||0),Qg==="l"&&(Zm+=fp(pl))),pl._fullDepth=Math.max(Cv,Zm)),pl.automargin){om={x:0,y:0,r:0,l:0,t:0,b:0};var bv=[0,1],wy=typeof pl._shift=="number"?pl._shift:0;if(zd==="x"){if(Qg==="b"?om[Qg]=pl._depth:(om[Qg]=pl._depth=Math.max(Km.width>0?t0-Km.top:0,m0),bv.reverse()),Km.width>0){var e2=Km.right-(pl._offset+pl._length);e2>0&&(om.xr=1,om.r=e2);var Cy=pl._offset-Km.left;Cy>0&&(om.xl=0,om.l=Cy)}}else if(Qg==="l"?(pl._depth=Math.max(Km.height>0?t0-Km.left:0,m0),om[Qg]=pl._depth-wy):(pl._depth=Math.max(Km.height>0?Km.right-t0:0,m0),om[Qg]=pl._depth+wy,bv.reverse()),Km.height>0){var C1=Km.bottom-(pl._offset+pl._length);C1>0&&(om.yb=0,om.b=C1);var qv=pl._offset-Km.top;qv>0&&(om.yt=1,om.t=qv)}om[gh]=pl.anchor==="free"?pl.position:pl._anchorAxis.domain[bv[0]],pl.title.text!==ld._dfltTitle[zd]&&(om[Qg]+=fp(pl)+(pl.title.standoff||0)),pl.mirror&&pl.anchor!=="free"&&(w0={x:0,y:0,r:0,l:0,t:0,b:0},w0[Sm]=pl.linewidth,pl.mirror&&pl.mirror!==!0&&(w0[Sm]+=m0),pl.mirror===!0||pl.mirror==="ticks"?w0[gh]=pl._anchorAxis.domain[bv[1]]:(pl.mirror==="all"||pl.mirror==="allticks")&&(w0[gh]=[pl._counterDomainMin,pl._counterDomainMax][bv[1]]))}E0&&(rv=x.getComponentMethod("rangeslider","autoMarginOpts")(wl,pl)),typeof pl.automargin=="string"&&(bd(om,pl.automargin),bd(w0,pl.automargin)),d.autoMargin(wl,Sp(pl),om),d.autoMargin(wl,mp(pl),w0),d.autoMargin(wl,af(pl),rv)}),v.syncOrAsync(Ym)}};function bd(wl,pl){if(wl){var Yu=Object.keys(bl).reduce(function(Ju,hd){return pl.indexOf(hd)!==-1&&bl[hd].forEach(function($u){Ju[$u]=1}),Ju},{});Object.keys(wl).forEach(function(Ju){Yu[Ju]||(Ju.length===1?wl[Ju]=0:delete wl[Ju])})}}function Kd(wl,pl){var Yu=[],Ju,hd=function($u,Xu){var md=$u.xbnd[Xu];md!==null&&Yu.push(v.extendFlat({},$u,{x:md}))};if(pl.length){for(Ju=0;Ju<pl.length;Ju++)hd(pl[Ju],0);hd(pl[Ju-1],1)}return Yu}function Jd(wl,pl){for(var Yu=[],Ju={},hd=0;hd<pl.length;hd++){var $u=pl[hd];Ju[$u.text2]?Ju[$u.text2].push($u.x):Ju[$u.text2]=[$u.x]}for(var Xu in Ju)Yu.push(bh(wl,v.interp(Ju[Xu],.5),Xu));return Yu}function th(wl,pl){var Yu=[],Ju,hd,$u=pl.length&&pl[pl.length-1].x<pl[0].x,Xu=function(ld,Ld){var zd=ld.xbnd[Ld];zd!==null&&Yu.push(v.extendFlat({},ld,{x:zd}))};if(wl.showdividers&&pl.length){for(Ju=0;Ju<pl.length;Ju++){var md=pl[Ju];md.text2!==hd&&Xu(md,$u?1:0),hd=md.text2}Xu(pl[Ju-1],$u?0:1)}return Yu}function Hh(wl,pl,Yu){var Ju,hd,$u,Xu;if(wl._selections[pl].size())Ju=1/0,hd=-1/0,$u=1/0,Xu=-1/0,wl._selections[pl].each(function(){var ld=wp(this);if(ld.node().style.display!=="none"){var Ld=F.bBox(ld.node().parentNode);Ju=Math.min(Ju,Ld.top),hd=Math.max(hd,Ld.bottom),$u=Math.min($u,Ld.left),Xu=Math.max(Xu,Ld.right)}});else{var md=X.makeLabelFns(wl,Yu);Ju=hd=md.yFn({dx:0,dy:0,fontSize:0}),$u=Xu=md.xFn({dx:0,dy:0,fontSize:0})}return{top:Ju,bottom:hd,left:$u,right:Xu,height:hd-Ju,width:Xu-$u}}X.getTickSigns=function(wl,pl){var Yu=wl._id.charAt(0),Ju={x:"top",y:"right"}[Yu],hd=wl.side===Ju?1:-1,$u=[-1,1,hd,-hd],Xu=pl?(wl.minor||{}).ticks:wl.ticks;return Xu!=="inside"==(Yu==="x")&&($u=$u.map(function(md){return-md})),wl.side&&$u.push({l:-1,t:-1,r:1,b:1}[wl.side.charAt(0)]),$u},X.makeTransTickFn=function(wl){return wl._id.charAt(0)==="x"?function(pl){return y(wl._offset+wl.l2p(pl.x),0)}:function(pl){return y(0,wl._offset+wl.l2p(pl.x))}},X.makeTransTickLabelFn=function(wl){var pl=xp(wl),Yu=wl.ticklabelshift||0,Ju=wl.ticklabelstandoff||0,hd=pl[0],$u=pl[1],Xu=wl.range[0]>wl.range[1],md=wl.ticklabelposition&&wl.ticklabelposition.indexOf("inside")!==-1,ld=!md;if(Yu){var Ld=Xu?-1:1;Yu=Yu*Ld}if(Ju){var zd=wl.side,gh=md&&(zd==="top"||zd==="left")||ld&&(zd==="bottom"||zd==="right")?1:-1;Ju=Ju*gh}return wl._id.charAt(0)==="x"?function(ep){return y(hd+wl._offset+wl.l2p(sp(ep))+Yu,$u+Ju)}:function(ep){return y($u+Ju,hd+wl._offset+wl.l2p(sp(ep))+Yu)}};function sp(wl){return wl.periodX!==void 0?wl.periodX:wl.x}function xp(wl){var pl=wl.ticklabelposition||"",Yu=wl.tickson||"",Ju=function(up){return pl.indexOf(up)!==-1},hd=Ju("top"),$u=Ju("left"),Xu=Ju("right"),md=Ju("bottom"),ld=Ju("inside"),Ld=Yu!=="boundaries"&&(md||$u||hd||Xu);if(!Ld&&!ld)return[0,0];var zd=wl.side,gh=Ld?(wl.tickwidth||0)/2:0,ep=il,Bh=wl.tickfont?wl.tickfont.size:12;return(md||hd)&&(gh+=Bh*ql,ep+=(wl.linewidth||0)/2),($u||Xu)&&(gh+=(wl.linewidth||0)/2,ep+=il),ld&&zd==="top"&&(ep-=Bh*(1-ql)),($u||hd)&&(gh=-gh),(zd==="bottom"||zd==="right")&&(ep=-ep),[Ld?gh:0,ld?ep:0]}X.makeTickPath=function(wl,pl,Yu,Ju){Ju||(Ju={});var hd=Ju.minor;if(hd&&!wl.minor)return"";var $u=Ju.len!==void 0?Ju.len:hd?wl.minor.ticklen:wl.ticklen,Xu=wl._id.charAt(0),md=(wl.linewidth||1)/2;return Xu==="x"?"M0,"+(pl+md*Yu)+"v"+$u*Yu:"M"+(pl+md*Yu)+",0h"+$u*Yu},X.makeLabelFns=function(wl,pl,Yu){var Ju=wl.ticklabelposition||"",hd=wl.tickson||"",$u=function(Wf){return Ju.indexOf(Wf)!==-1},Xu=$u("top"),md=$u("left"),ld=$u("right"),Ld=$u("bottom"),zd=hd!=="boundaries"&&(Ld||md||Xu||ld),gh=$u("inside"),ep=Ju==="inside"&&wl.ticks==="inside"||!gh&&wl.ticks==="outside"&&hd!=="boundaries",Bh=0,up=0,Uh=ep?wl.ticklen:0;if(gh?Uh*=-1:zd&&(Uh=0),ep&&(Bh+=Uh,Yu)){var hp=v.deg2rad(Yu);Bh=Uh*Math.cos(hp)+1,up=Uh*Math.sin(hp)}wl.showticklabels&&(ep||wl.showline)&&(Bh+=.2*wl.tickfont.size),Bh+=(wl.linewidth||1)/2*(gh?-1:1);var Ep={labelStandoff:Bh,labelShift:up},Uf,qp,Ag,bf,Ig=0,yg=wl.side,pm=wl._id.charAt(0),Mg=wl.tickangle,Tf;if(pm==="x")Tf=!gh&&yg==="bottom"||gh&&yg==="top",bf=Tf?1:-1,gh&&(bf*=-1),Uf=up*bf,qp=pl+Bh*bf,Ag=Tf?1:-.2,Math.abs(Mg)===90&&(gh?Ag+=Ul:Mg===-90&&yg==="bottom"?Ag=ql:Mg===90&&yg==="top"?Ag=Ul:Ag=.5,Ig=Ul/2*(Mg/90)),Ep.xFn=function(Wf){return Wf.dx+Uf+Ig*Wf.fontSize},Ep.yFn=function(Wf){return Wf.dy+qp+Wf.fontSize*Ag},Ep.anchorFn=function(Wf,wm){if(zd){if(md)return"end";if(ld)return"start"}return!l(wm)||wm===0||wm===180?"middle":wm*bf<0!==gh?"end":"start"},Ep.heightFn=function(Wf,wm,im){return wm<-60||wm>60?-.5*im:wl.side==="top"!==gh?-im:0};else if(pm==="y"){if(Tf=!gh&&yg==="left"||gh&&yg==="right",bf=Tf?1:-1,gh&&(bf*=-1),Uf=Bh,qp=up*bf,Ag=0,!gh&&Math.abs(Mg)===90&&(Mg===-90&&yg==="left"||Mg===90&&yg==="right"?Ag=ql:Ag=.5),gh){var xm=l(Mg)?+Mg:0;if(xm!==0){var jg=v.deg2rad(xm);Ig=Math.abs(Math.sin(jg))*ql*bf,Ag=0}}Ep.xFn=function(Wf){return Wf.dx+pl-(Uf+Wf.fontSize*Ag)*bf+Ig*Wf.fontSize},Ep.yFn=function(Wf){return Wf.dy+qp+Wf.fontSize*Ul},Ep.anchorFn=function(Wf,wm){return l(wm)&&Math.abs(wm)===90?"middle":Tf?"end":"start"},Ep.heightFn=function(Wf,wm,im){return wl.side==="right"&&(wm*=-1),wm<-30?-im:wm<30?-.5*im:0}}return Ep};function Pp(wl){return[wl.text,wl.x,wl.axInfo,wl.font,wl.fontSize,wl.fontColor].join("_")}X.drawTicks=function(wl,pl,Yu){Yu=Yu||{};var Ju=pl._id+"tick",hd=[].concat(pl.minor&&pl.minor.ticks?Yu.vals.filter(function(Xu){return Xu.minor&&!Xu.noTick}):[]).concat(pl.ticks?Yu.vals.filter(function(Xu){return!Xu.minor&&!Xu.noTick}):[]),$u=Yu.layer.selectAll("path."+Ju).data(hd,Pp);$u.exit().remove(),$u.enter().append("path").classed(Ju,1).classed("ticks",1).classed("crisp",Yu.crisp!==!1).each(function(Xu){return c.stroke(m.select(this),Xu.minor?pl.minor.tickcolor:pl.tickcolor)}).style("stroke-width",function(Xu){return F.crispRound(wl,Xu.minor?pl.minor.tickwidth:pl.tickwidth,1)+"px"}).attr("d",Yu.path).style("display",null),Rf(pl,[ul]),$u.attr("transform",Yu.transFn)},X.drawGrid=function(wl,pl,Yu){if(Yu=Yu||{},pl.tickmode!=="sync"){var Ju=pl._id+"grid",hd=pl.minor&&pl.minor.showgrid,$u=hd?Yu.vals.filter(function(Ep){return Ep.minor}):[],Xu=pl.showgrid?Yu.vals.filter(function(Ep){return!Ep.minor}):[],md=Yu.counterAxis;if(md&&X.shouldShowZeroLine(wl,pl,md))for(var ld=pl.tickmode==="array",Ld=0;Ld<Xu.length;Ld++){var zd=Xu[Ld].x;if(ld?!zd:Math.abs(zd)<pl.dtick/100)if(Xu=Xu.slice(0,Ld).concat(Xu.slice(Ld+1)),ld)Ld--;else break}pl._gw=F.crispRound(wl,pl.gridwidth,1);for(var gh=hd?F.crispRound(wl,pl.minor.gridwidth,1):0,ep=Yu.layer,Bh=Yu.minorLayer,up=1;up>=0;up--){var Uh=up?ep:Bh;if(Uh){var hp=Uh.selectAll("path."+Ju).data(up?Xu:$u,Pp);hp.exit().remove(),hp.enter().append("path").classed(Ju,1).classed("crisp",Yu.crisp!==!1),hp.attr("transform",Yu.transFn).attr("d",Yu.path).each(function(Ep){return c.stroke(m.select(this),Ep.minor?pl.minor.gridcolor:pl.gridcolor||"#ddd")}).style("stroke-dasharray",function(Ep){return F.dashStyle(Ep.minor?pl.minor.griddash:pl.griddash,Ep.minor?pl.minor.gridwidth:pl.gridwidth)}).style("stroke-width",function(Ep){return(Ep.minor?gh:pl._gw)+"px"}).style("display",null),typeof Yu.path=="function"&&hp.attr("d",Yu.path)}}Rf(pl,[ce,ll])}},X.drawZeroLine=function(wl,pl,Yu){Yu=Yu||Yu;var Ju=pl._id+"zl",hd=X.shouldShowZeroLine(wl,pl,Yu.counterAxis),$u=Yu.layer.selectAll("path."+Ju).data(hd?[{x:0,id:pl._id}]:[]);$u.exit().remove(),$u.enter().append("path").classed(Ju,1).classed("zl",1).classed("crisp",Yu.crisp!==!1).each(function(){Yu.layer.selectAll("path").sort(function(Xu,md){return st(Xu.id,md.id)})}),$u.attr("transform",Yu.transFn).attr("d",Yu.path).call(c.stroke,pl.zerolinecolor||c.defaultLine).style("stroke-width",F.crispRound(wl,pl.zerolinewidth,pl._gw||1)+"px").style("display",null),Rf(pl,[sl])},X.drawLabels=function(wl,pl,Yu){Yu=Yu||{};var Ju=wl._fullLayout,hd=pl._id,$u=pl.zerolinelayer==="above traces",Xu=Yu.cls||hd+"tick",md=Yu.vals.filter(function(ug){return ug.text}),ld=Yu.labelFns,Ld=Yu.secondary?0:pl.tickangle,zd=(pl._prevTickAngles||{})[Xu],gh=Yu.layer.selectAll("g."+Xu).data(pl.showticklabels?md:[],Pp),ep=[];gh.enter().append("g").classed(Xu,1).append("text").attr("text-anchor","middle").each(function(ug){var nm=m.select(this),Og=wl._promises.length;nm.call(w.positionText,ld.xFn(ug),ld.yFn(ug)).call(F.font,{family:ug.font,size:ug.fontSize,color:ug.fontColor,weight:ug.fontWeight,style:ug.fontStyle,variant:ug.fontVariant,textcase:ug.fontTextcase,lineposition:ug.fontLineposition,shadow:ug.fontShadow}).text(ug.text).call(w.convertToTspans,wl),wl._promises[Og]?ep.push(wl._promises.pop().then(function(){Bh(nm,Ld)})):Bh(nm,Ld)}),Rf(pl,[fl]),gh.exit().remove(),Yu.repositionOnUpdate&&gh.each(function(ug){m.select(this).select("text").call(w.positionText,ld.xFn(ug),ld.yFn(ug))});function Bh(ug,nm){ug.each(function(Og){var Xg=m.select(this),Ug=Xg.select(".text-math-group"),km=ld.anchorFn(Og,nm),Am=Yu.transFn.call(Xg.node(),Og)+(l(nm)&&+nm!=0?" rotate("+nm+","+ld.xFn(Og)+","+(ld.yFn(Og)-Og.fontSize/2)+")":""),um=w.lineCount(Xg),o0=gu*Og.fontSize,bm=ld.heightFn(Og,l(nm)?+nm:0,(um-1)*o0);if(bm&&(Am+=y(0,bm)),Ug.empty()){var Hg=Xg.select("text");Hg.attr({transform:Am,"text-anchor":km}),Hg.style("display",null),pl._adjustTickLabelsOverflow&&pl._adjustTickLabelsOverflow()}else{var P0=F.bBox(Ug.node()).width,gm=P0*{end:-.5,start:.5}[km];Ug.attr("transform",Am+y(gm,0))}})}pl._adjustTickLabelsOverflow=function(){var ug=pl.ticklabeloverflow;if(!(!ug||ug==="allow")){var nm=ug.indexOf("hide")!==-1,Og=pl._id.charAt(0)==="x",Xg=0,Ug=Og?wl._fullLayout.width:wl._fullLayout.height;if(ug.indexOf("domain")!==-1){var km=v.simpleMap(pl.range,pl.r2l);Xg=pl.l2p(km[0])+pl._offset,Ug=pl.l2p(km[1])+pl._offset}var Am=Math.min(Xg,Ug),um=Math.max(Xg,Ug),o0=pl.side,bm=1/0,Hg=-1/0;gh.each(function(a0){var Nm=m.select(this),y0=Nm.select(".text-math-group");if(y0.empty()){var Xm=F.bBox(Nm.node()),Ym=0;Og?(Xm.right>um||Xm.left<Am)&&(Ym=1):(Xm.bottom>um||Xm.top+(pl.tickangle?0:a0.fontSize/4)<Am)&&(Ym=1);var x0=Nm.select("text");Ym?nm&&x0.style("display","none"):x0.node().style.display!=="none"&&(x0.style("display",null),o0==="bottom"||o0==="right"?bm=Math.min(bm,Og?Xm.top:Xm.left):bm=-1/0,o0==="top"||o0==="left"?Hg=Math.max(Hg,Og?Xm.bottom:Xm.right):Hg=1/0)}});for(var P0 in Ju._plots){var gm=Ju._plots[P0];if(!(pl._id!==gm.xaxis._id&&pl._id!==gm.yaxis._id)){var g0=Og?gm.yaxis:gm.xaxis;g0&&(g0["_visibleLabelMin_"+pl._id]=bm,g0["_visibleLabelMax_"+pl._id]=Hg)}}}},pl._hideCounterAxisInsideTickLabels=function(ug){var nm=pl._id.charAt(0)==="x",Og=[];for(var Xg in Ju._plots){var Ug=Ju._plots[Xg];pl._id!==Ug.xaxis._id&&pl._id!==Ug.yaxis._id||Og.push(nm?Ug.yaxis:Ug.xaxis)}Og.forEach(function(km,Am){km&&gf(km)&&(ug||[sl,ll,ce,ul,fl]).forEach(function(um){var o0=um.K==="tick"&&um.L==="text"&&pl.ticklabelmode==="period",bm=Ju._plots[pl._mainSubplot],Hg;if(um.K===sl.K){var P0=$u?bm.zerolinelayerAbove:bm.zerolinelayer;Hg=P0.selectAll("."+pl._id+"zl")}else um.K===ll.K?Hg=bm.minorGridlayer.selectAll("."+pl._id):um.K===ce.K?Hg=bm.gridlayer.selectAll("."+pl._id):Hg=bm[pl._id.charAt(0)+"axislayer"];Hg.each(function(){var gm=m.select(this);um.L&&(gm=gm.selectAll(um.L)),gm.each(function(g0){var a0=pl.l2p(o0?sp(g0):g0.x)+pl._offset,Nm=m.select(this);a0<pl["_visibleLabelMax_"+km._id]&&a0>pl["_visibleLabelMin_"+km._id]?Nm.style("display","none"):um.K==="tick"&&!Am&&Nm.node().style.display!=="none"&&Nm.style("display",null)})})})})},Bh(gh,zd+1?zd:Ld);function up(){return ep.length&&Promise.all(ep)}var Uh=null;function hp(){if(Bh(gh,Ld),md.length&&pl.autotickangles&&(pl.type!=="log"||String(pl.dtick).charAt(0)!=="D")){Uh=pl.autotickangles[0];var ug=0,nm=[],Og,Xg=1;gh.each(function(om){ug=Math.max(ug,om.fontSize);var w0=pl.l2p(om.x),rv=wp(this),Cv=F.bBox(rv.node());Xg=Math.max(Xg,w.lineCount(rv)),nm.push({top:0,bottom:10,height:10,left:w0-Cv.width/2,right:w0+Cv.width/2+2,width:Cv.width+2})});var Ug=(pl.tickson==="boundaries"||pl.showdividers)&&!Yu.secondary,km=md.length,Am=Math.abs((md[km-1].x-md[0].x)*pl._m)/(km-1),um=Ug?Am/2:Am,o0=Ug?pl.ticklen:ug*1.25*Xg,bm=Math.sqrt(Math.pow(um,2)+Math.pow(o0,2)),Hg=um/bm,P0=pl.autotickangles.map(function(om){return om*Math.PI/180}),gm=P0.find(function(om){return Math.abs(Math.cos(om))<=Hg});gm===void 0&&(gm=P0.reduce(function(om,w0){return Math.abs(Math.cos(om))<Math.abs(Math.cos(w0))?om:w0},P0[0]));var g0=gm*(180/Math.PI);if(Ug){var a0=2;for(pl.ticks&&(a0+=pl.tickwidth/2),Og=0;Og<nm.length;Og++){var Nm=md[Og].xbnd,y0=nm[Og];if(Nm[0]!==null&&y0.left-pl.l2p(Nm[0])<a0||Nm[1]!==null&&pl.l2p(Nm[1])-y0.right<a0){Uh=g0;break}}}else{var Xm=pl.ticklabelposition||"",Ym=pl.tickson||"",x0=function(om){return Xm.indexOf(om)!==-1},E0=x0("top"),Qg=x0("left"),Sm=x0("right"),t0=x0("bottom"),m0=Ym!=="boundaries"&&(t0||Qg||E0||Sm),Km=m0?(pl.tickwidth||0)+2*il:0;for(Og=0;Og<nm.length-1;Og++)if(v.bBoxIntersect(nm[Og],nm[Og+1],Km)){Uh=g0;break}}Uh&&Bh(gh,Uh)}}pl._selections&&(pl._selections[Xu]=gh);var Ep=[up];pl.automargin&&Ju._redrawFromAutoMarginCount&&zd===90?(Uh=zd,Ep.push(function(){Bh(gh,zd)})):Ep.push(hp),pl._tickAngles&&Ep.push(function(){pl._tickAngles[Xu]=Uh===null?l(Ld)?Ld:0:Uh});var Uf=function(){var ug=0,nm=0;return gh.each(function(Og,Xg){var Ug=wp(this),km=Ug.select(".text-math-group");if(km.empty()){var Am;pl._vals[Xg]&&(Am=pl._vals[Xg].bb||F.bBox(Ug.node()),pl._vals[Xg].bb=Am),ug=Math.max(ug,Am.width),nm=Math.max(nm,Am.height)}}),{labelsMaxW:ug,labelsMaxH:nm}},qp=pl._anchorAxis;if(qp&&(qp.autorange||qp.insiderange)&&gf(pl)&&!U(Ju,pl._id)&&(Ju._insideTickLabelsUpdaterange||(Ju._insideTickLabelsUpdaterange={}),qp.autorange&&(Ju._insideTickLabelsUpdaterange[qp._name+".autorange"]=qp.autorange,Ep.push(Uf)),qp.insiderange)){var Ag=Uf(),bf=pl._id.charAt(0)==="y"?Ag.labelsMaxW:Ag.labelsMaxH;bf+=2*il,pl.ticklabelposition==="inside"&&(bf+=pl.ticklen||0);var Ig=pl.side==="right"||pl.side==="top"?1:-1,yg=Ig===1?1:0,pm=Ig===1?0:1,Mg=[];Mg[pm]=qp.range[pm];var Tf=qp.range,xm=qp.r2p(Tf[yg]),jg=qp.r2p(Tf[pm]),Wf=Ju._insideTickLabelsUpdaterange[qp._name+".range"];if(Wf){var wm=qp.r2p(Wf[yg]),im=qp.r2p(Wf[pm]),fm=Ig*(pl._id.charAt(0)==="y"?1:-1);fm*xm<fm*wm&&(xm=wm,Mg[yg]=Tf[yg]=Wf[yg]),fm*jg>fm*im&&(jg=im,Mg[pm]=Tf[pm]=Wf[pm])}var Rm=Math.abs(jg-xm);Rm-bf>0?(Rm-=bf,bf*=1+bf/Rm):bf=0,pl._id.charAt(0)!=="y"&&(bf=-bf),Mg[yg]=qp.p2r(qp.r2p(Tf[yg])+Ig*bf),qp.autorange==="min"||qp.autorange==="max reversed"?(Mg[0]=null,qp._rangeInitial0=void 0,qp._rangeInitial1=void 0):(qp.autorange==="max"||qp.autorange==="min reversed")&&(Mg[1]=null,qp._rangeInitial0=void 0,qp._rangeInitial1=void 0),Ju._insideTickLabelsUpdaterange[qp._name+".range"]=Mg}var n0=v.syncOrAsync(Ep);return n0&&n0.then&&wl._promises.push(n0),n0};function Up(wl,pl,Yu){var Ju=pl._id+"divider",hd=Yu.vals,$u=Yu.layer.selectAll("path."+Ju).data(hd,Pp);$u.exit().remove(),$u.enter().insert("path",":first-child").classed(Ju,1).classed("crisp",1).call(c.stroke,pl.dividercolor).style("stroke-width",F.crispRound(wl,pl.dividerwidth,1)+"px"),$u.attr("transform",Yu.transFn).attr("d",Yu.path)}X.getPxPosition=function(wl,pl){var Yu=wl._fullLayout._size,Ju=pl._id.charAt(0),hd=pl.side,$u;if(pl.anchor!=="free"?$u=pl._anchorAxis:Ju==="x"?$u={_offset:Yu.t+(1-(pl.position||0))*Yu.h,_length:0}:Ju==="y"&&($u={_offset:Yu.l+(pl.position||0)*Yu.w+pl._shift,_length:0}),hd==="top"||hd==="left")return $u._offset;if(hd==="bottom"||hd==="right")return $u._offset+$u._length};function fp(wl){var pl=wl.title.font.size,Yu=(wl.title.text.match(w.BR_TAG_ALL)||[]).length;return wl.title.hasOwnProperty("standoff")?pl*(ql+Yu*gu):Yu?pl*(Yu+1)*gu:pl}function zh(wl,pl){var Yu=wl._fullLayout,Ju=pl._id,hd=Ju.charAt(0),$u=pl.title.font.size,Xu,md=(pl.title.text.match(w.BR_TAG_ALL)||[]).length;if(pl.title.hasOwnProperty("standoff"))pl.side==="bottom"||pl.side==="right"?Xu=pl._depth+pl.title.standoff+$u*ql:(pl.side==="top"||pl.side==="left")&&(Xu=pl._depth+pl.title.standoff+$u*(Ul+md*gu));else{var ld=gf(pl);if(pl.type==="multicategory")Xu=pl._depth;else{var Ld=1.5*$u;ld&&(Ld=.5*$u,pl.ticks==="outside"&&(Ld+=pl.ticklen)),Xu=10+Ld+(pl.linewidth?pl.linewidth-1:0)}ld||(hd==="x"?Xu+=pl.side==="top"?$u*(pl.showticklabels?1:0):$u*(pl.showticklabels?1.5:.5):Xu+=pl.side==="right"?$u*(pl.showticklabels?1:.5):$u*(pl.showticklabels?.5:0))}var zd=X.getPxPosition(wl,pl),gh,ep,Bh;hd==="x"?(ep=pl._offset+pl._length/2,Bh=pl.side==="top"?zd-Xu:zd+Xu):(Bh=pl._offset+pl._length/2,ep=pl.side==="right"?zd+Xu:zd-Xu,gh={rotate:"-90",offset:0});var up;if(pl.type!=="multicategory"){var Uh=pl._selections[pl._id+"tick"];if(up={selection:Uh,side:pl.side},Uh&&Uh.node()&&Uh.node().parentNode){var hp=F.getTranslate(Uh.node().parentNode);up.offsetLeft=hp.x,up.offsetTop=hp.y}pl.title.hasOwnProperty("standoff")&&(up.pad=0)}return pl._titleStandoff=Xu,S.draw(wl,Ju+"title",{propContainer:pl,propName:pl._name+".title.text",placeholder:Yu._dfltTitle[hd],avoid:up,transform:gh,attributes:{x:ep,y:Bh,"text-anchor":"middle"}})}X.shouldShowZeroLine=function(wl,pl,Yu){var Ju=v.simpleMap(pl.range,pl.r2l);return Ju[0]*Ju[1]<=0&&pl.zeroline&&(pl.type==="linear"||pl.type==="-")&&!(pl.rangebreaks&&pl.maskBreaks(0)===al)&&(kp(pl,0)||!qh(wl,pl,Yu,Ju)||bp(wl,pl))},X.clipEnds=function(wl,pl){return pl.filter(function(Yu){return kp(wl,Yu.x)})};function kp(wl,pl){var Yu=wl.l2p(pl);return Yu>1&&Yu<wl._length-1}function qh(wl,pl,Yu,Ju){var hd=Yu._mainAxis;if(!hd)return;var $u=wl._fullLayout,Xu=pl._id.charAt(0),md=X.counterLetter(pl._id),ld=pl._offset+(Math.abs(Ju[0])<Math.abs(Ju[1])==(Xu==="x")?0:pl._length);function Ld(up){if(!up.showline||!up.linewidth)return!1;var Uh=Math.max((up.linewidth+pl.zerolinewidth)/2,1);function hp(qp){return typeof qp=="number"&&Math.abs(qp-ld)<Uh}if(hp(up._mainLinePosition)||hp(up._mainMirrorPosition))return!0;var Ep=up._linepositions||{};for(var Uf in Ep)if(hp(Ep[Uf][0])||hp(Ep[Uf][1]))return!0}var zd=$u._plots[Yu._mainSubplot];if(!(zd.mainplotinfo||zd).overlays.length)return Ld(Yu);for(var gh=X.list(wl,md),ep=0;ep<gh.length;ep++){var Bh=gh[ep];if(Bh._mainAxis===hd&&Ld(Bh))return!0}}function bp(wl,pl){for(var Yu=wl._fullData,Ju=pl._mainSubplot,hd=pl._id.charAt(0),$u=0;$u<Yu.length;$u++){var Xu=Yu[$u];if(Xu.visible===!0&&Xu.xaxis+Xu.yaxis===Ju&&(x.traceIs(Xu,"bar-like")&&Xu.orientation==={x:"h",y:"v"}[hd]||Xu.fill&&Xu.fill.charAt(Xu.fill.length-1)===hd))return!0}return!1}function wp(wl){var pl=m.select(wl),Yu=pl.select(".text-math-group");return Yu.empty()?pl.select("text"):Yu}X.allowAutoMargin=function(wl){for(var pl=X.list(wl,"",!0),Yu=0;Yu<pl.length;Yu++){var Ju=pl[Yu];Ju.automargin&&(d.allowAutoMargin(wl,Sp(Ju)),Ju.mirror&&d.allowAutoMargin(wl,mp(Ju))),x.getComponentMethod("rangeslider","isVisible")(Ju)&&d.allowAutoMargin(wl,af(Ju))}};function Sp(wl){return wl._id+".automargin"}function mp(wl){return Sp(wl)+".mirror"}function af(wl){return wl._id+".rangeslider"}X.swap=function(wl,pl){for(var Yu=_f(wl,pl),Ju=0;Ju<Yu.length;Ju++)Ef(wl,Yu[Ju].x,Yu[Ju].y)};function _f(wl,pl){var Yu=[],Ju,hd;for(Ju=0;Ju<pl.length;Ju++){var $u=[],Xu=wl._fullData[pl[Ju]].xaxis,md=wl._fullData[pl[Ju]].yaxis;if(!(!Xu||!md)){for(hd=0;hd<Yu.length;hd++)(Yu[hd].x.indexOf(Xu)!==-1||Yu[hd].y.indexOf(md)!==-1)&&$u.push(hd);if(!$u.length){Yu.push({x:[Xu],y:[md]});continue}var ld=Yu[$u[0]],Ld;if($u.length>1)for(hd=1;hd<$u.length;hd++)Ld=Yu[$u[hd]],Lp(ld.x,Ld.x),Lp(ld.y,Ld.y);Lp(ld.x,[Xu]),Lp(ld.y,[md])}}return Yu}function Lp(wl,pl){for(var Yu=0;Yu<pl.length;Yu++)wl.indexOf(pl[Yu])===-1&&wl.push(pl[Yu])}function Ef(wl,pl,Yu){var Ju=[],hd=[],$u=wl.layout,Xu,md;for(Xu=0;Xu<pl.length;Xu++)Ju.push(X.getFromId(wl,pl[Xu]));for(Xu=0;Xu<Yu.length;Xu++)hd.push(X.getFromId(wl,Yu[Xu]));var ld=Object.keys(b),Ld=["anchor","domain","overlaying","position","side","tickangle","editType"],zd=["linear","log"];for(Xu=0;Xu<ld.length;Xu++){var gh=ld[Xu],ep=Ju[0][gh],Bh=hd[0][gh],up=!0,Uh=!1,hp=!1;if(!(gh.charAt(0)==="_"||typeof ep=="function"||Ld.indexOf(gh)!==-1)){for(md=1;md<Ju.length&&up;md++){var Ep=Ju[md][gh];gh==="type"&&zd.indexOf(ep)!==-1&&zd.indexOf(Ep)!==-1&&ep!==Ep?Uh=!0:Ep!==ep&&(up=!1)}for(md=1;md<hd.length&&up;md++){var Uf=hd[md][gh];gh==="type"&&zd.indexOf(Bh)!==-1&&zd.indexOf(Uf)!==-1&&Bh!==Uf?hp=!0:hd[md][gh]!==Bh&&(up=!1)}up&&(Uh&&($u[Ju[0]._name].type="linear"),hp&&($u[hd[0]._name].type="linear"),Lf($u,gh,Ju,hd,wl._fullLayout._dfltTitle))}}for(Xu=0;Xu<wl._fullLayout.annotations.length;Xu++){var qp=wl._fullLayout.annotations[Xu];pl.indexOf(qp.xref)!==-1&&Yu.indexOf(qp.yref)!==-1&&v.swapAttrs($u.annotations[Xu],["?"])}}function Lf(wl,pl,Yu,Ju,hd){var $u=v.nestedProperty,Xu=$u(wl[Yu[0]._name],pl).get(),md=$u(wl[Ju[0]._name],pl).get(),ld;for(pl==="title"&&(Xu&&Xu.text===hd.x&&(Xu.text=hd.y),md&&md.text===hd.y&&(md.text=hd.x)),ld=0;ld<Yu.length;ld++)$u(wl,Yu[ld]._name+"."+pl).set(md);for(ld=0;ld<Ju.length;ld++)$u(wl,Ju[ld]._name+"."+pl).set(Xu)}function rg(wl){return wl._id==="angularaxis"}function ng(wl,pl){for(var Yu=pl._rangebreaks.length,Ju=0;Ju<Yu;Ju++){var hd=pl._rangebreaks[Ju];if(wl>=hd.min&&wl<hd.max)return hd.max}return wl}function gf(wl){return(wl.ticklabelposition||"").indexOf("inside")!==-1}function Rf(wl,pl){gf(wl._anchorAxis||{})&&wl._hideCounterAxisInsideTickLabels&&wl._hideCounterAxisInsideTickLabels(pl)}function yf(wl,pl,Yu,Ju){var hd=wl.anchor!=="free"&&(wl.overlaying===void 0||wl.overlaying===!1)?wl._id:wl.overlaying,$u;Ju?$u=wl.side==="right"?pl:-pl:$u=pl,hd in Yu||(Yu[hd]={}),wl.side in Yu[hd]||(Yu[hd][wl.side]=0),Yu[hd][wl.side]+=$u}function cp(wl,pl){return wl.autoshift?pl[wl.overlaying][wl.side]:wl.shift||0}function _g(wl,pl){return/%f/.test(pl)?wl>=_t:/%L/.test(pl)?wl>=In:/%[SX]/.test(pl)?wl>=nt:/%M/.test(pl)?wl>=ol:/%[HI]/.test(pl)?wl>=q:/%p/.test(pl)?wl>=se:/%[Aadejuwx]/.test(pl)?wl>=Pe:/%[UVW]/.test(pl)?wl>=nl:/%[Bbm]/.test(pl)?wl>=Z:/%[q]/.test(pl)?wl>=A:/%[Yy]/.test(pl)?wl>=D:!0}}),eh=s((ot,Me)=>{Me.exports=function(m,l,d){var x,v;if(d){var y=l==="reversed"||l==="min reversed"||l==="max reversed";x=d[y?1:0],v=d[y?0:1]}var w=m("autorangeoptions.minallowed",v===null?x:void 0),S=m("autorangeoptions.maxallowed",x===null?v:void 0);w===void 0&&m("autorangeoptions.clipmin"),S===void 0&&m("autorangeoptions.clipmax"),m("autorangeoptions.include")}}),Sh=s((ot,Me)=>{var m=eh();Me.exports=function(l,d,x,v){var y=d._template||{},w=d.type||y.type||"-";x("minallowed"),x("maxallowed");var S=x("range");if(!S){var c;!v.noInsiderange&&w!=="log"&&(c=x("insiderange"),c&&(c[0]===null||c[1]===null)&&(d.insiderange=!1,c=void 0),c&&(S=x("range",c)))}var F=d.getAutorangeDflt(S,v),b=x("autorange",F),R;S&&(S[0]===null&&S[1]===null||(S[0]===null||S[1]===null)&&(b==="reversed"||b===!0)||S[0]!==null&&(b==="min"||b==="max reversed")||S[1]!==null&&(b==="max"||b==="min reversed"))&&(S=void 0,delete d.range,d.autorange=!0,R=!0),R||(F=d.getAutorangeDflt(S,v),b=x("autorange",F)),b&&(m(x,b,S),(w==="linear"||w==="-")&&x("rangemode")),d.cleanRange()}}),Lh=s((ot,Me)=>{var m={left:0,top:0};Me.exports=l;function l(x,v,y){v=v||x.currentTarget||x.srcElement,Array.isArray(y)||(y=[0,0]);var w=x.clientX||0,S=x.clientY||0,c=d(v);return y[0]=w-c.left,y[1]=S-c.top,y}function d(x){return x===window||x===document||x===document.body?m:x.getBoundingClientRect()}}),Ah=s((ot,Me)=>{var m=Vd();function l(){var d=!1;try{var x=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("test",null,x),window.removeEventListener("test",null,x)}catch{d=!1}return d}Me.exports=m&&l()}),yh=s((ot,Me)=>{Me.exports=function(m,l,d,x,v){var y=(m-d)/(x-d),w=y+l/(x-d),S=(y+w)/2;return v==="left"||v==="bottom"?y:v==="center"||v==="middle"?S:v==="right"||v==="top"?w:y<2/3-S?y:w>4/3-S?w:S}}),Nh=s((ot,Me)=>{var m=rt(),l=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];Me.exports=function(d,x,v,y){return v==="left"?d=0:v==="center"?d=1:v==="right"?d=2:d=m.constrain(Math.floor(d*3),0,2),y==="bottom"?x=0:y==="middle"?x=1:y==="top"?x=2:x=m.constrain(Math.floor(x*3),0,2),l[x][d]}}),sh=s((ot,Me)=>{var m=jp(),l=ym(),d=lf().getGraphDiv,x=Il(),v=Me.exports={};v.wrapped=function(y,w,S){y=d(y),y._fullLayout&&l.clear(y._fullLayout._uid+x.HOVERID),v.raw(y,w,S)},v.raw=function(y,w){var S=y._fullLayout,c=y._hoverdata;w||(w={}),!(w.target&&!y._dragged&&m.triggerHandler(y,"plotly_beforehover",w)===!1)&&(S._hoverlayer.selectAll("g").remove(),S._hoverlayer.selectAll("line").remove(),S._hoverlayer.selectAll("circle").remove(),y._hoverdata=void 0,w.target&&c&&y.emit("plotly_unhover",{event:w,points:c}))}}),Th=s((ot,Me)=>{var m=Lh(),l=Eh(),d=Ah(),x=rt().removeElement,v=rf(),y=Me.exports={};y.align=yh(),y.getCursor=Nh();var w=sh();y.unhover=w.wrapped,y.unhoverRaw=w.raw,y.init=function(F){var b=F.gd,R=1,B=b._context.doubleClickDelay,O=F.element,P,D,H,C,A,L,j,Z;b._mouseDownTime||(b._mouseDownTime=0),O.style.pointerEvents="all",O.onmousedown=se,d?(O._ontouchstart&&O.removeEventListener("touchstart",O._ontouchstart),O._ontouchstart=se,O.addEventListener("touchstart",se,{passive:!1})):O.ontouchstart=se;function nl(nt,In,_t){return Math.abs(nt)<_t&&(nt=0),Math.abs(In)<_t&&(In=0),[nt,In]}var Pe=F.clampFn||nl;function se(nt){b._dragged=!1,b._dragging=!0;var In=c(nt);P=In[0],D=In[1],j=nt.target,L=nt,Z=nt.buttons===2||nt.ctrlKey,typeof nt.clientX>"u"&&typeof nt.clientY>"u"&&(nt.clientX=P,nt.clientY=D),H=new Date().getTime(),H-b._mouseDownTime<B?R+=1:(R=1,b._mouseDownTime=H),F.prepFn&&F.prepFn(nt,P,D),l&&!Z?(A=S(),A.style.cursor=window.getComputedStyle(O).cursor):l||(A=document,C=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(O).cursor),document.addEventListener("mouseup",ol),document.addEventListener("touchend",ol),F.dragmode!==!1&&(nt.preventDefault(),document.addEventListener("mousemove",q),document.addEventListener("touchmove",q,{passive:!1}))}function q(nt){nt.preventDefault();var In=c(nt),_t=F.minDrag||v.MINDRAG,Fn=Pe(In[0]-P,In[1]-D,_t),al=Fn[0],sl=Fn[1];(al||sl)&&(b._dragged=!0,y.unhover(b,nt)),b._dragged&&F.moveFn&&!Z&&(b._dragdata={element:O,dx:al,dy:sl},F.moveFn(al,sl))}function ol(nt){if(delete b._dragdata,F.dragmode!==!1&&(nt.preventDefault(),document.removeEventListener("mousemove",q),document.removeEventListener("touchmove",q)),document.removeEventListener("mouseup",ol),document.removeEventListener("touchend",ol),l?x(A):C&&(A.documentElement.style.cursor=C,C=null),!b._dragging){b._dragged=!1;return}if(b._dragging=!1,new Date().getTime()-b._mouseDownTime>B&&(R=Math.max(R-1,1)),b._dragged)F.doneFn&&F.doneFn();else{var In;L.target===j?In=L:(In={target:j,srcElement:j,toElement:j},Object.keys(L).concat(Object.keys(L.__proto__)).forEach(_t=>{var Fn=L[_t];!In[_t]&&typeof Fn!="function"&&(In[_t]=Fn)})),F.clickFn&&F.clickFn(R,In),Z||j.dispatchEvent(new MouseEvent("click",nt))}b._dragging=!1,b._dragged=!1}};function S(){var F=document.createElement("div");F.className="dragcover";var b=F.style;return b.position="fixed",b.left=0,b.right=0,b.top=0,b.bottom=0,b.zIndex=999999999,b.background="none",document.body.appendChild(F),F}y.coverSlip=S;function c(F){return m(F.changedTouches?F.changedTouches[0]:F,document.body)}}),dp=s((ot,Me)=>{Me.exports=function(m,l){(m.attr("class")||"").split(" ").forEach(function(d){d.indexOf("cursor-")===0&&m.classed(d,!1)}),l&&m.classed("cursor-"+l,!0)}}),$h=s((ot,Me)=>{var m=dp(),l="data-savedcursor",d="!!";Me.exports=function(x,v){var y=x.attr(l);if(v){if(!y){for(var w=(x.attr("class")||"").split(" "),S=0;S<w.length;S++){var c=w[S];c.indexOf("cursor-")===0&&x.attr(l,c.substr(7)).classed(c,!1)}x.attr(l)||x.attr(l,d)}m(x,v)}else y&&(x.attr(l,null),y===d?m(x):m(x,y))}}),ap=s((ot,Me)=>{var m=Pu(),l=qd();Me.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"legend"},maxheight:{valType:"number",min:0,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:m({editType:"legend"}),grouptitlefont:m({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:m({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}}),Yh=s(ot=>{ot.isGrouped=function(Me){return(Me.traceorder||"").indexOf("grouped")!==-1},ot.isVertical=function(Me){return Me.orientation!=="h"},ot.isReversed=function(Me){return(Me.traceorder||"").indexOf("reversed")!==-1}}),Mh=s((ot,Me)=>{var m=ff(),l=rt(),d=Bp(),x=id(),v=ap(),y=Jg(),w=Yh();function S(c,F,b,R){var B=F[c]||{},O=d.newContainer(b,c);function P(gu,Bn){return l.coerce(B,O,v,gu,Bn)}var D=l.coerceFont(P,"font",b.font);P("bgcolor",b.paper_bgcolor),P("bordercolor");var H=P("visible");if(H){for(var C,A=function(gu,Bn){var il=C._input,X=C;return l.coerce(il,X,x,gu,Bn)},L=b.font||{},j=l.coerceFont(P,"grouptitlefont",L,{overrideDflt:{size:Math.round(L.size*1.1)}}),Z=0,nl=!1,Pe="normal",se=(b.shapes||[]).filter(function(gu){return gu.showlegend}),q=R.concat(se).filter(function(gu){return c===(gu.legend||"legend")}),ol=0;ol<q.length;ol++)if(C=q[ol],!!C.visible){var nt=C._isShape;(C.showlegend||C._dfltShowLegend&&!(C._module&&C._module.attributes&&C._module.attributes.showlegend&&C._module.attributes.showlegend.dflt===!1))&&(Z++,C.showlegend&&(nl=!0,(!nt&&m.traceIs(C,"pie-like")||C._input.showlegend===!0)&&Z++),l.coerceFont(A,"legendgrouptitle.font",j)),(!nt&&m.traceIs(C,"bar")&&b.barmode==="stack"||["tonextx","tonexty"].indexOf(C.fill)!==-1)&&(Pe=w.isGrouped({traceorder:Pe})?"grouped+reversed":"reversed"),C.legendgroup!==void 0&&C.legendgroup!==""&&(Pe=w.isReversed({traceorder:Pe})?"reversed+grouped":"grouped")}var In=l.coerce(F,b,y,"showlegend",nl&&Z>(c==="legend"?1:0));if(In===!1&&(b[c]=void 0),!(In===!1&&!B.uirevision)&&(P("uirevision",b.uirevision),In!==!1)){P("borderwidth");var _t=P("orientation"),Fn=P("yref"),al=P("xref"),sl=_t==="h",ce=Fn==="paper",ll=al==="paper",ul,fl,bl,El="left";sl?(ul=0,m.getComponentMethod("rangeslider","isVisible")(F.xaxis)?ce?(fl=1.1,bl="bottom"):(fl=1,bl="top"):ce?(fl=-.1,bl="top"):(fl=0,bl="bottom")):(fl=1,bl="auto",ll?ul=1.02:(ul=1,El="right")),l.coerce(B,O,{x:{valType:"number",editType:"legend",min:ll?-2:0,max:ll?3:1,dflt:ul}},"x"),l.coerce(B,O,{y:{valType:"number",editType:"legend",min:ce?-2:0,max:ce?3:1,dflt:fl}},"y"),P("traceorder",Pe),w.isGrouped(b[c])&&P("tracegroupgap"),P("entrywidth"),P("entrywidthmode"),P("indentation"),P("itemsizing"),P("itemwidth"),P("itemclick"),P("itemdoubleclick"),P("groupclick"),P("xanchor",El),P("yanchor",bl),P("maxheight"),P("valign"),l.noneOrAll(B,O,["x","y"]);var Ul=P("title.text");if(Ul){P("title.side",sl?"left":"top");var ql=l.extendFlat({},D,{size:l.bigFont(D.size)});l.coerceFont(P,"title.font",ql)}}}}Me.exports=function(c,F,b){var R,B=b.slice(),O=F.shapes;if(O)for(R=0;R<O.length;R++){var P=O[R];if(P.showlegend){var D={_input:P._input,visible:P.visible,showlegend:P.showlegend,legend:P.legend};B.push(D)}}var H=["legend"];for(R=0;R<B.length;R++)l.pushUnique(H,B[R].legend);for(F._legends=[],R=0;R<H.length;R++){var C=H[R];S(C,c,F,B),F[C]&&(F[C]._id=C),F._legends.push(C)}}}),pp=s((ot,Me)=>{var m=ff(),l=rt(),d=l.pushUnique,x=!0;Me.exports=function(v,y,w){var S=y._fullLayout;if(y._dragged||y._editing)return;var c=S.legend.itemclick,F=S.legend.itemdoubleclick,b=S.legend.groupclick;w===1&&c==="toggle"&&F==="toggleothers"&&x&&y.data&&y._context.showTips&&l.notifier(l._(y,"Double-click on legend to isolate one trace"),"long"),x=!1;var R;if(w===1?R=c:w===2&&(R=F),!R)return;var B=b==="togglegroup",O=S.hiddenlabels?S.hiddenlabels.slice():[],P=v.data()[0][0];if(P.groupTitle&&P.noClick)return;var D=y._fullData,H=(S.shapes||[]).filter(function(fd){return fd.showlegend}),C=D.concat(H),A=P.trace;A._isShape&&(A=A._fullInput);var L=A.legendgroup,j,Z,nl,Pe,se,q,ol={},nt=[],In=[],_t=[];function Fn(fd,Kl){var vu=nt.indexOf(fd),Rl=ol.visible;return Rl||(Rl=ol.visible=[]),nt.indexOf(fd)===-1&&(nt.push(fd),vu=nt.length-1),Rl[vu]=Kl,vu}var al=(S.shapes||[]).map(function(fd){return fd._input}),sl=!1;function ce(fd,Kl){al[fd].visible=Kl,sl=!0}function ll(fd,Kl){if(!(P.groupTitle&&!B)){var vu=fd._fullInput||fd,Rl=vu._isShape,Wu=vu.index;Wu===void 0&&(Wu=vu._index);var cd=vu.visible===!1?!1:Kl;Rl?ce(Wu,cd):Fn(Wu,cd)}}var ul=A.legend,fl=A._fullInput,bl=fl&&fl._isShape;if(!bl&&m.traceIs(A,"pie-like")){var El=P.label,Ul=O.indexOf(El);if(R==="toggle")Ul===-1?O.push(El):O.splice(Ul,1);else if(R==="toggleothers"){var ql=Ul!==-1,gu=[];for(j=0;j<y.calcdata.length;j++){var Bn=y.calcdata[j];for(Z=0;Z<Bn.length;Z++){var il=Bn[Z],X=il.label;ul===Bn[0].trace.legend&&El!==X&&(O.indexOf(X)===-1&&(ql=!0),d(O,X),gu.push(X))}}if(!ql)for(var cl=0;cl<gu.length;cl++){var Sl=O.indexOf(gu[cl]);Sl!==-1&&O.splice(Sl,1)}}m.call("_guiRelayout",y,"hiddenlabels",O)}else{var st=L&&L.length,U=[],re;if(st)for(j=0;j<C.length;j++)re=C[j],re.visible&&re.legendgroup===L&&U.push(j);if(R==="toggle"){var Ft;switch(A.visible){case!0:Ft="legendonly";break;case!1:Ft=!1;break;case"legendonly":Ft=!0;break}if(st)if(B)for(j=0;j<C.length;j++){var ls=C[j];ls.visible!==!1&&ls.legendgroup===L&&ll(ls,Ft)}else ll(A,Ft);else ll(A,Ft)}else if(R==="toggleothers"){var _l,Ll,zl,yu,Vu,od=!0;for(j=0;j<C.length;j++)if(Vu=C[j],_l=Vu===A,zl=Vu.showlegend!==!0,!(_l||zl)&&(Ll=st&&Vu.legendgroup===L,!Ll&&Vu.legend===ul&&Vu.visible===!0&&!m.traceIs(Vu,"notLegendIsolatable"))){od=!1;break}for(j=0;j<C.length;j++)if(Vu=C[j],!(Vu.visible===!1||Vu.legend!==ul)&&!m.traceIs(Vu,"notLegendIsolatable"))switch(A.visible){case"legendonly":ll(Vu,!0);break;case!0:yu=od?!0:"legendonly",_l=Vu===A,zl=Vu.showlegend!==!0&&!Vu.legendgroup,Ll=_l||st&&Vu.legendgroup===L,ll(Vu,Ll||zl?!0:yu);break}}for(j=0;j<In.length;j++)if(nl=In[j],!!nl){var Ad=nl.constructUpdate(),vd=Object.keys(Ad);for(Z=0;Z<vd.length;Z++)Pe=vd[Z],q=ol[Pe]=ol[Pe]||[],q[_t[j]]=Ad[Pe]}for(se=Object.keys(ol),j=0;j<se.length;j++)for(Pe=se[j],Z=0;Z<nt.length;Z++)ol[Pe].hasOwnProperty(Z)||(ol[Pe][Z]=void 0);sl?m.call("_guiUpdate",y,ol,{shapes:al},nt):m.call("_guiRestyle",y,ol,nt)}}}),Ip=s((ot,Me)=>{Me.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}}),gp=s((ot,Me)=>{var m=ff(),l=Yh();Me.exports=function(d,x,v){var y=x._inHover,w=l.isGrouped(x),S=l.isReversed(x),c={},F=[],b=!1,R={},B=0,O=0,P,D;function H(ll,ul,fl){if(x.visible!==!1&&!(v&&ll!==x._id))if(ul===""||!l.isGrouped(x)){var bl="~~i"+B;F.push(bl),c[bl]=[fl],B++}else F.indexOf(ul)===-1?(F.push(ul),b=!0,c[ul]=[fl]):c[ul].push(fl)}for(P=0;P<d.length;P++){var C=d[P],A=C[0],L=A.trace,j=L.legend,Z=L.legendgroup;if(!(!y&&(!L.visible||!L.showlegend)))if(m.traceIs(L,"pie-like"))for(R[Z]||(R[Z]={}),D=0;D<C.length;D++){var nl=C[D].label;R[Z][nl]||(H(j,Z,{label:nl,color:C[D].color,i:C[D].i,trace:L,pts:C[D].pts}),R[Z][nl]=!0,O=Math.max(O,(nl||"").length))}else H(j,Z,A),O=Math.max(O,(L.name||"").length)}if(!F.length)return[];var Pe=!b||!w,se=[];for(P=0;P<F.length;P++){var q=c[F[P]];Pe?se.push(q[0]):se.push(q)}for(Pe&&(se=[se]),P=0;P<se.length;P++){var ol=1/0;for(D=0;D<se[P].length;D++){var nt=se[P][D].trace.legendrank;ol>nt&&(ol=nt)}se[P][0]._groupMinRank=ol,se[P][0]._preGroupSort=P}var In=function(ll,ul){return ll[0]._groupMinRank-ul[0]._groupMinRank||ll[0]._preGroupSort-ul[0]._preGroupSort},_t=function(ll,ul){return ll.trace.legendrank-ul.trace.legendrank||ll._preSort-ul._preSort};for(se.forEach(function(ll,ul){ll[0]._preGroupSort=ul}),se.sort(In),P=0;P<se.length;P++){se[P].forEach(function(ll,ul){ll._preSort=ul}),se[P].sort(_t);var Fn=se[P][0].trace,al=null;for(D=0;D<se[P].length;D++){var sl=se[P][D].trace.legendgrouptitle;if(sl&&sl.text){al=sl,y&&(sl.font=x._groupTitleFont);break}}if(S&&se[P].reverse(),al){var ce=!1;for(D=0;D<se[P].length;D++)if(m.traceIs(se[P][D].trace,"pie-like")){ce=!0;break}se[P].unshift({i:-1,groupTitle:al,noClick:ce,trace:{showlegend:Fn.showlegend,legendgroup:Fn.legendgroup,visible:x.groupclick==="toggleitem"?!0:Fn.visible}})}for(D=0;D<se[P].length;D++)se[P][D]=[se[P][D]]}return x._lgroupsLength=se.length,x._maxNameLength=O,se}}),Xh=s(ot=>{var Me=rt();function m(l){return l.indexOf("e")!==-1?l.replace(/[.]?0+e/,"e"):l.indexOf(".")!==-1?l.replace(/[.]?0+$/,""):l}ot.formatPiePercent=function(l,d){var x=m((l*100).toPrecision(3));return Me.numSeparate(x,d)+"%"},ot.formatPieValue=function(l,d){var x=m(l.toPrecision(10));return Me.numSeparate(x,d)},ot.getFirstFilled=function(l,d){if(Me.isArrayOrTypedArray(l))for(var x=0;x<d.length;x++){var v=l[d[x]];if(v||v===0||v==="")return v}},ot.castOption=function(l,d){if(Me.isArrayOrTypedArray(l))return ot.getFirstFilled(l,d);if(l)return l},ot.getRotationAngle=function(l){return(l==="auto"?0:l)*Math.PI/180}}),Qp=s((ot,Me)=>{var m=Qd(),l=oh();Me.exports=function(d,x,v,y){var w=v.marker.pattern;w&&w.shape?m.pointStyle(d,v,y,x):l.fill(d,x.color)}}),Wp=s((ot,Me)=>{var m=oh(),l=Xh().castOption,d=Qp();Me.exports=function(x,v,y,w){var S=y.marker.line,c=l(S.color,v.pts)||m.defaultLine,F=l(S.width,v.pts)||0;x.call(d,v,y,w).style("stroke-width",F).call(m.stroke,c)}}),$p=s((ot,Me)=>{var m=$(),l=ff(),d=rt(),x=d.strTranslate,v=Qd(),y=oh(),w=If().extractOpts,S=Zu(),c=Wp(),F=Xh().castOption,b=Ip(),R=12,B=5,O=2,P=10,D=5;Me.exports=function(L,j,Z){var nl=j._fullLayout;Z||(Z=nl.legend);var Pe=Z.itemsizing==="constant",se=Z.itemwidth,q=(se+b.itemGap*2)/2,ol=x(q,0),nt=function(gu,Bn,il,X){var cl;if(gu+1)cl=gu;else if(Bn&&Bn.width>0)cl=Bn.width;else return 0;return Pe?X:Math.min(cl,il)};L.each(function(gu){var Bn=m.select(this),il=d.ensureSingle(Bn,"g","layers");il.style("opacity",gu[0].trace.opacity);var X=Z.indentation,cl=Z.valign,Sl=gu[0].lineHeight,st=gu[0].height;if(cl==="middle"&&X===0||!Sl||!st)il.attr("transform",null);else{var U={top:1,bottom:-1}[cl],re=U*(.5*(Sl-st+3))||0,Ft=Z.indentation;il.attr("transform",x(Ft,re))}var ls=il.selectAll("g.legendfill").data([gu]);ls.enter().append("g").classed("legendfill",!0);var _l=il.selectAll("g.legendlines").data([gu]);_l.enter().append("g").classed("legendlines",!0);var Ll=il.selectAll("g.legendsymbols").data([gu]);Ll.enter().append("g").classed("legendsymbols",!0),Ll.selectAll("g.legendpoints").data([gu]).enter().append("g").classed("legendpoints",!0)}).each(ql).each(Fn).each(sl).each(al).each(ll).each(El).each(bl).each(In).each(_t).each(ul).each(fl);function In(gu){var Bn=C(gu),il=Bn.showFill,X=Bn.showLine,cl=Bn.showGradientLine,Sl=Bn.showGradientFill,st=Bn.anyFill,U=Bn.anyLine,re=gu[0],Ft=re.trace,ls,_l,Ll=w(Ft),zl=Ll.colorscale,yu=Ll.reversescale,Vu=function(Rl){if(Rl.size())if(il)v.fillGroupStyle(Rl,j,!0);else{var Wu="legendfill-"+Ft.uid;v.gradient(Rl,j,Wu,H(yu),zl,"fill")}},od=function(Rl){if(Rl.size()){var Wu="legendline-"+Ft.uid;v.lineGroupStyle(Rl),v.gradient(Rl,j,Wu,H(yu),zl,"stroke")}},Ad=S.hasMarkers(Ft)||!st?"M5,0":U?"M5,-2":"M5,-3",vd=m.select(this),fd=vd.select(".legendfill").selectAll("path").data(il||Sl?[gu]:[]);if(fd.enter().append("path").classed("js-fill",!0),fd.exit().remove(),fd.attr("d",Ad+"h"+se+"v6h-"+se+"z").call(Vu),X||cl){var Kl=nt(void 0,Ft.line,P,B);_l=d.minExtend(Ft,{line:{width:Kl}}),ls=[d.minExtend(re,{trace:_l})]}var vu=vd.select(".legendlines").selectAll("path").data(X||cl?[ls]:[]);vu.enter().append("path").classed("js-line",!0),vu.exit().remove(),vu.attr("d",Ad+(cl?"l"+se+",0.0001":"h"+se)).call(X?v.lineGroupStyle:od)}function _t(gu){var Bn=C(gu),il=Bn.anyFill,X=Bn.anyLine,cl=Bn.showLine,Sl=Bn.showMarker,st=gu[0],U=st.trace,re=!Sl&&!X&&!il&&S.hasText(U),Ft,ls;function _l(fd,Kl,vu,Rl){var Wu=d.nestedProperty(U,fd).get(),cd=d.isArrayOrTypedArray(Wu)&&Kl?Kl(Wu):Wu;if(Pe&&cd&&Rl!==void 0&&(cd=Rl),vu){if(cd<vu[0])return vu[0];if(cd>vu[1])return vu[1]}return cd}function Ll(fd){return st._distinct&&st.index&&fd[st.index]?fd[st.index]:fd[0]}if(Sl||re||cl){var zl={},yu={};if(Sl){zl.mc=_l("marker.color",Ll),zl.mx=_l("marker.symbol",Ll),zl.mo=_l("marker.opacity",d.mean,[.2,1]),zl.mlc=_l("marker.line.color",Ll),zl.mlw=_l("marker.line.width",d.mean,[0,5],O),yu.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Vu=_l("marker.size",d.mean,[2,16],R);zl.ms=Vu,yu.marker.size=Vu}cl&&(yu.line={width:_l("line.width",Ll,[0,10],B)}),re&&(zl.tx="Aa",zl.tp=_l("textposition",Ll),zl.ts=10,zl.tc=_l("textfont.color",Ll),zl.tf=_l("textfont.family",Ll),zl.tw=_l("textfont.weight",Ll),zl.ty=_l("textfont.style",Ll),zl.tv=_l("textfont.variant",Ll),zl.tC=_l("textfont.textcase",Ll),zl.tE=_l("textfont.lineposition",Ll),zl.tS=_l("textfont.shadow",Ll)),Ft=[d.minExtend(st,zl)],ls=d.minExtend(U,yu),ls.selectedpoints=null,ls.texttemplate=null}var od=m.select(this).select("g.legendpoints"),Ad=od.selectAll("path.scatterpts").data(Sl?Ft:[]);Ad.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",ol),Ad.exit().remove(),Ad.call(v.pointStyle,ls,j),Sl&&(Ft[0].mrc=3);var vd=od.selectAll("g.pointtext").data(re?Ft:[]);vd.enter().append("g").classed("pointtext",!0).append("text").attr("transform",ol),vd.exit().remove(),vd.selectAll("text").call(v.textPointStyle,ls,j)}function Fn(gu){var Bn=gu[0].trace,il=Bn.type==="waterfall";if(gu[0]._distinct&&il){var X=gu[0].trace[gu[0].dir].marker;return gu[0].mc=X.color,gu[0].mlw=X.line.width,gu[0].mlc=X.line.color,ce(gu,this,"waterfall")}var cl=[];Bn.visible&&il&&(cl=gu[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var Sl=m.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(cl);Sl.enter().append("path").classed("legendwaterfall",!0).attr("transform",ol).style("stroke-miterlimit",1),Sl.exit().remove(),Sl.each(function(st){var U=m.select(this),re=Bn[st[0]].marker,Ft=nt(void 0,re.line,D,O);U.attr("d",st[1]).style("stroke-width",Ft+"px").call(y.fill,re.color),Ft&&U.call(y.stroke,re.line.color)})}function al(gu){ce(gu,this)}function sl(gu){ce(gu,this,"funnel")}function ce(gu,Bn,il){var X=gu[0].trace,cl=X.marker||{},Sl=cl.line||{},st=cl.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",U=il?X.visible&&X.type===il:l.traceIs(X,"bar"),re=m.select(Bn).select("g.legendpoints").selectAll("path.legend"+il).data(U?[gu]:[]);re.enter().append("path").classed("legend"+il,!0).attr("d",st).attr("transform",ol),re.exit().remove(),re.each(function(Ft){var ls=m.select(this),_l=Ft[0],Ll=nt(_l.mlw,cl.line,D,O);ls.style("stroke-width",Ll+"px");var zl=_l.mcc;if(!Z._inHover&&"mc"in _l){var yu=w(cl),Vu=yu.mid;Vu===void 0&&(Vu=(yu.max+yu.min)/2),zl=v.tryColorscale(cl,"")(Vu)}var od=zl||_l.mc||cl.color,Ad=cl.pattern,vd=v.getPatternAttr,fd=Ad&&(vd(Ad.shape,0,"")||vd(Ad.path,0,""));if(fd){var Kl=vd(Ad.bgcolor,0,null),vu=vd(Ad.fgcolor,0,null),Rl=Ad.fgopacity,Wu=A(Ad.size,8,10),cd=A(Ad.solidity,.5,1),xd="legend-"+X.uid;ls.call(v.pattern,"legend",j,xd,fd,Wu,cd,zl,Ad.fillmode,Kl,vu,Rl)}else ls.call(y.fill,od);Ll&&y.stroke(ls,_l.mlc||Sl.color)})}function ll(gu){var Bn=gu[0].trace,il=m.select(this).select("g.legendpoints").selectAll("path.legendbox").data(Bn.visible&&l.traceIs(Bn,"box-violin")?[gu]:[]);il.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",ol),il.exit().remove(),il.each(function(){var X=m.select(this);if((Bn.boxpoints==="all"||Bn.points==="all")&&y.opacity(Bn.fillcolor)===0&&y.opacity((Bn.line||{}).color)===0){var cl=d.minExtend(Bn,{marker:{size:Pe?R:d.constrain(Bn.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});il.call(v.pointStyle,cl,j)}else{var Sl=nt(void 0,Bn.line,D,O);X.style("stroke-width",Sl+"px").call(y.fill,Bn.fillcolor),Sl&&y.stroke(X,Bn.line.color)}})}function ul(gu){var Bn=gu[0].trace,il=m.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(Bn.visible&&Bn.type==="candlestick"?[gu,gu]:[]);il.enter().append("path").classed("legendcandle",!0).attr("d",function(X,cl){return cl?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",ol).style("stroke-miterlimit",1),il.exit().remove(),il.each(function(X,cl){var Sl=m.select(this),st=Bn[cl?"increasing":"decreasing"],U=nt(void 0,st.line,D,O);Sl.style("stroke-width",U+"px").call(y.fill,st.fillcolor),U&&y.stroke(Sl,st.line.color)})}function fl(gu){var Bn=gu[0].trace,il=m.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(Bn.visible&&Bn.type==="ohlc"?[gu,gu]:[]);il.enter().append("path").classed("legendohlc",!0).attr("d",function(X,cl){return cl?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",ol).style("stroke-miterlimit",1),il.exit().remove(),il.each(function(X,cl){var Sl=m.select(this),st=Bn[cl?"increasing":"decreasing"],U=nt(void 0,st.line,D,O);Sl.style("fill","none").call(v.dashLine,st.line.dash,U),U&&y.stroke(Sl,st.line.color)})}function bl(gu){Ul(gu,this,"pie")}function El(gu){Ul(gu,this,"funnelarea")}function Ul(gu,Bn,il){var X=gu[0],cl=X.trace,Sl=il?cl.visible&&cl.type===il:l.traceIs(cl,il),st=m.select(Bn).select("g.legendpoints").selectAll("path.legend"+il).data(Sl?[gu]:[]);if(st.enter().append("path").classed("legend"+il,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",ol),st.exit().remove(),st.size()){var U=cl.marker||{},re=nt(F(U.line.width,X.pts),U.line,D,O),Ft="pieLike",ls=d.minExtend(cl,{marker:{line:{width:re}}},Ft),_l=d.minExtend(X,{trace:ls},Ft);c(st,_l,ls,j)}}function ql(gu){var Bn=gu[0].trace,il,X=[];if(Bn.visible)switch(Bn.type){case"histogram2d":case"heatmap":X=[["M-15,-2V4H15V-2Z"]],il=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":X=[["M-6,-6V6H6V-6Z"]],il=!0;break;case"densitymapbox":case"densitymap":X=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],il="radial";break;case"cone":X=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],il=!1;break;case"streamtube":X=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],il=!1;break;case"surface":X=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],il=!0;break;case"mesh3d":X=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],il=!1;break;case"volume":X=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],il=!0;break;case"isosurface":X=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],il=!1;break}var cl=m.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(X);cl.enter().append("path").classed("legend3dandfriends",!0).attr("transform",ol).style("stroke-miterlimit",1),cl.exit().remove(),cl.each(function(Sl,st){var U=m.select(this),re=w(Bn),Ft=re.colorscale,ls=re.reversescale,_l=function(Vu){if(Vu.size()){var od="legendfill-"+Bn.uid;v.gradient(Vu,j,od,H(ls,il==="radial"),Ft,"fill")}},Ll;if(Ft){if(!il){var zl=Ft.length;Ll=st===0?Ft[ls?zl-1:0][1]:st===1?Ft[ls?0:zl-1][1]:Ft[Math.floor((zl-1)/2)][1]}}else{var yu=Bn.vertexcolor||Bn.facecolor||Bn.color;Ll=d.isArrayOrTypedArray(yu)?yu[st]||yu[0]:yu}U.attr("d",Sl[0]),Ll?U.call(y.fill,Ll):U.call(_l)})}};function H(L,j){var Z=j?"radial":"horizontal";return Z+(L?"":"reversed")}function C(L){var j=L[0].trace,Z=j.contours,nl=S.hasLines(j),Pe=S.hasMarkers(j),se=j.visible&&j.fill&&j.fill!=="none",q=!1,ol=!1;if(Z){var nt=Z.coloring;nt==="lines"?q=!0:nl=nt==="none"||nt==="heatmap"||Z.showlines,Z.type==="constraint"?se=Z._operation!=="=":(nt==="fill"||nt==="heatmap")&&(ol=!0)}return{showMarker:Pe,showLine:nl,showFill:se,showGradientLine:q,showGradientFill:ol,anyLine:nl||q,anyFill:se||ol}}function A(L,j,Z){return L&&d.isArrayOrTypedArray(L)?j:L>Z?Z:L}}),Hp=s((ot,Me)=>{var m=$(),l=rt(),d=Vf(),x=ff(),v=jp(),y=Th(),w=Qd(),S=oh(),c=Kg(),F=pp(),b=Ip(),R=$f(),B=R.LINE_SPACING,O=R.FROM_TL,P=R.FROM_BR,D=gp(),H=$p(),C=Yh(),A=1,L=/^legend[0-9]*$/;Me.exports=function(ul,fl){if(fl)Z(ul,fl);else{var bl=ul._fullLayout,El=bl._legends,Ul=bl._infolayer.selectAll('[class^="legend"]');Ul.each(function(){var il=m.select(this),X=il.attr("class"),cl=X.split(" ")[0];cl.match(L)&&El.indexOf(cl)===-1&&il.remove()});for(var ql=0;ql<El.length;ql++){var gu=El[ql],Bn=ul._fullLayout[gu];Z(ul,Bn)}}};function j(ul,fl,bl){if(!(fl.title.side!=="top center"&&fl.title.side!=="top right")){var El=fl.title.font,Ul=El.size*B,ql=0,gu=ul.node(),Bn=w.bBox(gu).width;fl.title.side==="top center"?ql=.5*(fl._width-2*bl-2*b.titlePad-Bn):fl.title.side==="top right"&&(ql=fl._width-2*bl-2*b.titlePad-Bn),c.positionText(ul,bl+b.titlePad+ql,bl+Ul)}}function Z(ul,fl){var bl=fl||{},El=ul._fullLayout,Ul=ll(bl),ql,gu,Bn=bl._inHover;if(Bn?(gu=bl.layer,ql="hover"):(gu=El._infolayer,ql=Ul),!!gu){ql+=El._uid,ul._legendMouseDownTime||(ul._legendMouseDownTime=0);var il;if(Bn){if(!bl.entries)return;il=D(bl.entries,bl)}else{for(var X=(ul.calcdata||[]).slice(),cl=El.shapes,Sl=0;Sl<cl.length;Sl++){var st=cl[Sl];if(st.showlegend){var U={_isShape:!0,_fullInput:st,index:st._index,name:st.name||st.label.text||"shape "+st._index,legend:st.legend,legendgroup:st.legendgroup,legendgrouptitle:st.legendgrouptitle,legendrank:st.legendrank,legendwidth:st.legendwidth,showlegend:st.showlegend,visible:st.visible,opacity:st.opacity,mode:st.type==="line"?"lines":"markers",line:st.line,marker:{line:st.line,color:st.fillcolor,size:12,symbol:st.type==="rect"?"square":st.type==="circle"?"circle":"hexagon2"}};X.push([{trace:U}])}}il=El.showlegend&&D(X,bl,El._legends.length>1)}var re=El.hiddenlabels||[];if(!Bn&&(!El.showlegend||!il.length))return gu.selectAll("."+Ul).remove(),El._topdefs.select("#"+ql).remove(),d.autoMargin(ul,Ul);var Ft=l.ensureSingle(gu,"g",Ul,function(vd){Bn||vd.attr("pointer-events","all")}),ls=l.ensureSingleById(El._topdefs,"clipPath",ql,function(vd){vd.append("rect")}),_l=l.ensureSingle(Ft,"rect","bg",function(vd){vd.attr("shape-rendering","crispEdges")});_l.call(S.stroke,bl.bordercolor).call(S.fill,bl.bgcolor).style("stroke-width",bl.borderwidth+"px");var Ll=l.ensureSingle(Ft,"g","scrollbox"),zl=bl.title;bl._titleWidth=0,bl._titleHeight=0;var yu;zl.text?(yu=l.ensureSingle(Ll,"text",Ul+"titletext"),yu.attr("text-anchor","start").call(w.font,zl.font).text(zl.text),nt(yu,Ll,ul,bl,A)):Ll.selectAll("."+Ul+"titletext").remove();var Vu=l.ensureSingle(Ft,"rect","scrollbar",function(vd){vd.attr(b.scrollBarEnterAttrs).call(S.fill,b.scrollBarColor)}),od=Ll.selectAll("g.groups").data(il);od.enter().append("g").attr("class","groups"),od.exit().remove();var Ad=od.selectAll("g.traces").data(l.identity);Ad.enter().append("g").attr("class","traces"),Ad.exit().remove(),Ad.style("opacity",function(vd){var fd=vd[0].trace;return x.traceIs(fd,"pie-like")?re.indexOf(vd[0].label)!==-1?.5:1:fd.visible==="legendonly"?.5:1}).each(function(){m.select(this).call(se,ul,bl)}).call(H,ul,bl).each(function(){Bn||m.select(this).call(ol,ul,Ul)}),l.syncOrAsync([d.previousPromises,function(){return Fn(ul,od,Ad,bl)},function(){var vd=El._size,fd=bl.borderwidth,Kl=bl.xref==="paper",vu=bl.yref==="paper";if(zl.text&&j(yu,bl,fd),!Bn){var Rl,Wu;Kl?Rl=vd.l+vd.w*bl.x-O[sl(bl)]*bl._width:Rl=El.width*bl.x-O[sl(bl)]*bl._width,vu?Wu=vd.t+vd.h*(1-bl.y)-O[ce(bl)]*bl._effHeight:Wu=El.height*(1-bl.y)-O[ce(bl)]*bl._effHeight;var cd=al(ul,Ul,Rl,Wu);if(cd)return;if(El.margin.autoexpand){var xd=Rl,Td=Wu;Rl=Kl?l.constrain(Rl,0,El.width-bl._width):xd,Wu=vu?l.constrain(Wu,0,El.height-bl._effHeight):Td,Rl!==xd&&l.log("Constrain "+Ul+".x to make legend fit inside graph"),Wu!==Td&&l.log("Constrain "+Ul+".y to make legend fit inside graph")}w.setTranslate(Ft,Rl,Wu)}if(Vu.on(".drag",null),Ft.on("wheel",null),Bn||bl._height<=bl._maxHeight||ul._context.staticPlot){var Pd=bl._effHeight;Bn&&(Pd=bl._height),_l.attr({width:bl._width-fd,height:Pd-fd,x:fd/2,y:fd/2}),w.setTranslate(Ll,0,0),ls.select("rect").attr({width:bl._width-2*fd,height:Pd-2*fd,x:fd,y:fd}),w.setClipUrl(Ll,ql,ul),w.setRect(Vu,0,0,0,0),delete bl._scrollY}else{var Hd=Math.max(b.scrollBarMinHeight,bl._effHeight*bl._effHeight/bl._height),$d=bl._effHeight-Hd-2*b.scrollBarMargin,Wd=bl._height-bl._effHeight,mh=$d/Wd,Dd=Math.min(bl._scrollY||0,Wd);_l.attr({width:bl._width-2*fd+b.scrollBarWidth+b.scrollBarMargin,height:bl._effHeight-fd,x:fd/2,y:fd/2}),ls.select("rect").attr({width:bl._width-2*fd+b.scrollBarWidth+b.scrollBarMargin,height:bl._effHeight-2*fd,x:fd,y:fd+Dd}),w.setClipUrl(Ll,ql,ul),Dl(Dd,Hd,mh),Ft.on("wheel",function(){Dd=l.constrain(bl._scrollY+m.event.deltaY/$d*Wd,0,Wd),Dl(Dd,Hd,mh),Dd!==0&&Dd!==Wd&&m.event.preventDefault()});var bh,Dh,vh,Gh=function(sd,Sd,yd){var bd=(yd-Sd)/mh+sd;return l.constrain(bd,0,Wd)},Ql=function(sd,Sd,yd){var bd=(Sd-yd)/mh+sd;return l.constrain(bd,0,Wd)},Ku=m.behavior.drag().on("dragstart",function(){var sd=m.event.sourceEvent;sd.type==="touchstart"?bh=sd.changedTouches[0].clientY:bh=sd.clientY,vh=Dd}).on("drag",function(){var sd=m.event.sourceEvent;sd.buttons===2||sd.ctrlKey||(sd.type==="touchmove"?Dh=sd.changedTouches[0].clientY:Dh=sd.clientY,Dd=Gh(vh,bh,Dh),Dl(Dd,Hd,mh))});Vu.call(Ku);var gl=m.behavior.drag().on("dragstart",function(){var sd=m.event.sourceEvent;sd.type==="touchstart"&&(bh=sd.changedTouches[0].clientY,vh=Dd)}).on("drag",function(){var sd=m.event.sourceEvent;sd.type==="touchmove"&&(Dh=sd.changedTouches[0].clientY,Dd=Ql(vh,bh,Dh),Dl(Dd,Hd,mh))});Ll.call(gl)}function Dl(sd,Sd,yd){bl._scrollY=ul._fullLayout[Ul]._scrollY=sd,w.setTranslate(Ll,0,-sd),w.setRect(Vu,bl._width,b.scrollBarMargin+sd*yd,b.scrollBarWidth,Sd),ls.select("rect").attr("y",fd+sd)}if(ul._context.edits.legendPosition){var Vl,Mu,Nu,ed;Ft.classed("cursor-move",!0),y.init({element:Ft.node(),gd:ul,prepFn:function(sd){if(sd.target!==Vu.node()){var Sd=w.getTranslate(Ft);Nu=Sd.x,ed=Sd.y}},moveFn:function(sd,Sd){if(Nu!==void 0&&ed!==void 0){var yd=Nu+sd,bd=ed+Sd;w.setTranslate(Ft,yd,bd),Vl=y.align(yd,bl._width,vd.l,vd.l+vd.w,bl.xanchor),Mu=y.align(bd+bl._height,-bl._height,vd.t+vd.h,vd.t,bl.yanchor)}},doneFn:function(){if(Vl!==void 0&&Mu!==void 0){var sd={};sd[Ul+".x"]=Vl,sd[Ul+".y"]=Mu,x.call("_guiRelayout",ul,sd)}},clickFn:function(sd,Sd){var yd=gu.selectAll("g.traces").filter(function(){var bd=this.getBoundingClientRect();return Sd.clientX>=bd.left&&Sd.clientX<=bd.right&&Sd.clientY>=bd.top&&Sd.clientY<=bd.bottom});yd.size()>0&&Pe(ul,Ft,yd,sd,Sd)}})}}],ul)}}function nl(ul,fl,bl){var El=ul[0],Ul=El.width,ql=fl.entrywidthmode,gu=El.trace.legendwidth||fl.entrywidth;return ql==="fraction"?fl._maxWidth*gu:bl+(gu||Ul)}function Pe(ul,fl,bl,El,Ul){var ql=bl.data()[0][0].trace,gu={event:Ul,node:bl.node(),curveNumber:ql.index,expandedIndex:ql.index,data:ul.data,layout:ul.layout,frames:ul._transitionData._frames,config:ul._context,fullData:ul._fullData,fullLayout:ul._fullLayout};ql._group&&(gu.group=ql._group),x.traceIs(ql,"pie-like")&&(gu.label=bl.datum()[0].label);var Bn=v.triggerHandler(ul,"plotly_legendclick",gu);if(El===1){if(Bn===!1)return;fl._clickTimeout=setTimeout(function(){ul._fullLayout&&F(bl,ul,El)},ul._context.doubleClickDelay)}else if(El===2){fl._clickTimeout&&clearTimeout(fl._clickTimeout),ul._legendMouseDownTime=0;var il=v.triggerHandler(ul,"plotly_legenddoubleclick",gu);il!==!1&&Bn!==!1&&F(bl,ul,El)}}function se(ul,fl,bl){var El=ll(bl),Ul=ul.data()[0][0],ql=Ul.trace,gu=x.traceIs(ql,"pie-like"),Bn=!bl._inHover&&fl._context.edits.legendText&&!gu,il=bl._maxNameLength,X,cl;Ul.groupTitle?(X=Ul.groupTitle.text,cl=Ul.groupTitle.font):(cl=bl.font,bl.entries?X=Ul.text:(X=gu?Ul.label:ql.name,ql._meta&&(X=l.templateString(X,ql._meta))));var Sl=l.ensureSingle(ul,"text",El+"text");Sl.attr("text-anchor","start").call(w.font,cl).text(Bn?q(X,il):X);var st=bl.indentation+bl.itemwidth+b.itemGap*2;c.positionText(Sl,st,0),Bn?Sl.call(c.makeEditable,{gd:fl,text:X}).call(nt,ul,fl,bl).on("edit",function(U){this.text(q(U,il)).call(nt,ul,fl,bl);var re=Ul.trace._fullInput||{},Ft={};return Ft.name=U,re._isShape?x.call("_guiRelayout",fl,"shapes["+ql.index+"].name",Ft.name):x.call("_guiRestyle",fl,Ft,ql.index)}):nt(Sl,ul,fl,bl)}function q(ul,fl){var bl=Math.max(4,fl);if(ul&&ul.trim().length>=bl/2)return ul;ul=ul||"";for(var El=bl-ul.length;El>0;El--)ul+=" ";return ul}function ol(ul,fl,bl){var El=fl._context.doubleClickDelay,Ul,ql=1,gu=l.ensureSingle(ul,"rect",bl+"toggle",function(Bn){fl._context.staticPlot||Bn.style("cursor","pointer").attr("pointer-events","all"),Bn.call(S.fill,"rgba(0,0,0,0)")});fl._context.staticPlot||(gu.on("mousedown",function(){Ul=new Date().getTime(),Ul-fl._legendMouseDownTime<El?ql+=1:(ql=1,fl._legendMouseDownTime=Ul)}),gu.on("mouseup",function(){if(!(fl._dragged||fl._editing)){var Bn=fl._fullLayout[bl];new Date().getTime()-fl._legendMouseDownTime>El&&(ql=Math.max(ql-1,1)),Pe(fl,Bn,ul,ql,m.event)}}))}function nt(ul,fl,bl,El,Ul){El._inHover&&ul.attr("data-notex",!0),c.convertToTspans(ul,bl,function(){In(fl,bl,El,Ul)})}function In(ul,fl,bl,El){var Ul=ul.data()[0][0];if(!bl._inHover&&Ul&&!Ul.trace.showlegend){ul.remove();return}var ql=ul.select("g[class*=math-group]"),gu=ql.node(),Bn=ll(bl);bl||(bl=fl._fullLayout[Bn]);var il=bl.borderwidth,X;El===A?X=bl.title.font:Ul.groupTitle?X=Ul.groupTitle.font:X=bl.font;var cl=X.size*B,Sl,st;if(gu){var U=w.bBox(gu);Sl=U.height,st=U.width,El===A?w.setTranslate(ql,il,il+Sl*.75):w.setTranslate(ql,0,Sl*.25)}else{var re="."+Bn+(El===A?"title":"")+"text",Ft=ul.select(re),ls=c.lineCount(Ft),_l=Ft.node();if(Sl=cl*ls,st=_l?w.bBox(_l).width:0,El===A)bl.title.side==="left"&&(st+=b.itemGap*2),c.positionText(Ft,il+b.titlePad,il+cl);else{var Ll=b.itemGap*2+bl.indentation+bl.itemwidth;Ul.groupTitle&&(Ll=b.itemGap,st-=bl.indentation+bl.itemwidth),c.positionText(Ft,Ll,-cl*((ls-1)/2-.3))}}El===A?(bl._titleWidth=st,bl._titleHeight=Sl):(Ul.lineHeight=cl,Ul.height=Math.max(Sl,16)+3,Ul.width=st)}function _t(ul){var fl=0,bl=0,El=ul.title.side;return El&&(El.indexOf("left")!==-1&&(fl=ul._titleWidth),El.indexOf("top")!==-1&&(bl=ul._titleHeight)),[fl,bl]}function Fn(ul,fl,bl,El){var Ul=ul._fullLayout,ql=ll(El);El||(El=Ul[ql]);var gu=Ul._size,Bn=C.isVertical(El),il=C.isGrouped(El),X=El.entrywidthmode==="fraction",cl=El.borderwidth,Sl=2*cl,st=b.itemGap,U=El.indentation+El.itemwidth+st*2,re=2*(cl+st),Ft=ce(El),ls=El.y<0||El.y===0&&Ft==="top",_l=El.y>1||El.y===1&&Ft==="bottom",Ll=El.tracegroupgap,zl={};let{orientation:yu,yref:Vu}=El,{maxheight:od}=El,Ad=ls||_l||yu!=="v"||Vu!=="paper";od||(od=Ad?.5:1);let vd=Ad?Ul.height:gu.h;El._maxHeight=Math.max(od>1?od:od*vd,30);var fd=0;El._width=0,El._height=0;var Kl=_t(El);if(Bn)bl.each(function(Dl){var Vl=Dl[0].height;w.setTranslate(this,cl+Kl[0],cl+Kl[1]+El._height+Vl/2+st),El._height+=Vl,El._width=Math.max(El._width,Dl[0].width)}),fd=U+El._width,El._width+=st+U+Sl,El._height+=re,il&&(fl.each(function(Dl,Vl){w.setTranslate(this,0,Vl*El.tracegroupgap)}),El._height+=(El._lgroupsLength-1)*El.tracegroupgap);else{var vu=sl(El),Rl=El.x<0||El.x===0&&vu==="right",Wu=El.x>1||El.x===1&&vu==="left",cd=_l||ls,xd=Ul.width/2;El._maxWidth=Math.max(Rl?cd&&vu==="left"?gu.l+gu.w:xd:Wu?cd&&vu==="right"?gu.r+gu.w:xd:gu.w,2*U);var Td=0,Pd=0;bl.each(function(Dl){var Vl=nl(Dl,El,U);Td=Math.max(Td,Vl),Pd+=Vl}),fd=null;var Hd=0;if(il){var $d=0,Wd=0,mh=0;fl.each(function(){var Dl=0,Vl=0;m.select(this).selectAll("g.traces").each(function(Nu){var ed=nl(Nu,El,U),sd=Nu[0].height;w.setTranslate(this,Kl[0],Kl[1]+cl+st+sd/2+Vl),Vl+=sd,Dl=Math.max(Dl,ed),zl[Nu[0].trace.legendgroup]=Dl});var Mu=Dl+st;Wd>0&&Mu+cl+Wd>El._maxWidth?(Hd=Math.max(Hd,Wd),Wd=0,mh+=$d+Ll,$d=Vl):$d=Math.max($d,Vl),w.setTranslate(this,Wd,mh),Wd+=Mu}),El._width=Math.max(Hd,Wd)+cl,El._height=mh+$d+re}else{var Dd=bl.size(),bh=Pd+Sl+(Dd-1)*st<El._maxWidth,Dh=0,vh=0,Gh=0,Ql=0;bl.each(function(Dl){var Vl=Dl[0].height,Mu=nl(Dl,El,U),Nu=bh?Mu:Td;X||(Nu+=st),Nu+cl+vh-st>=El._maxWidth&&(Hd=Math.max(Hd,Ql),vh=0,Gh+=Dh,El._height+=Dh,Dh=0),w.setTranslate(this,Kl[0]+cl+vh,Kl[1]+cl+Gh+Vl/2+st),Ql=vh+Mu+st,vh+=Nu,Dh=Math.max(Dh,Vl)}),bh?(El._width=vh+Sl,El._height=Dh+re):(El._width=Math.max(Hd,Ql)+Sl,El._height+=Dh+re)}}El._width=Math.ceil(Math.max(El._width+Kl[0],El._titleWidth+2*(cl+b.titlePad))),El._height=Math.ceil(Math.max(El._height+Kl[1],El._titleHeight+2*(cl+b.itemGap))),El._effHeight=Math.min(El._height,El._maxHeight);var Ku=ul._context.edits,gl=Ku.legendText||Ku.legendPosition;bl.each(function(Dl){var Vl=m.select(this).select("."+ql+"toggle"),Mu=Dl[0].height,Nu=Dl[0].trace.legendgroup,ed=nl(Dl,El,U);il&&Nu!==""&&(ed=zl[Nu]);var sd=gl?U:fd||ed;!Bn&&!X&&(sd+=st/2),w.setRect(Vl,0,-Mu/2,sd,Mu)})}function al(ul,fl,bl,El){var Ul=ul._fullLayout,ql=Ul[fl],gu=sl(ql),Bn=ce(ql),il=ql.xref==="paper",X=ql.yref==="paper";ul._fullLayout._reservedMargin[fl]={};var cl=ql.y<.5?"b":"t",Sl=ql.x<.5?"l":"r",st={r:Ul.width-bl,l:bl+ql._width,b:Ul.height-El,t:El+ql._effHeight};if(il&&X)return d.autoMargin(ul,fl,{x:ql.x,y:ql.y,l:ql._width*O[gu],r:ql._width*P[gu],b:ql._effHeight*P[Bn],t:ql._effHeight*O[Bn]});il?ul._fullLayout._reservedMargin[fl][cl]=st[cl]:X||ql.orientation==="v"?ul._fullLayout._reservedMargin[fl][Sl]=st[Sl]:ul._fullLayout._reservedMargin[fl][cl]=st[cl]}function sl(ul){return l.isRightAnchor(ul)?"right":l.isCenterAnchor(ul)?"center":"left"}function ce(ul){return l.isBottomAnchor(ul)?"bottom":l.isMiddleAnchor(ul)?"middle":"top"}function ll(ul){return ul._id||"legend"}}),Vp=s(ot=>{var Me=$(),m=zn(),l=$l(),d=rt(),x=d.pushUnique,v=d.strTranslate,y=d.strRotate,w=jp(),S=Kg(),c=$h(),F=Qd(),b=oh(),R=Th(),B=Ud(),O=rf().zindexSeparator,P=ff(),D=wd(),H=Il(),C=Mh(),A=Hp(),L=H.YANGLE,j=Math.PI*L/180,Z=1/Math.sin(j),nl=Math.cos(j),Pe=Math.sin(j),se=H.HOVERARROWSIZE,q=H.HOVERTEXTPAD,ol={box:!0,ohlc:!0,violin:!0,candlestick:!0},nt={scatter:!0,scattergl:!0,splom:!0};function In(U,re){return U.distance-re.distance}ot.hover=function(U,re,Ft,ls){U=d.getGraphDiv(U);var _l=re.target;d.throttle(U._fullLayout._uid+H.HOVERID,H.HOVERMINTIME,function(){_t(U,re,Ft,ls,_l)})},ot.loneHover=function(U,re){var Ft=!0;Array.isArray(U)||(Ft=!1,U=[U]);var ls=re.gd,_l=cl(ls),Ll=Sl(ls),zl=U.map(function(Rl){var Wu=Rl._x0||Rl.x0||Rl.x||0,cd=Rl._x1||Rl.x1||Rl.x||0,xd=Rl._y0||Rl.y0||Rl.y||0,Td=Rl._y1||Rl.y1||Rl.y||0,Pd=Rl.eventData;if(Pd){var Hd=Math.min(Wu,cd),$d=Math.max(Wu,cd),Wd=Math.min(xd,Td),mh=Math.max(xd,Td),Dd=Rl.trace;if(P.traceIs(Dd,"gl3d")){var bh=ls._fullLayout[Dd.scene]._scene.container,Dh=bh.offsetLeft,vh=bh.offsetTop;Hd+=Dh,$d+=Dh,Wd+=vh,mh+=vh}Pd.bbox={x0:Hd+Ll,x1:$d+Ll,y0:Wd+_l,y1:mh+_l},re.inOut_bbox&&re.inOut_bbox.push(Pd.bbox)}else Pd=!1;return{color:Rl.color||b.defaultLine,x0:Rl.x0||Rl.x||0,x1:Rl.x1||Rl.x||0,y0:Rl.y0||Rl.y||0,y1:Rl.y1||Rl.y||0,xLabel:Rl.xLabel,yLabel:Rl.yLabel,zLabel:Rl.zLabel,text:Rl.text,name:Rl.name,idealAlign:Rl.idealAlign,borderColor:Rl.borderColor,fontFamily:Rl.fontFamily,fontSize:Rl.fontSize,fontColor:Rl.fontColor,fontWeight:Rl.fontWeight,fontStyle:Rl.fontStyle,fontVariant:Rl.fontVariant,nameLength:Rl.nameLength,textAlign:Rl.textAlign,trace:Rl.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Rl.hovertemplate||!1,hovertemplateLabels:Rl.hovertemplateLabels||!1,eventData:Pd}}),yu=!1,Vu=sl(zl,{gd:ls,hovermode:"closest",rotateLabels:yu,bgColor:re.bgColor||b.background,container:Me.select(re.container),outerContainer:re.outerContainer||re.container}),od=Vu.hoverLabels,Ad=5,vd=0,fd=0;od.sort(function(Rl,Wu){return Rl.y0-Wu.y0}).each(function(Rl,Wu){var cd=Rl.y0-Rl.by/2;cd-Ad<vd?Rl.offset=vd-cd+Ad:Rl.offset=0,vd=cd+Rl.by+Rl.offset,Wu===re.anchorIndex&&(fd=Rl.offset)}).each(function(Rl){Rl.offset-=fd});var Kl=ls._fullLayout._invScaleX,vu=ls._fullLayout._invScaleY;return bl(od,yu,Kl,vu),Ft?od:od.node()};function _t(U,re,Ft,ls,_l){Ft||(Ft="xy"),typeof Ft=="string"&&(Ft=Ft.split(O)[0]);var Ll=Array.isArray(Ft)?Ft:[Ft],zl,yu=U._fullLayout,Vu=yu.hoversubplots,od=yu._plots||[],Ad=od[Ft],vd=yu._has("cartesian"),fd=re.hovermode||yu.hovermode,Kl=(fd||"").charAt(0)==="x",vu=(fd||"").charAt(0)==="y",Rl,Wu;if(vd&&(Kl||vu)&&Vu==="axis"){for(var cd=Ll.length,xd=0;xd<cd;xd++)if(zl=Ll[xd],od[zl]){Rl=B.getFromId(U,zl,"x"),Wu=B.getFromId(U,zl,"y");var Td=(Kl?Rl:Wu)._subplotsWith;if(Td&&Td.length)for(var Pd=0;Pd<Td.length;Pd++)x(Ll,Td[Pd])}}if(Ad&&Vu!=="single"){var Hd=Ad.overlays.map(function(Tf){return Tf.id});Ll=Ll.concat(Hd)}for(var $d=Ll.length,Wd=new Array($d),mh=new Array($d),Dd=!1,bh=0;bh<$d;bh++)if(zl=Ll[bh],od[zl])Dd=!0,Wd[bh]=od[zl].xaxis,mh[bh]=od[zl].yaxis;else if(yu[zl]&&yu[zl]._subplot){var Dh=yu[zl]._subplot;Wd[bh]=Dh.xaxis,mh[bh]=Dh.yaxis}else{d.warn("Unrecognized subplot: "+zl);return}if(fd&&!Dd&&(fd="closest"),["x","y","closest","x unified","y unified"].indexOf(fd)===-1||!U.calcdata||U.querySelector(".zoombox")||U._dragging)return R.unhoverRaw(U,re);var vh=yu.hoverdistance;vh===-1&&(vh=1/0);var Gh=yu.spikedistance;Gh===-1&&(Gh=1/0);var Ql=[],Ku=[],gl,Dl,Vl,Mu,Nu,ed,sd,Sd,yd,bd,Kd,Jd,th,Hh={hLinePoint:null,vLinePoint:null},sp=!1;if(Array.isArray(re))for(fd="array",Vl=0;Vl<re.length;Vl++)Nu=U.calcdata[re[Vl].curveNumber||0],Nu&&(ed=Nu[0].trace,Nu[0].trace.hoverinfo!=="skip"&&(Ku.push(Nu),ed.orientation==="h"&&(sp=!0)));else{var xp=U.calcdata.slice();for(xp.sort(function(Tf,xm){var jg=Tf[0].trace.zorder||0,Wf=xm[0].trace.zorder||0;return jg-Wf}),Mu=0;Mu<xp.length;Mu++)Nu=xp[Mu],ed=Nu[0].trace,ed.hoverinfo!=="skip"&&D.isTraceInSubplots(ed,Ll)&&(Ku.push(Nu),ed.orientation==="h"&&(sp=!0));var Pp=!_l,Up,fp;if(Pp)"xpx"in re?Up=re.xpx:Up=Wd[0]._length/2,"ypx"in re?fp=re.ypx:fp=mh[0]._length/2;else{if(w.triggerHandler(U,"plotly_beforehover",re)===!1)return;var zh=_l.getBoundingClientRect();Up=re.clientX-zh.left,fp=re.clientY-zh.top,yu._calcInverseTransform(U);var kp=d.apply3DTransform(yu._invTransform)(Up,fp);if(Up=kp[0],fp=kp[1],Up<0||Up>Wd[0]._length||fp<0||fp>mh[0]._length)return R.unhoverRaw(U,re)}if(re.pointerX=Up+Wd[0]._offset,re.pointerY=fp+mh[0]._offset,"xval"in re?gl=D.flat(Ll,re.xval):gl=D.p2c(Wd,Up),"yval"in re?Dl=D.flat(Ll,re.yval):Dl=D.p2c(mh,fp),!m(gl[0])||!m(Dl[0]))return d.warn("Fx.hover failed",re,U),R.unhoverRaw(U,re)}var qh=1/0;function bp(Tf,xm){for(Mu=0;Mu<Ku.length;Mu++)if(Nu=Ku[Mu],!(!Nu||!Nu[0]||!Nu[0].trace)&&(ed=Nu[0].trace,!(ed.visible!==!0||ed._length===0)&&["carpet","contourcarpet"].indexOf(ed._module.name)===-1)){if(yd=fd,D.isUnifiedHover(yd)&&(yd=yd.charAt(0)),ed.type==="splom"?(Sd=0,sd=Ll[Sd]):(sd=D.getSubplot(ed),Sd=Ll.indexOf(sd)),Jd={cd:Nu,trace:ed,xa:Wd[Sd],ya:mh[Sd],maxHoverDistance:vh,maxSpikeDistance:Gh,index:!1,distance:Math.min(qh,vh),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:b.defaultLine,name:ed.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},yu[sd]&&(Jd.subplot=yu[sd]._subplot),yu._splomScenes&&yu._splomScenes[ed.uid]&&(Jd.scene=yu._splomScenes[ed.uid]),yd==="array"){var jg=re[Mu];"pointNumber"in jg?(Jd.index=jg.pointNumber,yd="closest"):(yd="","xval"in jg&&(bd=jg.xval,yd="x"),"yval"in jg&&(Kd=jg.yval,yd=yd?"closest":"y"))}else Tf!==void 0&&xm!==void 0?(bd=Tf,Kd=xm):(bd=gl[Sd],Kd=Dl[Sd]);if(th=Ql.length,vh!==0)if(ed._module&&ed._module.hoverPoints){var Wf=ed._module.hoverPoints(Jd,bd,Kd,yd,{finiteRange:!0,hoverLayer:yu._hoverlayer,hoversubplots:Vu,gd:U});if(Wf)for(var wm,im=0;im<Wf.length;im++)wm=Wf[im],m(wm.x0)&&m(wm.y0)&&Ql.push(El(wm,fd))}else d.log("Unrecognized trace type in hover:",ed);if(fd==="closest"&&Ql.length>th&&(Ql.splice(0,th),qh=Ql[0].distance),vd&&Gh!==0&&Ql.length===0){Jd.distance=Gh,Jd.index=!1;var fm=ed._module.hoverPoints(Jd,bd,Kd,"closest",{hoverLayer:yu._hoverlayer});if(fm&&(fm=fm.filter(function(Xg){return Xg.spikeDistance<=Gh})),fm&&fm.length){var Rm,n0=fm.filter(function(Xg){return Xg.xa.showspikes&&Xg.xa.spikesnap!=="hovered data"});if(n0.length){var ug=n0[0];m(ug.x0)&&m(ug.y0)&&(Rm=Sp(ug),(!Hh.vLinePoint||Hh.vLinePoint.spikeDistance>Rm.spikeDistance)&&(Hh.vLinePoint=Rm))}var nm=fm.filter(function(Xg){return Xg.ya.showspikes&&Xg.ya.spikesnap!=="hovered data"});if(nm.length){var Og=nm[0];m(Og.x0)&&m(Og.y0)&&(Rm=Sp(Og),(!Hh.hLinePoint||Hh.hLinePoint.spikeDistance>Rm.spikeDistance)&&(Hh.hLinePoint=Rm))}}}}}bp();function wp(Tf,xm,jg){for(var Wf=null,wm=1/0,im,fm=0;fm<Tf.length;fm++)Rl&&Rl._id!==Tf[fm].xa._id||Wu&&Wu._id!==Tf[fm].ya._id||(im=Tf[fm].spikeDistance,jg&&fm===0&&(im=-1/0),im<=wm&&im<=xm&&(Wf=Tf[fm],wm=im));return Wf}function Sp(Tf){return Tf?{xa:Tf.xa,ya:Tf.ya,x:Tf.xSpike!==void 0?Tf.xSpike:(Tf.x0+Tf.x1)/2,y:Tf.ySpike!==void 0?Tf.ySpike:(Tf.y0+Tf.y1)/2,distance:Tf.distance,spikeDistance:Tf.spikeDistance,curveNumber:Tf.trace.index,color:Tf.color,pointNumber:Tf.index}:null}var mp={fullLayout:yu,container:yu._hoverlayer,event:re};U._spikepoints;var af={vLinePoint:Hh.vLinePoint,hLinePoint:Hh.hLinePoint};U._spikepoints=af;var _f=function(){var Tf=Ql.filter(function(jg){return Rl&&Rl._id===jg.xa._id&&Wu&&Wu._id===jg.ya._id}),xm=Ql.filter(function(jg){return!(Rl&&Rl._id===jg.xa._id&&Wu&&Wu._id===jg.ya._id)});Tf.sort(In),xm.sort(In),Ql=Tf.concat(xm),Ql=il(Ql,fd)};_f();var Lp=fd.charAt(0),Ef=(Lp==="x"||Lp==="y")&&Ql[0]&&nt[Ql[0].trace.type];if(vd&&Gh!==0&&Ql.length!==0){var Lf=Ql.filter(function(Tf){return Tf.ya.showspikes}),rg=wp(Lf,Gh,Ef);Hh.hLinePoint=Sp(rg);var ng=Ql.filter(function(Tf){return Tf.xa.showspikes}),gf=wp(ng,Gh,Ef);Hh.vLinePoint=Sp(gf)}if(Ql.length===0){var Rf=R.unhoverRaw(U,re);return vd&&(Hh.hLinePoint!==null||Hh.vLinePoint!==null)&&gu()&&Ul(U,Hh,mp),Rf}if(vd&&gu()&&Ul(U,Hh,mp),D.isXYhover(yd)&&Ql[0].length!==0&&Ql[0].trace.type!=="splom"){var yf=Ql[0];ol[yf.trace.type]?Ql=Ql.filter(function(Tf){return Tf.trace.index===yf.trace.index}):Ql=[yf];var cp=Ql.length,_g=X("x",yf,yu),wl=X("y",yf,yu);bp(_g,wl);var pl=[],Yu={},Ju=0,hd=function(Tf){var xm=ol[Tf.trace.type]?Fn(Tf):Tf.trace.index;if(!Yu[xm])Ju++,Yu[xm]=Ju,pl.push(Tf);else{var jg=Yu[xm]-1,Wf=pl[jg];jg>0&&Math.abs(Tf.distance)<Math.abs(Wf.distance)&&(pl[jg]=Tf)}},$u;for($u=0;$u<cp;$u++)hd(Ql[$u]);for($u=Ql.length-1;$u>cp-1;$u--)hd(Ql[$u]);Ql=pl,_f()}var Xu=U._hoverdata,md=[],ld=cl(U),Ld=Sl(U);for(Vl=0;Vl<Ql.length;Vl++){var zd=Ql[Vl],gh=D.makeEventData(zd,zd.trace,zd.cd);if(zd.hovertemplate!==!1){var ep=!1;zd.cd[zd.index]&&zd.cd[zd.index].ht&&(ep=zd.cd[zd.index].ht),zd.hovertemplate=ep||zd.trace.hovertemplate||!1}if(zd.xa&&zd.ya){var Bh=zd.x0+zd.xa._offset,up=zd.x1+zd.xa._offset,Uh=zd.y0+zd.ya._offset,hp=zd.y1+zd.ya._offset,Ep=Math.min(Bh,up),Uf=Math.max(Bh,up),qp=Math.min(Uh,hp),Ag=Math.max(Uh,hp);gh.bbox={x0:Ep+Ld,x1:Uf+Ld,y0:qp+ld,y1:Ag+ld}}zd.eventData=[gh],md.push(gh)}U._hoverdata=md;var bf=fd==="y"&&(Ku.length>1||Ql.length>1)||fd==="closest"&&sp&&Ql.length>1,Ig=b.combine(yu.plot_bgcolor||b.background,yu.paper_bgcolor),yg=sl(Ql,{gd:U,hovermode:fd,rotateLabels:bf,bgColor:Ig,container:yu._hoverlayer,outerContainer:yu._paper.node(),commonLabelOpts:yu.hoverlabel,hoverdistance:yu.hoverdistance}),pm=yg.hoverLabels;if(D.isUnifiedHover(fd)||(ll(pm,bf,yu,yg.commonLabelBoundingBox),bl(pm,bf,yu._invScaleX,yu._invScaleY)),_l&&_l.tagName){var Mg=P.getComponentMethod("annotations","hasClickToShow")(U,md);c(Me.select(_l),Mg?"pointer":"")}!_l||ls||!ql(U,re,Xu)||(Xu&&U.emit("plotly_unhover",{event:re,points:Xu}),U.emit("plotly_hover",{event:re,points:U._hoverdata,xaxes:Wd,yaxes:mh,xvals:gl,yvals:Dl}))}function Fn(U){return[U.trace.index,U.index,U.x0,U.y0,U.name,U.attr,U.xa?U.xa._id:"",U.ya?U.ya._id:""].join(",")}var al=/<extra>([\s\S]*)<\/extra>/;function sl(U,re){var Ft=re.gd,ls=Ft._fullLayout,_l=re.hovermode,Ll=re.rotateLabels,zl=re.bgColor,yu=re.container,Vu=re.outerContainer,od=re.commonLabelOpts||{};if(U.length===0)return[[]];var Ad=re.fontFamily||H.HOVERFONT,vd=re.fontSize||H.HOVERFONTSIZE,fd=re.fontWeight||ls.font.weight,Kl=re.fontStyle||ls.font.style,vu=re.fontVariant||ls.font.variant,Rl=re.fontTextcase||ls.font.textcase,Wu=re.fontLineposition||ls.font.lineposition,cd=re.fontShadow||ls.font.shadow,xd=U[0],Td=xd.xa,Pd=xd.ya,Hd=_l.charAt(0),$d=Hd+"Label",Wd=xd[$d];if(Wd===void 0&&Td.type==="multicategory")for(var mh=0;mh<U.length&&(Wd=U[mh][$d],Wd===void 0);mh++);var Dd=st(Ft,Vu),bh=Dd.top,Dh=Dd.width,vh=Dd.height,Gh=Wd!==void 0&&xd.distance<=re.hoverdistance&&(_l==="x"||_l==="y");if(Gh){var Ql=!0,Ku,gl;for(Ku=0;Ku<U.length;Ku++)if(Ql&&U[Ku].zLabel===void 0&&(Ql=!1),gl=U[Ku].hoverinfo||U[Ku].trace.hoverinfo,gl){var Dl=Array.isArray(gl)?gl:gl.split("+");if(Dl.indexOf("all")===-1&&Dl.indexOf(_l)===-1){Gh=!1;break}}Ql&&(Gh=!1)}var Vl=yu.selectAll("g.axistext").data(Gh?[0]:[]);Vl.enter().append("g").classed("axistext",!0),Vl.exit().remove();var Mu={minX:0,maxX:0,minY:0,maxY:0};if(Vl.each(function(){var cp=Me.select(this),_g=d.ensureSingle(cp,"path","",function(bf){bf.style({"stroke-width":"1px"})}),wl=d.ensureSingle(cp,"text","",function(bf){bf.attr("data-notex",1)}),pl=od.bgcolor||b.defaultLine,Yu=od.bordercolor||b.contrast(pl),Ju=b.contrast(pl),hd=od.font,$u={weight:hd.weight||fd,style:hd.style||Kl,variant:hd.variant||vu,textcase:hd.textcase||Rl,lineposition:hd.lineposition||Wu,shadow:hd.shadow||cd,family:hd.family||Ad,size:hd.size||vd,color:hd.color||Ju};_g.style({fill:pl,stroke:Yu}),wl.text(Wd).call(F.font,$u).call(S.positionText,0,0).call(S.convertToTspans,Ft),cp.attr("transform","");var Xu=st(Ft,wl.node()),md,ld;if(_l==="x"){var Ld=Td.side==="top"?"-":"";wl.attr("text-anchor","middle").call(S.positionText,0,Td.side==="top"?bh-Xu.bottom-se-q:bh-Xu.top+se+q),md=Td._offset+(xd.x0+xd.x1)/2,ld=Pd._offset+(Td.side==="top"?0:Pd._length);var zd=Xu.width/2+q,gh=md;md<zd?gh=zd:md>ls.width-zd&&(gh=ls.width-zd),_g.attr("d","M"+(md-gh)+",0L"+(md-gh+se)+","+Ld+se+"H"+zd+"v"+Ld+(q*2+Xu.height)+"H"+-zd+"V"+Ld+se+"H"+(md-gh-se)+"Z"),md=gh,Mu.minX=md-zd,Mu.maxX=md+zd,Td.side==="top"?(Mu.minY=ld-(q*2+Xu.height),Mu.maxY=ld-q):(Mu.minY=ld+q,Mu.maxY=ld+(q*2+Xu.height))}else{var ep,Bh,up;Pd.side==="right"?(ep="start",Bh=1,up="",md=Td._offset+Td._length):(ep="end",Bh=-1,up="-",md=Td._offset),ld=Pd._offset+(xd.y0+xd.y1)/2,wl.attr("text-anchor",ep),_g.attr("d","M0,0L"+up+se+","+se+"V"+(q+Xu.height/2)+"h"+up+(q*2+Xu.width)+"V-"+(q+Xu.height/2)+"H"+up+se+"V-"+se+"Z"),Mu.minY=ld-(q+Xu.height/2),Mu.maxY=ld+(q+Xu.height/2),Pd.side==="right"?(Mu.minX=md+se,Mu.maxX=md+se+(q*2+Xu.width)):(Mu.minX=md-se-(q*2+Xu.width),Mu.maxX=md-se);var Uh=Xu.height/2,hp=bh-Xu.top-Uh,Ep="clip"+ls._uid+"commonlabel"+Pd._id,Uf;if(md<Xu.width+2*q+se){Uf="M-"+(se+q)+"-"+Uh+"h-"+(Xu.width-q)+"V"+Uh+"h"+(Xu.width-q)+"Z";var qp=Xu.width-md+q;S.positionText(wl,qp,hp),ep==="end"&&wl.selectAll("tspan").each(function(){var bf=Me.select(this),Ig=F.tester.append("text").text(bf.text()).call(F.font,$u),yg=st(Ft,Ig.node());Math.round(yg.width)<Math.round(Xu.width)&&bf.attr("x",qp-yg.width),Ig.remove()})}else S.positionText(wl,Bh*(q+se),hp),Uf=null;var Ag=ls._topclips.selectAll("#"+Ep).data(Uf?[0]:[]);Ag.enter().append("clipPath").attr("id",Ep).append("path"),Ag.exit().remove(),Ag.select("path").attr("d",Uf),F.setClipUrl(wl,Uf?Ep:null,Ft)}cp.attr("transform",v(md,ld))}),D.isUnifiedHover(_l)){yu.selectAll("g.hovertext").remove();var Nu=U.filter(function(cp){return cp.hoverinfo!=="none"});if(Nu.length===0)return[];var ed=ls.hoverlabel,sd=ed.font,Sd=Nu[0],yd=((_l==="x unified"?Sd.xa:Sd.ya).unifiedhovertitle||{}).text,bd=yd?d.hovertemplateString(yd,{},ls._d3locale,_l==="x unified"?{xa:Sd.xa,x:Sd.xVal}:{ya:Sd.ya,y:Sd.yVal}):Wd,Kd={showlegend:!0,legend:{title:{text:bd,font:sd},font:sd,bgcolor:ed.bgcolor,bordercolor:ed.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ls.legend?ls.legend.traceorder:void 0,orientation:"v"}},Jd={font:sd};C(Kd,Jd,Ft._fullData);var th=Jd.legend;th.entries=[];for(var Hh=0;Hh<Nu.length;Hh++){var sp=Nu[Hh];if(sp.hoverinfo!=="none"){var xp=ce(sp,!0,_l,ls,Wd),Pp=xp[0],Up=xp[1];sp.name=Up,Up!==""?sp.text=Up+" : "+Pp:sp.text=Pp;var fp=sp.cd[sp.index];fp&&(fp.mc&&(sp.mc=fp.mc),fp.mcc&&(sp.mc=fp.mcc),fp.mlc&&(sp.mlc=fp.mlc),fp.mlcc&&(sp.mlc=fp.mlcc),fp.mlw&&(sp.mlw=fp.mlw),fp.mrc&&(sp.mrc=fp.mrc),fp.dir&&(sp.dir=fp.dir)),sp._distinct=!0,th.entries.push([sp])}}th.entries.sort(function(cp,_g){return cp[0].trace.index-_g[0].trace.index}),th.layer=yu,th._inHover=!0,th._groupTitleFont=ed.grouptitlefont,A(Ft,th);var zh=yu.select("g.legend"),kp=st(Ft,zh.node()),qh=kp.width+2*q,bp=kp.height+2*q,wp=Nu[0],Sp=(wp.x0+wp.x1)/2,mp=(wp.y0+wp.y1)/2,af=!(P.traceIs(wp.trace,"bar-like")||P.traceIs(wp.trace,"box-violin")),_f,Lp;Hd==="y"?af?(Lp=mp-q,_f=mp+q):(Lp=Math.min.apply(null,Nu.map(function(cp){return Math.min(cp.y0,cp.y1)})),_f=Math.max.apply(null,Nu.map(function(cp){return Math.max(cp.y0,cp.y1)}))):Lp=_f=d.mean(Nu.map(function(cp){return(cp.y0+cp.y1)/2}))-bp/2;var Ef,Lf;Hd==="x"?af?(Ef=Sp+q,Lf=Sp-q):(Ef=Math.max.apply(null,Nu.map(function(cp){return Math.max(cp.x0,cp.x1)})),Lf=Math.min.apply(null,Nu.map(function(cp){return Math.min(cp.x0,cp.x1)}))):Ef=Lf=d.mean(Nu.map(function(cp){return(cp.x0+cp.x1)/2}))-qh/2;var rg=Td._offset,ng=Pd._offset;_f+=ng,Ef+=rg,Lf+=rg-qh,Lp+=ng-bp;var gf,Rf;return Ef+qh<Dh&&Ef>=0?gf=Ef:Lf+qh<Dh&&Lf>=0?gf=Lf:rg+qh<Dh?gf=rg:Ef-Sp<Sp-Lf+qh?gf=Dh-qh:gf=0,gf+=q,_f+bp<vh&&_f>=0?Rf=_f:Lp+bp<vh&&Lp>=0?Rf=Lp:ng+bp<vh?Rf=ng:_f-mp<mp-Lp+bp?Rf=vh-bp:Rf=0,Rf+=q,zh.attr("transform",v(gf-1,Rf-1)),zh}var yf=yu.selectAll("g.hovertext").data(U,function(cp){return Fn(cp)});return yf.enter().append("g").classed("hovertext",!0).each(function(){var cp=Me.select(this);cp.append("rect").call(b.fill,b.addOpacity(zl,.8)),cp.append("text").classed("name",!0),cp.append("path").style("stroke-width","1px"),cp.append("text").classed("nums",!0).call(F.font,{weight:fd,style:Kl,variant:vu,textcase:Rl,lineposition:Wu,shadow:cd,family:Ad,size:vd})}),yf.exit().remove(),yf.each(function(cp){var _g=Me.select(this).attr("transform",""),wl=cp.color;Array.isArray(wl)&&(wl=wl[cp.eventData[0].pointNumber]);var pl=cp.bgcolor||wl,Yu=b.combine(b.opacity(pl)?pl:b.defaultLine,zl),Ju=b.combine(b.opacity(wl)?wl:b.defaultLine,zl),hd=cp.borderColor||b.contrast(Yu),$u=ce(cp,Gh,_l,ls,Wd,_g),Xu=$u[0],md=$u[1],ld=_g.select("text.nums").call(F.font,{family:cp.fontFamily||Ad,size:cp.fontSize||vd,color:cp.fontColor||hd,weight:cp.fontWeight||fd,style:cp.fontStyle||Kl,variant:cp.fontVariant||vu,textcase:cp.fontTextcase||Rl,lineposition:cp.fontLineposition||Wu,shadow:cp.fontShadow||cd}).text(Xu).attr("data-notex",1).call(S.positionText,0,0).call(S.convertToTspans,Ft),Ld=_g.select("text.name"),zd=0,gh=0;if(md&&md!==Xu){Ld.call(F.font,{family:cp.fontFamily||Ad,size:cp.fontSize||vd,color:Ju,weight:cp.fontWeight||fd,style:cp.fontStyle||Kl,variant:cp.fontVariant||vu,textcase:cp.fontTextcase||Rl,lineposition:cp.fontLineposition||Wu,shadow:cp.fontShadow||cd}).text(md).attr("data-notex",1).call(S.positionText,0,0).call(S.convertToTspans,Ft);var ep=st(Ft,Ld.node());zd=ep.width+2*q,gh=ep.height+2*q}else Ld.remove(),_g.select("rect").remove();_g.select("path").style({fill:Yu,stroke:hd});var Bh=cp.xa._offset+(cp.x0+cp.x1)/2,up=cp.ya._offset+(cp.y0+cp.y1)/2,Uh=Math.abs(cp.x1-cp.x0),hp=Math.abs(cp.y1-cp.y0),Ep=st(Ft,ld.node()),Uf=Ep.width/ls._invScaleX,qp=Ep.height/ls._invScaleY;cp.ty0=(bh-Ep.top)/ls._invScaleY,cp.bx=Uf+2*q,cp.by=Math.max(qp+2*q,gh),cp.anchor="start",cp.txwidth=Uf,cp.tx2width=zd,cp.offset=0;var Ag=(Uf+se+q+zd)*ls._invScaleX,bf,Ig;if(Ll)cp.pos=Bh,bf=up+hp/2+Ag<=vh,Ig=up-hp/2-Ag>=0,(cp.idealAlign==="top"||!bf)&&Ig?(up-=hp/2,cp.anchor="end"):bf?(up+=hp/2,cp.anchor="start"):cp.anchor="middle",cp.crossPos=up;else{if(cp.pos=up,bf=Bh+Uh/2+Ag<=Dh,Ig=Bh-Uh/2-Ag>=0,(cp.idealAlign==="left"||!bf)&&Ig)Bh-=Uh/2,cp.anchor="end";else if(bf)Bh+=Uh/2,cp.anchor="start";else{cp.anchor="middle";var yg=Ag/2,pm=Bh+yg-Dh,Mg=Bh-yg;pm>0&&(Bh-=pm),Mg<0&&(Bh+=-Mg)}cp.crossPos=Bh}ld.attr("text-anchor",cp.anchor),zd&&Ld.attr("text-anchor",cp.anchor),_g.attr("transform",v(Bh,up)+(Ll?y(L):""))}),{hoverLabels:yf,commonLabelBoundingBox:Mu}}function ce(U,re,Ft,ls,_l,Ll){var zl="",yu="";U.nameOverride!==void 0&&(U.name=U.nameOverride),U.name&&(U.trace._meta&&(U.name=d.templateString(U.name,U.trace._meta)),zl=Bn(U.name,U.nameLength));var Vu=Ft.charAt(0),od=Vu==="x"?"y":"x";U.zLabel!==void 0?(U.xLabel!==void 0&&(yu+="x: "+U.xLabel+"<br>"),U.yLabel!==void 0&&(yu+="y: "+U.yLabel+"<br>"),U.trace.type!=="choropleth"&&U.trace.type!=="choroplethmapbox"&&U.trace.type!=="choroplethmap"&&(yu+=(yu?"z: ":"")+U.zLabel)):re&&U[Vu+"Label"]===_l?yu=U[od+"Label"]||"":U.xLabel===void 0?U.yLabel!==void 0&&U.trace.type!=="scattercarpet"&&(yu=U.yLabel):U.yLabel===void 0?yu=U.xLabel:yu="("+U.xLabel+", "+U.yLabel+")",(U.text||U.text===0)&&!Array.isArray(U.text)&&(yu+=(yu?"<br>":"")+U.text),U.extraText!==void 0&&(yu+=(yu?"<br>":"")+U.extraText),Ll&&yu===""&&!U.hovertemplate&&(zl===""&&Ll.remove(),yu=zl);var Ad=U.hovertemplate||!1;if(Ad){var vd=U.hovertemplateLabels||U;U[Vu+"Label"]!==_l&&(vd[Vu+"other"]=vd[Vu+"Val"],vd[Vu+"otherLabel"]=vd[Vu+"Label"]),yu=d.hovertemplateString(Ad,vd,ls._d3locale,U.eventData[0]||{},U.trace._meta),yu=yu.replace(al,function(fd,Kl){return zl=Bn(Kl,U.nameLength),""})}return[yu,zl]}function ll(U,re,Ft,ls){var _l=re?"xa":"ya",Ll=re?"ya":"xa",zl=0,yu=1,Vu=U.size(),od=new Array(Vu),Ad=0,vd=ls.minX,fd=ls.maxX,Kl=ls.minY,vu=ls.maxY,Rl=function(gl){return gl*Ft._invScaleX},Wu=function(gl){return gl*Ft._invScaleY};U.each(function(gl){var Dl=gl[_l],Vl=gl[Ll],Mu=Dl._id.charAt(0)==="x",Nu=Dl.range;Ad===0&&Nu&&Nu[0]>Nu[1]!==Mu&&(yu=-1);var ed=0,sd=Mu?Ft.width:Ft.height;if(Ft.hovermode==="x"||Ft.hovermode==="y"){var Sd=ul(gl,re),yd=gl.anchor,bd=yd==="end"?-1:1,Kd,Jd;if(yd==="middle")Kd=gl.crossPos+(Mu?Wu(Sd.y-gl.by/2):Rl(gl.bx/2+gl.tx2width/2)),Jd=Kd+(Mu?Wu(gl.by):Rl(gl.bx));else if(Mu)Kd=gl.crossPos+Wu(se+Sd.y)-Wu(gl.by/2-se),Jd=Kd+Wu(gl.by);else{var th=Rl(bd*se+Sd.x),Hh=th+Rl(bd*gl.bx);Kd=gl.crossPos+Math.min(th,Hh),Jd=gl.crossPos+Math.max(th,Hh)}Mu?Kl!==void 0&&vu!==void 0&&Math.min(Jd,vu)-Math.max(Kd,Kl)>1&&(Vl.side==="left"?(ed=Vl._mainLinePosition,sd=Ft.width):sd=Vl._mainLinePosition):vd!==void 0&&fd!==void 0&&Math.min(Jd,fd)-Math.max(Kd,vd)>1&&(Vl.side==="top"?(ed=Vl._mainLinePosition,sd=Ft.height):sd=Vl._mainLinePosition)}od[Ad++]=[{datum:gl,traceIndex:gl.trace.index,dp:0,pos:gl.pos,posref:gl.posref,size:gl.by*(Mu?Z:1)/2,pmin:ed,pmax:sd}]}),od.sort(function(gl,Dl){return gl[0].posref-Dl[0].posref||yu*(Dl[0].traceIndex-gl[0].traceIndex)});var cd,xd,Td,Pd,Hd,$d,Wd;function mh(gl){var Dl=gl[0],Vl=gl[gl.length-1];if(xd=Dl.pmin-Dl.pos-Dl.dp+Dl.size,Td=Vl.pos+Vl.dp+Vl.size-Dl.pmax,xd>.01){for(Hd=gl.length-1;Hd>=0;Hd--)gl[Hd].dp+=xd;cd=!1}if(!(Td<.01)){if(xd<-.01){for(Hd=gl.length-1;Hd>=0;Hd--)gl[Hd].dp-=Td;cd=!1}if(cd){var Mu=0;for(Pd=0;Pd<gl.length;Pd++)$d=gl[Pd],$d.pos+$d.dp+$d.size>Dl.pmax&&Mu++;for(Pd=gl.length-1;Pd>=0&&!(Mu<=0);Pd--)$d=gl[Pd],$d.pos>Dl.pmax-1&&($d.del=!0,Mu--);for(Pd=0;Pd<gl.length&&!(Mu<=0);Pd++)if($d=gl[Pd],$d.pos<Dl.pmin+1)for($d.del=!0,Mu--,Td=$d.size*2,Hd=gl.length-1;Hd>=0;Hd--)gl[Hd].dp-=Td;for(Pd=gl.length-1;Pd>=0&&!(Mu<=0);Pd--)$d=gl[Pd],$d.pos+$d.dp+$d.size>Dl.pmax&&($d.del=!0,Mu--)}}}for(;!cd&&zl<=Vu;){for(zl++,cd=!0,Pd=0;Pd<od.length-1;){var Dd=od[Pd],bh=od[Pd+1],Dh=Dd[Dd.length-1],vh=bh[0];if(xd=Dh.pos+Dh.dp+Dh.size-vh.pos-vh.dp+vh.size,xd>.01){for(Hd=bh.length-1;Hd>=0;Hd--)bh[Hd].dp+=xd;for(Dd.push.apply(Dd,bh),od.splice(Pd+1,1),Wd=0,Hd=Dd.length-1;Hd>=0;Hd--)Wd+=Dd[Hd].dp;for(Td=Wd/Dd.length,Hd=Dd.length-1;Hd>=0;Hd--)Dd[Hd].dp-=Td;cd=!1}else Pd++}od.forEach(mh)}for(Pd=od.length-1;Pd>=0;Pd--){var Gh=od[Pd];for(Hd=Gh.length-1;Hd>=0;Hd--){var Ql=Gh[Hd],Ku=Ql.datum;Ku.offset=Ql.dp,Ku.del=Ql.del}}}function ul(U,re){var Ft=0,ls=U.offset;return re&&(ls*=-Pe,Ft=U.offset*nl),{x:Ft,y:ls}}function fl(U){var re={start:1,end:-1,middle:0}[U.anchor],Ft=re*(se+q),ls=Ft+re*(U.txwidth+q),_l=U.anchor==="middle";return _l&&(Ft-=U.tx2width/2,ls+=U.txwidth/2+q),{alignShift:re,textShiftX:Ft,text2ShiftX:ls}}function bl(U,re,Ft,ls){var _l=function(zl){return zl*Ft},Ll=function(zl){return zl*ls};U.each(function(zl){var yu=Me.select(this);if(zl.del)return yu.remove();var Vu=yu.select("text.nums"),od=zl.anchor,Ad=od==="end"?-1:1,vd=fl(zl),fd=ul(zl,re),Kl=fd.x,vu=fd.y,Rl=od==="middle",Wu="hoverlabel"in zl.trace?zl.trace.hoverlabel.showarrow:!0,cd;Rl?cd="M-"+_l(zl.bx/2+zl.tx2width/2)+","+Ll(vu-zl.by/2)+"h"+_l(zl.bx)+"v"+Ll(zl.by)+"h-"+_l(zl.bx)+"Z":Wu?cd="M0,0L"+_l(Ad*se+Kl)+","+Ll(se+vu)+"v"+Ll(zl.by/2-se)+"h"+_l(Ad*zl.bx)+"v-"+Ll(zl.by)+"H"+_l(Ad*se+Kl)+"V"+Ll(vu-se)+"Z":cd="M"+_l(Ad*se+Kl)+","+Ll(vu-zl.by/2)+"h"+_l(Ad*zl.bx)+"v"+Ll(zl.by)+"h"+_l(-Ad*zl.bx)+"Z",yu.select("path").attr("d",cd);var xd=Kl+vd.textShiftX,Td=vu+zl.ty0-zl.by/2+q,Pd=zl.textAlign||"auto";Pd!=="auto"&&(Pd==="left"&&od!=="start"?(Vu.attr("text-anchor","start"),xd=Rl?-zl.bx/2-zl.tx2width/2+q:-zl.bx-q):Pd==="right"&&od!=="end"&&(Vu.attr("text-anchor","end"),xd=Rl?zl.bx/2-zl.tx2width/2-q:zl.bx+q)),Vu.call(S.positionText,_l(xd),Ll(Td)),zl.tx2width&&(yu.select("text.name").call(S.positionText,_l(vd.text2ShiftX+vd.alignShift*q+Kl),Ll(vu+zl.ty0-zl.by/2+q)),yu.select("rect").call(F.setRect,_l(vd.text2ShiftX+(vd.alignShift-1)*zl.tx2width/2+Kl),Ll(vu-zl.by/2-1),_l(zl.tx2width),Ll(zl.by+2)))})}function El(U,re){var Ft=U.index,ls=U.trace||{},_l=U.cd[0],Ll=U.cd[Ft]||{};function zl(fd){return fd||m(fd)&&fd===0}var yu=Array.isArray(Ft)?function(fd,Kl){var vu=d.castOption(_l,Ft,fd);return zl(vu)?vu:d.extractOption({},ls,"",Kl)}:function(fd,Kl){return d.extractOption(Ll,ls,fd,Kl)};function Vu(fd,Kl,vu){var Rl=yu(Kl,vu);zl(Rl)&&(U[fd]=Rl)}if(Vu("hoverinfo","hi","hoverinfo"),Vu("bgcolor","hbg","hoverlabel.bgcolor"),Vu("borderColor","hbc","hoverlabel.bordercolor"),Vu("fontFamily","htf","hoverlabel.font.family"),Vu("fontSize","hts","hoverlabel.font.size"),Vu("fontColor","htc","hoverlabel.font.color"),Vu("fontWeight","htw","hoverlabel.font.weight"),Vu("fontStyle","hty","hoverlabel.font.style"),Vu("fontVariant","htv","hoverlabel.font.variant"),Vu("nameLength","hnl","hoverlabel.namelength"),Vu("textAlign","hta","hoverlabel.align"),U.posref=re==="y"||re==="closest"&&ls.orientation==="h"?U.xa._offset+(U.x0+U.x1)/2:U.ya._offset+(U.y0+U.y1)/2,U.x0=d.constrain(U.x0,0,U.xa._length),U.x1=d.constrain(U.x1,0,U.xa._length),U.y0=d.constrain(U.y0,0,U.ya._length),U.y1=d.constrain(U.y1,0,U.ya._length),U.xLabelVal!==void 0&&(U.xLabel="xLabel"in U?U.xLabel:B.hoverLabelText(U.xa,U.xLabelVal,ls.xhoverformat),U.xVal=U.xa.c2d(U.xLabelVal)),U.yLabelVal!==void 0&&(U.yLabel="yLabel"in U?U.yLabel:B.hoverLabelText(U.ya,U.yLabelVal,ls.yhoverformat),U.yVal=U.ya.c2d(U.yLabelVal)),U.zLabelVal!==void 0&&U.zLabel===void 0&&(U.zLabel=String(U.zLabelVal)),!isNaN(U.xerr)&&!(U.xa.type==="log"&&U.xerr<=0)){var od=B.tickText(U.xa,U.xa.c2l(U.xerr),"hover").text;U.xerrneg!==void 0?U.xLabel+=" +"+od+" / -"+B.tickText(U.xa,U.xa.c2l(U.xerrneg),"hover").text:U.xLabel+="  "+od,re==="x"&&(U.distance+=1)}if(!isNaN(U.yerr)&&!(U.ya.type==="log"&&U.yerr<=0)){var Ad=B.tickText(U.ya,U.ya.c2l(U.yerr),"hover").text;U.yerrneg!==void 0?U.yLabel+=" +"+Ad+" / -"+B.tickText(U.ya,U.ya.c2l(U.yerrneg),"hover").text:U.yLabel+="  "+Ad,re==="y"&&(U.distance+=1)}var vd=U.hoverinfo||U.trace.hoverinfo;return vd&&vd!=="all"&&(vd=Array.isArray(vd)?vd:vd.split("+"),vd.indexOf("x")===-1&&(U.xLabel=void 0),vd.indexOf("y")===-1&&(U.yLabel=void 0),vd.indexOf("z")===-1&&(U.zLabel=void 0),vd.indexOf("text")===-1&&(U.text=void 0),vd.indexOf("name")===-1&&(U.name=void 0)),U}function Ul(U,re,Ft){var ls=Ft.container,_l=Ft.fullLayout,Ll=_l._size,zl=Ft.event,yu=!!re.hLinePoint,Vu=!!re.vLinePoint,od,Ad;if(ls.selectAll(".spikeline").remove(),!!(Vu||yu)){var vd=b.combine(_l.plot_bgcolor,_l.paper_bgcolor);if(yu){var fd=re.hLinePoint,Kl,vu;od=fd&&fd.xa,Ad=fd&&fd.ya;var Rl=Ad.spikesnap;Rl==="cursor"?(Kl=zl.pointerX,vu=zl.pointerY):(Kl=od._offset+fd.x,vu=Ad._offset+fd.y);var Wu=l.readability(fd.color,vd)<1.5?b.contrast(vd):fd.color,cd=Ad.spikemode,xd=Ad.spikethickness,Td=Ad.spikecolor||Wu,Pd=B.getPxPosition(U,Ad),Hd,$d;if(cd.indexOf("toaxis")!==-1||cd.indexOf("across")!==-1){if(cd.indexOf("toaxis")!==-1&&(Hd=Pd,$d=Kl),cd.indexOf("across")!==-1){var Wd=Ad._counterDomainMin,mh=Ad._counterDomainMax;Ad.anchor==="free"&&(Wd=Math.min(Wd,Ad.position),mh=Math.max(mh,Ad.position)),Hd=Ll.l+Wd*Ll.w,$d=Ll.l+mh*Ll.w}ls.insert("line",":first-child").attr({x1:Hd,x2:$d,y1:vu,y2:vu,"stroke-width":xd,stroke:Td,"stroke-dasharray":F.dashStyle(Ad.spikedash,xd)}).classed("spikeline",!0).classed("crisp",!0),ls.insert("line",":first-child").attr({x1:Hd,x2:$d,y1:vu,y2:vu,"stroke-width":xd+2,stroke:vd}).classed("spikeline",!0).classed("crisp",!0)}cd.indexOf("marker")!==-1&&ls.insert("circle",":first-child").attr({cx:Pd+(Ad.side!=="right"?xd:-xd),cy:vu,r:xd,fill:Td}).classed("spikeline",!0)}if(Vu){var Dd=re.vLinePoint,bh,Dh;od=Dd&&Dd.xa,Ad=Dd&&Dd.ya;var vh=od.spikesnap;vh==="cursor"?(bh=zl.pointerX,Dh=zl.pointerY):(bh=od._offset+Dd.x,Dh=Ad._offset+Dd.y);var Gh=l.readability(Dd.color,vd)<1.5?b.contrast(vd):Dd.color,Ql=od.spikemode,Ku=od.spikethickness,gl=od.spikecolor||Gh,Dl=B.getPxPosition(U,od),Vl,Mu;if(Ql.indexOf("toaxis")!==-1||Ql.indexOf("across")!==-1){if(Ql.indexOf("toaxis")!==-1&&(Vl=Dl,Mu=Dh),Ql.indexOf("across")!==-1){var Nu=od._counterDomainMin,ed=od._counterDomainMax;od.anchor==="free"&&(Nu=Math.min(Nu,od.position),ed=Math.max(ed,od.position)),Vl=Ll.t+(1-ed)*Ll.h,Mu=Ll.t+(1-Nu)*Ll.h}ls.insert("line",":first-child").attr({x1:bh,x2:bh,y1:Vl,y2:Mu,"stroke-width":Ku,stroke:gl,"stroke-dasharray":F.dashStyle(od.spikedash,Ku)}).classed("spikeline",!0).classed("crisp",!0),ls.insert("line",":first-child").attr({x1:bh,x2:bh,y1:Vl,y2:Mu,"stroke-width":Ku+2,stroke:vd}).classed("spikeline",!0).classed("crisp",!0)}Ql.indexOf("marker")!==-1&&ls.insert("circle",":first-child").attr({cx:bh,cy:Dl-(od.side!=="top"?Ku:-Ku),r:Ku,fill:gl}).classed("spikeline",!0)}}}function ql(U,re,Ft){if(!Ft||Ft.length!==U._hoverdata.length)return!0;for(var ls=Ft.length-1;ls>=0;ls--){var _l=Ft[ls],Ll=U._hoverdata[ls];if(_l.curveNumber!==Ll.curveNumber||String(_l.pointNumber)!==String(Ll.pointNumber)||String(_l.pointNumbers)!==String(Ll.pointNumbers)||_l.binNumber!==Ll.binNumber)return!0}return!1}function gu(U,re){return!0}function Bn(U,re){return S.plainText(U||"",{len:re,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function il(U,re){for(var Ft=re.charAt(0),ls=[],_l=[],Ll=[],zl=0;zl<U.length;zl++){var yu=U[zl];P.traceIs(yu.trace,"bar-like")||P.traceIs(yu.trace,"box-violin")?Ll.push(yu):yu.trace[Ft+"period"]?_l.push(yu):ls.push(yu)}return ls.concat(_l).concat(Ll)}function X(U,re,Ft){var ls=re[U+"a"],_l=re[U+"Val"],Ll=re.cd[0];if(ls.type==="category"||ls.type==="multicategory")_l=ls._categoriesMap[_l];else if(ls.type==="date"){var zl=re.trace[U+"periodalignment"];if(zl){var yu=re.cd[re.index],Vu=yu[U+"Start"];Vu===void 0&&(Vu=yu[U]);var od=yu[U+"End"];od===void 0&&(od=yu[U]);var Ad=od-Vu;zl==="end"?_l+=Ad:zl==="middle"&&(_l+=Ad/2)}_l=ls.d2c(_l)}return Ll&&Ll.t&&Ll.t.posLetter===ls._id&&(Ft.boxmode==="group"||Ft.violinmode==="group")&&(_l+=Ll.t.dPos),_l}function cl(U){return U.offsetTop+U.clientTop}function Sl(U){return U.offsetLeft+U.clientLeft}function st(U,re){var Ft=U._fullLayout,ls=re.getBoundingClientRect(),_l=ls.left,Ll=ls.top,zl=_l+ls.width,yu=Ll+ls.height,Vu=d.apply3DTransform(Ft._invTransform)(_l,Ll),od=d.apply3DTransform(Ft._invTransform)(zl,yu),Ad=Vu[0],vd=Vu[1],fd=od[0],Kl=od[1];return{x:Ad,y:vd,width:fd-Ad,height:Kl-vd,top:Math.min(vd,Kl),left:Math.min(Ad,fd),right:Math.max(Ad,fd),bottom:Math.max(vd,Kl)}}}),Op=s((ot,Me)=>{var m=rt(),l=oh(),d=wd().isUnifiedHover;Me.exports=function(x,v,y,w){w=w||{};var S=v.legend;function c(F){w.font[F]||(w.font[F]=S?v.legend.font[F]:v.font[F])}v&&d(v.hovermode)&&(w.font||(w.font={}),c("size"),c("family"),c("color"),c("weight"),c("style"),c("variant"),S?(w.bgcolor||(w.bgcolor=l.combine(v.legend.bgcolor,v.paper_bgcolor)),w.bordercolor||(w.bordercolor=v.legend.bordercolor)):w.bgcolor||(w.bgcolor=v.paper_bgcolor)),y("hoverlabel.bgcolor",w.bgcolor),y("hoverlabel.bordercolor",w.bordercolor),y("hoverlabel.namelength",w.namelength),y("hoverlabel.showarrow",w.showarrow),m.coerceFont(y,"hoverlabel.font",w.font),y("hoverlabel.align",w.align)}}),Jp=s((ot,Me)=>{var m=rt(),l=Op(),d=ud();Me.exports=function(x,v){function y(w,S){return m.coerce(x,v,d,w,S)}l(x,v,y)}}),Df=s((ot,Me)=>{var m=rt(),l=pd(),d=Op();Me.exports=function(x,v,y,w){function S(F,b){return m.coerce(x,v,l,F,b)}var c=m.extendFlat({},w.hoverlabel);v.hovertemplate&&(c.namelength=-1),d(x,v,S,c)}}),tm=s((ot,Me)=>{var m=rt(),l=ud();Me.exports=function(d,x){function v(y,w){return x[y]!==void 0?x[y]:m.coerce(d,x,l,y,w)}return v("clickmode"),v("hoversubplots"),v("hovermode")}}),og=s((ot,Me)=>{var m=rt(),l=ud(),d=tm(),x=Op();Me.exports=function(v,y){function w(O,P){return m.coerce(v,y,l,O,P)}var S=d(v,y);S&&(w("hoverdistance"),w("spikedistance"));var c=w("dragmode");c==="select"&&w("selectdirection");var F=y._has("mapbox"),b=y._has("map"),R=y._has("geo"),B=y._basePlotModules.length;y.dragmode==="zoom"&&((F||b||R)&&B===1||(F||b)&&R&&B===2)&&(y.dragmode="pan"),x(v,y,w),m.coerceFont(w,"hoverlabel.grouptitlefont",y.hoverlabel.font)}}),tg=s((ot,Me)=>{var m=rt(),l=ff();Me.exports=function(x){var v=x.calcdata,y=x._fullLayout;function w(R){return function(B){return m.coerceHoverinfo({hoverinfo:B},{_module:R._module},y)}}for(var S=0;S<v.length;S++){var c=v[S],F=c[0].trace;if(!l.traceIs(F,"pie-like")){var b=l.traceIs(F,"2dMap")?d:m.fillArray;b(F.hoverinfo,c,"hi",w(F)),F.hovertemplate&&b(F.hovertemplate,c,"ht"),F.hoverlabel&&(b(F.hoverlabel.bgcolor,c,"hbg"),b(F.hoverlabel.bordercolor,c,"hbc"),b(F.hoverlabel.font.size,c,"hts"),b(F.hoverlabel.font.color,c,"htc"),b(F.hoverlabel.font.family,c,"htf"),b(F.hoverlabel.font.weight,c,"htw"),b(F.hoverlabel.font.style,c,"hty"),b(F.hoverlabel.font.variant,c,"htv"),b(F.hoverlabel.namelength,c,"hnl"),b(F.hoverlabel.align,c,"hta"),b(F.hoverlabel.showarrow,c,"htsa"))}}};function d(x,v,y,w){w=w||m.identity,Array.isArray(x)&&(v[0][y]=w(x))}}),Zf=s((ot,Me)=>{var m=ff(),l=Vp().hover;Me.exports=function(d,x,v){var y=m.getComponentMethod("annotations","onClick")(d,d._hoverdata);v!==void 0&&l(d,x,v,!0);function w(){d.emit("plotly_click",{points:d._hoverdata,event:x})}d._hoverdata&&x&&x.target&&(y&&y.then?y.then(w):w(),x.stopImmediatePropagation&&x.stopImmediatePropagation())}}),Xf=s((ot,Me)=>{var m=$(),l=rt(),d=Th(),x=wd(),v=ud(),y=Vp();Me.exports={moduleType:"component",name:"fx",constants:Il(),schema:{layout:v},attributes:pd(),layoutAttributes:v,supplyLayoutGlobalDefaults:Jp(),supplyDefaults:Df(),supplyLayoutDefaults:og(),calc:tg(),getDistanceFunction:x.getDistanceFunction,getClosest:x.getClosest,inbox:x.inbox,quadrature:x.quadrature,appendArrayPointValue:x.appendArrayPointValue,castHoverOption:S,castHoverinfo:c,hover:y.hover,unhover:d.unhover,loneHover:y.loneHover,loneUnhover:w,click:Zf()};function w(F){var b=l.isD3Selection(F)?F:m.select(F);b.selectAll("g.hovertext").remove(),b.selectAll(".spikeline").remove()}function S(F,b,R){return l.castOption(F,b,"hoverlabel."+R)}function c(F,b,R){function B(O){return l.coerceHoverinfo({hoverinfo:O},{_module:F._module},b)}return l.castOption(F,R,"hoverinfo",B)}}),Nf=s(ot=>{ot.selectMode=function(Me){return Me==="lasso"||Me==="select"},ot.drawMode=function(Me){return Me==="drawclosedpath"||Me==="drawopenpath"||Me==="drawline"||Me==="drawrect"||Me==="drawcircle"},ot.openMode=function(Me){return Me==="drawline"||Me==="drawopenpath"},ot.rectMode=function(Me){return Me==="select"||Me==="drawline"||Me==="drawrect"||Me==="drawcircle"},ot.freeMode=function(Me){return Me==="lasso"||Me==="drawclosedpath"||Me==="drawopenpath"},ot.selectingOrDrawing=function(Me){return ot.freeMode(Me)||ot.rectMode(Me)}}),ag=s((ot,Me)=>{Me.exports=function(m){var l=m._fullLayout;l._glcanvas&&l._glcanvas.size()&&l._glcanvas.each(function(d){d.regl&&d.regl.clear({color:!0,depth:!0})})}}),vg=s((ot,Me)=>{Me.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}}),Pg=s((ot,Me)=>{var m=32;Me.exports={CIRCLE_SIDES:m,i000:0,i090:m/4,i180:m/2,i270:m/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}}),cg=s((ot,Me)=>{var m=rt().strTranslate;function l(y,w){switch(y.type){case"log":return y.p2d(w);case"date":return y.p2r(w,0,y.calendar);default:return y.p2r(w)}}function d(y,w){switch(y.type){case"log":return y.d2p(w);case"date":return y.r2p(w,0,y.calendar);default:return y.r2p(w)}}function x(y){var w=y._id.charAt(0)==="y"?1:0;return function(S){return l(y,S[w])}}function v(y){return m(y.xaxis._offset,y.yaxis._offset)}Me.exports={p2r:l,r2p:d,axValue:x,getTransform:v}}),kg=s(ot=>{var Me=gd(),m=Pg(),l=m.CIRCLE_SIDES,d=m.SQRT2,x=cg(),v=x.p2r,y=x.r2p,w=[0,3,4,5,6,1,2],S=[0,3,4,1,2];ot.writePaths=function(b){var R=b.length;if(!R)return"M0,0Z";for(var B="",O=0;O<R;O++)for(var P=b[O].length,D=0;D<P;D++){var H=b[O][D][0];if(H==="Z")B+="Z";else for(var C=b[O][D].length,A=0;A<C;A++){var L=A;H==="Q"||H==="S"?L=S[A]:H==="C"&&(L=w[A]),B+=b[O][D][L],A>0&&A<C-1&&(B+=",")}}return B},ot.readPaths=function(b,R,B,O){var P=Me(b),D=[],H=-1,C=function(){H++,D[H]=[]},A,L=0,j=0,Z,nl,Pe=function(){Z=L,nl=j};Pe();for(var se=0;se<P.length;se++){var q=[],ol,nt,In,_t,Fn=P[se][0],al=Fn;switch(Fn){case"M":C(),L=+P[se][1],j=+P[se][2],q.push([al,L,j]),Pe();break;case"Q":case"S":ol=+P[se][1],In=+P[se][2],L=+P[se][3],j=+P[se][4],q.push([al,L,j,ol,In]);break;case"C":ol=+P[se][1],In=+P[se][2],nt=+P[se][3],_t=+P[se][4],L=+P[se][5],j=+P[se][6],q.push([al,L,j,ol,In,nt,_t]);break;case"T":case"L":L=+P[se][1],j=+P[se][2],q.push([al,L,j]);break;case"H":al="L",L=+P[se][1],q.push([al,L,j]);break;case"V":al="L",j=+P[se][1],q.push([al,L,j]);break;case"A":al="L";var sl=+P[se][1],ce=+P[se][2];+P[se][4]||(sl=-sl,ce=-ce);var ll=L-sl,ul=j;for(A=1;A<=l/2;A++){var fl=2*Math.PI*A/l;q.push([al,ll+sl*Math.cos(fl),ul+ce*Math.sin(fl)])}break;case"Z":(L!==Z||j!==nl)&&(L=Z,j=nl,q.push([al,L,j]));break}for(var bl=(B||{}).domain,El=R._fullLayout._size,Ul=B&&B.xsizemode==="pixel",ql=B&&B.ysizemode==="pixel",gu=O===!1,Bn=0;Bn<q.length;Bn++){for(A=0;A+2<7;A+=2){var il=q[Bn][A+1],X=q[Bn][A+2];il===void 0||X===void 0||(L=il,j=X,B&&(B.xaxis&&B.xaxis.p2r?(gu&&(il-=B.xaxis._offset),Ul?il=y(B.xaxis,B.xanchor)+il:il=v(B.xaxis,il)):(gu&&(il-=El.l),bl?il=bl.x[0]+il/El.w:il=il/El.w),B.yaxis&&B.yaxis.p2r?(gu&&(X-=B.yaxis._offset),ql?X=y(B.yaxis,B.yanchor)-X:X=v(B.yaxis,X)):(gu&&(X-=El.t),bl?X=bl.y[1]-X/El.h:X=1-X/El.h)),q[Bn][A+1]=il,q[Bn][A+2]=X)}D[H].push(q[Bn].slice())}}return D};function c(b,R){return Math.abs(b-R)<=1e-6}function F(b,R){var B=R[1]-b[1],O=R[2]-b[2];return Math.sqrt(B*B+O*O)}ot.pointsOnRectangle=function(b){var R=b.length;if(R!==5)return!1;for(var B=1;B<3;B++){var O=b[0][B]-b[1][B],P=b[3][B]-b[2][B];if(!c(O,P))return!1;var D=b[0][B]-b[3][B],H=b[1][B]-b[2][B];if(!c(D,H))return!1}return!c(b[0][1],b[1][1])&&!c(b[0][1],b[3][1])?!1:!!(F(b[0],b[1])*F(b[0],b[3]))},ot.pointsOnEllipse=function(b){var R=b.length;if(R!==l+1)return!1;R=l;for(var B=0;B<R;B++){var O=(R*2-B)%R,P=(R/2+O)%R,D=(R/2+B)%R;if(!c(F(b[B],b[D]),F(b[O],b[P])))return!1}return!0},ot.handleEllipse=function(b,R,B){if(!b)return[R,B];var O=ot.ellipseOver({x0:R[0],y0:R[1],x1:B[0],y1:B[1]}),P=(O.x1+O.x0)/2,D=(O.y1+O.y0)/2,H=(O.x1-O.x0)/2,C=(O.y1-O.y0)/2;H||(H=C=C/d),C||(C=H=H/d);for(var A=[],L=0;L<l;L++){var j=L*2*Math.PI/l;A.push([P+H*Math.cos(j),D+C*Math.sin(j)])}return A},ot.ellipseOver=function(b){var R=b.x0,B=b.y0,O=b.x1,P=b.y1,D=O-R,H=P-B;R-=D,B-=H;var C=(R+O)/2,A=(B+P)/2,L=d;return D*=L,H*=L,{x0:C-D,y0:A-H,x1:C+D,y1:A+H}},ot.fixDatesForPaths=function(b,R,B){var O=R.type==="date",P=B.type==="date";if(!O&&!P)return b;for(var D=0;D<b.length;D++)for(var H=0;H<b[D].length;H++)for(var C=0;C+2<b[D][H].length;C+=2)O&&(b[D][H][C+1]=b[D][H][C+1].replace(" ","_")),P&&(b[D][H][C+2]=b[D][H][C+2].replace(" ","_"));return b}}),Bf=s((ot,Me)=>{var m=Rh(),l=Nf(),d=l.drawMode,x=l.openMode,v=Pg(),y=v.i000,w=v.i090,S=v.i180,c=v.i270,F=v.cos45,b=v.sin45,R=cg(),B=R.p2r,O=R.r2p,P=xf(),D=P.clearOutline,H=kg(),C=H.readPaths,A=H.writePaths,L=H.ellipseOver,j=H.fixDatesForPaths;function Z(Pe,se){if(Pe.length){var q=Pe[0][0];if(q){var ol=se.gd,nt=se.isActiveShape,In=se.dragmode,_t=(ol.layout||{}).shapes||[];if(!d(In)&&nt!==void 0){var Fn=ol._fullLayout._activeShapeIndex;if(Fn<_t.length)switch(ol._fullLayout.shapes[Fn].type){case"rect":In="drawrect";break;case"circle":In="drawcircle";break;case"line":In="drawline";break;case"path":var al=_t[Fn].path||"";al[al.length-1]==="Z"?In="drawclosedpath":In="drawopenpath";break}}var sl=nl(Pe,se,In);D(ol);for(var ce=se.editHelpers,ll=(ce||{}).modifyItem,ul=[],fl=0;fl<_t.length;fl++){var bl=ol._fullLayout.shapes[fl];if(ul[fl]=bl._input,nt!==void 0&&fl===ol._fullLayout._activeShapeIndex){var El=sl;switch(bl.type){case"line":case"rect":case"circle":var Ul=m.getFromId(ol,bl.xref);bl.xref.charAt(0)==="x"&&Ul.type.includes("category")?(ll("x0",El.x0-(bl.x0shift||0)),ll("x1",El.x1-(bl.x1shift||0))):(ll("x0",El.x0),ll("x1",El.x1));var ql=m.getFromId(ol,bl.yref);bl.yref.charAt(0)==="y"&&ql.type.includes("category")?(ll("y0",El.y0-(bl.y0shift||0)),ll("y1",El.y1-(bl.y1shift||0))):(ll("y0",El.y0),ll("y1",El.y1));break;case"path":ll("path",El.path);break}}}return nt===void 0?(ul.push(sl),ul):ce?ce.getUpdateObj():{}}}}function nl(Pe,se,q){var ol=Pe[0][0],nt=se.gd,In=ol.getAttribute("d"),_t=nt._fullLayout.newshape,Fn=se.plotinfo,al=se.isActiveShape,sl=Fn.xaxis,ce=Fn.yaxis,ll=!!Fn.domain||!Fn.xaxis,ul=!!Fn.domain||!Fn.yaxis,fl=x(q),bl=C(In,nt,Fn,al),El={editable:!0,visible:_t.visible,name:_t.name,showlegend:_t.showlegend,legend:_t.legend,legendwidth:_t.legendwidth,legendgroup:_t.legendgroup,legendgrouptitle:{text:_t.legendgrouptitle.text,font:_t.legendgrouptitle.font},legendrank:_t.legendrank,label:_t.label,xref:ll?"paper":sl._id,yref:ul?"paper":ce._id,layer:_t.layer,opacity:_t.opacity,line:{color:_t.line.color,width:_t.line.width,dash:_t.line.dash}};fl||(El.fillcolor=_t.fillcolor,El.fillrule=_t.fillrule);var Ul;if(bl.length===1&&(Ul=bl[0]),Ul&&Ul.length===5&&q==="drawrect")El.type="rect",El.x0=Ul[0][1],El.y0=Ul[0][2],El.x1=Ul[2][1],El.y1=Ul[2][2];else if(Ul&&q==="drawline")El.type="line",El.x0=Ul[0][1],El.y0=Ul[0][2],El.x1=Ul[1][1],El.y1=Ul[1][2];else if(Ul&&q==="drawcircle"){El.type="circle";var ql=Ul[y][1],gu=Ul[w][1],Bn=Ul[S][1],il=Ul[c][1],X=Ul[y][2],cl=Ul[w][2],Sl=Ul[S][2],st=Ul[c][2],U=Fn.xaxis&&(Fn.xaxis.type==="date"||Fn.xaxis.type==="log"),re=Fn.yaxis&&(Fn.yaxis.type==="date"||Fn.yaxis.type==="log");U&&(ql=O(Fn.xaxis,ql),gu=O(Fn.xaxis,gu),Bn=O(Fn.xaxis,Bn),il=O(Fn.xaxis,il)),re&&(X=O(Fn.yaxis,X),cl=O(Fn.yaxis,cl),Sl=O(Fn.yaxis,Sl),st=O(Fn.yaxis,st));var Ft=(gu+il)/2,ls=(X+Sl)/2,_l=(il-gu+Bn-ql)/2,Ll=(st-cl+Sl-X)/2,zl=L({x0:Ft,y0:ls,x1:Ft+_l*F,y1:ls+Ll*b});U&&(zl.x0=B(Fn.xaxis,zl.x0),zl.x1=B(Fn.xaxis,zl.x1)),re&&(zl.y0=B(Fn.yaxis,zl.y0),zl.y1=B(Fn.yaxis,zl.y1)),El.x0=zl.x0,El.y0=zl.y0,El.x1=zl.x1,El.y1=zl.y1}else El.type="path",sl&&ce&&j(bl,sl,ce),El.path=A(bl),Ul=null;return El}Me.exports={newShapes:Z,createShapeObj:nl}}),Tg=s((ot,Me)=>{var m=Nf(),l=m.selectMode,d=xf(),x=d.clearOutline,v=kg(),y=v.readPaths,w=v.writePaths,S=v.fixDatesForPaths;Me.exports=function(c,F){if(c.length){var b=c[0][0];if(b){var R=b.getAttribute("d"),B=F.gd,O=B._fullLayout.newselection,P=F.plotinfo,D=P.xaxis,H=P.yaxis,C=F.isActiveSelection,A=F.dragmode,L=(B.layout||{}).selections||[];if(!l(A)&&C!==void 0){var j=B._fullLayout._activeSelectionIndex;if(j<L.length)switch(B._fullLayout.selections[j].type){case"rect":A="select";break;case"path":A="lasso";break}}var Z=y(R,B,P,C),nl={xref:D._id,yref:H._id,opacity:O.opacity,line:{color:O.line.color,width:O.line.width,dash:O.line.dash}},Pe;Z.length===1&&(Pe=Z[0]),Pe&&Pe.length===5&&A==="select"?(nl.type="rect",nl.x0=Pe[0][1],nl.y0=Pe[0][2],nl.x1=Pe[2][1],nl.y1=Pe[2][2]):(nl.type="path",D&&H&&S(Z,D,H),nl.path=w(Z),Pe=null),x(B);for(var se=F.editHelpers,q=(se||{}).modifyItem,ol=[],nt=0;nt<L.length;nt++){var In=B._fullLayout.selections[nt];if(!In){ol[nt]=In;continue}if(ol[nt]=In._input,C!==void 0&&nt===B._fullLayout._activeSelectionIndex){var _t=nl;switch(In.type){case"rect":q("x0",_t.x0),q("x1",_t.x1),q("y0",_t.y0),q("y1",_t.y1);break;case"path":q("path",_t.path);break}}}return C===void 0?(ol.push(nl),ol):se?se.getUpdateObj():{}}}}}),gg=s((ot,Me)=>{Me.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}}),ve=s(ot=>{var Me=gg(),m=rt(),l=Ud();ot.rangeToShapePosition=function(v){return v.type==="log"?v.r2d:function(y){return y}},ot.shapePositionToRange=function(v){return v.type==="log"?v.d2r:function(y){return y}},ot.decodeDate=function(v){return function(y){return y.replace&&(y=y.replace("_"," ")),v(y)}},ot.encodeDate=function(v){return function(y){return v(y).replace(" ","_")}},ot.extractPathCoords=function(v,y,w){var S=[],c=v.match(Me.segmentRE);return c.forEach(function(F){var b=y[F.charAt(0)].drawn;if(b!==void 0){var R=F.substr(1).match(Me.paramRE);if(!(!R||R.length<b)){var B=R[b],O=w?B:m.cleanNumber(B);S.push(O)}}}),S},ot.getDataToPixel=function(v,y,w,S,c){var F=v._fullLayout._size,b;if(y)if(c==="domain")b=function(B){return y._length*(S?1-B:B)+y._offset};else{var R=ot.shapePositionToRange(y);b=function(B){var O=x(y,w);return y._offset+y.r2p(R(B,!0))+O},y.type==="date"&&(b=ot.decodeDate(b))}else S?b=function(B){return F.t+F.h*(1-B)}:b=function(B){return F.l+F.w*B};return b},ot.getPixelToData=function(v,y,w,S){var c=v._fullLayout._size,F;if(y)if(S==="domain")F=function(R){var B=(R-y._offset)/y._length;return w?1-B:B};else{var b=ot.rangeToShapePosition(y);F=function(R){return b(y.p2r(R-y._offset))}}else w?F=function(R){return 1-(R-c.t)/c.h}:F=function(R){return(R-c.l)/c.w};return F},ot.roundPositionForSharpStrokeRendering=function(v,y){var w=Math.round(y%2)===1,S=Math.round(v);return w?S+.5:S},ot.makeShapesOptionsAndPlotinfo=function(v,y){var w=v._fullLayout.shapes[y]||{},S=v._fullLayout._plots[w.xref+w.yref],c=!!S;return c?S._hadPlotinfo=!0:(S={},w.xref&&w.xref!=="paper"&&(S.xaxis=v._fullLayout[w.xref+"axis"]),w.yref&&w.yref!=="paper"&&(S.yaxis=v._fullLayout[w.yref+"axis"])),S.xsizemode=w.xsizemode,S.ysizemode=w.ysizemode,S.xanchor=w.xanchor,S.yanchor=w.yanchor,{options:w,plotinfo:S}},ot.makeSelectionsOptionsAndPlotinfo=function(v,y){var w=v._fullLayout.selections[y]||{},S=v._fullLayout._plots[w.xref+w.yref],c=!!S;return c?S._hadPlotinfo=!0:(S={},w.xref&&(S.xaxis=v._fullLayout[w.xref+"axis"]),w.yref&&(S.yaxis=v._fullLayout[w.yref+"axis"])),{options:w,plotinfo:S}},ot.getPathString=function(v,y){var w=y.type,S=l.getRefType(y.xref),c=l.getRefType(y.yref),F=l.getFromId(v,y.xref),b=l.getFromId(v,y.yref),R=v._fullLayout._size,B,O,P,D,H=x(F,y.x0shift),C=x(F,y.x1shift),A=x(b,y.y0shift),L=x(b,y.y1shift),j,Z,nl,Pe;if(F?S==="domain"?O=function(ce){return F._offset+F._length*ce}:(B=ot.shapePositionToRange(F),O=function(ce){return F._offset+F.r2p(B(ce,!0))}):O=function(ce){return R.l+R.w*ce},b?c==="domain"?D=function(ce){return b._offset+b._length*(1-ce)}:(P=ot.shapePositionToRange(b),D=function(ce){return b._offset+b.r2p(P(ce,!0))}):D=function(ce){return R.t+R.h*(1-ce)},w==="path")return F&&F.type==="date"&&(O=ot.decodeDate(O)),b&&b.type==="date"&&(D=ot.decodeDate(D)),d(y,O,D);if(y.xsizemode==="pixel"){var se=O(y.xanchor);j=se+y.x0+H,Z=se+y.x1+C}else j=O(y.x0)+H,Z=O(y.x1)+C;if(y.ysizemode==="pixel"){var q=D(y.yanchor);nl=q-y.y0+A,Pe=q-y.y1+L}else nl=D(y.y0)+A,Pe=D(y.y1)+L;if(w==="line")return"M"+j+","+nl+"L"+Z+","+Pe;if(w==="rect")return"M"+j+","+nl+"H"+Z+"V"+Pe+"H"+j+"Z";var ol=(j+Z)/2,nt=(nl+Pe)/2,In=Math.abs(ol-j),_t=Math.abs(nt-nl),Fn="A"+In+","+_t,al=ol+In+","+nt,sl=ol+","+(nt-_t);return"M"+al+Fn+" 0 1,1 "+sl+Fn+" 0 0,1 "+al+"Z"};function d(v,y,w){var S=v.path,c=v.xsizemode,F=v.ysizemode,b=v.xanchor,R=v.yanchor;return S.replace(Me.segmentRE,function(B){var O=0,P=B.charAt(0),D=Me.paramIsX[P],H=Me.paramIsY[P],C=Me.numParams[P],A=B.substr(1).replace(Me.paramRE,function(L){return D[O]?c==="pixel"?L=y(b)+Number(L):L=y(L):H[O]&&(F==="pixel"?L=w(R)-Number(L):L=w(L)),O++,O>C&&(L="X"),L});return O>C&&(A=A.replace(/[\s,]*X.*/,""),m.log("Ignoring extra params in segment "+B)),P+A})}function x(v,y){y=y||0;var w=0;return y&&v&&(v.type==="category"||v.type==="multicategory")&&(w=(v.r2p(1)-v.r2p(0))*y),w}}),zu=s((ot,Me)=>{var m=rt(),l=Ud(),d=Kg(),x=Qd(),v=kg().readPaths,y=ve(),w=y.getPathString,S=Im(),c=$f().FROM_TL;Me.exports=function(R,B,O,P){if(P.selectAll(".shape-label").remove(),!!(O.label.text||O.label.texttemplate)){var D;if(O.label.texttemplate){var H={};if(O.type!=="path"){var C=l.getFromId(R,O.xref),A=l.getFromId(R,O.yref);for(var L in S){var j=S[L](O,C,A);j!==void 0&&(H[L]=j)}}D=m.texttemplateStringForShapes(O.label.texttemplate,{},R._fullLayout._d3locale,H)}else D=O.label.text;var Z={"data-index":B},nl=O.label.font,Pe={"data-notex":1},se=P.append("g").attr(Z).classed("shape-label",!0),q=se.append("text").attr(Pe).classed("shape-label-text",!0).text(D),ol,nt,In,_t;if(O.path){var Fn=w(R,O),al=v(Fn,R);ol=1/0,In=1/0,nt=-1/0,_t=-1/0;for(var sl=0;sl<al.length;sl++)for(var ce=0;ce<al[sl].length;ce++)for(var ll=al[sl][ce],ul=1;ul<ll.length;ul+=2){var fl=ll[ul],bl=ll[ul+1];ol=Math.min(ol,fl),nt=Math.max(nt,fl),In=Math.min(In,bl),_t=Math.max(_t,bl)}}else{var El=l.getFromId(R,O.xref),Ul=O.x0shift,ql=O.x1shift,gu=l.getRefType(O.xref),Bn=l.getFromId(R,O.yref),il=O.y0shift,X=O.y1shift,cl=l.getRefType(O.yref),Sl=function(zl,yu){var Vu=y.getDataToPixel(R,El,yu,!1,gu);return Vu(zl)},st=function(zl,yu){var Vu=y.getDataToPixel(R,Bn,yu,!0,cl);return Vu(zl)};ol=Sl(O.x0,Ul),nt=Sl(O.x1,ql),In=st(O.y0,il),_t=st(O.y1,X)}var U=O.label.textangle;U==="auto"&&(O.type==="line"?U=F(ol,In,nt,_t):U=0),q.call(function(zl){return zl.call(x.font,nl).attr({}),d.convertToTspans(zl,R),zl});var re=x.bBox(q.node()),Ft=b(ol,In,nt,_t,O,U,re),ls=Ft.textx,_l=Ft.texty,Ll=Ft.xanchor;q.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Ll],y:_l,x:ls,transform:"rotate("+U+","+ls+","+_l+")"}).call(d.positionText,ls,_l)}};function F(R,B,O,P){var D,H;return H=Math.abs(O-R),O>=R?D=B-P:D=P-B,-180/Math.PI*Math.atan2(D,H)}function b(R,B,O,P,D,H,C){var A=D.label.textposition,L=D.label.textangle,j=D.label.padding,Z=D.type,nl=Math.PI/180*H,Pe=Math.sin(nl),se=Math.cos(nl),q=D.label.xanchor,ol=D.label.yanchor,nt,In,_t,Fn;if(Z==="line"){A==="start"?(nt=R,In=B):A==="end"?(nt=O,In=P):(nt=(R+O)/2,In=(B+P)/2),q==="auto"&&(A==="start"?L==="auto"?O>R?q="left":O<R?q="right":q="center":O>R?q="right":O<R?q="left":q="center":A==="end"?L==="auto"?O>R?q="right":O<R?q="left":q="center":O>R?q="left":O<R?q="right":q="center":q="center");var al={left:1,center:0,right:-1},sl={bottom:-1,middle:0,top:1};if(L==="auto"){var ce=sl[ol];_t=-j*Pe*ce,Fn=j*se*ce}else{var ll=al[q],ul=sl[ol];_t=j*ll,Fn=j*ul}nt=nt+_t,In=In+Fn}else _t=j+3,A.indexOf("right")!==-1?(nt=Math.max(R,O)-_t,q==="auto"&&(q="right")):A.indexOf("left")!==-1?(nt=Math.min(R,O)+_t,q==="auto"&&(q="left")):(nt=(R+O)/2,q==="auto"&&(q="center")),A.indexOf("top")!==-1?In=Math.min(B,P):A.indexOf("bottom")!==-1?In=Math.max(B,P):In=(B+P)/2,Fn=j,ol==="bottom"?In=In-Fn:ol==="top"&&(In=In+Fn);var fl=c[ol],bl=D.label.font.size,El=C.height,Ul=(El*fl-bl)*Pe,ql=-(El*fl-bl)*se;return{textx:nt+Ul,texty:In+ql,xanchor:q}}}),el=s((ot,Me)=>{var m=rt(),l=m.strTranslate,d=Th(),x=Nf(),v=x.drawMode,y=x.selectMode,w=ff(),S=oh(),c=Pg(),F=c.i000,b=c.i090,R=c.i180,B=c.i270,O=xf(),P=O.clearOutlineControllers,D=kg(),H=D.pointsOnRectangle,C=D.pointsOnEllipse,A=D.writePaths,L=Bf().newShapes,j=Bf().createShapeObj,Z=Tg(),nl=zu();Me.exports=function ol(nt,In,_t,Fn){Fn||(Fn=0);var al=_t.gd;function sl(){ol(nt,In,_t,Fn++),(C(nt[0])||_t.hasText)&&ce({redrawing:!0})}function ce(vd){var fd={};_t.isActiveShape!==void 0&&(_t.isActiveShape=!1,fd=L(In,_t)),_t.isActiveSelection!==void 0&&(_t.isActiveSelection=!1,fd=Z(In,_t),al._fullLayout._reselect=!0),Object.keys(fd).length&&w.call((vd||{}).redrawing?"relayout":"_guiRelayout",al,fd)}var ll=al._fullLayout,ul=ll._zoomlayer,fl=_t.dragmode,bl=v(fl),El=y(fl);(bl||El)&&(al._fullLayout._outlining=!0),P(al),In.attr("d",A(nt));var Ul,ql,gu,Bn,il;if(!Fn&&(_t.isActiveShape||_t.isActiveSelection)){il=Pe([],nt);var X=ul.append("g").attr("class","outline-controllers");_l(X),Ad()}if(bl&&_t.hasText){var cl=ul.select(".label-temp"),Sl=j(In,_t,_t.dragmode);nl(al,"label-temp",Sl,cl)}function st(vd){gu=+vd.srcElement.getAttribute("data-i"),Bn=+vd.srcElement.getAttribute("data-j"),Ul[gu][Bn].moveFn=U}function U(vd,fd){if(nt.length){var Kl=il[gu][Bn][1],vu=il[gu][Bn][2],Rl=nt[gu],Wu=Rl.length;if(H(Rl)){var cd=vd,xd=fd;if(_t.isActiveSelection){var Td=se(Rl,Bn);Td[1]===Rl[Bn][1]?xd=0:cd=0}for(var Pd=0;Pd<Wu;Pd++)if(Pd!==Bn){var Hd=Rl[Pd];Hd[1]===Rl[Bn][1]&&(Hd[1]=Kl+cd),Hd[2]===Rl[Bn][2]&&(Hd[2]=vu+xd)}if(Rl[Bn][1]=Kl+cd,Rl[Bn][2]=vu+xd,!H(Rl))for(var $d=0;$d<Wu;$d++)for(var Wd=0;Wd<Rl[$d].length;Wd++)Rl[$d][Wd]=il[gu][$d][Wd]}else Rl[Bn][1]=Kl+vd,Rl[Bn][2]=vu+fd;sl()}}function re(){ce()}function Ft(){if(nt.length&&nt[gu]&&nt[gu].length){for(var vd=[],fd=0;fd<nt[gu].length;fd++)fd!==Bn&&vd.push(nt[gu][fd]);vd.length>1&&!(vd.length===2&&vd[1][0]==="Z")&&(Bn===0&&(vd[0][0]="M"),nt[gu]=vd,sl(),ce())}}function ls(vd,fd){if(vd===2){gu=+fd.srcElement.getAttribute("data-i"),Bn=+fd.srcElement.getAttribute("data-j");var Kl=nt[gu];!H(Kl)&&!C(Kl)&&Ft()}}function _l(vd){Ul=[];for(var fd=0;fd<nt.length;fd++){var Kl=nt[fd],vu=H(Kl),Rl=!vu&&C(Kl);Ul[fd]=[];for(var Wu=Kl.length,cd=0;cd<Wu;cd++)if(Kl[cd][0]!=="Z"&&!(Rl&&cd!==F&&cd!==b&&cd!==R&&cd!==B)){var xd=vu&&_t.isActiveSelection,Td;xd&&(Td=se(Kl,cd));var Pd=Kl[cd][1],Hd=Kl[cd][2],$d=vd.append(xd?"rect":"circle").attr("data-i",fd).attr("data-j",cd).style({fill:S.background,stroke:S.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(xd){var Wd=Td[1]-Pd,mh=Td[2]-Hd,Dd=mh?5:Math.max(Math.min(25,Math.abs(Wd)-5),5),bh=Wd?5:Math.max(Math.min(25,Math.abs(mh)-5),5);$d.classed(mh?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Dd).attr("height",bh).attr("x",Pd-Dd/2).attr("y",Hd-bh/2).attr("transform",l(Wd/2,mh/2))}else $d.classed("cursor-grab",!0).attr("r",5).attr("cx",Pd).attr("cy",Hd);Ul[fd][cd]={element:$d.node(),gd:al,prepFn:st,doneFn:re,clickFn:ls},d.init(Ul[fd][cd])}}}function Ll(vd,fd){if(nt.length)for(var Kl=0;Kl<nt.length;Kl++)for(var vu=0;vu<nt[Kl].length;vu++)for(var Rl=0;Rl+2<nt[Kl][vu].length;Rl+=2)nt[Kl][vu][Rl+1]=il[Kl][vu][Rl+1]+vd,nt[Kl][vu][Rl+2]=il[Kl][vu][Rl+2]+fd}function zl(vd,fd){Ll(vd,fd),sl()}function yu(vd){gu=+vd.srcElement.getAttribute("data-i"),gu||(gu=0),ql[gu].moveFn=zl}function Vu(){ce()}function od(vd){vd===2&&q(al)}function Ad(){if(ql=[],!!nt.length){var vd=0;ql[vd]={element:In[0][0],gd:al,prepFn:yu,doneFn:Vu,clickFn:od},d.init(ql[vd])}}};function Pe(ol,nt){for(var In=0;In<nt.length;In++){var _t=nt[In];ol[In]=[];for(var Fn=0;Fn<_t.length;Fn++){ol[In][Fn]=[];for(var al=0;al<_t[Fn].length;al++)ol[In][Fn][al]=_t[Fn][al]}}return ol}function se(ol,nt){var In=ol[nt][1],_t=ol[nt][2],Fn=ol.length,al,sl,ce;return al=(nt+1)%Fn,sl=ol[al][1],ce=ol[al][2],sl===In&&ce===_t&&(al=(nt+2)%Fn,sl=ol[al][1],ce=ol[al][2]),[al,sl,ce]}function q(ol){if(y(ol._fullLayout.dragmode)){P(ol);var nt=ol._fullLayout._activeSelectionIndex,In=(ol.layout||{}).selections||[];if(nt<In.length){for(var _t=[],Fn=0;Fn<In.length;Fn++)Fn!==nt&&_t.push(In[Fn]);delete ol._fullLayout._activeSelectionIndex;var al=ol._fullLayout.selections[nt];ol._fullLayout._deselect={xref:al.xref,yref:al.yref},w.call("_guiRelayout",ol,{selections:_t})}}}}),Bd=s((ot,Me)=>{var m=$(),l=ff(),d=rt(),x=Ud(),v=kg().readPaths,y=el(),w=zu(),S=xf().clearOutlineControllers,c=oh(),F=Qd(),b=Bp().arrayEditor,R=Th(),B=dp(),O=gg(),P=ve(),D=P.getPathString;Me.exports={draw:H,drawOne:L,eraseActiveShape:q,drawLabel:w};function H(ol){var nt=ol._fullLayout;nt._shapeUpperLayer.selectAll("path").remove(),nt._shapeLowerLayer.selectAll("path").remove(),nt._shapeUpperLayer.selectAll("text").remove(),nt._shapeLowerLayer.selectAll("text").remove();for(var In in nt._plots){var _t=nt._plots[In].shapelayer;_t&&(_t.selectAll("path").remove(),_t.selectAll("text").remove())}for(var Fn=0;Fn<nt.shapes.length;Fn++)nt.shapes[Fn].visible===!0&&L(ol,Fn)}function C(ol){return!!ol._fullLayout._outlining}function A(ol){return!ol._context.edits.shapePosition}function L(ol,nt){ol._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+nt+'"]').remove();var In=P.makeShapesOptionsAndPlotinfo(ol,nt),_t=In.options,Fn=In.plotinfo;if(!_t._input||_t.visible!==!0)return;if(_t.layer==="above")sl(ol._fullLayout._shapeUpperLayer);else if(_t.xref==="paper"||_t.yref==="paper")sl(ol._fullLayout._shapeLowerLayer);else if(_t.layer==="between")sl(Fn.shapelayerBetween);else if(Fn._hadPlotinfo){var al=Fn.mainplotinfo||Fn;sl(al.shapelayer)}else sl(ol._fullLayout._shapeLowerLayer);function sl(ce){var ll=D(ol,_t),ul={"data-index":nt,"fill-rule":_t.fillrule,d:ll},fl=_t.opacity,bl=_t.fillcolor,El=_t.line.width?_t.line.color:"rgba(0,0,0,0)",Ul=_t.line.width,ql=_t.line.dash;!Ul&&_t.editable===!0&&(Ul=5,ql="solid");var gu=ll[ll.length-1]!=="Z",Bn=A(ol)&&_t.editable&&ol._fullLayout._activeShapeIndex===nt;Bn&&(bl=gu?"rgba(0,0,0,0)":ol._fullLayout.activeshape.fillcolor,fl=ol._fullLayout.activeshape.opacity);var il=ce.append("g").classed("shape-group",!0).attr({"data-index":nt}),X=il.append("path").attr(ul).style("opacity",fl).call(c.stroke,El).call(c.fill,bl).call(F.dashLine,ql,Ul);j(il,ol,_t),w(ol,nt,_t,il);var cl;if((Bn||ol._context.edits.shapePosition)&&(cl=b(ol.layout,"shapes",_t)),Bn){X.style({cursor:"move"});var Sl={element:X.node(),plotinfo:Fn,gd:ol,editHelpers:cl,hasText:_t.label.text||_t.label.texttemplate,isActiveShape:!0},st=v(ll,ol);y(st,X,Sl)}else ol._context.edits.shapePosition?Z(ol,X,_t,nt,ce,cl):_t.editable===!0&&X.style("pointer-events",gu||c.opacity(bl)*fl<=.5?"stroke":"all");X.node().addEventListener("click",function(){return Pe(ol,X)})}}function j(ol,nt,In){var _t=(In.xref+In.yref).replace(/paper/g,"").replace(/[xyz][0-9]* *domain/g,"");F.setClipUrl(ol,_t?"clip"+nt._fullLayout._uid+_t:null,nt)}function Z(ol,nt,In,_t,Fn,al){var sl=10,ce=10,ll=In.xsizemode==="pixel",ul=In.ysizemode==="pixel",fl=In.type==="line",bl=In.type==="path",El=al.modifyItem,Ul,ql,gu,Bn,il,X,cl,Sl,st,U,re,Ft,ls,_l,Ll,zl=m.select(nt.node().parentNode),yu=x.getFromId(ol,In.xref),Vu=x.getRefType(In.xref),od=x.getFromId(ol,In.yref),Ad=x.getRefType(In.yref),vd=In.x0shift,fd=In.x1shift,Kl=In.y0shift,vu=In.y1shift,Rl=function(Dl,Vl){var Mu=P.getDataToPixel(ol,yu,Vl,!1,Vu);return Mu(Dl)},Wu=function(Dl,Vl){var Mu=P.getDataToPixel(ol,od,Vl,!0,Ad);return Mu(Dl)},cd=P.getPixelToData(ol,yu,!1,Vu),xd=P.getPixelToData(ol,od,!0,Ad),Td=$d(),Pd={element:Td.node(),gd:ol,prepFn:Dd,doneFn:bh,clickFn:Dh},Hd;R.init(Pd),Td.node().onmousemove=mh;function $d(){return fl?Wd():nt}function Wd(){var Dl=10,Vl=Math.max(In.line.width,Dl),Mu=Fn.append("g").attr("data-index",_t).attr("drag-helper",!0);Mu.append("path").attr("d",nt.attr("d")).style({cursor:"move","stroke-width":Vl,"stroke-opacity":"0"});var Nu={"fill-opacity":"0"},ed=Math.max(Vl/2,Dl);return Mu.append("circle").attr({"data-line-point":"start-point",cx:ll?Rl(In.xanchor)+In.x0:Rl(In.x0,vd),cy:ul?Wu(In.yanchor)-In.y0:Wu(In.y0,Kl),r:ed}).style(Nu).classed("cursor-grab",!0),Mu.append("circle").attr({"data-line-point":"end-point",cx:ll?Rl(In.xanchor)+In.x1:Rl(In.x1,fd),cy:ul?Wu(In.yanchor)-In.y1:Wu(In.y1,vu),r:ed}).style(Nu).classed("cursor-grab",!0),Mu}function mh(Dl){if(C(ol)){Hd=null;return}if(fl)Dl.target.tagName==="path"?Hd="move":Hd=Dl.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Vl=Pd.element.getBoundingClientRect(),Mu=Vl.right-Vl.left,Nu=Vl.bottom-Vl.top,ed=Dl.clientX-Vl.left,sd=Dl.clientY-Vl.top,Sd=!bl&&Mu>sl&&Nu>ce&&!Dl.shiftKey?R.getCursor(ed/Mu,1-sd/Nu):"move";B(nt,Sd),Hd=Sd.split("-")[0]}}function Dd(Dl){C(ol)||(ll&&(il=Rl(In.xanchor)),ul&&(X=Wu(In.yanchor)),In.type==="path"?Ll=In.path:(Ul=ll?In.x0:Rl(In.x0),ql=ul?In.y0:Wu(In.y0),gu=ll?In.x1:Rl(In.x1),Bn=ul?In.y1:Wu(In.y1)),Ul<gu?(st=Ul,ls="x0",U=gu,_l="x1"):(st=gu,ls="x1",U=Ul,_l="x0"),!ul&&ql<Bn||ul&&ql>Bn?(cl=ql,re="y0",Sl=Bn,Ft="y1"):(cl=Bn,re="y1",Sl=ql,Ft="y0"),mh(Dl),Ql(Fn,In),gl(nt,In,ol),Pd.moveFn=Hd==="move"?vh:Gh,Pd.altKey=Dl.altKey)}function bh(){C(ol)||(B(nt),Ku(Fn),j(nt,ol,In),l.call("_guiRelayout",ol,al.getUpdateObj()))}function Dh(){C(ol)||Ku(Fn)}function vh(Dl,Vl){if(In.type==="path"){var Mu=function(sd){return sd},Nu=Mu,ed=Mu;ll?El("xanchor",In.xanchor=cd(il+Dl)):(Nu=function(sd){return cd(Rl(sd)+Dl)},yu&&yu.type==="date"&&(Nu=P.encodeDate(Nu))),ul?El("yanchor",In.yanchor=xd(X+Vl)):(ed=function(sd){return xd(Wu(sd)+Vl)},od&&od.type==="date"&&(ed=P.encodeDate(ed))),El("path",In.path=nl(Ll,Nu,ed))}else ll?El("xanchor",In.xanchor=cd(il+Dl)):(El("x0",In.x0=cd(Ul+Dl)),El("x1",In.x1=cd(gu+Dl))),ul?El("yanchor",In.yanchor=xd(X+Vl)):(El("y0",In.y0=xd(ql+Vl)),El("y1",In.y1=xd(Bn+Vl)));nt.attr("d",D(ol,In)),Ql(Fn,In),w(ol,_t,In,zl)}function Gh(Dl,Vl){if(bl){var Mu=function(zh){return zh},Nu=Mu,ed=Mu;ll?El("xanchor",In.xanchor=cd(il+Dl)):(Nu=function(zh){return cd(Rl(zh)+Dl)},yu&&yu.type==="date"&&(Nu=P.encodeDate(Nu))),ul?El("yanchor",In.yanchor=xd(X+Vl)):(ed=function(zh){return xd(Wu(zh)+Vl)},od&&od.type==="date"&&(ed=P.encodeDate(ed))),El("path",In.path=nl(Ll,Nu,ed))}else if(fl){if(Hd==="resize-over-start-point"){var sd=Ul+Dl,Sd=ul?ql-Vl:ql+Vl;El("x0",In.x0=ll?sd:cd(sd)),El("y0",In.y0=ul?Sd:xd(Sd))}else if(Hd==="resize-over-end-point"){var yd=gu+Dl,bd=ul?Bn-Vl:Bn+Vl;El("x1",In.x1=ll?yd:cd(yd)),El("y1",In.y1=ul?bd:xd(bd))}}else{var Kd=function(zh){return Hd.indexOf(zh)!==-1},Jd=Kd("n"),th=Kd("s"),Hh=Kd("w"),sp=Kd("e"),xp=Jd?cl+Vl:cl,Pp=th?Sl+Vl:Sl,Up=Hh?st+Dl:st,fp=sp?U+Dl:U;ul&&(Jd&&(xp=cl-Vl),th&&(Pp=Sl-Vl)),(!ul&&Pp-xp>ce||ul&&xp-Pp>ce)&&(El(re,In[re]=ul?xp:xd(xp)),El(Ft,In[Ft]=ul?Pp:xd(Pp))),fp-Up>sl&&(El(ls,In[ls]=ll?Up:cd(Up)),El(_l,In[_l]=ll?fp:cd(fp)))}nt.attr("d",D(ol,In)),Ql(Fn,In),w(ol,_t,In,zl)}function Ql(Dl,Vl){(ll||ul)&&Mu();function Mu(){var Nu=Vl.type!=="path",ed=Dl.selectAll(".visual-cue").data([0]),sd=1;ed.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":sd}).classed("visual-cue",!0);var Sd=Rl(ll?Vl.xanchor:d.midRange(Nu?[Vl.x0,Vl.x1]:P.extractPathCoords(Vl.path,O.paramIsX))),yd=Wu(ul?Vl.yanchor:d.midRange(Nu?[Vl.y0,Vl.y1]:P.extractPathCoords(Vl.path,O.paramIsY)));if(Sd=P.roundPositionForSharpStrokeRendering(Sd,sd),yd=P.roundPositionForSharpStrokeRendering(yd,sd),ll&&ul){var bd="M"+(Sd-1-sd)+","+(yd-1-sd)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ed.attr("d",bd)}else if(ll){var Kd="M"+(Sd-1-sd)+","+(yd-9-sd)+"v18 h2 v-18 Z";ed.attr("d",Kd)}else{var Jd="M"+(Sd-9-sd)+","+(yd-1-sd)+"h18 v2 h-18 Z";ed.attr("d",Jd)}}}function Ku(Dl){Dl.selectAll(".visual-cue").remove()}function gl(Dl,Vl,Mu){var Nu=Vl.xref,ed=Vl.yref,sd=x.getFromId(Mu,Nu),Sd=x.getFromId(Mu,ed),yd="";Nu!=="paper"&&!sd.autorange&&(yd+=Nu),ed!=="paper"&&!Sd.autorange&&(yd+=ed),F.setClipUrl(Dl,yd?"clip"+Mu._fullLayout._uid+yd:null,Mu)}}function nl(ol,nt,In){return ol.replace(O.segmentRE,function(_t){var Fn=0,al=_t.charAt(0),sl=O.paramIsX[al],ce=O.paramIsY[al],ll=O.numParams[al],ul=_t.substr(1).replace(O.paramRE,function(fl){return Fn>=ll||(sl[Fn]?fl=nt(fl):ce[Fn]&&(fl=In(fl)),Fn++),fl});return al+ul})}function Pe(ol,nt){if(A(ol)){var In=nt.node(),_t=+In.getAttribute("data-index");if(_t>=0){if(_t===ol._fullLayout._activeShapeIndex){se(ol);return}ol._fullLayout._activeShapeIndex=_t,ol._fullLayout._deactivateShape=se,H(ol)}}}function se(ol){if(A(ol)){var nt=ol._fullLayout._activeShapeIndex;nt>=0&&(S(ol),delete ol._fullLayout._activeShapeIndex,H(ol))}}function q(ol){if(A(ol)){S(ol);var nt=ol._fullLayout._activeShapeIndex,In=(ol.layout||{}).shapes||[];if(nt<In.length){for(var _t=[],Fn=0;Fn<In.length;Fn++)Fn!==nt&&_t.push(In[Fn]);return delete ol._fullLayout._activeShapeIndex,l.call("_guiRelayout",ol,{shapes:_t})}}}}),Od=s((ot,Me)=>{var m=ff(),l=Vf(),d=Rh(),x=vg(),v=Bd().eraseActiveShape,y=rt(),w=y._,S=Me.exports={};S.toImage={name:"toImage",title:function(Z){var nl=Z._context.toImageButtonOptions||{},Pe=nl.format||"png";return Pe==="png"?w(Z,"Download plot as a PNG"):w(Z,"Download plot")},icon:x.camera,click:function(Z){var nl=Z._context.toImageButtonOptions,Pe={format:nl.format||"png"};y.notifier(w(Z,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach(function(se){se in nl&&(Pe[se]=nl[se])}),m.call("downloadImage",Z,Pe).then(function(se){y.notifier(w(Z,"Snapshot succeeded")+" - "+se,"long")}).catch(function(){y.notifier(w(Z,"Sorry, there was a problem downloading your snapshot!"),"long")})}},S.sendDataToCloud={name:"sendDataToCloud",title:function(Z){return w(Z,"Edit in Chart Studio")},icon:x.disk,click:function(Z){l.sendDataToCloud(Z)}},S.editInChartStudio={name:"editInChartStudio",title:function(Z){return w(Z,"Edit in Chart Studio")},icon:x.pencil,click:function(Z){l.sendDataToCloud(Z)}},S.zoom2d={name:"zoom2d",_cat:"zoom",title:function(Z){return w(Z,"Zoom")},attr:"dragmode",val:"zoom",icon:x.zoombox,click:c},S.pan2d={name:"pan2d",_cat:"pan",title:function(Z){return w(Z,"Pan")},attr:"dragmode",val:"pan",icon:x.pan,click:c},S.select2d={name:"select2d",_cat:"select",title:function(Z){return w(Z,"Box Select")},attr:"dragmode",val:"select",icon:x.selectbox,click:c},S.lasso2d={name:"lasso2d",_cat:"lasso",title:function(Z){return w(Z,"Lasso Select")},attr:"dragmode",val:"lasso",icon:x.lasso,click:c},S.drawclosedpath={name:"drawclosedpath",title:function(Z){return w(Z,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:x.drawclosedpath,click:c},S.drawopenpath={name:"drawopenpath",title:function(Z){return w(Z,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:x.drawopenpath,click:c},S.drawline={name:"drawline",title:function(Z){return w(Z,"Draw line")},attr:"dragmode",val:"drawline",icon:x.drawline,click:c},S.drawrect={name:"drawrect",title:function(Z){return w(Z,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:x.drawrect,click:c},S.drawcircle={name:"drawcircle",title:function(Z){return w(Z,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:x.drawcircle,click:c},S.eraseshape={name:"eraseshape",title:function(Z){return w(Z,"Erase active shape")},icon:x.eraseshape,click:v},S.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(Z){return w(Z,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:c},S.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(Z){return w(Z,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:c},S.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(Z){return w(Z,"Autoscale")},attr:"zoom",val:"auto",icon:x.autoscale,click:c},S.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(Z){return w(Z,"Reset axes")},attr:"zoom",val:"reset",icon:x.home,click:c},S.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(Z){return w(Z,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:c},S.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(Z){return w(Z,"Compare data on hover")},attr:"hovermode",val:function(Z){return Z._fullLayout._isHoriz?"y":"x"},icon:x.tooltip_compare,gravity:"ne",click:c};function c(Z,nl){var Pe=nl.currentTarget,se=Pe.getAttribute("data-attr"),q=Pe.getAttribute("data-val")||!0,ol=Z._fullLayout,nt={},In=d.list(Z,null,!0),_t=ol._cartesianSpikesEnabled,Fn,al;if(se==="zoom"){var sl=q==="in"?.5:2,ce=(1+sl)/2,ll=(1-sl)/2,ul,fl;for(al=0;al<In.length;al++)if(Fn=In[al],fl=Fn.modebardisable==="none"||Fn.modebardisable.indexOf(q==="auto"||q==="reset"?"autoscale":"zoominout")===-1,fl&&!Fn.fixedrange)if(ul=Fn._name,q==="auto")nt[ul+".autorange"]=!0;else if(q==="reset")Fn._rangeInitial0===void 0&&Fn._rangeInitial1===void 0?nt[ul+".autorange"]=!0:Fn._rangeInitial0===void 0?(nt[ul+".autorange"]=Fn._autorangeInitial,nt[ul+".range"]=[null,Fn._rangeInitial1]):Fn._rangeInitial1===void 0?(nt[ul+".range"]=[Fn._rangeInitial0,null],nt[ul+".autorange"]=Fn._autorangeInitial):nt[ul+".range"]=[Fn._rangeInitial0,Fn._rangeInitial1],Fn._showSpikeInitial!==void 0&&(nt[ul+".showspikes"]=Fn._showSpikeInitial,_t==="on"&&!Fn._showSpikeInitial&&(_t="off"));else{var bl=[Fn.r2l(Fn.range[0]),Fn.r2l(Fn.range[1])],El=[ce*bl[0]+ll*bl[1],ce*bl[1]+ll*bl[0]];nt[ul+".range[0]"]=Fn.l2r(El[0]),nt[ul+".range[1]"]=Fn.l2r(El[1])}}else se==="hovermode"&&(q==="x"||q==="y")&&(q=ol._isHoriz?"y":"x",Pe.setAttribute("data-val",q)),nt[se]=q;ol._cartesianSpikesEnabled=_t,m.call("_guiRelayout",Z,nt)}S.zoom3d={name:"zoom3d",_cat:"zoom",title:function(Z){return w(Z,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:x.zoombox,click:F},S.pan3d={name:"pan3d",_cat:"pan",title:function(Z){return w(Z,"Pan")},attr:"scene.dragmode",val:"pan",icon:x.pan,click:F},S.orbitRotation={name:"orbitRotation",title:function(Z){return w(Z,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:x["3d_rotate"],click:F},S.tableRotation={name:"tableRotation",title:function(Z){return w(Z,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:x["z-axis"],click:F};function F(Z,nl){for(var Pe=nl.currentTarget,se=Pe.getAttribute("data-attr"),q=Pe.getAttribute("data-val")||!0,ol=Z._fullLayout._subplots.gl3d||[],nt={},In=se.split("."),_t=0;_t<ol.length;_t++)nt[ol[_t]+"."+In[1]]=q;var Fn=q==="pan"?q:"zoom";nt.dragmode=Fn,m.call("_guiRelayout",Z,nt)}S.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(Z){return w(Z,"Reset camera to default")},attr:"resetDefault",icon:x.home,click:b},S.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(Z){return w(Z,"Reset camera to last save")},attr:"resetLastSave",icon:x.movie,click:b};function b(Z,nl){for(var Pe=nl.currentTarget,se=Pe.getAttribute("data-attr"),q=se==="resetLastSave",ol=se==="resetDefault",nt=Z._fullLayout,In=nt._subplots.gl3d||[],_t={},Fn=0;Fn<In.length;Fn++){var al=In[Fn],sl=al+".camera",ce=al+".aspectratio",ll=al+".aspectmode",ul=nt[al]._scene,fl;q?(_t[sl+".up"]=ul.viewInitial.up,_t[sl+".eye"]=ul.viewInitial.eye,_t[sl+".center"]=ul.viewInitial.center,fl=!0):ol&&(_t[sl+".up"]=null,_t[sl+".eye"]=null,_t[sl+".center"]=null,fl=!0),fl&&(_t[ce+".x"]=ul.viewInitial.aspectratio.x,_t[ce+".y"]=ul.viewInitial.aspectratio.y,_t[ce+".z"]=ul.viewInitial.aspectratio.z,_t[ll]=ul.viewInitial.aspectmode)}m.call("_guiRelayout",Z,_t)}S.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(Z){return w(Z,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:B};function R(Z,nl){var Pe=nl.currentTarget,se=Pe._previousVal,q=Z._fullLayout,ol=q._subplots.gl3d||[],nt=["xaxis","yaxis","zaxis"],In={},_t={};if(se)_t=se,Pe._previousVal=null;else{for(var Fn=0;Fn<ol.length;Fn++){var al=ol[Fn],sl=q[al],ce=al+".hovermode";In[ce]=sl.hovermode,_t[ce]=!1;for(var ll=0;ll<3;ll++){var ul=nt[ll],fl=al+"."+ul+".showspikes";_t[fl]=!1,In[fl]=sl[ul].showspikes}}Pe._previousVal=In}return _t}function B(Z,nl){var Pe=R(Z,nl);m.call("_guiRelayout",Z,Pe)}S.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(Z){return w(Z,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:O},S.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(Z){return w(Z,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:O},S.resetGeo={name:"resetGeo",_cat:"reset",title:function(Z){return w(Z,"Reset")},attr:"reset",val:null,icon:x.autoscale,click:O},S.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(Z){return w(Z,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:D};function O(Z,nl){for(var Pe=nl.currentTarget,se=Pe.getAttribute("data-attr"),q=Pe.getAttribute("data-val")||!0,ol=Z._fullLayout,nt=ol._subplots.geo||[],In=0;In<nt.length;In++){var _t=nt[In],Fn=ol[_t];if(se==="zoom"){var al=Fn.projection.scale,sl=q==="in"?2*al:.5*al;m.call("_guiRelayout",Z,_t+".projection.scale",sl)}}se==="reset"&&j(Z,"geo")}S.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(Z){return w(Z,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:D};function P(Z){var nl=Z._fullLayout;return nl.hovermode?!1:nl._has("cartesian")?nl._isHoriz?"y":"x":"closest"}function D(Z){var nl=P(Z);m.call("_guiRelayout",Z,"hovermode",nl)}S.resetViewSankey={name:"resetSankeyGroup",title:function(Z){return w(Z,"Reset view")},icon:x.home,click:function(Z){for(var nl={"node.groups":[],"node.x":[],"node.y":[]},Pe=0;Pe<Z._fullData.length;Pe++){var se=Z._fullData[Pe]._viewInitial;nl["node.groups"].push(se.node.groups.slice()),nl["node.x"].push(se.node.x.slice()),nl["node.y"].push(se.node.y.slice())}m.call("restyle",Z,nl)}},S.toggleHover={name:"toggleHover",title:function(Z){return w(Z,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:function(Z,nl){var Pe=R(Z,nl);Pe.hovermode=P(Z),m.call("_guiRelayout",Z,Pe)}},S.resetViews={name:"resetViews",title:function(Z){return w(Z,"Reset views")},icon:x.home,click:function(Z,nl){var Pe=nl.currentTarget;Pe.setAttribute("data-attr","zoom"),Pe.setAttribute("data-val","reset"),c(Z,nl),Pe.setAttribute("data-attr","resetLastSave"),b(Z,nl),j(Z,"geo"),j(Z,"mapbox"),j(Z,"map")}},S.toggleSpikelines={name:"toggleSpikelines",title:function(Z){return w(Z,"Toggle Spike Lines")},icon:x.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(Z){var nl=Z._fullLayout,Pe=nl._cartesianSpikesEnabled;nl._cartesianSpikesEnabled=Pe==="on"?"off":"on",m.call("_guiRelayout",Z,H(Z))}};function H(Z){for(var nl=Z._fullLayout,Pe=nl._cartesianSpikesEnabled==="on",se=d.list(Z,null,!0),q={},ol=0;ol<se.length;ol++){var nt=se[ol];q[nt._name+".showspikes"]=Pe?!0:nt._showSpikeInitial}return q}S.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(Z){return w(Z,"Reset view")},attr:"reset",icon:x.home,click:function(Z){j(Z,"mapbox")}},S.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(Z){return w(Z,"Reset view")},attr:"reset",icon:x.home,click:function(Z){j(Z,"map")}},S.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(Z){return w(Z,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:C},S.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(Z){return w(Z,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:A},S.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(Z){return w(Z,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:C},S.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(Z){return w(Z,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:A};function C(Z,nl){L(Z,nl,"mapbox")}function A(Z,nl){L(Z,nl,"map")}function L(Z,nl,Pe){for(var se=nl.currentTarget,q=se.getAttribute("data-val"),ol=Z._fullLayout,nt=ol._subplots[Pe]||[],In=1.05,_t={},Fn=0;Fn<nt.length;Fn++){var al=nt[Fn],sl=ol[al].zoom,ce=q==="in"?In*sl:sl/In;_t[al+".zoom"]=ce}m.call("_guiRelayout",Z,_t)}function j(Z,nl){for(var Pe=Z._fullLayout,se=Pe._subplots[nl]||[],q={},ol=0;ol<se.length;ol++)for(var nt=se[ol],In=Pe[nt]._subplot,_t=In.viewInitial,Fn=Object.keys(_t),al=0;al<Fn.length;al++){var sl=Fn[al];q[nt+"."+sl]=_t[sl]}m.call("_guiRelayout",Z,q)}}),Md=s((ot,Me)=>{var m=Od(),l=Object.keys(m),d=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],x=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(d),v=[],y=function(w){if(x.indexOf(w._cat||w.name)===-1){var S=w.name,c=(w._cat||w.name).toLowerCase();v.indexOf(S)===-1&&v.push(S),v.indexOf(c)===-1&&v.push(c)}};l.forEach(function(w){y(m[w])}),v.sort(),Me.exports={DRAW_MODES:d,backButtons:x,foreButtons:v}}),jh=s((ot,Me)=>{Md(),Me.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}}),ch=s((ot,Me)=>{var m=rt(),l=oh(),d=Bp(),x=jh();Me.exports=function(v,y){var w=v.modebar||{},S=d.newContainer(y,"modebar");function c(b,R){return m.coerce(w,S,x,b,R)}c("orientation"),c("bgcolor",l.addOpacity(y.paper_bgcolor,.5));var F=l.contrast(l.rgb(y.modebar.bgcolor));c("color",l.addOpacity(F,.3)),c("activecolor",l.addOpacity(F,.7)),c("uirevision",y.uirevision),c("add"),c("remove")}}),Dp=s((ot,Me)=>{var m=$(),l=zn(),d=rt(),x=vg(),v=_().version,y=new DOMParser;function w(b){this.container=b.container,this.element=document.createElement("div"),this.update(b.graphInfo,b.buttons),this.container.appendChild(this.element)}var S=w.prototype;S.update=function(b,R){this.graphInfo=b;var B=this.graphInfo._context,O=this.graphInfo._fullLayout,P="modebar-"+O._uid;this.element.setAttribute("id",P),this.element.setAttribute("role","toolbar"),this._uid=P,this.element.className="modebar modebar--custom",B.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),O.modebar.orientation==="v"&&(this.element.className+=" vertical",R=R.reverse());var D=O.modebar,H="#"+P+" .modebar-group";document.querySelectorAll(H).forEach(function(Z){Z.style.backgroundColor=D.bgcolor});var C=!this.hasButtons(R),A=this.hasLogo!==B.displaylogo,L=this.locale!==B.locale;if(this.locale=B.locale,(C||A||L)&&(this.removeAllButtons(),this.updateButtons(R),B.watermark||B.displaylogo)){var j=this.getLogo();B.watermark&&(j.className=j.className+" watermark"),O.modebar.orientation==="v"?this.element.insertBefore(j,this.element.childNodes[0]):this.element.appendChild(j),this.hasLogo=!0}this.updateActiveButton(),d.setStyleOnHover("#"+P+" .modebar-btn",".active",".icon path","fill: "+D.activecolor,"fill: "+D.color,this.element)},S.updateButtons=function(b){var R=this;this.buttons=b,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(B){var O=R.createGroup();B.forEach(function(P){var D=P.name;if(!D)throw new Error("must provide button 'name' in button config");if(R.buttonsNames.indexOf(D)!==-1)throw new Error("button name '"+D+"' is taken");R.buttonsNames.push(D);var H=R.createButton(P);R.buttonElements.push(H),O.appendChild(H)}),R.element.appendChild(O)})},S.createGroup=function(){var b=document.createElement("div");b.className="modebar-group";var R=this.graphInfo._fullLayout.modebar;return b.style.backgroundColor=R.bgcolor,b},S.createButton=function(b){var R=this,B=document.createElement("button");B.setAttribute("type","button"),B.setAttribute("rel","tooltip"),B.className="modebar-btn";var O=b.title;O===void 0?O=b.name:typeof O=="function"&&(O=O(this.graphInfo)),(O||O===0)&&(B.setAttribute("data-title",O),B.setAttribute("aria-label",O)),b.attr!==void 0&&B.setAttribute("data-attr",b.attr);var P=b.val;P!==void 0&&(typeof P=="function"&&(P=P(this.graphInfo)),B.setAttribute("data-val",P));var D=b.click;if(typeof D!="function")throw new Error("must provide button 'click' function in button config");B.addEventListener("click",function(C){b.click(R.graphInfo,C),R.updateActiveButton(C.currentTarget)}),B.setAttribute("data-toggle",b.toggle||!1),b.toggle&&m.select(B).classed("active",!0);var H=b.icon;return typeof H=="function"?B.appendChild(H()):B.appendChild(this.createIcon(H||x.question)),B.setAttribute("data-gravity",b.gravity||"n"),B},S.createIcon=function(b){var R=l(b.height)?Number(b.height):b.ascent-b.descent,B="http://www.w3.org/2000/svg",O;if(b.path){O=document.createElementNS(B,"svg"),O.setAttribute("viewBox",[0,0,b.width,R].join(" ")),O.setAttribute("class","icon");var P=document.createElementNS(B,"path");P.setAttribute("d",b.path),b.transform?P.setAttribute("transform",b.transform):b.ascent!==void 0&&P.setAttribute("transform","matrix(1 0 0 -1 0 "+b.ascent+")"),O.appendChild(P)}if(b.svg){var D=y.parseFromString(b.svg,"application/xml");O=D.childNodes[0]}return O.setAttribute("height","1em"),O.setAttribute("width","1em"),O},S.updateActiveButton=function(b){var R=this.graphInfo._fullLayout,B=b!==void 0?b.getAttribute("data-attr"):null;this.buttonElements.forEach(function(O){var P=O.getAttribute("data-val")||!0,D=O.getAttribute("data-attr"),H=O.getAttribute("data-toggle")==="true",C=m.select(O),A=function(Z,nl){var Pe=R.modebar,se=Z.querySelector(".icon path");se&&(nl||Z.matches(":hover")?se.style.fill=Pe.activecolor:se.style.fill=Pe.color)};if(H){if(D===B){var L=!C.classed("active");C.classed("active",L),A(O,L)}}else{var j=D===null?D:d.nestedProperty(R,D).get();C.classed("active",j===P),A(O,j===P)}})},S.hasButtons=function(b){var R=this.buttons;if(!R||b.length!==R.length)return!1;for(var B=0;B<b.length;++B){if(b[B].length!==R[B].length)return!1;for(var O=0;O<b[B].length;O++)if(b[B][O].name!==R[B][O].name)return!1}return!0};function c(b){return b+" (v"+v+")"}S.getLogo=function(){var b=this.createGroup(),R=document.createElement("a");return R.href="https://plotly.com/",R.target="_blank",R.setAttribute("data-title",c(d._(this.graphInfo,"Produced with Plotly.js"))),R.className="modebar-btn plotlyjsicon modebar-btn--logo",R.appendChild(this.createIcon(x.newplotlylogo)),b.appendChild(R),b},S.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},S.destroy=function(){d.removeElement(this.container.querySelector(".modebar"))};function F(b,R){var B=b._fullLayout,O=new w({graphInfo:b,container:B._modebardiv.node(),buttons:R});return B._privateplot&&m.select(O.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),O}Me.exports=F}),Ch=s((ot,Me)=>{var m=Rh(),l=Zu(),d=ff(),x=wd().isUnifiedHover,v=Dp(),y=Od(),w=Md().DRAW_MODES,S=rt().extendDeep;Me.exports=function(P){var D=P._fullLayout,H=P._context,C=D._modeBar;if(!H.displayModeBar&&!H.watermark){C&&(C.destroy(),delete D._modeBar);return}if(!Array.isArray(H.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(H.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var A=H.modeBarButtons,L;Array.isArray(A)&&A.length?L=O(A):!H.displayModeBar&&H.watermark?L=[]:L=c(P),C?C.update(P,L):D._modeBar=v(P,L)};function c(P){var D=P._fullLayout,H=P._fullData,C=P._context;function A(U,re){if(typeof re=="string"){if(re.toLowerCase()===U.toLowerCase())return!0}else{var Ft=re.name,ls=re._cat||re.name;if(Ft===U||ls===U.toLowerCase())return!0}return!1}var L=D.modebar.add;typeof L=="string"&&(L=[L]);var j=D.modebar.remove;typeof j=="string"&&(j=[j]);var Z=C.modeBarButtonsToAdd.concat(L.filter(function(U){for(var re=0;re<C.modeBarButtonsToRemove.length;re++)if(A(U,C.modeBarButtonsToRemove[re]))return!1;return!0})),nl=C.modeBarButtonsToRemove.concat(j.filter(function(U){for(var re=0;re<C.modeBarButtonsToAdd.length;re++)if(A(U,C.modeBarButtonsToAdd[re]))return!1;return!0})),Pe=D._has("cartesian"),se=D._has("gl3d"),q=D._has("geo"),ol=D._has("pie"),nt=D._has("funnelarea"),In=D._has("ternary"),_t=D._has("mapbox"),Fn=D._has("map"),al=D._has("polar"),sl=D._has("smith"),ce=D._has("sankey"),ll=F(D),ul=x(D.hovermode),fl=[];function bl(U){if(U.length){for(var re=[],Ft=0;Ft<U.length;Ft++){for(var ls=U[Ft],_l=y[ls],Ll=_l.name.toLowerCase(),zl=(_l._cat||_l.name).toLowerCase(),yu=!1,Vu=0;Vu<nl.length;Vu++){var od=nl[Vu].toLowerCase();if(od===Ll||od===zl){yu=!0;break}}yu||re.push(y[ls])}fl.push(re)}}var El=["toImage"];C.showEditInChartStudio?El.push("editInChartStudio"):C.showSendToCloud&&El.push("sendDataToCloud"),bl(El);var Ul=[],ql=[],gu=[],Bn=[];(Pe||ol||nt||In)+q+se+_t+Fn+al+sl>1?(ql=["toggleHover"],gu=["resetViews"]):q?(Ul=["zoomInGeo","zoomOutGeo"],ql=["hoverClosestGeo"],gu=["resetGeo"]):se?(ql=["hoverClosest3d"],gu=["resetCameraDefault3d","resetCameraLastSave3d"]):_t?(Ul=["zoomInMapbox","zoomOutMapbox"],ql=["toggleHover"],gu=["resetViewMapbox"]):Fn?(Ul=["zoomInMap","zoomOutMap"],ql=["toggleHover"],gu=["resetViewMap"]):ol?ql=["hoverClosestPie"]:ce?(ql=["hoverClosestCartesian","hoverCompareCartesian"],gu=["resetViewSankey"]):ql=["toggleHover"],Pe&&ql.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(R(H)||ul)&&(ql=[]),Pe&&!ll&&(Ul=["zoomIn2d","zoomOut2d","autoScale2d"],gu[0]!=="resetViews"&&(gu=["resetScale2d"])),se?Bn=["zoom3d","pan3d","orbitRotation","tableRotation"]:Pe&&!ll||In?Bn=["zoom2d","pan2d"]:_t||Fn||q?Bn=["pan2d"]:al&&(Bn=["zoom2d"]),b(H)&&Bn.push("select2d","lasso2d");var il=[],X=function(U){il.indexOf(U)===-1&&ql.indexOf(U)!==-1&&il.push(U)};if(Array.isArray(Z)){for(var cl=[],Sl=0;Sl<Z.length;Sl++){var st=Z[Sl];typeof st=="string"?(st=st.toLowerCase(),w.indexOf(st)!==-1?(D._has("mapbox")||D._has("map")||D._has("cartesian"))&&Bn.push(st):st==="togglespikelines"?X("toggleSpikelines"):st==="togglehover"?X("toggleHover"):st==="hovercompare"?X("hoverCompareCartesian"):st==="hoverclosest"?(X("hoverClosestCartesian"),X("hoverClosestGeo"),X("hoverClosest3d"),X("hoverClosestPie")):st==="v1hovermode"&&(X("hoverClosestCartesian"),X("hoverCompareCartesian"),X("hoverClosestGeo"),X("hoverClosest3d"),X("hoverClosestPie"))):cl.push(st)}Z=cl}return bl(Bn),bl(Ul.concat(gu)),bl(il),B(fl,Z)}function F(P){for(var D=m.list({_fullLayout:P},null,!0),H=0;H<D.length;H++){var C=D[H].modebardisable;if(!D[H].fixedrange&&C!=="autoscale+zoominout"&&C!=="zoominout+autoscale")return!1}return!0}function b(P){for(var D=!1,H=0;H<P.length&&!D;H++){var C=P[H];!C._module||!C._module.selectPoints||(d.traceIs(C,"scatter-like")?(l.hasMarkers(C)||l.hasText(C))&&(D=!0):d.traceIs(C,"box-violin")?(C.boxpoints==="all"||C.points==="all")&&(D=!0):D=!0)}return D}function R(P){for(var D=0;D<P.length;D++)if(!d.traceIs(P[D],"noHover"))return!1;return!0}function B(P,D){if(D.length)if(Array.isArray(D[0]))for(var H=0;H<D.length;H++)P.push(D[H]);else P.push(D);return P}function O(P){for(var D=S([],P),H=0;H<D.length;H++)for(var C=D[H],A=0;A<C.length;A++){var L=C[A];if(typeof L=="string")if(y[L]!==void 0)D[H][A]=y[L];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return D}}),tp=s((ot,Me)=>{Me.exports={moduleType:"component",name:"modebar",layoutAttributes:jh(),supplyLayoutDefaults:ch(),manage:Ch()}}),bg=s((ot,Me)=>{var m=$f().FROM_BL;Me.exports=function(l,d,x){x===void 0&&(x=m[l.constraintoward||"center"]);var v=[l.r2l(l.range[0]),l.r2l(l.range[1])],y=v[0]+(v[1]-v[0])*x;l.range=l._input.range=[l.l2r(y+(v[0]-y)*d),l.l2r(y+(v[1]-y)*d)],l.setScale()}}),Ff=s(ot=>{var Me=rt(),m=Fd(),l=Rh().id2name,d=dd(),x=bg(),v=Hl(),y=Et().ALMOST_EQUAL,w=$f().FROM_BL;ot.handleDefaults=function(P,D,H){var C=H.axIds,A=H.axHasImage,L=D._axisConstraintGroups=[],j=D._axisMatchGroups=[],Z,nl,Pe,se,q,ol,nt,In;for(Z=0;Z<C.length;Z++)se=l(C[Z]),q=P[se],ol=D[se],S(q,ol,{axIds:C,layoutOut:D,hasImage:A[se]});function _t(El,Ul){for(Z=0;Z<El.length;Z++){nl=El[Z];for(Pe in nl)D[l(Pe)][Ul]=nl}}for(_t(j,"_matchGroup"),Z=0;Z<L.length;Z++){nl=L[Z];for(Pe in nl)if(ol=D[l(Pe)],ol.fixedrange){for(var Fn in nl){var al=l(Fn);(P[al]||{}).fixedrange===!1&&Me.warn("fixedrange was specified as false for axis "+al+" but was overridden because another axis in its constraint group has fixedrange true"),D[al].fixedrange=!0}break}}for(Z=0;Z<L.length;){nl=L[Z];for(Pe in nl){ol=D[l(Pe)],ol._matchGroup&&Object.keys(ol._matchGroup).length===Object.keys(nl).length&&(L.splice(Z,1),Z--);break}Z++}_t(L,"_constraintGroup");var sl=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],ce=!1,ll=!1;function ul(){In=ol[nt],nt==="rangebreaks"&&(ll=ol._hasDayOfWeekBreaks)}for(Z=0;Z<j.length;Z++){nl=j[Z];for(var fl=0;fl<sl.length;fl++){nt=sl[fl],In=null;var bl;for(Pe in nl)if(se=l(Pe),q=P[se],ol=D[se],nt in ol){if(!ol.matches&&(bl=ol,nt in q)){ul();break}In===null&&nt in q&&ul()}if(nt==="range"&&In&&q.range&&q.range.length===2&&q.range[0]!==null&&q.range[1]!==null&&(ce=!0),nt==="autorange"&&In===null&&ce&&(In=!1),In===null&&nt in bl&&(In=bl[nt]),In!==null)for(Pe in nl)ol=D[l(Pe)],ol[nt]=nt==="range"?In.slice():In,nt==="rangebreaks"&&(ol._hasDayOfWeekBreaks=ll,v(ol,D))}}};function S(P,D,H){var C=H.axIds,A=H.layoutOut,L=H.hasImage,j=A._axisConstraintGroups,Z=A._axisMatchGroups,nl=D._id,Pe=nl.charAt(0),se=((A._splomAxes||{})[Pe]||{})[nl]||{},q=D._id,ol=q.charAt(0)==="x";D._matchGroup=null,D._constraintGroup=null;function nt(Bn,il){return Me.coerce(P,D,d,Bn,il)}nt("constrain",L?"domain":"range"),Me.coerce(P,D,{constraintoward:{valType:"enumerated",values:ol?["left","center","right"]:["bottom","middle","top"],dflt:ol?"center":"middle"}},"constraintoward");var In=D.type,_t,Fn,al=[];for(_t=0;_t<C.length;_t++)if(Fn=C[_t],Fn!==q){var sl=A[l(Fn)];sl.type===In&&al.push(Fn)}var ce=F(j,q);if(ce){var ll=[];for(_t=0;_t<al.length;_t++)Fn=al[_t],ce[Fn]||ll.push(Fn);al=ll}var ul=al.length,fl,bl;ul&&(P.matches||se.matches)&&(fl=Me.coerce(P,D,{matches:{valType:"enumerated",values:al,dflt:al.indexOf(se.matches)!==-1?se.matches:void 0}},"matches"));var El=L&&!ol?D.anchor:void 0;if(ul&&!fl&&(P.scaleanchor||El)&&(bl=Me.coerce(P,D,{scaleanchor:{valType:"enumerated",values:al.concat([!1])}},"scaleanchor",El)),fl){D._matchGroup=b(Z,q,fl,1);var Ul=A[l(fl)],ql=c(A,D)/c(A,Ul);ol!==(fl.charAt(0)==="x")&&(ql=(ol?"x":"y")+ql),b(j,q,fl,ql)}else P.matches&&C.indexOf(P.matches)!==-1&&Me.warn("ignored "+D._name+'.matches: "'+P.matches+'" to avoid an infinite loop');if(bl){var gu=nt("scaleratio");gu||(gu=D.scaleratio=1),b(j,q,bl,gu)}else P.scaleanchor&&C.indexOf(P.scaleanchor)!==-1&&Me.warn("ignored "+D._name+'.scaleanchor: "'+P.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function c(P,D){var H=D.domain;return H||(H=P[l(D.overlaying)].domain),H[1]-H[0]}function F(P,D){for(var H=0;H<P.length;H++)if(P[H][D])return P[H];return null}function b(P,D,H,C){var A,L,j,Z,nl,Pe=F(P,D);Pe===null?(Pe={},Pe[D]=1,nl=P.length,P.push(Pe)):nl=P.indexOf(Pe);var se=Object.keys(Pe);for(A=0;A<P.length;A++)if(j=P[A],A!==nl&&j[H]){var q=j[H];for(L=0;L<se.length;L++)Z=se[L],j[Z]=R(q,R(C,Pe[Z]));P.splice(nl,1);return}if(C!==1)for(L=0;L<se.length;L++){var ol=se[L];Pe[ol]=R(C,Pe[ol])}Pe[H]=1}function R(P,D){var H="",C="",A,L;typeof P=="string"&&(H=P.match(/^[xy]*/)[0],A=H.length,P=+P.substr(A)),typeof D=="string"&&(C=D.match(/^[xy]*/)[0],L=C.length,D=+D.substr(L));var j=P*D;return!A&&!L?j:!A||!L||H.charAt(0)===C.charAt(0)?H+C+P*D:A===L?j:(A>L?H.substr(L):C.substr(A))+j}function B(P,D){for(var H=D._size,C=H.h/H.w,A={},L=Object.keys(P),j=0;j<L.length;j++){var Z=L[j],nl=P[Z];if(typeof nl=="string"){var Pe=nl.match(/^[xy]*/)[0],se=Pe.length;nl=+nl.substr(se);for(var q=Pe.charAt(0)==="y"?C:1/C,ol=0;ol<se;ol++)nl*=q}A[Z]=nl}return A}ot.enforce=function(P){var D=P._fullLayout,H=D._axisConstraintGroups||[],C,A,L,j,Z,nl,Pe,se;for(C=0;C<H.length;C++){L=B(H[C],D);var q=Object.keys(L),ol=1/0,nt=0,In=1/0,_t={},Fn={},al=!1;for(A=0;A<q.length;A++)j=q[A],Fn[j]=Z=D[l(j)],Z._inputDomain?Z.domain=Z._inputDomain.slice():Z._inputDomain=Z.domain.slice(),Z._inputRange||(Z._inputRange=Z.range.slice()),Z.setScale(),_t[j]=nl=Math.abs(Z._m)/L[j],ol=Math.min(ol,nl),(Z.constrain==="domain"||!Z._constraintShrinkable)&&(In=Math.min(In,nl)),delete Z._constraintShrinkable,nt=Math.max(nt,nl),Z.constrain==="domain"&&(al=!0);if(!(ol>y*nt&&!al)){for(A=0;A<q.length;A++)if(j=q[A],nl=_t[j],Z=Fn[j],Pe=Z.constrain,nl!==In||Pe==="domain")if(se=nl/In,Pe==="range")x(Z,se);else{var sl=Z._inputDomain,ce=(Z.domain[1]-Z.domain[0])/(sl[1]-sl[0]),ll=(Z.r2l(Z.range[1])-Z.r2l(Z.range[0]))/(Z.r2l(Z._inputRange[1])-Z.r2l(Z._inputRange[0]));if(se/=ce,se*ll<1){Z.domain=Z._input.domain=sl.slice(),x(Z,se);continue}if(ll<1&&(Z.range=Z._input.range=Z._inputRange.slice(),se*=ll),Z.autorange){var ul=Z.r2l(Z.range[0]),fl=Z.r2l(Z.range[1]),bl=(ul+fl)/2,El=bl,Ul=bl,ql=Math.abs(fl-bl),gu=bl-ql*se*1.0001,Bn=bl+ql*se*1.0001,il=m.makePadFn(D,Z,0),X=m.makePadFn(D,Z,1);O(Z,se);var cl=Math.abs(Z._m),Sl=m.concatExtremes(P,Z),st=Sl.min,U=Sl.max,re,Ft;for(Ft=0;Ft<st.length;Ft++)re=st[Ft].val-il(st[Ft])/cl,re>gu&&re<El&&(El=re);for(Ft=0;Ft<U.length;Ft++)re=U[Ft].val+X(U[Ft])/cl,re<Bn&&re>Ul&&(Ul=re);var ls=(Ul-El)/(2*ql);se/=ls,El=Z.l2r(El),Ul=Z.l2r(Ul),Z.range=Z._input.range=ul<fl?[El,Ul]:[Ul,El]}O(Z,se)}}}},ot.getAxisGroup=function(P,D){for(var H=P._axisMatchGroups,C=0;C<H.length;C++){var A=H[C];if(A[D])return"g"+C}return D},ot.clean=function(P,D){if(D._inputDomain){for(var H=!1,C=D._id,A=P._fullLayout._axisConstraintGroups,L=0;L<A.length;L++)if(A[L][C]){H=!0;break}(!H||D.constrain!=="domain")&&(D._input.domain=D.domain=D._inputDomain,delete D._inputDomain)}};function O(P,D){var H=P._inputDomain,C=w[P.constraintoward],A=H[0]+(H[1]-H[0])*C;P.domain=P._input.domain=[A+(H[0]-A)/D,A+(H[1]-A)/D],P.setScale()}}),zp=s(ot=>{var Me=$(),m=ff(),l=Vf(),d=rt(),x=Kg(),v=ag(),y=oh(),w=Qd(),S=ih(),c=tp(),F=Ud(),b=$f(),R=Ff(),B=R.enforce,O=R.clean,P=Fd().doAutoRange,D="start",H="middle",C="end",A=rf().zindexSeparator;ot.layoutStyles=function(ce){return d.syncOrAsync([l.doAutoMargin,j],ce)};function L(ce,ll,ul){for(var fl=0;fl<ul.length;fl++){var bl=ul[fl][0],El=ul[fl][1];if(!(bl[0]>=ce[1]||bl[1]<=ce[0])&&El[0]<ll[1]&&El[1]>ll[0])return!0}return!1}function j(ce){var ll=ce._fullLayout,ul=ll._size,fl=ul.p,bl=F.list(ce,"",!0),El,Ul,ql,gu,Bn,il;if(ll._paperdiv.style({width:ce._context.responsive&&ll.autosize&&!ce._context._hasZeroWidth&&!ce.layout.width?"100%":ll.width+"px",height:ce._context.responsive&&ll.autosize&&!ce._context._hasZeroHeight&&!ce.layout.height?"100%":ll.height+"px"}).selectAll(".main-svg").call(w.setSize,ll.width,ll.height),ce._context.setBackground(ce,ll.paper_bgcolor),ot.drawMainTitle(ce),c.manage(ce),!ll._has("cartesian"))return l.previousPromises(ce);function X(gl,Dl,Vl){var Mu=gl._lw/2;if(gl._id.charAt(0)==="x"){if(Dl){if(Vl==="top")return Dl._offset-fl-Mu}else return ul.t+ul.h*(1-(gl.position||0))+Mu%1;return Dl._offset+Dl._length+fl+Mu}if(Dl){if(Vl==="right")return Dl._offset+Dl._length+fl+Mu}else return ul.l+ul.w*(gl.position||0)+Mu%1;return Dl._offset-fl-Mu}for(El=0;El<bl.length;El++){gu=bl[El];var cl=gu._anchorAxis;gu._linepositions={},gu._lw=w.crispRound(ce,gu.linewidth,1),gu._mainLinePosition=X(gu,cl,gu.side),gu._mainMirrorPosition=gu.mirror&&cl?X(gu,cl,b.OPPOSITE_SIDE[gu.side]):null}var Sl=[],st=[],U=[],re=y.opacity(ll.paper_bgcolor)===1&&y.opacity(ll.plot_bgcolor)===1&&ll.paper_bgcolor===ll.plot_bgcolor;for(Ul in ll._plots)if(ql=ll._plots[Ul],ql.mainplot)ql.bg&&ql.bg.remove(),ql.bg=void 0;else{var Ft=ql.xaxis.domain,ls=ql.yaxis.domain,_l=ql.plotgroup;if(L(Ft,ls,U)&&Ul.indexOf(A)===-1){var Ll=_l.node(),zl=ql.bg=d.ensureSingle(_l,"rect","bg");Ll.insertBefore(zl.node(),Ll.childNodes[0]),st.push(Ul)}else _l.select("rect.bg").remove(),U.push([Ft,ls]),re||(Sl.push(Ul),st.push(Ul))}var yu=ll._bgLayer.selectAll(".bg").data(Sl);for(yu.enter().append("rect").classed("bg",!0),yu.exit().remove(),yu.each(function(gl){ll._plots[gl].bg=Me.select(this)}),El=0;El<st.length;El++)ql=ll._plots[st[El]],Bn=ql.xaxis,il=ql.yaxis,ql.bg&&Bn._offset!==void 0&&il._offset!==void 0&&ql.bg.call(w.setRect,Bn._offset-fl,il._offset-fl,Bn._length+2*fl,il._length+2*fl).call(y.fill,ll.plot_bgcolor).style("stroke-width",0);if(!ll._hasOnlyLargeSploms)for(Ul in ll._plots){ql=ll._plots[Ul],Bn=ql.xaxis,il=ql.yaxis;var Vu=ql.clipId="clip"+ll._uid+Ul+"plot",od=d.ensureSingleById(ll._clips,"clipPath",Vu,function(gl){gl.classed("plotclip",!0).append("rect")});ql.clipRect=od.select("rect").attr({width:Bn._length,height:il._length}),w.setTranslate(ql.plot,Bn._offset,il._offset);var Ad,vd;ql._hasClipOnAxisFalse?(Ad=null,vd=Vu):(Ad=Vu,vd=null),w.setClipUrl(ql.plot,Ad,ce),ql.layerClipId=vd}var fd,Kl,vu,Rl,Wu,cd,xd,Td,Pd,Hd,$d,Wd,mh;function Dd(gl){return"M"+fd+","+gl+"H"+Kl}function bh(gl){return"M"+Bn._offset+","+gl+"h"+Bn._length}function Dh(gl){return"M"+gl+","+Td+"V"+xd}function vh(gl){return il._shift!==void 0&&(gl+=il._shift),"M"+gl+","+il._offset+"v"+il._length}function Gh(gl,Dl,Vl){if(!gl.showline||Ul!==gl._mainSubplot)return"";if(!gl._anchorAxis)return Vl(gl._mainLinePosition);var Mu=Dl(gl._mainLinePosition);return gl.mirror&&(Mu+=Dl(gl._mainMirrorPosition)),Mu}for(Ul in ll._plots){ql=ll._plots[Ul],Bn=ql.xaxis,il=ql.yaxis;var Ql="M0,0";Z(Bn,Ul)&&(Wu=Pe(Bn,"left",il,bl),fd=Bn._offset-(Wu?fl+Wu:0),cd=Pe(Bn,"right",il,bl),Kl=Bn._offset+Bn._length+(cd?fl+cd:0),vu=X(Bn,il,"bottom"),Rl=X(Bn,il,"top"),mh=!Bn._anchorAxis||Ul!==Bn._mainSubplot,mh&&(Bn.mirror==="allticks"||Bn.mirror==="all")&&(Bn._linepositions[Ul]=[vu,Rl]),Ql=Gh(Bn,Dd,bh),mh&&Bn.showline&&(Bn.mirror==="all"||Bn.mirror==="allticks")&&(Ql+=Dd(vu)+Dd(Rl)),ql.xlines.style("stroke-width",Bn._lw+"px").call(y.stroke,Bn.showline?Bn.linecolor:"rgba(0,0,0,0)")),ql.xlines.attr("d",Ql);var Ku="M0,0";Z(il,Ul)&&($d=Pe(il,"bottom",Bn,bl),xd=il._offset+il._length+($d?fl:0),Wd=Pe(il,"top",Bn,bl),Td=il._offset-(Wd?fl:0),Pd=X(il,Bn,"left"),Hd=X(il,Bn,"right"),mh=!il._anchorAxis||Ul!==il._mainSubplot,mh&&(il.mirror==="allticks"||il.mirror==="all")&&(il._linepositions[Ul]=[Pd,Hd]),Ku=Gh(il,Dh,vh),mh&&il.showline&&(il.mirror==="all"||il.mirror==="allticks")&&(Ku+=Dh(Pd)+Dh(Hd)),ql.ylines.style("stroke-width",il._lw+"px").call(y.stroke,il.showline?il.linecolor:"rgba(0,0,0,0)")),ql.ylines.attr("d",Ku)}return F.makeClipPaths(ce),l.previousPromises(ce)}function Z(ce,ll){return(ce.ticks||ce.showline)&&(ll===ce._mainSubplot||ce.mirror==="all"||ce.mirror==="allticks")}function nl(ce,ll,ul){if(!ul.showline||!ul._lw)return!1;if(ul.mirror==="all"||ul.mirror==="allticks")return!0;var fl=ul._anchorAxis;if(!fl)return!1;var bl=b.FROM_BL[ll];return ul.side===ll?fl.domain[bl]===ce.domain[bl]:ul.mirror&&fl.domain[1-bl]===ce.domain[1-bl]}function Pe(ce,ll,ul,fl){if(nl(ce,ll,ul))return ul._lw;for(var bl=0;bl<fl.length;bl++){var El=fl[bl];if(El._mainAxis===ul._mainAxis&&nl(ce,ll,El))return El._lw}return 0}ot.drawMainTitle=function(ce){var ll=ce._fullLayout.title,ul=ce._fullLayout,fl=al(ul),bl=sl(ul),El=_t(ul,bl),Ul=In(ul,fl);if(S.draw(ce,"gtitle",{propContainer:ul,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:ul._dfltTitle.plot,subtitlePlaceholder:ul._dfltTitle.subtitle,attributes:{x:Ul,y:El,"text-anchor":fl,dy:bl}}),ll.text&&ll.automargin){var ql=Me.select(ce).selectAll(".gtitle"),gu=w.bBox(Me.select(ce).selectAll(".g-gtitle").node()).height,Bn=ol(ce,ll,gu);if(Bn>0){nt(ce,El,Bn,gu),ql.attr({x:Ul,y:El,"text-anchor":fl,dy:Fn(ll.yanchor)}).call(x.positionText,Ul,El);var il=(ll.text.match(x.BR_TAG_ALL)||[]).length;if(il){var X=b.LINE_SPACING*il+b.MID_SHIFT;ll.y===0&&(X=-X),ql.selectAll(".line").each(function(){var re=+this.getAttribute("dy").slice(0,-2)-X+"em";this.setAttribute("dy",re)})}var cl=Me.select(ce).selectAll(".gtitle-subtitle");if(cl.node()){var Sl=ql.node().getBBox(),st=Sl.y+Sl.height,U=st+S.SUBTITLE_PADDING_EM*ll.subtitle.font.size;cl.attr({x:Ul,y:U,"text-anchor":fl,dy:Fn(ll.yanchor)}).call(x.positionText,Ul,U)}}}};function se(ce,ll,ul,fl,bl){var El=ll.yref==="paper"?ce._fullLayout._size.h:ce._fullLayout.height,Ul=d.isTopAnchor(ll)?fl:fl-bl,ql=ul==="b"?El-Ul:Ul;return d.isTopAnchor(ll)&&ul==="t"||d.isBottomAnchor(ll)&&ul==="b"?!1:ql<bl}function q(ce,ll,ul,fl,bl){var El=0;return ul==="middle"&&(El+=bl/2),ce==="t"?(ul==="top"&&(El+=bl),El+=fl-ll*fl):(ul==="bottom"&&(El+=bl),El+=ll*fl),El}function ol(ce,ll,ul){var fl=ll.y,bl=ll.yanchor,El=fl>.5?"t":"b",Ul=ce._fullLayout.margin[El],ql=0;return ll.yref==="paper"?ql=ul+ll.pad.t+ll.pad.b:ll.yref==="container"&&(ql=q(El,fl,bl,ce._fullLayout.height,ul)+ll.pad.t+ll.pad.b),ql>Ul?ql:0}function nt(ce,ll,ul,fl){var bl="title.automargin",El=ce._fullLayout.title,Ul=El.y>.5?"t":"b",ql={x:El.x,y:El.y,t:0,b:0},gu={};El.yref==="paper"&&se(ce,El,Ul,ll,fl)?ql[Ul]=ul:El.yref==="container"&&(gu[Ul]=ul,ce._fullLayout._reservedMargin[bl]=gu),l.allowAutoMargin(ce,bl),l.autoMargin(ce,bl,ql)}function In(ce,ll){var ul=ce.title,fl=ce._size,bl=0;switch(ll===D?bl=ul.pad.l:ll===C&&(bl=-ul.pad.r),ul.xref){case"paper":return fl.l+fl.w*ul.x+bl;case"container":default:return ce.width*ul.x+bl}}function _t(ce,ll){var ul=ce.title,fl=ce._size,bl=0;if(ll==="0em"||!ll?bl=-ul.pad.b:ll===b.CAP_SHIFT+"em"&&(bl=ul.pad.t),ul.y==="auto")return fl.t/2;switch(ul.yref){case"paper":return fl.t+fl.h-fl.h*ul.y+bl;case"container":default:return ce.height-ce.height*ul.y+bl}}function Fn(ce){return ce==="top"?b.CAP_SHIFT+.3+"em":ce==="bottom"?"-0.3em":b.MID_SHIFT+"em"}function al(ce){var ll=ce.title,ul=H;return d.isRightAnchor(ll)?ul=C:d.isLeftAnchor(ll)&&(ul=D),ul}function sl(ce){var ll=ce.title,ul="0em";return d.isTopAnchor(ll)?ul=b.CAP_SHIFT+"em":d.isMiddleAnchor(ll)&&(ul=b.MID_SHIFT+"em"),ul}ot.doTraceStyle=function(ce){var ll=ce.calcdata,ul=[],fl;for(fl=0;fl<ll.length;fl++){var bl=ll[fl],El=bl[0]||{},Ul=El.trace||{},ql=Ul._module||{},gu=ql.arraysToCalcdata;gu&&gu(bl,Ul);var Bn=ql.editStyle;Bn&&ul.push({fn:Bn,cd0:El})}if(ul.length){for(fl=0;fl<ul.length;fl++){var il=ul[fl];il.fn(ce,il.cd0)}v(ce),ot.redrawReglTraces(ce)}return l.style(ce),m.getComponentMethod("legend","draw")(ce),l.previousPromises(ce)},ot.doColorBars=function(ce){return m.getComponentMethod("colorbar","draw")(ce),l.previousPromises(ce)},ot.layoutReplot=function(ce){var ll=ce.layout;return ce.layout=void 0,m.call("_doPlot",ce,"",ll)},ot.doLegend=function(ce){return m.getComponentMethod("legend","draw")(ce),l.previousPromises(ce)},ot.doTicksRelayout=function(ce){return F.draw(ce,"redraw"),ce._fullLayout._hasOnlyLargeSploms&&(m.subplotsRegistry.splom.updateGrid(ce),v(ce),ot.redrawReglTraces(ce)),ot.drawMainTitle(ce),l.previousPromises(ce)},ot.doModeBar=function(ce){var ll=ce._fullLayout;c.manage(ce);for(var ul=0;ul<ll._basePlotModules.length;ul++){var fl=ll._basePlotModules[ul].updateFx;fl&&fl(ce)}return l.previousPromises(ce)},ot.doCamera=function(ce){for(var ll=ce._fullLayout,ul=ll._subplots.gl3d,fl=0;fl<ul.length;fl++){var bl=ll[ul[fl]],El=bl._scene;El.setViewport(bl)}},ot.drawData=function(ce){var ll=ce._fullLayout;v(ce);for(var ul=ll._basePlotModules,fl=0;fl<ul.length;fl++)ul[fl].plot(ce);return ot.redrawReglTraces(ce),l.style(ce),m.getComponentMethod("selections","draw")(ce),m.getComponentMethod("shapes","draw")(ce),m.getComponentMethod("annotations","draw")(ce),m.getComponentMethod("images","draw")(ce),ll._replotting=!1,l.previousPromises(ce)},ot.redrawReglTraces=function(ce){var ll=ce._fullLayout;if(ll._has("regl")){var ul=ce._fullData,fl=[],bl=[],El,Ul;for(ll._hasOnlyLargeSploms&&ll._splomGrid.draw(),El=0;El<ul.length;El++){var ql=ul[El];ql.visible===!0&&ql._length!==0&&(ql.type==="splom"?ll._splomScenes[ql.uid].draw():ql.type==="scattergl"?d.pushUnique(fl,ql.xaxis+ql.yaxis):ql.type==="scatterpolargl"&&d.pushUnique(bl,ql.subplot))}for(El=0;El<fl.length;El++)Ul=ll._plots[fl[El]],Ul._scene&&Ul._scene.draw();for(El=0;El<bl.length;El++)Ul=ll[bl[El]]._subplot,Ul._scene&&Ul._scene.draw()}},ot.doAutoRangeAndConstraints=function(ce){for(var ll=F.list(ce,"",!0),ul,fl={},bl=0;bl<ll.length;bl++)if(ul=ll[bl],!fl[ul._id]){fl[ul._id]=1,O(ce,ul),P(ce,ul);var El=ul._matchGroup;if(El)for(var Ul in El){var ql=F.getFromId(ce,Ul);P(ce,ql,ul.range),fl[Ul]=1}}B(ce)},ot.finalDraw=function(ce){m.getComponentMethod("rangeslider","draw")(ce),m.getComponentMethod("rangeselector","draw")(ce)},ot.drawMarginPushers=function(ce){m.getComponentMethod("legend","draw")(ce),m.getComponentMethod("rangeselector","draw")(ce),m.getComponentMethod("sliders","draw")(ce),m.getComponentMethod("updatemenus","draw")(ce),m.getComponentMethod("colorbar","draw")(ce)}}),Om=s((ot,Me)=>{var m=kg().readPaths,l=el(),d=xf().clearOutlineControllers,x=oh(),v=Qd(),y=Bp().arrayEditor,w=ve(),S=w.getPathString;Me.exports={draw:c,drawOne:b,activateLastSelection:O};function c(D){var H=D._fullLayout;d(D),H._selectionLayer.selectAll("path").remove();for(var C in H._plots){var A=H._plots[C].selectionLayer;A&&A.selectAll("path").remove()}for(var L=0;L<H.selections.length;L++)b(D,L)}function F(D){return D._context.editSelection}function b(D,H){D._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+H+'"]').remove();var C=w.makeSelectionsOptionsAndPlotinfo(D,H),A=C.options,L=C.plotinfo;if(!A._input)return;j(D._fullLayout._selectionLayer);function j(Z){var nl=S(D,A),Pe={"data-index":H,"fill-rule":"evenodd",d:nl},se=A.opacity,q="rgba(0,0,0,0)",ol=A.line.color||x.contrast(D._fullLayout.plot_bgcolor),nt=A.line.width,In=A.line.dash;nt||(nt=5,In="solid");var _t=F(D)&&D._fullLayout._activeSelectionIndex===H;_t&&(q=D._fullLayout.activeselection.fillcolor,se=D._fullLayout.activeselection.opacity);for(var Fn=[],al=1;al>=0;al--){var sl=Z.append("path").attr(Pe).style("opacity",al?.1:se).call(x.stroke,ol).call(x.fill,q).call(v.dashLine,al?"solid":In,al?4+nt:nt);if(R(sl,D,A),_t){var ce=y(D.layout,"selections",A);sl.style({cursor:"move"});var ll={element:sl.node(),plotinfo:L,gd:D,editHelpers:ce,isActiveSelection:!0},ul=m(nl,D);l(ul,sl,ll)}else sl.style("pointer-events",al?"all":"none");Fn[al]=sl}var fl=Fn[0],bl=Fn[1];bl.node().addEventListener("click",function(){return B(D,fl)})}}function R(D,H,C){var A=C.xref+C.yref;v.setClipUrl(D,"clip"+H._fullLayout._uid+A,H)}function B(D,H){if(F(D)){var C=H.node(),A=+C.getAttribute("data-index");if(A>=0){if(A===D._fullLayout._activeSelectionIndex){P(D);return}D._fullLayout._activeSelectionIndex=A,D._fullLayout._deactivateSelection=P,c(D)}}}function O(D){if(F(D)){var H=D._fullLayout.selections.length-1;D._fullLayout._activeSelectionIndex=H,D._fullLayout._deactivateSelection=P,c(D)}}function P(D){if(F(D)){var H=D._fullLayout._activeSelectionIndex;H>=0&&(d(D),delete D._fullLayout._activeSelectionIndex,c(D))}}}),Zg=s((ot,Me)=>{function m(){var l,d=0,x=!1;function v(y,w){return l.list.push({type:y,data:w?JSON.parse(JSON.stringify(w)):void 0}),l}return l={list:[],segmentId:function(){return d++},checkIntersection:function(y,w){return v("check",{seg1:y,seg2:w})},segmentChop:function(y,w){return v("div_seg",{seg:y,pt:w}),v("chop",{seg:y,pt:w})},statusRemove:function(y){return v("pop_seg",{seg:y})},segmentUpdate:function(y){return v("seg_update",{seg:y})},segmentNew:function(y,w){return v("new_seg",{seg:y,primary:w})},segmentRemove:function(y){return v("rem_seg",{seg:y})},tempStatus:function(y,w,S){return v("temp_status",{seg:y,above:w,below:S})},rewind:function(y){return v("rewind",{seg:y})},status:function(y,w,S){return v("status",{seg:y,above:w,below:S})},vert:function(y){return y===x?l:(x=y,v("vert",{x:y}))},log:function(y){return typeof y!="string"&&(y=JSON.stringify(y,!1,"  ")),v("log",{txt:y})},reset:function(){return v("reset")},selected:function(y){return v("selected",{segs:y})},chainStart:function(y){return v("chain_start",{seg:y})},chainRemoveHead:function(y,w){return v("chain_rem_head",{index:y,pt:w})},chainRemoveTail:function(y,w){return v("chain_rem_tail",{index:y,pt:w})},chainNew:function(y,w){return v("chain_new",{pt1:y,pt2:w})},chainMatch:function(y){return v("chain_match",{index:y})},chainClose:function(y){return v("chain_close",{index:y})},chainAddHead:function(y,w){return v("chain_add_head",{index:y,pt:w})},chainAddTail:function(y,w){return v("chain_add_tail",{index:y,pt:w})},chainConnect:function(y,w){return v("chain_con",{index1:y,index2:w})},chainReverse:function(y){return v("chain_rev",{index:y})},chainJoin:function(y,w){return v("chain_join",{index1:y,index2:w})},done:function(){return v("done")}},l}Me.exports=m}),Qf=s((ot,Me)=>{function m(l){typeof l!="number"&&(l=1e-10);var d={epsilon:function(x){return typeof x=="number"&&(l=x),l},pointAboveOrOnLine:function(x,v,y){var w=v[0],S=v[1],c=y[0],F=y[1],b=x[0],R=x[1];return(c-w)*(R-S)-(F-S)*(b-w)>=-l},pointBetween:function(x,v,y){var w=x[1]-v[1],S=y[0]-v[0],c=x[0]-v[0],F=y[1]-v[1],b=c*S+w*F;if(b<l)return!1;var R=S*S+F*F;return!(b-R>-l)},pointsSameX:function(x,v){return Math.abs(x[0]-v[0])<l},pointsSameY:function(x,v){return Math.abs(x[1]-v[1])<l},pointsSame:function(x,v){return d.pointsSameX(x,v)&&d.pointsSameY(x,v)},pointsCompare:function(x,v){return d.pointsSameX(x,v)?d.pointsSameY(x,v)?0:x[1]<v[1]?-1:1:x[0]<v[0]?-1:1},pointsCollinear:function(x,v,y){var w=x[0]-v[0],S=x[1]-v[1],c=v[0]-y[0],F=v[1]-y[1];return Math.abs(w*F-c*S)<l},linesIntersect:function(x,v,y,w){var S=v[0]-x[0],c=v[1]-x[1],F=w[0]-y[0],b=w[1]-y[1],R=S*b-c*F;if(Math.abs(R)<l)return!1;var B=x[0]-y[0],O=x[1]-y[1],P=(F*O-b*B)/R,D=(S*O-c*B)/R,H={alongA:0,alongB:0,pt:[x[0]+P*S,x[1]+P*c]};return P<=-l?H.alongA=-2:P<l?H.alongA=-1:P-1<=-l?H.alongA=0:P-1<l?H.alongA=1:H.alongA=2,D<=-l?H.alongB=-2:D<l?H.alongB=-1:D-1<=-l?H.alongB=0:D-1<l?H.alongB=1:H.alongB=2,H},pointInsideRegion:function(x,v){for(var y=x[0],w=x[1],S=v[v.length-1][0],c=v[v.length-1][1],F=!1,b=0;b<v.length;b++){var R=v[b][0],B=v[b][1];B-w>l!=c-w>l&&(S-R)*(w-B)/(c-B)+R-y>l&&(F=!F),S=R,c=B}return F}};return d}Me.exports=m}),hm=s((ot,Me)=>{var m={create:function(){var l={root:{root:!0,next:null},exists:function(d){return!(d===null||d===l.root)},isEmpty:function(){return l.root.next===null},getHead:function(){return l.root.next},insertBefore:function(d,x){for(var v=l.root,y=l.root.next;y!==null;){if(x(y)){d.prev=y.prev,d.next=y,y.prev.next=d,y.prev=d;return}v=y,y=y.next}v.next=d,d.prev=v,d.next=null},findTransition:function(d){for(var x=l.root,v=l.root.next;v!==null&&!d(v);)x=v,v=v.next;return{before:x===l.root?null:x,after:v,insert:function(y){return y.prev=x,y.next=v,x.next=y,v!==null&&(v.prev=y),y}}}};return l},node:function(l){return l.prev=null,l.next=null,l.remove=function(){l.prev.next=l.next,l.next&&(l.next.prev=l.prev),l.prev=null,l.next=null},l}};Me.exports=m}),mg=s((ot,Me)=>{var m=hm();function l(d,x,v){function y(H,C){return{id:v?v.segmentId():-1,start:H,end:C,myFill:{above:null,below:null},otherFill:null}}function w(H,C,A){return{id:v?v.segmentId():-1,start:H,end:C,myFill:{above:A.myFill.above,below:A.myFill.below},otherFill:null}}var S=m.create();function c(H,C,A,L,j,Z){var nl=x.pointsCompare(C,j);return nl!==0?nl:x.pointsSame(A,Z)?0:H!==L?H?1:-1:x.pointAboveOrOnLine(A,L?j:Z,L?Z:j)?1:-1}function F(H,C){S.insertBefore(H,function(A){var L=c(H.isStart,H.pt,C,A.isStart,A.pt,A.other.pt);return L<0})}function b(H,C){var A=m.node({isStart:!0,pt:H.start,seg:H,primary:C,other:null,status:null});return F(A,H.end),A}function R(H,C,A){var L=m.node({isStart:!1,pt:C.end,seg:C,primary:A,other:H,status:null});H.other=L,F(L,H.pt)}function B(H,C){var A=b(H,C);return R(A,H,C),A}function O(H,C){v&&v.segmentChop(H.seg,C),H.other.remove(),H.seg.end=C,H.other.pt=C,F(H.other,H.pt)}function P(H,C){var A=w(C,H.seg.end,H.seg);return O(H,C),B(A,H.primary)}function D(H,C){var A=m.create();function L(sl,ce){var ll=sl.seg.start,ul=sl.seg.end,fl=ce.seg.start,bl=ce.seg.end;return x.pointsCollinear(ll,fl,bl)?x.pointsCollinear(ul,fl,bl)||x.pointAboveOrOnLine(ul,fl,bl)?1:-1:x.pointAboveOrOnLine(ll,fl,bl)?1:-1}function j(sl){return A.findTransition(function(ce){var ll=L(sl,ce.ev);return ll>0})}function Z(sl,ce){var ll=sl.seg,ul=ce.seg,fl=ll.start,bl=ll.end,El=ul.start,Ul=ul.end;v&&v.checkIntersection(ll,ul);var ql=x.linesIntersect(fl,bl,El,Ul);if(ql===!1){if(!x.pointsCollinear(fl,bl,El)||x.pointsSame(fl,Ul)||x.pointsSame(bl,El))return!1;var gu=x.pointsSame(fl,El),Bn=x.pointsSame(bl,Ul);if(gu&&Bn)return ce;var il=!gu&&x.pointBetween(fl,El,Ul),X=!Bn&&x.pointBetween(bl,El,Ul);if(gu)return X?P(ce,bl):P(sl,Ul),ce;il&&(Bn||(X?P(ce,bl):P(sl,Ul)),P(ce,fl))}else ql.alongA===0&&(ql.alongB===-1?P(sl,El):ql.alongB===0?P(sl,ql.pt):ql.alongB===1&&P(sl,Ul)),ql.alongB===0&&(ql.alongA===-1?P(ce,fl):ql.alongA===0?P(ce,ql.pt):ql.alongA===1&&P(ce,bl));return!1}for(var nl=[];!S.isEmpty();){var Pe=S.getHead();if(v&&v.vert(Pe.pt[0]),Pe.isStart){let sl=function(){if(q){var ce=Z(Pe,q);if(ce)return ce}return ol?Z(Pe,ol):!1};v&&v.segmentNew(Pe.seg,Pe.primary);var se=j(Pe),q=se.before?se.before.ev:null,ol=se.after?se.after.ev:null;v&&v.tempStatus(Pe.seg,q?q.seg:!1,ol?ol.seg:!1);var nt=sl();if(nt){if(d){var In;Pe.seg.myFill.below===null?In=!0:In=Pe.seg.myFill.above!==Pe.seg.myFill.below,In&&(nt.seg.myFill.above=!nt.seg.myFill.above)}else nt.seg.otherFill=Pe.seg.myFill;v&&v.segmentUpdate(nt.seg),Pe.other.remove(),Pe.remove()}if(S.getHead()!==Pe){v&&v.rewind(Pe.seg);continue}if(d){var In;Pe.seg.myFill.below===null?In=!0:In=Pe.seg.myFill.above!==Pe.seg.myFill.below,ol?Pe.seg.myFill.below=ol.seg.myFill.above:Pe.seg.myFill.below=H,In?Pe.seg.myFill.above=!Pe.seg.myFill.below:Pe.seg.myFill.above=Pe.seg.myFill.below}else if(Pe.seg.otherFill===null){var _t;ol?Pe.primary===ol.primary?_t=ol.seg.otherFill.above:_t=ol.seg.myFill.above:_t=Pe.primary?C:H,Pe.seg.otherFill={above:_t,below:_t}}v&&v.status(Pe.seg,q?q.seg:!1,ol?ol.seg:!1),Pe.other.status=se.insert(m.node({ev:Pe}))}else{var Fn=Pe.status;if(Fn===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(A.exists(Fn.prev)&&A.exists(Fn.next)&&Z(Fn.prev.ev,Fn.next.ev),v&&v.statusRemove(Fn.ev.seg),Fn.remove(),!Pe.primary){var al=Pe.seg.myFill;Pe.seg.myFill=Pe.seg.otherFill,Pe.seg.otherFill=al}nl.push(Pe.seg)}S.getHead().remove()}return v&&v.done(),nl}return d?{addRegion:function(H){for(var C,A=H[H.length-1],L=0;L<H.length;L++){C=A,A=H[L];var j=x.pointsCompare(C,A);j!==0&&B(y(j<0?C:A,j<0?A:C),!0)}},calculate:function(H){return D(H,!1)}}:{calculate:function(H,C,A,L){return H.forEach(function(j){B(w(j.start,j.end,j),!0)}),A.forEach(function(j){B(w(j.start,j.end,j),!1)}),D(C,L)}}}Me.exports=l}),Np=s((ot,Me)=>{function m(l,d,x){var v=[],y=[];return l.forEach(function(w){var S=w.start,c=w.end;if(d.pointsSame(S,c)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}x&&x.chainStart(w);var F={index:0,matches_head:!1,matches_pt1:!1},b={index:0,matches_head:!1,matches_pt1:!1},R=F;function B(_t,Fn,al){return R.index=_t,R.matches_head=Fn,R.matches_pt1=al,R===F?(R=b,!1):(R=null,!0)}for(var O=0;O<v.length;O++){var P=v[O],D=P[0];P[1];var H=P[P.length-1];if(P[P.length-2],d.pointsSame(D,S)){if(B(O,!0,!0))break}else if(d.pointsSame(D,c)){if(B(O,!0,!1))break}else if(d.pointsSame(H,S)){if(B(O,!1,!0))break}else if(d.pointsSame(H,c)&&B(O,!1,!1))break}if(R===F){v.push([S,c]),x&&x.chainNew(S,c);return}if(R===b){x&&x.chainMatch(F.index);var C=F.index,A=F.matches_pt1?c:S,L=F.matches_head,P=v[C],j=L?P[0]:P[P.length-1],Z=L?P[1]:P[P.length-2],nl=L?P[P.length-1]:P[0],Pe=L?P[P.length-2]:P[1];if(d.pointsCollinear(Z,j,A)&&(L?(x&&x.chainRemoveHead(F.index,A),P.shift()):(x&&x.chainRemoveTail(F.index,A),P.pop()),j=Z),d.pointsSame(nl,A)){v.splice(C,1),d.pointsCollinear(Pe,nl,j)&&(L?(x&&x.chainRemoveTail(F.index,j),P.pop()):(x&&x.chainRemoveHead(F.index,j),P.shift())),x&&x.chainClose(F.index),y.push(P);return}L?(x&&x.chainAddHead(F.index,A),P.unshift(A)):(x&&x.chainAddTail(F.index,A),P.push(A));return}function se(_t){x&&x.chainReverse(_t),v[_t].reverse()}function q(_t,Fn){var al=v[_t],sl=v[Fn],ce=al[al.length-1],ll=al[al.length-2],ul=sl[0],fl=sl[1];d.pointsCollinear(ll,ce,ul)&&(x&&x.chainRemoveTail(_t,ce),al.pop(),ce=ll),d.pointsCollinear(ce,ul,fl)&&(x&&x.chainRemoveHead(Fn,ul),sl.shift()),x&&x.chainJoin(_t,Fn),v[_t]=al.concat(sl),v.splice(Fn,1)}var ol=F.index,nt=b.index;x&&x.chainConnect(ol,nt);var In=v[ol].length<v[nt].length;F.matches_head?b.matches_head?In?(se(ol),q(ol,nt)):(se(nt),q(nt,ol)):q(nt,ol):b.matches_head?q(ol,nt):In?(se(ol),q(nt,ol)):(se(nt),q(ol,nt))}),y}Me.exports=m}),jf=s((ot,Me)=>{function m(d,x,v){var y=[];return d.forEach(function(w){var S=(w.myFill.above?8:0)+(w.myFill.below?4:0)+(w.otherFill&&w.otherFill.above?2:0)+(w.otherFill&&w.otherFill.below?1:0);x[S]!==0&&y.push({id:v?v.segmentId():-1,start:w.start,end:w.end,myFill:{above:x[S]===1,below:x[S]===2},otherFill:null})}),v&&v.selected(y),y}var l={union:function(d,x){return m(d,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],x)},intersect:function(d,x){return m(d,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],x)},difference:function(d,x){return m(d,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],x)},differenceRev:function(d,x){return m(d,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],x)},xor:function(d,x){return m(d,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],x)}};Me.exports=l}),rm=s((ot,Me)=>{var m={toPolygon:function(l,d){function x(w){if(w.length<=0)return l.segments({inverted:!1,regions:[]});function S(b){var R=b.slice(0,b.length-1);return l.segments({inverted:!1,regions:[R]})}for(var c=S(w[0]),F=1;F<w.length;F++)c=l.selectDifference(l.combine(c,S(w[F])));return c}if(d.type==="Polygon")return l.polygon(x(d.coordinates));if(d.type==="MultiPolygon"){for(var v=l.segments({inverted:!1,regions:[]}),y=0;y<d.coordinates.length;y++)v=l.selectUnion(l.combine(v,x(d.coordinates[y])));return l.polygon(v)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(l,d,x){x=l.polygon(l.segments(x));function v(P,D){return d.pointInsideRegion([(P[0][0]+P[1][0])*.5,(P[0][1]+P[1][1])*.5],D)}function y(P){return{region:P,children:[]}}var w=y(null);function S(P,D){for(var H=0;H<P.children.length;H++){var C=P.children[H];if(v(D,C.region)){S(C,D);return}}for(var A=y(D),H=0;H<P.children.length;H++){var C=P.children[H];v(C.region,D)&&(A.children.push(C),P.children.splice(H,1),H--)}P.children.push(A)}for(var c=0;c<x.regions.length;c++){var F=x.regions[c];F.length<3||S(w,F)}function b(P,D){for(var H=0,C=P[P.length-1][0],A=P[P.length-1][1],L=[],j=0;j<P.length;j++){var Z=P[j][0],nl=P[j][1];L.push([Z,nl]),H+=nl*C-Z*A,C=Z,A=nl}var Pe=H<0;return Pe!==D&&L.reverse(),L.push([L[0][0],L[0][1]]),L}var R=[];function B(P){var D=[b(P.region,!1)];R.push(D);for(var H=0;H<P.children.length;H++)D.push(O(P.children[H]))}function O(P){for(var D=0;D<P.children.length;D++)B(P.children[D]);return b(P.region,!0)}for(var c=0;c<w.children.length;c++)B(w.children[c]);return R.length<=0?{type:"Polygon",coordinates:[]}:R.length==1?{type:"Polygon",coordinates:R[0]}:{type:"MultiPolygon",coordinates:R}}};Me.exports=m}),Sf=s((ot,Me)=>{var m=Zg(),l=Qf(),d=mg(),x=Np(),v=jf(),y=rm(),w=!1,S=l(),c;c={buildLog:function(b){return b===!0?w=m():b===!1&&(w=!1),w===!1?!1:w.list},epsilon:function(b){return S.epsilon(b)},segments:function(b){var R=d(!0,S,w);return b.regions.forEach(R.addRegion),{segments:R.calculate(b.inverted),inverted:b.inverted}},combine:function(b,R){var B=d(!1,S,w);return{combined:B.calculate(b.segments,b.inverted,R.segments,R.inverted),inverted1:b.inverted,inverted2:R.inverted}},selectUnion:function(b){return{segments:v.union(b.combined,w),inverted:b.inverted1||b.inverted2}},selectIntersect:function(b){return{segments:v.intersect(b.combined,w),inverted:b.inverted1&&b.inverted2}},selectDifference:function(b){return{segments:v.difference(b.combined,w),inverted:b.inverted1&&!b.inverted2}},selectDifferenceRev:function(b){return{segments:v.differenceRev(b.combined,w),inverted:!b.inverted1&&b.inverted2}},selectXor:function(b){return{segments:v.xor(b.combined,w),inverted:b.inverted1!==b.inverted2}},polygon:function(b){return{regions:x(b.segments,S,w),inverted:b.inverted}},polygonFromGeoJSON:function(b){return y.toPolygon(c,b)},polygonToGeoJSON:function(b){return y.fromPolygon(c,S,b)},union:function(b,R){return F(b,R,c.selectUnion)},intersect:function(b,R){return F(b,R,c.selectIntersect)},difference:function(b,R){return F(b,R,c.selectDifference)},differenceRev:function(b,R){return F(b,R,c.selectDifferenceRev)},xor:function(b,R){return F(b,R,c.selectXor)}};function F(b,R,B){var O=c.segments(b),P=c.segments(R),D=c.combine(O,P),H=B(D);return c.polygon(H)}typeof window=="object"&&(window.PolyBool=c),Me.exports=c}),lm=s((ot,Me)=>{Me.exports=function(m,l,d,x){var v=m[0],y=m[1],w=!1;d===void 0&&(d=0),x===void 0&&(x=l.length);for(var S=x-d,c=0,F=S-1;c<S;F=c++){var b=l[c+d][0],R=l[c+d][1],B=l[F+d][0],O=l[F+d][1],P=R>y!=O>y&&v<(B-b)*(y-R)/(O-R)+b;P&&(w=!w)}return w}}),Sg=s((ot,Me)=>{var m=Jh().dot,l=Et().BADNUM,d=Me.exports={};d.tester=function(x){var v=x.slice(),y=v[0][0],w=y,S=v[0][1],c=S,F;for((v[v.length-1][0]!==v[0][0]||v[v.length-1][1]!==v[0][1])&&v.push(v[0]),F=1;F<v.length;F++)y=Math.min(y,v[F][0]),w=Math.max(w,v[F][0]),S=Math.min(S,v[F][1]),c=Math.max(c,v[F][1]);var b=!1,R;v.length===5&&(v[0][0]===v[1][0]?v[2][0]===v[3][0]&&v[0][1]===v[3][1]&&v[1][1]===v[2][1]&&(b=!0,R=function(H){return H[0]===v[0][0]}):v[0][1]===v[1][1]&&v[2][1]===v[3][1]&&v[0][0]===v[3][0]&&v[1][0]===v[2][0]&&(b=!0,R=function(H){return H[1]===v[0][1]}));function B(H,C){var A=H[0],L=H[1];return!(A===l||A<y||A>w||L===l||L<S||L>c||C&&R(H))}function O(H,C){var A=H[0],L=H[1];if(A===l||A<y||A>w||L===l||L<S||L>c)return!1;var j=v.length,Z=v[0][0],nl=v[0][1],Pe=0,se,q,ol,nt,In;for(se=1;se<j;se++)if(q=Z,ol=nl,Z=v[se][0],nl=v[se][1],nt=Math.min(q,Z),!(A<nt||A>Math.max(q,Z)||L>Math.max(ol,nl)))if(L<Math.min(ol,nl))A!==nt&&Pe++;else{if(Z===q?In=L:In=ol+(A-q)*(nl-ol)/(Z-q),L===In)return!(se===1&&C);L<=In&&A!==nt&&Pe++}return Pe%2===1}var P=!0,D=v[0];for(F=1;F<v.length;F++)if(D[0]!==v[F][0]||D[1]!==v[F][1]){P=!1;break}return{xmin:y,xmax:w,ymin:S,ymax:c,pts:v,contains:b?B:O,isRect:b,degenerate:P}},d.isSegmentBent=function(x,v,y,w){var S=x[v],c=[x[y][0]-S[0],x[y][1]-S[1]],F=m(c,c),b=Math.sqrt(F),R=[-c[1]/b,c[0]/b],B,O,P;for(B=v+1;B<y;B++)if(O=[x[B][0]-S[0],x[B][1]-S[1]],P=m(O,c),P<0||P>F||Math.abs(m(O,R))>w)return!0;return!1},d.filter=function(x,v){var y=[x[0]],w=0,S=0;function c(b){x.push(b);var R=y.length,B=w;y.splice(S+1);for(var O=B+1;O<x.length;O++)(O===x.length-1||d.isSegmentBent(x,B,O+1,v))&&(y.push(x[O]),y.length<R-2&&(w=O,S=y.length-1),B=O)}if(x.length>1){var F=x.pop();c(F)}return{addPt:c,raw:x,filtered:y}}}),pg=s((ot,Me)=>{Me.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}}),Bg=s((ot,Me)=>{var m=Sf(),l=lm(),d=ff(),x=Qd().dashStyle,v=oh(),y=Xf(),w=wd().makeEventData,S=Nf(),c=S.freeMode,F=S.rectMode,b=S.drawMode,R=S.openMode,B=S.selectMode,O=ve(),P=gg(),D=el(),H=xf().clearOutline,C=kg(),A=C.handleEllipse,L=C.readPaths,j=Bf().newShapes,Z=Tg(),nl=Om().activateLastSelection,Pe=rt(),se=Pe.sorterAsc,q=Sg(),ol=ym(),nt=Rh().getFromId,In=ag(),_t=zp().redrawReglTraces,Fn=pg(),al=Fn.MINSELECT,sl=q.filter,ce=q.tester,ll=cg(),ul=ll.p2r,fl=ll.axValue,bl=ll.getTransform;function El(Ql){return Ql.subplot!==void 0}function Ul(Ql,Ku,gl,Dl,Vl){var Mu=!El(Dl),Nu=c(Vl),ed=F(Vl),sd=R(Vl),Sd=b(Vl),yd=B(Vl),bd=Vl==="drawline",Kd=Vl==="drawcircle",Jd=bd||Kd,th=Dl.gd,Hh=th._fullLayout,sp=yd&&Hh.newselection.mode==="immediate"&&Mu,xp=Hh._zoomlayer,Pp=Dl.element.getBoundingClientRect(),Up=Dl.plotinfo,fp=bl(Up),zh=Ku-Pp.left,kp=gl-Pp.top;Hh._calcInverseTransform(th);var qh=Pe.apply3DTransform(Hh._invTransform)(zh,kp);zh=qh[0],kp=qh[1];var bp=Hh._invScaleX,wp=Hh._invScaleY,Sp=zh,mp=kp,af="M"+zh+","+kp,_f=Dl.xaxes[0],Lp=Dl.yaxes[0],Ef=_f._length,Lf=Lp._length,rg=Ql.altKey&&!(b(Vl)&&sd),ng,gf,Rf,yf,cp,_g,wl;cl(Ql,th,Dl),Nu&&(ng=sl([[zh,kp]],Fn.BENDPX));var pl=xp.selectAll("path.select-outline-"+Up.id).data([1]),Yu=Sd?Hh.newshape:Hh.newselection;Sd&&(Dl.hasText=Yu.label.text||Yu.label.texttemplate);var Ju=Sd&&!sd?Yu.fillcolor:"rgba(0,0,0,0)",hd=Yu.line.color||(Mu?v.contrast(th._fullLayout.plot_bgcolor):"#7f7f7f");pl.enter().append("path").attr("class","select-outline select-outline-"+Up.id).style({opacity:Sd?Yu.opacity/2:1,"stroke-dasharray":x(Yu.line.dash,Yu.line.width),"stroke-width":Yu.line.width+"px","shape-rendering":"crispEdges"}).call(v.stroke,hd).call(v.fill,Ju).attr("fill-rule","evenodd").classed("cursor-move",!!Sd).attr("transform",fp).attr("d",af+"Z");var $u=xp.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",fp).attr("d","M0,0Z");if(Sd&&Dl.hasText){var Xu=xp.select(".label-temp");Xu.empty()&&(Xu=xp.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var md=Hh._uid+Fn.SELECTID,ld=[],Ld=Ft(th,Dl.xaxes,Dl.yaxes,Dl.subplot);sp&&!Ql.shiftKey&&(Dl._clearSubplotSelections=function(){if(Mu){var gh=_f._id,ep=Lp._id;xd(th,gh,ep,Ld);for(var Bh=(th.layout||{}).selections||[],up=[],Uh=!1,hp=0;hp<Bh.length;hp++){var Ep=Hh.selections[hp];!Ep||Ep.xref!==gh||Ep.yref!==ep?up.push(Bh[hp]):Uh=!0}Uh&&(th._fullLayout._noEmitSelectedAtStart=!0,d.call("_guiRelayout",th,{selections:up}))}});var zd=bh(Dl);Dl.moveFn=function(gh,ep){Dl._clearSubplotSelections&&(Dl._clearSubplotSelections(),Dl._clearSubplotSelections=void 0),Sp=Math.max(0,Math.min(Ef,bp*gh+zh)),mp=Math.max(0,Math.min(Lf,wp*ep+kp));var Bh=Math.abs(Sp-zh),up=Math.abs(mp-kp);if(ed){var Uh,hp,Ep;if(yd){var Uf=Hh.selectdirection;switch(Uf==="any"?up<Math.min(Bh*.6,al)?Uh="h":Bh<Math.min(up*.6,al)?Uh="v":Uh="d":Uh=Uf,Uh){case"h":hp=Kd?Lf/2:0,Ep=Lf;break;case"v":hp=Kd?Ef/2:0,Ep=Ef;break}}if(Sd)switch(Hh.newshape.drawdirection){case"vertical":Uh="h",hp=Kd?Lf/2:0,Ep=Lf;break;case"horizontal":Uh="v",hp=Kd?Ef/2:0,Ep=Ef;break;case"ortho":Bh<up?(Uh="h",hp=kp,Ep=mp):(Uh="v",hp=zh,Ep=Sp);break;default:Uh="d"}Uh==="h"?(yf=Jd?A(Kd,[Sp,hp],[Sp,Ep]):[[zh,hp],[zh,Ep],[Sp,Ep],[Sp,hp]],yf.xmin=Jd?Sp:Math.min(zh,Sp),yf.xmax=Jd?Sp:Math.max(zh,Sp),yf.ymin=Math.min(hp,Ep),yf.ymax=Math.max(hp,Ep),$u.attr("d","M"+yf.xmin+","+(kp-al)+"h-4v"+2*al+"h4ZM"+(yf.xmax-1)+","+(kp-al)+"h4v"+2*al+"h-4Z")):Uh==="v"?(yf=Jd?A(Kd,[hp,mp],[Ep,mp]):[[hp,kp],[hp,mp],[Ep,mp],[Ep,kp]],yf.xmin=Math.min(hp,Ep),yf.xmax=Math.max(hp,Ep),yf.ymin=Jd?mp:Math.min(kp,mp),yf.ymax=Jd?mp:Math.max(kp,mp),$u.attr("d","M"+(zh-al)+","+yf.ymin+"v-4h"+2*al+"v4ZM"+(zh-al)+","+(yf.ymax-1)+"v4h"+2*al+"v-4Z")):Uh==="d"&&(yf=Jd?A(Kd,[zh,kp],[Sp,mp]):[[zh,kp],[zh,mp],[Sp,mp],[Sp,kp]],yf.xmin=Math.min(zh,Sp),yf.xmax=Math.max(zh,Sp),yf.ymin=Math.min(kp,mp),yf.ymax=Math.max(kp,mp),$u.attr("d","M0,0Z"))}else Nu&&(ng.addPt([Sp,mp]),yf=ng.filtered);if(Dl.selectionDefs&&Dl.selectionDefs.length?(Rf=vd(Dl.mergedPolygons,yf,rg),yf.subtract=rg,gf=X(Dl.selectionDefs.concat([yf]))):(Rf=[yf],gf=ce(yf)),D(Kl(Rf,sd),pl,Dl),yd){var qp=Rl(th,!1),Ag=qp.eventData?qp.eventData.points.slice():[];qp=Rl(th,!1,gf,Ld,Dl),gf=qp.selectionTesters,wl=qp.eventData;var bf;ng?bf=ng.filtered:bf=Wd(Rf),ol.throttle(md,Fn.SELECTDELAY,function(){ld=vu(gf,Ld);for(var Ig=ld.slice(),yg=0;yg<Ag.length;yg++){for(var pm=Ag[yg],Mg=!1,Tf=0;Tf<Ig.length;Tf++)if(Ig[Tf].curveNumber===pm.curveNumber&&Ig[Tf].pointNumber===pm.pointNumber){Mg=!0;break}Mg||Ig.push(pm)}Ig.length&&(wl||(wl={}),wl.points=Ig),zd(wl,bf),Dh(th,wl)})}},Dl.clickFn=function(gh,ep){if($u.remove(),th._fullLayout._activeShapeIndex>=0){th._fullLayout._deactivateShape(th);return}if(!Sd){var Bh=Hh.clickmode;ol.done(md).then(function(){if(ol.clear(md),gh===2){for(pl.remove(),cp=0;cp<Ld.length;cp++)_g=Ld[cp],_g._module.selectPoints(_g,!1);if(od(th,Ld),U(Dl),Gh(th),Ld.length){var up=Ld[0].xaxis,Uh=Ld[0].yaxis;if(up&&Uh){for(var hp=[],Ep=th._fullLayout.selections,Uf=0;Uf<Ep.length;Uf++){var qp=Ep[Uf];qp&&(qp.xref!==up._id||qp.yref!==Uh._id)&&hp.push(qp)}hp.length<Ep.length&&(th._fullLayout._noEmitSelectedAtStart=!0,d.call("_guiRelayout",th,{selections:hp}))}}}else Bh.indexOf("select")>-1&&ql(ep,th,Dl.xaxes,Dl.yaxes,Dl.subplot,Dl,pl),Bh==="event"&&vh(th,void 0);y.click(th,ep,Up.id)}).catch(Pe.error)}},Dl.doneFn=function(){$u.remove(),ol.done(md).then(function(){ol.clear(md),!sp&&yf&&Dl.selectionDefs&&(yf.subtract=rg,Dl.selectionDefs.push(yf),Dl.mergedPolygons.length=0,[].push.apply(Dl.mergedPolygons,Rf)),(sp||Sd)&&U(Dl,sp),Dl.doneFnCompleted&&Dl.doneFnCompleted(ld),yd&&vh(th,wl)}).catch(Pe.error)}}function ql(Ql,Ku,gl,Dl,Vl,Mu,Nu){var ed=Ku._hoverdata,sd=Ku._fullLayout,Sd=sd.clickmode,yd=Sd.indexOf("event")>-1,bd=[],Kd,Jd,th,Hh,sp,xp,Pp,Up,fp,zh;if(_l(ed)){cl(Ql,Ku,Mu),Kd=Ft(Ku,gl,Dl,Vl);var kp=Ll(ed,Kd),qh=kp.pointNumbers.length>0;if(qh?yu(Kd,kp):Vu(Kd)&&(Pp=zl(kp))){for(Nu&&Nu.remove(),zh=0;zh<Kd.length;zh++)Jd=Kd[zh],Jd._module.selectPoints(Jd,!1);od(Ku,Kd),U(Mu),yd&&Gh(Ku)}else{Up=Ql.shiftKey&&(Pp!==void 0?Pp:zl(kp)),th=gu(kp.pointNumber,kp.searchInfo,Up);var bp=Mu.selectionDefs.concat([th]);for(Hh=X(bp),zh=0;zh<Kd.length;zh++)if(sp=Kd[zh]._module.selectPoints(Kd[zh],Hh),xp=fd(sp,Kd[zh]),bd.length)for(var wp=0;wp<xp.length;wp++)bd.push(xp[wp]);else bd=xp;if(fp={points:bd},od(Ku,Kd,fp),th&&Mu&&Mu.selectionDefs.push(th),Nu){var Sp=Mu.mergedPolygons,mp=R(Mu.dragmode);D(Kl(Sp,mp),Nu,Mu)}yd&&vh(Ku,fp)}}}function gu(Ql,Ku,gl){return{pointNumber:Ql,searchInfo:Ku,subtract:!!gl}}function Bn(Ql){return"pointNumber"in Ql&&"searchInfo"in Ql}function il(Ql){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Ku,gl,Dl,Vl){var Mu=Ql.searchInfo.cd[0].trace.index,Nu=Vl.cd[0].trace.index;return Nu===Mu&&Dl===Ql.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ql.subtract}}function X(Ql){if(!Ql.length)return;for(var Ku=[],gl=Bn(Ql[0])?0:Ql[0][0][0],Dl=gl,Vl=Bn(Ql[0])?0:Ql[0][0][1],Mu=Vl,Nu=0;Nu<Ql.length;Nu++)if(Bn(Ql[Nu]))Ku.push(il(Ql[Nu]));else{var ed=ce(Ql[Nu]);ed.subtract=!!Ql[Nu].subtract,Ku.push(ed),gl=Math.min(gl,ed.xmin),Dl=Math.max(Dl,ed.xmax),Vl=Math.min(Vl,ed.ymin),Mu=Math.max(Mu,ed.ymax)}function sd(Sd,yd,bd,Kd){for(var Jd=!1,th=0;th<Ku.length;th++)Ku[th].contains(Sd,yd,bd,Kd)&&(Jd=!Ku[th].subtract);return Jd}return{xmin:gl,xmax:Dl,ymin:Vl,ymax:Mu,pts:[],contains:sd,isRect:!1,degenerate:!1}}function cl(Ql,Ku,gl){var Dl=Ku._fullLayout,Vl=gl.plotinfo,Mu=gl.dragmode,Nu=Dl._lastSelectedSubplot&&Dl._lastSelectedSubplot===Vl.id,ed=(Ql.shiftKey||Ql.altKey)&&!(b(Mu)&&R(Mu));Nu&&ed&&Vl.selection&&Vl.selection.selectionDefs&&!gl.selectionDefs?(gl.selectionDefs=Vl.selection.selectionDefs,gl.mergedPolygons=Vl.selection.mergedPolygons):(!ed||!Vl.selection)&&U(gl),Nu||(H(Ku),Dl._lastSelectedSubplot=Vl.id)}function Sl(Ql){return Ql._fullLayout._activeShapeIndex>=0}function st(Ql){return Ql._fullLayout._activeSelectionIndex>=0}function U(Ql,Ku){var gl=Ql.dragmode,Dl=Ql.plotinfo,Vl=Ql.gd;Sl(Vl)&&Vl._fullLayout._deactivateShape(Vl),st(Vl)&&Vl._fullLayout._deactivateSelection(Vl);var Mu=Vl._fullLayout,Nu=Mu._zoomlayer,ed=b(gl),sd=B(gl);if(ed||sd){var Sd=Nu.selectAll(".select-outline-"+Dl.id);if(Sd&&Vl._fullLayout._outlining){var yd;ed&&(yd=j(Sd,Ql)),yd&&d.call("_guiRelayout",Vl,{shapes:yd});var bd;sd&&!El(Ql)&&(bd=Z(Sd,Ql)),bd&&(Vl._fullLayout._noEmitSelectedAtStart=!0,d.call("_guiRelayout",Vl,{selections:bd}).then(function(){Ku&&nl(Vl)})),Vl._fullLayout._outlining=!1}}Dl.selection={},Dl.selection.selectionDefs=Ql.selectionDefs=[],Dl.selection.mergedPolygons=Ql.mergedPolygons=[]}function re(Ql){return Ql._id}function Ft(Ql,Ku,gl,Dl){if(!Ql.calcdata)return[];var Vl=[],Mu=Ku.map(re),Nu=gl.map(re),ed,sd,Sd;for(Sd=0;Sd<Ql.calcdata.length;Sd++)if(ed=Ql.calcdata[Sd],sd=ed[0].trace,!(sd.visible!==!0||!sd._module||!sd._module.selectPoints))if(El({subplot:Dl})&&(sd.subplot===Dl||sd.geo===Dl))Vl.push(ls(sd._module,ed,Ku[0],gl[0]));else if(sd.type==="splom"){if(sd._xaxes[Mu[0]]&&sd._yaxes[Nu[0]]){var yd=ls(sd._module,ed,Ku[0],gl[0]);yd.scene=Ql._fullLayout._splomScenes[sd.uid],Vl.push(yd)}}else if(sd.type==="sankey"){var bd=ls(sd._module,ed,Ku[0],gl[0]);Vl.push(bd)}else{if(Mu.indexOf(sd.xaxis)===-1&&(!sd._xA||!sd._xA.overlaying)||Nu.indexOf(sd.yaxis)===-1&&(!sd._yA||!sd._yA.overlaying))continue;Vl.push(ls(sd._module,ed,nt(Ql,sd.xaxis),nt(Ql,sd.yaxis)))}return Vl}function ls(Ql,Ku,gl,Dl){return{_module:Ql,cd:Ku,xaxis:gl,yaxis:Dl}}function _l(Ql){return Ql&&Array.isArray(Ql)&&Ql[0].hoverOnBox!==!0}function Ll(Ql,Ku){var gl=Ql[0],Dl=-1,Vl=[],Mu,Nu;for(Nu=0;Nu<Ku.length;Nu++)if(Mu=Ku[Nu],gl.fullData.index===Mu.cd[0].trace.index){if(gl.hoverOnBox===!0)break;gl.pointNumber!==void 0?Dl=gl.pointNumber:gl.binNumber!==void 0&&(Dl=gl.binNumber,Vl=gl.pointNumbers);break}return{pointNumber:Dl,pointNumbers:Vl,searchInfo:Mu}}function zl(Ql){var Ku=Ql.searchInfo.cd[0].trace,gl=Ql.pointNumber,Dl=Ql.pointNumbers,Vl=Dl.length>0,Mu=Vl?Dl[0]:gl;return Ku.selectedpoints?Ku.selectedpoints.indexOf(Mu)>-1:!1}function yu(Ql,Ku){var gl=[],Dl,Vl,Mu,Nu;for(Nu=0;Nu<Ql.length;Nu++)Dl=Ql[Nu],Dl.cd[0].trace.selectedpoints&&Dl.cd[0].trace.selectedpoints.length>0&&gl.push(Dl);if(gl.length===1&&(Mu=gl[0]===Ku.searchInfo,Mu&&(Vl=Ku.searchInfo.cd[0].trace,Vl.selectedpoints.length===Ku.pointNumbers.length))){for(Nu=0;Nu<Ku.pointNumbers.length;Nu++)if(Vl.selectedpoints.indexOf(Ku.pointNumbers[Nu])<0)return!1;return!0}return!1}function Vu(Ql){var Ku=0,gl,Dl,Vl;for(Vl=0;Vl<Ql.length;Vl++)if(gl=Ql[Vl],Dl=gl.cd[0].trace,Dl.selectedpoints&&(Dl.selectedpoints.length>1||(Ku+=Dl.selectedpoints.length,Ku>1)))return!1;return Ku===1}function od(Ql,Ku,gl){var Dl;for(Dl=0;Dl<Ku.length;Dl++){var Vl=Ku[Dl].cd[0].trace._fullInput,Mu=Ql._fullLayout._tracePreGUI[Vl.uid]||{};Mu.selectedpoints===void 0&&(Mu.selectedpoints=Vl._input.selectedpoints||null)}var Nu;if(gl){var ed=gl.points||[];for(Dl=0;Dl<Ku.length;Dl++)Nu=Ku[Dl].cd[0].trace,Nu._input.selectedpoints=Nu._fullInput.selectedpoints=[],Nu._fullInput!==Nu&&(Nu.selectedpoints=[]);for(var sd=0;sd<ed.length;sd++){var Sd=ed[sd],yd=Sd.data,bd=Sd.fullData,Kd=Sd.pointIndex,Jd=Sd.pointIndices;Jd?([].push.apply(yd.selectedpoints,Jd),Nu._fullInput!==Nu&&[].push.apply(bd.selectedpoints,Jd)):(yd.selectedpoints.push(Kd),Nu._fullInput!==Nu&&bd.selectedpoints.push(Kd))}}else for(Dl=0;Dl<Ku.length;Dl++)Nu=Ku[Dl].cd[0].trace,delete Nu.selectedpoints,delete Nu._input.selectedpoints,Nu._fullInput!==Nu&&delete Nu._fullInput.selectedpoints;Ad(Ql,Ku)}function Ad(Ql,Ku){for(var gl=!1,Dl=0;Dl<Ku.length;Dl++){var Vl=Ku[Dl],Mu=Vl.cd;d.traceIs(Mu[0].trace,"regl")&&(gl=!0);var Nu=Vl._module,ed=Nu.styleOnSelect||Nu.style;ed&&(ed(Ql,Mu,Mu[0].node3),Mu[0].nodeRangePlot3&&ed(Ql,Mu,Mu[0].nodeRangePlot3))}gl&&(In(Ql),_t(Ql))}function vd(Ql,Ku,gl){for(var Dl=gl?m.difference:m.union,Vl=Dl({regions:Ql},{regions:[Ku]}),Mu=Vl.regions.reverse(),Nu=0;Nu<Mu.length;Nu++){var ed=Mu[Nu];ed.subtract=Hd(ed,Mu.slice(0,Nu))}return Mu}function fd(Ql,Ku){if(Array.isArray(Ql))for(var gl=Ku.cd,Dl=Ku.cd[0].trace,Vl=0;Vl<Ql.length;Vl++)Ql[Vl]=w(Ql[Vl],Dl,gl);return Ql}function Kl(Ql,Ku){for(var gl=[],Dl=0;Dl<Ql.length;Dl++){gl[Dl]=[];for(var Vl=0;Vl<Ql[Dl].length;Vl++){gl[Dl][Vl]=[],gl[Dl][Vl][0]=Vl?"L":"M";for(var Mu=0;Mu<Ql[Dl][Vl].length;Mu++)gl[Dl][Vl].push(Ql[Dl][Vl][Mu])}Ku||gl[Dl].push(["Z",gl[Dl][0][1],gl[Dl][0][2]])}return gl}function vu(Ql,Ku){for(var gl=[],Dl,Vl=[],Mu,Nu=0;Nu<Ku.length;Nu++){var ed=Ku[Nu];Mu=ed._module.selectPoints(ed,Ql),Vl.push(Mu),Dl=fd(Mu,ed),gl=gl.concat(Dl)}return gl}function Rl(Ql,Ku,gl,Dl,Vl){var Mu=!!Dl,Nu,ed,sd;Vl&&(Nu=Vl.plotinfo,ed=Vl.xaxes[0]._id,sd=Vl.yaxes[0]._id);var Sd=[],yd=[],bd=Pd(Ql),Kd=Ql._fullLayout;if(Nu){var Jd=Kd._zoomlayer,th=Kd.dragmode,Hh=b(th),sp=B(th);if(Hh||sp){var xp=nt(Ql,ed,"x"),Pp=nt(Ql,sd,"y");if(xp&&Pp){var Up=Jd.selectAll(".select-outline-"+Nu.id);if(Up&&Ql._fullLayout._outlining&&Up.length){for(var fp=Up[0][0],zh=fp.getAttribute("d"),kp=L(zh,Ql,Nu),qh=[],bp=0;bp<kp.length;bp++){for(var wp=kp[bp],Sp=[],mp=0;mp<wp.length;mp++)Sp.push([$d(xp,wp[mp][1]),$d(Pp,wp[mp][2])]);Sp.xref=ed,Sp.yref=sd,Sp.subtract=Hd(Sp,qh),qh.push(Sp)}bd=bd.concat(qh)}}}}var af=ed&&sd?[ed+sd]:Kd._subplots.cartesian;Wu(Ql);for(var _f={},Lp=0;Lp<af.length;Lp++){var Ef=af[Lp],Lf=Ef.indexOf("y"),rg=Ef.slice(0,Lf),ng=Ef.slice(Lf),gf=ed&&sd?gl:void 0;if(gf=Td(bd,rg,ng,gf),gf){var Rf=Dl;if(!Mu){var yf=nt(Ql,rg,"x"),cp=nt(Ql,ng,"y");Rf=Ft(Ql,[yf],[cp],Ef);for(var _g=0;_g<Rf.length;_g++){var wl=Rf[_g],pl=wl.cd[0],Yu=pl.trace;if(wl._module.name==="scattergl"&&!pl.t.xpx){var Ju=Yu.x,hd=Yu.y,$u=Yu._length;pl.t.xpx=[],pl.t.ypx=[];for(var Xu=0;Xu<$u;Xu++)pl.t.xpx[Xu]=yf.c2p(Ju[Xu]),pl.t.ypx[Xu]=cp.c2p(hd[Xu])}wl._module.name==="splom"&&(_f[Yu.uid]||(_f[Yu.uid]=!0))}}var md=vu(gf,Rf);Sd=Sd.concat(md),yd=yd.concat(Rf)}}var ld={points:Sd};od(Ql,yd,ld);var Ld=Kd.clickmode,zd=Ld.indexOf("event")>-1&&Ku;if(!Nu&&Ku){var gh=Pd(Ql,!0);if(gh.length){var ep=gh[0].xref,Bh=gh[0].yref;if(ep&&Bh){var up=Wd(gh),Uh=Dd([nt(Ql,ep,"x"),nt(Ql,Bh,"y")]);Uh(ld,up)}}Ql._fullLayout._noEmitSelectedAtStart?Ql._fullLayout._noEmitSelectedAtStart=!1:zd&&vh(Ql,ld),Kd._reselect=!1}if(!Nu&&Kd._deselect){var hp=Kd._deselect;ed=hp.xref,sd=hp.yref,cd(ed,sd,yd)||xd(Ql,ed,sd,Dl),zd&&(ld.points.length?vh(Ql,ld):Gh(Ql)),Kd._deselect=!1}return{eventData:ld,selectionTesters:gl}}function Wu(Ql){var Ku=Ql.calcdata;if(Ku)for(var gl=0;gl<Ku.length;gl++){var Dl=Ku[gl][0],Vl=Dl.trace,Mu=Ql._fullLayout._splomScenes;if(Mu){var Nu=Mu[Vl.uid];Nu&&(Nu.selectBatch=[])}}}function cd(Ql,Ku,gl){for(var Dl=0;Dl<gl.length;Dl++){var Vl=gl[Dl];if(Vl.xaxis&&Vl.xaxis._id===Ql&&Vl.yaxis&&Vl.yaxis._id===Ku)return!0}return!1}function xd(Ql,Ku,gl,Dl){Dl=Ft(Ql,[nt(Ql,Ku,"x")],[nt(Ql,gl,"y")],Ku+gl);for(var Vl=0;Vl<Dl.length;Vl++){var Mu=Dl[Vl];Mu._module.selectPoints(Mu,!1)}od(Ql,Dl)}function Td(Ql,Ku,gl,Dl){for(var Vl,Mu=0;Mu<Ql.length;Mu++){var Nu=Ql[Mu];if(!(Ku!==Nu.xref||gl!==Nu.yref))if(Vl){var ed=!!Nu.subtract;Vl=vd(Vl,Nu,ed),Dl=X(Vl)}else Vl=[Nu],Dl=ce(Nu)}return Dl}function Pd(Ql,Ku){for(var gl=[],Dl=Ql._fullLayout,Vl=Dl.selections,Mu=Vl.length,Nu=0;Nu<Mu;Nu++)if(!(Ku&&Nu!==Dl._activeSelectionIndex)){var ed=Vl[Nu];if(ed){var sd=ed.xref,Sd=ed.yref,yd=nt(Ql,sd,"x"),bd=nt(Ql,Sd,"y"),Kd,Jd,th,Hh,sp;if(ed.type==="rect"){sp=[];var xp=$d(yd,ed.x0),Pp=$d(yd,ed.x1),Up=$d(bd,ed.y0),fp=$d(bd,ed.y1);sp=[[xp,Up],[xp,fp],[Pp,fp],[Pp,Up]],Kd=Math.min(xp,Pp),Jd=Math.max(xp,Pp),th=Math.min(Up,fp),Hh=Math.max(Up,fp),sp.xmin=Kd,sp.xmax=Jd,sp.ymin=th,sp.ymax=Hh,sp.xref=sd,sp.yref=Sd,sp.subtract=!1,sp.isRect=!0,gl.push(sp)}else if(ed.type==="path")for(var zh=ed.path.split("Z"),kp=[],qh=0;qh<zh.length;qh++){var bp=zh[qh];if(bp){bp+="Z";var wp=O.extractPathCoords(bp,P.paramIsX,"raw"),Sp=O.extractPathCoords(bp,P.paramIsY,"raw");Kd=1/0,Jd=-1/0,th=1/0,Hh=-1/0,sp=[];for(var mp=0;mp<wp.length;mp++){var af=$d(yd,wp[mp]),_f=$d(bd,Sp[mp]);sp.push([af,_f]),Kd=Math.min(af,Kd),Jd=Math.max(af,Jd),th=Math.min(_f,th),Hh=Math.max(_f,Hh)}sp.xmin=Kd,sp.xmax=Jd,sp.ymin=th,sp.ymax=Hh,sp.xref=sd,sp.yref=Sd,sp.subtract=Hd(sp,kp),kp.push(sp),gl.push(sp)}}}}return gl}function Hd(Ql,Ku){for(var gl=!1,Dl=0;Dl<Ku.length;Dl++)for(var Vl=Ku[Dl],Mu=0;Mu<Ql.length;Mu++)if(l(Ql[Mu],Vl)){gl=!gl;break}return gl}function $d(Ql,Ku){return Ql.type==="date"&&(Ku=Ku.replace("_"," ")),Ql.type==="log"?Ql.c2p(Ku):Ql.r2p(Ku,null,Ql.calendar)}function Wd(Ql){for(var Ku=Ql.length,gl=[],Dl=0;Dl<Ku;Dl++){var Vl=Ql[Dl];gl=gl.concat(Vl),gl=gl.concat([Vl[0]])}return mh(gl)}function mh(Ql){return Ql.isRect=Ql.length===5&&Ql[0][0]===Ql[4][0]&&Ql[0][1]===Ql[4][1]&&Ql[0][0]===Ql[1][0]&&Ql[2][0]===Ql[3][0]&&Ql[0][1]===Ql[3][1]&&Ql[1][1]===Ql[2][1]||Ql[0][1]===Ql[1][1]&&Ql[2][1]===Ql[3][1]&&Ql[0][0]===Ql[3][0]&&Ql[1][0]===Ql[2][0],Ql.isRect&&(Ql.xmin=Math.min(Ql[0][0],Ql[2][0]),Ql.xmax=Math.max(Ql[0][0],Ql[2][0]),Ql.ymin=Math.min(Ql[0][1],Ql[2][1]),Ql.ymax=Math.max(Ql[0][1],Ql[2][1])),Ql}function Dd(Ql){return function(Ku,gl){for(var Dl,Vl,Mu=0;Mu<Ql.length;Mu++){var Nu=Ql[Mu],ed=Nu._id,sd=ed.charAt(0);if(gl.isRect){Dl||(Dl={});var Sd=gl[sd+"min"],yd=gl[sd+"max"];Sd!==void 0&&yd!==void 0&&(Dl[ed]=[ul(Nu,Sd),ul(Nu,yd)].sort(se))}else Vl||(Vl={}),Vl[ed]=gl.map(fl(Nu))}Dl&&(Ku.range=Dl),Vl&&(Ku.lassoPoints=Vl)}}function bh(Ql){var Ku=Ql.plotinfo;return Ku.fillRangeItems||Dd(Ql.xaxes.concat(Ql.yaxes))}function Dh(Ql,Ku){Ql.emit("plotly_selecting",Ku)}function vh(Ql,Ku){Ku&&(Ku.selections=(Ql.layout||{}).selections||[]),Ql.emit("plotly_selected",Ku)}function Gh(Ql){Ql.emit("plotly_deselect",null)}Me.exports={reselect:Rl,prepSelect:Ul,clearOutline:H,clearSelectionsCache:U,selectOnClick:ql}}),v0=s((ot,Me)=>{Me.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]}),nv=s((ot,Me)=>{Me.exports={axisRefDescription:function(m,l,d){return["If set to a",m,"axis id (e.g. *"+m+"* or","*"+m+"2*), the `"+m+"` position refers to a",m,"coordinate. If set to *paper*, the `"+m+"`","position refers to the distance from the",l,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",l,"("+d+"). If set to a",m,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",l,"of the domain of that axis: e.g.,","*"+m+"2 domain* refers to the domain of the second",m," axis and a",m,"position of 0.5 refers to the","point between the",l,"and the",d,"of the domain of the","second",m,"axis."].join(" ")}}}),Cm=s((ot,Me)=>{var m=v0(),l=Pu(),d=rf(),x=Bp().templatedArray;nv(),Me.exports=x("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:l({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",d.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",d.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",d.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",d.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:l({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc"})}),_v=s((ot,Me)=>{Me.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}}),ov=s((ot,Me)=>{Me.exports=function(m){return{valType:"color",editType:"style",anim:!0}}}),H0=s((ot,Me)=>{var m=Mm().axisHoverFormat,l=Vg().texttemplateAttrs,d=Vg().hovertemplateAttrs,x=E(),v=Pu(),y=Gf().dash,w=Gf().pattern,S=Qd(),c=_v(),F=Bl().extendFlat,b=ov();function R(P){return{valType:"any",dflt:0,editType:"calc"}}function B(P){return{valType:"any",editType:"calc"}}function O(P){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}Me.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:R(),yperiod:R(),xperiod0:B(),yperiod0:B(),xperiodalignment:O(),yperiodalignment:O(),xhoverformat:m("x"),yhoverformat:m("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:l({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:d({},{keys:c.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:F({},y,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:b(!0),fillgradient:F({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:w,marker:F({symbol:{valType:"enumerated",values:S.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:F({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},x("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},x("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:v({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}}),av=s((ot,Me)=>{var m=Cm(),l=H0().line,d=Gf().dash,x=Bl().extendFlat,v=uf().overrideAll,y=Bp().templatedArray;nv(),Me.exports=v(y("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:x({},m.xref,{}),yref:x({},m.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:l.color,width:x({},l.width,{min:1,dflt:1}),dash:x({},d,{dflt:"dot"})}}),"arraydraw","from-root")}),Ly=s((ot,Me)=>{var m=rt(),l=Ud(),d=vl(),x=av(),v=ve();Me.exports=function(w,S){d(w,S,{name:"selections",handleItemDefaults:y});for(var c=S.selections,F=0;F<c.length;F++){var b=c[F];b&&b.path===void 0&&(b.x0===void 0||b.x1===void 0||b.y0===void 0||b.y1===void 0)&&(S.selections[F]=null)}};function y(w,S,c){function F(In,_t){return m.coerce(w,S,x,In,_t)}var b=F("path"),R=b?"path":"rect",B=F("type",R),O=B!=="path";O&&delete S.path,F("opacity"),F("line.color"),F("line.width"),F("line.dash");for(var P=["x","y"],D=0;D<2;D++){var H=P[D],C={_fullLayout:c},A,L,j,Z=l.coerceRef(w,S,C,H);if(A=l.getFromId(C,Z),A._selectionIndices.push(S._index),j=v.rangeToShapePosition(A),L=v.shapePositionToRange(A),O){var nl=H+"0",Pe=H+"1",se=w[nl],q=w[Pe];w[nl]=L(w[nl],!0),w[Pe]=L(w[Pe],!0),l.coercePosition(S,C,F,Z,nl),l.coercePosition(S,C,F,Z,Pe);var ol=S[nl],nt=S[Pe];ol!==void 0&&nt!==void 0&&(S[nl]=j(ol),S[Pe]=j(nt),w[nl]=se,w[Pe]=q)}}O&&m.noneOrAll(w,S,["x0","x1","y0","y1"])}}),zv=s((ot,Me)=>{Me.exports=function(m,l,d){d("newselection.mode");var x=d("newselection.line.width");x&&(d("newselection.line.color"),d("newselection.line.dash")),d("activeselection.fillcolor"),d("activeselection.opacity")}}),S1=s((ot,Me)=>{var m=ff(),l=rt(),d=Rh();Me.exports=function(x){return function(v,y){var w=v[x];if(Array.isArray(w))for(var S=m.subplotsRegistry.cartesian,c=S.idRegex,F=y._subplots,b=F.xaxis,R=F.yaxis,B=F.cartesian,O=y._has("cartesian"),P=0;P<w.length;P++){var D=w[P];if(l.isPlainObject(D)){var H=d.cleanId(D.xref,"x",!1),C=d.cleanId(D.yref,"y",!1),A=c.x.test(H),L=c.y.test(C);if(A||L){O||l.pushUnique(y._basePlotModules,S);var j=!1;A&&b.indexOf(H)===-1&&(b.push(H),j=!0),L&&R.indexOf(C)===-1&&(R.push(C),j=!0),j&&A&&L&&B.push(H+C)}}}}}}),Ev=s((ot,Me)=>{var m=Om(),l=Bg();Me.exports={moduleType:"component",name:"selections",layoutAttributes:av(),supplyLayoutDefaults:Ly(),supplyDrawNewSelectionDefaults:zv(),includeBasePlot:S1()("selections"),draw:m.draw,drawOne:m.drawOne,reselect:l.reselect,prepSelect:l.prepSelect,clearOutline:l.clearOutline,clearSelectionsCache:l.clearSelectionsCache,selectOnClick:l.selectOnClick}}),Iy=s((ot,Me)=>{var m=$(),l=rt(),d=l.numberFormat,x=$l(),v=Ah(),y=ff(),w=l.strTranslate,S=Kg(),c=oh(),F=Qd(),b=Xf(),R=Ud(),B=dp(),O=Th(),P=Nf(),D=P.selectingOrDrawing,H=P.freeMode,C=$f().FROM_TL,A=ag(),L=zp().redrawReglTraces,j=Vf(),Z=Rh().getFromId,nl=Ev().prepSelect,Pe=Ev().clearOutline,se=Ev().selectOnClick,q=bg(),ol=rf(),nt=ol.MINDRAG,In=ol.MINZOOM,_t=!0;function Fn(ls,_l,Ll,zl,yu,Vu,od,Ad){var vd=ls._fullLayout._zoomlayer,fd=od+Ad==="nsew",Kl=(od+Ad).length===1,vu,Rl,Wu,cd,xd,Td,Pd,Hd,$d,Wd,mh,Dd,bh,Dh,vh,Gh,Ql,Ku,gl,Dl,Vl,Mu,Nu;Ll+=_l.yaxis._shift;function ed(){if(vu=_l.xaxis,Rl=_l.yaxis,$d=vu._length,Wd=Rl._length,Pd=vu._offset,Hd=Rl._offset,Wu={},Wu[vu._id]=vu,cd={},cd[Rl._id]=Rl,od&&Ad)for(var pl=_l.overlays,Yu=0;Yu<pl.length;Yu++){var Ju=pl[Yu].xaxis;Wu[Ju._id]=Ju;var hd=pl[Yu].yaxis;cd[hd._id]=hd}xd=Ft(Wu),Td=Ft(cd),bh=ce(xd,Ad),Dh=ce(Td,od),vh=!Dh&&!bh,Dd=U(ls,ls._fullLayout._axisMatchGroups,Wu,cd),mh=U(ls,ls._fullLayout._axisConstraintGroups,Wu,cd,Dd);var $u=mh.isSubplotConstrained||Dd.isSubplotConstrained;Gh=Ad||$u,Ql=od||$u;var Xu=ls._fullLayout;Ku=Xu._has("scattergl"),gl=Xu._has("splom"),Dl=Xu._has("svg")}ed();var sd=El(Dh+bh,ls._fullLayout.dragmode,fd),Sd=sl(_l,od+Ad+"drag",sd,Ll,zl,yu,Vu);if(vh&&!fd)return Sd.onmousedown=null,Sd.style.pointerEvents="none",Sd;var yd={element:Sd,gd:ls,plotinfo:_l};yd.prepFn=function(pl,Yu,Ju){var hd=yd.dragmode,$u=ls._fullLayout.dragmode;$u!==hd&&(yd.dragmode=$u),ed(),Mu=ls._fullLayout._invScaleX,Nu=ls._fullLayout._invScaleY,vh||(fd?pl.shiftKey?$u==="pan"?$u="zoom":D($u)||($u="pan"):pl.ctrlKey&&($u="pan"):$u="pan"),H($u)?yd.minDrag=1:yd.minDrag=void 0,D($u)?(yd.xaxes=xd,yd.yaxes=Td,nl(pl,Yu,Ju,yd,$u)):(yd.clickFn=Kd,D(hd)&&bd(),vh||($u==="zoom"?(yd.moveFn=bp,yd.doneFn=Sp,yd.minDrag=1,qh(pl,Yu,Ju)):$u==="pan"&&(yd.moveFn=Lf,yd.doneFn=Rf))),ls._fullLayout._redrag=function(){var Xu=ls._dragdata;if(Xu&&Xu.element===Sd){var md=ls._fullLayout.dragmode;D(md)||(ed(),yf([0,0,$d,Wd]),yd.moveFn(Xu.dx,Xu.dy))}}};function bd(){yd.plotinfo.selection=!1,Pe(ls)}function Kd(pl,Yu){var Ju=yd.gd;if(Ju._fullLayout._activeShapeIndex>=0){Ju._fullLayout._deactivateShape(Ju);return}var hd=Ju._fullLayout.clickmode;if(il(Ju),pl===2&&!Kl&&gf(),fd)hd.indexOf("select")>-1&&se(Yu,Ju,xd,Td,_l.id,yd),hd.indexOf("event")>-1&&b.click(Ju,Yu,_l.id);else if(pl===1&&Kl){var $u=od?Rl:vu,Xu=od==="s"||Ad==="w"?0:1,md=$u._name+".range["+Xu+"]",ld=ll($u,Xu),Ld="left",zd="middle";if($u.fixedrange)return;od?(zd=od==="n"?"top":"bottom",$u.side==="right"&&(Ld="right")):Ad==="e"&&(Ld="right"),Ju._context.showAxisRangeEntryBoxes&&m.select(Sd).call(S.makeEditable,{gd:Ju,immediate:!0,background:Ju._fullLayout.paper_bgcolor,text:String(ld),fill:$u.tickfont?$u.tickfont.color:"#444",horizontalAlign:Ld,verticalAlign:zd}).on("edit",function(gh){var ep=$u.d2r(gh);ep!==void 0&&y.call("_guiRelayout",Ju,md,ep)})}}O.init(yd);var Jd,th,Hh,sp,xp,Pp,Up,fp,zh,kp;function qh(pl,Yu,Ju){var hd=Sd.getBoundingClientRect();Jd=Yu-hd.left,th=Ju-hd.top,ls._fullLayout._calcInverseTransform(ls);var $u=l.apply3DTransform(ls._fullLayout._invTransform)(Jd,th);Jd=$u[0],th=$u[1],Hh={l:Jd,r:Jd,w:0,t:th,b:th,h:0},sp=ls._hmpixcount?ls._hmlumcount/ls._hmpixcount:x(ls._fullLayout.plot_bgcolor).getLuminance(),xp="M0,0H"+$d+"V"+Wd+"H0V0",Pp=!1,Up="xy",kp=!1,fp=Ul(vd,sp,Pd,Hd,xp),zh=ql(vd,Pd,Hd)}function bp(pl,Yu){if(ls._transitioningWithDuration)return!1;var Ju=Math.max(0,Math.min($d,Mu*pl+Jd)),hd=Math.max(0,Math.min(Wd,Nu*Yu+th)),$u=Math.abs(Ju-Jd),Xu=Math.abs(hd-th);Hh.l=Math.min(Jd,Ju),Hh.r=Math.max(Jd,Ju),Hh.t=Math.min(th,hd),Hh.b=Math.max(th,hd);function md(){Up="",Hh.r=Hh.l,Hh.t=Hh.b,zh.attr("d","M0,0Z")}if(mh.isSubplotConstrained)$u>In||Xu>In?(Up="xy",$u/$d>Xu/Wd?(Xu=$u*Wd/$d,th>hd?Hh.t=th-Xu:Hh.b=th+Xu):($u=Xu*$d/Wd,Jd>Ju?Hh.l=Jd-$u:Hh.r=Jd+$u),zh.attr("d",st(Hh))):md();else if(Dd.isSubplotConstrained)if($u>In||Xu>In){Up="xy";var ld=Math.min(Hh.l/$d,(Wd-Hh.b)/Wd),Ld=Math.max(Hh.r/$d,(Wd-Hh.t)/Wd);Hh.l=ld*$d,Hh.r=Ld*$d,Hh.b=(1-ld)*Wd,Hh.t=(1-Ld)*Wd,zh.attr("d",st(Hh))}else md();else!Dh||Xu<Math.min(Math.max($u*.6,nt),In)?$u<nt||!bh?md():(Hh.t=0,Hh.b=Wd,Up="x",zh.attr("d",cl(Hh,th))):!bh||$u<Math.min(Xu*.6,In)?(Hh.l=0,Hh.r=$d,Up="y",zh.attr("d",Sl(Hh,Jd))):(Up="xy",zh.attr("d",st(Hh)));Hh.w=Hh.r-Hh.l,Hh.h=Hh.b-Hh.t,Up&&(kp=!0),ls._dragged=kp,gu(fp,zh,Hh,xp,Pp,sp),wp(),ls.emit("plotly_relayouting",Vl),Pp=!0}function wp(){Vl={},(Up==="xy"||Up==="x")&&(ul(xd,Hh.l/$d,Hh.r/$d,Vl,mh.xaxes),rg("x",Vl)),(Up==="xy"||Up==="y")&&(ul(Td,(Wd-Hh.b)/Wd,(Wd-Hh.t)/Wd,Vl,mh.yaxes),rg("y",Vl))}function Sp(){wp(),il(ls),Rf(),X(ls)}var mp=[0,0,$d,Wd],af=null,_f=ol.REDRAWDELAY,Lp=_l.mainplot?ls._fullLayout._plots[_l.mainplot]:_l;function Ef(pl){if(!ls._context._scrollZoom.cartesian&&!ls._fullLayout._enablescrollzoom)return;if(bd(),ls._transitioningWithDuration){pl.preventDefault(),pl.stopPropagation();return}ed(),clearTimeout(af);var Yu=-pl.deltaY;if(isFinite(Yu)||(Yu=pl.wheelDelta/10),!isFinite(Yu)){l.log("Did not find wheel motion attributes: ",pl);return}var Ju=Math.exp(-Math.min(Math.max(Yu,-20),20)/200),hd=Lp.draglayer.select(".nsewdrag").node().getBoundingClientRect(),$u=(pl.clientX-hd.left)/hd.width,Xu=(hd.bottom-pl.clientY)/hd.height,md;function ld(Ld,zd,gh){if(Ld.fixedrange)return;var ep=l.simpleMap(Ld.range,Ld.r2l),Bh=ep[0]+(ep[1]-ep[0])*zd;function up(Uh){return Ld.l2r(Bh+(Uh-Bh)*gh)}Ld.range=ep.map(up)}if(Gh){for(Ad||($u=.5),md=0;md<xd.length;md++)ld(xd[md],$u,Ju);rg("x"),mp[2]*=Ju,mp[0]+=mp[2]*$u*(1/Ju-1)}if(Ql){for(od||(Xu=.5),md=0;md<Td.length;md++)ld(Td[md],Xu,Ju);rg("y"),mp[3]*=Ju,mp[1]+=mp[3]*(1-Xu)*(1/Ju-1)}yf(mp),ng(),ls.emit("plotly_relayouting",Vl),af=setTimeout(function(){ls._fullLayout&&(mp=[0,0,$d,Wd],Rf())},_f),pl.preventDefault()}od.length*Ad.length!==1&&re(Sd,Ef);function Lf(pl,Yu){if(pl=pl*Mu,Yu=Yu*Nu,ls._transitioningWithDuration)return;if(ls._fullLayout._replotting=!0,bh==="ew"||Dh==="ns"){var Ju=bh?-pl:0,hd=Dh?-Yu:0;if(Dd.isSubplotConstrained){if(bh&&Dh){var $u=(pl/$d-Yu/Wd)/2;pl=$u*$d,Yu=-$u*Wd,Ju=-pl,hd=-Yu}Dh?Ju=-hd*$d/Wd:hd=-Ju*Wd/$d}bh&&(fl(xd,pl),rg("x")),Dh&&(fl(Td,Yu),rg("y")),yf([Ju,hd,$d,Wd]),ng(),ls.emit("plotly_relayouting",Vl);return}function Xu(up,Uh,hp){for(var Ep=1-Uh,Uf,qp,Ag=0;Ag<up.length;Ag++){var bf=up[Ag];if(!bf.fixedrange){Uf=bf,qp=bf._rl[Ep]+(bf._rl[Uh]-bf._rl[Ep])/bl(hp/bf._length);var Ig=bf.l2r(qp);Ig!==!1&&Ig!==void 0&&(bf.range[Uh]=Ig)}}return Uf._length*(Uf._rl[Uh]-qp)/(Uf._rl[Uh]-Uf._rl[Ep])}var md=bh==="w"==(Dh==="n")?1:-1;if(bh&&Dh&&(mh.isSubplotConstrained||Dd.isSubplotConstrained)){var ld=(pl/$d+md*Yu/Wd)/2;pl=ld*$d,Yu=md*ld*Wd}var Ld,zd;if(bh==="w"?pl=Xu(xd,0,pl):bh==="e"?pl=Xu(xd,1,-pl):bh||(pl=0),Dh==="n"?Yu=Xu(Td,1,Yu):Dh==="s"?Yu=Xu(Td,0,-Yu):Dh||(Yu=0),Ld=bh==="w"?pl:0,zd=Dh==="n"?Yu:0,mh.isSubplotConstrained&&!Dd.isSubplotConstrained||Dd.isSubplotConstrained&&bh&&Dh&&md>0){var gh;if(Dd.isSubplotConstrained||!bh&&Dh.length===1){for(gh=0;gh<xd.length;gh++)xd[gh].range=xd[gh]._r.slice(),q(xd[gh],1-Yu/Wd);pl=Yu*$d/Wd,Ld=pl/2}if(Dd.isSubplotConstrained||!Dh&&bh.length===1){for(gh=0;gh<Td.length;gh++)Td[gh].range=Td[gh]._r.slice(),q(Td[gh],1-pl/$d);Yu=pl*Wd/$d,zd=Yu/2}}(!Dd.isSubplotConstrained||!Dh)&&rg("x"),(!Dd.isSubplotConstrained||!bh)&&rg("y");var ep=$d-pl,Bh=Wd-Yu;Dd.isSubplotConstrained&&!(bh&&Dh)&&(bh?(zd=Ld?0:pl*Wd/$d,Bh=ep*Wd/$d):(Ld=zd?0:Yu*$d/Wd,ep=Bh*$d/Wd)),yf([Ld,zd,ep,Bh]),ng(),ls.emit("plotly_relayouting",Vl)}function rg(pl,Yu){for(var Ju=Dd.isSubplotConstrained?{x:Td,y:xd}[pl]:Dd[pl+"axes"],hd=Dd.isSubplotConstrained?{x:xd,y:Td}[pl]:[],$u=0;$u<Ju.length;$u++){var Xu=Ju[$u],md=Xu._id,ld=Dd.xLinks[md]||Dd.yLinks[md],Ld=hd[0]||Wu[ld]||cd[ld];Ld&&(Yu?(Yu[Xu._name+".range[0]"]=Yu[Ld._name+".range[0]"],Yu[Xu._name+".range[1]"]=Yu[Ld._name+".range[1]"]):Xu.range=Ld.range.slice())}}function ng(){var pl=[],Yu;function Ju(md){for(Yu=0;Yu<md.length;Yu++)md[Yu].fixedrange||pl.push(md[Yu]._id)}function hd(md,ld){for(Yu=0;Yu<md.length;Yu++){var Ld=md[Yu],zd=Ld[ld];!Ld.fixedrange&&zd.tickmode==="sync"&&pl.push(zd._id)}}for(Gh&&(Ju(xd),Ju(mh.xaxes),Ju(Dd.xaxes),hd(_l.overlays,"xaxis")),Ql&&(Ju(Td),Ju(mh.yaxes),Ju(Dd.yaxes),hd(_l.overlays,"yaxis")),Vl={},Yu=0;Yu<pl.length;Yu++){var $u=pl[Yu],Xu=Z(ls,$u);R.drawOne(ls,Xu,{skipTitle:!0}),Vl[Xu._name+".range[0]"]=Xu.range[0],Vl[Xu._name+".range[1]"]=Xu.range[1]}R.redrawComponents(ls,pl)}function gf(){if(!ls._transitioningWithDuration){var pl=ls._context.doubleClick,Yu=[];bh&&(Yu=Yu.concat(xd)),Dh&&(Yu=Yu.concat(Td)),Dd.xaxes&&(Yu=Yu.concat(Dd.xaxes)),Dd.yaxes&&(Yu=Yu.concat(Dd.yaxes));var Ju={},hd,$u;if(pl==="reset+autosize")for(pl="autosize",$u=0;$u<Yu.length;$u++){hd=Yu[$u];var Xu=hd._rangeInitial0,md=hd._rangeInitial1,ld=Xu!==void 0||md!==void 0;if(ld&&(Xu!==void 0&&Xu!==hd.range[0]||md!==void 0&&md!==hd.range[1])||!ld&&hd.autorange!==!0){pl="reset";break}}if(pl==="autosize")for($u=0;$u<Yu.length;$u++)hd=Yu[$u],hd.fixedrange||(Ju[hd._name+".autorange"]=!0);else if(pl==="reset"){for((bh||mh.isSubplotConstrained)&&(Yu=Yu.concat(mh.xaxes)),Dh&&!mh.isSubplotConstrained&&(Yu=Yu.concat(mh.yaxes)),mh.isSubplotConstrained&&(bh?Dh||(Yu=Yu.concat(Td)):Yu=Yu.concat(xd)),$u=0;$u<Yu.length;$u++)if(hd=Yu[$u],!hd.fixedrange){var Ld=hd._name,zd=hd._autorangeInitial;hd._rangeInitial0===void 0&&hd._rangeInitial1===void 0?Ju[Ld+".autorange"]=!0:hd._rangeInitial0===void 0?(Ju[Ld+".autorange"]=zd,Ju[Ld+".range"]=[null,hd._rangeInitial1]):hd._rangeInitial1===void 0?(Ju[Ld+".range"]=[hd._rangeInitial0,null],Ju[Ld+".autorange"]=zd):Ju[Ld+".range"]=[hd._rangeInitial0,hd._rangeInitial1]}}ls.emit("plotly_doubleclick",null),y.call("_guiRelayout",ls,Ju)}}function Rf(){yf([0,0,$d,Wd]),l.syncOrAsync([j.previousPromises,function(){ls._fullLayout._replotting=!1,y.call("_guiRelayout",ls,Vl)}],ls)}function yf(pl){var Yu=ls._fullLayout,Ju=Yu._plots,hd=Yu._subplots.cartesian,$u,Xu,md,ld;if(gl&&y.subplotsRegistry.splom.drag(ls),Ku){for($u=0;$u<hd.length;$u++)if(Xu=Ju[hd[$u]],md=Xu.xaxis,ld=Xu.yaxis,Xu._scene){md.limitRange&&md.limitRange(),ld.limitRange&&ld.limitRange();var Ld=l.simpleMap(md.range,md.r2l),zd=l.simpleMap(ld.range,ld.r2l);Xu._scene.update({range:[Ld[0],zd[0],Ld[1],zd[1]]})}}if((gl||Ku)&&(A(ls),L(ls)),Dl){var gh=pl[2]/vu._length,ep=pl[3]/Rl._length;for($u=0;$u<hd.length;$u++){Xu=Ju[hd[$u]],md=Xu.xaxis,ld=Xu.yaxis;var Bh=(Gh||Dd.isSubplotConstrained)&&!md.fixedrange&&Wu[md._id],up=(Ql||Dd.isSubplotConstrained)&&!ld.fixedrange&&cd[ld._id],Uh,hp,Ep,Uf;if(Bh?(Uh=gh,Ep=Ad||Dd.isSubplotConstrained?pl[0]:wl(md,Uh)):Dd.xaHash[md._id]?(Uh=gh,Ep=pl[0]*md._length/vu._length):Dd.yaHash[md._id]?(Uh=ep,Ep=Dh==="ns"?-pl[1]*md._length/Rl._length:wl(md,Uh,{n:"top",s:"bottom"}[Dh])):(Uh=cp(md,gh,ep),Ep=_g(md,Uh)),Uh>1&&(md.maxallowed!==void 0&&Gh===(md.range[0]<md.range[1]?"e":"w")||md.minallowed!==void 0&&Gh===(md.range[0]<md.range[1]?"w":"e"))&&(Uh=1,Ep=0),up?(hp=ep,Uf=od||Dd.isSubplotConstrained?pl[1]:wl(ld,hp)):Dd.yaHash[ld._id]?(hp=ep,Uf=pl[1]*ld._length/Rl._length):Dd.xaHash[ld._id]?(hp=gh,Uf=bh==="ew"?-pl[0]*ld._length/vu._length:wl(ld,hp,{e:"right",w:"left"}[bh])):(hp=cp(ld,gh,ep),Uf=_g(ld,hp)),hp>1&&(ld.maxallowed!==void 0&&Ql===(ld.range[0]<ld.range[1]?"n":"s")||ld.minallowed!==void 0&&Ql===(ld.range[0]<ld.range[1]?"s":"n"))&&(hp=1,Uf=0),!(!Uh&&!hp)){Uh||(Uh=1),hp||(hp=1);var qp=md._offset-Ep/Uh,Ag=ld._offset-Uf/hp;Xu.clipRect.call(F.setTranslate,Ep,Uf).call(F.setScale,Uh,hp),Xu.plot.call(F.setTranslate,qp,Ag).call(F.setScale,1/Uh,1/hp),(Uh!==Xu.xScaleFactor||hp!==Xu.yScaleFactor)&&(F.setPointGroupScale(Xu.zoomScalePts,Uh,hp),F.setTextPointsScale(Xu.zoomScaleTxt,Uh,hp)),F.hideOutsideRangePoints(Xu.clipOnAxisFalseTraces,Xu),Xu.xScaleFactor=Uh,Xu.yScaleFactor=hp}}}}function cp(pl,Yu,Ju){return pl.fixedrange?0:Gh&&mh.xaHash[pl._id]?Yu:Ql&&(mh.isSubplotConstrained?mh.xaHash:mh.yaHash)[pl._id]?Ju:0}function _g(pl,Yu){return Yu?(pl.range=pl._r.slice(),q(pl,Yu),wl(pl,Yu)):0}function wl(pl,Yu,Ju){return pl._length*(1-Yu)*C[Ju||pl.constraintoward||"middle"]}return Sd}function al(ls,_l,Ll,zl){var yu=l.ensureSingle(ls.draglayer,_l,Ll,function(Vu){Vu.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ls.id)});return yu.call(B,zl),yu.node()}function sl(ls,_l,Ll,zl,yu,Vu,od){var Ad=al(ls,"rect",_l,Ll);return m.select(Ad).call(F.setRect,zl,yu,Vu,od),Ad}function ce(ls,_l){for(var Ll=0;Ll<ls.length;Ll++)if(!ls[Ll].fixedrange)return _l;return""}function ll(ls,_l){var Ll=ls.range[_l],zl=Math.abs(Ll-ls.range[1-_l]),yu;return ls.type==="date"?Ll:ls.type==="log"?(yu=Math.ceil(Math.max(0,-Math.log(zl)/Math.LN10))+3,d("."+yu+"g")(Math.pow(10,Ll))):(yu=Math.floor(Math.log(Math.abs(Ll))/Math.LN10)-Math.floor(Math.log(zl)/Math.LN10)+4,d("."+String(yu)+"g")(Ll))}function ul(ls,_l,Ll,zl,yu){for(var Vu=0;Vu<ls.length;Vu++){var od=ls[Vu];if(!od.fixedrange)if(od.rangebreaks){var Ad=od._id.charAt(0)==="y",vd=Ad?1-_l:_l,fd=Ad?1-Ll:Ll;zl[od._name+".range[0]"]=od.l2r(od.p2l(vd*od._length)),zl[od._name+".range[1]"]=od.l2r(od.p2l(fd*od._length))}else{var Kl=od._rl[0],vu=od._rl[1]-Kl;zl[od._name+".range[0]"]=od.l2r(Kl+vu*_l),zl[od._name+".range[1]"]=od.l2r(Kl+vu*Ll)}}if(yu&&yu.length){var Rl=(_l+(1-Ll))/2;ul(yu,Rl,1-Rl,zl,[])}}function fl(ls,_l){for(var Ll=0;Ll<ls.length;Ll++){var zl=ls[Ll];if(!zl.fixedrange){if(zl.rangebreaks){var yu=0,Vu=zl._length,od=zl.p2l(yu+_l)-zl.p2l(yu),Ad=zl.p2l(Vu+_l)-zl.p2l(Vu),vd=(od+Ad)/2;zl.range=[zl.l2r(zl._rl[0]-vd),zl.l2r(zl._rl[1]-vd)]}else zl.range=[zl.l2r(zl._rl[0]-_l/zl._m),zl.l2r(zl._rl[1]-_l/zl._m)];zl.limitRange&&zl.limitRange()}}}function bl(ls){return 1-(ls>=0?Math.min(ls,.9):1/(1/Math.max(ls,-.3)+3.222))}function El(ls,_l,Ll){return ls?ls==="nsew"?Ll?"":_l==="pan"?"move":"crosshair":ls.toLowerCase()+"-resize":"pointer"}function Ul(ls,_l,Ll,zl,yu){return ls.append("path").attr("class","zoombox").style({fill:_l>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",w(Ll,zl)).attr("d",yu+"Z")}function ql(ls,_l,Ll){return ls.append("path").attr("class","zoombox-corners").style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,opacity:0}).attr("transform",w(_l,Ll)).attr("d","M0,0Z")}function gu(ls,_l,Ll,zl,yu,Vu){ls.attr("d",zl+"M"+Ll.l+","+Ll.t+"v"+Ll.h+"h"+Ll.w+"v-"+Ll.h+"h-"+Ll.w+"Z"),Bn(ls,_l,yu,Vu)}function Bn(ls,_l,Ll,zl){Ll||(ls.transition().style("fill",zl>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),_l.transition().style("opacity",1).duration(200))}function il(ls){m.select(ls).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function X(ls){_t&&ls.data&&ls._context.showTips&&(l.notifier(l._(ls,"Double-click to zoom back out"),"long"),_t=!1)}function cl(ls,_l){return"M"+(ls.l-.5)+","+(_l-In-.5)+"h-3v"+(2*In+1)+"h3ZM"+(ls.r+.5)+","+(_l-In-.5)+"h3v"+(2*In+1)+"h-3Z"}function Sl(ls,_l){return"M"+(_l-In-.5)+","+(ls.t-.5)+"v-3h"+(2*In+1)+"v3ZM"+(_l-In-.5)+","+(ls.b+.5)+"v3h"+(2*In+1)+"v-3Z"}function st(ls){var _l=Math.floor(Math.min(ls.b-ls.t,ls.r-ls.l,In)/2);return"M"+(ls.l-3.5)+","+(ls.t-.5+_l)+"h3v"+-_l+"h"+_l+"v-3h-"+(_l+3)+"ZM"+(ls.r+3.5)+","+(ls.t-.5+_l)+"h-3v"+-_l+"h"+-_l+"v-3h"+(_l+3)+"ZM"+(ls.r+3.5)+","+(ls.b+.5-_l)+"h-3v"+_l+"h"+-_l+"v3h"+(_l+3)+"ZM"+(ls.l-3.5)+","+(ls.b+.5-_l)+"h3v"+_l+"h"+_l+"v3h-"+(_l+3)+"Z"}function U(ls,_l,Ll,zl,yu){for(var Vu=!1,od={},Ad={},vd,fd,Kl,vu,Rl=(yu||{}).xaHash,Wu=(yu||{}).yaHash,cd=0;cd<_l.length;cd++){var xd=_l[cd];for(vd in Ll)if(xd[vd]){for(Kl in xd)!(yu&&(Rl[Kl]||Wu[Kl]))&&!(Kl.charAt(0)==="x"?Ll:zl)[Kl]&&(od[Kl]=vd);for(fd in zl)!(yu&&(Rl[fd]||Wu[fd]))&&xd[fd]&&(Vu=!0)}for(fd in zl)if(xd[fd])for(vu in xd)!(yu&&(Rl[vu]||Wu[vu]))&&!(vu.charAt(0)==="x"?Ll:zl)[vu]&&(Ad[vu]=fd)}Vu&&(l.extendFlat(od,Ad),Ad={});var Td={},Pd=[];for(Kl in od){var Hd=Z(ls,Kl);Pd.push(Hd),Td[Hd._id]=Hd}var $d={},Wd=[];for(vu in Ad){var mh=Z(ls,vu);Wd.push(mh),$d[mh._id]=mh}return{xaHash:Td,yaHash:$d,xaxes:Pd,yaxes:Wd,xLinks:od,yLinks:Ad,isSubplotConstrained:Vu}}function re(ls,_l){if(!v)ls.onwheel!==void 0?ls.onwheel=_l:ls.onmousewheel!==void 0?ls.onmousewheel=_l:ls.isAddedWheelEvent||(ls.isAddedWheelEvent=!0,ls.addEventListener("wheel",_l,{passive:!1}));else{var Ll=ls.onwheel!==void 0?"wheel":"mousewheel";ls._onwheel&&ls.removeEventListener(Ll,ls._onwheel),ls._onwheel=_l,ls.addEventListener(Ll,_l,{passive:!1})}}function Ft(ls){var _l=[];for(var Ll in ls)_l.push(ls[Ll]);return _l}Me.exports={makeDragBox:Fn,makeDragger:al,makeRectDragger:sl,makeZoombox:Ul,makeCorners:ql,updateZoombox:gu,xyCorners:st,transitionZoombox:Bn,removeZoombox:il,showDoubleClickNotifier:X,attachWheelEventHandler:re}}),h1=s(ot=>{var Me=$(),m=Xf(),l=Th(),d=dp(),x=Iy().makeDragBox,v=rf().DRAGGERSIZE;ot.initInteractions=function(y){var w=y._fullLayout;if(y._context.staticPlot){Me.select(y).selectAll(".drag").remove();return}if(!(!w._has("cartesian")&&!w._has("splom"))){var S=Object.keys(w._plots||{}).sort(function(F,b){if((w._plots[F].mainplot&&!0)===(w._plots[b].mainplot&&!0)){var R=F.split("y"),B=b.split("y");return R[0]===B[0]?Number(R[1]||1)-Number(B[1]||1):Number(R[0]||1)-Number(B[0]||1)}return w._plots[F].mainplot?1:-1});S.forEach(function(F){var b=w._plots[F],R=b.xaxis,B=b.yaxis;if(!b.mainplot){var O=x(y,b,R._offset,B._offset,R._length,B._length,"ns","ew");O.onmousemove=function(H){y._fullLayout._rehover=function(){y._fullLayout._hoversubplot===F&&y._fullLayout._plots[F]&&m.hover(y,H,F)},m.hover(y,H,F),y._fullLayout._lasthover=O,y._fullLayout._hoversubplot=F},O.onmouseout=function(H){y._dragging||(y._fullLayout._hoversubplot=null,l.unhover(y,H))},y._context.showAxisDragHandles&&(x(y,b,R._offset-v,B._offset-v,v,v,"n","w"),x(y,b,R._offset+R._length,B._offset-v,v,v,"n","e"),x(y,b,R._offset-v,B._offset+B._length,v,v,"s","w"),x(y,b,R._offset+R._length,B._offset+B._length,v,v,"s","e"))}if(y._context.showAxisDragHandles){if(F===R._mainSubplot){var P=R._mainLinePosition;R.side==="top"&&(P-=v),x(y,b,R._offset+R._length*.1,P,R._length*.8,v,"","ew"),x(y,b,R._offset,P,R._length*.1,v,"","w"),x(y,b,R._offset+R._length*.9,P,R._length*.1,v,"","e")}if(F===B._mainSubplot){var D=B._mainLinePosition;B.side!=="right"&&(D-=v),x(y,b,D,B._offset+B._length*.1,v,B._length*.8,"ns",""),x(y,b,D,B._offset+B._length*.9,v,B._length*.1,"s",""),x(y,b,D,B._offset,v,B._length*.1,"n","")}}});var c=w._hoverlayer.node();c.onmousemove=function(F){F.target=y._fullLayout._lasthover,m.hover(y,F,w._hoversubplot)},c.onclick=function(F){F.target=y._fullLayout._lasthover,m.click(y,F)},c.onmousedown=function(F){y._fullLayout._lasthover.onmousedown(F)},ot.updateFx(y)}},ot.updateFx=function(y){var w=y._fullLayout,S=w.dragmode==="pan"?"move":"crosshair";d(w._draggers,S)}}),W1=s((ot,Me)=>{var m=ff();Me.exports=function(l){for(var d=m.layoutArrayContainers,x=m.layoutArrayRegexes,v=l.split("[")[0],y,w,S=0;S<x.length;S++)if(w=l.match(x[S]),w&&w.index===0){y=w[0];break}if(y||(y=d[d.indexOf(v)]),!y)return!1;var c=l.substr(y.length);return c?(w=c.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),w?{array:y,index:Number(w[1]),property:w[3]||""}:!1):{array:y,index:"",property:""}}}),_0=s(ot=>{var Me=rl(),m=Rd(),l=wh(),d=wf().sorterAsc,x=ff();ot.containerArrayMatch=W1();var v=ot.isAddVal=function(w){return w==="add"||Me(w)},y=ot.isRemoveVal=function(w){return w===null||w==="remove"};ot.applyContainerArrayChanges=function(w,S,c,F,b){var R=S.astr,B=x.getComponentMethod(R,"supplyLayoutDefaults"),O=x.getComponentMethod(R,"draw"),P=x.getComponentMethod(R,"drawOne"),D=F.replot||F.recalc||B===m||O===m,H=w.layout,C=w._fullLayout;if(c[""]){Object.keys(c).length>1&&l.warn("Full array edits are incompatible with other edits",R);var A=c[""][""];if(y(A))S.set(null);else if(Array.isArray(A))S.set(A);else return l.warn("Unrecognized full array edit value",R,A),!0;return D?!1:(B(H,C),O(w),!0)}var L=Object.keys(c).map(Number).sort(d),j=S.get(),Z=j||[],nl=b(C,R).get(),Pe=[],se=-1,q=Z.length,ol,nt,In,_t,Fn,al,sl,ce;for(ol=0;ol<L.length;ol++){if(In=L[ol],_t=c[In],Fn=Object.keys(_t),al=_t[""],sl=v(al),In<0||In>Z.length-(sl?0:1)){l.warn("index out of range",R,In);continue}if(al!==void 0)Fn.length>1&&l.warn("Insertion & removal are incompatible with edits to the same index.",R,In),y(al)?Pe.push(In):sl?(al==="add"&&(al={}),Z.splice(In,0,al),nl&&nl.splice(In,0,{})):l.warn("Unrecognized full object edit value",R,In,al),se===-1&&(se=In);else for(nt=0;nt<Fn.length;nt++)ce=R+"["+In+"].",b(Z[In],Fn[nt],ce).set(_t[Fn[nt]])}for(ol=Pe.length-1;ol>=0;ol--)Z.splice(Pe[ol],1),nl&&nl.splice(Pe[ol],1);if(Z.length?j||S.set(Z):S.set(null),D)return!1;if(B(H,C),P!==m){var ll;if(se===-1)ll=L;else{for(q=Math.max(Z.length,q),ll=[],ol=0;ol<L.length&&(In=L[ol],!(In>=se));ol++)ll.push(In);for(ol=se;ol<q;ol++)ll.push(ol)}for(ol=0;ol<ll.length;ol++)P(w,ll[ol])}else O(w);return!0}}),sv=s(ot=>{var Me=zn(),m=ff(),l=rt(),d=Vf(),x=Rh(),v=oh(),y=x.cleanId,w=x.getFromTrace,S=m.traceIs,c=["x","y","z"];ot.clearPromiseQueue=function(C){Array.isArray(C._promises)&&C._promises.length>0&&l.log("Clearing previous rejected promises from queue."),C._promises=[]},ot.cleanLayout=function(C){var A;C||(C={}),C.xaxis1&&(C.xaxis||(C.xaxis=C.xaxis1),delete C.xaxis1),C.yaxis1&&(C.yaxis||(C.yaxis=C.yaxis1),delete C.yaxis1),C.scene1&&(C.scene||(C.scene=C.scene1),delete C.scene1);var L=(d.subplotsRegistry.cartesian||{}).attrRegex;(d.subplotsRegistry.polar||{}).attrRegex,(d.subplotsRegistry.ternary||{}).attrRegex,(d.subplotsRegistry.gl3d||{}).attrRegex;var j=Object.keys(C);for(A=0;A<j.length;A++){var Z=j[A];if(L&&L.test(Z)){var nl=C[Z];nl.anchor&&nl.anchor!=="free"&&(nl.anchor=y(nl.anchor)),nl.overlaying&&(nl.overlaying=y(nl.overlaying)),nl.type||(nl.isdate?nl.type="date":nl.islog?nl.type="log":nl.isdate===!1&&nl.islog===!1&&(nl.type="linear")),(nl.autorange==="withzero"||nl.autorange==="tozero")&&(nl.autorange=!0,nl.rangemode="tozero"),nl.insiderange&&delete nl.range,delete nl.islog,delete nl.isdate,delete nl.categories,O(nl,"domain")&&delete nl.domain}}var Pe=Array.isArray(C.annotations)?C.annotations.length:0;for(A=0;A<Pe;A++){var se=C.annotations[A];l.isPlainObject(se)&&(F(se,"xref"),F(se,"yref"))}var q=Array.isArray(C.shapes)?C.shapes.length:0;for(A=0;A<q;A++){var ol=C.shapes[A];l.isPlainObject(ol)&&(F(ol,"xref"),F(ol,"yref"))}var nt=Array.isArray(C.images)?C.images.length:0;for(A=0;A<nt;A++){var In=C.images[A];l.isPlainObject(In)&&(F(In,"xref"),F(In,"yref"))}var _t=C.legend;return _t&&(_t.x>3?(_t.x=1.02,_t.xanchor="left"):_t.x<-2&&(_t.x=-.02,_t.xanchor="right"),_t.y>3?(_t.y=1.02,_t.yanchor="bottom"):_t.y<-2&&(_t.y=-.02,_t.yanchor="top")),C.dragmode==="rotate"&&(C.dragmode="orbit"),v.clean(C),C.template&&C.template.layout&&ot.cleanLayout(C.template.layout),C};function F(C,A){var L=C[A],j=A.charAt(0);L&&L!=="paper"&&(C[A]=y(L,j,!0))}ot.cleanData=function(C){for(var A=0;A<C.length;A++){var L=C[A],j;if(L.type==="histogramy"&&"xbins"in L&&!("ybins"in L)&&(L.ybins=L.xbins,delete L.xbins),L.type==="histogramy"&&ot.swapXYData(L),(L.type==="histogramx"||L.type==="histogramy")&&(L.type="histogram"),"scl"in L&&!("colorscale"in L)&&(L.colorscale=L.scl,delete L.scl),"reversescl"in L&&!("reversescale"in L)&&(L.reversescale=L.reversescl,delete L.reversescl),L.xaxis&&(L.xaxis=y(L.xaxis,"x")),L.yaxis&&(L.yaxis=y(L.yaxis,"y")),S(L,"gl3d")&&L.scene&&(L.scene=d.subplotsRegistry.gl3d.cleanId(L.scene)),!S(L,"pie-like")&&!S(L,"bar-like"))if(Array.isArray(L.textposition))for(j=0;j<L.textposition.length;j++)L.textposition[j]=B(L.textposition[j]);else L.textposition&&(L.textposition=B(L.textposition));var Z=m.getModule(L);if(Z&&Z.colorbar){var nl=Z.colorbar.container,Pe=nl?L[nl]:L;Pe&&Pe.colorscale&&(Pe.colorscale==="YIGnBu"&&(Pe.colorscale="YlGnBu"),Pe.colorscale==="YIOrRd"&&(Pe.colorscale="YlOrRd"))}if(L.type==="surface"&&l.isPlainObject(L.contours)){var se=["x","y","z"];for(j=0;j<se.length;j++){var q=L.contours[se[j]];l.isPlainObject(q)&&(q.highlightColor&&(q.highlightcolor=q.highlightColor,delete q.highlightColor),q.highlightWidth&&(q.highlightwidth=q.highlightWidth,delete q.highlightWidth))}}if(L.type==="candlestick"||L.type==="ohlc"){var ol=(L.increasing||{}).showlegend!==!1,nt=(L.decreasing||{}).showlegend!==!1,In=b(L.increasing),_t=b(L.decreasing);if(In!==!1&&_t!==!1){var Fn=R(In,_t,ol,nt);Fn&&(L.name=Fn)}else(In||_t)&&!L.name&&(L.name=In||_t)}O(L,"line")&&delete L.line,"marker"in L&&(O(L.marker,"line")&&delete L.marker.line,O(L,"marker")&&delete L.marker),v.clean(L),L.autobinx&&(delete L.autobinx,delete L.xbins),L.autobiny&&(delete L.autobiny,delete L.ybins)}};function b(C){if(!l.isPlainObject(C))return!1;var A=C.name;return delete C.name,delete C.showlegend,(typeof A=="string"||typeof A=="number")&&String(A)}function R(C,A,L,j){if(L&&!j)return C;if(j&&!L||!C.trim())return A;if(!A.trim())return C;var Z=Math.min(C.length,A.length),nl;for(nl=0;nl<Z&&C.charAt(nl)===A.charAt(nl);nl++);var Pe=C.substr(0,nl);return Pe.trim()}function B(C){var A="middle",L="center";return typeof C=="string"&&(C.indexOf("top")!==-1?A="top":C.indexOf("bottom")!==-1&&(A="bottom"),C.indexOf("left")!==-1?L="left":C.indexOf("right")!==-1&&(L="right")),A+" "+L}function O(C,A){return A in C&&typeof C[A]=="object"&&Object.keys(C[A]).length===0}ot.swapXYData=function(C){var A;if(l.swapAttrs(C,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(C.z)&&Array.isArray(C.z[0])&&(C.transpose?delete C.transpose:C.transpose=!0),C.error_x&&C.error_y){var L=C.error_y,j="copy_ystyle"in L?L.copy_ystyle:!(L.color||L.thickness||L.width);l.swapAttrs(C,["error_?.copy_ystyle"]),j&&l.swapAttrs(C,["error_?.color","error_?.thickness","error_?.width"])}if(typeof C.hoverinfo=="string"){var Z=C.hoverinfo.split("+");for(A=0;A<Z.length;A++)Z[A]==="x"?Z[A]="y":Z[A]==="y"&&(Z[A]="x");C.hoverinfo=Z.join("+")}},ot.coerceTraceIndices=function(C,A){if(Me(A))return[A];if(!Array.isArray(A)||!A.length)return C.data.map(function(Z,nl){return nl});if(Array.isArray(A)){for(var L=[],j=0;j<A.length;j++)l.isIndex(A[j],C.data.length)?L.push(A[j]):l.warn("trace index (",A[j],") is not a number or is out of bounds");return L}return A},ot.manageArrayContainers=function(C,A,L){var j=C.obj,Z=C.parts,nl=Z.length,Pe=Z[nl-1],se=Me(Pe);if(se&&A===null){var q=Z.slice(0,nl-1).join("."),ol=l.nestedProperty(j,q).get();ol.splice(Pe,1)}else se&&C.get()===void 0&&C.get()===void 0&&(L[C.astr]=null),C.set(A)};var P=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function D(C){var A=C.search(P);if(A>0)return C.substr(0,A)}ot.hasParent=function(C,A){for(var L=D(A);L;){if(L in C)return!0;L=D(L)}return!1},ot.clearAxisTypes=function(C,A,L){for(var j=0;j<A.length;j++)for(var Z=C._fullData[j],nl=0;nl<3;nl++){var Pe=w(C,Z,c[nl]);if(Pe&&Pe.type!=="log"){var se=Pe._name,q=Pe._id.substr(1);if(q.substr(0,5)==="scene"){if(L[q]!==void 0)continue;se=q+"."+se}var ol=se+".type";L[se]===void 0&&L[ol]===void 0&&l.nestedProperty(C.layout,ol).set(null)}}};var H=(C,A)=>{let L=(...j)=>j.every(Z=>l.isPlainObject(Z))||j.every(Z=>Array.isArray(Z));if([C,A].every(j=>Array.isArray(j))){if(C.length!==A.length)return!1;for(let j=0;j<C.length;j++){let Z=C[j],nl=A[j];if(Z!==nl&&!(L(Z,nl)&&H(Z,nl)))return!1}return!0}else if([C,A].every(j=>l.isPlainObject(j))){if(Object.keys(C).length!==Object.keys(A).length)return!1;for(let j in C){if(j.startsWith("_"))continue;let Z=C[j],nl=A[j];if(Z!==nl&&!(L(Z,nl)&&H(Z,nl)))return!1}return!0}return!1};ot.collectionsAreEqual=H}),g2=s(ot=>{var Me=$(),m=zn(),l=Eh(),d=rt(),x=d.nestedProperty,v=jp(),y=_p(),w=ff(),S=of(),c=Vf(),F=Ud(),b=Sh(),R=dd(),B=Qd(),O=oh(),P=h1().initInteractions,D=Yg(),H=Ev().clearOutline,C=Cd().dfltConfig,A=_0(),L=sv(),j=zp(),Z=uf(),nl=rf().AX_NAME_PATTERN,Pe=0,se=5;function q(gl,Dl,Vl,Mu){var Nu;if(gl=d.getGraphDiv(gl),v.init(gl),d.isPlainObject(Dl)){var ed=Dl;Dl=ed.data,Vl=ed.layout,Mu=ed.config,Nu=ed.frames}var sd=v.triggerHandler(gl,"plotly_beforeplot",[Dl,Vl,Mu]);if(sd===!1)return Promise.reject();!Dl&&!Vl&&!d.isPlotDiv(gl)&&d.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",gl);function Sd(){if(Nu)return ot.addFrames(gl,Nu)}Fn(gl,Mu),Vl||(Vl={}),Me.select(gl).classed("js-plotly-plot",!0),B.makeTester(),Array.isArray(gl._promises)||(gl._promises=[]);var yd=(gl.data||[]).length===0&&Array.isArray(Dl);Array.isArray(Dl)&&(L.cleanData(Dl),yd?gl.data=Dl:gl.data.push.apply(gl.data,Dl),gl.empty=!1),(!gl.layout||yd)&&(gl.layout=L.cleanLayout(Vl)),c.supplyDefaults(gl);var bd=gl._fullLayout,Kd=bd._has("cartesian");bd._replotting=!0,(yd||bd._shouldCreateBgLayer)&&(Ku(gl),bd._shouldCreateBgLayer&&delete bd._shouldCreateBgLayer),B.initGradients(gl),B.initPatterns(gl),yd&&F.saveShowSpikeInitial(gl);var Jd=!gl.calcdata||gl.calcdata.length!==(gl._fullData||[]).length;Jd&&c.doCalcdata(gl);for(var th=0;th<gl.calcdata.length;th++)gl.calcdata[th][0].trace=gl._fullData[th];gl._context.responsive?gl._responsiveChartHandler||(gl._responsiveChartHandler=function(){d.isHidden(gl)||c.resize(gl)},window.addEventListener("resize",gl._responsiveChartHandler)):d.clearResponsive(gl);var Hh=d.extendFlat({},bd._size),sp=0;function xp(){for(var wp=bd._basePlotModules,Sp=0;Sp<wp.length;Sp++)wp[Sp].drawFramework&&wp[Sp].drawFramework(gl);!bd._glcanvas&&bd._has("gl")&&(bd._glcanvas=bd._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Lp){return Lp.key}),bd._glcanvas.enter().append("canvas").attr("class",function(Lp){return"gl-canvas gl-canvas-"+Lp.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var mp=gl._context.plotGlPixelRatio;if(bd._glcanvas){bd._glcanvas.attr("width",bd.width*mp).attr("height",bd.height*mp).style("width",bd.width+"px").style("height",bd.height+"px");var af=bd._glcanvas.data()[0].regl;if(af&&(Math.floor(bd.width*mp)!==af._gl.drawingBufferWidth||Math.floor(bd.height*mp)!==af._gl.drawingBufferHeight)){var _f="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(sp)d.error(_f);else return d.log(_f+" Clearing graph and plotting again."),c.cleanPlot([],{},gl._fullData,bd),c.supplyDefaults(gl),bd=gl._fullLayout,c.doCalcdata(gl),sp++,xp()}}return bd.modebar.orientation==="h"?bd._modebardiv.style("height",null).style("width","100%"):bd._modebardiv.style("width",null).style("height",bd.height+"px"),c.previousPromises(gl)}function Pp(){if(c.clearAutoMarginIds(gl),j.drawMarginPushers(gl),F.allowAutoMargin(gl),gl._fullLayout.title.text&&gl._fullLayout.title.automargin&&c.allowAutoMargin(gl,"title.automargin"),bd._has("pie"))for(var wp=gl._fullData,Sp=0;Sp<wp.length;Sp++){var mp=wp[Sp];mp.type==="pie"&&mp.automargin&&c.allowAutoMargin(gl,"pie."+mp.uid+".automargin")}return c.doAutoMargin(gl),c.previousPromises(gl)}function Up(){if(c.didMarginChange(Hh,bd._size))return d.syncOrAsync([Pp,j.layoutStyles],gl)}function fp(){if(!Jd){zh();return}return d.syncOrAsync([w.getComponentMethod("shapes","calcAutorange"),w.getComponentMethod("annotations","calcAutorange"),zh],gl)}function zh(){gl._transitioning||(j.doAutoRangeAndConstraints(gl),yd&&F.saveRangeInitial(gl),w.getComponentMethod("rangeslider","calcAutorange")(gl))}function kp(){return F.draw(gl,yd?"":"redraw")}var qh=[c.previousPromises,Sd,xp,Pp,Up];Kd&&qh.push(fp),qh.push(j.layoutStyles),Kd&&qh.push(kp,function(wp){var Sp=wp._fullLayout._insideTickLabelsUpdaterange;if(Sp)return wp._fullLayout._insideTickLabelsUpdaterange=void 0,_l(wp,Sp).then(function(){F.saveRangeInitial(wp,!0)})}),qh.push(j.drawData,j.finalDraw,P,c.addLinks,c.rehover,c.redrag,c.reselect,c.doAutoMargin,c.previousPromises);var bp=d.syncOrAsync(qh,gl);return(!bp||!bp.then)&&(bp=Promise.resolve()),bp.then(function(){return ol(gl),gl})}function ol(gl){var Dl=gl._fullLayout;Dl._redrawFromAutoMarginCount?Dl._redrawFromAutoMarginCount--:gl.emit("plotly_afterplot")}function nt(gl){return d.extendFlat(C,gl)}function In(gl,Dl){try{gl._fullLayout._paper.style("background",Dl)}catch(Vl){d.error(Vl)}}function _t(gl,Dl){var Vl=O.combine(Dl,"white");In(gl,Vl)}function Fn(gl,Dl){if(!gl._context){gl._context=d.extendDeep({},C);var Vl=Me.select("base");gl._context._baseUrl=Vl.size()&&Vl.attr("href")?window.location.href.split("#")[0]:""}var Mu=gl._context,Nu,ed,sd;if(Dl){for(ed=Object.keys(Dl),Nu=0;Nu<ed.length;Nu++)sd=ed[Nu],!(sd==="editable"||sd==="edits")&&sd in Mu&&(sd==="setBackground"&&Dl[sd]==="opaque"?Mu[sd]=_t:Mu[sd]=Dl[sd]);var Sd=Dl.editable;if(Sd!==void 0)for(Mu.editable=Sd,ed=Object.keys(Mu.edits),Nu=0;Nu<ed.length;Nu++)Mu.edits[ed[Nu]]=Sd;if(Dl.edits)for(ed=Object.keys(Dl.edits),Nu=0;Nu<ed.length;Nu++)sd=ed[Nu],sd in Mu.edits&&(Mu.edits[sd]=Dl.edits[sd]);Mu._exportedPlot=Dl._exportedPlot}Mu.staticPlot&&(Mu.editable=!1,Mu.edits={},Mu.autosizable=!1,Mu.scrollZoom=!1,Mu.doubleClick=!1,Mu.showTips=!1,Mu.showLink=!1,Mu.displayModeBar=!1),Mu.displayModeBar==="hover"&&!l&&(Mu.displayModeBar=!0),(Mu.setBackground==="transparent"||typeof Mu.setBackground!="function")&&(Mu.setBackground=In),Mu._hasZeroHeight=Mu._hasZeroHeight||gl.clientHeight===0,Mu._hasZeroWidth=Mu._hasZeroWidth||gl.clientWidth===0;var yd=Mu.scrollZoom,bd=Mu._scrollZoom={};if(yd===!0)bd.cartesian=1,bd.gl3d=1,bd.geo=1,bd.mapbox=1,bd.map=1;else if(typeof yd=="string"){var Kd=yd.split("+");for(Nu=0;Nu<Kd.length;Nu++)bd[Kd[Nu]]=1}else yd!==!1&&(bd.gl3d=1,bd.geo=1,bd.mapbox=1,bd.map=1)}function al(gl){if(gl=d.getGraphDiv(gl),!d.isPlotDiv(gl))throw new Error("This element is not a Plotly plot: "+gl);return L.cleanData(gl.data),L.cleanLayout(gl.layout),gl.calcdata=void 0,ot._doPlot(gl).then(function(){return gl.emit("plotly_redraw"),gl})}function sl(gl,Dl,Vl,Mu){return gl=d.getGraphDiv(gl),c.cleanPlot([],{},gl._fullData||[],gl._fullLayout||{}),c.purge(gl),ot._doPlot(gl,Dl,Vl,Mu)}function ce(gl,Dl){var Vl=Dl+1,Mu=[],Nu,ed;for(Nu=0;Nu<gl.length;Nu++)ed=gl[Nu],ed<0?Mu.push(Vl+ed):Mu.push(ed);return Mu}function ll(gl,Dl,Vl){var Mu,Nu;for(Mu=0;Mu<Dl.length;Mu++){if(Nu=Dl[Mu],Nu!==parseInt(Nu,10))throw new Error("all values in "+Vl+" must be integers");if(Nu>=gl.data.length||Nu<-gl.data.length)throw new Error(Vl+" must be valid indices for gd.data.");if(Dl.indexOf(Nu,Mu+1)>-1||Nu>=0&&Dl.indexOf(-gl.data.length+Nu)>-1||Nu<0&&Dl.indexOf(gl.data.length+Nu)>-1)throw new Error("each index in "+Vl+" must be unique.")}}function ul(gl,Dl,Vl){if(!Array.isArray(gl.data))throw new Error("gd.data must be an array.");if(typeof Dl>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Dl)||(Dl=[Dl]),ll(gl,Dl,"currentIndices"),typeof Vl<"u"&&!Array.isArray(Vl)&&(Vl=[Vl]),typeof Vl<"u"&&ll(gl,Vl,"newIndices"),typeof Vl<"u"&&Dl.length!==Vl.length)throw new Error("current and new indices must be of equal length.")}function fl(gl,Dl,Vl){var Mu,Nu;if(!Array.isArray(gl.data))throw new Error("gd.data must be an array.");if(typeof Dl>"u")throw new Error("traces must be defined.");for(Array.isArray(Dl)||(Dl=[Dl]),Mu=0;Mu<Dl.length;Mu++)if(Nu=Dl[Mu],typeof Nu!="object"||Array.isArray(Nu)||Nu===null)throw new Error("all values in traces array must be non-array objects");if(typeof Vl<"u"&&!Array.isArray(Vl)&&(Vl=[Vl]),typeof Vl<"u"&&Vl.length!==Dl.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function bl(gl,Dl,Vl,Mu){var Nu=d.isPlainObject(Mu);if(!Array.isArray(gl.data))throw new Error("gd.data must be an array");if(!d.isPlainObject(Dl))throw new Error("update must be a key:value object");if(typeof Vl>"u")throw new Error("indices must be an integer or array of integers");ll(gl,Vl,"indices");for(var ed in Dl){if(!Array.isArray(Dl[ed])||Dl[ed].length!==Vl.length)throw new Error("attribute "+ed+" must be an array of length equal to indices array length");if(Nu&&(!(ed in Mu)||!Array.isArray(Mu[ed])||Mu[ed].length!==Dl[ed].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 correspondence with the keys and number of traces in the update object")}}function El(gl,Dl,Vl,Mu){var Nu=d.isPlainObject(Mu),ed=[],sd,Sd,yd,bd,Kd;Array.isArray(Vl)||(Vl=[Vl]),Vl=ce(Vl,gl.data.length-1);for(var Jd in Dl)for(var th=0;th<Vl.length;th++){if(sd=gl.data[Vl[th]],yd=x(sd,Jd),Sd=yd.get(),bd=Dl[Jd][th],!d.isArrayOrTypedArray(bd))throw new Error("attribute: "+Jd+" index: "+th+" must be an array");if(!d.isArrayOrTypedArray(Sd))throw new Error("cannot extend missing or non-array attribute: "+Jd);if(Sd.constructor!==bd.constructor)throw new Error("cannot extend array with an array of a different type: "+Jd);Kd=Nu?Mu[Jd][th]:Mu,m(Kd)||(Kd=-1),ed.push({prop:yd,target:Sd,insert:bd,maxp:Math.floor(Kd)})}return ed}function Ul(gl,Dl,Vl,Mu,Nu){bl(gl,Dl,Vl,Mu);for(var ed=El(gl,Dl,Vl,Mu),sd={},Sd={},yd=0;yd<ed.length;yd++){var bd=ed[yd].prop,Kd=ed[yd].maxp,Jd=Nu(ed[yd].target,ed[yd].insert,Kd);bd.set(Jd[0]),Array.isArray(sd[bd.astr])||(sd[bd.astr]=[]),sd[bd.astr].push(Jd[1]),Array.isArray(Sd[bd.astr])||(Sd[bd.astr]=[]),Sd[bd.astr].push(ed[yd].target.length)}return{update:sd,maxPoints:Sd}}function ql(gl,Dl){var Vl=new gl.constructor(gl.length+Dl.length);return Vl.set(gl),Vl.set(Dl,gl.length),Vl}function gu(gl,Dl,Vl,Mu){gl=d.getGraphDiv(gl);function Nu(yd,bd,Kd){var Jd,th;if(d.isTypedArray(yd))if(Kd<0){var Hh=new yd.constructor(0),sp=ql(yd,bd);Kd<0?(Jd=sp,th=Hh):(Jd=Hh,th=sp)}else if(Jd=new yd.constructor(Kd),th=new yd.constructor(yd.length+bd.length-Kd),Kd===bd.length)Jd.set(bd),th.set(yd);else if(Kd<bd.length){var xp=bd.length-Kd;Jd.set(bd.subarray(xp)),th.set(yd),th.set(bd.subarray(0,xp),yd.length)}else{var Pp=Kd-bd.length,Up=yd.length-Pp;Jd.set(yd.subarray(Up)),Jd.set(bd,Pp),th.set(yd.subarray(0,Up))}else Jd=yd.concat(bd),th=Kd>=0&&Kd<Jd.length?Jd.splice(0,Jd.length-Kd):[];return[Jd,th]}var ed=Ul(gl,Dl,Vl,Mu,Nu),sd=ot.redraw(gl),Sd=[gl,ed.update,Vl,ed.maxPoints];return y.add(gl,ot.prependTraces,Sd,gu,arguments),sd}function Bn(gl,Dl,Vl,Mu){gl=d.getGraphDiv(gl);function Nu(yd,bd,Kd){var Jd,th;if(d.isTypedArray(yd))if(Kd<=0){var Hh=new yd.constructor(0),sp=ql(bd,yd);Kd<0?(Jd=sp,th=Hh):(Jd=Hh,th=sp)}else if(Jd=new yd.constructor(Kd),th=new yd.constructor(yd.length+bd.length-Kd),Kd===bd.length)Jd.set(bd),th.set(yd);else if(Kd<bd.length){var xp=bd.length-Kd;Jd.set(bd.subarray(0,xp)),th.set(bd.subarray(xp)),th.set(yd,xp)}else{var Pp=Kd-bd.length;Jd.set(bd),Jd.set(yd.subarray(0,Pp),bd.length),th.set(yd.subarray(Pp))}else Jd=bd.concat(yd),th=Kd>=0&&Kd<Jd.length?Jd.splice(Kd,Jd.length):[];return[Jd,th]}var ed=Ul(gl,Dl,Vl,Mu,Nu),sd=ot.redraw(gl),Sd=[gl,ed.update,Vl,ed.maxPoints];return y.add(gl,ot.extendTraces,Sd,Bn,arguments),sd}function il(gl,Dl,Vl){gl=d.getGraphDiv(gl);var Mu=[],Nu=ot.deleteTraces,ed=il,sd=[gl,Mu],Sd=[gl,Dl],yd,bd;for(fl(gl,Dl,Vl),Array.isArray(Dl)||(Dl=[Dl]),Dl=Dl.map(function(Kd){return d.extendFlat({},Kd)}),L.cleanData(Dl),yd=0;yd<Dl.length;yd++)gl.data.push(Dl[yd]);for(yd=0;yd<Dl.length;yd++)Mu.push(-Dl.length+yd);if(typeof Vl>"u")return bd=ot.redraw(gl),y.add(gl,Nu,sd,ed,Sd),bd;Array.isArray(Vl)||(Vl=[Vl]);try{ul(gl,Mu,Vl)}catch(Kd){throw gl.data.splice(gl.data.length-Dl.length,Dl.length),Kd}return y.startSequence(gl),y.add(gl,Nu,sd,ed,Sd),bd=ot.moveTraces(gl,Mu,Vl),y.stopSequence(gl),bd}function X(gl,Dl){gl=d.getGraphDiv(gl);var Vl=[],Mu=ot.addTraces,Nu=X,ed=[gl,Vl,Dl],sd=[gl,Dl],Sd,yd;if(typeof Dl>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Dl)||(Dl=[Dl]),ll(gl,Dl,"indices"),Dl=ce(Dl,gl.data.length-1),Dl.sort(d.sorterDes),Sd=0;Sd<Dl.length;Sd+=1)yd=gl.data.splice(Dl[Sd],1)[0],Vl.push(yd);var bd=ot.redraw(gl);return y.add(gl,Mu,ed,Nu,sd),bd}function cl(gl,Dl,Vl){gl=d.getGraphDiv(gl);var Mu=[],Nu=[],ed=cl,sd=cl,Sd=[gl,Vl,Dl],yd=[gl,Dl,Vl],bd;if(ul(gl,Dl,Vl),Dl=Array.isArray(Dl)?Dl:[Dl],typeof Vl>"u")for(Vl=[],bd=0;bd<Dl.length;bd++)Vl.push(-Dl.length+bd);for(Vl=Array.isArray(Vl)?Vl:[Vl],Dl=ce(Dl,gl.data.length-1),Vl=ce(Vl,gl.data.length-1),bd=0;bd<gl.data.length;bd++)Dl.indexOf(bd)===-1&&Mu.push(gl.data[bd]);for(bd=0;bd<Dl.length;bd++)Nu.push({newIndex:Vl[bd],trace:gl.data[Dl[bd]]});for(Nu.sort(function(Jd,th){return Jd.newIndex-th.newIndex}),bd=0;bd<Nu.length;bd+=1)Mu.splice(Nu[bd].newIndex,0,Nu[bd].trace);gl.data=Mu;var Kd=ot.redraw(gl);return y.add(gl,ed,Sd,sd,yd),Kd}function Sl(gl,Dl,Vl,Mu){gl=d.getGraphDiv(gl),L.clearPromiseQueue(gl);var Nu={};if(typeof Dl=="string")Nu[Dl]=Vl;else if(d.isPlainObject(Dl))Nu=d.extendFlat({},Dl),Mu===void 0&&(Mu=Vl);else return d.warn("Restyle fail.",Dl,Vl,Mu),Promise.reject();Object.keys(Nu).length&&(gl.changed=!0);var ed=L.coerceTraceIndices(gl,Mu),sd=ls(gl,Nu,ed),Sd=sd.flags;Sd.calc&&(gl.calcdata=void 0),Sd.clearAxisTypes&&L.clearAxisTypes(gl,ed,{});var yd=[];Sd.fullReplot?yd.push(ot._doPlot):(yd.push(c.previousPromises),c.supplyDefaults(gl),Sd.markerSize&&(c.doCalcdata(gl),zl(yd)),Sd.style&&yd.push(j.doTraceStyle),Sd.colorbars&&yd.push(j.doColorBars),yd.push(ol)),yd.push(c.rehover,c.redrag,c.reselect),y.add(gl,Sl,[gl,sd.undoit,sd.traces],Sl,[gl,sd.redoit,sd.traces]);var bd=d.syncOrAsync(yd,gl);return(!bd||!bd.then)&&(bd=Promise.resolve()),bd.then(function(){return gl.emit("plotly_restyle",sd.eventData),gl})}function st(gl){return gl===void 0?null:gl}function U(gl,Dl){return Dl?function(Vl,Mu,Nu){var ed=x(Vl,Mu),sd=ed.set;return ed.set=function(Sd){var yd=(Nu||"")+Mu;re(yd,ed.get(),Sd,gl),sd(Sd)},ed}:x}function re(gl,Dl,Vl,Mu){if(Array.isArray(Dl)||Array.isArray(Vl))for(var Nu=Array.isArray(Dl)?Dl:[],ed=Array.isArray(Vl)?Vl:[],sd=Math.max(Nu.length,ed.length),Sd=0;Sd<sd;Sd++)re(gl+"["+Sd+"]",Nu[Sd],ed[Sd],Mu);else if(d.isPlainObject(Dl)||d.isPlainObject(Vl)){var yd=d.isPlainObject(Dl)?Dl:{},bd=d.isPlainObject(Vl)?Vl:{},Kd=d.extendFlat({},yd,bd);for(var Jd in Kd)re(gl+"."+Jd,yd[Jd],bd[Jd],Mu)}else Mu[gl]===void 0&&(Mu[gl]=st(Dl))}function Ft(gl,Dl,Vl){for(var Mu in Vl){var Nu=x(gl,Mu);re(Mu,Nu.get(),Vl[Mu],Dl)}}function ls(gl,Dl,Vl){var Mu=gl._fullLayout,Nu=gl._fullData,ed=gl.data,sd=Mu._guiEditing,Sd=U(Mu._preGUI,sd),yd=d.extendDeepAll({},Dl),bd,Kd=Z.traceFlags(),Jd={},th={},Hh;function sp(){return Vl.map(function(){})}function xp(zd){var gh=F.id2name(zd);Hh.indexOf(gh)===-1&&Hh.push(gh)}function Pp(zd){return"LAYOUT"+zd+".autorange"}function Up(zd){return"LAYOUT"+zd+".range"}function fp(zd){for(var gh=zd;gh<Nu.length;gh++)if(Nu[gh]._input===ed[zd])return Nu[gh]}function zh(zd,gh,ep){if(Array.isArray(zd)){zd.forEach(function(hp){zh(hp,gh,ep)});return}if(!(zd in Dl||L.hasParent(Dl,zd))){var Bh;if(zd.substr(0,6)==="LAYOUT")Bh=Sd(gl.layout,zd.replace("LAYOUT",""));else{var up=Vl[ep],Uh=Mu._tracePreGUI[fp(up)._fullInput.uid];Bh=U(Uh,sd)(ed[up],zd)}zd in th||(th[zd]=sp()),th[zd][ep]===void 0&&(th[zd][ep]=st(Bh.get())),gh!==void 0&&Bh.set(gh)}}function kp(zd){return function(gh){return Nu[gh][zd]}}function qh(zd){return function(gh,ep){return gh===!1?Nu[Vl[ep]][zd]:null}}for(var bp in Dl){if(L.hasParent(Dl,bp))throw new Error("cannot set "+bp+" and a parent attribute simultaneously");var wp=Dl[bp],Sp,mp,af,_f,Lp,Ef;if((bp==="autobinx"||bp==="autobiny")&&(bp=bp.charAt(bp.length-1)+"bins",Array.isArray(wp)?wp=wp.map(qh(bp)):wp===!1?wp=Vl.map(kp(bp)):wp=null),Jd[bp]=wp,bp.substr(0,6)==="LAYOUT"){af=Sd(gl.layout,bp.replace("LAYOUT","")),th[bp]=[st(af.get())],af.set(Array.isArray(wp)?wp[0]:wp),Kd.calc=!0;continue}for(th[bp]=sp(),bd=0;bd<Vl.length;bd++){Sp=ed[Vl[bd]],mp=fp(Vl[bd]);var Lf=Mu._tracePreGUI[mp._fullInput.uid];if(af=U(Lf,sd)(Sp,bp),_f=af.get(),Lp=Array.isArray(wp)?wp[bd%wp.length]:wp,Lp!==void 0){var rg=af.parts[af.parts.length-1],ng=bp.substr(0,bp.length-rg.length-1),gf=ng?ng+".":"",Rf=ng?x(mp,ng).get():mp;if(Ef=S.getTraceValObject(mp,af.parts),Ef&&Ef.impliedEdits&&Lp!==null)for(var yf in Ef.impliedEdits)zh(d.relativeAttr(bp,yf),Ef.impliedEdits[yf],bd);else if((rg==="thicknessmode"||rg==="lenmode")&&_f!==Lp&&(Lp==="fraction"||Lp==="pixels")&&Rf){var cp=Mu._size,_g=Rf.orient,wl=_g==="top"||_g==="bottom";if(rg==="thicknessmode"){var pl=wl?cp.h:cp.w;zh(gf+"thickness",Rf.thickness*(Lp==="fraction"?1/pl:pl),bd)}else{var Yu=wl?cp.w:cp.h;zh(gf+"len",Rf.len*(Lp==="fraction"?1/Yu:Yu),bd)}}else if(bp==="type"&&(Lp==="pie"!=(_f==="pie")||Lp==="funnelarea"!=(_f==="funnelarea"))){var Ju="x",hd="y";(Lp==="bar"||_f==="bar")&&Sp.orientation==="h"&&(Ju="y",hd="x"),d.swapAttrs(Sp,["?","?src"],"labels",Ju),d.swapAttrs(Sp,["d?","?0"],"label",Ju),d.swapAttrs(Sp,["?","?src"],"values",hd),_f==="pie"||_f==="funnelarea"?(x(Sp,"marker.color").set(x(Sp,"marker.colors").get()),Mu._pielayer.selectAll("g.trace").remove()):w.traceIs(Sp,"cartesian")&&x(Sp,"marker.colors").set(x(Sp,"marker.color").get())}th[bp][bd]=st(_f);var $u=["swapxy","swapxyaxes","orientation","orientationaxes"];if($u.indexOf(bp)!==-1){if(bp==="orientation"){af.set(Lp);var Xu=Sp.x&&!Sp.y?"h":"v";if((af.get()||Xu)===mp.orientation)continue}else bp==="orientationaxes"&&(Sp.orientation={v:"h",h:"v"}[mp.orientation]);L.swapXYData(Sp),Kd.calc=Kd.clearAxisTypes=!0}else c.dataArrayContainers.indexOf(af.parts[0])!==-1?(L.manageArrayContainers(af,Lp,th),Kd.calc=!0):(Ef?Ef.arrayOk&&!w.traceIs(mp,"regl")&&(d.isArrayOrTypedArray(Lp)||d.isArrayOrTypedArray(_f))?Kd.calc=!0:Z.update(Kd,Ef):Kd.calc=!0,af.set(Lp))}}if(["swapxyaxes","orientationaxes"].indexOf(bp)!==-1&&F.swap(gl,Vl),bp==="orientationaxes"){var md=x(gl.layout,"hovermode"),ld=md.get();ld==="x"?md.set("y"):ld==="y"?md.set("x"):ld==="x unified"?md.set("y unified"):ld==="y unified"&&md.set("x unified")}if(["orientation","type"].indexOf(bp)!==-1){for(Hh=[],bd=0;bd<Vl.length;bd++){var Ld=ed[Vl[bd]];w.traceIs(Ld,"cartesian")&&(xp(Ld.xaxis||"x"),xp(Ld.yaxis||"y"))}zh(Hh.map(Pp),!0,0),zh(Hh.map(Up),[0,1],0)}}return(Kd.calc||Kd.plot)&&(Kd.fullReplot=!0),{flags:Kd,undoit:th,redoit:Jd,traces:Vl,eventData:d.extendDeepNoArrays([],[yd,Vl])}}function _l(gl,Dl,Vl){gl=d.getGraphDiv(gl),L.clearPromiseQueue(gl);var Mu={};if(typeof Dl=="string")Mu[Dl]=Vl;else if(d.isPlainObject(Dl))Mu=d.extendFlat({},Dl);else return d.warn("Relayout fail.",Dl,Vl),Promise.reject();Object.keys(Mu).length&&(gl.changed=!0);var Nu=Ad(gl,Mu),ed=Nu.flags;ed.calc&&(gl.calcdata=void 0);var sd=[c.previousPromises];ed.layoutReplot?sd.push(j.layoutReplot):Object.keys(Mu).length&&(Ll(gl,ed,Nu)||c.supplyDefaults(gl),ed.legend&&sd.push(j.doLegend),ed.layoutstyle&&sd.push(j.layoutStyles),ed.axrange&&zl(sd,Nu.rangesAltered),ed.ticks&&sd.push(j.doTicksRelayout),ed.modebar&&sd.push(j.doModeBar),ed.camera&&sd.push(j.doCamera),ed.colorbars&&sd.push(j.doColorBars),sd.push(ol)),sd.push(c.rehover,c.redrag,c.reselect),y.add(gl,_l,[gl,Nu.undoit],_l,[gl,Nu.redoit]);var Sd=d.syncOrAsync(sd,gl);return(!Sd||!Sd.then)&&(Sd=Promise.resolve(gl)),Sd.then(function(){return gl.emit("plotly_relayout",Nu.eventData),gl})}function Ll(gl,Dl,Vl){var Mu=gl._fullLayout;if(!Dl.axrange)return!1;for(var Nu in Dl)if(Nu!=="axrange"&&Dl[Nu])return!1;var ed,sd,Sd=function(Hh,sp){return d.coerce(ed,sd,R,Hh,sp)},yd={};for(var bd in Vl.rangesAltered){var Kd=F.id2name(bd);if(ed=gl.layout[Kd],sd=Mu[Kd],b(ed,sd,Sd,yd),sd._matchGroup){for(var Jd in sd._matchGroup)if(Jd!==bd){var th=Mu[F.id2name(Jd)];th.autorange=sd.autorange,th.range=sd.range.slice(),th._input.range=sd.range.slice()}}}return!0}function zl(gl,Dl){var Vl=Dl?function(Mu){var Nu=[],ed=!0;for(var sd in Dl){var Sd=F.getFromId(Mu,sd);if(Nu.push(sd),(Sd.ticklabelposition||"").indexOf("inside")!==-1&&Sd._anchorAxis&&Nu.push(Sd._anchorAxis._id),Sd._matchGroup)for(var yd in Sd._matchGroup)Dl[yd]||Nu.push(yd)}return F.draw(Mu,Nu,{skipTitle:ed})}:function(Mu){return F.draw(Mu,"redraw")};gl.push(H,j.doAutoRangeAndConstraints,Vl,j.drawData,j.finalDraw)}var yu=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Vu=/^[xyz]axis[0-9]*\.autorange$/,od=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Ad(gl,Dl){var Vl=gl.layout,Mu=gl._fullLayout,Nu=Mu._guiEditing,ed=U(Mu._preGUI,Nu),sd=Object.keys(Dl),Sd=F.list(gl),yd=d.extendDeepAll({},Dl),bd={},Kd,Jd,th;for(sd=Object.keys(Dl),Jd=0;Jd<sd.length;Jd++)if(sd[Jd].indexOf("allaxes")===0){for(th=0;th<Sd.length;th++){var Hh=Sd[th]._id.substr(1),sp=Hh.indexOf("scene")!==-1?Hh+".":"",xp=sd[Jd].replace("allaxes",sp+Sd[th]._name);Dl[xp]||(Dl[xp]=Dl[sd[Jd]])}delete Dl[sd[Jd]]}var Pp=Z.layoutFlags(),Up={},fp={};function zh(Uh,hp){if(Array.isArray(Uh)){Uh.forEach(function(Uf){zh(Uf,hp)});return}if(!(Uh in Dl||L.hasParent(Dl,Uh))){var Ep=ed(Vl,Uh);Uh in fp||(fp[Uh]=st(Ep.get())),hp!==void 0&&Ep.set(hp)}}var kp={},qh;function bp(Uh){var hp=F.name2id(Uh.split(".")[0]);return kp[hp]=1,hp}for(var wp in Dl){if(L.hasParent(Dl,wp))throw new Error("cannot set "+wp+" and a parent attribute simultaneously");for(var Sp=ed(Vl,wp),mp=Dl[wp],af=Sp.parts.length,_f=af-1;_f>0&&typeof Sp.parts[_f]!="string";)_f--;var Lp=Sp.parts[_f],Ef=Sp.parts[_f-1]+"."+Lp,Lf=Sp.parts.slice(0,_f).join("."),rg=x(gl.layout,Lf).get(),ng=x(Mu,Lf).get(),gf=Sp.get();if(mp!==void 0){Up[wp]=mp,fp[wp]=Lp==="reverse"?mp:st(gf);var Rf=S.getLayoutValObject(Mu,Sp.parts);if(Rf&&Rf.impliedEdits&&mp!==null)for(var yf in Rf.impliedEdits)zh(d.relativeAttr(wp,yf),Rf.impliedEdits[yf]);if(["width","height"].indexOf(wp)!==-1)if(mp){zh("autosize",null);var cp=wp==="height"?"width":"height";zh(cp,Mu[cp])}else Mu[wp]=gl._initialAutoSize[wp];else if(wp==="autosize")zh("width",mp?null:Mu.width),zh("height",mp?null:Mu.height);else if(Ef.match(yu))bp(Ef),x(Mu,Lf+"._inputRange").set(null);else if(Ef.match(Vu)){bp(Ef),x(Mu,Lf+"._inputRange").set(null);var _g=x(Mu,Lf).get();_g._inputDomain&&(_g._input.domain=_g._inputDomain.slice())}else Ef.match(od)&&x(Mu,Lf+"._inputDomain").set(null);if(Lp==="type"){qh=rg;var wl=ng.type==="linear"&&mp==="log",pl=ng.type==="log"&&mp==="linear";if(wl||pl){if(!qh||!qh.range)zh(Lf+".autorange",!0);else if(ng.autorange)wl&&(qh.range=qh.range[1]>qh.range[0]?[1,2]:[2,1]);else{var Yu=qh.range[0],Ju=qh.range[1];wl?(Yu<=0&&Ju<=0&&zh(Lf+".autorange",!0),Yu<=0?Yu=Ju/1e6:Ju<=0&&(Ju=Yu/1e6),zh(Lf+".range[0]",Math.log(Yu)/Math.LN10),zh(Lf+".range[1]",Math.log(Ju)/Math.LN10)):(zh(Lf+".range[0]",Math.pow(10,Yu)),zh(Lf+".range[1]",Math.pow(10,Ju)))}Array.isArray(Mu._subplots.polar)&&Mu._subplots.polar.length&&Mu[Sp.parts[0]]&&Sp.parts[1]==="radialaxis"&&delete Mu[Sp.parts[0]]._subplot.viewInitial["radialaxis.range"],w.getComponentMethod("annotations","convertCoords")(gl,ng,mp,zh),w.getComponentMethod("images","convertCoords")(gl,ng,mp,zh)}else zh(Lf+".autorange",!0),zh(Lf+".range",null);x(Mu,Lf+"._inputRange").set(null)}else if(Lp.match(nl)){var hd=x(Mu,wp).get(),$u=(mp||{}).type;(!$u||$u==="-")&&($u="linear"),w.getComponentMethod("annotations","convertCoords")(gl,hd,$u,zh),w.getComponentMethod("images","convertCoords")(gl,hd,$u,zh)}var Xu=A.containerArrayMatch(wp);if(Xu){Kd=Xu.array,Jd=Xu.index;var md=Xu.property,ld=Rf||{editType:"calc"};Jd!==""&&md===""&&(A.isAddVal(mp)?fp[wp]=null:A.isRemoveVal(mp)?fp[wp]=(x(Vl,Kd).get()||[])[Jd]:d.warn("unrecognized full object value",Dl)),Z.update(Pp,ld),bd[Kd]||(bd[Kd]={});var Ld=bd[Kd][Jd];Ld||(Ld=bd[Kd][Jd]={}),Ld[md]=mp,delete Dl[wp]}else Lp==="reverse"?(rg.range?rg.range.reverse():(zh(Lf+".autorange",!0),rg.range=[1,0]),ng.autorange?Pp.calc=!0:Pp.plot=!0):(wp==="dragmode"&&(mp===!1&&gf!==!1||mp!==!1&&gf===!1)||Mu._has("scatter-like")&&Mu._has("regl")&&wp==="dragmode"&&(mp==="lasso"||mp==="select")&&!(gf==="lasso"||gf==="select")?Pp.plot=!0:Rf?Z.update(Pp,Rf):Pp.calc=!0,Sp.set(mp))}}for(Kd in bd){var zd=A.applyContainerArrayChanges(gl,ed(Vl,Kd),bd[Kd],Pp,ed);zd||(Pp.plot=!0)}for(var gh in kp){qh=F.getFromId(gl,gh);var ep=qh&&qh._constraintGroup;if(ep){Pp.calc=!0;for(var Bh in ep)kp[Bh]||(F.getFromId(gl,Bh)._constraintShrinkable=!0)}}(vd(gl)||Dl.height||Dl.width)&&(Pp.plot=!0);var up=Mu.shapes;for(Jd=0;Jd<up.length;Jd++)if(up[Jd].showlegend){Pp.calc=!0;break}return(Pp.plot||Pp.calc)&&(Pp.layoutReplot=!0),{flags:Pp,rangesAltered:kp,undoit:fp,redoit:Up,eventData:yd}}function vd(gl){var Dl=gl._fullLayout,Vl=Dl.width,Mu=Dl.height;return gl.layout.autosize&&c.plotAutoSize(gl,gl.layout,Dl),Dl.width!==Vl||Dl.height!==Mu}function fd(gl,Dl,Vl,Mu){gl=d.getGraphDiv(gl),L.clearPromiseQueue(gl),d.isPlainObject(Dl)||(Dl={}),d.isPlainObject(Vl)||(Vl={}),Object.keys(Dl).length&&(gl.changed=!0),Object.keys(Vl).length&&(gl.changed=!0);var Nu=L.coerceTraceIndices(gl,Mu),ed=ls(gl,d.extendFlat({},Dl),Nu),sd=ed.flags,Sd=Ad(gl,d.extendFlat({},Vl)),yd=Sd.flags;(sd.calc||yd.calc)&&(gl.calcdata=void 0),sd.clearAxisTypes&&L.clearAxisTypes(gl,Nu,Vl);var bd=[];yd.layoutReplot?bd.push(j.layoutReplot):sd.fullReplot?bd.push(ot._doPlot):(bd.push(c.previousPromises),Ll(gl,yd,Sd)||c.supplyDefaults(gl),sd.style&&bd.push(j.doTraceStyle),(sd.colorbars||yd.colorbars)&&bd.push(j.doColorBars),yd.legend&&bd.push(j.doLegend),yd.layoutstyle&&bd.push(j.layoutStyles),yd.axrange&&zl(bd,Sd.rangesAltered),yd.ticks&&bd.push(j.doTicksRelayout),yd.modebar&&bd.push(j.doModeBar),yd.camera&&bd.push(j.doCamera),bd.push(ol)),bd.push(c.rehover,c.redrag,c.reselect),y.add(gl,fd,[gl,ed.undoit,Sd.undoit,ed.traces],fd,[gl,ed.redoit,Sd.redoit,ed.traces]);var Kd=d.syncOrAsync(bd,gl);return(!Kd||!Kd.then)&&(Kd=Promise.resolve(gl)),Kd.then(function(){return gl.emit("plotly_update",{data:ed.eventData,layout:Sd.eventData}),gl})}function Kl(gl){return function(Dl){Dl._fullLayout._guiEditing=!0;var Vl=gl.apply(null,arguments);return Dl._fullLayout._guiEditing=!1,Vl}}var vu=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Rl=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Wu(gl,Dl){for(var Vl=0;Vl<Dl.length;Vl++){var Mu=Dl[Vl],Nu=gl.match(Mu.pattern);if(Nu){var ed=Nu[1]||"";return{head:ed,tail:gl.substr(ed.length+1),attr:Mu.attr}}}}function cd(gl,Dl){var Vl=x(Dl,gl).get();if(Vl!==void 0)return Vl;var Mu=gl.split(".");for(Mu.pop();Mu.length>1;)if(Mu.pop(),Vl=x(Dl,Mu.join(".")+".uirevision").get(),Vl!==void 0)return Vl;return Dl.uirevision}function xd(gl,Dl){for(var Vl=0;Vl<Dl.length;Vl++)if(Dl[Vl]._fullInput.uid===gl)return Vl;return-1}function Td(gl,Dl,Vl){for(var Mu=0;Mu<Dl.length;Mu++)if(Dl[Mu].uid===gl)return Mu;return!Dl[Vl]||Dl[Vl].uid?-1:Vl}function Pd(gl,Dl){var Vl=d.isPlainObject(gl),Mu=Array.isArray(gl);return Vl||Mu?(Vl&&d.isPlainObject(Dl)||Mu&&Array.isArray(Dl))&&JSON.stringify(gl)===JSON.stringify(Dl):gl===Dl}function Hd(gl,Dl,Vl,Mu){var Nu=Mu._preGUI,ed,sd,Sd,yd,bd,Kd,Jd,th,Hh,sp,xp=[],Pp={},Up={};for(ed in Nu){if(bd=Wu(ed,vu),bd){if(Hh=bd.head,sp=bd.tail,sd=bd.attr||Hh+".uirevision",Sd=x(Mu,sd).get(),yd=Sd&&cd(sd,Dl),yd&&yd===Sd){if(Kd=Nu[ed],Kd===null&&(Kd=void 0),Jd=x(Dl,ed),th=Jd.get(),Pd(th,Kd)){th===void 0&&sp==="autorange"&&xp.push(Hh),Jd.set(st(x(Mu,ed).get()));continue}else if(sp==="autorange"||sp.substr(0,6)==="range["){var fp=Nu[Hh+".range[0]"],zh=Nu[Hh+".range[1]"],kp=Nu[Hh+".autorange"];if(kp||kp===null&&fp===null&&zh===null){if(!(Hh in Pp)){var qh=x(Dl,Hh).get();Pp[Hh]=qh&&(qh.autorange||qh.autorange!==!1&&(!qh.range||qh.range.length!==2))}if(Pp[Hh]){Jd.set(st(x(Mu,ed).get()));continue}}}}}else d.warn("unrecognized GUI edit: "+ed);delete Nu[ed],bd&&bd.tail.substr(0,6)==="range["&&(Up[bd.head]=1)}for(var bp=0;bp<xp.length;bp++){var wp=xp[bp];if(Up[wp]){var Sp=x(Dl,wp).get();Sp&&delete Sp.autorange}}var mp=Mu._tracePreGUI;for(var af in mp){var _f=mp[af],Lp=null,Ef;for(ed in _f){if(!Lp){var Lf=xd(af,Vl);if(Lf<0){delete mp[af];break}var rg=Vl[Lf];Ef=rg._fullInput;var ng=Td(af,gl,Ef.index);if(ng<0){delete mp[af];break}Lp=gl[ng]}if(bd=Wu(ed,Rl),bd){if(bd.attr?(Sd=x(Mu,bd.attr).get(),yd=Sd&&cd(bd.attr,Dl)):(Sd=Ef.uirevision,yd=Lp.uirevision,yd===void 0&&(yd=Dl.uirevision)),yd&&yd===Sd&&(Kd=_f[ed],Kd===null&&(Kd=void 0),Jd=x(Lp,ed),th=Jd.get(),Pd(th,Kd))){Jd.set(st(x(Ef,ed).get()));continue}}else d.warn("unrecognized GUI edit: "+ed+" in trace uid "+af);delete _f[ed]}}}function $d(gl,Dl,Vl,Mu){var Nu,ed;function sd(){return ot.addFrames(gl,Nu)}gl=d.getGraphDiv(gl),L.clearPromiseQueue(gl);var Sd=gl._fullData,yd=gl._fullLayout;if(!d.isPlotDiv(gl)||!Sd||!yd)ed=ot.newPlot(gl,Dl,Vl,Mu);else{if(d.isPlainObject(Dl)){var bd=Dl;Dl=bd.data,Vl=bd.layout,Mu=bd.config,Nu=bd.frames}var Kd=!1;if(Mu){let Ef=d.extendDeepAll({},gl._context);gl._context=void 0,Fn(gl,Mu),Kd=!L.collectionsAreEqual(Ef,gl._context)}if(Kd){let Ef=gl._ev.eventNames().map(Lf=>[Lf,gl._ev.listeners(Lf)]);ed=ot.newPlot(gl,Dl,Vl,Mu).then(()=>{for(let[Lf,rg]of Ef)rg.forEach(ng=>gl.on(Lf,ng));return ot.react(gl,Dl,Vl,Mu)})}else{gl.data=Dl||[],L.cleanData(gl.data),gl.layout=Vl||{},L.cleanLayout(gl.layout),Hd(gl.data,gl.layout,Sd,yd),c.supplyDefaults(gl,{skipUpdateCalc:!0});var Jd=gl._fullData,th=gl._fullLayout,Hh=th.datarevision===void 0,sp=th.transition,xp=mh(gl,yd,th,Hh,sp),Pp=xp.newDataRevision,Up=Wd(gl,Sd,Jd,Hh,sp,Pp);if(vd(gl)&&(xp.layoutReplot=!0),Up.calc||xp.calc){gl.calcdata=void 0;for(var fp=Object.getOwnPropertyNames(th),zh=0;zh<fp.length;zh++){var kp=fp[zh],qh=kp.substring(0,5);if(qh==="xaxis"||qh==="yaxis"){var bp=th[kp]._emptyCategories;bp&&bp()}}}else c.supplyDefaultsUpdateCalc(gl.calcdata,Jd);var wp=[];if(Nu&&(gl._transitionData={},c.createTransitionData(gl),wp.push(sd)),th.transition&&(Up.anim||xp.anim))xp.ticks&&wp.push(j.doTicksRelayout),c.doCalcdata(gl),j.doAutoRangeAndConstraints(gl),wp.push(function(){return c.transitionFromReact(gl,Up,xp,yd)});else if(Up.fullReplot||xp.layoutReplot)gl._fullLayout._skipDefaults=!0,wp.push(ot._doPlot);else{for(var Sp in xp.arrays){var mp=xp.arrays[Sp];if(mp.length){var af=w.getComponentMethod(Sp,"drawOne");if(af!==d.noop)for(var _f=0;_f<mp.length;_f++)af(gl,mp[_f]);else{var Lp=w.getComponentMethod(Sp,"draw");if(Lp===d.noop)throw new Error("cannot draw components: "+Sp);Lp(gl)}}}wp.push(c.previousPromises),Up.style&&wp.push(j.doTraceStyle),(Up.colorbars||xp.colorbars)&&wp.push(j.doColorBars),xp.legend&&wp.push(j.doLegend),xp.layoutstyle&&wp.push(j.layoutStyles),xp.axrange&&zl(wp),xp.ticks&&wp.push(j.doTicksRelayout),xp.modebar&&wp.push(j.doModeBar),xp.camera&&wp.push(j.doCamera),wp.push(ol)}wp.push(c.rehover,c.redrag,c.reselect),ed=d.syncOrAsync(wp,gl),(!ed||!ed.then)&&(ed=Promise.resolve(gl))}}return ed.then(()=>(Kd||gl.emit("plotly_react",{config:Mu,data:Dl,layout:Vl}),gl))}function Wd(gl,Dl,Vl,Mu,Nu,ed){var sd=Dl.length===Vl.length;if(!Nu&&!sd)return{fullReplot:!0,calc:!0};var Sd=Z.traceFlags();Sd.arrays={},Sd.nChanges=0,Sd.nChangesAnim=0;var yd,bd;function Kd(Hh){var sp=S.getTraceValObject(bd,Hh);return!bd._module.animatable&&sp.anim&&(sp.anim=!1),sp}var Jd={getValObject:Kd,flags:Sd,immutable:Mu,transition:Nu,newDataRevision:ed,gd:gl},th={};for(yd=0;yd<Dl.length;yd++)if(Vl[yd]){if(bd=Vl[yd]._fullInput,th[bd.uid])continue;th[bd.uid]=1,Dd(Dl[yd]._fullInput,bd,[],Jd)}return(Sd.calc||Sd.plot)&&(Sd.fullReplot=!0),Nu&&Sd.nChanges&&Sd.nChangesAnim&&(Sd.anim=Sd.nChanges===Sd.nChangesAnim&&sd?"all":"some"),Sd}function mh(gl,Dl,Vl,Mu,Nu){var ed=Z.layoutFlags();ed.arrays={},ed.rangesAltered={},ed.nChanges=0,ed.nChangesAnim=0;function sd(th){return S.getLayoutValObject(Vl,th)}for(var Sd in Vl)if(!(!Sd.startsWith("xaxis")&&!Sd.startsWith("yaxis"))&&Dl[Sd]){var yd=Vl[Sd].domain,bd=Dl[Sd].domain,Kd=Dl[Sd]._inputDomain;Dl[Sd]._inputDomain&&(yd[0]===Kd[0]&&yd[1]===Kd[1]?Vl[Sd].domain=Dl[Sd].domain:(yd[0]!==bd[0]||yd[1]!==bd[1])&&(Vl[Sd]._inputDomain=null))}var Jd={getValObject:sd,flags:ed,immutable:Mu,transition:Nu,gd:gl};return Dd(Dl,Vl,[],Jd),(ed.plot||ed.calc)&&(ed.layoutReplot=!0),Nu&&ed.nChanges&&ed.nChangesAnim&&(ed.anim=ed.nChanges===ed.nChangesAnim?"all":"some"),ed}function Dd(gl,Dl,Vl,Mu){var Nu,ed,sd,Sd=Mu.getValObject,yd=Mu.flags,bd=Mu.immutable,Kd=Mu.inArray,Jd=Mu.arrayIndex;function th(){var Lf=Nu.editType;if(Kd&&Lf.indexOf("arraydraw")!==-1){d.pushUnique(yd.arrays[Kd],Jd);return}Z.update(yd,Nu),Lf!=="none"&&yd.nChanges++,Mu.transition&&Nu.anim&&yd.nChangesAnim++,(yu.test(sd)||Vu.test(sd))&&(yd.rangesAltered[Vl[0]]=1),ed==="datarevision"&&(yd.newDataRevision=1)}function Hh(Lf){return Lf.valType==="data_array"||Lf.arrayOk}for(ed in gl){if(yd.calc&&!Mu.transition)return;var sp=gl[ed],xp=Dl[ed],Pp=Vl.concat(ed);if(sd=Pp.join("."),!(ed.charAt(0)==="_"||typeof sp=="function"||sp===xp)){if((ed==="tick0"||ed==="dtick")&&Vl[0]!=="geo"){var Up=Dl.tickmode;if(Up==="auto"||Up==="array"||!Up)continue}if(!(ed==="range"&&Dl.autorange)&&!((ed==="zmin"||ed==="zmax")&&Dl.type==="contourcarpet")&&(Nu=Sd(Pp),!!Nu&&!(Nu._compareAsJSON&&JSON.stringify(sp)===JSON.stringify(xp)))){var fp=Nu.valType,zh,kp=Hh(Nu),qh=Array.isArray(sp),bp=Array.isArray(xp);if(qh&&bp){var wp="_input_"+ed,Sp=gl[wp],mp=Dl[wp];if(Array.isArray(Sp)&&Sp===mp)continue}if(xp===void 0)kp&&qh?yd.calc=!0:th();else if(Nu._isLinkedToArray){var af=[],_f=!1;Kd||(yd.arrays[ed]=af);var Lp=Math.min(sp.length,xp.length),Ef=Math.max(sp.length,xp.length);if(Lp!==Ef)if(Nu.editType==="arraydraw")_f=!0;else{th();continue}for(zh=0;zh<Lp;zh++)Dd(sp[zh],xp[zh],Pp.concat(zh),d.extendFlat({inArray:ed,arrayIndex:zh},Mu));if(_f)for(zh=Lp;zh<Ef;zh++)af.push(zh)}else!fp&&d.isPlainObject(sp)?Dd(sp,xp,Pp,Mu):kp?qh&&bp?(bd&&(yd.calc=!0),(bd||Mu.newDataRevision)&&th()):qh!==bp?yd.calc=!0:th():qh&&bp?(sp.length!==xp.length||String(sp)!==String(xp))&&th():th()}}}for(ed in Dl)if(!(ed in gl||ed.charAt(0)==="_"||typeof Dl[ed]=="function"))if(Nu=Sd(Vl.concat(ed)),Hh(Nu)&&Array.isArray(Dl[ed])){yd.calc=!0;return}else th()}function bh(gl,Dl,Vl){if(gl=d.getGraphDiv(gl),!d.isPlotDiv(gl))throw new Error("This element is not a Plotly plot: "+gl+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Mu=gl._transitionData;Mu._frameQueue||(Mu._frameQueue=[]),Vl=c.supplyAnimationDefaults(Vl);var Nu=Vl.transition,ed=Vl.frame;Mu._frameWaitingCnt===void 0&&(Mu._frameWaitingCnt=0);function sd(bd){return Array.isArray(Nu)?bd>=Nu.length?Nu[0]:Nu[bd]:Nu}function Sd(bd){return Array.isArray(ed)?bd>=ed.length?ed[0]:ed[bd]:ed}function yd(bd,Kd){var Jd=0;return function(){if(bd&&++Jd===Kd)return bd()}}return new Promise(function(bd,Kd){function Jd(){if(Mu._frameQueue.length!==0){for(;Mu._frameQueue.length;){var Lp=Mu._frameQueue.pop();Lp.onInterrupt&&Lp.onInterrupt()}gl.emit("plotly_animationinterrupted",[])}}function th(Lp){if(Lp.length!==0){for(var Ef=0;Ef<Lp.length;Ef++){var Lf;Lp[Ef].type==="byname"?Lf=c.computeFrame(gl,Lp[Ef].name):Lf=Lp[Ef].data;var rg=Sd(Ef),ng=sd(Ef);ng.duration=Math.min(ng.duration,rg.duration);var gf={frame:Lf,name:Lp[Ef].name,frameOpts:rg,transitionOpts:ng};Ef===Lp.length-1&&(gf.onComplete=yd(bd,2),gf.onInterrupt=Kd),Mu._frameQueue.push(gf)}Vl.mode==="immediate"&&(Mu._lastFrameAt=-1/0),Mu._animationRaf||xp()}}function Hh(){gl.emit("plotly_animated"),window.cancelAnimationFrame(Mu._animationRaf),Mu._animationRaf=null}function sp(){Mu._currentFrame&&Mu._currentFrame.onComplete&&Mu._currentFrame.onComplete();var Lp=Mu._currentFrame=Mu._frameQueue.shift();if(Lp){var Ef=Lp.name?Lp.name.toString():null;gl._fullLayout._currentFrame=Ef,Mu._lastFrameAt=Date.now(),Mu._timeToNext=Lp.frameOpts.duration,c.transition(gl,Lp.frame.data,Lp.frame.layout,L.coerceTraceIndices(gl,Lp.frame.traces),Lp.frameOpts,Lp.transitionOpts).then(function(){Lp.onComplete&&Lp.onComplete()}),gl.emit("plotly_animatingframe",{name:Ef,frame:Lp.frame,animation:{frame:Lp.frameOpts,transition:Lp.transitionOpts}})}else Hh()}function xp(){gl.emit("plotly_animating"),Mu._lastFrameAt=-1/0,Mu._timeToNext=0,Mu._runningTransitions=0,Mu._currentFrame=null;var Lp=function(){Mu._animationRaf=window.requestAnimationFrame(Lp),Date.now()-Mu._lastFrameAt>Mu._timeToNext&&sp()};Lp()}var Pp=0;function Up(Lp){return Array.isArray(Nu)?Pp>=Nu.length?Lp.transitionOpts=Nu[Pp]:Lp.transitionOpts=Nu[0]:Lp.transitionOpts=Nu,Pp++,Lp}var fp,zh,kp=[],qh=Dl==null,bp=Array.isArray(Dl),wp=!qh&&!bp&&d.isPlainObject(Dl);if(wp)kp.push({type:"object",data:Up(d.extendFlat({},Dl))});else if(qh||["string","number"].indexOf(typeof Dl)!==-1)for(fp=0;fp<Mu._frames.length;fp++)zh=Mu._frames[fp],zh&&(qh||String(zh.group)===String(Dl))&&kp.push({type:"byname",name:String(zh.name),data:Up({name:zh.name})});else if(bp)for(fp=0;fp<Dl.length;fp++){var Sp=Dl[fp];["number","string"].indexOf(typeof Sp)!==-1?(Sp=String(Sp),kp.push({type:"byname",name:Sp,data:Up({name:Sp})})):d.isPlainObject(Sp)&&kp.push({type:"object",data:Up(d.extendFlat({},Sp))})}for(fp=0;fp<kp.length;fp++)if(zh=kp[fp],zh.type==="byname"&&!Mu._frameHash[zh.data.name]){d.warn('animate failure: frame not found: "'+zh.data.name+'"'),Kd();return}["next","immediate"].indexOf(Vl.mode)!==-1&&Jd(),Vl.direction==="reverse"&&kp.reverse();var mp=gl._fullLayout._currentFrame;if(mp&&Vl.fromcurrent){var af=-1;for(fp=0;fp<kp.length;fp++)if(zh=kp[fp],zh.type==="byname"&&zh.name===mp){af=fp;break}if(af>0&&af<kp.length-1){var _f=[];for(fp=0;fp<kp.length;fp++)zh=kp[fp],(kp[fp].type!=="byname"||fp>af)&&_f.push(zh);kp=_f}}kp.length>0?th(kp):(gl.emit("plotly_animated"),bd())})}function Dh(gl,Dl,Vl){if(gl=d.getGraphDiv(gl),Dl==null)return Promise.resolve();if(!d.isPlotDiv(gl))throw new Error("This element is not a Plotly plot: "+gl+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Mu,Nu,ed,sd,Sd=gl._transitionData._frames,yd=gl._transitionData._frameHash;if(!Array.isArray(Dl))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Dl);var bd=Sd.length+Dl.length*2,Kd=[],Jd={};for(Mu=Dl.length-1;Mu>=0;Mu--)if(d.isPlainObject(Dl[Mu])){var th=Dl[Mu].name,Hh=(yd[th]||Jd[th]||{}).name,sp=Dl[Mu].name,xp=yd[Hh]||Jd[Hh];Hh&&sp&&typeof sp=="number"&&xp&&Pe<se&&(Pe++,d.warn('addFrames: overwriting frame "'+(yd[Hh]||Jd[Hh]).name+'" with a frame whose name of type "number" also equates to "'+Hh+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),Pe===se&&d.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Jd[th]={name:th},Kd.push({frame:c.supplyFrameDefaults(Dl[Mu]),index:Vl&&Vl[Mu]!==void 0&&Vl[Mu]!==null?Vl[Mu]:bd+Mu})}Kd.sort(function(wp,Sp){return wp.index>Sp.index?-1:wp.index<Sp.index?1:0});var Pp=[],Up=[],fp=Sd.length;for(Mu=Kd.length-1;Mu>=0;Mu--){if(Nu=Kd[Mu].frame,typeof Nu.name=="number"&&d.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Nu.name)for(;yd[Nu.name="frame "+gl._transitionData._counter++];);if(yd[Nu.name]){for(ed=0;ed<Sd.length&&(Sd[ed]||{}).name!==Nu.name;ed++);Pp.push({type:"replace",index:ed,value:Nu}),Up.unshift({type:"replace",index:ed,value:Sd[ed]})}else sd=Math.max(0,Math.min(Kd[Mu].index,fp)),Pp.push({type:"insert",index:sd,value:Nu}),Up.unshift({type:"delete",index:sd}),fp++}var zh=c.modifyFrames,kp=c.modifyFrames,qh=[gl,Up],bp=[gl,Pp];return y&&y.add(gl,zh,qh,kp,bp),c.modifyFrames(gl,Pp)}function vh(gl,Dl){if(gl=d.getGraphDiv(gl),!d.isPlotDiv(gl))throw new Error("This element is not a Plotly plot: "+gl);var Vl,Mu,Nu=gl._transitionData._frames,ed=[],sd=[];if(!Dl)for(Dl=[],Vl=0;Vl<Nu.length;Vl++)Dl.push(Vl);for(Dl=Dl.slice(),Dl.sort(),Vl=Dl.length-1;Vl>=0;Vl--)Mu=Dl[Vl],ed.push({type:"delete",index:Mu}),sd.unshift({type:"insert",index:Mu,value:Nu[Mu]});var Sd=c.modifyFrames,yd=c.modifyFrames,bd=[gl,sd],Kd=[gl,ed];return y&&y.add(gl,Sd,bd,yd,Kd),c.modifyFrames(gl,ed)}function Gh(gl){gl=d.getGraphDiv(gl);var Dl=gl._fullLayout||{},Vl=gl._fullData||[];return c.cleanPlot([],{},Vl,Dl),c.purge(gl),v.purge(gl),Dl._container&&Dl._container.remove(),delete gl._context,gl}function Ql(gl){var Dl=gl._fullLayout,Vl=gl.getBoundingClientRect();if(!d.equalDomRects(Vl,Dl._lastBBox)){var Mu=Dl._invTransform=d.inverseTransformMatrix(d.getFullTransformMatrix(gl));Dl._invScaleX=Math.sqrt(Mu[0][0]*Mu[0][0]+Mu[0][1]*Mu[0][1]+Mu[0][2]*Mu[0][2]),Dl._invScaleY=Math.sqrt(Mu[1][0]*Mu[1][0]+Mu[1][1]*Mu[1][1]+Mu[1][2]*Mu[1][2]),Dl._lastBBox=Vl}}function Ku(gl){var Dl=Me.select(gl),Vl=gl._fullLayout;if(Vl._calcInverseTransform=Ql,Vl._calcInverseTransform(gl),Vl._container=Dl.selectAll(".plot-container").data([0]),Vl._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),Vl._paperdiv=Vl._container.selectAll(".svg-container").data([0]),Vl._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Vl._glcontainer=Vl._paperdiv.selectAll(".gl-container").data([{}]),Vl._glcontainer.enter().append("div").classed("gl-container",!0),Vl._paperdiv.selectAll(".main-svg").remove(),Vl._paperdiv.select(".modebar-container").remove(),Vl._paper=Vl._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Vl._toppaper=Vl._paperdiv.append("svg").classed("main-svg",!0),Vl._modebardiv=Vl._paperdiv.append("div"),delete Vl._modeBar,Vl._hoverpaper=Vl._paperdiv.append("svg").classed("main-svg",!0),!Vl._uid){var Mu={};Me.selectAll("defs").each(function(){this.id&&(Mu[this.id.split("-")[1]]=1)}),Vl._uid=d.randstr(Mu)}Vl._paperdiv.selectAll(".main-svg").attr(D.svgAttrs),Vl._defs=Vl._paper.append("defs").attr("id","defs-"+Vl._uid),Vl._clips=Vl._defs.append("g").classed("clips",!0),Vl._topdefs=Vl._toppaper.append("defs").attr("id","topdefs-"+Vl._uid),Vl._topclips=Vl._topdefs.append("g").classed("clips",!0),Vl._bgLayer=Vl._paper.append("g").classed("bglayer",!0),Vl._draggers=Vl._paper.append("g").classed("draglayer",!0);var Nu=Vl._paper.append("g").classed("layer-below",!0);Vl._imageLowerLayer=Nu.append("g").classed("imagelayer",!0),Vl._shapeLowerLayer=Nu.append("g").classed("shapelayer",!0),Vl._cartesianlayer=Vl._paper.append("g").classed("cartesianlayer",!0),Vl._polarlayer=Vl._paper.append("g").classed("polarlayer",!0),Vl._smithlayer=Vl._paper.append("g").classed("smithlayer",!0),Vl._ternarylayer=Vl._paper.append("g").classed("ternarylayer",!0),Vl._geolayer=Vl._paper.append("g").classed("geolayer",!0),Vl._funnelarealayer=Vl._paper.append("g").classed("funnelarealayer",!0),Vl._pielayer=Vl._paper.append("g").classed("pielayer",!0),Vl._iciclelayer=Vl._paper.append("g").classed("iciclelayer",!0),Vl._treemaplayer=Vl._paper.append("g").classed("treemaplayer",!0),Vl._sunburstlayer=Vl._paper.append("g").classed("sunburstlayer",!0),Vl._indicatorlayer=Vl._toppaper.append("g").classed("indicatorlayer",!0),Vl._glimages=Vl._paper.append("g").classed("glimages",!0);var ed=Vl._toppaper.append("g").classed("layer-above",!0);Vl._imageUpperLayer=ed.append("g").classed("imagelayer",!0),Vl._shapeUpperLayer=ed.append("g").classed("shapelayer",!0),Vl._selectionLayer=Vl._toppaper.append("g").classed("selectionlayer",!0),Vl._infolayer=Vl._toppaper.append("g").classed("infolayer",!0),Vl._menulayer=Vl._toppaper.append("g").classed("menulayer",!0),Vl._zoomlayer=Vl._toppaper.append("g").classed("zoomlayer",!0),Vl._hoverlayer=Vl._hoverpaper.append("g").classed("hoverlayer",!0),Vl._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),gl.emit("plotly_framework")}ot.animate=bh,ot.addFrames=Dh,ot.deleteFrames=vh,ot.addTraces=il,ot.deleteTraces=X,ot.extendTraces=gu,ot.moveTraces=cl,ot.prependTraces=Bn,ot.newPlot=sl,ot._doPlot=q,ot.purge=Gh,ot.react=$d,ot.redraw=al,ot.relayout=_l,ot.restyle=Sl,ot.setPlotConfig=nt,ot.update=fd,ot._guiRelayout=Kl(_l),ot._guiRestyle=Kl(Sl),ot._guiUpdate=Kl(fd),ot._storeDirectGUIEdit=Ft}),k0=s(ot=>{var Me=ff();ot.getDelay=function(d){return d._has&&(d._has("gl3d")||d._has("mapbox")||d._has("map"))?500:0},ot.getRedrawFunc=function(d){return function(){Me.getComponentMethod("colorbar","draw")(d)}},ot.encodeSVG=function(d){return"data:image/svg+xml,"+encodeURIComponent(d)},ot.encodeJSON=function(d){return"data:application/json,"+encodeURIComponent(d)};var m=window.URL||window.webkitURL;ot.createObjectURL=function(d){return m.createObjectURL(d)},ot.revokeObjectURL=function(d){return m.revokeObjectURL(d)},ot.createBlob=function(d,x){if(x==="svg")return new window.Blob([d],{type:"image/svg+xml;charset=utf-8"});if(x==="full-json")return new window.Blob([d],{type:"application/json;charset=utf-8"});var v=l(window.atob(d));return new window.Blob([v],{type:"image/"+x})},ot.octetStream=function(d){document.location.href="data:application/octet-stream"+d};function l(d){for(var x=d.length,v=new ArrayBuffer(x),y=new Uint8Array(v),w=0;w<x;w++)y[w]=d.charCodeAt(w);return v}ot.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/}),e1=s((ot,Me)=>{var m=$();rt();var l=Qd(),d=oh();Yg();var x=/"/g,v="TOBESTRIPPED",y=new RegExp('("'+v+")|("+v+'")',"g");function w(c){var F=m.select("body").append("div").style({display:"none"}).html(""),b=c.replace(/(&[^;]*;)/gi,function(R){return R==="&lt;"?"&#60;":R==="&rt;"?"&#62;":R.indexOf("<")!==-1||R.indexOf(">")!==-1?"":F.html(R).text()});return F.remove(),b}function S(c){return c.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}Me.exports=function(c,F,b){var R=c._fullLayout,B=R._paper,O=R._toppaper,P=R.width,D=R.height,H;B.insert("rect",":first-child").call(l.setRect,0,0,P,D).call(d.fill,R.paper_bgcolor);var C=R._basePlotModules||[];for(H=0;H<C.length;H++){var A=C[H];A.toSVG&&A.toSVG(c)}if(O){var L=O.node().childNodes,j=Array.prototype.slice.call(L);for(H=0;H<j.length;H++){var Z=j[H];Z.childNodes.length&&B.node().appendChild(Z)}}R._draggers&&R._draggers.remove(),B.node().style.background="",B.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var Pe=m.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){Pe.remove();return}else Pe.style({visibility:null,display:null});var se=this.style.fontFamily;se&&se.indexOf('"')!==-1&&Pe.style("font-family",se.replace(x,v));var q=this.style.fontWeight;q&&(q==="normal"||q==="400")&&Pe.style("font-weight",void 0);var ol=this.style.fontStyle;ol&&ol==="normal"&&Pe.style("font-style",void 0);var nt=this.style.fontVariant;nt&&nt==="normal"&&Pe.style("font-variant",void 0)}),B.selectAll(".gradient_filled,.pattern_filled").each(function(){var Pe=m.select(this),se=this.style.fill;se&&se.indexOf("url(")!==-1&&Pe.style("fill",se.replace(x,v));var q=this.style.stroke;q&&q.indexOf("url(")!==-1&&Pe.style("stroke",q.replace(x,v))}),(F==="pdf"||F==="eps")&&B.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),F==="svg"&&b&&(B.attr("width",b*P),B.attr("height",b*D),B.attr("viewBox","0 0 "+P+" "+D));var nl=new window.XMLSerializer().serializeToString(B.node());return nl=w(nl),nl=S(nl),nl=nl.replace(y,"'"),nl}}),Oy=s((ot,Me)=>{var m=rt(),l=ph().EventEmitter,d=k0();function x(v){var y=v.emitter||new l,w=new Promise(function(S,c){var F=window.Image,b=v.svg,R=v.format||"png",B=v.canvas,O=v.scale||1,P=v.width||300,D=v.height||150,H=O*P,C=O*D,A=B.getContext("2d",{willReadFrequently:!0}),L=new F,j,Z;R==="svg"||m.isSafari()?Z=d.encodeSVG(b):(j=d.createBlob(b,"svg"),Z=d.createObjectURL(j)),B.width=H,B.height=C,L.onload=function(){var nl;switch(j=null,d.revokeObjectURL(Z),R!=="svg"&&A.drawImage(L,0,0,H,C),R){case"jpeg":nl=B.toDataURL("image/jpeg");break;case"png":nl=B.toDataURL("image/png");break;case"webp":nl=B.toDataURL("image/webp");break;case"svg":nl=Z;break;default:var Pe="Image format is not jpeg, png, svg or webp.";if(c(new Error(Pe)),!v.promise)return y.emit("error",Pe)}S(nl),v.promise||y.emit("success",nl)},L.onerror=function(nl){if(j=null,d.revokeObjectURL(Z),c(nl),!v.promise)return y.emit("error",nl)},L.src=Z});return v.promise?w:y}Me.exports=x}),m2=s((ot,Me)=>{var m=zn(),l=g2(),d=Vf(),x=rt(),v=k0(),y=e1(),w=Oy(),S=_().version,c={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function F(b,R){R=R||{};var B,O,P,D;x.isPlainObject(b)?(B=b.data||[],O=b.layout||{},P=b.config||{},D={}):(b=x.getGraphDiv(b),B=x.extendDeep([],b.data),O=x.extendDeep({},b.layout),P=b._context,D=b._fullLayout||{});function H(sl){return!(sl in R)||x.validate(R[sl],c[sl])}if(!H("width")&&R.width!==null||!H("height")&&R.height!==null)throw new Error("Height and width should be pixel values.");if(!H("format"))throw new Error("Export format is not "+x.join2(c.format.values,", "," or ")+".");var C={};function A(sl,ce){return x.coerce(R,C,c,sl,ce)}var L=A("format"),j=A("width"),Z=A("height"),nl=A("scale"),Pe=A("setBackground"),se=A("imageDataOnly"),q=document.createElement("div");q.style.position="absolute",q.style.left="-5000px",document.body.appendChild(q);var ol=x.extendFlat({},O);j?ol.width=j:R.width===null&&m(D.width)&&(ol.width=D.width),Z?ol.height=Z:R.height===null&&m(D.height)&&(ol.height=D.height);var nt=x.extendFlat({},P,{_exportedPlot:!0,staticPlot:!0,setBackground:Pe}),In=v.getRedrawFunc(q);function _t(){return new Promise(function(sl){setTimeout(sl,v.getDelay(q._fullLayout))})}function Fn(){return new Promise(function(sl,ce){var ll=y(q,L,nl),ul=q._fullLayout.width,fl=q._fullLayout.height;function bl(){l.purge(q),document.body.removeChild(q)}if(L==="full-json"){var El=d.graphJson(q,!1,"keepdata","object",!0,!0);return El.version=S,El=JSON.stringify(El),bl(),sl(se?El:v.encodeJSON(El))}if(bl(),L==="svg")return sl(se?ll:v.encodeSVG(ll));var Ul=document.createElement("canvas");Ul.id=x.randstr(),w({format:L,width:ul,height:fl,scale:nl,canvas:Ul,svg:ll,promise:!0}).then(sl).catch(ce)})}function al(sl){return se?sl.replace(v.IMAGE_URL_PREFIX,""):sl}return new Promise(function(sl,ce){l.newPlot(q,B,ol,nt).then(In).then(_t).then(Fn).then(function(ll){sl(al(ll))}).catch(function(ll){ce(ll)})})}Me.exports=F}),lv=s((ot,Me)=>{var m=rt(),l=Vf(),d=of(),x=Cd().dfltConfig,v=m.isPlainObject,y=Array.isArray,w=m.isArrayOrTypedArray;Me.exports=function(C,A){C===void 0&&(C=[]),A===void 0&&(A={});var L=d.get(),j=[],Z={_context:m.extendFlat({},x)},nl,Pe;y(C)?(Z.data=m.extendDeep([],C),nl=C):(Z.data=[],nl=[],j.push(R("array","data"))),v(A)?(Z.layout=m.extendDeep({},A),Pe=A):(Z.layout={},Pe={},arguments.length>1&&j.push(R("object","layout"))),l.supplyDefaults(Z);for(var se=Z._fullData,q=nl.length,ol=0;ol<q;ol++){var nt=nl[ol],In=["data",ol];if(!v(nt)){j.push(R("object",In));continue}var _t=se[ol],Fn=_t.type,al=L.traces[Fn].attributes;al.type={valType:"enumerated",values:[Fn]},_t.visible===!1&&nt.visible!==!1&&j.push(R("invisible",In)),S(nt,_t,al,j,In)}var sl=Z._fullLayout,ce=c(L,se);return S(Pe,sl,ce,j,"layout"),j.length===0?void 0:j};function S(C,A,L,j,Z,nl){nl=nl||[];for(var Pe=Object.keys(C),se=0;se<Pe.length;se++){var q=Pe[se],ol=nl.slice();ol.push(q);var nt=C[q],In=A[q],_t=O(L,q),Fn=(_t||{}).valType,al=Fn==="info_array",sl=Fn==="colorscale",ce=(_t||{}).items;if(!B(L,q))j.push(R("schema",Z,ol));else if(v(nt)&&v(In)&&Fn!=="any")S(nt,In,_t,j,Z,ol);else if(al&&y(nt)){nt.length>In.length&&j.push(R("unused",Z,ol.concat(In.length)));var ll=In.length,ul=Array.isArray(ce);ul&&(ll=Math.min(ll,ce.length));var fl,bl,El,Ul,ql;if(_t.dimensions===2)for(bl=0;bl<ll;bl++)if(y(nt[bl])){nt[bl].length>In[bl].length&&j.push(R("unused",Z,ol.concat(bl,In[bl].length)));var gu=In[bl].length;for(fl=0;fl<(ul?Math.min(gu,ce[bl].length):gu);fl++)El=ul?ce[bl][fl]:ce,Ul=nt[bl][fl],ql=In[bl][fl],m.validate(Ul,El)?ql!==Ul&&ql!==+Ul&&j.push(R("dynamic",Z,ol.concat(bl,fl),Ul,ql)):j.push(R("value",Z,ol.concat(bl,fl),Ul))}else j.push(R("array",Z,ol.concat(bl),nt[bl]));else for(bl=0;bl<ll;bl++)El=ul?ce[bl]:ce,Ul=nt[bl],ql=In[bl],m.validate(Ul,El)?ql!==Ul&&ql!==+Ul&&j.push(R("dynamic",Z,ol.concat(bl),Ul,ql)):j.push(R("value",Z,ol.concat(bl),Ul))}else if(_t.items&&!al&&y(nt)){var Bn=ce[Object.keys(ce)[0]],il=[],X,cl;for(X=0;X<In.length;X++){var Sl=In[X]._index||X;if(cl=ol.slice(),cl.push(Sl),v(nt[Sl])&&v(In[X])){il.push(Sl);var st=nt[Sl],U=In[X];v(st)&&st.visible!==!1&&U.visible===!1?j.push(R("invisible",Z,cl)):S(st,U,Bn,j,Z,cl)}}for(X=0;X<nt.length;X++)cl=ol.slice(),cl.push(X),v(nt[X])?il.indexOf(X)===-1&&j.push(R("unused",Z,cl)):j.push(R("object",Z,cl,nt[X]))}else!v(nt)&&v(In)?j.push(R("object",Z,ol,nt)):!w(nt)&&w(In)&&!al&&!sl?j.push(R("array",Z,ol,nt)):q in A?m.validate(nt,_t)?_t.valType==="enumerated"&&(_t.coerceNumber&&nt!==+In||!w(nt)&&nt!==In||String(nt)!==String(In))&&j.push(R("dynamic",Z,ol,nt,In)):j.push(R("value",Z,ol,nt)):j.push(R("unused",Z,ol,nt))}return j}function c(C,A){for(var L=C.layout.layoutAttributes,j=0;j<A.length;j++){var Z=A[j],nl=C.traces[Z.type],Pe=nl.layoutAttributes;Pe&&(Z.subplot?m.extendFlat(L[nl.attributes.subplot.dflt],Pe):m.extendFlat(L,Pe))}return L}var F={object:function(C,A){var L;return C==="layout"&&A===""?L="The layout argument":C[0]==="data"&&A===""?L="Trace "+C[1]+" in the data argument":L=b(C)+"key "+A,L+" must be linked to an object container"},array:function(C,A){var L;return C==="data"?L="The data argument":L=b(C)+"key "+A,L+" must be linked to an array container"},schema:function(C,A){return b(C)+"key "+A+" is not part of the schema"},unused:function(C,A,L){var j=v(L)?"container":"key";return b(C)+j+" "+A+" did not get coerced"},dynamic:function(C,A,L,j){return[b(C)+"key",A,"(set to '"+L+"')","got reset to","'"+j+"'","during defaults."].join(" ")},invisible:function(C,A){return(A?b(C)+"item "+A:"Trace "+C[1])+" got defaulted to be not visible"},value:function(C,A,L){return[b(C)+"key "+A,"is set to an invalid value ("+L+")"].join(" ")}};function b(C){return y(C)?"In data trace "+C[1]+", ":"In "+C+", "}function R(C,A,L,j,Z){L=L||"";var nl,Pe;y(A)?(nl=A[0],Pe=A[1]):(nl=A,Pe=null);var se=H(L),q=F[C](A,se,j,Z);return m.log(q),{code:C,container:nl,trace:Pe,path:L,astr:se,msg:q}}function B(C,A){var L=D(A),j=L.keyMinusId,Z=L.id;return j in C&&C[j]._isSubplotObj&&Z?!0:A in C}function O(C,A){if(A in C)return C[A];var L=D(A);return C[L.keyMinusId]}var P=m.counterRegex("([a-z]+)");function D(C){var A=C.match(P);return{keyMinusId:A&&A[1],id:A&&A[2]}}function H(C){if(!y(C))return String(C);for(var A="",L=0;L<C.length;L++){var j=C[L];typeof j=="number"?A=A.substr(0,A.length-1)+"["+j+"]":A+=j,L<C.length-1&&(A+=".")}return A}}),$1=s((ot,Me)=>{var m=rt(),l=k0();function d(x,v,y){var w=document.createElement("a"),S="download"in w,c=new Promise(function(F,b){var R,B;if(S)return R=l.createBlob(x,y),B=l.createObjectURL(R),w.href=B,w.download=v,document.body.appendChild(w),w.click(),document.body.removeChild(w),l.revokeObjectURL(B),R=null,F(v);if(m.isSafari()){var O=y==="svg"?",":";base64,";return l.octetStream(O+encodeURIComponent(x)),F(v)}b(new Error("download error"))});return c}Me.exports=d}),v2=s((ot,Me)=>{var m=rt(),l=m2(),d=$1();k0();function x(v,y){var w;return m.isPlainObject(v)||(w=m.getGraphDiv(v)),y=y||{},y.format=y.format||"png",y.width=y.width||null,y.height=y.height||null,y.imageDataOnly=!0,new Promise(function(S,c){w&&w._snapshotInProgress&&c(new Error("Snapshotting already in progress.")),w&&(w._snapshotInProgress=!0);var F=l(v,y),b=y.filename||v.fn||"newplot";b+="."+y.format.replace("-","."),F.then(function(R){return w&&(w._snapshotInProgress=!1),d(R,b,y.format)}).then(function(R){S(R)}).catch(function(R){w&&(w._snapshotInProgress=!1),c(R)})})}Me.exports=x}),q1=s(ot=>{var Me=rt(),m=Me.isPlainObject,l=of(),d=Vf(),x=id(),v=Bp(),y=Cd().dfltConfig;ot.makeTemplate=function(P){P=Me.isPlainObject(P)?P:Me.getGraphDiv(P),P=Me.extendDeep({_context:y},{data:P.data,layout:P.layout}),d.supplyDefaults(P);var D=P.data||[],H=P.layout||{};H._basePlotModules=P._fullLayout._basePlotModules,H._modules=P._fullLayout._modules;var C={data:{},layout:{}};D.forEach(function(nt){var In={};c(nt,In,b.bind(null,nt));var _t=Me.coerce(nt,{},x,"type"),Fn=C.data[_t];Fn||(Fn=C.data[_t]=[]),Fn.push(In)}),c(H,C.layout,F.bind(null,H)),delete C.layout.template;var A=H.template;if(m(A)){var L=A.layout,j,Z,nl,Pe,se,q;m(L)&&w(L,C.layout);var ol=A.data;if(m(ol)){for(Z in C.data)if(nl=ol[Z],Array.isArray(nl)){for(se=C.data[Z],q=se.length,Pe=nl.length,j=0;j<q;j++)w(nl[j%Pe],se[j]);for(j=q;j<Pe;j++)se.push(Me.extendDeep({},nl[j]))}for(Z in ol)Z in C.data||(C.data[Z]=Me.extendDeep([],ol[Z]))}}return C};function w(P,D){P=Me.extendDeep({},P);var H=Object.keys(P).sort(),C,A;function L(se,q,ol){if(m(q)&&m(se))w(se,q);else if(Array.isArray(q)&&Array.isArray(se)){var nt=v.arrayTemplater({_template:P},ol);for(A=0;A<q.length;A++){var In=q[A],_t=nt.newItem(In)._template;_t&&w(_t,In)}var Fn=nt.defaultItems();for(A=0;A<Fn.length;A++)q.push(Fn[A]._template);for(A=0;A<q.length;A++)delete q[A].templateitemname}}for(C=0;C<H.length;C++){var j=H[C],Z=P[j];if(j in D?L(Z,D[j],j):D[j]=Z,S(j)===j)for(var nl in D){var Pe=S(nl);nl!==Pe&&Pe===j&&!(nl in P)&&L(Z,D[nl],j)}}}function S(P){return P.replace(/[0-9]+$/,"")}function c(P,D,H,C,A){var L=A&&H(A);for(var j in P){var Z=P[j],nl=R(P,j,C),Pe=R(P,j,A),se=H(Pe);if(!se){var q=S(j);q!==j&&(Pe=R(P,q,A),se=H(Pe))}if(!(L&&L===se)&&!(!se||se._noTemplating||se.valType==="data_array"||se.arrayOk&&Array.isArray(Z)))if(!se.valType&&m(Z))c(Z,D,H,nl,Pe);else if(se._isLinkedToArray&&Array.isArray(Z))for(var ol=!1,nt=0,In={},_t=0;_t<Z.length;_t++){var Fn=Z[_t];if(m(Fn)){var al=Fn.name;if(al)In[al]||(c(Fn,D,H,R(Z,nt,nl),R(Z,nt,Pe)),nt++,In[al]=1);else if(!ol){var sl=v.arrayDefaultKey(j),ce=R(P,sl,C),ll=R(Z,nt,nl);c(Fn,D,H,ll,R(Z,nt,Pe));var ul=Me.nestedProperty(D,ll),fl=Me.nestedProperty(D,ce);fl.set(ul.get()),ul.set(null),ol=!0}}}else{var bl=Me.nestedProperty(D,nl);bl.set(Z)}}}function F(P,D){return l.getLayoutValObject(P,Me.nestedProperty({},D).parts)}function b(P,D){return l.getTraceValObject(P,Me.nestedProperty({},D).parts)}function R(P,D,H){var C;return H?Array.isArray(P)?C=H+"["+D+"]":C=H+"."+D:C=D,C}ot.validateTemplate=function(P,D){var H=Me.extendDeep({},{_context:y,data:P.data,layout:P.layout}),C=H.layout||{};m(D)||(D=C.template||{});var A=D.layout,L=D.data,j=[];H.layout=C,H.layout.template=D,d.supplyDefaults(H);var Z=H._fullLayout,nl=H._fullData,Pe={};function se(ce,ll){for(var ul in ce)if(ul.charAt(0)!=="_"&&m(ce[ul])){var fl=S(ul),bl=[],El;for(El=0;El<ll.length;El++)bl.push(R(ce,ul,ll[El])),fl!==ul&&bl.push(R(ce,fl,ll[El]));for(El=0;El<bl.length;El++)Pe[bl[El]]=1;se(ce[ul],bl)}}function q(ce,ll){for(var ul in ce)if(ul.indexOf("defaults")===-1&&m(ce[ul])){var fl=R(ce,ul,ll);Pe[fl]?q(ce[ul],fl):j.push({code:"unused",path:fl})}}if(m(A)?(se(Z,["layout"]),q(A,"layout")):j.push({code:"layout"}),!m(L))j.push({code:"data"});else{for(var ol={},nt,In=0;In<nl.length;In++){var _t=nl[In];nt=_t.type,ol[nt]=(ol[nt]||0)+1,_t._fullInput._template||j.push({code:"missing",index:_t.index,traceType:nt})}for(nt in L){var Fn=L[nt].length,al=ol[nt]||0;Fn>al?j.push({code:"unused",traceType:nt,templateCount:Fn,dataCount:al}):al>Fn&&j.push({code:"reused",traceType:nt,templateCount:Fn,dataCount:al})}}function sl(ce,ll){for(var ul in ce)if(ul.charAt(0)!=="_"){var fl=ce[ul],bl=R(ce,ul,ll);m(fl)?(Array.isArray(ce)&&fl._template===!1&&fl.templateitemname&&j.push({code:"missing",path:bl,templateitemname:fl.templateitemname}),sl(fl,bl)):Array.isArray(fl)&&B(fl)&&sl(fl,bl)}}if(sl({data:nl,layout:Z},""),j.length)return j.map(O)};function B(P){for(var D=0;D<P.length;D++)if(m(P[D]))return!0}function O(P){var D;switch(P.code){case"data":D="The template has no key data.";break;case"layout":D="The template has no key layout.";break;case"missing":P.path?D="There are no templates for item "+P.path+" with name "+P.templateitemname:D="There are no templates for trace "+P.index+", of type "+P.traceType+".";break;case"unused":P.path?D="The template item at "+P.path+" was not used in constructing the plot.":P.dataCount?D="Some of the templates of type "+P.traceType+" were not used. The template has "+P.templateCount+" traces, the data only has "+P.dataCount+" of this type.":D="The template has "+P.templateCount+" traces of type "+P.traceType+" but there are none in the data.";break;case"reused":D="Some of the templates of type "+P.traceType+" were used more than once. The template has "+P.templateCount+" traces, the data has "+P.dataCount+" of this type.";break}return P.msg=D,P}}),Q0=s(ot=>{var Me=g2();ot._doPlot=Me._doPlot,ot.newPlot=Me.newPlot,ot.restyle=Me.restyle,ot.relayout=Me.relayout,ot.redraw=Me.redraw,ot.update=Me.update,ot._guiRestyle=Me._guiRestyle,ot._guiRelayout=Me._guiRelayout,ot._guiUpdate=Me._guiUpdate,ot._storeDirectGUIEdit=Me._storeDirectGUIEdit,ot.react=Me.react,ot.extendTraces=Me.extendTraces,ot.prependTraces=Me.prependTraces,ot.addTraces=Me.addTraces,ot.deleteTraces=Me.deleteTraces,ot.moveTraces=Me.moveTraces,ot.purge=Me.purge,ot.addFrames=Me.addFrames,ot.deleteFrames=Me.deleteFrames,ot.animate=Me.animate,ot.setPlotConfig=Me.setPlotConfig;var m=lf().getGraphDiv,l=Bd().eraseActiveShape;ot.deleteActiveShape=function(x){return l(m(x))},ot.toImage=m2(),ot.validate=lv(),ot.downloadImage=v2();var d=q1();ot.makeTemplate=d.makeTemplate,ot.validateTemplate=d.validateTemplate}),p1=s((ot,Me)=>{var m=rt(),l=ff();Me.exports=function(d,x,v,y){var w=y("x"),S=y("y"),c,F=l.getComponentMethod("calendars","handleTraceDefaults");if(F(d,x,["x","y"],v),w){var b=m.minRowLength(w);S?c=Math.min(b,m.minRowLength(S)):(c=b,y("y0"),y("dy"))}else{if(!S)return 0;c=m.minRowLength(S),y("x0"),y("dx")}return x._length=c,c}}),_1=s((ot,Me)=>{var m=rt().dateTick0,l=Et(),d=l.ONEWEEK;function x(v,y){return v%d===0?m(y,1):m(y,0)}Me.exports=function(v,y,w,S,c){if(c||(c={x:!0,y:!0}),c.x){var F=S("xperiod");F&&(S("xperiod0",x(F,y.xcalendar)),S("xperiodalignment"))}if(c.y){var b=S("yperiod");b&&(S("yperiod0",x(b,y.ycalendar)),S("yperiodalignment"))}}}),zy=s((ot,Me)=>{var m=["orientation","groupnorm","stackgaps"];Me.exports=function(l,d,x,v){var y=x._scatterStackOpts,w=v("stackgroup");if(w){var S=d.xaxis+d.yaxis,c=y[S];c||(c=y[S]={});var F=c[w],b=!1;F?F.traces.push(d):(F=c[w]={traceIndices:[],traces:[d]},b=!0);for(var R={orientation:d.x&&!d.y?"h":"v"},B=0;B<m.length;B++){var O=m[B],P=O+"Found";if(!F[P]){var D=l[O]!==void 0,H=O==="orientation";if((D||b)&&(F[O]=v(O,R[O]),H&&(F.fillDflt=F[O]==="h"?"tonextx":"tonexty"),D&&(F[P]=!0,!b&&(delete F.traces[0][O],H))))for(var C=0;C<F.traces.length-1;C++){var A=F.traces[C];A._input.fill!==A.fill&&(A.fill=F.fillDflt)}}}return F}}}),E3=s((ot,Me)=>{var m=oh(),l=If().hasColorscale,d=Xl(),x=Zu();Me.exports=function(v,y,w,S,c,F){var b=x.isBubble(v),R=(v.line||{}).color,B;if(F=F||{},R&&(w=R),c("marker.symbol"),c("marker.opacity",b?.7:1),c("marker.size"),F.noAngle||(c("marker.angle"),F.noAngleRef||c("marker.angleref"),F.noStandOff||c("marker.standoff")),c("marker.color",w),l(v,"marker")&&d(v,y,S,c,{prefix:"marker.",cLetter:"c"}),F.noSelect||(c("selected.marker.color"),c("unselected.marker.color"),c("selected.marker.size"),c("unselected.marker.size")),F.noLine||(R&&!Array.isArray(R)&&y.marker.color!==R?B=R:b?B=m.background:B=m.defaultLine,c("marker.line.color",B),l(v,"marker.line")&&d(v,y,S,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width",b?1:0)),b&&(c("marker.sizeref"),c("marker.sizemin"),c("marker.sizemode")),F.gradient){var O=c("marker.gradient.type");O!=="none"&&c("marker.gradient.color")}}}),E1=s((ot,Me)=>{var m=rt().isArrayOrTypedArray,l=If().hasColorscale,d=Xl();Me.exports=function(x,v,y,w,S,c){c||(c={});var F=(x.marker||{}).color;if(F&&F._inputArray&&(F=F._inputArray),S("line.color",y),l(x,"line"))d(x,v,w,S,{prefix:"line.",cLetter:"c"});else{var b=(m(F)?!1:F)||y;S("line.color",b)}S("line.width"),c.noDash||S("line.dash"),c.backoff&&S("line.backoff")}}),U0=s((ot,Me)=>{Me.exports=function(m,l,d){var x=d("line.shape");x==="spline"&&d("line.smoothing")}}),A1=s((ot,Me)=>{var m=rt();Me.exports=function(l,d,x,v,y){y=y||{},v("textposition"),m.coerceFont(v,"textfont",y.font||x.font,y),y.noSelect||(v("selected.textfont.color"),v("unselected.textfont.color"))}}),y2=s((ot,Me)=>{var m=oh(),l=rt().isArrayOrTypedArray;function d(x){for(var v=m.interpolate(x[0][1],x[1][1],.5),y=2;y<x.length;y++){var w=m.interpolate(x[y-1][1],x[y][1],.5);v=m.interpolate(v,w,x[y-1][0]/x[y][0])}return v}Me.exports=function(x,v,y,w,S){S||(S={});var c=!1;if(v.marker){var F=v.marker.color,b=(v.marker.line||{}).color;F&&!l(F)?c=F:b&&!l(b)&&(c=b)}var R;if(S.moduleHasFillgradient){var B=w("fillgradient.type");if(B!=="none"){w("fillgradient.start"),w("fillgradient.stop");var O=w("fillgradient.colorscale");O&&(R=d(O))}}w("fillcolor",m.addOpacity((v.line||{}).color||c||R||y,.5))}}),t1=s((ot,Me)=>{var m=rt(),l=ff(),d=H0(),x=_v(),v=Zu(),y=p1(),w=_1(),S=zy(),c=E3(),F=E1(),b=U0(),R=A1(),B=y2(),O=rt().coercePattern;Me.exports=function(P,D,H,C){function A(ol,nt){return m.coerce(P,D,d,ol,nt)}var L=y(P,D,C,A);if(L||(D.visible=!1),!!D.visible){w(P,D,C,A),A("xhoverformat"),A("yhoverformat"),A("zorder");var j=S(P,D,C,A);C.scattermode==="group"&&D.orientation===void 0&&A("orientation","v");var Z=!j&&L<x.PTS_LINESONLY?"lines+markers":"lines";A("text"),A("hovertext"),A("mode",Z),v.hasMarkers(D)&&c(P,D,H,C,A,{gradient:!0}),v.hasLines(D)&&(F(P,D,H,C,A,{backoff:!0}),b(P,D,A),A("connectgaps"),A("line.simplify")),v.hasText(D)&&(A("texttemplate"),R(P,D,C,A));var nl=[];(v.hasMarkers(D)||v.hasText(D))&&(A("cliponaxis"),A("marker.maxdisplayed"),nl.push("points")),A("fill",j?j.fillDflt:"none"),D.fill!=="none"&&(B(P,D,H,A,{moduleHasFillgradient:!0}),v.hasLines(D)||b(P,D,A),O(A,"fillpattern",D.fillcolor,!1));var Pe=(D.line||{}).color,se=(D.marker||{}).color;(D.fill==="tonext"||D.fill==="toself")&&nl.push("fills"),A("hoveron",nl.join("+")||"points"),D.hoveron!=="fills"&&A("hovertemplate");var q=l.getComponentMethod("errorbars","supplyDefaults");q(P,D,Pe||se||H,{axis:"y"}),q(P,D,Pe||se||H,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(D,A)}}}),f1=s((ot,Me)=>{var m=Ff().getAxisGroup;Me.exports=function(l,d,x,v,y){var w=d.orientation,S=d[{v:"x",h:"y"}[w]+"axis"],c=m(x,S)+w,F=x._alignmentOpts||{},b=v("alignmentgroup"),R=F[c];R||(R=F[c]={});var B=R[b];B?B.traces.push(d):B=R[b]={traces:[d],alignmentIndex:Object.keys(R).length,offsetGroups:{}};var O=v("offsetgroup")||"",P=B.offsetGroups,D=P[O];d._offsetIndex=0,(y!=="group"||O)&&(D||(D=P[O]={offsetIndex:Object.keys(P).length}),d._offsetIndex=D.offsetIndex)}}),Nv=s((ot,Me)=>{var m=rt(),l=f1(),d=H0();Me.exports=function(x,v){var y,w,S,c=v.scattermode;function F(P){return m.coerce(w._input,w,d,P)}if(v.scattermode==="group")for(S=0;S<x.length;S++)w=x[S],w.type==="scatter"&&(y=w._input,l(y,w,v,F,c));for(S=0;S<x.length;S++){var b=x[S];if(b.type==="scatter"){var R=b.fill;if(!(R==="none"||R==="toself")&&(b.opacity=void 0,R==="tonexty"||R==="tonextx"))for(var B=S-1;B>=0;B--){var O=x[B];if(O.type==="scatter"&&O.xaxis===b.xaxis&&O.yaxis===b.yaxis){O.opacity=void 0;break}}}}}}),Y1=s((ot,Me)=>{var m=rt(),l=Ng();Me.exports=function(d,x){function v(w,S){return m.coerce(d,x,l,w,S)}var y=x.barmode==="group";x.scattermode==="group"&&v("scattergap",y?x.bargap:.2)}}),K1=s((ot,Me)=>{var m=zn(),l=rt(),d=l.dateTime2ms,x=l.incrementMonth,v=Et(),y=v.ONEAVGMONTH;Me.exports=function(w,S,c,F){if(S.type!=="date")return{vals:F};var b=w[c+"periodalignment"];if(!b)return{vals:F};var R=w[c+"period"],B;if(m(R)){if(R=+R,R<=0)return{vals:F}}else if(typeof R=="string"&&R.charAt(0)==="M"){var O=+R.substring(1);if(O>0&&Math.round(O)===O)B=O;else return{vals:F}}for(var P=S.calendar,D=b==="start",H=b==="end",C=w[c+"period0"],A=d(C,P)||0,L=[],j=[],Z=[],nl=F.length,Pe=0;Pe<nl;Pe++){var se=F[Pe],q,ol,nt;if(B){for(q=Math.round((se-A)/(B*y)),nt=x(A,B*q,P);nt>se;)nt=x(nt,-B,P);for(;nt<=se;)nt=x(nt,B,P);ol=x(nt,-B,P)}else{for(q=Math.round((se-A)/R),nt=A+q*R;nt>se;)nt-=R;for(;nt<=se;)nt+=R;ol=nt-R}L[Pe]=D?ol:H?nt:(ol+nt)/2,j[Pe]=ol,Z[Pe]=nt}return{vals:L,starts:j,ends:Z}}}),M1=s((ot,Me)=>{var m=If().hasColorscale,l=Jl(),d=Zu();Me.exports=function(x,v){d.hasLines(v)&&m(v,"line")&&l(x,v,{vals:v.line.color,containerStr:"line",cLetter:"c"}),d.hasMarkers(v)&&(m(v,"marker")&&l(x,v,{vals:v.marker.color,containerStr:"marker",cLetter:"c"}),m(v,"marker.line")&&l(x,v,{vals:v.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}}),Z1=s((ot,Me)=>{var m=rt();Me.exports=function(l,d){for(var x=0;x<l.length;x++)l[x].i=x;m.mergeArray(d.text,l,"tx"),m.mergeArray(d.texttemplate,l,"txt"),m.mergeArray(d.hovertext,l,"htx"),m.mergeArray(d.customdata,l,"data"),m.mergeArray(d.textposition,l,"tp"),d.textfont&&(m.mergeArrayCastPositive(d.textfont.size,l,"ts"),m.mergeArray(d.textfont.color,l,"tc"),m.mergeArray(d.textfont.family,l,"tf"),m.mergeArray(d.textfont.weight,l,"tw"),m.mergeArray(d.textfont.style,l,"ty"),m.mergeArray(d.textfont.variant,l,"tv"),m.mergeArray(d.textfont.textcase,l,"tC"),m.mergeArray(d.textfont.lineposition,l,"tE"),m.mergeArray(d.textfont.shadow,l,"tS"));var v=d.marker;if(v){m.mergeArrayCastPositive(v.size,l,"ms"),m.mergeArrayCastPositive(v.opacity,l,"mo"),m.mergeArray(v.symbol,l,"mx"),m.mergeArray(v.angle,l,"ma"),m.mergeArray(v.standoff,l,"mf"),m.mergeArray(v.color,l,"mc");var y=v.line;v.line&&(m.mergeArray(y.color,l,"mlc"),m.mergeArrayCastPositive(y.width,l,"mlw"));var w=v.gradient;w&&w.type!=="none"&&(m.mergeArray(w.type,l,"mgt"),m.mergeArray(w.color,l,"mgc"))}}}),X1=s((ot,Me)=>{var m=rt();Me.exports=function(l,d){m.isArrayOrTypedArray(d.selectedpoints)&&m.tagSelected(l,d)}}),Q1=s((ot,Me)=>{var m=zn(),l=rt(),d=Ud(),x=K1(),v=Et().BADNUM,y=Zu(),w=M1(),S=Z1(),c=X1();function F(D,H){var C=D._fullLayout,A=H._xA=d.getFromId(D,H.xaxis||"x","x"),L=H._yA=d.getFromId(D,H.yaxis||"y","y"),j=A.makeCalcdata(H,"x"),Z=L.makeCalcdata(H,"y"),nl=x(H,A,"x",j),Pe=x(H,L,"y",Z),se=nl.vals,q=Pe.vals,ol=H._length,nt=new Array(ol),In=H.ids,_t=P(H,C,A,L),Fn=!1,al,sl,ce,ll,ul,fl;B(C,H);var bl="x",El="y",Ul;if(_t)l.pushUnique(_t.traceIndices,H.index),al=_t.orientation==="v",al?(El="s",Ul="x"):(bl="s",Ul="y"),ul=_t.stackgaps==="interpolate";else{var ql=R(H,ol);b(D,H,A,L,se,q,ql)}var gu=!!H.xperiodalignment,Bn=!!H.yperiodalignment;for(sl=0;sl<ol;sl++){var il=nt[sl]={},X=m(se[sl]),cl=m(q[sl]);X&&cl?(il[bl]=se[sl],il[El]=q[sl],gu&&(il.orig_x=j[sl],il.xEnd=nl.ends[sl],il.xStart=nl.starts[sl]),Bn&&(il.orig_y=Z[sl],il.yEnd=Pe.ends[sl],il.yStart=Pe.starts[sl])):_t&&(al?X:cl)?(il[Ul]=al?se[sl]:q[sl],il.gap=!0,ul?(il.s=v,Fn=!0):il.s=0):il[bl]=il[El]=v,In&&(il.id=String(In[sl]))}if(S(nt,H),w(D,H),c(nt,H),_t){for(sl=0;sl<nt.length;)nt[sl][Ul]===v?nt.splice(sl,1):sl++;if(l.sort(nt,function(re,Ft){return re[Ul]-Ft[Ul]||re.i-Ft.i}),Fn){for(sl=0;sl<nt.length-1&&nt[sl].gap;)sl++;for(fl=nt[sl].s,fl||(fl=nt[sl].s=0),ce=0;ce<sl;ce++)nt[ce].s=fl;for(ll=nt.length-1;ll>sl&&nt[ll].gap;)ll--;for(fl=nt[ll].s,ce=nt.length-1;ce>ll;ce--)nt[ce].s=fl;for(;sl<ll;)if(sl++,nt[sl].gap){for(ce=sl+1;nt[ce].gap;)ce++;for(var Sl=nt[sl-1][Ul],st=nt[sl-1].s,U=(nt[ce].s-st)/(nt[ce][Ul]-Sl);sl<ce;)nt[sl].s=st+(nt[sl][Ul]-Sl)*U,sl++}}}return nt}function b(D,H,C,A,L,j,Z){var nl=H._length,Pe=D._fullLayout,se=C._id,q=A._id,ol=Pe._firstScatter[O(H)]===H.uid,nt=(P(H,Pe,C,A)||{}).orientation,In=H.fill;C._minDtick=0,A._minDtick=0;var _t={padded:!0},Fn={padded:!0};Z&&(_t.ppad=Fn.ppad=Z);var al=nl<2||L[0]!==L[nl-1]||j[0]!==j[nl-1];al&&(In==="tozerox"||In==="tonextx"&&(ol||nt==="h"))?_t.tozero=!0:!(H.error_y||{}).visible&&(In==="tonexty"||In==="tozeroy"||!y.hasMarkers(H)&&!y.hasText(H))&&(_t.padded=!1,_t.ppad=0),al&&(In==="tozeroy"||In==="tonexty"&&(ol||nt==="v"))?Fn.tozero=!0:(In==="tonextx"||In==="tozerox")&&(Fn.padded=!1),se&&(H._extremes[se]=d.findExtremes(C,L,_t)),q&&(H._extremes[q]=d.findExtremes(A,j,Fn))}function R(D,H){if(y.hasMarkers(D)){var C=D.marker,A=1.6*(D.marker.sizeref||1),L;if(D.marker.sizemode==="area"?L=function(se){return Math.max(Math.sqrt((se||0)/A),3)}:L=function(se){return Math.max((se||0)/A,3)},l.isArrayOrTypedArray(C.size)){var j={type:"linear"};d.setConvert(j);for(var Z=j.makeCalcdata(D.marker,"size"),nl=new Array(H),Pe=0;Pe<H;Pe++)nl[Pe]=L(Z[Pe]);return nl}else return L(C.size)}}function B(D,H){var C=O(H),A=D._firstScatter;A[C]||(A[C]=H.uid)}function O(D){var H=D.stackgroup;return D.xaxis+D.yaxis+D.type+(H?"-"+H:"")}function P(D,H,C,A){var L=D.stackgroup;if(L){var j=H._scatterStackOpts[C._id+A._id][L],Z=j.orientation==="v"?A:C;if(Z.type==="linear"||Z.type==="log")return j}}Me.exports={calc:F,calcMarkerSize:R,calcAxisExpansion:b,setFirstScatter:B,getStackOpts:P}}),Ny=s((ot,Me)=>{Me.exports=l;var m=rt().distinctVals;function l(d,x){this.traces=d,this.sepNegVal=x.sepNegVal,this.overlapNoMerge=x.overlapNoMerge;for(var v=1/0,y=x.posAxis._id.charAt(0),w=[],S=0;S<d.length;S++){for(var c=d[S],F=0;F<c.length;F++){var b=c[F],R=b.p;R===void 0&&(R=b[y]),R!==void 0&&w.push(R)}c[0]&&c[0].width1&&(v=Math.min(c[0].width1,v))}this.positions=w;var B=m(w);this.distinctPositions=B.vals,B.vals.length===1&&v!==1/0?this.minDiff=v:this.minDiff=Math.min(B.minDiff,v);var O=(x.posAxis||{}).type;(O==="category"||O==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}l.prototype.put=function(d,x,v){var y=this.getLabel(d,x,v),w=this.bins[y]||0;return this.bins[y]=w+v,w},l.prototype.get=function(d,x,v){var y=this.getLabel(d,x,v);return this.bins[y]||0},l.prototype.getLabel=function(d,x,v){var y=v<0&&this.sepNegVal?"v":"^",w=this.overlapNoMerge?d:Math.round(d/this.binWidth);return y+w+"g"+x}}),mv=s((ot,Me)=>{var m=zn(),l=rt().isArrayOrTypedArray,d=Et().BADNUM,x=ff(),v=Ud(),y=Ff().getAxisGroup,w=Ny();function S(nt,In){for(var _t=In.xaxis,Fn=In.yaxis,al=nt._fullLayout,sl=nt._fullData,ce=nt.calcdata,ll=[],ul=[],fl=0;fl<sl.length;fl++){var bl=sl[fl];if(bl.visible===!0&&x.traceIs(bl,"bar")&&bl.xaxis===_t._id&&bl.yaxis===Fn._id&&(bl.orientation==="h"?ll.push(ce[fl]):ul.push(ce[fl]),bl._computePh))for(var El=nt.calcdata[fl],Ul=0;Ul<El.length;Ul++)typeof El[Ul].ph0=="function"&&(El[Ul].ph0=El[Ul].ph0()),typeof El[Ul].ph1=="function"&&(El[Ul].ph1=El[Ul].ph1())}var ql={xCat:_t.type==="category"||_t.type==="multicategory",yCat:Fn.type==="category"||Fn.type==="multicategory",mode:al.barmode,norm:al.barnorm,gap:al.bargap,groupgap:al.bargroupgap};c(nt,_t,Fn,ul,ql),c(nt,Fn,_t,ll,ql)}function c(nt,In,_t,Fn,al){if(Fn.length){var sl,ce,ll,ul,fl;switch(R(_t,Fn),al.mode){case"overlay":B(nt,In,_t,Fn,al);break;case"group":for(sl=[],ce=[],ll=0;ll<Fn.length;ll++)ul=Fn[ll],fl=ul[0].trace,fl.offset===void 0?ce.push(ul):sl.push(ul);ce.length&&O(nt,In,_t,ce,al),sl.length&&B(nt,In,_t,sl,al);break;case"stack":case"relative":for(sl=[],ce=[],ll=0;ll<Fn.length;ll++)ul=Fn[ll],fl=ul[0].trace,fl.base===void 0?ce.push(ul):sl.push(ul);b(ce),ce.length&&P(nt,In,_t,ce,al),sl.length&&B(nt,In,_t,sl,al);break}F(Fn),q(Fn,In)}}function F(nt){var In,_t,Fn,al,sl,ce,ll;for(In=0;In<nt.length;In++)_t=nt[In],Fn=_t[0].trace,al=_t[0].t,al.cornerradiusvalue===void 0&&(sl=Fn.marker?Fn.marker.cornerradius:void 0,sl!==void 0&&(ce=m(sl)?+sl:+sl.slice(0,-1),ll=m(sl)?"px":"%",al.cornerradiusvalue=ce,al.cornerradiusform=ll))}function b(nt){if(!(nt.length<2)){var In,_t,Fn,al,sl,ce,ll;for(In=0;In<nt.length&&(_t=nt[In],Fn=_t[0].trace,sl=Fn.marker?Fn.marker.cornerradius:void 0,sl===void 0);In++);if(sl!==void 0)for(ce=m(sl)?+sl:+sl.slice(0,-1),ll=m(sl)?"px":"%",In=0;In<nt.length;In++)_t=nt[In],al=_t[0].t,al.cornerradiusvalue=ce,al.cornerradiusform=ll}}function R(nt,In){var _t,Fn;for(_t=0;_t<In.length;_t++){var al=In[_t],sl=al[0].trace,ce=sl.type==="funnel"?sl._base:sl.base,ll,ul=sl.orientation==="h"?sl.xcalendar:sl.ycalendar,fl=nt.type==="category"||nt.type==="multicategory"?function(){return null}:nt.d2c;if(l(ce)){for(Fn=0;Fn<Math.min(ce.length,al.length);Fn++)ll=fl(ce[Fn],0,ul),m(ll)?(al[Fn].b=+ll,al[Fn].hasB=1):al[Fn].b=0;for(;Fn<al.length;Fn++)al[Fn].b=0}else{ll=fl(ce,0,ul);var bl=m(ll);for(ll=bl?ll:0,Fn=0;Fn<al.length;Fn++)al[Fn].b=ll,bl&&(al[Fn].hasB=1)}}}function B(nt,In,_t,Fn,al){for(var sl=0;sl<Fn.length;sl++){var ce=Fn[sl],ll=new w([ce],{posAxis:In,sepNegVal:!1,overlapNoMerge:!al.norm});D(nt,In,ll,al),al.norm?(Z(ll),Pe(_t,ll,al)):L(_t,ll)}}function O(nt,In,_t,Fn,al){var sl=new w(Fn,{posAxis:In,sepNegVal:!1,overlapNoMerge:!al.norm});D(nt,In,sl,al),nl(sl,In),al.norm?(Z(sl),Pe(_t,sl,al)):L(_t,sl)}function P(nt,In,_t,Fn,al){var sl=new w(Fn,{posAxis:In,sepNegVal:al.mode==="relative",overlapNoMerge:!(al.norm||al.mode==="stack"||al.mode==="relative")});D(nt,In,sl,al),j(_t,sl,al);for(var ce=0;ce<Fn.length;ce++)for(var ll=Fn[ce],ul=ll[0].t.offsetindex,fl=0;fl<ll.length;fl++){var bl=ll[fl];if(bl.s!==d){var El=bl.b+bl.s===sl.get(bl.p,ul,bl.s);El&&(bl._outmost=!0)}}al.norm&&Pe(_t,sl,al)}function D(nt,In,_t,Fn){var al=nt._fullLayout,sl=_t.positions,ce=_t.distinctPositions,ll=_t.minDiff,ul=_t.traces,fl=ul.length,bl=sl.length!==ce.length,El=ll*(1-Fn.gap),Ul,ql,gu,Bn;if(In._id==="angularaxis")Ul=El,ql=Ul*(1-(Fn.groupgap||0)),gu=-ql/2;else{var il=y(al,In._id)+ul[0][0].trace.orientation;Bn=al._alignmentOpts[il]||{}}for(var X=0;X<fl;X++){var cl=ul[X],Sl=cl[0].trace;if(In._id!=="angularaxis"){var st=Bn[Sl.alignmentgroup]||{},U=Object.keys(st.offsetGroups||{}).length;U?Ul=El/U:Ul=bl?El/fl:El,ql=Ul*(1-(Fn.groupgap||0)),U?gu=((2*Sl._offsetIndex+1-U)*Ul-ql)/2:gu=bl?((2*X+1-fl)*Ul-ql)/2:-ql/2}var re=cl[0].t;re.barwidth=ql,re.offsetindex=Sl._offsetIndex||0,re.poffset=gu,re.bargroupwidth=El,re.bardelta=ll}_t.binWidth=ul[0][0].t.barwidth/100,H(_t),C(In,_t),In._id==="angularaxis"?A(In,_t):A(In,_t,bl)}function H(nt){var In=nt.traces,_t,Fn;for(_t=0;_t<In.length;_t++){var al=In[_t],sl=al[0],ce=sl.trace,ll=sl.t,ul=ce._offset||ce.offset,fl=ll.poffset,bl;if(l(ul)){for(bl=Array.prototype.slice.call(ul,0,al.length),Fn=0;Fn<bl.length;Fn++)m(bl[Fn])||(bl[Fn]=fl);for(Fn=bl.length;Fn<al.length;Fn++)bl.push(fl);ll.poffset=bl}else ul!==void 0&&(ll.poffset=ul);var El=ce._width||ce.width,Ul=ll.barwidth;if(l(El)){var ql=Array.prototype.slice.call(El,0,al.length);for(Fn=0;Fn<ql.length;Fn++)m(ql[Fn])||(ql[Fn]=Ul);for(Fn=ql.length;Fn<al.length;Fn++)ql.push(Ul);if(ll.barwidth=ql,ul===void 0){for(bl=[],Fn=0;Fn<al.length;Fn++)bl.push(fl+(Ul-ql[Fn])/2);ll.poffset=bl}}else El!==void 0&&(ll.barwidth=El,ul===void 0&&(ll.poffset=fl+(Ul-El)/2))}}function C(nt,In){for(var _t=In.traces,Fn=ol(nt),al=0;al<_t.length;al++)for(var sl=_t[al],ce=sl[0].t,ll=ce.poffset,ul=l(ll),fl=ce.barwidth,bl=l(fl),El=0;El<sl.length;El++){var Ul=sl[El],ql=Ul.w=bl?fl[El]:fl;Ul.p===void 0&&(Ul.p=Ul[Fn],Ul["orig_"+Fn]=Ul[Fn]);var gu=(ul?ll[El]:ll)+ql/2;Ul[Fn]=Ul.p+gu}}function A(nt,In,_t){var Fn=In.traces,al=In.minDiff,sl=al/2;v.minDtick(nt,In.minDiff,In.distinctPositions[0],_t);for(var ce=0;ce<Fn.length;ce++){var ll=Fn[ce],ul=ll[0],fl=ul.trace,bl=[],El,Ul,ql,gu;for(gu=0;gu<ll.length;gu++)El=ll[gu],Ul=El.p-sl,ql=El.p+sl,bl.push(Ul,ql);if(fl.width||fl.offset){var Bn=ul.t,il=Bn.poffset,X=Bn.barwidth,cl=l(il),Sl=l(X);for(gu=0;gu<ll.length;gu++){El=ll[gu];var st=cl?il[gu]:il,U=Sl?X[gu]:X;Ul=El.p+st,ql=Ul+U,bl.push(Ul,ql)}}fl._extremes[nt._id]=v.findExtremes(nt,bl,{padded:!1})}}function L(nt,In){for(var _t=In.traces,Fn=ol(nt),al=0;al<_t.length;al++){for(var sl=_t[al],ce=sl[0].trace,ll=ce.type==="scatter",ul=ce.orientation==="v",fl=[],bl=!1,El=0;El<sl.length;El++){var Ul=sl[El],ql=ll?0:Ul.b,gu=ll?ul?Ul.y:Ul.x:ql+Ul.s;Ul[Fn]=gu,fl.push(gu),Ul.hasB&&fl.push(ql),(!Ul.hasB||!Ul.b)&&(bl=!0)}ce._extremes[nt._id]=v.findExtremes(nt,fl,{tozero:bl,padded:!0})}}function j(nt,In,_t){var Fn=ol(nt),al=In.traces,sl,ce,ll,ul,fl,bl,El;for(ul=0;ul<al.length;ul++)if(sl=al[ul],ce=sl[0].trace,ce.type==="funnel")for(El=sl[0].t.offsetindex,fl=0;fl<sl.length;fl++)bl=sl[fl],bl.s!==d&&In.put(bl.p,El,-.5*bl.s);for(ul=0;ul<al.length;ul++){sl=al[ul],ce=sl[0].trace,ll=ce.type==="funnel",El=ce.type==="barpolar"?0:sl[0].t.offsetindex;var Ul=[];for(fl=0;fl<sl.length;fl++)if(bl=sl[fl],bl.s!==d){var ql;ll?ql=bl.s:ql=bl.s+bl.b;var gu=In.put(bl.p,El,ql),Bn=gu+ql;bl.b=gu,bl[Fn]=Bn,_t.norm||(Ul.push(Bn),bl.hasB&&Ul.push(gu))}_t.norm||(ce._extremes[nt._id]=v.findExtremes(nt,Ul,{tozero:!0,padded:!0}))}}function Z(nt){for(var In=nt.traces,_t=0;_t<In.length;_t++)for(var Fn=In[_t],al=Fn[0].t.offsetindex,sl=0;sl<Fn.length;sl++){var ce=Fn[sl];ce.s!==d&&nt.put(ce.p,al,ce.b+ce.s)}}function nl(nt,In){for(var _t=nt.traces,Fn=0;Fn<_t.length;Fn++){var al=_t[Fn],sl=al[0].trace,ce=al[0].t.offsetindex;if(sl.base===void 0)for(var ll=new w([al],{posAxis:In,sepNegVal:!0,overlapNoMerge:!0}),ul=0;ul<al.length;ul++){var fl=al[ul];if(fl.p!==d){var bl=ll.put(fl.p,ce,fl.b+fl.s);bl&&(fl.b=bl)}}}}function Pe(nt,In,_t){var Fn=In.traces,al=ol(nt),sl=_t.norm==="fraction"?1:100,ce=sl/1e9,ll=nt.l2c(nt.c2l(0)),ul=_t.mode==="stack"?sl:ll;function fl(re){return m(nt.c2l(re))&&(re<ll-ce||re>ul+ce||!m(ll))}for(var bl=0;bl<Fn.length;bl++){for(var El=Fn[bl],Ul=El[0].t.offsetindex,ql=El[0].trace,gu=[],Bn=!1,il=!1,X=0;X<El.length;X++){var cl=El[X];if(cl.s!==d){var Sl=Math.abs(sl/In.get(cl.p,Ul,cl.s));cl.b*=Sl,cl.s*=Sl;var st=cl.b,U=st+cl.s;cl[al]=U,gu.push(U),il=il||fl(U),cl.hasB&&(gu.push(st),il=il||fl(st)),(!cl.hasB||!cl.b)&&(Bn=!0)}}ql._extremes[nt._id]=v.findExtremes(nt,gu,{tozero:Bn,padded:il})}}function se(nt,In,_t,Fn){for(var al=ol(Fn),sl=0;sl<nt.length;sl++)for(var ce=nt[sl],ll=0;ll<ce.length;ll++){var ul=ce[ll],fl=ul[al];ul._sMin=In[fl],ul._sMax=_t[fl]}}function q(nt,In){var _t=ol(In),Fn={},al,sl,ce,ll=1/0,ul=-1/0;for(al=0;al<nt.length;al++)for(ce=nt[al],sl=0;sl<ce.length;sl++){var fl=ce[sl].p;m(fl)&&(ll=Math.min(ll,fl),ul=Math.max(ul,fl))}var bl=1e4/(ul-ll),El=Fn.round=function(ls){return String(Math.round(bl*(ls-ll)))},Ul={},ql={},gu=nt.some(function(ls){var _l=ls[0].trace;return"marker"in _l&&_l.marker.cornerradius});for(al=0;al<nt.length;al++){ce=nt[al],ce[0].t.extents=Fn;var Bn=ce[0].t.poffset,il=l(Bn);for(sl=0;sl<ce.length;sl++){var X=ce[sl],cl=X[_t]-X.w/2;if(m(cl)){var Sl=X[_t]+X.w/2,st=El(X.p);Fn[st]?Fn[st]=[Math.min(cl,Fn[st][0]),Math.max(Sl,Fn[st][1])]:Fn[st]=[cl,Sl]}if(X.p0=X.p+(il?Bn[sl]:Bn),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s,gu){var U=Math.min(X.s0,X.s1)||0,re=Math.max(X.s0,X.s1)||0,Ft=X[_t];Ul[Ft]=Ft in Ul?Math.min(Ul[Ft],U):U,ql[Ft]=Ft in ql?Math.max(ql[Ft],re):re}}}gu&&se(nt,Ul,ql,In)}function ol(nt){return nt._id.charAt(0)}Me.exports={crossTraceCalc:S,setGroupPositions:c}}),x2=s((ot,Me)=>{var m=Q1(),l=mv().setGroupPositions;function d(y,w){for(var S=w.xaxis,c=w.yaxis,F=y._fullLayout,b=y._fullData,R=y.calcdata,B=[],O=[],P=0;P<b.length;P++){var D=b[P];D.visible===!0&&D.type==="scatter"&&D.xaxis===S._id&&D.yaxis===c._id&&(D.orientation==="h"?B.push(R[P]):D.orientation==="v"&&O.push(R[P]))}var H={mode:F.scattermode,gap:F.scattergap};l(y,S,c,O,H),l(y,c,S,B,H)}Me.exports=function(y,w){y._fullLayout.scattermode==="group"&&d(y,w);var S=w.xaxis,c=w.yaxis,F=S._id+c._id,b=y._fullLayout._scatterStackOpts[F];if(b){var R=y.calcdata,B,O,P,D,H,C,A,L,j,Z,nl,Pe,se,q,ol;for(var nt in b){Z=b[nt];var In=Z.traceIndices;if(In.length){for(nl=Z.stackgaps==="interpolate",Pe=Z.groupnorm,Z.orientation==="v"?(se="x",q="y"):(se="y",q="x"),ol=new Array(In.length),B=0;B<ol.length;B++)ol[B]=!1;C=R[In[0]];var _t=new Array(C.length);for(B=0;B<C.length;B++)_t[B]=C[B][se];for(B=1;B<In.length;B++){for(H=R[In[B]],O=P=0;O<H.length;O++){for(A=H[O][se];A>_t[P]&&P<_t.length;P++)x(H,O,_t[P],B,ol,nl,se),O++;if(A!==_t[P]){for(D=0;D<B;D++)x(R[In[D]],P,A,D,ol,nl,se);_t.splice(P,0,A)}P++}for(;P<_t.length;P++)x(H,O,_t[P],B,ol,nl,se),O++}var Fn=_t.length;for(O=0;O<C.length;O++){for(L=C[O][q]=C[O].s,B=1;B<In.length;B++)H=R[In[B]],H[0].trace._rawLength=H[0].trace._length,H[0].trace._length=Fn,L+=H[O].s,H[O][q]=L;if(Pe)for(j=(Pe==="fraction"?L:L/100)||1,B=0;B<In.length;B++){var al=R[In[B]][O];al[q]/=j,al.sNorm=al.s/j}}for(B=0;B<In.length;B++){H=R[In[B]];var sl=H[0].trace,ce=m.calcMarkerSize(sl,sl._rawLength),ll=Array.isArray(ce);if(ce&&ol[B]||ll){var ul=ce;for(ce=new Array(Fn),O=0;O<Fn;O++)ce[O]=H[O].gap?0:ll?ul[H[O].i]:ul}var fl=new Array(Fn),bl=new Array(Fn);for(O=0;O<Fn;O++)fl[O]=H[O].x,bl[O]=H[O].y;m.calcAxisExpansion(y,sl,S,c,fl,bl,ce),H[0].t.orientation=Z.orientation}}}}};function x(y,w,S,c,F,b,R){F[c]=!0;var B={i:null,gap:!0,s:0};if(B[R]=S,y.splice(w,0,B),w&&S===y[w-1][R]){var O=y[w-1];B.s=O.s,B.i=O.i,B.gap=O.gap}else b&&(B.s=v(y,w,S,R));w||(y[0].t=y[1].t,y[0].trace=y[1].trace,delete y[1].t,delete y[1].trace)}function v(y,w,S,c){var F=y[w-1],b=y[w+1];return b?F?F.s+(b.s-F.s)*(S-F[c])/(b[c]-F[c]):b.s:F.s}}),r1=s((ot,Me)=>{var m=Qd(),l=Et(),d=l.BADNUM,x=l.LOG_CLIP,v=x+.5,y=x-.5,w=rt(),S=w.segmentsIntersect,c=w.constrain,F=_v();Me.exports=function(b,R){var B=R.trace||{},O=R.xaxis,P=R.yaxis,D=O.type==="log",H=P.type==="log",C=O._length,A=P._length,L=R.backoff,j=B.marker,Z=R.connectGaps,nl=R.baseTolerance,Pe=R.shape,se=Pe==="linear",q=B.fill&&B.fill!=="none",ol=[],nt=F.minTolerance,In=b.length,_t=new Array(In),Fn=0,al,sl,ce,ll,ul,fl,bl,El,Ul,ql,gu,Bn,il,X,cl,Sl;function st(sd){var Sd=b[sd];if(!Sd)return!1;var yd=R.linearized?O.l2p(Sd.x):O.c2p(Sd.x),bd=R.linearized?P.l2p(Sd.y):P.c2p(Sd.y);if(yd===d){if(D&&(yd=O.c2p(Sd.x,!0)),yd===d)return!1;H&&bd===d&&(yd*=Math.abs(O._m*A*(O._m>0?v:y)/(P._m*C*(P._m>0?v:y)))),yd*=1e3}if(bd===d){if(H&&(bd=P.c2p(Sd.y,!0)),bd===d)return!1;bd*=1e3}return[yd,bd]}function U(sd,Sd,yd,bd){var Kd=yd-sd,Jd=bd-Sd,th=.5-sd,Hh=.5-Sd,sp=Kd*Kd+Jd*Jd,xp=Kd*th+Jd*Hh;if(xp>0&&xp<sp){var Pp=th*Jd-Hh*Kd;if(Pp*Pp<sp)return!0}}var re,Ft;function ls(sd,Sd){var yd=sd[0]/C,bd=sd[1]/A,Kd=Math.max(0,-yd,yd-1,-bd,bd-1);return Kd&&re!==void 0&&U(yd,bd,re,Ft)&&(Kd=0),Kd&&Sd&&U(yd,bd,Sd[0]/C,Sd[1]/A)&&(Kd=0),(1+F.toleranceGrowth*Kd)*nl}function _l(sd,Sd){var yd=sd[0]-Sd[0],bd=sd[1]-Sd[1];return Math.sqrt(yd*yd+bd*bd)}var Ll=F.maxScreensAway,zl=-C*Ll,yu=C*(1+Ll),Vu=-A*Ll,od=A*(1+Ll),Ad=[[zl,Vu,yu,Vu],[yu,Vu,yu,od],[yu,od,zl,od],[zl,od,zl,Vu]],vd,fd,Kl,vu,Rl,Wu;function cd(sd,Sd){for(var yd=[],bd=0,Kd=0;Kd<4;Kd++){var Jd=Ad[Kd],th=S(sd[0],sd[1],Sd[0],Sd[1],Jd[0],Jd[1],Jd[2],Jd[3]);th&&(!bd||Math.abs(th.x-yd[0][0])>1||Math.abs(th.y-yd[0][1])>1)&&(th=[th.x,th.y],bd&&_l(th,sd)<_l(yd[0],sd)?yd.unshift(th):yd.push(th),bd++)}return yd}function xd(sd){if(sd[0]<zl||sd[0]>yu||sd[1]<Vu||sd[1]>od)return[c(sd[0],zl,yu),c(sd[1],Vu,od)]}function Td(sd,Sd){if(sd[0]===Sd[0]&&(sd[0]===zl||sd[0]===yu)||sd[1]===Sd[1]&&(sd[1]===Vu||sd[1]===od))return!0}function Pd(sd,Sd){var yd=[],bd=xd(sd),Kd=xd(Sd);return bd&&Kd&&Td(bd,Kd)||(bd&&yd.push(bd),Kd&&yd.push(Kd)),yd}function Hd(sd,Sd,yd){return function(bd,Kd){var Jd=xd(bd),th=xd(Kd),Hh=[];if(Jd&&th&&Td(Jd,th))return Hh;Jd&&Hh.push(Jd),th&&Hh.push(th);var sp=2*w.constrain((bd[sd]+Kd[sd])/2,Sd,yd)-((Jd||bd)[sd]+(th||Kd)[sd]);if(sp){var xp;Jd&&th?xp=sp>0==Jd[sd]>th[sd]?Jd:th:xp=Jd||th,xp[sd]+=sp}return Hh}}var $d;Pe==="linear"||Pe==="spline"?$d=cd:Pe==="hv"||Pe==="vh"?$d=Pd:Pe==="hvh"?$d=Hd(0,zl,yu):Pe==="vhv"&&($d=Hd(1,Vu,od));function Wd(sd,Sd){var yd=Sd[0]-sd[0],bd=(Sd[1]-sd[1])/yd,Kd=(sd[1]*Sd[0]-Sd[1]*sd[0])/yd;return Kd>0?[bd>0?zl:yu,od]:[bd>0?yu:zl,Vu]}function mh(sd){var Sd=sd[0],yd=sd[1],bd=Sd===_t[Fn-1][0],Kd=yd===_t[Fn-1][1];if(!(bd&&Kd))if(Fn>1){var Jd=Sd===_t[Fn-2][0],th=yd===_t[Fn-2][1];bd&&(Sd===zl||Sd===yu)&&Jd?th?Fn--:_t[Fn-1]=sd:Kd&&(yd===Vu||yd===od)&&th?Jd?Fn--:_t[Fn-1]=sd:_t[Fn++]=sd}else _t[Fn++]=sd}function Dd(sd){_t[Fn-1][0]!==sd[0]&&_t[Fn-1][1]!==sd[1]&&mh([Kl,vu]),mh(sd),Rl=null,Kl=vu=0}var bh=w.isArrayOrTypedArray(j);function Dh(sd){if(sd&&L&&(sd.i=al,sd.d=b,sd.trace=B,sd.marker=bh?j[sd.i]:j,sd.backoff=L),re=sd[0]/C,Ft=sd[1]/A,vd=sd[0]<zl?zl:sd[0]>yu?yu:0,fd=sd[1]<Vu?Vu:sd[1]>od?od:0,vd||fd){if(!Fn)_t[Fn++]=[vd||sd[0],fd||sd[1]];else if(Rl){var Sd=$d(Rl,sd);Sd.length>1&&(Dd(Sd[0]),_t[Fn++]=Sd[1])}else Wu=$d(_t[Fn-1],sd)[0],_t[Fn++]=Wu;var yd=_t[Fn-1];vd&&fd&&(yd[0]!==vd||yd[1]!==fd)?(Rl&&(Kl!==vd&&vu!==fd?mh(Kl&&vu?Wd(Rl,sd):[Kl||vd,vu||fd]):Kl&&vu&&mh([Kl,vu])),mh([vd,fd])):Kl-vd&&vu-fd&&mh([vd||Kl,fd||vu]),Rl=sd,Kl=vd,vu=fd}else Rl&&Dd($d(Rl,sd)[0]),_t[Fn++]=sd}for(al=0;al<In;al++)if(sl=st(al),!!sl){for(Fn=0,Rl=null,Dh(sl),al++;al<In;al++){if(ll=st(al),!ll){if(Z)continue;break}if(!se||!R.simplify){Dh(ll);continue}var vh=st(al+1);if(ql=_l(ll,sl),!(!(q&&(Fn===0||Fn===In-1))&&ql<ls(ll,vh)*nt)){for(El=[(ll[0]-sl[0])/ql,(ll[1]-sl[1])/ql],ul=sl,gu=ql,Bn=X=cl=0,bl=!1,ce=ll,al++;al<b.length;al++){if(fl=vh,vh=st(al+1),!fl){if(Z)continue;break}if(Ul=[fl[0]-sl[0],fl[1]-sl[1]],Sl=Ul[0]*El[1]-Ul[1]*El[0],X=Math.min(X,Sl),cl=Math.max(cl,Sl),cl-X>ls(fl,vh))break;ce=fl,il=Ul[0]*El[0]+Ul[1]*El[1],il>gu?(gu=il,ll=fl,bl=!1):il<Bn&&(Bn=il,ul=fl,bl=!0)}if(bl?(Dh(ll),ce!==ul&&Dh(ul)):(ul!==sl&&Dh(ul),ce!==ll&&Dh(ll)),Dh(ce),al>=b.length||!fl)break;Dh(fl),sl=fl}}Rl&&mh([Kl||Rl[0],vu||Rl[1]]),ol.push(_t.slice(0,Fn))}var Gh=Pe.slice(Pe.length-1);if(L&&Gh!=="h"&&Gh!=="v"){for(var Ql=!1,Ku=-1,gl=[],Dl=0;Dl<ol.length;Dl++)for(var Vl=0;Vl<ol[Dl].length-1;Vl++){var Mu=ol[Dl][Vl],Nu=ol[Dl][Vl+1],ed=m.applyBackoff(Nu,Mu);(ed[0]!==Nu[0]||ed[1]!==Nu[1])&&(Ql=!0),gl[Ku+1]||(Ku++,gl[Ku]=[Mu,[ed[0],ed[1]]])}return Ql?gl:ol}return ol}}),J1=s((ot,Me)=>{var m={tonextx:1,tonexty:1,tonext:1};Me.exports=function(l,d,x){var v,y,w,S,c,F={},b=!1,R=-1,B=0,O=-1;for(y=0;y<x.length;y++)v=x[y][0].trace,w=v.stackgroup||"",w?w in F?c=F[w]:(c=F[w]=B,B++):v.fill in m&&O>=0?c=O:(c=O=B,B++),c<R&&(b=!0),v._groupIndex=R=c;var P=x.slice();b&&P.sort(function(H,C){var A=H[0].trace,L=C[0].trace;return A._groupIndex-L._groupIndex||A.index-L.index});var D={};for(y=0;y<P.length;y++)v=P[y][0].trace,w=v.stackgroup||"",v.visible===!0?(v._nexttrace=null,v.fill in m&&(S=D[w],v._prevtrace=S||null,S&&(S._nexttrace=v)),v._ownfill=v.fill&&(v.fill.substr(0,6)==="tozero"||v.fill==="toself"||v.fill.substr(0,2)==="to"&&!v._prevtrace),D[w]=v):v._prevtrace=v._nexttrace=v._ownfill=null;return P}}),By=s((ot,Me)=>{var m=$(),l=ff(),d=rt(),x=d.ensureSingle,v=d.identity,y=Qd(),w=Zu(),S=r1(),c=J1(),F=Sg().tester;Me.exports=function(O,P,D,H,C,A){var L,j,Z=!C,nl=!!C&&C.duration>0,Pe=c(O,P,D);if(L=H.selectAll("g.trace").data(Pe,function(q){return q[0].trace.uid}),L.enter().append("g").attr("class",function(q){return"trace scatter trace"+q[0].trace.uid}).style("stroke-miterlimit",2),L.order(),b(O,L,P),nl){A&&(j=A());var se=m.transition().duration(C.duration).ease(C.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()});se.each(function(){H.selectAll("g.trace").each(function(q,ol){R(O,ol,P,q,Pe,this,C)})})}else L.each(function(q,ol){R(O,ol,P,q,Pe,this,C)});Z&&L.exit().remove(),H.selectAll("path:not([d])").remove()};function b(O,P,D){P.each(function(H){var C=x(m.select(this),"g","fills");y.setClipUrl(C,D.layerClipId,O);var A=H[0].trace,L=[];A._ownfill&&L.push("_ownFill"),A._nexttrace&&L.push("_nextFill");var j=C.selectAll("g").data(L,v);j.enter().append("g"),j.exit().each(function(Z){A[Z]=null}).remove(),j.order().each(function(Z){A[Z]=x(m.select(this),"path","js-fill")})})}function R(O,P,D,H,C,A,L){var j=O._context.staticPlot,Z;B(O,P,D,H,C);var nl=!!L&&L.duration>0;function Pe(Dd){return nl?Dd.transition():Dd}var se=D.xaxis,q=D.yaxis,ol=H[0].trace,nt=ol.line,In=m.select(A),_t=x(In,"g","errorbars"),Fn=x(In,"g","lines"),al=x(In,"g","points"),sl=x(In,"g","text");if(l.getComponentMethod("errorbars","plot")(O,_t,D,L),ol.visible!==!0)return;Pe(In).style("opacity",ol.opacity);var ce,ll,ul=ol.fill.charAt(ol.fill.length-1);ul!=="x"&&ul!=="y"&&(ul="");var fl,bl;ul==="y"?(fl=1,bl=q.c2p(0,!0)):ul==="x"&&(fl=0,bl=se.c2p(0,!0)),H[0][D.isRangePlot?"nodeRangePlot3":"node3"]=In;var El="",Ul=[],ql=ol._prevtrace,gu=null,Bn=null;ql&&(El=ql._prevRevpath||"",ll=ql._nextFill,Ul=ql._ownPolygons,gu=ql._fillsegments,Bn=ql._fillElement);var il,X,cl="",Sl="",st,U,re,Ft,ls,_l,Ll=[];ol._polygons=[];var zl=[],yu=[],Vu=d.noop;if(ce=ol._ownFill,w.hasLines(ol)||ol.fill!=="none"){ll&&ll.datum(H),["hv","vh","hvh","vhv"].indexOf(nt.shape)!==-1?(st=y.steps(nt.shape),U=y.steps(nt.shape.split("").reverse().join(""))):nt.shape==="spline"?st=U=function(Dd){var bh=Dd[Dd.length-1];return Dd.length>1&&Dd[0][0]===bh[0]&&Dd[0][1]===bh[1]?y.smoothclosed(Dd.slice(1),nt.smoothing):y.smoothopen(Dd,nt.smoothing)}:st=U=function(Dd){return"M"+Dd.join("L")},re=function(Dd){return U(Dd.reverse())},yu=S(H,{xaxis:se,yaxis:q,trace:ol,connectGaps:ol.connectgaps,baseTolerance:Math.max(nt.width||1,3)/4,shape:nt.shape,backoff:nt.backoff,simplify:nt.simplify,fill:ol.fill}),zl=new Array(yu.length);var od=0;for(Z=0;Z<yu.length;Z++){var Ad,vd=yu[Z];!Ad||!ul?(Ad=vd.slice(),zl[od]=Ad,od++):Ad.push.apply(Ad,vd)}ol._fillElement=null,ol._fillExclusionElement=Bn,ol._fillsegments=zl.slice(0,od),zl=ol._fillsegments,yu.length&&(Ft=yu[0][0].slice(),ls=yu[yu.length-1],_l=ls[ls.length-1].slice()),Vu=function(Dd){return function(bh){if(il=st(bh),X=re(bh),cl?ul?(cl+="L"+il.substr(1),Sl=X+("L"+Sl.substr(1))):(cl+="Z"+il,Sl=X+"Z"+Sl):(cl=il,Sl=X),w.hasLines(ol)){var Dh=m.select(this);if(Dh.datum(H),Dd)Pe(Dh.style("opacity",0).attr("d",il).call(y.lineGroupStyle)).style("opacity",1);else{var vh=Pe(Dh);vh.attr("d",il),y.singleLineStyle(H,vh)}}}}}var fd=Fn.selectAll(".js-line").data(yu);Pe(fd.exit()).style("opacity",0).remove(),fd.each(Vu(!1)),fd.enter().append("path").classed("js-line",!0).style("vector-effect",j?"none":"non-scaling-stroke").call(y.lineGroupStyle).each(Vu(!0)),y.setClipUrl(fd,D.layerClipId,O);function Kl(Dd){Pe(Dd).attr("d","M0,0Z")}var vu=function(){var Dd=new Array(zl.length);for(Z=0;Z<zl.length;Z++)Dd[Z]=F(zl[Z]);return Dd},Rl=function(Dd){var bh,Dh;if(!Dd||Dd.length===0)for(bh=new Array(zl.length),Dh=0;Dh<zl.length;Dh++){var vh=zl[Dh][0].slice(),Gh=zl[Dh][zl[Dh].length-1].slice();vh[fl]=Gh[fl]=bl;var Ql=[Gh,vh],Ku=Ql.concat(zl[Dh]);bh[Dh]=F(Ku)}else{for(bh=new Array(Dd.length-1+zl.length),Dh=0;Dh<Dd.length-1;Dh++)bh[Dh]=F(Dd[Dh]);var gl=Dd[Dd.length-1].slice();for(gl.reverse(),Dh=0;Dh<zl.length;Dh++)bh[Dd.length-1+Dh]=F(zl[Dh].concat(gl))}return bh};yu.length?(ce?(ce.datum(H),Ft&&_l&&(ul?(Ft[fl]=_l[fl]=bl,Pe(ce).attr("d","M"+_l+"L"+Ft+"L"+cl.substr(1)).call(y.singleFillStyle,O),Ll=Rl(null)):(Pe(ce).attr("d",cl+"Z").call(y.singleFillStyle,O),Ll=vu())),ol._polygons=Ll,ol._fillElement=ce):ll&&(ol.fill.substr(0,6)==="tonext"&&cl&&El?(ol.fill==="tonext"?(Pe(ll).attr("d",cl+"Z"+El+"Z").call(y.singleFillStyle,O),Ll=vu(),ol._polygons=Ll.concat(Ul)):(Pe(ll).attr("d",cl+"L"+El.substr(1)+"Z").call(y.singleFillStyle,O),Ll=Rl(gu),ol._polygons=Ll),ol._fillElement=ll):Kl(ll)),ol._prevRevpath=Sl):(ce?Kl(ce):ll&&Kl(ll),ol._prevRevpath=null),ol._ownPolygons=Ll;function Wu(Dd){return Dd.filter(function(bh){return!bh.gap&&bh.vis})}function cd(Dd){return Dd.filter(function(bh){return bh.vis})}function xd(Dd){return Dd.filter(function(bh){return!bh.gap})}function Td(Dd){return Dd.id}function Pd(Dd){if(Dd.ids)return Td}function Hd(){return!1}function $d(Dd,bh,Dh){var vh,Gh,Ql,Ku=Dh[0].trace,gl=w.hasMarkers(Ku),Dl=w.hasText(Ku),Vl=Pd(Ku),Mu=Hd,Nu=Hd;if(gl||Dl){var ed=v,sd=Ku.stackgroup,Sd=sd&&O._fullLayout._scatterStackOpts[se._id+q._id][sd].stackgaps==="infer zero";Ku.marker.maxdisplayed||Ku._needsCull?ed=Sd?cd:Wu:sd&&!Sd&&(ed=xd),gl&&(Mu=ed),Dl&&(Nu=ed)}Gh=Dd.selectAll("path.point"),vh=Gh.data(Mu,Vl);var yd=vh.enter().append("path").classed("point",!0);nl&&yd.call(y.pointStyle,Ku,O).call(y.translatePoints,se,q).style("opacity",0).transition().style("opacity",1),vh.order();var bd;gl&&(bd=y.makePointStyleFns(Ku)),vh.each(function(Kd){var Jd=m.select(this),th=Pe(Jd);Ql=y.translatePoint(Kd,th,se,q),Ql?(y.singlePointStyle(Kd,th,Ku,bd,O),D.layerClipId&&y.hideOutsideRangePoint(Kd,th,se,q,Ku.xcalendar,Ku.ycalendar),Ku.customdata&&Jd.classed("plotly-customdata",Kd.data!==null&&Kd.data!==void 0)):th.remove()}),nl?vh.exit().transition().style("opacity",0).remove():vh.exit().remove(),Gh=bh.selectAll("g"),vh=Gh.data(Nu,Vl),vh.enter().append("g").classed("textpoint",!0).append("text"),vh.order(),vh.each(function(Kd){var Jd=m.select(this),th=Pe(Jd.select("text"));Ql=y.translatePoint(Kd,th,se,q),Ql?D.layerClipId&&y.hideOutsideRangePoint(Kd,Jd,se,q,Ku.xcalendar,Ku.ycalendar):Jd.remove()}),vh.selectAll("text").call(y.textPointStyle,Ku,O).each(function(Kd){var Jd=se.c2p(Kd.x),th=q.c2p(Kd.y);m.select(this).selectAll("tspan.line").each(function(){Pe(m.select(this)).attr({x:Jd,y:th})})}),vh.exit().remove()}al.datum(H),sl.datum(H),$d(al,sl,H);var Wd=ol.cliponaxis===!1,mh=Wd?null:D.layerClipId;y.setClipUrl(al,mh,O),y.setClipUrl(sl,mh,O)}function B(O,P,D,H,C){var A=D.xaxis,L=D.yaxis,j=m.extent(d.simpleMap(A.range,A.r2c)),Z=m.extent(d.simpleMap(L.range,L.r2c)),nl=H[0].trace;if(w.hasMarkers(nl)){var Pe=nl.marker.maxdisplayed;if(Pe!==0){var se=H.filter(function(In){return In.x>=j[0]&&In.x<=j[1]&&In.y>=Z[0]&&In.y<=Z[1]}),q=Math.ceil(se.length/Pe),ol=0;C.forEach(function(In,_t){var Fn=In[0].trace;w.hasMarkers(Fn)&&Fn.marker.maxdisplayed>0&&_t<P&&ol++});var nt=Math.round(ol*q/3+Math.floor(ol/3)*q/7.1);H.forEach(function(In){delete In.vis}),se.forEach(function(In,_t){Math.round((_t+nt)%q)===0&&(In.vis=!0)})}}}}),Av=s((ot,Me)=>{Me.exports={container:"marker",min:"cmin",max:"cmax"}}),w2=s((ot,Me)=>{var m=Ud();Me.exports=function(l,d,x){var v={},y={_fullLayout:x},w=m.getFromTrace(y,d,"x"),S=m.getFromTrace(y,d,"y"),c=l.orig_x;c===void 0&&(c=l.x);var F=l.orig_y;return F===void 0&&(F=l.y),v.xLabel=m.tickText(w,w.c2l(c),!0).text,v.yLabel=m.tickText(S,S.c2l(F),!0).text,v}}),i1=s((ot,Me)=>{var m=$(),l=Qd(),d=ff();function x(S){var c=m.select(S).selectAll("g.trace.scatter");c.style("opacity",function(F){return F[0].trace.opacity}),c.selectAll("g.points").each(function(F){var b=m.select(this),R=F.trace||F[0].trace;v(b,R,S)}),c.selectAll("g.text").each(function(F){var b=m.select(this),R=F.trace||F[0].trace;y(b,R,S)}),c.selectAll("g.trace path.js-line").call(l.lineGroupStyle),c.selectAll("g.trace path.js-fill").call(l.fillGroupStyle,S,!1),d.getComponentMethod("errorbars","style")(c)}function v(S,c,F){l.pointStyle(S.selectAll("path.point"),c,F)}function y(S,c,F){l.textPointStyle(S.selectAll("text"),c,F)}function w(S,c,F){var b=c[0].trace;b.selectedpoints?(l.selectedPointStyle(F.selectAll("path.point"),b),l.selectedTextStyle(F.selectAll("text"),b)):(v(F,b,S),y(F,b,S))}Me.exports={style:x,stylePoints:v,styleText:y,styleOnSelect:w}}),A3=s((ot,Me)=>{var m=oh(),l=Zu();Me.exports=function(d,x){var v,y;if(d.mode==="lines")return v=d.line.color,v&&m.opacity(v)?v:d.fillcolor;if(d.mode==="none")return d.fill?d.fillcolor:"";var w=x.mcc||(d.marker||{}).color,S=x.mlcc||((d.marker||{}).line||{}).color;return y=w&&m.opacity(w)?w:S&&m.opacity(S)&&(x.mlw||((d.marker||{}).line||{}).width)?S:"",y?m.opacity(y)<.3?m.addOpacity(y,.3):y:(v=(d.line||{}).color,v&&m.opacity(v)&&l.hasLines(d)&&d.line.width?v:d.fillcolor)}}),V2=s((ot,Me)=>{var m=rt(),l=Xf(),d=ff(),x=A3(),v=oh(),y=m.fillText;Me.exports=function(w,S,c,F){var b=w.cd,R=b[0].trace,B=w.xa,O=w.ya,P=B.c2p(S),D=O.c2p(c),H=[P,D],C=R.hoveron||"",A=R.mode.indexOf("markers")!==-1?3:.5,L=!!R.xperiodalignment,j=!!R.yperiodalignment;if(C.indexOf("points")!==-1){var Z=function(El){if(L){var Ul=B.c2p(El.xStart),ql=B.c2p(El.xEnd);return P>=Math.min(Ul,ql)&&P<=Math.max(Ul,ql)?0:1/0}var gu=Math.max(3,El.mrc||0),Bn=1-1/gu,il=Math.abs(B.c2p(El.x)-P);return il<gu?Bn*il/gu:il-gu+Bn},nl=function(El){if(j){var Ul=O.c2p(El.yStart),ql=O.c2p(El.yEnd);return D>=Math.min(Ul,ql)&&D<=Math.max(Ul,ql)?0:1/0}var gu=Math.max(3,El.mrc||0),Bn=1-1/gu,il=Math.abs(O.c2p(El.y)-D);return il<gu?Bn*il/gu:il-gu+Bn},Pe=function(El){var Ul=Math.max(A,El.mrc||0),ql=B.c2p(El.x)-P,gu=O.c2p(El.y)-D;return Math.max(Math.sqrt(ql*ql+gu*gu)-Ul,1-A/Ul)},se=l.getDistanceFunction(F,Z,nl,Pe);if(l.getClosest(b,se,w),w.index!==!1){var q=b[w.index],ol=B.c2p(q.x,!0),nt=O.c2p(q.y,!0),In=q.mrc||1;w.index=q.i;var _t=b[0].t.orientation,Fn=_t&&(q.sNorm||q.s),al=_t==="h"?Fn:q.orig_x!==void 0?q.orig_x:q.x,sl=_t==="v"?Fn:q.orig_y!==void 0?q.orig_y:q.y;return m.extendFlat(w,{color:x(R,q),x0:ol-In,x1:ol+In,xLabelVal:al,y0:nt-In,y1:nt+In,yLabelVal:sl,spikeDistance:Pe(q),hovertemplate:R.hovertemplate}),y(q,R,w),d.getComponentMethod("errorbars","hoverInfo")(q,R,w),[w]}}function ce(El){if(!El)return!1;var Ul=El.node();try{var ql=new DOMPoint(H[0],H[1]);return Ul.isPointInFill(ql)}catch{var gu=Ul.ownerSVGElement.createSVGPoint();return gu.x=H[0],gu.y=H[1],Ul.isPointInFill(gu)}}function ll(El){var Ul,ql=[],gu=1/0,Bn=-1/0,il=1/0,X=-1/0,cl;for(Ul=0;Ul<El.length;Ul++){var Sl=El[Ul];Sl.contains(H)&&(ql.push(Sl),il=Math.min(il,Sl.ymin),X=Math.max(X,Sl.ymax))}if(ql.length===0)return null;il=Math.max(il,0),X=Math.min(X,O._length),cl=(il+X)/2;var st,U,re,Ft,ls,_l,Ll;for(Ul=0;Ul<ql.length;Ul++)for(U=ql[Ul].pts,st=1;st<U.length;st++)_l=U[st-1][1],Ll=U[st][1],_l>cl!=Ll>=cl&&(Ft=U[st-1][0],ls=U[st][0],Ll-_l&&(re=Ft+(ls-Ft)*(cl-_l)/(Ll-_l),gu=Math.min(gu,re),Bn=Math.max(Bn,re)));return gu=Math.max(gu,0),Bn=Math.min(Bn,B._length),{x0:gu,x1:Bn,y0:cl,y1:cl}}if(C.indexOf("fills")!==-1&&R._fillElement){var ul=ce(R._fillElement)&&!ce(R._fillExclusionElement);if(ul){var fl=ll(R._polygons);fl===null&&(fl={x0:H[0],x1:H[0],y0:H[1],y1:H[1]});var bl=v.defaultLine;return v.opacity(R.fillcolor)?bl=R.fillcolor:v.opacity((R.line||{}).color)&&(bl=R.line.color),m.extendFlat(w,{distance:w.maxHoverDistance,x0:fl.x0,x1:fl.x1,y0:fl.y0,y1:fl.y1,color:bl,hovertemplate:!1}),delete w.index,R.text&&!m.isArrayOrTypedArray(R.text)?w.text=String(R.text):w.text=R.name,[w]}}}}),j2=s((ot,Me)=>{var m=Zu();Me.exports=function(l,d){var x=l.cd,v=l.xaxis,y=l.yaxis,w=[],S=x[0].trace,c,F,b,R,B=!m.hasMarkers(S)&&!m.hasText(S);if(B)return[];if(d===!1)for(c=0;c<x.length;c++)x[c].selected=0;else for(c=0;c<x.length;c++)F=x[c],b=v.c2p(F.x),R=y.c2p(F.y),F.i!==null&&d.contains([b,R],!1,c,l)?(w.push({pointNumber:F.i,x:v.c2d(F.x),y:y.c2d(F.y)}),F.selected=1):F.selected=0;return w}}),Qm=s((ot,Me)=>{Me.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}}),Hy=s((ot,Me)=>{var m=ff().traceIs,l=Iu();Me.exports=function(w,S,c,F){c("autotypenumbers",F.autotypenumbersDflt);var b=c("type",(F.splomStash||{}).type);b==="-"&&(d(S,F.data),S.type==="-"?S.type="linear":w.type=S.type)};function d(w,S){if(w.type==="-"){var c=w._id,F=c.charAt(0),b;c.indexOf("scene")!==-1&&(c=F);var R=x(S,c,F);if(R){if(R.type==="histogram"&&F==={v:"y",h:"x"}[R.orientation||"v"]){w.type="linear";return}var B=F+"calendar",O=R[B],P={noMultiCategory:!m(R,"cartesian")||m(R,"noMultiCategory")};if(R.type==="box"&&R._hasPreCompStats&&F==={h:"x",v:"y"}[R.orientation||"v"]&&(P.noMultiCategory=!0),P.autotypenumbers=w.autotypenumbers,y(R,F)){var D=v(R),H=[];for(b=0;b<S.length;b++){var C=S[b];!m(C,"box-violin")||(C[F+"axis"]||F)!==c||(C[D]!==void 0?H.push(C[D][0]):C.name!==void 0?H.push(C.name):H.push("text"),C[B]!==O&&(O=void 0))}w.type=l(H,O,P)}else if(R.type==="splom"){var A=R.dimensions,L=A[R._axesDim[c]];L.visible&&(w.type=l(L.values,O,P))}else w.type=l(R[F]||[R[F+"0"]],O,P)}}}function x(w,S,c){for(var F=0;F<w.length;F++){var b=w[F];if(b.type==="splom"&&b._length>0&&(b["_"+c+"axes"]||{})[S]||(b[c+"axis"]||c)===S&&(y(b,c)||(b[c]||[]).length||b[c+"0"]))return b}}function v(w){return{v:"x",h:"y"}[w.orientation||"v"]}function y(w,S){var c=v(w),F=m(w,"box-violin"),b=m(w._fullInput||{},"candlestick");return F&&!b&&S===c&&w[c]===void 0&&w[c+"0"]===void 0}}),ey=s((ot,Me)=>{var m=Ml().isTypedArraySpec;function l(d,x){var v=x.dataAttr||d._id.charAt(0),y={},w,S,c;if(x.axData)w=x.axData;else for(w=[],S=0;S<x.data.length;S++){var F=x.data[S];F[v+"axis"]===d._id&&w.push(F)}for(S=0;S<w.length;S++){var b=w[S][v];for(c=0;c<b.length;c++){var R=b[c];R!=null&&(y[R]=1)}}return Object.keys(y)}Me.exports=function(d,x,v,y){if(x.type==="category"){var w=d.categoryarray,S=Array.isArray(w)&&w.length>0||m(w),c;S&&(c="array");var F=v("categoryorder",c),b;F==="array"&&(b=v("categoryarray")),!S&&F==="array"&&(F=x.categoryorder="trace"),F==="trace"?x._initialCategories=[]:F==="array"?x._initialCategories=b.slice():(b=l(x,y).sort(),F==="category ascending"?x._initialCategories=b:F==="category descending"&&(x._initialCategories=b.reverse()))}}}),ty=s((ot,Me)=>{var m=$l().mix,l=qd(),d=rt();Me.exports=function(x,v,y,w){w=w||{};var S=w.dfltColor;function c(q,ol){return d.coerce2(x,v,w.attributes,q,ol)}var F=c("linecolor",S),b=c("linewidth"),R=y("showline",w.showLine||!!F||!!b);R||(delete v.linecolor,delete v.linewidth);var B=m(S,w.bgColor,w.blend||l.lightFraction).toRgbString(),O=c("gridcolor",B),P=c("gridwidth"),D=c("griddash"),H=y("showgrid",w.showGrid||!!O||!!P||!!D);if(H||(delete v.gridcolor,delete v.gridwidth,delete v.griddash),w.hasMinor){var C=m(v.gridcolor,w.bgColor,67).toRgbString(),A=c("minor.gridcolor",C),L=c("minor.gridwidth",v.gridwidth||1),j=c("minor.griddash",v.griddash||"solid"),Z=y("minor.showgrid",!!A||!!L||!!j);Z||(delete v.minor.gridcolor,delete v.minor.gridwidth,delete v.minor.griddash)}if(!w.noZeroLine){c("zerolinelayer");var nl=c("zerolinecolor",S),Pe=c("zerolinewidth"),se=y("zeroline",w.showGrid||!!nl||!!Pe);se||(delete v.zerolinelayer,delete v.zerolinecolor,delete v.zerolinewidth)}}}),C2=s((ot,Me)=>{var m=zn(),l=ff(),d=rt(),x=Bp(),v=vl(),y=dd(),w=Ln(),S=Cl(),c=Fl(),F=Ol(),b=ey(),R=ty(),B=Sh(),O=Hl(),P=rf().WEEKDAY_PATTERN,D=rf().HOUR_PATTERN;Me.exports=function(L,j,Z,nl,Pe){var se=nl.letter,q=nl.font||{},ol=nl.splomStash||{},nt=Z("visible",!nl.visibleDflt),In=j._template||{},_t=j.type||In.type||"-",Fn;if(_t==="date"){var al=l.getComponentMethod("calendars","handleDefaults");al(L,j,"calendar",nl.calendar),nl.noTicklabelmode||(Fn=Z("ticklabelmode"))}!nl.noTicklabelindex&&(_t==="date"||_t==="linear")&&Z("ticklabelindex");var sl="";(!nl.noTicklabelposition||_t==="multicategory")&&(sl=d.coerce(L,j,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:Fn==="period"?["outside","inside"]:se==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),nl.noTicklabeloverflow||Z("ticklabeloverflow",sl.indexOf("inside")!==-1?"hide past domain":_t==="category"||_t==="multicategory"?"allow":"hide past div"),O(j,Pe),B(L,j,Z,nl),b(L,j,Z,nl),nl.noHover||(_t!=="category"&&Z("hoverformat"),nl.noUnifiedhovertitle||Z("unifiedhovertitle.text"));var ce=Z("color"),ll=ce!==y.color.dflt?ce:q.color,ul=ol.label||Pe._dfltTitle[se];if(F(L,j,Z,_t,nl),!nt)return j;Z("title.text",ul),d.coerceFont(Z,"title.font",q,{overrideDflt:{size:d.bigFont(q.size),color:ll}}),w(L,j,Z,_t);var fl=nl.hasMinor;if(fl&&(x.newContainer(j,"minor"),w(L,j,Z,_t,{isMinor:!0})),c(L,j,Z,_t,nl),S(L,j,Z,nl),fl){var bl=nl.isMinor;nl.isMinor=!0,S(L,j,Z,nl),nl.isMinor=bl}R(L,j,Z,{dfltColor:ce,bgColor:nl.bgColor,showGrid:nl.showGrid,hasMinor:fl,attributes:y}),fl&&!j.minor.ticks&&!j.minor.showgrid&&delete j.minor,(j.showline||j.ticks)&&Z("mirror");var El=_t==="multicategory";if(!nl.noTickson&&(_t==="category"||El)&&(j.ticks||j.showgrid)&&(El?(Z("tickson","boundaries"),delete j.ticklabelposition):Z("tickson")),El){var Ul=Z("showdividers");Ul&&(Z("dividercolor"),Z("dividerwidth"))}if(_t==="date")if(v(L,j,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:H}),!j.rangebreaks.length)delete j.rangebreaks;else{for(var ql=0;ql<j.rangebreaks.length;ql++)if(j.rangebreaks[ql].pattern===P){j._hasDayOfWeekBreaks=!0;break}if(O(j,Pe),Pe._has("scattergl")||Pe._has("splom"))for(var gu=0;gu<nl.data.length;gu++){var Bn=nl.data[gu];(Bn.type==="scattergl"||Bn.type==="splom")&&(Bn.visible=!1,d.warn(Bn.type+" traces do not work on axes with rangebreaks. Setting trace "+Bn.index+" to `visible: false`."))}}return j};function H(L,j,Z){function nl(al,sl){return d.coerce(L,j,y.rangebreaks,al,sl)}var Pe=nl("enabled");if(Pe){var se=nl("bounds");if(se&&se.length>=2){var q="",ol,nt;if(se.length===2){for(ol=0;ol<2;ol++)if(nt=A(se[ol]),nt){q=P;break}}var In=nl("pattern",q);if(In===P)for(ol=0;ol<2;ol++)nt=A(se[ol]),nt&&(j.bounds[ol]=se[ol]=nt-1);if(In)for(ol=0;ol<2;ol++)switch(nt=se[ol],In){case P:if(!m(nt)){j.enabled=!1;return}if(nt=+nt,nt!==Math.floor(nt)||nt<0||nt>=7){j.enabled=!1;return}j.bounds[ol]=se[ol]=nt;break;case D:if(!m(nt)){j.enabled=!1;return}if(nt=+nt,nt<0||nt>24){j.enabled=!1;return}j.bounds[ol]=se[ol]=nt;break}if(Z.autorange===!1){var _t=Z.range;if(_t[0]<_t[1]){if(se[0]<_t[0]&&se[1]>_t[1]){j.enabled=!1;return}}else if(se[0]>_t[0]&&se[1]<_t[1]){j.enabled=!1;return}}}else{var Fn=nl("values");if(Fn&&Fn.length)nl("dvalue");else{j.enabled=!1;return}}}}var C={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function A(L){if(typeof L=="string")return C[L.substr(0,3).toLowerCase()]}}),ry=s((ot,Me)=>{var m=zn(),l=rt();Me.exports=function(d,x,v,y){var w=y.counterAxes||[],S=y.overlayableAxes||[],c=y.letter,F=y.grid,b=y.overlayingDomain,R,B,O,P,D,H;F&&(B=F._domains[c][F._axisMap[x._id]],R=F._anchors[x._id],B&&(O=F[c+"side"].split(" ")[0],P=F.domain[c][O==="right"||O==="top"?1:0])),B=B||[0,1],R=R||(m(d.position)?"free":w[0]||"free"),O=O||(c==="x"?"bottom":"left"),P=P||0,D=0,H=!1;var C=l.coerce(d,x,{anchor:{valType:"enumerated",values:["free"].concat(w),dflt:R}},"anchor"),A=l.coerce(d,x,{side:{valType:"enumerated",values:c==="x"?["bottom","top"]:["left","right"],dflt:O}},"side");if(C==="free"){if(c==="y"){var L=v("autoshift");L&&(P=A==="left"?b[0]:b[1],H=x.automargin?x.automargin:!0,D=A==="left"?-3:3),v("shift",D)}v("position",P)}v("automargin",H);var j=!1;if(S.length&&(j=l.coerce(d,x,{overlaying:{valType:"enumerated",values:[!1].concat(S),dflt:!1}},"overlaying")),!j){var Z=v("domain",B);Z[0]>Z[1]-1/4096&&(x.domain=B),l.noneOrAll(d.domain,x.domain,B),x.tickmode==="sync"&&(x.tickmode="auto")}return v("layer"),x}}),R1=s((ot,Me)=>{var m=rt(),l=oh(),d=wd().isUnifiedHover,x=tm(),v=Bp(),y=Jg(),w=dd(),S=Hy(),c=C2(),F=Ff(),b=ry(),R=Rh(),B=R.id2name,O=R.name2id,P=rf().AX_ID_PATTERN,D=ff(),H=D.traceIs,C=D.getComponentMethod;function A(L,j,Z){Array.isArray(L[j])?L[j].push(Z):L[j]=[Z]}Me.exports=function(L,j,Z){var nl=j.autotypenumbers,Pe={},se={},q={},ol={},nt={},In={},_t={},Fn={},al={},sl={},ce,ll;for(ce=0;ce<Z.length;ce++){var ul=Z[ce];if(H(ul,"cartesian")){var fl;if(ul.xaxis)fl=B(ul.xaxis),A(Pe,fl,ul);else if(ul.xaxes)for(ll=0;ll<ul.xaxes.length;ll++)A(Pe,B(ul.xaxes[ll]),ul);var bl;if(ul.yaxis)bl=B(ul.yaxis),A(Pe,bl,ul);else if(ul.yaxes)for(ll=0;ll<ul.yaxes.length;ll++)A(Pe,B(ul.yaxes[ll]),ul);if(ul.type==="funnel"?ul.orientation==="h"?(fl&&(se[fl]=!0),bl&&(_t[bl]=!0)):bl&&(q[bl]=!0):ul.type==="image"?(bl&&(Fn[bl]=!0),fl&&(Fn[fl]=!0)):(bl&&(nt[bl]=!0,In[bl]=!0),(!H(ul,"carpet")||ul.type==="carpet"&&!ul._cheater)&&fl&&(ol[fl]=!0)),ul.type==="carpet"&&ul._cheater&&fl&&(se[fl]=!0),H(ul,"2dMap")&&(al[fl]=!0,al[bl]=!0),H(ul,"oriented")){var El=ul.orientation==="h"?bl:fl;sl[El]=!0}}}var Ul=j._subplots,ql=Ul.xaxis,gu=Ul.yaxis,Bn=m.simpleMap(ql,B),il=m.simpleMap(gu,B),X=Bn.concat(il),cl=l.background;ql.length&&gu.length&&(cl=m.coerce(L,j,y,"plot_bgcolor"));var Sl=l.combine(cl,j.paper_bgcolor),st,U,re,Ft,ls;function _l(){var Vl=Pe[st]||[];ls._traceIndices=Vl.map(function(Mu){return Mu.index}),ls._annIndices=[],ls._shapeIndices=[],ls._selectionIndices=[],ls._imgIndices=[],ls._subplotsWith=[],ls._counterAxes=[],ls._name=ls._attr=st,ls._id=U}function Ll(Vl,Mu){return m.coerce(Ft,ls,w,Vl,Mu)}function zl(Vl,Mu){return m.coerce2(Ft,ls,w,Vl,Mu)}function yu(Vl){return Vl==="x"?gu:ql}function Vu(Vl,Mu){for(var Nu=Vl==="x"?Bn:il,ed=[],sd=0;sd<Nu.length;sd++){var Sd=Nu[sd];Sd!==Mu&&!(L[Sd]||{}).overlaying&&ed.push(O(Sd))}return ed}var od={x:yu("x"),y:yu("y")},Ad=od.x.concat(od.y),vd={},fd=[];function Kl(){var Vl=Ft.matches;P.test(Vl)&&Ad.indexOf(Vl)===-1&&(vd[Vl]=Ft.type,fd=Object.keys(vd))}var vu=x(L,j),Rl=d(vu);for(ce=0;ce<X.length;ce++){st=X[ce],U=O(st),re=st.charAt(0),m.isPlainObject(L[st])||(L[st]={}),Ft=L[st],ls=v.newContainer(j,st,re+"axis"),_l();var Wu=re==="x"&&!ol[st]&&se[st]||re==="y"&&!nt[st]&&q[st],cd=re==="y"&&(!In[st]&&_t[st]||Fn[st]),xd={hasMinor:!0,letter:re,font:j.font,outerTicks:al[st],showGrid:!sl[st],data:Pe[st]||[],bgColor:Sl,calendar:j.calendar,automargin:!0,visibleDflt:Wu,reverseDflt:cd,autotypenumbersDflt:nl,splomStash:((j._splomAxes||{})[re]||{})[U],noAutotickangles:re==="y"};Ll("uirevision",j.uirevision),S(Ft,ls,Ll,xd),c(Ft,ls,Ll,xd,j);var Td=Rl&&re===vu.charAt(0),Pd=zl("spikecolor",Rl?ls.color:void 0),Hd=zl("spikethickness",Rl?1.5:void 0),$d=zl("spikedash",Rl?"dot":void 0),Wd=zl("spikemode",Rl?"across":void 0),mh=zl("spikesnap"),Dd=Ll("showspikes",!!Td||!!Pd||!!Hd||!!$d||!!Wd||!!mh);Dd||(delete ls.spikecolor,delete ls.spikethickness,delete ls.spikedash,delete ls.spikemode,delete ls.spikesnap);var bh=B(Ft.overlaying),Dh=[0,1];if(j[bh]!==void 0){var vh=B(j[bh].anchor);j[vh]!==void 0&&(Dh=j[vh].domain)}b(Ft,ls,Ll,{letter:re,counterAxes:od[re],overlayableAxes:Vu(re,st),grid:j.grid,overlayingDomain:Dh}),Ll("title.standoff"),Kl(),ls._input=Ft}for(ce=0;ce<fd.length;){U=fd[ce++],st=B(U),re=st.charAt(0),m.isPlainObject(L[st])||(L[st]={}),Ft=L[st],ls=v.newContainer(j,st,re+"axis"),_l();var Gh={letter:re,font:j.font,outerTicks:al[st],showGrid:!sl[st],data:[],bgColor:Sl,calendar:j.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:nl,splomStash:((j._splomAxes||{})[re]||{})[U]};Ll("uirevision",j.uirevision),ls.type=vd[U]||"linear",c(Ft,ls,Ll,Gh,j),b(Ft,ls,Ll,{letter:re,counterAxes:od[re],overlayableAxes:Vu(re,st),grid:j.grid}),Ll("fixedrange"),Ll("modebardisable"),Kl(),ls._input=Ft}var Ql=C("rangeslider","handleDefaults"),Ku=C("rangeselector","handleDefaults");for(ce=0;ce<Bn.length;ce++)st=Bn[ce],Ft=L[st],ls=j[st],Ql(L,j,st),ls.type==="date"&&Ku(Ft,ls,j,il,ls.calendar),Ll("fixedrange"),Ll("modebardisable");for(ce=0;ce<il.length;ce++){st=il[ce],Ft=L[st],ls=j[st];var gl=j[B(ls.anchor)],Dl=C("rangeslider","isVisible")(gl);Ll("fixedrange",Dl),Ll("modebardisable")}F.handleDefaults(L,j,{axIds:Ad.concat(fd).sort(R.idSort),axHasImage:Fn})}}),iy=s((ot,Me)=>{var m=$(),l=ff(),d=rt(),x=Qd(),v=Ud();Me.exports=function(y,w,S,c){var F=y._fullLayout;if(w.length===0){v.redrawComponents(y);return}function b(j){var Z=j.xaxis,nl=j.yaxis;F._defs.select("#"+j.clipId+"> rect").call(x.setTranslate,0,0).call(x.setScale,1,1),j.plot.call(x.setTranslate,Z._offset,nl._offset).call(x.setScale,1,1);var Pe=j.plot.selectAll(".scatterlayer .trace");Pe.selectAll(".point").call(x.setPointGroupScale,1,1),Pe.selectAll(".textpoint").call(x.setTextPointsScale,1,1),Pe.call(x.hideOutsideRangePoints,j)}function R(j,Z){var nl=j.plotinfo,Pe=nl.xaxis,se=nl.yaxis,q=Pe._length,ol=se._length,nt=!!j.xr1,In=!!j.yr1,_t=[];if(nt){var Fn=d.simpleMap(j.xr0,Pe.r2l),al=d.simpleMap(j.xr1,Pe.r2l),sl=Fn[1]-Fn[0],ce=al[1]-al[0];_t[0]=(Fn[0]*(1-Z)+Z*al[0]-Fn[0])/(Fn[1]-Fn[0])*q,_t[2]=q*(1-Z+Z*ce/sl),Pe.range[0]=Pe.l2r(Fn[0]*(1-Z)+Z*al[0]),Pe.range[1]=Pe.l2r(Fn[1]*(1-Z)+Z*al[1])}else _t[0]=0,_t[2]=q;if(In){var ll=d.simpleMap(j.yr0,se.r2l),ul=d.simpleMap(j.yr1,se.r2l),fl=ll[1]-ll[0],bl=ul[1]-ul[0];_t[1]=(ll[1]*(1-Z)+Z*ul[1]-ll[1])/(ll[0]-ll[1])*ol,_t[3]=ol*(1-Z+Z*bl/fl),se.range[0]=Pe.l2r(ll[0]*(1-Z)+Z*ul[0]),se.range[1]=se.l2r(ll[1]*(1-Z)+Z*ul[1])}else _t[1]=0,_t[3]=ol;v.drawOne(y,Pe,{skipTitle:!0}),v.drawOne(y,se,{skipTitle:!0}),v.redrawComponents(y,[Pe._id,se._id]);var El=nt?q/_t[2]:1,Ul=In?ol/_t[3]:1,ql=nt?_t[0]:0,gu=In?_t[1]:0,Bn=nt?_t[0]/_t[2]*q:0,il=In?_t[1]/_t[3]*ol:0,X=Pe._offset-Bn,cl=se._offset-il;nl.clipRect.call(x.setTranslate,ql,gu).call(x.setScale,1/El,1/Ul),nl.plot.call(x.setTranslate,X,cl).call(x.setScale,El,Ul),x.setPointGroupScale(nl.zoomScalePts,1/El,1/Ul),x.setTextPointsScale(nl.zoomScaleTxt,1/El,1/Ul)}var B;c&&(B=c());function O(){for(var j={},Z=0;Z<w.length;Z++){var nl=w[Z],Pe=nl.plotinfo.xaxis,se=nl.plotinfo.yaxis;nl.xr1&&(j[Pe._name+".range"]=nl.xr1.slice()),nl.yr1&&(j[se._name+".range"]=nl.yr1.slice())}return B&&B(),l.call("relayout",y,j).then(function(){for(var q=0;q<w.length;q++)b(w[q].plotinfo)})}function P(){for(var j={},Z=0;Z<w.length;Z++){var nl=w[Z],Pe=nl.plotinfo.xaxis,se=nl.plotinfo.yaxis;nl.xr0&&(j[Pe._name+".range"]=nl.xr0.slice()),nl.yr0&&(j[se._name+".range"]=nl.yr0.slice())}return l.call("relayout",y,j).then(function(){for(var q=0;q<w.length;q++)b(w[q].plotinfo)})}var D,H,C,A=m.ease(S.easing);y._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(C),C=null,P()});function L(){H=Date.now();for(var j=Math.min(1,(H-D)/S.duration),Z=A(j),nl=0;nl<w.length;nl++)R(w[nl],Z);H-D>S.duration?(O(),C=window.cancelAnimationFrame(L)):C=window.requestAnimationFrame(L)}return D=Date.now(),C=window.requestAnimationFrame(L),Promise.resolve()}}),W0=s(ot=>{var Me=$(),m=ff(),l=rt(),d=Vf(),x=Qd(),v=em().getModuleCalcData,y=Rh(),w=rf(),S=Yg(),c=l.ensureSingle;function F(H,C,A){return l.ensureSingle(H,C,A,function(L){L.datum(A)})}var b=w.zindexSeparator;ot.name="cartesian",ot.attr=["xaxis","yaxis"],ot.idRoot=["x","y"],ot.idRegex=w.idRegex,ot.attrRegex=w.attrRegex,ot.attributes=Qm(),ot.layoutAttributes=dd(),ot.supplyLayoutDefaults=R1(),ot.transitionAxes=iy(),ot.finalizeSubplots=function(H,C){var A=C._subplots,L=A.xaxis,j=A.yaxis,Z=A.cartesian,nl=Z,Pe={},se={},q,ol,nt;for(q=0;q<nl.length;q++){var In=nl[q].split("y");Pe[In[0]]=1,se["y"+In[1]]=1}for(q=0;q<L.length;q++)ol=L[q],Pe[ol]||(nt=(H[y.id2name(ol)]||{}).anchor,w.idRegex.y.test(nt)||(nt="y"),Z.push(ol+nt),nl.push(ol+nt),se[nt]||(se[nt]=1,l.pushUnique(j,nt)));for(q=0;q<j.length;q++)nt=j[q],se[nt]||(ol=(H[y.id2name(nt)]||{}).anchor,w.idRegex.x.test(ol)||(ol="x"),Z.push(ol+nt),nl.push(ol+nt),Pe[ol]||(Pe[ol]=1,l.pushUnique(L,ol)));if(!nl.length){ol="",nt="";for(var _t in H)if(w.attrRegex.test(_t)){var Fn=_t.charAt(0);Fn==="x"?(!ol||+_t.substr(5)<+ol.substr(5))&&(ol=_t):(!nt||+_t.substr(5)<+nt.substr(5))&&(nt=_t)}ol=ol?y.name2id(ol):"x",nt=nt?y.name2id(nt):"y",L.push(ol),j.push(nt),Z.push(ol+nt)}},ot.plot=function(H,C,A,L){var j=H._fullLayout,Z=j._subplots.cartesian,nl=H.calcdata,Pe;if(!Array.isArray(C))for(C=[],Pe=0;Pe<nl.length;Pe++)C.push(Pe);for(var se=j._zindices,q=0;q<se.length;q++){var ol=se[q];for(Pe=0;Pe<Z.length;Pe++){var nt=Z[Pe],In=j._plots[nt];if(q>0){var _t=In.id;if(_t.indexOf(b)!==-1)continue;_t+=b+(q+1),In=l.extendFlat({},In,{id:_t,plot:j._cartesianlayer.selectAll(".subplot").select("."+_t)})}for(var Fn=[],al,sl=0;sl<nl.length;sl++){var ce=nl[sl],ll=ce[0].trace;ol===(ll.zorder||0)&&ll.xaxis+ll.yaxis===nt&&((C.indexOf(ll.index)!==-1||ll.carpet)&&(al&&al[0].trace.xaxis+al[0].trace.yaxis===nt&&["tonextx","tonexty","tonext"].indexOf(ll.fill)!==-1&&Fn.indexOf(al)===-1&&Fn.push(al),Fn.push(ce)),al=ce)}R(H,In,Fn,A,L)}}};function R(H,C,A,L,j){for(var Z=w.traceLayerClasses,nl=H._fullLayout,Pe=nl._zindices,se=nl._modules,q,ol,nt,In=[],_t=[],Fn=0;Fn<Pe.length;Fn++)for(var al=Pe[Fn],sl=0;sl<se.length;sl++){q=se[sl];var ce=q.name,ll=m.modules[ce].categories;if(ll.svg){var ul=q.layerName||ce+"layer",fl=ul+(Fn?Number(Fn)+1:""),bl=q.plot;ol=v(A,bl,al),nt=ol[0],A=ol[1],nt.length&&In.push({i:Z.indexOf(ul),zindex:Fn,className:fl,plotMethod:bl,cdModule:nt}),ll.zoomScale&&_t.push("."+fl)}}In.sort(function(ql,gu){return(ql.zindex||0)-(gu.zindex||0)||ql.i-gu.i});var El=C.plot.selectAll("g.mlayer").data(In,function(ql){return ql.className});if(El.enter().append("g").attr("class",function(ql){return ql.className}).classed("mlayer",!0).classed("rangeplot",C.isRangePlot),El.exit().remove(),El.order(),El.each(function(ql){var gu=Me.select(this),Bn=ql.className;ql.plotMethod(H,C,ql.cdModule,gu,L,j),w.clipOnAxisFalseQuery.indexOf("."+Bn)===-1&&x.setClipUrl(gu,C.layerClipId,H)}),nl._has("scattergl")&&(q=m.getModule("scattergl"),nt=v(A,q)[0],q.plot(H,C,nt)),!H._context.staticPlot&&(C._hasClipOnAxisFalse&&(C.clipOnAxisFalseTraces=C.plot.selectAll(w.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),_t.length)){var Ul=C.plot.selectAll(_t.join(",")).selectAll(".trace");C.zoomScalePts=Ul.selectAll("path.point"),C.zoomScaleTxt=Ul.selectAll(".textpoint")}}ot.clean=function(H,C,A,L){var j=L._plots||{},Z=C._plots||{},nl=L._subplots||{},Pe,se,q;if(L._hasOnlyLargeSploms&&!C._hasOnlyLargeSploms)for(q in j)Pe=j[q],Pe.plotgroup&&Pe.plotgroup.remove();var ol=L._has&&L._has("gl"),nt=C._has&&C._has("gl");if(ol&&!nt)for(q in j)Pe=j[q],Pe._scene&&Pe._scene.destroy();if(nl.xaxis&&nl.yaxis){var In=y.listIds({_fullLayout:L});for(se=0;se<In.length;se++){var _t=In[se];C[y.id2name(_t)]||L._infolayer.selectAll(".g-"+_t+"title").remove()}}var Fn=L._has&&L._has("cartesian"),al=C._has&&C._has("cartesian");if(Fn&&!al)P(L._cartesianlayer.selectAll(".subplot"),L),L._defs.selectAll(".axesclip").remove(),delete L._axisConstraintGroups,delete L._axisMatchGroups;else if(nl.cartesian)for(se=0;se<nl.cartesian.length;se++){var sl=nl.cartesian[se];if(sl.indexOf(b)===-1&&!Z[sl]){var ce="."+sl+",."+sl+"-x,."+sl+"-y";L._cartesianlayer.selectAll(ce).remove(),D(sl,L)}}},ot.drawFramework=function(H){var C=H._fullLayout,A=H.calcdata,L,j={};for(L=0;L<A.length;L++){var Z=A[L][0],nl=Z.trace,Pe=nl.zorder||0;j[Pe]||(j[Pe]=[]),j[Pe].push(Z)}var se=Object.keys(j).map(Number).sort(l.sorterAsc);se.length||(se=[0]),C._zindices=se;var q=B(H),ol=q.length,nt=[];for(L=0;L<ol;L++)nt[L]=q[L].slice();for(var In=1;In<se.length;In++){var _t=[];for(L=0;L<ol;L++)_t[L]=q[L].slice(),_t[L][0]+=b+(In+1);nt=nt.concat(_t)}var Fn=C._cartesianlayer.selectAll(".subplot").data(nt,String);Fn.enter().append("g").attr("class",function(al){return"subplot "+al[0]}),Fn.order(),Fn.exit().call(P,C),Fn.each(function(al){var sl=al[0],ce=sl.indexOf(b),ll=ce!==-1,ul=ll?sl.slice(0,ce):sl,fl=C._plots[sl];fl||(fl=l.extendFlat({},C._plots[ul]),fl&&(fl.id=sl,C._plots[sl]=fl,C._subplots.cartesian.push(sl))),fl&&(fl.plotgroup=Me.select(this),O(H,fl),ll||(fl.draglayer=c(C._draggers,"g",sl)))})},ot.rangePlot=function(H,C,A){O(H,C),R(H,C,A),d.style(H)};function B(H){var C=H._fullLayout,A=C._zindices.length,L=C._subplots.cartesian,j=L.length,Z,nl,Pe,se,q,ol,nt=[],In=[];for(Z=0;Z<j;Z++){Pe=L[Z],se=C._plots[Pe],q=se.xaxis,ol=se.yaxis;var _t=q._mainAxis,Fn=ol._mainAxis,al=_t._id+Fn._id,sl=C._plots[al];se.overlays=[],al!==Pe&&sl?(se.mainplot=al,se.mainplotinfo=sl,In.push(Pe)):(se.mainplot=void 0,se.mainplotinfo=void 0,nt.push(Pe))}for(Z=0;Z<In.length;Z++)Pe=In[Z],se=C._plots[Pe],se.mainplotinfo.overlays.push(se);var ce=nt.concat(In),ll=[];for(Z=0;Z<j;Z++){Pe=ce[Z],se=C._plots[Pe],q=se.xaxis,ol=se.yaxis;for(var ul=[],fl=1;fl<=A;fl++){var bl="";for(fl>1&&(bl+=b+fl),ul.push(Pe+bl),nl=0;nl<se.overlays.length;nl++)ul.push(se.overlays[nl].id+bl)}ul=ul.concat([q.layer,ol.layer,q.overlaying||"",ol.overlaying||""]),ll.push(ul)}return ll}function O(H,C){var A=H._fullLayout,L=C.plotgroup,j=C.id,Z=j.indexOf(b),nl=Z!==-1,Pe=w.layerValue2layerClass[C.xaxis.layer],se=w.layerValue2layerClass[C.yaxis.layer],q=A._hasOnlyLargeSploms,ol=A._zindices.length>1,nt=C.mainplotinfo;if(!C.mainplot||ol)if(q)C.xlines=c(L,"path","xlines-above"),C.ylines=c(L,"path","ylines-above"),C.xaxislayer=c(L,"g","xaxislayer-above"),C.yaxislayer=c(L,"g","yaxislayer-above");else{if(!nl){var In=c(L,"g","layer-subplot");C.shapelayer=c(In,"g","shapelayer"),C.imagelayer=c(In,"g","imagelayer"),nt&&ol?(C.minorGridlayer=nt.minorGridlayer,C.gridlayer=nt.gridlayer,C.zerolinelayer=nt.zerolinelayer):(C.minorGridlayer=c(L,"g","minor-gridlayer"),C.gridlayer=c(L,"g","gridlayer"),C.zerolinelayer=c(L,"g","zerolinelayer"));var _t=c(L,"g","layer-between");C.shapelayerBetween=c(_t,"g","shapelayer"),C.imagelayerBetween=c(_t,"g","imagelayer"),c(L,"path","xlines-below"),c(L,"path","ylines-below"),C.overlinesBelow=c(L,"g","overlines-below"),c(L,"g","xaxislayer-below"),c(L,"g","yaxislayer-below"),C.overaxesBelow=c(L,"g","overaxes-below")}C.overplot=c(L,"g","overplot"),C.plot=c(C.overplot,"g",j),nt&&ol?C.zerolinelayerAbove=nt.zerolinelayerAbove:C.zerolinelayerAbove=c(L,"g","zerolinelayer-above"),nl||(C.xlines=c(L,"path","xlines-above"),C.ylines=c(L,"path","ylines-above"),C.overlinesAbove=c(L,"g","overlines-above"),c(L,"g","xaxislayer-above"),c(L,"g","yaxislayer-above"),C.overaxesAbove=c(L,"g","overaxes-above"),C.xlines=L.select(".xlines-"+Pe),C.ylines=L.select(".ylines-"+se),C.xaxislayer=L.select(".xaxislayer-"+Pe),C.yaxislayer=L.select(".yaxislayer-"+se))}else{var Fn=nt.plotgroup,al=j+"-x",sl=j+"-y";C.minorGridlayer=nt.minorGridlayer,C.gridlayer=nt.gridlayer,C.zerolinelayer=nt.zerolinelayer,C.zerolinelayerAbove=nt.zerolinelayerAbove,c(nt.overlinesBelow,"path",al),c(nt.overlinesBelow,"path",sl),c(nt.overaxesBelow,"g",al),c(nt.overaxesBelow,"g",sl),C.plot=c(nt.overplot,"g",j),c(nt.overlinesAbove,"path",al),c(nt.overlinesAbove,"path",sl),c(nt.overaxesAbove,"g",al),c(nt.overaxesAbove,"g",sl),C.xlines=Fn.select(".overlines-"+Pe).select("."+al),C.ylines=Fn.select(".overlines-"+se).select("."+sl),C.xaxislayer=Fn.select(".overaxes-"+Pe).select("."+al),C.yaxislayer=Fn.select(".overaxes-"+se).select("."+sl)}nl||(q||(F(C.minorGridlayer,"g",C.xaxis._id),F(C.minorGridlayer,"g",C.yaxis._id),C.minorGridlayer.selectAll("g").map(function(ce){return ce[0]}).sort(y.idSort),F(C.gridlayer,"g",C.xaxis._id),F(C.gridlayer,"g",C.yaxis._id),C.gridlayer.selectAll("g").map(function(ce){return ce[0]}).sort(y.idSort)),C.xlines.style("fill","none").classed("crisp",!0),C.ylines.style("fill","none").classed("crisp",!0))}function P(H,C){if(H){var A={};H.each(function(se){var q=se[0],ol=Me.select(this);ol.remove(),D(q,C),A[q]=!0});for(var L in C._plots)for(var j=C._plots[L],Z=j.overlays||[],nl=0;nl<Z.length;nl++){var Pe=Z[nl];A[Pe.id]&&Pe.plot.selectAll(".trace").remove()}}}function D(H,C){C._draggers.selectAll("g."+H).remove(),C._defs.select("#clip"+C._uid+H+"plot").remove()}ot.toSVG=function(H){var C=H._fullLayout._glimages,A=Me.select(H).selectAll(".svg-container"),L=A.filter(function(Z,nl){return nl===A.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function j(){var Z=this,nl=Z.toDataURL("image/png"),Pe=C.append("svg:image");Pe.attr({xmlns:S.svg,"xlink:href":nl,preserveAspectRatio:"none",x:0,y:0,width:Z.style.width,height:Z.style.height})}L.each(j)},ot.updateFx=h1().updateFx}),U2=s((ot,Me)=>{var m=Zu();Me.exports={hasLines:m.hasLines,hasMarkers:m.hasMarkers,hasText:m.hasText,isBubble:m.isBubble,attributes:H0(),layoutAttributes:Ng(),supplyDefaults:t1(),crossTraceDefaults:Nv(),supplyLayoutDefaults:Y1(),calc:Q1().calc,crossTraceCalc:x2(),arraysToCalcdata:Z1(),plot:By(),colorbar:Av(),formatLabels:w2(),style:i1().style,styleOnSelect:i1().styleOnSelect,hoverPoints:V2(),selectPoints:j2(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:W0(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}}),Cf=s((ot,Me)=>{var m=$(),l=oh(),d=v0(),x=rt(),v=x.strScale,y=x.strRotate,w=x.strTranslate;Me.exports=function(S,c,F){var b=S.node(),R=d[F.arrowhead||0],B=d[F.startarrowhead||0],O=(F.arrowwidth||1)*(F.arrowsize||1),P=(F.arrowwidth||1)*(F.startarrowsize||1),D=c.indexOf("start")>=0,H=c.indexOf("end")>=0,C=R.backoff*O+F.standoff,A=B.backoff*P+F.startstandoff,L,j,Z,nl;if(b.nodeName==="line"){L={x:+S.attr("x1"),y:+S.attr("y1")},j={x:+S.attr("x2"),y:+S.attr("y2")};var Pe=L.x-j.x,se=L.y-j.y;if(Z=Math.atan2(se,Pe),nl=Z+Math.PI,C&&A&&C+A>Math.sqrt(Pe*Pe+se*se)){fl();return}if(C){if(C*C>Pe*Pe+se*se){fl();return}var q=C*Math.cos(Z),ol=C*Math.sin(Z);j.x+=q,j.y+=ol,S.attr({x2:j.x,y2:j.y})}if(A){if(A*A>Pe*Pe+se*se){fl();return}var nt=A*Math.cos(Z),In=A*Math.sin(Z);L.x-=nt,L.y-=In,S.attr({x1:L.x,y1:L.y})}}else if(b.nodeName==="path"){var _t=b.getTotalLength(),Fn="";if(_t<C+A){fl();return}var al=b.getPointAtLength(0),sl=b.getPointAtLength(.1);Z=Math.atan2(al.y-sl.y,al.x-sl.x),L=b.getPointAtLength(Math.min(A,_t)),Fn="0px,"+A+"px,";var ce=b.getPointAtLength(_t),ll=b.getPointAtLength(_t-.1);nl=Math.atan2(ce.y-ll.y,ce.x-ll.x),j=b.getPointAtLength(Math.max(0,_t-C));var ul=Fn?A+C:C;Fn+=_t-ul+"px,"+_t+"px",S.style("stroke-dasharray",Fn)}function fl(){S.style("stroke-dasharray","0px,100px")}function bl(El,Ul,ql,gu){El.path&&(El.noRotate&&(ql=0),m.select(b.parentNode).append("path").attr({class:S.attr("class"),d:El.path,transform:w(Ul.x,Ul.y)+y(ql*180/Math.PI)+v(gu)}).style({fill:l.rgb(F.arrowcolor),"stroke-width":0}))}D&&bl(B,L,Z,P),H&&bl(R,j,nl,O)}}),cm=s((ot,Me)=>{var m=$(),l=ff(),d=Vf(),x=rt(),v=x.strTranslate,y=Ud(),w=oh(),S=Qd(),c=Xf(),F=Kg(),b=dp(),R=Th(),B=Bp().arrayEditor,O=Cf();Me.exports={draw:P,drawOne:D,drawRaw:C};function P(A){var L=A._fullLayout;L._infolayer.selectAll(".annotation").remove();for(var j=0;j<L.annotations.length;j++)L.annotations[j].visible&&D(A,j);return d.previousPromises(A)}function D(A,L){var j=A._fullLayout,Z=j.annotations[L]||{},nl=y.getFromId(A,Z.xref),Pe=y.getFromId(A,Z.yref);nl&&nl.setScale(),Pe&&Pe.setScale(),C(A,Z,L,!1,nl,Pe)}function H(A,L,j,Z,nl){var Pe=nl[j],se=nl[j+"ref"],q=j.indexOf("y")!==-1,ol=y.getRefType(se)==="domain",nt=q?Z.h:Z.w;return A?ol?Pe+(q?-L:L)/A._length:A.p2r(A.r2p(Pe)+L):Pe+(q?-L:L)/nt}function C(A,L,j,Z,nl,Pe){var se=A._fullLayout,q=A._fullLayout._size,ol=A._context.edits,nt,In;Z?(nt="annotation-"+Z,In=Z+".annotations"):(nt="annotation",In="annotations");var _t=B(A.layout,In,L),Fn=_t.modifyBase,al=_t.modifyItem,sl=_t.getUpdateObj;se._infolayer.selectAll("."+nt+'[data-index="'+j+'"]').remove();var ce="clip"+se._uid+"_ann"+j;if(!L._input||L.visible===!1){m.selectAll("#"+ce).remove();return}var ll={x:{},y:{}},ul=+L.textangle||0,fl=se._infolayer.append("g").classed(nt,!0).attr("data-index",String(j)).style("opacity",L.opacity),bl=fl.append("g").classed("annotation-text-g",!0),El=ol[L.showarrow?"annotationTail":"annotationPosition"],Ul=L.captureevents||ol.annotationText||El;function ql(Ll){var zl={index:j,annotation:L._input,fullAnnotation:L,event:Ll};return Z&&(zl.subplotId=Z),zl}var gu=bl.append("g").style("pointer-events",Ul?"all":null).call(b,"pointer").on("click",function(){A._dragging=!1,A.emit("plotly_clickannotation",ql(m.event))});L.hovertext&&gu.on("mouseover",function(){var Ll=L.hoverlabel,zl=Ll.font,yu=this.getBoundingClientRect(),Vu=A.getBoundingClientRect();c.loneHover({x0:yu.left-Vu.left,x1:yu.right-Vu.left,y:(yu.top+yu.bottom)/2-Vu.top,text:L.hovertext,color:Ll.bgcolor,borderColor:Ll.bordercolor,fontFamily:zl.family,fontSize:zl.size,fontColor:zl.color,fontWeight:zl.weight,fontStyle:zl.style,fontVariant:zl.variant,fontShadow:zl.fontShadow,fontLineposition:zl.fontLineposition,fontTextcase:zl.fontTextcase},{container:se._hoverlayer.node(),outerContainer:se._paper.node(),gd:A})}).on("mouseout",function(){c.loneUnhover(se._hoverlayer.node())});var Bn=L.borderwidth,il=L.borderpad,X=Bn+il,cl=gu.append("rect").attr("class","bg").style("stroke-width",Bn+"px").call(w.stroke,L.bordercolor).call(w.fill,L.bgcolor),Sl=L.width||L.height,st=se._topclips.selectAll("#"+ce).data(Sl?[0]:[]);st.enter().append("clipPath").classed("annclip",!0).attr("id",ce).append("rect"),st.exit().remove();var U=L.font,re=se._meta?x.templateString(L.text,se._meta):L.text,Ft=gu.append("text").classed("annotation-text",!0).text(re);function ls(Ll){return Ll.call(S.font,U).attr({"text-anchor":{left:"start",right:"end"}[L.align]||"middle"}),F.convertToTspans(Ll,A,_l),Ll}function _l(){var Ll=Ft.selectAll("a");if(Ll.size()===1&&Ll.text()===Ft.text()){var zl=gu.insert("a",":first-child").attr({"xlink:xlink:href":Ll.attr("xlink:href"),"xlink:xlink:show":Ll.attr("xlink:show")}).style({cursor:"pointer"});zl.node().appendChild(cl.node())}var yu=gu.select(".annotation-text-math-group"),Vu=!yu.empty(),od=S.bBox((Vu?yu:Ft).node()),Ad=od.width,vd=od.height,fd=L.width||Ad,Kl=L.height||vd,vu=Math.round(fd+2*X),Rl=Math.round(Kl+2*X);function Wu(fp,zh){return zh==="auto"&&(fp<1/3?zh="left":fp>2/3?zh="right":zh="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[zh]}for(var cd=!1,xd=["x","y"],Td=0;Td<xd.length;Td++){var Pd=xd[Td],Hd=L[Pd+"ref"]||Pd,$d=L["a"+Pd+"ref"],Wd={x:nl,y:Pe}[Pd],mh=(ul+(Pd==="x"?0:-90))*Math.PI/180,Dd=vu*Math.cos(mh),bh=Rl*Math.sin(mh),Dh=Math.abs(Dd)+Math.abs(bh),vh=L[Pd+"anchor"],Gh=L[Pd+"shift"]*(Pd==="x"?1:-1),Ql=ll[Pd],Ku,gl,Dl,Vl,Mu,Nu=y.getRefType(Hd);if(Wd&&Nu!=="domain"){var ed=Wd.r2fraction(L[Pd]);(ed<0||ed>1)&&($d===Hd?(ed=Wd.r2fraction(L["a"+Pd]),(ed<0||ed>1)&&(cd=!0)):cd=!0),Ku=Wd._offset+Wd.r2p(L[Pd]),Vl=.5}else{var sd=Nu==="domain";Pd==="x"?(Dl=L[Pd],Ku=sd?Wd._offset+Wd._length*Dl:Ku=q.l+q.w*Dl):(Dl=1-L[Pd],Ku=sd?Wd._offset+Wd._length*Dl:Ku=q.t+q.h*Dl),Vl=L.showarrow?.5:Dl}if(L.showarrow){Ql.head=Ku;var Sd=L["a"+Pd];if(Mu=Dd*Wu(.5,L.xanchor)-bh*Wu(.5,L.yanchor),$d===Hd){var yd=y.getRefType($d);yd==="domain"?(Pd==="y"&&(Sd=1-Sd),Ql.tail=Wd._offset+Wd._length*Sd):yd==="paper"?Pd==="y"?(Sd=1-Sd,Ql.tail=q.t+q.h*Sd):Ql.tail=q.l+q.w*Sd:Ql.tail=Wd._offset+Wd.r2p(Sd),gl=Mu}else Ql.tail=Ku+Sd,gl=Mu+Sd;Ql.text=Ql.tail+Mu;var bd=se[Pd==="x"?"width":"height"];if(Hd==="paper"&&(Ql.head=x.constrain(Ql.head,1,bd-1)),$d==="pixel"){var Kd=-Math.max(Ql.tail-3,Ql.text),Jd=Math.min(Ql.tail+3,Ql.text)-bd;Kd>0?(Ql.tail+=Kd,Ql.text+=Kd):Jd>0&&(Ql.tail-=Jd,Ql.text-=Jd)}Ql.tail+=Gh,Ql.head+=Gh}else Mu=Dh*Wu(Vl,vh),gl=Mu,Ql.text=Ku+Mu;Ql.text+=Gh,Mu+=Gh,gl+=Gh,L["_"+Pd+"padplus"]=Dh/2+gl,L["_"+Pd+"padminus"]=Dh/2-gl,L["_"+Pd+"size"]=Dh,L["_"+Pd+"shift"]=Mu}if(cd){gu.remove();return}var th=0,Hh=0;if(L.align!=="left"&&(th=(fd-Ad)*(L.align==="center"?.5:1)),L.valign!=="top"&&(Hh=(Kl-vd)*(L.valign==="middle"?.5:1)),Vu)yu.select("svg").attr({x:X+th-1,y:X+Hh}).call(S.setClipUrl,Sl?ce:null,A);else{var sp=X+Hh-od.top,xp=X+th-od.left;Ft.call(F.positionText,xp,sp).call(S.setClipUrl,Sl?ce:null,A)}st.select("rect").call(S.setRect,X,X,fd,Kl),cl.call(S.setRect,Bn/2,Bn/2,vu-Bn,Rl-Bn),gu.call(S.setTranslate,Math.round(ll.x.text-vu/2),Math.round(ll.y.text-Rl/2)),bl.attr({transform:"rotate("+ul+","+ll.x.text+","+ll.y.text+")"});var Pp=function(fp,zh){fl.selectAll(".annotation-arrow-g").remove();var kp=ll.x.head,qh=ll.y.head,bp=ll.x.tail+fp,wp=ll.y.tail+zh,Sp=ll.x.text+fp,mp=ll.y.text+zh,af=x.rotationXYMatrix(ul,Sp,mp),_f=x.apply2DTransform(af),Lp=x.apply2DTransform2(af),Ef=+cl.attr("width"),Lf=+cl.attr("height"),rg=Sp-.5*Ef,ng=rg+Ef,gf=mp-.5*Lf,Rf=gf+Lf,yf=[[rg,gf,rg,Rf],[rg,Rf,ng,Rf],[ng,Rf,ng,gf],[ng,gf,rg,gf]].map(Lp);if(!yf.reduce(function(Ld,zd){return Ld^!!x.segmentsIntersect(kp,qh,kp+1e6,qh+1e6,zd[0],zd[1],zd[2],zd[3])},!1)){yf.forEach(function(Ld){var zd=x.segmentsIntersect(bp,wp,kp,qh,Ld[0],Ld[1],Ld[2],Ld[3]);zd&&(bp=zd.x,wp=zd.y)});var cp=L.arrowwidth,_g=L.arrowcolor,wl=L.arrowside,pl=fl.append("g").style({opacity:w.opacity(_g)}).classed("annotation-arrow-g",!0),Yu=pl.append("path").attr("d","M"+bp+","+wp+"L"+kp+","+qh).style("stroke-width",cp+"px").call(w.stroke,w.rgb(_g));if(O(Yu,wl,L),ol.annotationPosition&&Yu.node().parentNode&&!Z){var Ju=kp,hd=qh;if(L.standoff){var $u=Math.sqrt(Math.pow(kp-bp,2)+Math.pow(qh-wp,2));Ju+=L.standoff*(bp-kp)/$u,hd+=L.standoff*(wp-qh)/$u}var Xu=pl.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(bp-Ju)+","+(wp-hd),transform:v(Ju,hd)}).style("stroke-width",cp+6+"px").call(w.stroke,"rgba(0,0,0,0)").call(w.fill,"rgba(0,0,0,0)"),md,ld;R.init({element:Xu.node(),gd:A,prepFn:function(){var Ld=S.getTranslate(gu);md=Ld.x,ld=Ld.y,nl&&nl.autorange&&Fn(nl._name+".autorange",!0),Pe&&Pe.autorange&&Fn(Pe._name+".autorange",!0)},moveFn:function(Ld,zd){var gh=_f(md,ld),ep=gh[0]+Ld,Bh=gh[1]+zd;gu.call(S.setTranslate,ep,Bh),al("x",H(nl,Ld,"x",q,L)),al("y",H(Pe,zd,"y",q,L)),L.axref===L.xref&&al("ax",H(nl,Ld,"ax",q,L)),L.ayref===L.yref&&al("ay",H(Pe,zd,"ay",q,L)),pl.attr("transform",v(Ld,zd)),bl.attr({transform:"rotate("+ul+","+ep+","+Bh+")"})},doneFn:function(){l.call("_guiRelayout",A,sl());var Ld=document.querySelector(".js-notes-box-panel");Ld&&Ld.redraw(Ld.selectedObj)}})}}};if(L.showarrow&&Pp(0,0),El){var Up;R.init({element:gu.node(),gd:A,prepFn:function(){Up=bl.attr("transform")},moveFn:function(fp,zh){var kp="pointer";if(L.showarrow)L.axref===L.xref?al("ax",H(nl,fp,"ax",q,L)):al("ax",L.ax+fp),L.ayref===L.yref?al("ay",H(Pe,zh,"ay",q.w,L)):al("ay",L.ay+zh),Pp(fp,zh);else{if(Z)return;var qh,bp;if(nl)qh=H(nl,fp,"x",q,L);else{var wp=L._xsize/q.w,Sp=L.x+(L._xshift-L.xshift)/q.w-wp/2;qh=R.align(Sp+fp/q.w,wp,0,1,L.xanchor)}if(Pe)bp=H(Pe,zh,"y",q,L);else{var mp=L._ysize/q.h,af=L.y-(L._yshift+L.yshift)/q.h-mp/2;bp=R.align(af-zh/q.h,mp,0,1,L.yanchor)}al("x",qh),al("y",bp),(!nl||!Pe)&&(kp=R.getCursor(nl?.5:qh,Pe?.5:bp,L.xanchor,L.yanchor))}bl.attr({transform:v(fp,zh)+Up}),b(gu,kp)},clickFn:function(fp,zh){L.captureevents&&A.emit("plotly_clickannotation",ql(zh))},doneFn:function(){b(gu),l.call("_guiRelayout",A,sl());var fp=document.querySelector(".js-notes-box-panel");fp&&fp.redraw(fp.selectedObj)}})}}ol.annotationText?Ft.call(F.makeEditable,{delegate:gu,gd:A}).call(ls).on("edit",function(Ll){L.text=Ll,this.call(ls),al("text",Ll),nl&&nl.autorange&&Fn(nl._name+".autorange",!0),Pe&&Pe.autorange&&Fn(Pe._name+".autorange",!0),l.call("_guiRelayout",A,sl())}):Ft.call(ls)}}),b2=s((ot,Me)=>{var m=rt(),l=ff(),d=Bp().arrayEditor;Me.exports={hasClickToShow:x,onClick:v};function x(S,c){var F=y(S,c);return F.on.length>0||F.explicitOff.length>0}function v(S,c){var F=y(S,c),b=F.on,R=F.off.concat(F.explicitOff),B={},O=S._fullLayout.annotations,P,D;if(b.length||R.length){for(P=0;P<b.length;P++)D=d(S.layout,"annotations",O[b[P]]),D.modifyItem("visible",!0),m.extendFlat(B,D.getUpdateObj());for(P=0;P<R.length;P++)D=d(S.layout,"annotations",O[R[P]]),D.modifyItem("visible",!1),m.extendFlat(B,D.getUpdateObj());return l.call("update",S,{},B)}}function y(S,c){var F=S._fullLayout.annotations,b=[],R=[],B=[],O=(c||[]).length,P,D,H,C,A,L,j,Z;for(P=0;P<F.length;P++)if(H=F[P],C=H.clicktoshow,C){for(D=0;D<O;D++)if(A=c[D],L=A.xaxis,j=A.yaxis,L._id===H.xref&&j._id===H.yref&&L.d2r(A.x)===w(H._xclick,L)&&j.d2r(A.y)===w(H._yclick,j)){H.visible?C==="onout"?Z=R:Z=B:Z=b,Z.push(P);break}D===O&&H.visible&&C==="onout"&&R.push(P)}return{on:b,off:R,explicitOff:B}}function w(S,c){return c.type==="log"?c.l2r(S):c.d2r(S)}}),ny=s((ot,Me)=>{var m=rt(),l=oh();Me.exports=function(d,x,v,y){y("opacity");var w=y("bgcolor"),S=y("bordercolor"),c=l.opacity(S);y("borderpad");var F=y("borderwidth"),b=y("showarrow");y("text",b?" ":v._dfltTitle.annotation),y("textangle"),m.coerceFont(y,"font",v.font),y("width"),y("align");var R=y("height");if(R&&y("valign"),b){var B=y("arrowside"),O,P;B.indexOf("end")!==-1&&(O=y("arrowhead"),P=y("arrowsize")),B.indexOf("start")!==-1&&(y("startarrowhead",O),y("startarrowsize",P)),y("arrowcolor",c?x.bordercolor:l.defaultLine),y("arrowwidth",(c&&F||1)*2),y("standoff"),y("startstandoff")}var D=y("hovertext"),H=v.hoverlabel||{};if(D){var C=y("hoverlabel.bgcolor",H.bgcolor||(l.opacity(w)?l.rgb(w):l.defaultLine)),A=y("hoverlabel.bordercolor",H.bordercolor||l.contrast(C)),L=m.extendFlat({},H.font);L.color||(L.color=A),m.coerceFont(y,"hoverlabel.font",L)}y("captureevents",!!D)}}),oy=s((ot,Me)=>{var m=rt(),l=Ud(),d=vl(),x=ny(),v=Cm();Me.exports=function(w,S){d(w,S,{name:"annotations",handleItemDefaults:y})};function y(w,S,c){function F(q,ol){return m.coerce(w,S,v,q,ol)}var b=F("visible"),R=F("clicktoshow");if(b||R){x(w,S,c,F);for(var B=S.showarrow,O=["x","y"],P=[-10,-30],D={_fullLayout:c},H=0;H<2;H++){var C=O[H],A=l.coerceRef(w,S,D,C,"","paper");if(A!=="paper"){var L=l.getFromId(D,A);L._annIndices.push(S._index)}if(l.coercePosition(S,D,F,A,C,.5),B){var j="a"+C,Z=l.coerceRef(w,S,D,j,"pixel",["pixel","paper"]);Z!=="pixel"&&Z!==A&&(Z=S[j]="pixel");var nl=Z==="pixel"?P[H]:.4;l.coercePosition(S,D,F,Z,j,nl)}F(C+"anchor"),F(C+"shift")}if(m.noneOrAll(w,S,["x","y"]),B&&m.noneOrAll(w,S,["ax","ay"]),R){var Pe=F("xclick"),se=F("yclick");S._xclick=Pe===void 0?S.x:l.cleanPosition(Pe,D,S.xref),S._yclick=se===void 0?S.y:l.cleanPosition(se,D,S.yref)}}}}),D0=s((ot,Me)=>{var m=rt(),l=Ud(),d=cm().draw;Me.exports=function(y){var w=y._fullLayout,S=m.filterVisible(w.annotations);if(S.length&&y._fullData.length)return m.syncOrAsync([d,x],y)};function x(y){var w=y._fullLayout;m.filterVisible(w.annotations).forEach(function(S){var c=l.getFromId(y,S.xref),F=l.getFromId(y,S.yref),b=l.getRefType(S.xref),R=l.getRefType(S.yref);S._extremes={},b==="range"&&v(S,c),R==="range"&&v(S,F)})}function v(y,w){var S=w._id,c=S.charAt(0),F=y[c],b=y["a"+c],R=y[c+"ref"],B=y["a"+c+"ref"],O=y["_"+c+"padplus"],P=y["_"+c+"padminus"],D={x:1,y:-1}[c]*y[c+"shift"],H=3*y.arrowsize*y.arrowwidth||0,C=H+D,A=H-D,L=3*y.startarrowsize*y.arrowwidth||0,j=L+D,Z=L-D,nl;if(B===R){var Pe=l.findExtremes(w,[w.r2c(F)],{ppadplus:C,ppadminus:A}),se=l.findExtremes(w,[w.r2c(b)],{ppadplus:Math.max(O,j),ppadminus:Math.max(P,Z)});nl={min:[Pe.min[0],se.min[0]],max:[Pe.max[0],se.max[0]]}}else j=b?j+b:j,Z=b?Z-b:Z,nl=l.findExtremes(w,[w.r2c(F)],{ppadplus:Math.max(O,C,j),ppadminus:Math.max(P,A,Z)});y._extremes[S]=nl}}),S2=s((ot,Me)=>{var m=zn(),l=bu();Me.exports=function(d,x,v,y){x=x||{};var w=v==="log"&&x.type==="linear",S=v==="linear"&&x.type==="log";if(!(w||S))return;var c=d._fullLayout.annotations,F=x._id.charAt(0),b,R;function B(P){var D=b[P],H=null;w?H=l(D,x.range):H=Math.pow(10,D),m(H)||(H=null),y(R+P,H)}for(var O=0;O<c.length;O++)b=c[O],R="annotations["+O+"].",b[F+"ref"]===x._id&&B(F),b["a"+F+"ref"]===x._id&&B("a"+F)}}),Gy=s((ot,Me)=>{var m=cm(),l=b2();Me.exports={moduleType:"component",name:"annotations",layoutAttributes:Cm(),supplyLayoutDefaults:oy(),includeBasePlot:S1()("annotations"),calcAutorange:D0(),draw:m.draw,drawOne:m.drawOne,drawRaw:m.drawRaw,hasClickToShow:l.hasClickToShow,onClick:l.onClick,convertCoords:S2()}}),J0=s((ot,Me)=>{var m=Cm(),l=uf().overrideAll,d=Bp().templatedArray;Me.exports=l(d("annotation",{visible:m.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:m.xanchor,xshift:m.xshift,yanchor:m.yanchor,yshift:m.yshift,text:m.text,textangle:m.textangle,font:m.font,width:m.width,height:m.height,opacity:m.opacity,align:m.align,valign:m.valign,bgcolor:m.bgcolor,bordercolor:m.bordercolor,borderpad:m.borderpad,borderwidth:m.borderwidth,showarrow:m.showarrow,arrowcolor:m.arrowcolor,arrowhead:m.arrowhead,startarrowhead:m.startarrowhead,arrowside:m.arrowside,arrowsize:m.arrowsize,startarrowsize:m.startarrowsize,arrowwidth:m.arrowwidth,standoff:m.standoff,startstandoff:m.startstandoff,hovertext:m.hovertext,hoverlabel:m.hoverlabel,captureevents:m.captureevents}),"calc","from-root")}),ay=s((ot,Me)=>{var m=rt(),l=Ud(),d=vl(),x=ny(),v=J0();Me.exports=function(w,S,c){d(w,S,{name:"annotations",handleItemDefaults:y,fullLayout:c.fullLayout})};function y(w,S,c,F){function b(O,P){return m.coerce(w,S,v,O,P)}function R(O){var P=O+"axis",D={_fullLayout:{}};return D._fullLayout[P]=c[P],l.coercePosition(S,D,b,O,O,.5)}var B=b("visible");B&&(x(w,S,F.fullLayout,b),R("x"),R("y"),R("z"),m.noneOrAll(w,S,["x","y","z"]),S.xref="x",S.yref="y",S.zref="z",b("xanchor"),b("yanchor"),b("xshift"),b("yshift"),S.showarrow&&(S.axref="pixel",S.ayref="pixel",b("ax",-10),b("ay",-30),m.noneOrAll(w,S,["ax","ay"])))}}),W2=s((ot,Me)=>{var m=rt(),l=Ud();Me.exports=function(x){for(var v=x.fullSceneLayout,y=v.annotations,w=0;w<y.length;w++)d(y[w],x);x.fullLayout._infolayer.selectAll(".annotation-"+x.id).remove()};function d(x,v){var y=v.fullSceneLayout,w=y.domain,S=v.fullLayout._size,c={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};x._xa={},m.extendFlat(x._xa,c),l.setConvert(x._xa),x._xa._offset=S.l+w.x[0]*S.w,x._xa.l2p=function(){return .5*(1+x._pdata[0]/x._pdata[3])*S.w*(w.x[1]-w.x[0])},x._ya={},m.extendFlat(x._ya,c),l.setConvert(x._ya),x._ya._offset=S.t+(1-w.y[1])*S.h,x._ya.l2p=function(){return .5*(1-x._pdata[1]/x._pdata[3])*S.h*(w.y[1]-w.y[0])}}}),Vy=s((ot,Me)=>{function m(d,x){var v=[0,0,0,0],y,w;for(y=0;y<4;++y)for(w=0;w<4;++w)v[w]+=d[4*y+w]*x[y];return v}function l(d,x){var v=m(d.projection,m(d.view,m(d.model,[x[0],x[1],x[2],1])));return v}Me.exports=l}),$2=s((ot,Me)=>{var m=cm().drawRaw,l=Vy(),d=["x","y","z"];Me.exports=function(x){for(var v=x.fullSceneLayout,y=x.dataScale,w=v.annotations,S=0;S<w.length;S++){for(var c=w[S],F=!1,b=0;b<3;b++){var R=d[b],B=c[R],O=v[R+"axis"],P=O.r2fraction(B);if(P<0||P>1){F=!0;break}}F?x.fullLayout._infolayer.select(".annotation-"+x.id+'[data-index="'+S+'"]').remove():(c._pdata=l(x.glplot.cameraParams,[v.xaxis.r2l(c.x)*y[0],v.yaxis.r2l(c.y)*y[1],v.zaxis.r2l(c.z)*y[2]]),m(x.graphDiv,c,S,x.id,c._xa,c._ya))}}}),_2=s((ot,Me)=>{var m=ff(),l=rt();Me.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:J0()}}},layoutAttributes:J0(),handleDefaults:ay(),includeBasePlot:d,convert:W2(),draw:$2()};function d(x,v){var y=m.subplotsRegistry.gl3d;if(y)for(var w=y.attrRegex,S=Object.keys(x),c=0;c<S.length;c++){var F=S[c];w.test(F)&&(x[F].annotations||[]).length&&(l.pushUnique(v._basePlotModules,y),l.pushUnique(v._subplots.gl3d,F))}}}),vv=s((ot,Me)=>{var m=Cm(),l=Pu(),d=H0().line,x=Gf().dash,v=Bl().extendFlat,y=Bp().templatedArray;nv();var w=id(),S=Vg().shapeTexttemplateAttrs,c=Im();Me.exports=y("shape",{visible:v({},w.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:v({},w.legend,{editType:"calc+arraydraw"}),legendgroup:v({},w.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:v({},w.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:l({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:v({},w.legendrank,{editType:"calc+arraydraw"}),legendwidth:v({},w.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:v({},m.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:v({},m.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:v({},d.color,{editType:"arraydraw"}),width:v({},d.width,{editType:"calc+arraydraw"}),dash:v({},x,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:S({},{keys:Object.keys(c)}),font:l({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})}),q2=s((ot,Me)=>{var m=rt(),l=Ud(),d=vl(),x=vv(),v=ve();Me.exports=function(S,c){d(S,c,{name:"shapes",handleItemDefaults:w})};function y(S,c){return S?"bottom":c.indexOf("top")!==-1?"top":c.indexOf("bottom")!==-1?"bottom":"middle"}function w(S,c,F){function b(Bn,il){return m.coerce(S,c,x,Bn,il)}c._isShape=!0;var R=b("visible");if(R){var B=b("showlegend");B&&(b("legend"),b("legendwidth"),b("legendgroup"),b("legendgrouptitle.text"),m.coerceFont(b,"legendgrouptitle.font"),b("legendrank"));var O=b("path"),P=O?"path":"rect",D=b("type",P),H=D!=="path";H&&delete c.path,b("editable"),b("layer"),b("opacity"),b("fillcolor"),b("fillrule");var C=b("line.width");C&&(b("line.color"),b("line.dash"));for(var A=b("xsizemode"),L=b("ysizemode"),j=["x","y"],Z=0;Z<2;Z++){var nl=j[Z],Pe=nl+"anchor",se=nl==="x"?A:L,q={_fullLayout:F},ol,nt,In,_t=l.coerceRef(S,c,q,nl,void 0,"paper"),Fn=l.getRefType(_t);if(Fn==="range"?(ol=l.getFromId(q,_t),ol._shapeIndices.push(c._index),In=v.rangeToShapePosition(ol),nt=v.shapePositionToRange(ol),(ol.type==="category"||ol.type==="multicategory")&&(b(nl+"0shift"),b(nl+"1shift"))):nt=In=m.identity,H){var al=.25,sl=.75,ce=nl+"0",ll=nl+"1",ul=S[ce],fl=S[ll];S[ce]=nt(S[ce],!0),S[ll]=nt(S[ll],!0),se==="pixel"?(b(ce,0),b(ll,10)):(l.coercePosition(c,q,b,_t,ce,al),l.coercePosition(c,q,b,_t,ll,sl)),c[ce]=In(c[ce]),c[ll]=In(c[ll]),S[ce]=ul,S[ll]=fl}if(se==="pixel"){var bl=S[Pe];S[Pe]=nt(S[Pe],!0),l.coercePosition(c,q,b,_t,Pe,.25),c[Pe]=In(c[Pe]),S[Pe]=bl}}H&&m.noneOrAll(S,c,["x0","x1","y0","y1"]);var El=D==="line",Ul,ql;if(H&&(Ul=b("label.texttemplate")),Ul||(ql=b("label.text")),ql||Ul){b("label.textangle");var gu=b("label.textposition",El?"middle":"middle center");b("label.xanchor"),b("label.yanchor",y(El,gu)),b("label.padding"),m.coerceFont(b,"label.font",F.font)}}}}),k1=s((ot,Me)=>{var m=oh(),l=rt();function d(x,v){return x?"bottom":v.indexOf("top")!==-1?"top":v.indexOf("bottom")!==-1?"bottom":"middle"}Me.exports=function(x,v,y){y("newshape.visible"),y("newshape.name"),y("newshape.showlegend"),y("newshape.legend"),y("newshape.legendwidth"),y("newshape.legendgroup"),y("newshape.legendgrouptitle.text"),l.coerceFont(y,"newshape.legendgrouptitle.font"),y("newshape.legendrank"),y("newshape.drawdirection"),y("newshape.layer"),y("newshape.fillcolor"),y("newshape.fillrule"),y("newshape.opacity");var w=y("newshape.line.width");if(w){var S=(x||{}).plot_bgcolor||"#FFF";y("newshape.line.color",m.contrast(S)),y("newshape.line.dash")}var c=x.dragmode==="drawline",F=y("newshape.label.text"),b=y("newshape.label.texttemplate");if(F||b){y("newshape.label.textangle");var R=y("newshape.label.textposition",c?"middle":"middle center");y("newshape.label.xanchor"),y("newshape.label.yanchor",d(c,R)),y("newshape.label.padding"),l.coerceFont(y,"newshape.label.font",v.font)}y("activeshape.fillcolor"),y("activeshape.opacity")}}),Mv=s((ot,Me)=>{var m=rt(),l=Ud(),d=gg(),x=ve();Me.exports=function(c){var F=c._fullLayout,b=m.filterVisible(F.shapes);if(!(!b.length||!c._fullData.length))for(var R=0;R<b.length;R++){var B=b[R];B._extremes={};var O,P,D=l.getRefType(B.xref),H=l.getRefType(B.yref);B.xref!=="paper"&&D!=="domain"&&(O=l.getFromId(c,B.xref),P=S(O,B,d.paramIsX),P&&(B._extremes[O._id]=l.findExtremes(O,P,v(B)))),B.yref!=="paper"&&H!=="domain"&&(O=l.getFromId(c,B.yref),P=S(O,B,d.paramIsY),P&&(B._extremes[O._id]=l.findExtremes(O,P,y(B))))}};function v(c){return w(c.line.width,c.xsizemode,c.x0,c.x1,c.path,!1)}function y(c){return w(c.line.width,c.ysizemode,c.y0,c.y1,c.path,!0)}function w(c,F,b,R,B,O){var P=c/2,D=O;if(F==="pixel"){var H=B?x.extractPathCoords(B,O?d.paramIsY:d.paramIsX):[b,R],C=m.aggNums(Math.max,null,H),A=m.aggNums(Math.min,null,H),L=A<0?Math.abs(A)+P:P,j=C>0?C+P:P;return{ppad:P,ppadplus:D?L:j,ppadminus:D?j:L}}else return{ppad:P}}function S(c,F,b){var R=c._id.charAt(0)==="x"?"x":"y",B=c.type==="category"||c.type==="multicategory",O,P,D=0,H=0,C=B?c.r2c:c.d2c,A=F[R+"sizemode"]==="scaled";if(A?(O=F[R+"0"],P=F[R+"1"],B&&(D=F[R+"0shift"],H=F[R+"1shift"])):(O=F[R+"anchor"],P=F[R+"anchor"]),O!==void 0)return[C(O)+D,C(P)+H];if(F.path){var L=1/0,j=-1/0,Z=F.path.match(d.segmentRE),nl,Pe,se,q,ol;for(c.type==="date"&&(C=x.decodeDate(C)),nl=0;nl<Z.length;nl++)Pe=Z[nl],se=b[Pe.charAt(0)].drawn,se!==void 0&&(q=Z[nl].substr(1).match(d.paramRE),!(!q||q.length<se)&&(ol=C(q[se]),ol<L&&(L=ol),ol>j&&(j=ol)));if(j>=L)return[L,j]}}}),T1=s((ot,Me)=>{var m=Bd();Me.exports={moduleType:"component",name:"shapes",layoutAttributes:vv(),supplyLayoutDefaults:q2(),supplyDrawNewShapeDefaults:k1(),includeBasePlot:S1()("shapes"),calcAutorange:Mv(),draw:m.draw,drawOne:m.drawOne}}),yv=s((ot,Me)=>{var m=rf(),l=Bp().templatedArray;nv(),Me.exports=l("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})}),np=s((ot,Me)=>{var m=rt(),l=Ud(),d=vl(),x=yv(),v="images";Me.exports=function(w,S){var c={name:v,handleItemDefaults:y};d(w,S,c)};function y(w,S,c){function F(A,L){return m.coerce(w,S,x,A,L)}var b=F("source"),R=F("visible",!!b);if(!R)return S;F("layer"),F("xanchor"),F("yanchor"),F("sizex"),F("sizey"),F("sizing"),F("opacity");for(var B={_fullLayout:c},O=["x","y"],P=0;P<2;P++){var D=O[P],H=l.coerceRef(w,S,B,D,"paper",void 0);if(H!=="paper"){var C=l.getFromId(B,H);C._imgIndices.push(S._index)}l.coercePosition(S,B,F,H,D,0)}return S}}),Y2=s((ot,Me)=>{var m=$(),l=Qd(),d=Ud(),x=Rh(),v=Yg();Me.exports=function(y){var w=y._fullLayout,S=[],c={},F=[],b,R;for(R=0;R<w.images.length;R++){var B=w.images[R];if(B.visible)if(B.layer==="below"&&B.xref!=="paper"&&B.yref!=="paper"){b=x.ref2id(B.xref)+x.ref2id(B.yref);var O=w._plots[b];if(!O){F.push(B);continue}O.mainplot&&(b=O.mainplot.id),c[b]||(c[b]=[]),c[b].push(B)}else B.layer==="above"?S.push(B):F.push(B)}var P={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function D(se){var q=m.select(this);if(this._imgSrc!==se.source)if(q.attr("xmlns",v.svg),!y._context.staticPlot||se.source&&se.source.slice(0,5)==="data:")q.attr("xlink:href",se.source),this._imgSrc=se.source;else{var ol=new Promise((function(nt){var In=new Image;this.img=In,In.setAttribute("crossOrigin","anonymous"),In.onerror=_t,In.onload=function(){var Fn=document.createElement("canvas");Fn.width=this.width,Fn.height=this.height;var al=Fn.getContext("2d",{willReadFrequently:!0});al.drawImage(this,0,0);var sl=Fn.toDataURL("image/png");q.attr("xlink:href",sl),nt()},q.on("error",_t),In.src=se.source,this._imgSrc=se.source;function _t(){q.remove(),nt()}}).bind(this));y._promises.push(ol)}}function H(se){var q=m.select(this),ol=d.getFromId(y,se.xref),nt=d.getFromId(y,se.yref),In=d.getRefType(se.xref)==="domain",_t=d.getRefType(se.yref)==="domain",Fn=w._size,al,sl;ol!==void 0?al=typeof se.xref=="string"&&In?ol._length*se.sizex:Math.abs(ol.l2p(se.sizex)-ol.l2p(0)):al=se.sizex*Fn.w,nt!==void 0?sl=typeof se.yref=="string"&&_t?nt._length*se.sizey:Math.abs(nt.l2p(se.sizey)-nt.l2p(0)):sl=se.sizey*Fn.h;var ce=al*P.x[se.xanchor].offset,ll=sl*P.y[se.yanchor].offset,ul=P.x[se.xanchor].sizing+P.y[se.yanchor].sizing,fl,bl;switch(ol!==void 0?fl=typeof se.xref=="string"&&In?ol._length*se.x+ol._offset:ol.r2p(se.x)+ol._offset:fl=se.x*Fn.w+Fn.l,fl+=ce,nt!==void 0?bl=typeof se.yref=="string"&&_t?nt._length*(1-se.y)+nt._offset:nt.r2p(se.y)+nt._offset:bl=Fn.h-se.y*Fn.h+Fn.t,bl+=ll,se.sizing){case"fill":ul+=" slice";break;case"stretch":ul="none";break}q.attr({x:fl,y:bl,width:al,height:sl,preserveAspectRatio:ul,opacity:se.opacity});var El=ol&&d.getRefType(se.xref)!=="domain"?ol._id:"",Ul=nt&&d.getRefType(se.yref)!=="domain"?nt._id:"",ql=El+Ul;l.setClipUrl(q,ql?"clip"+w._uid+ql:null,y)}function C(se){return[se.xref,se.x,se.sizex,se.yref,se.y,se.sizey].join("_")}function A(se,q){return se._index-q._index}var L=w._imageLowerLayer.selectAll("image").data(F,C),j=w._imageUpperLayer.selectAll("image").data(S,C);L.enter().append("image"),j.enter().append("image"),L.exit().remove(),j.exit().remove(),L.each(function(se){D.bind(this)(se),H.bind(this)(se)}),j.each(function(se){D.bind(this)(se),H.bind(this)(se)}),L.sort(A),j.sort(A);var Z=Object.keys(w._plots);for(R=0;R<Z.length;R++){b=Z[R];var nl=w._plots[b];if(nl.imagelayer){var Pe=nl.imagelayer.selectAll("image").data(c[b]||[],C);Pe.enter().append("image"),Pe.exit().remove(),Pe.each(function(se){D.bind(this)(se),H.bind(this)(se)}),Pe.sort(A)}}}}),E2=s((ot,Me)=>{var m=zn(),l=bu();Me.exports=function(d,x,v,y){x=x||{};var w=v==="log"&&x.type==="linear",S=v==="linear"&&x.type==="log";if(w||S){for(var c=d._fullLayout.images,F=x._id.charAt(0),b,R,B=0;B<c.length;B++)if(b=c[B],R="images["+B+"].",b[F+"ref"]===x._id){var O=b[F],P=b["size"+F],D=null,H=null;if(w){D=l(O,x.range);var C=P/Math.pow(10,D)/2;H=2*Math.log(C+Math.sqrt(1+C*C))/Math.LN10}else D=Math.pow(10,O),H=D*(Math.pow(10,P/2)-Math.pow(10,-P/2));m(D)?m(H)||(H=null):(D=null,H=null),y(R+F,D),y(R+"size"+F,H)}}}}),$0=s((ot,Me)=>{Me.exports={moduleType:"component",name:"images",layoutAttributes:yv(),supplyLayoutDefaults:np(),includeBasePlot:S1()("images"),draw:Y2(),convertCoords:E2()}}),xv=s((ot,Me)=>{Me.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}}),Rv=s((ot,Me)=>{var m=Pu(),l=qd(),d=Bl().extendFlat,x=uf().overrideAll,v=am(),y=Bp().templatedArray,w=y("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});Me.exports=x(y("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:w,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:d(v({editType:"arraydraw"}),{}),font:m({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:l.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")}),sy=s((ot,Me)=>{var m=rt(),l=vl(),d=Rv(),x=xv(),v=x.name,y=d.buttons;Me.exports=function(c,F){var b={name:v,handleItemDefaults:w};l(c,F,b)};function w(c,F,b){function R(P,D){return m.coerce(c,F,d,P,D)}var B=l(c,F,{name:"buttons",handleItemDefaults:S}),O=R("visible",B.length>0);O&&(R("active"),R("direction"),R("type"),R("showactive"),R("x"),R("y"),m.noneOrAll(c,F,["x","y"]),R("xanchor"),R("yanchor"),R("pad.t"),R("pad.r"),R("pad.b"),R("pad.l"),m.coerceFont(R,"font",b.font),R("bgcolor",b.paper_bgcolor),R("bordercolor"),R("borderwidth"))}function S(c,F){function b(B,O){return m.coerce(c,F,y,B,O)}var R=b("visible",c.method==="skip"||Array.isArray(c.args));R&&(b("method"),b("args"),b("args2"),b("label"),b("execute"))}}),A2=s((ot,Me)=>{Me.exports=v;var m=$(),l=oh(),d=Qd(),x=rt();function v(y,w,S){this.gd=y,this.container=w,this.id=S,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}v.barWidth=2,v.barLength=20,v.barRadius=2,v.barPad=1,v.barColor="#808BA4",v.prototype.enable=function(y,w,S){var c=this.gd._fullLayout,F=c.width,b=c.height;this.position=y;var R=this.position.l,B=this.position.w,O=this.position.t,P=this.position.h,D=this.position.direction,H=D==="down",C=D==="left",A=D==="right",L=D==="up",j=B,Z=P,nl,Pe,se,q;!H&&!C&&!A&&!L&&(this.position.direction="down",H=!0);var ol=H||L;ol?(nl=R,Pe=nl+j,H?(se=O,q=Math.min(se+Z,b),Z=q-se):(q=O+Z,se=Math.max(q-Z,0),Z=q-se)):(se=O,q=se+Z,C?(Pe=R+j,nl=Math.max(Pe-j,0),j=Pe-nl):(nl=R,Pe=Math.min(nl+j,F),j=Pe-nl)),this._box={l:nl,t:se,w:j,h:Z};var nt=B>j,In=v.barLength+2*v.barPad,_t=v.barWidth+2*v.barPad,Fn=R,al=O+P;al+_t>b&&(al=b-_t);var sl=this.container.selectAll("rect.scrollbar-horizontal").data(nt?[0]:[]);sl.exit().on(".drag",null).remove(),sl.enter().append("rect").classed("scrollbar-horizontal",!0).call(l.fill,v.barColor),nt?(this.hbar=sl.attr({rx:v.barRadius,ry:v.barRadius,x:Fn,y:al,width:In,height:_t}),this._hbarXMin=Fn+In/2,this._hbarTranslateMax=j-In):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var ce=P>Z,ll=v.barWidth+2*v.barPad,ul=v.barLength+2*v.barPad,fl=R+B,bl=O;fl+ll>F&&(fl=F-ll);var El=this.container.selectAll("rect.scrollbar-vertical").data(ce?[0]:[]);El.exit().on(".drag",null).remove(),El.enter().append("rect").classed("scrollbar-vertical",!0).call(l.fill,v.barColor),ce?(this.vbar=El.attr({rx:v.barRadius,ry:v.barRadius,x:fl,y:bl,width:ll,height:ul}),this._vbarYMin=bl+ul/2,this._vbarTranslateMax=Z-ul):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Ul=this.id,ql=nl-.5,gu=ce?Pe+ll+.5:Pe+.5,Bn=se-.5,il=nt?q+_t+.5:q+.5,X=c._topdefs.selectAll("#"+Ul).data(nt||ce?[0]:[]);if(X.exit().remove(),X.enter().append("clipPath").attr("id",Ul).append("rect"),nt||ce?(this._clipRect=X.select("rect").attr({x:Math.floor(ql),y:Math.floor(Bn),width:Math.ceil(gu)-Math.floor(ql),height:Math.ceil(il)-Math.floor(Bn)}),this.container.call(d.setClipUrl,Ul,this.gd),this.bg.attr({x:R,y:O,width:B,height:P})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(d.setClipUrl,null),delete this._clipRect),nt||ce){var cl=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(cl);var Sl=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault(),m.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));nt&&this.hbar.on(".drag",null).call(Sl),ce&&this.vbar.on(".drag",null).call(Sl)}this.setTranslate(w,S)},v.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(d.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},v.prototype._onBoxDrag=function(){var y=this.translateX,w=this.translateY;this.hbar&&(y-=m.event.dx),this.vbar&&(w-=m.event.dy),this.setTranslate(y,w)},v.prototype._onBoxWheel=function(){var y=this.translateX,w=this.translateY;this.hbar&&(y+=m.event.deltaY),this.vbar&&(w+=m.event.deltaY),this.setTranslate(y,w)},v.prototype._onBarDrag=function(){var y=this.translateX,w=this.translateY;if(this.hbar){var S=y+this._hbarXMin,c=S+this._hbarTranslateMax,F=x.constrain(m.event.x,S,c),b=(F-S)/(c-S),R=this.position.w-this._box.w;y=b*R}if(this.vbar){var B=w+this._vbarYMin,O=B+this._vbarTranslateMax,P=x.constrain(m.event.y,B,O),D=(P-B)/(O-B),H=this.position.h-this._box.h;w=D*H}this.setTranslate(y,w)},v.prototype.setTranslate=function(y,w){var S=this.position.w-this._box.w,c=this.position.h-this._box.h;if(y=x.constrain(y||0,0,S),w=x.constrain(w||0,0,c),this.translateX=y,this.translateY=w,this.container.call(d.setTranslate,this._box.l-this.position.l-y,this._box.t-this.position.t-w),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+y-.5),y:Math.floor(this.position.t+w-.5)}),this.hbar){var F=y/S;this.hbar.call(d.setTranslate,y+F*this._hbarTranslateMax,w)}if(this.vbar){var b=w/c;this.vbar.call(d.setTranslate,y,w+b*this._vbarTranslateMax)}}}),F1=s((ot,Me)=>{var m=$(),l=Vf(),d=oh(),x=Qd(),v=rt(),y=Kg(),w=Bp().arrayEditor,S=$f().LINE_SPACING,c=xv(),F=A2();Me.exports=function(In){var _t=In._fullLayout,Fn=v.filterVisible(_t[c.name]);function al(Ul){l.autoMargin(In,q(Ul))}var sl=_t._menulayer.selectAll("g."+c.containerClassName).data(Fn.length>0?[0]:[]);if(sl.enter().append("g").classed(c.containerClassName,!0).style("cursor","pointer"),sl.exit().each(function(){m.select(this).selectAll("g."+c.headerGroupClassName).each(al)}).remove(),Fn.length!==0){var ce=sl.selectAll("g."+c.headerGroupClassName).data(Fn,b);ce.enter().append("g").classed(c.headerGroupClassName,!0);for(var ll=v.ensureSingle(sl,"g",c.dropdownButtonGroupClassName,function(Ul){Ul.style("pointer-events","all")}),ul=0;ul<Fn.length;ul++){var fl=Fn[ul];se(In,fl)}var bl="updatemenus"+_t._uid,El=new F(In,ll,bl);ce.enter().size()&&(ll.node().parentNode.appendChild(ll.node()),ll.call(nt)),ce.exit().each(function(Ul){ll.call(nt),al(Ul)}).remove(),ce.each(function(Ul){var ql=m.select(this),gu=Ul.type==="dropdown"?ll:null;l.manageCommandObserver(In,Ul,Ul.buttons,function(Bn){O(In,Ul,Ul.buttons[Bn.index],ql,gu,El,Bn.index,!0)}),Ul.type==="dropdown"?(P(In,ql,ll,El,Ul),B(ll,Ul)&&D(In,ql,ll,El,Ul)):D(In,ql,null,null,Ul)})}};function b(In){return In._index}function R(In){return+In.attr(c.menuIndexAttrName)==-1}function B(In,_t){return+In.attr(c.menuIndexAttrName)===_t._index}function O(In,_t,Fn,al,sl,ce,ll,ul){_t.active=ll,w(In.layout,c.name,_t).applyUpdate("active",ll),_t.type==="buttons"?D(In,al,null,null,_t):_t.type==="dropdown"&&(sl.attr(c.menuIndexAttrName,"-1"),P(In,al,sl,ce,_t),ul||D(In,al,sl,ce,_t))}function P(In,_t,Fn,al,sl){var ce=v.ensureSingle(_t,"g",c.headerClassName,function(ql){ql.style("pointer-events","all")}),ll=sl._dims,ul=sl.active,fl=sl.buttons[ul]||c.blankHeaderOpts,bl={y:sl.pad.t,yPad:0,x:sl.pad.l,xPad:0,index:0},El={width:ll.headerWidth,height:ll.headerHeight};ce.call(A,sl,fl,In).call(ol,sl,bl,El);var Ul=v.ensureSingle(_t,"text",c.headerArrowClassName,function(ql){ql.attr("text-anchor","end").call(x.font,sl.font).text(c.arrowSymbol[sl.direction])});Ul.attr({x:ll.headerWidth-c.arrowOffsetX+sl.pad.l,y:ll.headerHeight/2+c.textOffsetY+sl.pad.t}),ce.on("click",function(){Fn.call(nt,String(B(Fn,sl)?-1:sl._index)),D(In,_t,Fn,al,sl)}),ce.on("mouseover",function(){ce.call(nl)}),ce.on("mouseout",function(){ce.call(Pe,sl)}),x.setTranslate(_t,ll.lx,ll.ly)}function D(In,_t,Fn,al,sl){Fn||(Fn=_t,Fn.attr("pointer-events","all"));var ce=!R(Fn)||sl.type==="buttons"?sl.buttons:[],ll=sl.type==="dropdown"?c.dropdownButtonClassName:c.buttonClassName,ul=Fn.selectAll("g."+ll).data(v.filterVisible(ce)),fl=ul.enter().append("g").classed(ll,!0),bl=ul.exit();sl.type==="dropdown"?(fl.attr("opacity","0").transition().attr("opacity","1"),bl.transition().attr("opacity","0").remove()):bl.remove();var El=0,Ul=0,ql=sl._dims,gu=["up","down"].indexOf(sl.direction)!==-1;sl.type==="dropdown"&&(gu?Ul=ql.headerHeight+c.gapButtonHeader:El=ql.headerWidth+c.gapButtonHeader),sl.type==="dropdown"&&sl.direction==="up"&&(Ul=-c.gapButtonHeader+c.gapButton-ql.openHeight),sl.type==="dropdown"&&sl.direction==="left"&&(El=-c.gapButtonHeader+c.gapButton-ql.openWidth);var Bn={x:ql.lx+El+sl.pad.l,y:ql.ly+Ul+sl.pad.t,yPad:c.gapButton,xPad:c.gapButton,index:0},il={l:Bn.x+sl.borderwidth,t:Bn.y+sl.borderwidth};ul.each(function(X,cl){var Sl=m.select(this);Sl.call(A,sl,X,In).call(ol,sl,Bn),Sl.on("click",function(){m.event.defaultPrevented||(X.execute&&(X.args2&&sl.active===cl?(O(In,sl,X,_t,Fn,al,-1),l.executeAPICommand(In,X.method,X.args2)):(O(In,sl,X,_t,Fn,al,cl),l.executeAPICommand(In,X.method,X.args))),In.emit("plotly_buttonclicked",{menu:sl,button:X,active:sl.active}))}),Sl.on("mouseover",function(){Sl.call(nl)}),Sl.on("mouseout",function(){Sl.call(Pe,sl),ul.call(Z,sl)})}),ul.call(Z,sl),gu?(il.w=Math.max(ql.openWidth,ql.headerWidth),il.h=Bn.y-il.t):(il.w=Bn.x-il.l,il.h=Math.max(ql.openHeight,ql.headerHeight)),il.direction=sl.direction,al&&(ul.size()?H(In,_t,Fn,al,sl,il):C(al))}function H(In,_t,Fn,al,sl,ce){var ll=sl.direction,ul=ll==="up"||ll==="down",fl=sl._dims,bl=sl.active,El,Ul,ql;if(ul)for(Ul=0,ql=0;ql<bl;ql++)Ul+=fl.heights[ql]+c.gapButton;else for(El=0,ql=0;ql<bl;ql++)El+=fl.widths[ql]+c.gapButton;al.enable(ce,El,Ul),al.hbar&&al.hbar.attr("opacity","0").transition().attr("opacity","1"),al.vbar&&al.vbar.attr("opacity","0").transition().attr("opacity","1")}function C(In){var _t=!!In.hbar,Fn=!!In.vbar;_t&&In.hbar.transition().attr("opacity","0").each("end",function(){_t=!1,Fn||In.disable()}),Fn&&In.vbar.transition().attr("opacity","0").each("end",function(){Fn=!1,_t||In.disable()})}function A(In,_t,Fn,al){In.call(L,_t).call(j,_t,Fn,al)}function L(In,_t){var Fn=v.ensureSingle(In,"rect",c.itemRectClassName,function(al){al.attr({rx:c.rx,ry:c.ry,"shape-rendering":"crispEdges"})});Fn.call(d.stroke,_t.bordercolor).call(d.fill,_t.bgcolor).style("stroke-width",_t.borderwidth+"px")}function j(In,_t,Fn,al){var sl=v.ensureSingle(In,"text",c.itemTextClassName,function(ul){ul.attr({"text-anchor":"start","data-notex":1})}),ce=Fn.label,ll=al._fullLayout._meta;ll&&(ce=v.templateString(ce,ll)),sl.call(x.font,_t.font).text(ce).call(y.convertToTspans,al)}function Z(In,_t){var Fn=_t.active;In.each(function(al,sl){var ce=m.select(this);sl===Fn&&_t.showactive&&ce.select("rect."+c.itemRectClassName).call(d.fill,c.activeColor)})}function nl(In){In.select("rect."+c.itemRectClassName).call(d.fill,c.hoverColor)}function Pe(In,_t){In.select("rect."+c.itemRectClassName).call(d.fill,_t.bgcolor)}function se(In,_t){var Fn=_t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},al=x.tester.selectAll("g."+c.dropdownButtonClassName).data(v.filterVisible(_t.buttons));al.enter().append("g").classed(c.dropdownButtonClassName,!0);var sl=["up","down"].indexOf(_t.direction)!==-1;al.each(function(El,Ul){var ql=m.select(this);ql.call(A,_t,El,In);var gu=ql.select("."+c.itemTextClassName),Bn=gu.node()&&x.bBox(gu.node()).width,il=Math.max(Bn+c.textPadX,c.minWidth),X=_t.font.size*S,cl=y.lineCount(gu),Sl=Math.max(X*cl,c.minHeight)+c.textOffsetY;Sl=Math.ceil(Sl),il=Math.ceil(il),Fn.widths[Ul]=il,Fn.heights[Ul]=Sl,Fn.height1=Math.max(Fn.height1,Sl),Fn.width1=Math.max(Fn.width1,il),sl?(Fn.totalWidth=Math.max(Fn.totalWidth,il),Fn.openWidth=Fn.totalWidth,Fn.totalHeight+=Sl+c.gapButton,Fn.openHeight+=Sl+c.gapButton):(Fn.totalWidth+=il+c.gapButton,Fn.openWidth+=il+c.gapButton,Fn.totalHeight=Math.max(Fn.totalHeight,Sl),Fn.openHeight=Fn.totalHeight)}),sl?Fn.totalHeight-=c.gapButton:Fn.totalWidth-=c.gapButton,Fn.headerWidth=Fn.width1+c.arrowPadX,Fn.headerHeight=Fn.height1,_t.type==="dropdown"&&(sl?(Fn.width1+=c.arrowPadX,Fn.totalHeight=Fn.height1):Fn.totalWidth=Fn.width1,Fn.totalWidth+=c.arrowPadX),al.remove();var ce=Fn.totalWidth+_t.pad.l+_t.pad.r,ll=Fn.totalHeight+_t.pad.t+_t.pad.b,ul=In._fullLayout._size;Fn.lx=ul.l+ul.w*_t.x,Fn.ly=ul.t+ul.h*(1-_t.y);var fl="left";v.isRightAnchor(_t)&&(Fn.lx-=ce,fl="right"),v.isCenterAnchor(_t)&&(Fn.lx-=ce/2,fl="center");var bl="top";v.isBottomAnchor(_t)&&(Fn.ly-=ll,bl="bottom"),v.isMiddleAnchor(_t)&&(Fn.ly-=ll/2,bl="middle"),Fn.totalWidth=Math.ceil(Fn.totalWidth),Fn.totalHeight=Math.ceil(Fn.totalHeight),Fn.lx=Math.round(Fn.lx),Fn.ly=Math.round(Fn.ly),l.autoMargin(In,q(_t),{x:_t.x,y:_t.y,l:ce*({right:1,center:.5}[fl]||0),r:ce*({left:1,center:.5}[fl]||0),b:ll*({top:1,middle:.5}[bl]||0),t:ll*({bottom:1,middle:.5}[bl]||0)})}function q(In){return c.autoMarginIdRoot+In._index}function ol(In,_t,Fn,al){al=al||{};var sl=In.select("."+c.itemRectClassName),ce=In.select("."+c.itemTextClassName),ll=_t.borderwidth,ul=Fn.index,fl=_t._dims;x.setTranslate(In,ll+Fn.x,ll+Fn.y);var bl=["up","down"].indexOf(_t.direction)!==-1,El=al.height||(bl?fl.heights[ul]:fl.height1);sl.attr({x:0,y:0,width:al.width||(bl?fl.width1:fl.widths[ul]),height:El});var Ul=_t.font.size*S,ql=y.lineCount(ce),gu=(ql-1)*Ul/2;y.positionText(ce,c.textOffsetX,El/2-gu+c.textOffsetY),bl?Fn.y+=fl.heights[ul]+Fn.yPad:Fn.x+=fl.widths[ul]+Fn.xPad,Fn.index++}function nt(In,_t){In.attr(c.menuIndexAttrName,_t||"-1").selectAll("g."+c.dropdownButtonClassName).remove()}}),Bv=s((ot,Me)=>{var m=xv();Me.exports={moduleType:"component",name:m.name,layoutAttributes:Rv(),supplyLayoutDefaults:sy(),draw:F1()}}),jm=s((ot,Me)=>{Me.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}}),qm=s((ot,Me)=>{var m=Pu(),l=am(),d=Bl().extendDeepAll,x=uf().overrideAll,v=vf(),y=Bp().templatedArray,w=jm(),S=y("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});Me.exports=x(y("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:S,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:d(l({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:v.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:m({})},font:m({}),activebgcolor:{valType:"color",dflt:w.gripBgActiveColor},bgcolor:{valType:"color",dflt:w.railBgColor},bordercolor:{valType:"color",dflt:w.railBorderColor},borderwidth:{valType:"number",min:0,dflt:w.railBorderWidth},ticklen:{valType:"number",min:0,dflt:w.tickLength},tickcolor:{valType:"color",dflt:w.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:w.minorTickLength}}),"arraydraw","from-root")}),q0=s((ot,Me)=>{var m=rt(),l=vl(),d=qm(),x=jm(),v=x.name,y=d.steps;Me.exports=function(c,F){l(c,F,{name:v,handleItemDefaults:w})};function w(c,F,b){function R(L,j){return m.coerce(c,F,d,L,j)}for(var B=l(c,F,{name:"steps",handleItemDefaults:S}),O=0,P=0;P<B.length;P++)B[P].visible&&O++;var D;if(O<2?D=F.visible=!1:D=R("visible"),!!D){F._stepCount=O;var H=F._visibleSteps=m.filterVisible(B),C=R("active");(B[C]||{}).visible||(F.active=H[0]._index),R("x"),R("y"),m.noneOrAll(c,F,["x","y"]),R("xanchor"),R("yanchor"),R("len"),R("lenmode"),R("pad.t"),R("pad.r"),R("pad.b"),R("pad.l"),m.coerceFont(R,"font",b.font);var A=R("currentvalue.visible");A&&(R("currentvalue.xanchor"),R("currentvalue.prefix"),R("currentvalue.suffix"),R("currentvalue.offset"),m.coerceFont(R,"currentvalue.font",F.font)),R("transition.duration"),R("transition.easing"),R("bgcolor"),R("activebgcolor"),R("bordercolor"),R("borderwidth"),R("ticklen"),R("tickwidth"),R("tickcolor"),R("minorticklen")}}function S(c,F){function b(O,P){return m.coerce(c,F,y,O,P)}var R;if(c.method!=="skip"&&!Array.isArray(c.args)?R=F.visible=!1:R=b("visible"),R){b("method"),b("args");var B=b("label","step-"+F._index);b("value",B),b("execute")}}}),L0=s((ot,Me)=>{var m=$(),l=Vf(),d=oh(),x=Qd(),v=rt(),y=v.strTranslate,w=Kg(),S=Bp().arrayEditor,c=jm(),F=$f(),b=F.LINE_SPACING,R=F.FROM_TL,B=F.FROM_BR;Me.exports=function(sl){var ce=sl._context.staticPlot,ll=sl._fullLayout,ul=P(ll,sl),fl=ll._infolayer.selectAll("g."+c.containerClassName).data(ul.length>0?[0]:[]);fl.enter().append("g").classed(c.containerClassName,!0).style("cursor",ce?null:"ew-resize");function bl(gu){gu._commandObserver&&(gu._commandObserver.remove(),delete gu._commandObserver),l.autoMargin(sl,O(gu))}if(fl.exit().each(function(){m.select(this).selectAll("g."+c.groupClassName).each(bl)}).remove(),ul.length!==0){var El=fl.selectAll("g."+c.groupClassName).data(ul,D);El.enter().append("g").classed(c.groupClassName,!0),El.exit().each(bl).remove();for(var Ul=0;Ul<ul.length;Ul++){var ql=ul[Ul];H(sl,ql)}El.each(function(gu){var Bn=m.select(this);ol(gu),l.manageCommandObserver(sl,gu,gu._visibleSteps,function(il){var X=Bn.data()[0];X.active!==il.index&&(X._dragging||Pe(sl,Bn,X,il.index,!1,!0))}),C(sl,m.select(this),gu)})}};function O(sl){return c.autoMarginIdRoot+sl._index}function P(sl,ce){for(var ll=sl[c.name],ul=[],fl=0;fl<ll.length;fl++){var bl=ll[fl];bl.visible&&(bl._gd=ce,ul.push(bl))}return ul}function D(sl){return sl._index}function H(sl,ce){var ll=x.tester.selectAll("g."+c.labelGroupClass).data(ce._visibleSteps);ll.enter().append("g").classed(c.labelGroupClass,!0);var ul=0,fl=0;ll.each(function(Sl){var st=m.select(this),U=j(st,{step:Sl},ce),re=U.node();if(re){var Ft=x.bBox(re);fl=Math.max(fl,Ft.height),ul=Math.max(ul,Ft.width)}}),ll.remove();var bl=ce._dims={};bl.inputAreaWidth=Math.max(c.railWidth,c.gripHeight);var El=sl._fullLayout._size;bl.lx=El.l+El.w*ce.x,bl.ly=El.t+El.h*(1-ce.y),ce.lenmode==="fraction"?bl.outerLength=Math.round(El.w*ce.len):bl.outerLength=ce.len,bl.inputAreaStart=0,bl.inputAreaLength=Math.round(bl.outerLength-ce.pad.l-ce.pad.r);var Ul=bl.inputAreaLength-2*c.stepInset,ql=Ul/(ce._stepCount-1),gu=ul+c.labelPadding;if(bl.labelStride=Math.max(1,Math.ceil(gu/ql)),bl.labelHeight=fl,bl.currentValueMaxWidth=0,bl.currentValueHeight=0,bl.currentValueTotalHeight=0,bl.currentValueMaxLines=1,ce.currentvalue.visible){var Bn=x.tester.append("g");ll.each(function(Sl){var st=A(Bn,ce,Sl.label),U=st.node()&&x.bBox(st.node())||{width:0,height:0},re=w.lineCount(st);bl.currentValueMaxWidth=Math.max(bl.currentValueMaxWidth,Math.ceil(U.width)),bl.currentValueHeight=Math.max(bl.currentValueHeight,Math.ceil(U.height)),bl.currentValueMaxLines=Math.max(bl.currentValueMaxLines,re)}),bl.currentValueTotalHeight=bl.currentValueHeight+ce.currentvalue.offset,Bn.remove()}bl.height=bl.currentValueTotalHeight+c.tickOffset+ce.ticklen+c.labelOffset+bl.labelHeight+ce.pad.t+ce.pad.b;var il="left";v.isRightAnchor(ce)&&(bl.lx-=bl.outerLength,il="right"),v.isCenterAnchor(ce)&&(bl.lx-=bl.outerLength/2,il="center");var X="top";v.isBottomAnchor(ce)&&(bl.ly-=bl.height,X="bottom"),v.isMiddleAnchor(ce)&&(bl.ly-=bl.height/2,X="middle"),bl.outerLength=Math.ceil(bl.outerLength),bl.height=Math.ceil(bl.height),bl.lx=Math.round(bl.lx),bl.ly=Math.round(bl.ly);var cl={y:ce.y,b:bl.height*B[X],t:bl.height*R[X]};ce.lenmode==="fraction"?(cl.l=0,cl.xl=ce.x-ce.len*R[il],cl.r=0,cl.xr=ce.x+ce.len*B[il]):(cl.x=ce.x,cl.l=bl.outerLength*R[il],cl.r=bl.outerLength*B[il]),l.autoMargin(sl,O(ce),cl)}function C(sl,ce,ll){(ll.steps[ll.active]||{}).visible||(ll.active=ll._visibleSteps[0]._index),ce.call(A,ll).call(al,ll).call(Z,ll).call(q,ll).call(Fn,sl,ll).call(L,sl,ll);var ul=ll._dims;x.setTranslate(ce,ul.lx+ll.pad.l,ul.ly+ll.pad.t),ce.call(nt,ll,!1),ce.call(A,ll)}function A(sl,ce,ll){if(ce.currentvalue.visible){var ul=ce._dims,fl,bl;switch(ce.currentvalue.xanchor){case"right":fl=ul.inputAreaLength-c.currentValueInset-ul.currentValueMaxWidth,bl="left";break;case"center":fl=ul.inputAreaLength*.5,bl="middle";break;default:fl=c.currentValueInset,bl="left"}var El=v.ensureSingle(sl,"text",c.labelClass,function(X){X.attr({"text-anchor":bl,"data-notex":1})}),Ul=ce.currentvalue.prefix?ce.currentvalue.prefix:"";if(typeof ll=="string")Ul+=ll;else{var ql=ce.steps[ce.active].label,gu=ce._gd._fullLayout._meta;gu&&(ql=v.templateString(ql,gu)),Ul+=ql}ce.currentvalue.suffix&&(Ul+=ce.currentvalue.suffix),El.call(x.font,ce.currentvalue.font).text(Ul).call(w.convertToTspans,ce._gd);var Bn=w.lineCount(El),il=(ul.currentValueMaxLines+1-Bn)*ce.currentvalue.font.size*b;return w.positionText(El,fl,il),El}}function L(sl,ce,ll){var ul=v.ensureSingle(sl,"rect",c.gripRectClass,function(fl){fl.call(se,ce,sl,ll).style("pointer-events","all")});ul.attr({width:c.gripWidth,height:c.gripHeight,rx:c.gripRadius,ry:c.gripRadius}).call(d.stroke,ll.bordercolor).call(d.fill,ll.bgcolor).style("stroke-width",ll.borderwidth+"px")}function j(sl,ce,ll){var ul=v.ensureSingle(sl,"text",c.labelClass,function(El){El.attr({"text-anchor":"middle","data-notex":1})}),fl=ce.step.label,bl=ll._gd._fullLayout._meta;return bl&&(fl=v.templateString(fl,bl)),ul.call(x.font,ll.font).text(fl).call(w.convertToTspans,ll._gd),ul}function Z(sl,ce){var ll=v.ensureSingle(sl,"g",c.labelsClass),ul=ce._dims,fl=ll.selectAll("g."+c.labelGroupClass).data(ul.labelSteps);fl.enter().append("g").classed(c.labelGroupClass,!0),fl.exit().remove(),fl.each(function(bl){var El=m.select(this);El.call(j,bl,ce),x.setTranslate(El,In(ce,bl.fraction),c.tickOffset+ce.ticklen+ce.font.size*b+c.labelOffset+ul.currentValueTotalHeight)})}function nl(sl,ce,ll,ul,fl){var bl=Math.round(ul*(ll._stepCount-1)),El=ll._visibleSteps[bl]._index;El!==ll.active&&Pe(sl,ce,ll,El,!0,fl)}function Pe(sl,ce,ll,ul,fl,bl){var El=ll.active;ll.active=ul,S(sl.layout,c.name,ll).applyUpdate("active",ul);var Ul=ll.steps[ll.active];ce.call(nt,ll,bl),ce.call(A,ll),sl.emit("plotly_sliderchange",{slider:ll,step:ll.steps[ll.active],interaction:fl,previousActive:El}),Ul&&Ul.method&&fl&&(ce._nextMethod?(ce._nextMethod.step=Ul,ce._nextMethod.doCallback=fl,ce._nextMethod.doTransition=bl):(ce._nextMethod={step:Ul,doCallback:fl,doTransition:bl},ce._nextMethodRaf=window.requestAnimationFrame(function(){var ql=ce._nextMethod.step;ql.method&&(ql.execute&&l.executeAPICommand(sl,ql.method,ql.args),ce._nextMethod=null,ce._nextMethodRaf=null)})))}function se(sl,ce,ll){if(ce._context.staticPlot)return;var ul=ll.node(),fl=m.select(ce);function bl(){return ll.data()[0]}function El(){var Ul=bl();ce.emit("plotly_sliderstart",{slider:Ul});var ql=ll.select("."+c.gripRectClass);m.event.stopPropagation(),m.event.preventDefault(),ql.call(d.fill,Ul.activebgcolor);var gu=_t(Ul,m.mouse(ul)[0]);nl(ce,ll,Ul,gu,!0),Ul._dragging=!0;function Bn(){var X=bl(),cl=_t(X,m.mouse(ul)[0]);nl(ce,ll,X,cl,!1)}fl.on("mousemove",Bn),fl.on("touchmove",Bn);function il(){var X=bl();X._dragging=!1,ql.call(d.fill,X.bgcolor),fl.on("mouseup",null),fl.on("mousemove",null),fl.on("touchend",null),fl.on("touchmove",null),ce.emit("plotly_sliderend",{slider:X,step:X.steps[X.active]})}fl.on("mouseup",il),fl.on("touchend",il)}sl.on("mousedown",El),sl.on("touchstart",El)}function q(sl,ce){var ll=sl.selectAll("rect."+c.tickRectClass).data(ce._visibleSteps),ul=ce._dims;ll.enter().append("rect").classed(c.tickRectClass,!0),ll.exit().remove(),ll.attr({width:ce.tickwidth+"px","shape-rendering":"crispEdges"}),ll.each(function(fl,bl){var El=bl%ul.labelStride===0,Ul=m.select(this);Ul.attr({height:El?ce.ticklen:ce.minorticklen}).call(d.fill,ce.tickcolor),x.setTranslate(Ul,In(ce,bl/(ce._stepCount-1))-.5*ce.tickwidth,(El?c.tickOffset:c.minorTickOffset)+ul.currentValueTotalHeight)})}function ol(sl){var ce=sl._dims;ce.labelSteps=[];for(var ll=sl._stepCount,ul=0;ul<ll;ul+=ce.labelStride)ce.labelSteps.push({fraction:ul/(ll-1),step:sl._visibleSteps[ul]})}function nt(sl,ce,ll){for(var ul=sl.select("rect."+c.gripRectClass),fl=0,bl=0;bl<ce._stepCount;bl++)if(ce._visibleSteps[bl]._index===ce.active){fl=bl;break}var El=In(ce,fl/(ce._stepCount-1));if(!ce._invokingCommand){var Ul=ul;ll&&ce.transition.duration>0&&(Ul=Ul.transition().duration(ce.transition.duration).ease(ce.transition.easing)),Ul.attr("transform",y(El-c.gripWidth*.5,ce._dims.currentValueTotalHeight))}}function In(sl,ce){var ll=sl._dims;return ll.inputAreaStart+c.stepInset+(ll.inputAreaLength-2*c.stepInset)*Math.min(1,Math.max(0,ce))}function _t(sl,ce){var ll=sl._dims;return Math.min(1,Math.max(0,(ce-c.stepInset-ll.inputAreaStart)/(ll.inputAreaLength-2*c.stepInset-2*ll.inputAreaStart)))}function Fn(sl,ce,ll){var ul=ll._dims,fl=v.ensureSingle(sl,"rect",c.railTouchRectClass,function(bl){bl.call(se,ce,sl,ll).style("pointer-events","all")});fl.attr({width:ul.inputAreaLength,height:Math.max(ul.inputAreaWidth,c.tickOffset+ll.ticklen+ul.labelHeight)}).call(d.fill,ll.bgcolor).attr("opacity",0),x.setTranslate(fl,0,ul.currentValueTotalHeight)}function al(sl,ce){var ll=ce._dims,ul=ll.inputAreaLength-c.railInset*2,fl=v.ensureSingle(sl,"rect",c.railRectClass);fl.attr({width:ul,height:c.railWidth,rx:c.railRadius,ry:c.railRadius,"shape-rendering":"crispEdges"}).call(d.stroke,ce.bordercolor).call(d.fill,ce.bgcolor).style("stroke-width",ce.borderwidth+"px"),x.setTranslate(fl,c.railInset,(ll.inputAreaWidth-c.railWidth)*.5+ll.currentValueTotalHeight)}}),I0=s((ot,Me)=>{var m=jm();Me.exports={moduleType:"component",name:m.name,layoutAttributes:qm(),supplyLayoutDefaults:q0(),draw:L0()}}),Hv=s((ot,Me)=>{var m=qd();Me.exports={bgcolor:{valType:"color",dflt:m.background,editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}}),g1=s((ot,Me)=>{Me.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}}),T0=s((ot,Me)=>{Me.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}}),F0=s(ot=>{var Me=Rh(),m=Kg(),l=T0(),d=$f().LINE_SPACING,x=l.name;function v(y){var w=y&&y[x];return w&&w.visible}ot.isVisible=v,ot.makeData=function(y){for(var w=Me.list({_fullLayout:y},"x",!0),S=y.margin,c=[],F=0;F<w.length;F++){var b=w[F];if(v(b)){c.push(b);var R=b[x];R._id=x+b._id,R._height=(y.height-S.b-S.t)*R.thickness,R._offsetShift=Math.floor(R.borderwidth/2)}}y._rangeSliderData=c},ot.autoMarginOpts=function(y,w){var S=y._fullLayout,c=w[x],F=w._id.charAt(0),b=0,R=0;if(w.side==="bottom"&&(b=w._depth,w.title.text!==S._dfltTitle[F])){R=1.5*w.title.font.size+10+c._offsetShift;var B=(w.title.text.match(m.BR_TAG_ALL)||[]).length;R+=B*w.title.font.size*d}return{x:0,y:w._counterDomainMin,l:0,r:0,t:0,b:c._height+b+Math.max(S.margin.b,R),pad:l.extraPad+c._offsetShift*2}}}),K2=s((ot,Me)=>{var m=rt(),l=Bp(),d=Rh(),x=Hv(),v=g1();Me.exports=function(y,w,S){var c=y[S],F=w[S];if(!(c.rangeslider||w._requestRangeslider[F._id]))return;m.isPlainObject(c.rangeslider)||(c.rangeslider={});var b=c.rangeslider,R=l.newContainer(F,"rangeslider");function B(q,ol){return m.coerce(b,R,x,q,ol)}var O,P;function D(q,ol){return m.coerce(O,P,v,q,ol)}var H=B("visible");if(H){B("bgcolor",w.plot_bgcolor),B("bordercolor"),B("borderwidth"),B("thickness"),B("autorange",!F.isValidRange(b.range)),B("range");var C=w._subplots;if(C)for(var A=C.cartesian.filter(function(q){return q.substr(0,q.indexOf("y"))===d.name2id(S)}).map(function(q){return q.substr(q.indexOf("y"),q.length)}),L=m.simpleMap(A,d.id2name),j=0;j<L.length;j++){var Z=L[j];O=b[Z]||{},P=l.newContainer(R,Z,"yaxis");var nl=w[Z],Pe;O.range&&nl.isValidRange(O.range)&&(Pe="fixed");var se=D("rangemode",Pe);se!=="match"&&D("range",nl.range.slice())}R._input=b}}}),Z2=s((ot,Me)=>{var m=Rh().list,l=Fd().getAutoRange,d=T0();Me.exports=function(x){for(var v=m(x,"x",!0),y=0;y<v.length;y++){var w=v[y],S=w[d.name];S&&S.visible&&S.autorange&&(S._input.autorange=!0,S._input.range=S.range=l(x,w))}}}),jy=s((ot,Me)=>{var m=$(),l=ff(),d=Vf(),x=rt(),v=x.strTranslate,y=Qd(),w=oh(),S=ih(),c=W0(),F=Rh(),b=Th(),R=dp(),B=T0();Me.exports=function(se){for(var q=se._fullLayout,ol=q._rangeSliderData,nt=0;nt<ol.length;nt++){var In=ol[nt][B.name];In._clipId=In._id+"-"+q._uid}function _t(al){return al._name}var Fn=q._infolayer.selectAll("g."+B.containerClassName).data(ol,_t);Fn.exit().each(function(al){var sl=al[B.name];q._topdefs.select("#"+sl._clipId).remove()}).remove(),ol.length!==0&&(Fn.enter().append("g").classed(B.containerClassName,!0).attr("pointer-events","all"),Fn.each(function(al){var sl=m.select(this),ce=al[B.name],ll=q[F.id2name(al.anchor)],ul=ce[F.id2name(al.anchor)];if(ce.range){var fl=x.simpleMap(ce.range,al.r2l),bl=x.simpleMap(al.range,al.r2l),El;bl[0]<bl[1]?El=[Math.min(fl[0],bl[0]),Math.max(fl[1],bl[1])]:El=[Math.max(fl[0],bl[0]),Math.min(fl[1],bl[1])],ce.range=ce._input.range=x.simpleMap(El,al.l2r)}al.cleanRange("rangeslider.range");var Ul=q._size,ql=al.domain;ce._width=Ul.w*(ql[1]-ql[0]);var gu=Math.round(Ul.l+Ul.w*ql[0]),Bn=Math.round(Ul.t+Ul.h*(1-al._counterDomainMin)+(al.side==="bottom"?al._depth:0)+ce._offsetShift+B.extraPad);sl.attr("transform",v(gu,Bn)),ce._rl=x.simpleMap(ce.range,al.r2l);var il=ce._rl[0],X=ce._rl[1],cl=X-il;if(ce.p2d=function(yu){return yu/ce._width*cl+il},ce.d2p=function(yu){return(yu-il)/cl*ce._width},al.rangebreaks){var Sl=al.locateBreaks(il,X);if(Sl.length){var st,U,re=0;for(st=0;st<Sl.length;st++)U=Sl[st],re+=U.max-U.min;var Ft=ce._width/(X-il-re),ls=[-Ft*il];for(st=0;st<Sl.length;st++)U=Sl[st],ls.push(ls[ls.length-1]-Ft*(U.max-U.min));for(ce.d2p=function(yu){for(var Vu=ls[0],od=0;od<Sl.length;od++){var Ad=Sl[od];if(yu>=Ad.max)Vu=ls[od+1];else if(yu<Ad.min)break}return Vu+Ft*yu},st=0;st<Sl.length;st++)U=Sl[st],U.pmin=ce.d2p(U.min),U.pmax=ce.d2p(U.max);ce.p2d=function(yu){for(var Vu=ls[0],od=0;od<Sl.length;od++){var Ad=Sl[od];if(yu>=Ad.pmax)Vu=ls[od+1];else if(yu<Ad.pmin)break}return(yu-Vu)/Ft}}}if(ul.rangemode!=="match"){var _l=ll.r2l(ul.range[0]),Ll=ll.r2l(ul.range[1]),zl=Ll-_l;ce.d2pOppAxis=function(yu){return(yu-_l)/zl*ce._height}}sl.call(C,se,al,ce).call(A,se,al,ce).call(L,se,al,ce).call(Z,se,al,ce,ul).call(nl,se,al,ce).call(Pe,se,al,ce),P(sl,se,al,ce),H(sl,se,al,ce,ll,ul),al.side==="bottom"&&S.draw(se,al._id+"title",{propContainer:al,propName:al._name+".title.text",placeholder:q._dfltTitle.x,attributes:{x:al._offset+al._length/2,y:Bn+ce._height+ce._offsetShift+10+1.5*al.title.font.size,"text-anchor":"middle"}})}))};function O(se){return typeof se.clientX=="number"?se.clientX:se.touches&&se.touches.length>0?se.touches[0].clientX:0}function P(se,q,ol,nt){if(q._context.staticPlot)return;var In=se.select("rect."+B.slideBoxClassName).node(),_t=se.select("rect."+B.grabAreaMinClassName).node(),Fn=se.select("rect."+B.grabAreaMaxClassName).node();function al(){var sl=m.event,ce=sl.target,ll=O(sl),ul=ll-se.node().getBoundingClientRect().left,fl=nt.d2p(ol._rl[0]),bl=nt.d2p(ol._rl[1]),El=b.coverSlip();this.addEventListener("touchmove",Ul),this.addEventListener("touchend",ql),El.addEventListener("mousemove",Ul),El.addEventListener("mouseup",ql);function Ul(gu){var Bn=O(gu),il=+Bn-ll,X,cl,Sl;switch(ce){case In:if(Sl="ew-resize",fl+il>ol._length||bl+il<0)return;X=fl+il,cl=bl+il;break;case _t:if(Sl="col-resize",fl+il>ol._length)return;X=fl+il,cl=bl;break;case Fn:if(Sl="col-resize",bl+il<0)return;X=fl,cl=bl+il;break;default:Sl="ew-resize",X=ul,cl=ul+il;break}if(cl<X){var st=cl;cl=X,X=st}nt._pixelMin=X,nt._pixelMax=cl,R(m.select(El),Sl),D(se,q,ol,nt)}function ql(){El.removeEventListener("mousemove",Ul),El.removeEventListener("mouseup",ql),this.removeEventListener("touchmove",Ul),this.removeEventListener("touchend",ql),x.removeElement(El)}}se.on("mousedown",al),se.on("touchstart",al)}function D(se,q,ol,nt){function In(al){return ol.l2r(x.constrain(al,nt._rl[0],nt._rl[1]))}var _t=In(nt.p2d(nt._pixelMin)),Fn=In(nt.p2d(nt._pixelMax));window.requestAnimationFrame(function(){l.call("_guiRelayout",q,ol._name+".range",[_t,Fn])})}function H(se,q,ol,nt,In,_t){var Fn=B.handleWidth/2;function al(gu){return x.constrain(gu,0,nt._width)}function sl(gu){return x.constrain(gu,0,nt._height)}function ce(gu){return x.constrain(gu,-Fn,nt._width+Fn)}var ll=al(nt.d2p(ol._rl[0])),ul=al(nt.d2p(ol._rl[1]));if(se.select("rect."+B.slideBoxClassName).attr("x",ll).attr("width",ul-ll),se.select("rect."+B.maskMinClassName).attr("width",ll),se.select("rect."+B.maskMaxClassName).attr("x",ul).attr("width",nt._width-ul),_t.rangemode!=="match"){var fl=nt._height-sl(nt.d2pOppAxis(In._rl[1])),bl=nt._height-sl(nt.d2pOppAxis(In._rl[0]));se.select("rect."+B.maskMinOppAxisClassName).attr("x",ll).attr("height",fl).attr("width",ul-ll),se.select("rect."+B.maskMaxOppAxisClassName).attr("x",ll).attr("y",bl).attr("height",nt._height-bl).attr("width",ul-ll),se.select("rect."+B.slideBoxClassName).attr("y",fl).attr("height",bl-fl)}var El=.5,Ul=Math.round(ce(ll-Fn))-El,ql=Math.round(ce(ul-Fn))+El;se.select("g."+B.grabberMinClassName).attr("transform",v(Ul,El)),se.select("g."+B.grabberMaxClassName).attr("transform",v(ql,El))}function C(se,q,ol,nt){var In=x.ensureSingle(se,"rect",B.bgClassName,function(sl){sl.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),_t=nt.borderwidth%2===0?nt.borderwidth:nt.borderwidth-1,Fn=-nt._offsetShift,al=y.crispRound(q,nt.borderwidth);In.attr({width:nt._width+_t,height:nt._height+_t,transform:v(Fn,Fn),"stroke-width":al}).call(w.stroke,nt.bordercolor).call(w.fill,nt.bgcolor)}function A(se,q,ol,nt){var In=q._fullLayout,_t=x.ensureSingleById(In._topdefs,"clipPath",nt._clipId,function(Fn){Fn.append("rect").attr({x:0,y:0})});_t.select("rect").attr({width:nt._width,height:nt._height})}function L(se,q,ol,nt){var In=q.calcdata,_t=se.selectAll("g."+B.rangePlotClassName).data(ol._subplotsWith,x.identity);_t.enter().append("g").attr("class",function(al){return B.rangePlotClassName+" "+al}).call(y.setClipUrl,nt._clipId,q),_t.order(),_t.exit().remove();var Fn;_t.each(function(al,sl){var ce=m.select(this),ll=sl===0,ul=F.getFromId(q,al,"y"),fl=ul._name,bl=nt[fl],El={data:[],layout:{xaxis:{type:ol.type,domain:[0,1],range:nt.range.slice(),calendar:ol.calendar},width:nt._width,height:nt._height,margin:{t:0,b:0,l:0,r:0}},_context:q._context};ol.rangebreaks&&(El.layout.xaxis.rangebreaks=ol.rangebreaks),El.layout[fl]={type:ul.type,domain:[0,1],range:bl.rangemode!=="match"?bl.range.slice():ul.range.slice(),calendar:ul.calendar},ul.rangebreaks&&(El.layout[fl].rangebreaks=ul.rangebreaks),d.supplyDefaults(El);var Ul=El._fullLayout.xaxis,ql=El._fullLayout[fl];Ul.clearCalc(),Ul.setScale(),ql.clearCalc(),ql.setScale();var gu={id:al,plotgroup:ce,xaxis:Ul,yaxis:ql,isRangePlot:!0};ll?Fn=gu:(gu.mainplot="xy",gu.mainplotinfo=Fn),c.rangePlot(q,gu,j(In,al))})}function j(se,q){for(var ol=[],nt=0;nt<se.length;nt++){var In=se[nt],_t=In[0].trace;_t.xaxis+_t.yaxis===q&&ol.push(In)}return ol}function Z(se,q,ol,nt,In){var _t=x.ensureSingle(se,"rect",B.maskMinClassName,function(ce){ce.attr({x:0,y:0,"shape-rendering":"crispEdges"})});_t.attr("height",nt._height).call(w.fill,B.maskColor);var Fn=x.ensureSingle(se,"rect",B.maskMaxClassName,function(ce){ce.attr({y:0,"shape-rendering":"crispEdges"})});if(Fn.attr("height",nt._height).call(w.fill,B.maskColor),In.rangemode!=="match"){var al=x.ensureSingle(se,"rect",B.maskMinOppAxisClassName,function(ce){ce.attr({y:0,"shape-rendering":"crispEdges"})});al.attr("width",nt._width).call(w.fill,B.maskOppAxisColor);var sl=x.ensureSingle(se,"rect",B.maskMaxOppAxisClassName,function(ce){ce.attr({y:0,"shape-rendering":"crispEdges"})});sl.attr("width",nt._width).style("border-top",B.maskOppBorder).call(w.fill,B.maskOppAxisColor)}}function nl(se,q,ol,nt){if(!q._context.staticPlot){var In=x.ensureSingle(se,"rect",B.slideBoxClassName,function(_t){_t.attr({y:0,cursor:B.slideBoxCursor,"shape-rendering":"crispEdges"})});In.attr({height:nt._height,fill:B.slideBoxFill})}}function Pe(se,q,ol,nt){var In=x.ensureSingle(se,"g",B.grabberMinClassName),_t=x.ensureSingle(se,"g",B.grabberMaxClassName),Fn={x:0,width:B.handleWidth,rx:B.handleRadius,fill:w.background,stroke:w.defaultLine,"stroke-width":B.handleStrokeWidth,"shape-rendering":"crispEdges"},al={y:Math.round(nt._height/4),height:Math.round(nt._height/2)},sl=x.ensureSingle(In,"rect",B.handleMinClassName,function(bl){bl.attr(Fn)});sl.attr(al);var ce=x.ensureSingle(_t,"rect",B.handleMaxClassName,function(bl){bl.attr(Fn)});ce.attr(al);var ll={width:B.grabAreaWidth,x:0,y:0,fill:B.grabAreaFill,cursor:q._context.staticPlot?void 0:B.grabAreaCursor},ul=x.ensureSingle(In,"rect",B.grabAreaMinClassName,function(bl){bl.attr(ll)});ul.attr("height",nt._height);var fl=x.ensureSingle(_t,"rect",B.grabAreaMaxClassName,function(bl){bl.attr(ll)});fl.attr("height",nt._height)}}),X2=s((ot,Me)=>{var m=rt(),l=Hv(),d=g1(),x=F0();Me.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:m.extendFlat({},l,{yaxis:d})}}},layoutAttributes:Hv(),handleDefaults:K2(),calcAutorange:Z2(),draw:jy(),isVisible:x.isVisible,makeData:x.makeData,autoMarginOpts:x.autoMarginOpts}}),cv=s((ot,Me)=>{var m=Pu(),l=qd(),d=Bp().templatedArray,x=d("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});Me.exports={visible:{valType:"boolean",editType:"plot"},buttons:x,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:m({editType:"plot"}),bgcolor:{valType:"color",dflt:l.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}}),ly=s((ot,Me)=>{Me.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}}),M2=s((ot,Me)=>{var m=rt(),l=oh(),d=Bp(),x=vl(),v=cv(),y=ly();Me.exports=function(c,F,b,R,B){var O=c.rangeselector||{},P=d.newContainer(F,"rangeselector");function D(j,Z){return m.coerce(O,P,v,j,Z)}var H=x(O,P,{name:"buttons",handleItemDefaults:w,calendar:B}),C=D("visible",H.length>0);if(C){var A=S(F,b,R);D("x",A[0]),D("y",A[1]),m.noneOrAll(c,F,["x","y"]),D("xanchor"),D("yanchor"),m.coerceFont(D,"font",b.font);var L=D("bgcolor");D("activecolor",l.contrast(L,y.lightAmount,y.darkAmount)),D("bordercolor"),D("borderwidth")}};function w(c,F,b,R){var B=R.calendar;function O(H,C){return m.coerce(c,F,v.buttons,H,C)}var P=O("visible");if(P){var D=O("step");D!=="all"&&(B&&B!=="gregorian"&&(D==="month"||D==="year")?F.stepmode="backward":O("stepmode"),O("count")),O("label")}}function S(c,F,b){for(var R=b.filter(function(D){return F[D].anchor===c._id}),B=0,O=0;O<R.length;O++){var P=F[R[O]].domain;P&&(B=Math.max(P[1],B))}return[c.domain[0],B+y.yPad]}}),Q2=s((ot,Me)=>{var m=V(),l=rt().titleCase;Me.exports=function(x,v){var y=x._name,w={};if(v.step==="all")w[y+".autorange"]=!0;else{var S=d(x,v);w[y+".range[0]"]=S[0],w[y+".range[1]"]=S[1]}return w};function d(x,v){var y=x.range,w=new Date(x.r2l(y[1])),S=v.step,c=m["utc"+l(S)],F=v.count,b;switch(v.stepmode){case"backward":b=x.l2r(+c.offset(w,-F));break;case"todate":var R=c.offset(w,-F);b=x.l2r(+c.ceil(R));break}var B=y[1];return[b,B]}}),J2=s((ot,Me)=>{var m=$(),l=ff(),d=Vf(),x=oh(),v=Qd(),y=rt(),w=y.strTranslate,S=Kg(),c=Rh(),F=$f(),b=F.LINE_SPACING,R=F.FROM_TL,B=F.FROM_BR,O=ly(),P=Q2();Me.exports=function(Pe){var se=Pe._fullLayout,q=se._infolayer.selectAll(".rangeselector").data(D(Pe),H);q.enter().append("g").classed("rangeselector",!0),q.exit().remove(),q.style({cursor:"pointer","pointer-events":"all"}),q.each(function(ol){var nt=m.select(this),In=ol,_t=In.rangeselector,Fn=nt.selectAll("g.button").data(y.filterVisible(_t.buttons));Fn.enter().append("g").classed("button",!0),Fn.exit().remove(),Fn.each(function(al){var sl=m.select(this),ce=P(In,al);al._isActive=C(In,al,ce),sl.call(A,_t,al),sl.call(j,_t,al,Pe),sl.on("click",function(){Pe._dragged||l.call("_guiRelayout",Pe,ce)}),sl.on("mouseover",function(){al._isHovered=!0,sl.call(A,_t,al)}),sl.on("mouseout",function(){al._isHovered=!1,sl.call(A,_t,al)})}),nl(Pe,Fn,_t,In._name,nt)})};function D(Pe){for(var se=c.list(Pe,"x",!0),q=[],ol=0;ol<se.length;ol++){var nt=se[ol];nt.rangeselector&&nt.rangeselector.visible&&q.push(nt)}return q}function H(Pe){return Pe._id}function C(Pe,se,q){if(se.step==="all")return Pe.autorange===!0;var ol=Object.keys(q);return Pe.range[0]===q[ol[0]]&&Pe.range[1]===q[ol[1]]}function A(Pe,se,q){var ol=y.ensureSingle(Pe,"rect","selector-rect",function(nt){nt.attr("shape-rendering","crispEdges")});ol.attr({rx:O.rx,ry:O.ry}),ol.call(x.stroke,se.bordercolor).call(x.fill,L(se,q)).style("stroke-width",se.borderwidth+"px")}function L(Pe,se){return se._isActive||se._isHovered?Pe.activecolor:Pe.bgcolor}function j(Pe,se,q,ol){function nt(_t){S.convertToTspans(_t,ol)}var In=y.ensureSingle(Pe,"text","selector-text",function(_t){_t.attr("text-anchor","middle")});In.call(v.font,se.font).text(Z(q,ol._fullLayout._meta)).call(nt)}function Z(Pe,se){return Pe.label?se?y.templateString(Pe.label,se):Pe.label:Pe.step==="all"?"all":Pe.count+Pe.step.charAt(0)}function nl(Pe,se,q,ol,nt){var In=0,_t=0,Fn=q.borderwidth;se.each(function(){var fl=m.select(this),bl=fl.select(".selector-text"),El=q.font.size*b,Ul=Math.max(El*S.lineCount(bl),16)+3;_t=Math.max(_t,Ul)}),se.each(function(){var fl=m.select(this),bl=fl.select(".selector-rect"),El=fl.select(".selector-text"),Ul=El.node()&&v.bBox(El.node()).width,ql=q.font.size*b,gu=S.lineCount(El),Bn=Math.max(Ul+10,O.minButtonWidth);fl.attr("transform",w(Fn+In,Fn)),bl.attr({x:0,y:0,width:Bn,height:_t}),S.positionText(El,Bn/2,_t/2-(gu-1)*ql/2+3),In+=Bn+5});var al=Pe._fullLayout._size,sl=al.l+al.w*q.x,ce=al.t+al.h*(1-q.y),ll="left";y.isRightAnchor(q)&&(sl-=In,ll="right"),y.isCenterAnchor(q)&&(sl-=In/2,ll="center");var ul="top";y.isBottomAnchor(q)&&(ce-=_t,ul="bottom"),y.isMiddleAnchor(q)&&(ce-=_t/2,ul="middle"),In=Math.ceil(In),_t=Math.ceil(_t),sl=Math.round(sl),ce=Math.round(ce),d.autoMargin(Pe,ol+"-range-selector",{x:q.x,y:q.y,l:In*R[ll],r:In*B[ll],b:_t*B[ul],t:_t*R[ul]}),nt.attr("transform",w(sl,ce))}}),n1=s((ot,Me)=>{Me.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:cv()}}},layoutAttributes:cv(),handleDefaults:M2(),draw:J2()}}),o1=s(ot=>{var Me=Bl().extendFlat;ot.attributes=function(m,l){m=m||{},l=l||{};var d={valType:"info_array",editType:m.editType,items:[{valType:"number",min:0,max:1,editType:m.editType},{valType:"number",min:0,max:1,editType:m.editType}],dflt:[0,1]};m.name&&m.name+"",m.trace,l.description&&""+l.description;var x={x:Me({},d,{}),y:Me({},d,{}),editType:m.editType};return m.noGridCell||(x.row={valType:"integer",min:0,dflt:0,editType:m.editType},x.column={valType:"integer",min:0,dflt:0,editType:m.editType}),x},ot.defaults=function(m,l,d,x){var v=x&&x.x||[0,1],y=x&&x.y||[0,1],w=l.grid;if(w){var S=d("domain.column");S!==void 0&&(S<w.columns?v=w._domains.x[S]:delete m.domain.column);var c=d("domain.row");c!==void 0&&(c<w.rows?y=w._domains.y[c]:delete m.domain.row)}var F=d("domain.x",v),b=d("domain.y",y);F[0]<F[1]||(m.domain.x=v.slice()),b[0]<b[1]||(m.domain.y=y.slice())}}),P1=s((ot,Me)=>{var m=rt(),l=Nl().counter,d=o1().attributes,x=rf().idRegex,v=Bp(),y={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[l("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:d({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function w(R,B,O){var P=B[O+"axes"],D=Object.keys((R._splomAxes||{})[O]||{});if(Array.isArray(P))return P;if(D.length)return D}function S(R,B){var O=R.grid||{},P=w(B,O,"x"),D=w(B,O,"y");if(!R.grid&&!P&&!D)return;var H=Array.isArray(O.subplots)&&Array.isArray(O.subplots[0]),C=Array.isArray(P),A=Array.isArray(D),L=C&&P!==O.xaxes&&A&&D!==O.yaxes,j,Z;H?(j=O.subplots.length,Z=O.subplots[0].length):(A&&(j=D.length),C&&(Z=P.length));var nl=v.newContainer(B,"grid");function Pe(ce,ll){return m.coerce(O,nl,y,ce,ll)}var se=Pe("rows",j),q=Pe("columns",Z);if(!(se*q>1)){delete B.grid;return}if(!H&&!C&&!A){var ol=Pe("pattern")==="independent";ol&&(H=!0)}nl._hasSubplotGrid=H;var nt=Pe("roworder"),In=nt==="top to bottom",_t=H?.2:.1,Fn=H?.3:.1,al,sl;L&&B._splomGridDflt&&(al=B._splomGridDflt.xside,sl=B._splomGridDflt.yside),nl._domains={x:c("x",Pe,_t,al,q),y:c("y",Pe,Fn,sl,se,In)}}function c(R,B,O,P,D,H){var C=B(R+"gap",O),A=B("domain."+R);B(R+"side",P);for(var L=new Array(D),j=A[0],Z=(A[1]-j)/(D-C),nl=Z*(1-C),Pe=0;Pe<D;Pe++){var se=j+Z*Pe;L[H?D-1-Pe:Pe]=[se,se+nl]}return L}function F(R,B){var O=B.grid;if(!(!O||!O._domains)){var P=R.grid||{},D=B._subplots,H=O._hasSubplotGrid,C=O.rows,A=O.columns,L=O.pattern==="independent",j,Z,nl,Pe,se,q,ol,nt=O._axisMap={};if(H){var In=P.subplots||[];q=O.subplots=new Array(C);var _t=1;for(j=0;j<C;j++){var Fn=q[j]=new Array(A),al=In[j]||[];for(Z=0;Z<A;Z++)if(L?(se=_t===1?"xy":"x"+_t+"y"+_t,_t++):se=al[Z],Fn[Z]="",D.cartesian.indexOf(se)!==-1){if(ol=se.indexOf("y"),nl=se.slice(0,ol),Pe=se.slice(ol),nt[nl]!==void 0&&nt[nl]!==Z||nt[Pe]!==void 0&&nt[Pe]!==j)continue;Fn[Z]=se,nt[nl]=Z,nt[Pe]=j}}}else{var sl=w(B,P,"x"),ce=w(B,P,"y");O.xaxes=b(sl,D.xaxis,A,nt,"x"),O.yaxes=b(ce,D.yaxis,C,nt,"y")}var ll=O._anchors={},ul=O.roworder==="top to bottom";for(var fl in nt){var bl=fl.charAt(0),El=O[bl+"side"],Ul,ql,gu;if(El.length<8)ll[fl]="free";else if(bl==="x"){if(El.charAt(0)==="t"===ul?(Ul=0,ql=1,gu=C):(Ul=C-1,ql=-1,gu=-1),H){var Bn=nt[fl];for(j=Ul;j!==gu;j+=ql)if(se=q[j][Bn],!!se&&(ol=se.indexOf("y"),se.slice(0,ol)===fl)){ll[fl]=se.slice(ol);break}}else for(j=Ul;j!==gu;j+=ql)if(Pe=O.yaxes[j],D.cartesian.indexOf(fl+Pe)!==-1){ll[fl]=Pe;break}}else if(El.charAt(0)==="l"?(Ul=0,ql=1,gu=A):(Ul=A-1,ql=-1,gu=-1),H){var il=nt[fl];for(j=Ul;j!==gu;j+=ql)if(se=q[il][j],!!se&&(ol=se.indexOf("y"),se.slice(ol)===fl)){ll[fl]=se.slice(0,ol);break}}else for(j=Ul;j!==gu;j+=ql)if(nl=O.xaxes[j],D.cartesian.indexOf(nl+fl)!==-1){ll[fl]=nl;break}}}}function b(R,B,O,P,D){var H=new Array(O),C;function A(L,j){B.indexOf(j)!==-1&&P[j]===void 0?(H[L]=j,P[j]=L):H[L]=""}if(Array.isArray(R))for(C=0;C<O;C++)A(C,R[C]);else for(A(0,D),C=1;C<O;C++)A(C,D+(C+1));return H}Me.exports={moduleType:"component",name:"grid",schema:{layout:{grid:y}},layoutAttributes:y,sizeDefaults:S,contentDefaults:F}}),m1=s((ot,Me)=>{Me.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc"}}),Uy=s((ot,Me)=>{var m=zn(),l=ff(),d=rt(),x=Bp(),v=m1();Me.exports=function(y,w,S,c){var F="error_"+c.axis,b=x.newContainer(w,F),R=y[F]||{};function B(L,j){return d.coerce(R,b,v,L,j)}var O=R.array!==void 0||R.value!==void 0||R.type==="sqrt",P=B("visible",O);if(P!==!1){var D=B("type","array"in R?"data":"percent"),H=!0;D!=="sqrt"&&(H=B("symmetric",!((D==="data"?"arrayminus":"valueminus")in R))),D==="data"?(B("array"),B("traceref"),H||(B("arrayminus"),B("tracerefminus"))):(D==="percent"||D==="constant")&&(B("value"),H||B("valueminus"));var C="copy_"+c.inherit+"style";if(c.inherit){var A=w["error_"+c.inherit];(A||{}).visible&&B(C,!(R.color||m(R.thickness)||m(R.width)))}(!c.inherit||!b[C])&&(B("color",S),B("thickness"),B("width",l.traceIs(w,"gl3d")?0:4))}}}),ev=s((ot,Me)=>{Me.exports=function(l){var d=l.type,x=l.symmetric;if(d==="data"){var v=l.array||[];if(x)return function(c,F){var b=+v[F];return[b,b]};var y=l.arrayminus||[];return function(c,F){var b=+v[F],R=+y[F];return!isNaN(b)||!isNaN(R)?[R||0,b||0]:[NaN,NaN]}}else{var w=m(d,l.value),S=m(d,l.valueminus);return x||l.valueminus===void 0?function(c){var F=w(c);return[F,F]}:function(c){return[S(c),w(c)]}}};function m(l,d){if(l==="percent")return function(x){return Math.abs(x*d/100)};if(l==="constant")return function(){return Math.abs(d)};if(l==="sqrt")return function(x){return Math.sqrt(Math.abs(x))}}}),uv=s((ot,Me)=>{var m=zn(),l=ff(),d=Ud(),x=rt(),v=ev();Me.exports=function(w){for(var S=w.calcdata,c=0;c<S.length;c++){var F=S[c],b=F[0].trace;if(b.visible===!0&&l.traceIs(b,"errorBarsOK")){var R=d.getFromId(w,b.xaxis),B=d.getFromId(w,b.yaxis);y(F,b,R,"x"),y(F,b,B,"y")}}};function y(w,S,c,F){var b=S["error_"+F]||{},R=b.visible&&["linear","log"].indexOf(c.type)!==-1,B=[];if(R){for(var O=v(b),P=0;P<w.length;P++){var D=w[P],H=D.i;if(H===void 0)H=P;else if(H===null)continue;var C=D[F];if(m(c.c2l(C))){var A=O(C,H);if(m(A[0])&&m(A[1])){var L=D[F+"s"]=C-A[0],j=D[F+"h"]=C+A[1];B.push(L,j)}}}var Z=c._id,nl=S._extremes[Z],Pe=d.findExtremes(c,B,x.extendFlat({tozero:nl.opts.tozero},{padded:!0}));nl.min=nl.min.concat(Pe.min),nl.max=nl.max.concat(Pe.max)}}}),v1=s((ot,Me)=>{var m=$(),l=zn(),d=Qd(),x=Zu();Me.exports=function(y,w,S,c){var F,b=S.xaxis,R=S.yaxis,B=c&&c.duration>0,O=y._context.staticPlot;w.each(function(P){var D=P[0].trace,H=D.error_x||{},C=D.error_y||{},A;D.ids&&(A=function(nl){return nl.id});var L=x.hasMarkers(D)&&D.marker.maxdisplayed>0;!C.visible&&!H.visible&&(P=[]);var j=m.select(this).selectAll("g.errorbar").data(P,A);if(j.exit().remove(),!!P.length){H.visible||j.selectAll("path.xerror").remove(),C.visible||j.selectAll("path.yerror").remove(),j.style("opacity",1);var Z=j.enter().append("g").classed("errorbar",!0);B&&Z.style("opacity",0).transition().duration(c.duration).style("opacity",1),d.setClipUrl(j,S.layerClipId,y),j.each(function(nl){var Pe=m.select(this),se=v(nl,b,R);if(!(L&&!nl.vis)){var q,ol=Pe.select("path.yerror");if(C.visible&&l(se.x)&&l(se.yh)&&l(se.ys)){var nt=C.width;q="M"+(se.x-nt)+","+se.yh+"h"+2*nt+"m-"+nt+",0V"+se.ys,se.noYS||(q+="m-"+nt+",0h"+2*nt),F=!ol.size(),F?ol=Pe.append("path").style("vector-effect",O?"none":"non-scaling-stroke").classed("yerror",!0):B&&(ol=ol.transition().duration(c.duration).ease(c.easing)),ol.attr("d",q)}else ol.remove();var In=Pe.select("path.xerror");if(H.visible&&l(se.y)&&l(se.xh)&&l(se.xs)){var _t=(H.copy_ystyle?C:H).width;q="M"+se.xh+","+(se.y-_t)+"v"+2*_t+"m0,-"+_t+"H"+se.xs,se.noXS||(q+="m0,-"+_t+"v"+2*_t),F=!In.size(),F?In=Pe.append("path").style("vector-effect",O?"none":"non-scaling-stroke").classed("xerror",!0):B&&(In=In.transition().duration(c.duration).ease(c.easing)),In.attr("d",q)}else In.remove()}})}})};function v(y,w,S){var c={x:w.c2p(y.x),y:S.c2p(y.y)};return y.yh!==void 0&&(c.yh=S.c2p(y.yh),c.ys=S.c2p(y.ys),l(c.ys)||(c.noYS=!0,c.ys=S.c2p(y.ys,!0))),y.xh!==void 0&&(c.xh=w.c2p(y.xh),c.xs=w.c2p(y.xs),l(c.xs)||(c.noXS=!0,c.xs=w.c2p(y.xs,!0))),c}}),Gv=s((ot,Me)=>{var m=$(),l=oh();Me.exports=function(d){d.each(function(x){var v=x[0].trace,y=v.error_y||{},w=v.error_x||{},S=m.select(this);S.selectAll("path.yerror").style("stroke-width",y.thickness+"px").call(l.stroke,y.color),w.copy_ystyle&&(w=y),S.selectAll("path.xerror").style("stroke-width",w.thickness+"px").call(l.stroke,w.color)})}}),Vv=s((ot,Me)=>{var m=rt(),l=uf().overrideAll,d=m1(),x={error_x:m.extendFlat({},d),error_y:m.extendFlat({},d)};delete x.error_x.copy_zstyle,delete x.error_y.copy_zstyle,delete x.error_y.copy_ystyle;var v={error_x:m.extendFlat({},d),error_y:m.extendFlat({},d),error_z:m.extendFlat({},d)};delete v.error_x.copy_ystyle,delete v.error_y.copy_ystyle,delete v.error_z.copy_ystyle,delete v.error_z.copy_zstyle,Me.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:x,bar:x,histogram:x,scatter3d:l(v,"calc","nested"),scattergl:l(x,"calc","nested")}},supplyDefaults:Uy(),calc:uv(),makeComputeError:ev(),plot:v1(),style:Gv(),hoverInfo:y};function y(w,S,c){(S.error_y||{}).visible&&(c.yerr=w.yh-w.y,S.error_y.symmetric||(c.yerrneg=w.y-w.ys)),(S.error_x||{}).visible&&(c.xerr=w.xh-w.x,S.error_x.symmetric||(c.xerrneg=w.x-w.xs))}}),y1=s((ot,Me)=>{Me.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}}),e3=s((ot,Me)=>{var m=$(),l=$l(),d=Vf(),x=ff(),v=Ud(),y=Th(),w=rt(),S=w.strTranslate,c=Bl().extendFlat,F=dp(),b=Qd(),R=oh(),B=ih(),O=Kg(),P=If().flipScale,D=C2(),H=ry(),C=dd(),A=$f(),L=A.LINE_SPACING,j=A.FROM_TL,Z=A.FROM_BR,nl=y1().cn;function Pe(_t){var Fn=_t._fullLayout,al=Fn._infolayer.selectAll("g."+nl.colorbar).data(se(_t),function(sl){return sl._id});al.enter().append("g").attr("class",function(sl){return sl._id}).classed(nl.colorbar,!0),al.each(function(sl){var ce=m.select(this);w.ensureSingle(ce,"rect",nl.cbbg),w.ensureSingle(ce,"g",nl.cbfills),w.ensureSingle(ce,"g",nl.cblines),w.ensureSingle(ce,"g",nl.cbaxis,function(ul){ul.classed(nl.crisp,!0)}),w.ensureSingle(ce,"g",nl.cbtitleunshift,function(ul){ul.append("g").classed(nl.cbtitle,!0)}),w.ensureSingle(ce,"rect",nl.cboutline);var ll=q(ce,sl,_t);ll&&ll.then&&(_t._promises||[]).push(ll),_t._context.edits.colorbarPosition&&ol(ce,sl,_t)}),al.exit().each(function(sl){d.autoMargin(_t,sl._id)}).remove(),al.order()}function se(_t){var Fn=_t._fullLayout,al=_t.calcdata,sl=[],ce,ll,ul,fl;function bl(U){return c(U,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function El(){typeof fl.calc=="function"?fl.calc(_t,ul,ce):(ce._fillgradient=ll.reversescale?P(ll.colorscale):ll.colorscale,ce._zrange=[ll[fl.min],ll[fl.max]])}for(var Ul=0;Ul<al.length;Ul++){var ql=al[Ul];if(ul=ql[0].trace,!!ul._module){var gu=ul._module.colorbar;if(ul.visible===!0&&gu)for(var Bn=Array.isArray(gu),il=Bn?gu:[gu],X=0;X<il.length;X++){fl=il[X];var cl=fl.container;ll=cl?ul[cl]:ul,ll&&ll.showscale&&(ce=bl(ll.colorbar),ce._id="cb"+ul.uid+(Bn&&cl?"-"+cl:""),ce._traceIndex=ul.index,ce._propPrefix=(cl?cl+".":"")+"colorbar.",ce._meta=ul._meta,El(),sl.push(ce))}}}for(var Sl in Fn._colorAxes)if(ll=Fn[Sl],ll.showscale){var st=Fn._colorAxes[Sl];ce=bl(ll.colorbar),ce._id="cb"+Sl,ce._propPrefix=Sl+".colorbar.",ce._meta=Fn._meta,fl={min:"cmin",max:"cmax"},st[0]!=="heatmap"&&(ul=st[1],fl.calc=ul._module.colorbar.calc),El(),sl.push(ce)}return sl}function q(_t,Fn,al){var sl=Fn.orientation==="v",ce=Fn.len,ll=Fn.lenmode,ul=Fn.thickness,fl=Fn.thicknessmode,bl=Fn.outlinewidth,El=Fn.borderwidth,Ul=Fn.bgcolor,ql=Fn.xanchor,gu=Fn.yanchor,Bn=Fn.xpad,il=Fn.ypad,X=Fn.x,cl=sl?Fn.y:1-Fn.y,Sl=Fn.yref==="paper",st=Fn.xref==="paper",U=al._fullLayout,re=U._size,Ft=Fn._fillcolor,ls=Fn._line,_l=Fn.title,Ll=_l.side,zl=Fn._zrange||m.extent((typeof Ft=="function"?Ft:ls.color).domain()),yu=typeof ls.color=="function"?ls.color:function(){return ls.color},Vu=typeof Ft=="function"?Ft:function(){return Ft},od=Fn._levels,Ad=nt(al,Fn,zl),vd=Ad.fill,fd=Ad.line,Kl=Math.round(ul*(fl==="fraction"?sl?re.w:re.h:1)),vu=Kl/(sl?re.w:re.h),Rl=Math.round(ce*(ll==="fraction"?sl?re.h:re.w:1)),Wu=Rl/(sl?re.h:re.w),cd=st?re.w:al._fullLayout.width,xd=Sl?re.h:al._fullLayout.height,Td=Math.round(sl?X*cd+Bn:cl*xd+il),Pd={center:.5,right:1}[ql]||0,Hd={top:1,middle:.5}[gu]||0,$d=sl?X-Pd*vu:cl-Hd*vu,Wd=sl?cl-Hd*Wu:X-Pd*Wu,mh=Math.round(sl?xd*(1-Wd):cd*Wd);Fn._lenFrac=Wu,Fn._thickFrac=vu,Fn._uFrac=$d,Fn._vFrac=Wd;var Dd=Fn._axis=In(al,Fn,zl);Dd.position=vu+(sl?X+Bn/re.w:cl+il/re.h);var bh=["top","bottom"].indexOf(Ll)!==-1;if(sl&&bh&&(Dd.title.side=Ll,Dd.titlex=X+Bn/re.w,Dd.titley=Wd+(_l.side==="top"?Wu-il/re.h:il/re.h)),!sl&&!bh&&(Dd.title.side=Ll,Dd.titley=cl+il/re.h,Dd.titlex=Wd+Bn/re.w),ls.color&&Fn.tickmode==="auto"){Dd.tickmode="linear",Dd.tick0=od.start;var Dh=od.size,vh=w.constrain(Rl/50,4,15)+1,Gh=(zl[1]-zl[0])/((Fn.nticks||vh)*Dh);if(Gh>1){var Ql=Math.pow(10,Math.floor(Math.log(Gh)/Math.LN10));Dh*=Ql*w.roundUp(Gh/Ql,[2,5,10]),(Math.abs(od.start)/od.size+1e-6)%1<2e-6&&(Dd.tick0=0)}Dd.dtick=Dh}Dd.domain=sl?[Wd+il/re.h,Wd+Wu-il/re.h]:[Wd+Bn/re.w,Wd+Wu-Bn/re.w],Dd.setScale(),_t.attr("transform",S(Math.round(re.l),Math.round(re.t)));var Ku=_t.select("."+nl.cbtitleunshift).attr("transform",S(-Math.round(re.l),-Math.round(re.t))),gl=Dd.ticklabelposition,Dl=Dd.title.font.size,Vl=_t.select("."+nl.cbaxis),Mu,Nu=0,ed=0;function sd(Jd,th){var Hh={propContainer:Dd,propName:Fn._propPrefix+"title.text",traceIndex:Fn._traceIndex,_meta:Fn._meta,placeholder:U._dfltTitle.colorbar,containerGroup:_t.select("."+nl.cbtitle)},sp=Jd.charAt(0)==="h"?Jd.substr(1):"h"+Jd;_t.selectAll("."+sp+",."+sp+"-math-group").remove(),B.draw(al,Jd,c(Hh,th||{}))}function Sd(){if(sl&&bh||!sl&&!bh){var Jd,th;Ll==="top"&&(Jd=Bn+re.l+cd*X,th=il+re.t+xd*(1-Wd-Wu)+3+Dl*.75),Ll==="bottom"&&(Jd=Bn+re.l+cd*X,th=il+re.t+xd*(1-Wd)-3-Dl*.25),Ll==="right"&&(th=il+re.t+xd*cl+3+Dl*.75,Jd=Bn+re.l+cd*Wd),sd(Dd._id+"title",{attributes:{x:Jd,y:th,"text-anchor":sl?"start":"middle"}})}}function yd(){if(sl&&!bh||!sl&&bh){var Jd=Dd.position||0,th=Dd._offset+Dd._length/2,Hh,sp;if(Ll==="right")sp=th,Hh=re.l+cd*Jd+10+Dl*(Dd.showticklabels?1:.5);else if(Hh=th,Ll==="bottom"&&(sp=re.t+xd*Jd+10+(gl.indexOf("inside")===-1?Dd.tickfont.size:0)+(Dd.ticks!=="inside"&&Fn.ticklen||0)),Ll==="top"){var xp=_l.text.split("<br>").length;sp=re.t+xd*Jd+10-Kl-L*Dl*xp}sd((sl?"h":"v")+Dd._id+"title",{avoid:{selection:m.select(al).selectAll("g."+Dd._id+"tick"),side:Ll,offsetTop:sl?0:re.t,offsetLeft:sl?re.l:0,maxShift:sl?U.width:U.height},attributes:{x:Hh,y:sp,"text-anchor":"middle"},transform:{rotate:sl?-90:0,offset:0}})}}function bd(){if(!sl&&!bh||sl&&bh){var Jd=_t.select("."+nl.cbtitle),th=Jd.select("text"),Hh=[-bl/2,bl/2],sp=Jd.select(".h"+Dd._id+"title-math-group").node(),xp=15.6;th.node()&&(xp=parseInt(th.node().style.fontSize,10)*L);var Pp;if(sp?(Pp=b.bBox(sp),ed=Pp.width,Nu=Pp.height,Nu>xp&&(Hh[1]-=(Nu-xp)/2)):th.node()&&!th.classed(nl.jsPlaceholder)&&(Pp=b.bBox(th.node()),ed=Pp.width,Nu=Pp.height),sl){if(Nu){if(Nu+=5,Ll==="top")Dd.domain[1]-=Nu/re.h,Hh[1]*=-1;else{Dd.domain[0]+=Nu/re.h;var Up=O.lineCount(th);Hh[1]+=(1-Up)*xp}Jd.attr("transform",S(Hh[0],Hh[1])),Dd.setScale()}}else ed&&(Ll==="right"&&(Dd.domain[0]+=(ed+Dl/2)/re.w),Jd.attr("transform",S(Hh[0],Hh[1])),Dd.setScale())}_t.selectAll("."+nl.cbfills+",."+nl.cblines).attr("transform",sl?S(0,Math.round(re.h*(1-Dd.domain[1]))):S(Math.round(re.w*Dd.domain[0]),0)),Vl.attr("transform",sl?S(0,Math.round(-re.t)):S(Math.round(-re.l),0));var fp=_t.select("."+nl.cbfills).selectAll("rect."+nl.cbfill).attr("style","").data(vd);fp.enter().append("rect").classed(nl.cbfill,!0).attr("style",""),fp.exit().remove();var zh=zl.map(Dd.c2p).map(Math.round).sort(function(Sp,mp){return Sp-mp});fp.each(function(Sp,mp){var af=[mp===0?zl[0]:(vd[mp]+vd[mp-1])/2,mp===vd.length-1?zl[1]:(vd[mp]+vd[mp+1])/2].map(Dd.c2p).map(Math.round);sl&&(af[1]=w.constrain(af[1]+(af[1]>af[0])?1:-1,zh[0],zh[1]));var _f=m.select(this).attr(sl?"x":"y",Td).attr(sl?"y":"x",m.min(af)).attr(sl?"width":"height",Math.max(Kl,2)).attr(sl?"height":"width",Math.max(m.max(af)-m.min(af),2));if(Fn._fillgradient)b.gradient(_f,al,Fn._id,sl?"vertical":"horizontalreversed",Fn._fillgradient,"fill");else{var Lp=Vu(Sp).replace("e-","");_f.attr("fill",l(Lp).toHexString())}});var kp=_t.select("."+nl.cblines).selectAll("path."+nl.cbline).data(ls.color&&ls.width?fd:[]);kp.enter().append("path").classed(nl.cbline,!0),kp.exit().remove(),kp.each(function(Sp){var mp=Td,af=Math.round(Dd.c2p(Sp))+ls.width/2%1;m.select(this).attr("d","M"+(sl?mp+","+af:af+","+mp)+(sl?"h":"v")+Kl).call(b.lineGroupStyle,ls.width,yu(Sp),ls.dash)}),Vl.selectAll("g."+Dd._id+"tick,path").remove();var qh=Td+Kl+(bl||0)/2-(Fn.ticks==="outside"?1:0),bp=v.calcTicks(Dd),wp=v.getTickSigns(Dd)[2];return v.drawTicks(al,Dd,{vals:Dd.ticks==="inside"?v.clipEnds(Dd,bp):bp,layer:Vl,path:v.makeTickPath(Dd,qh,wp),transFn:v.makeTransTickFn(Dd)}),v.drawLabels(al,Dd,{vals:bp,layer:Vl,transFn:v.makeTransTickLabelFn(Dd),labelFns:v.makeLabelFns(Dd,qh)})}function Kd(){var Jd,th=Kl+bl/2;gl.indexOf("inside")===-1&&(Jd=b.bBox(Vl.node()),th+=sl?Jd.width:Jd.height),Mu=Ku.select("text");var Hh=0,sp=sl&&Ll==="top",xp=!sl&&Ll==="right",Pp=0;if(Mu.node()&&!Mu.classed(nl.jsPlaceholder)){var Up,fp=Ku.select(".h"+Dd._id+"title-math-group").node();fp&&(sl&&bh||!sl&&!bh)?(Jd=b.bBox(fp),Hh=Jd.width,Up=Jd.height):(Jd=b.bBox(Ku.node()),Hh=Jd.right-re.l-(sl?Td:mh),Up=Jd.bottom-re.t-(sl?mh:Td),!sl&&Ll==="top"&&(th+=Jd.height,Pp=Jd.height)),xp&&(Mu.attr("transform",S(Hh/2+Dl/2,0)),Hh*=2),th=Math.max(th,sl?Hh:Up)}var zh=(sl?Bn:il)*2+th+El+bl/2,kp=0;!sl&&_l.text&&gu==="bottom"&&cl<=0&&(kp=zh/2,zh+=kp,Pp+=kp),U._hColorbarMoveTitle=kp,U._hColorbarMoveCBTitle=Pp;var qh=El+bl,bp=(sl?Td:mh)-qh/2-(sl?Bn:0),wp=(sl?mh:Td)-(sl?Rl:il+Pp-kp);_t.select("."+nl.cbbg).attr("x",bp).attr("y",wp).attr(sl?"width":"height",Math.max(zh-kp,2)).attr(sl?"height":"width",Math.max(Rl+qh,2)).call(R.fill,Ul).call(R.stroke,Fn.bordercolor).style("stroke-width",El);var Sp=xp?Math.max(Hh-10,0):0;_t.selectAll("."+nl.cboutline).attr("x",(sl?Td:mh+Bn)+Sp).attr("y",(sl?mh+il-Rl:Td)+(sp?Nu:0)).attr(sl?"width":"height",Math.max(Kl,2)).attr(sl?"height":"width",Math.max(Rl-(sl?2*il+Nu:2*Bn+Sp),2)).call(R.stroke,Fn.outlinecolor).style({fill:"none","stroke-width":bl});var mp=sl?Pd*zh:0,af=sl?0:(1-Hd)*zh-Pp;if(mp=st?re.l-mp:-mp,af=Sl?re.t-af:-af,_t.attr("transform",S(mp,af)),!sl&&(El||l(Ul).getAlpha()&&!l.equals(U.paper_bgcolor,Ul))){var _f=Vl.selectAll("text"),Lp=_f[0].length,Ef=_t.select("."+nl.cbbg).node(),Lf=b.bBox(Ef),rg=b.getTranslate(_t),ng=2;_f.each(function(hd,$u){var Xu=0,md=Lp-1;if($u===Xu||$u===md){var ld=b.bBox(this),Ld=b.getTranslate(this),zd;if($u===md){var gh=ld.right+Ld.x,ep=Lf.right+rg.x+mh-El-ng+X;zd=ep-gh,zd>0&&(zd=0)}else if($u===Xu){var Bh=ld.left+Ld.x,up=Lf.left+rg.x+mh+El+ng;zd=up-Bh,zd<0&&(zd=0)}zd&&(Lp<3?this.setAttribute("transform","translate("+zd+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var gf={},Rf=j[ql],yf=Z[ql],cp=j[gu],_g=Z[gu],wl=zh-Kl;sl?(ll==="pixels"?(gf.y=cl,gf.t=Rl*cp,gf.b=Rl*_g):(gf.t=gf.b=0,gf.yt=cl+ce*cp,gf.yb=cl-ce*_g),fl==="pixels"?(gf.x=X,gf.l=zh*Rf,gf.r=zh*yf):(gf.l=wl*Rf,gf.r=wl*yf,gf.xl=X-ul*Rf,gf.xr=X+ul*yf)):(ll==="pixels"?(gf.x=X,gf.l=Rl*Rf,gf.r=Rl*yf):(gf.l=gf.r=0,gf.xl=X+ce*Rf,gf.xr=X-ce*yf),fl==="pixels"?(gf.y=1-cl,gf.t=zh*cp,gf.b=zh*_g):(gf.t=wl*cp,gf.b=wl*_g,gf.yt=cl-ul*cp,gf.yb=cl+ul*_g));var pl=Fn.y<.5?"b":"t",Yu=Fn.x<.5?"l":"r";al._fullLayout._reservedMargin[Fn._id]={};var Ju={r:U.width-bp-mp,l:bp+gf.r,b:U.height-wp-af,t:wp+gf.b};st&&Sl?d.autoMargin(al,Fn._id,gf):st?al._fullLayout._reservedMargin[Fn._id][pl]=Ju[pl]:Sl||sl?al._fullLayout._reservedMargin[Fn._id][Yu]=Ju[Yu]:al._fullLayout._reservedMargin[Fn._id][pl]=Ju[pl]}return w.syncOrAsync([d.previousPromises,Sd,bd,yd,d.previousPromises,Kd],al)}function ol(_t,Fn,al){var sl=Fn.orientation==="v",ce=al._fullLayout,ll=ce._size,ul,fl,bl;y.init({element:_t.node(),gd:al,prepFn:function(){ul=_t.attr("transform"),F(_t)},moveFn:function(El,Ul){_t.attr("transform",ul+S(El,Ul)),fl=y.align((sl?Fn._uFrac:Fn._vFrac)+El/ll.w,sl?Fn._thickFrac:Fn._lenFrac,0,1,Fn.xanchor),bl=y.align((sl?Fn._vFrac:1-Fn._uFrac)-Ul/ll.h,sl?Fn._lenFrac:Fn._thickFrac,0,1,Fn.yanchor);var ql=y.getCursor(fl,bl,Fn.xanchor,Fn.yanchor);F(_t,ql)},doneFn:function(){if(F(_t),fl!==void 0&&bl!==void 0){var El={};El[Fn._propPrefix+"x"]=fl,El[Fn._propPrefix+"y"]=bl,Fn._traceIndex!==void 0?x.call("_guiRestyle",al,El,Fn._traceIndex):x.call("_guiRelayout",al,El)}}})}function nt(_t,Fn,al){var sl=Fn._levels,ce=[],ll=[],ul,fl,bl=sl.end+sl.size/100,El=sl.size,Ul=1.001*al[0]-.001*al[1],ql=1.001*al[1]-.001*al[0];for(fl=0;fl<1e5&&(ul=sl.start+fl*El,!(El>0?ul>=bl:ul<=bl));fl++)ul>Ul&&ul<ql&&ce.push(ul);if(Fn._fillgradient)ll=[0];else if(typeof Fn._fillcolor=="function"){var gu=Fn._filllevels;if(gu)for(bl=gu.end+gu.size/100,El=gu.size,fl=0;fl<1e5&&(ul=gu.start+fl*El,!(El>0?ul>=bl:ul<=bl));fl++)ul>al[0]&&ul<al[1]&&ll.push(ul);else ll=ce.map(function(Bn){return Bn-sl.size/2}),ll.push(ll[ll.length-1]+sl.size)}else Fn._fillcolor&&typeof Fn._fillcolor=="string"&&(ll=[0]);return sl.size<0&&(ce.reverse(),ll.reverse()),{line:ce,fill:ll}}function In(_t,Fn,al){var sl=_t._fullLayout,ce=Fn.orientation==="v",ll={type:"linear",range:al,tickmode:Fn.tickmode,nticks:Fn.nticks,tick0:Fn.tick0,dtick:Fn.dtick,tickvals:Fn.tickvals,ticktext:Fn.ticktext,ticks:Fn.ticks,ticklen:Fn.ticklen,tickwidth:Fn.tickwidth,tickcolor:Fn.tickcolor,showticklabels:Fn.showticklabels,labelalias:Fn.labelalias,ticklabelposition:Fn.ticklabelposition,ticklabeloverflow:Fn.ticklabeloverflow,ticklabelstep:Fn.ticklabelstep,tickfont:Fn.tickfont,tickangle:Fn.tickangle,tickformat:Fn.tickformat,exponentformat:Fn.exponentformat,minexponent:Fn.minexponent,separatethousands:Fn.separatethousands,showexponent:Fn.showexponent,showtickprefix:Fn.showtickprefix,tickprefix:Fn.tickprefix,showticksuffix:Fn.showticksuffix,ticksuffix:Fn.ticksuffix,title:Fn.title,showline:!0,anchor:"free",side:ce?"right":"bottom",position:1},ul=ce?"y":"x",fl={type:"linear",_id:ul+Fn._id},bl={letter:ul,font:sl.font,noAutotickangles:ul==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:sl.calendar};function El(Ul,ql){return w.coerce(ll,fl,C,Ul,ql)}return D(ll,fl,El,bl,sl),H(ll,fl,El,bl),fl}Me.exports={draw:Pe}}),cy=s((ot,Me)=>{Me.exports={moduleType:"component",name:"colorbar",attributes:f(),supplyDefaults:mu(),draw:e3().draw,hasColorbar:Q()}}),a1=s((ot,Me)=>{Me.exports={moduleType:"component",name:"legend",layoutAttributes:ap(),supplyLayoutDefaults:Mh(),draw:Hp(),style:$p()}}),O0=s((ot,Me)=>{Me.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}}),c0=s((ot,Me)=>{Me.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}}),Jm=s((ot,Me)=>{var m=ff(),l=rt(),d=l.extendFlat,x=l.extendDeep;function v(w){var S;switch(w){case"themes__thumb":S={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":S={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:S={}}return S}function y(w){var S=["xaxis","yaxis","zaxis"];return S.indexOf(w.slice(0,5))>-1}Me.exports=function(w,S){var c,F=w.data,b=w.layout,R=x([],F),B=x({},b,v(S.tileClass)),O=w._context||{};if(S.width&&(B.width=S.width),S.height&&(B.height=S.height),S.tileClass==="thumbnail"||S.tileClass==="themes__thumb"){B.annotations=[];var P=Object.keys(B);for(c=0;c<P.length;c++)y(P[c])&&(B[P[c]].title={text:""});for(c=0;c<R.length;c++){var D=R[c];D.showscale=!1,D.marker&&(D.marker.showscale=!1),m.traceIs(D,"pie-like")&&(D.textposition="none")}}if(Array.isArray(S.annotations))for(c=0;c<S.annotations.length;c++)B.annotations.push(S.annotations[c]);var H=Object.keys(B).filter(function(Z){return Z.match(/^scene\d*$/)});if(H.length){var C={};for(S.tileClass==="thumbnail"&&(C={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),c=0;c<H.length;c++){var A=B[H[c]];A.xaxis||(A.xaxis={}),A.yaxis||(A.yaxis={}),A.zaxis||(A.zaxis={}),d(A.xaxis,C),d(A.yaxis,C),d(A.zaxis,C),A._scene=null}}var L=document.createElement("div");S.tileClass&&(L.className=S.tileClass);var j={gd:L,td:L,layout:B,data:R,config:{staticPlot:S.staticPlot===void 0?!0:S.staticPlot,plotGlPixelRatio:S.plotGlPixelRatio===void 0?2:S.plotGlPixelRatio,displaylogo:S.displaylogo||!1,showLink:S.showLink||!1,showTips:S.showTips||!1,mapboxAccessToken:O.mapboxAccessToken}};return S.setBackground!=="transparent"&&(j.config.setBackground=S.setBackground||"opaque"),j.gd.defaultLayout=v(S.tileClass),j}}),dv=s((ot,Me)=>{var m=ph().EventEmitter,l=ff(),d=rt(),x=k0(),v=Jm(),y=e1(),w=Oy();function S(c,F){var b=new m,R=v(c,{format:"png"}),B=R.gd;B.style.position="absolute",B.style.left="-5000px",document.body.appendChild(B);function O(){var D=x.getDelay(B._fullLayout);setTimeout(function(){var H=y(B),C=document.createElement("canvas");C.id=d.randstr(),b=w({format:F.format,width:B._fullLayout.width,height:B._fullLayout.height,canvas:C,emitter:b,svg:H}),b.clean=function(){B&&document.body.removeChild(B)}},D)}var P=x.getRedrawFunc(B);return l.call("_doPlot",B,R.data,R.layout,R.config).then(P).then(O).catch(function(D){b.emit("error",D)}),b}Me.exports=S}),R2=s((ot,Me)=>{var m=k0(),l={getDelay:m.getDelay,getRedrawFunc:m.getRedrawFunc,clone:Jm(),toSVG:e1(),svgToImg:Oy(),toImage:dv(),downloadImage:v2()};Me.exports=l}),k2=s(ot=>{ot.version=_().version,M(),Uu();var Me=ff(),m=ot.register=Me.register,l=Q0(),d=Object.keys(l);for(v=0;v<d.length;v++)x=d[v],x.charAt(0)!=="_"&&(ot[x]=l[x]),m({moduleType:"apiMethod",name:x,fn:l[x]});var x,v;m(U2()),m([Gy(),_2(),Ev(),T1(),$0(),Bv(),I0(),X2(),n1(),P1(),Vv(),Gu(),cy(),a1(),Xf(),tp()]),m([O0(),c0()]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(m(window.PlotlyLocales),delete window.PlotlyLocales),ot.Icons=vg();var y=Xf(),w=Vf();ot.Plots={resize:w.resize,graphJson:w.graphJson,sendDataToCloud:w.sendDataToCloud},ot.Fx={hover:y.hover,unhover:y.unhover,loneHover:y.loneHover,loneUnhover:y.loneUnhover},ot.Snapshot=R2(),ot.PlotSchema=of()}),uy=s((ot,Me)=>{Me.exports=k2()}),D1=s((ot,Me)=>{Me.exports={TEXTPAD:3,eventDataKeys:["value","label"]}}),L1=s((ot,Me)=>{var m=H0(),l=Mm().axisHoverFormat,d=Vg().hovertemplateAttrs,x=Vg().texttemplateAttrs,v=E(),y=Pu(),w=D1(),S=Gf().pattern,c=Bl().extendFlat,F=y({editType:"calc",arrayOk:!0,colorEditType:"style"}),b=m.marker,R=b.line,B=c({},R.width,{dflt:0}),O=c({width:B,editType:"calc"},v("marker.line")),P=c({line:O,editType:"calc"},v("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:S,cornerradius:{valType:"any",editType:"calc"}});Me.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:m.text,texttemplate:x({editType:"plot"},{keys:w.eventDataKeys}),hovertext:m.hovertext,hovertemplate:d({},{keys:w.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:c({},F,{}),insidetextfont:c({},F,{}),outsidetextfont:c({},F,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:c({},m.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:P,offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:{marker:{opacity:m.selected.marker.opacity,color:m.selected.marker.color,editType:"style"},textfont:m.selected.textfont,editType:"style"},unselected:{marker:{opacity:m.unselected.marker.opacity,color:m.unselected.marker.color,editType:"style"},textfont:m.unselected.textfont,editType:"style"},zorder:m.zorder}}),I1=s((ot,Me)=>{Me.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}}),T2=s((ot,Me)=>{var m=oh(),l=If().hasColorscale,d=Xl(),x=rt().coercePattern;Me.exports=function(v,y,w,S,c){var F=w("marker.color",S),b=l(v,"marker");b&&d(v,y,c,w,{prefix:"marker.",cLetter:"c"}),w("marker.line.color",m.defaultLine),l(v,"marker.line")&&d(v,y,c,w,{prefix:"marker.line.",cLetter:"c"}),w("marker.line.width"),w("marker.opacity"),x(w,"marker.pattern",F,b),w("selected.marker.color"),w("unselected.marker.color")}}),jv=s((ot,Me)=>{var m=zn(),l=rt(),d=oh(),x=ff(),v=p1(),y=_1(),w=T2(),S=f1(),c=L1(),F=l.coerceFont;function b(P,D,H,C){function A(Pe,se){return l.coerce(P,D,c,Pe,se)}var L=v(P,D,C,A);if(!L){D.visible=!1;return}y(P,D,C,A),A("xhoverformat"),A("yhoverformat"),A("zorder"),A("orientation",D.x&&!D.y?"h":"v"),A("base"),A("offset"),A("width"),A("text"),A("hovertext"),A("hovertemplate");var j=A("textposition");O(P,D,C,A,j,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),w(P,D,A,H,C);var Z=(D.marker.line||{}).color,nl=x.getComponentMethod("errorbars","supplyDefaults");nl(P,D,Z||d.defaultLine,{axis:"y"}),nl(P,D,Z||d.defaultLine,{axis:"x",inherit:"y"}),l.coerceSelectionMarkerOpacity(D,A)}function R(P,D){var H,C;function A(Z,nl){return l.coerce(C._input,C,c,Z,nl)}for(var L=0;L<P.length;L++)if(C=P[L],C.type==="bar"){H=C._input;var j=A("marker.cornerradius",D.barcornerradius);C.marker&&(C.marker.cornerradius=B(j)),S(H,C,D,A,D.barmode)}}function B(P){if(m(P)){if(P=+P,P>=0)return P}else if(typeof P=="string"&&(P=P.trim(),P.slice(-1)==="%"&&m(P.slice(0,-1))&&(P=+P.slice(0,-1),P>=0)))return P+"%"}function O(P,D,H,C,A,L){L=L||{};var j=L.moduleHasSelected!==!1,Z=L.moduleHasUnselected!==!1,nl=L.moduleHasConstrain!==!1,Pe=L.moduleHasCliponaxis!==!1,se=L.moduleHasTextangle!==!1,q=L.moduleHasInsideanchor!==!1,ol=!!L.hasPathbar,nt=Array.isArray(A)||A==="auto",In=nt||A==="inside",_t=nt||A==="outside";if(In||_t){var Fn=F(C,"textfont",H.font),al=l.extendFlat({},Fn),sl=P.textfont&&P.textfont.color,ce=!sl;if(ce&&delete al.color,F(C,"insidetextfont",al),ol){var ll=l.extendFlat({},Fn);ce&&delete ll.color,F(C,"pathbar.textfont",ll)}_t&&F(C,"outsidetextfont",Fn),j&&C("selected.textfont.color"),Z&&C("unselected.textfont.color"),nl&&C("constraintext"),Pe&&C("cliponaxis"),se&&C("textangle"),C("texttemplate")}In&&q&&C("insidetextanchor")}Me.exports={supplyDefaults:b,crossTraceDefaults:R,handleText:O,validateCornerradius:B}}),Wy=s((ot,Me)=>{var m=ff(),l=Ud(),d=rt(),x=I1(),v=jv().validateCornerradius;Me.exports=function(y,w,S){function c(j,Z){return d.coerce(y,w,x,j,Z)}for(var F=!1,b=!1,R=!1,B={},O=c("barmode"),P=O==="group",D=0;D<S.length;D++){var H=S[D];if(m.traceIs(H,"bar")&&H.visible)F=!0;else continue;var C=H.xaxis+H.yaxis;if(P?(B[C]&&(R=!0),B[C]=!0):(C+=H._input.offsetgroup,B.length>0&&!B[C]&&(R=!0),B[C]=!0),H.visible&&H.type==="histogram"){var A=l.getFromId({_fullLayout:w},H[H.orientation==="v"?"xaxis":"yaxis"]);A.type!=="category"&&(b=!0)}}if(!F){delete w.barmode;return}O!=="overlay"&&c("barnorm"),c("bargap",b&&!R?0:.2),c("bargroupgap");var L=c("barcornerradius");w.barcornerradius=v(L)}}),dy=s((ot,Me)=>{var m=rt();Me.exports=function(l,d){for(var x=0;x<l.length;x++)l[x].i=x;m.mergeArray(d.text,l,"tx"),m.mergeArray(d.hovertext,l,"htx");var v=d.marker;if(v){m.mergeArray(v.opacity,l,"mo",!0),m.mergeArray(v.color,l,"mc");var y=v.line;y&&(m.mergeArray(y.color,l,"mlc"),m.mergeArrayCastPositive(y.width,l,"mlw"))}}}),O1=s((ot,Me)=>{var m=Ud(),l=K1(),d=If().hasColorscale,x=Jl(),v=dy(),y=X1();Me.exports=function(w,S){var c=m.getFromId(w,S.xaxis||"x"),F=m.getFromId(w,S.yaxis||"y"),b,R,B,O,P,D,H={msUTC:!!(S.base||S.base===0)};S.orientation==="h"?(b=c.makeCalcdata(S,"x",H),B=F.makeCalcdata(S,"y"),O=l(S,F,"y",B),P=!!S.yperiodalignment,D="y"):(b=F.makeCalcdata(S,"y",H),B=c.makeCalcdata(S,"x"),O=l(S,c,"x",B),P=!!S.xperiodalignment,D="x"),R=O.vals;for(var C=Math.min(R.length,b.length),A=new Array(C),L=0;L<C;L++)A[L]={p:R[L],s:b[L]},P&&(A[L].orig_p=B[L],A[L][D+"End"]=O.ends[L],A[L][D+"Start"]=O.starts[L]),S.ids&&(A[L].id=String(S.ids[L]));return d(S,"marker")&&x(w,S,{vals:S.marker.color,containerStr:"marker",cLetter:"c"}),d(S,"marker.line")&&x(w,S,{vals:S.marker.line.color,containerStr:"marker.line",cLetter:"c"}),v(A,S),y(A,S),A}}),x1=s((ot,Me)=>{var m=$(),l=rt();function d(w,S,c){var F=w._fullLayout,b=F["_"+c+"Text_minsize"];if(b){var R=F.uniformtext.mode==="hide",B;switch(c){case"funnelarea":case"pie":case"sunburst":B="g.slice";break;case"treemap":case"icicle":B="g.slice, g.pathbar";break;default:B="g.points > g.point"}S.selectAll(B).each(function(O){var P=O.transform;if(P){P.scale=R&&P.hide?0:b/P.fontSize;var D=m.select(this).select("text");l.setTransormAndDisplay(D,P)}})}}function x(w,S,c){if(c.uniformtext.mode){var F=y(w),b=c.uniformtext.minsize,R=S.scale*S.fontSize;S.hide=R<b,c[F]=c[F]||1/0,S.hide||(c[F]=Math.min(c[F],Math.max(R,b)))}}function v(w,S){var c=y(w);S[c]=void 0}function y(w){return"_"+w+"Text_minsize"}Me.exports={recordMinTextSize:x,clearMinTextSize:v,resizeText:d}}),$y=s(ot=>{var Me=zn(),m=$l(),l=rt().isArrayOrTypedArray;ot.coerceString=function(d,x,v){if(typeof x=="string"){if(x||!d.noBlank)return x}else if((typeof x=="number"||x===!0)&&!d.strict)return String(x);return v!==void 0?v:d.dflt},ot.coerceNumber=function(d,x,v){if(Me(x)){x=+x;var y=d.min,w=d.max,S=y!==void 0&&x<y||w!==void 0&&x>w;if(!S)return x}return v!==void 0?v:d.dflt},ot.coerceColor=function(d,x,v){return m(x).isValid()?x:v!==void 0?v:d.dflt},ot.coerceEnumerated=function(d,x,v){return d.coerceNumber&&(x=+x),d.values.indexOf(x)!==-1?x:v!==void 0?v:d.dflt},ot.getValue=function(d,x){var v;return l(d)?x<d.length&&(v=d[x]):v=d,v},ot.getLineWidth=function(d,x){var v=0<x.mlw?x.mlw:l(d.marker.line.width)?0:d.marker.line.width;return v}}),qy=s((ot,Me)=>{var m=$(),l=oh(),d=Qd(),x=rt(),v=ff(),y=x1().resizeText,w=L1(),S=w.textfont,c=w.insidetextfont,F=w.outsidetextfont,b=$y();function R(Pe){var se=m.select(Pe).selectAll('g[class^="barlayer"]').selectAll("g.trace");y(Pe,se,"bar");var q=se.size(),ol=Pe._fullLayout;se.style("opacity",function(nt){return nt[0].trace.opacity}).each(function(nt){(ol.barmode==="stack"&&q>1||ol.bargap===0&&ol.bargroupgap===0&&!nt[0].trace.marker.line.width)&&m.select(this).attr("shape-rendering","crispEdges")}),se.selectAll("g.points").each(function(nt){var In=m.select(this),_t=nt[0].trace;B(In,_t,Pe)}),v.getComponentMethod("errorbars","style")(se)}function B(Pe,se,q){d.pointStyle(Pe.selectAll("path"),se,q),O(Pe,se,q)}function O(Pe,se,q){Pe.selectAll("text").each(function(ol){var nt=m.select(this),In=x.ensureUniformFontSize(q,C(nt,ol,se,q));d.font(nt,In)})}function P(Pe,se,q){var ol=se[0].trace;ol.selectedpoints?D(q,ol,Pe):(B(q,ol,Pe),v.getComponentMethod("errorbars","style")(q))}function D(Pe,se,q){d.selectedPointStyle(Pe.selectAll("path"),se),H(Pe.selectAll("text"),se,q)}function H(Pe,se,q){Pe.each(function(ol){var nt=m.select(this),In;if(ol.selected){In=x.ensureUniformFontSize(q,C(nt,ol,se,q));var _t=se.selected.textfont&&se.selected.textfont.color;_t&&(In.color=_t),d.font(nt,In)}else d.selectedTextStyle(nt,se)})}function C(Pe,se,q,ol){var nt=ol._fullLayout.font,In=q.textfont;if(Pe.classed("bartext-inside")){var _t=nl(se,q);In=L(q,se.i,nt,_t)}else Pe.classed("bartext-outside")&&(In=j(q,se.i,nt));return In}function A(Pe,se,q){return Z(S,Pe.textfont,se,q)}function L(Pe,se,q,ol){var nt=A(Pe,se,q),In=Pe._input.textfont===void 0||Pe._input.textfont.color===void 0||Array.isArray(Pe.textfont.color)&&Pe.textfont.color[se]===void 0;return In&&(nt={color:l.contrast(ol),family:nt.family,size:nt.size,weight:nt.weight,style:nt.style,variant:nt.variant,textcase:nt.textcase,lineposition:nt.lineposition,shadow:nt.shadow}),Z(c,Pe.insidetextfont,se,nt)}function j(Pe,se,q){var ol=A(Pe,se,q);return Z(F,Pe.outsidetextfont,se,ol)}function Z(Pe,se,q,ol){se=se||{};var nt=b.getValue(se.family,q),In=b.getValue(se.size,q),_t=b.getValue(se.color,q),Fn=b.getValue(se.weight,q),al=b.getValue(se.style,q),sl=b.getValue(se.variant,q),ce=b.getValue(se.textcase,q),ll=b.getValue(se.lineposition,q),ul=b.getValue(se.shadow,q);return{family:b.coerceString(Pe.family,nt,ol.family),size:b.coerceNumber(Pe.size,In,ol.size),color:b.coerceColor(Pe.color,_t,ol.color),weight:b.coerceString(Pe.weight,Fn,ol.weight),style:b.coerceString(Pe.style,al,ol.style),variant:b.coerceString(Pe.variant,sl,ol.variant),textcase:b.coerceString(Pe.variant,ce,ol.textcase),lineposition:b.coerceString(Pe.variant,ll,ol.lineposition),shadow:b.coerceString(Pe.variant,ul,ol.shadow)}}function nl(Pe,se){return se.type==="waterfall"?se[Pe.dir].marker.color:Pe.mcc||Pe.mc||se.marker.color}Me.exports={style:R,styleTextPoints:O,styleOnSelect:P,getInsideTextFont:L,getOutsideTextFont:j,getBarColor:nl,resizeText:y}}),kv=s((ot,Me)=>{var m=$(),l=zn(),d=rt(),x=Kg(),v=oh(),y=Qd(),w=ff(),S=Ud().tickText,c=x1(),F=c.recordMinTextSize,b=c.clearMinTextSize,R=qy(),B=$y(),O=D1(),P=L1(),D=P.text,H=P.textposition,C=wd().appendArrayPointValue,A=O.TEXTPAD;function L(El){return El.id}function j(El){if(El.ids)return L}function Z(El){return(El>0)-(El<0)}function nl(El,Ul){return El<Ul?1:-1}function Pe(El,Ul,ql,gu){var Bn=[],il=[],X=gu?Ul:ql,cl=gu?ql:Ul;return Bn[0]=X.c2p(El.s0,!0),il[0]=cl.c2p(El.p0,!0),Bn[1]=X.c2p(El.s1,!0),il[1]=cl.c2p(El.p1,!0),gu?[Bn,il]:[il,Bn]}function se(El,Ul,ql,gu){if(!Ul.uniformtext.mode&&q(ql)){var Bn;return gu&&(Bn=gu()),El.transition().duration(ql.duration).ease(ql.easing).each("end",function(){Bn&&Bn()}).each("interrupt",function(){Bn&&Bn()})}else return El}function q(El){return El&&El.duration>0}function ol(El,Ul,ql,gu,Bn,il){var X=Ul.xaxis,cl=Ul.yaxis,Sl=El._fullLayout,st=El._context.staticPlot;Bn||(Bn={mode:Sl.barmode,norm:Sl.barmode,gap:Sl.bargap,groupgap:Sl.bargroupgap},b("bar",Sl));var U=d.makeTraceGroups(gu,ql,"trace bars").each(function(re){var Ft=m.select(this),ls=re[0].trace,_l=re[0].t,Ll=ls.type==="waterfall",zl=ls.type==="funnel",yu=ls.type==="histogram",Vu=ls.type==="bar",od=Vu||zl,Ad=0;Ll&&ls.connector.visible&&ls.connector.mode==="between"&&(Ad=ls.connector.line.width/2);var vd=ls.orientation==="h",fd=q(Bn),Kl=d.ensureSingle(Ft,"g","points"),vu=j(ls),Rl=Kl.selectAll("g.point").data(d.identity,vu);Rl.enter().append("g").classed("point",!0),Rl.exit().remove(),Rl.each(function(cd,xd){var Td=m.select(this),Pd=Pe(cd,X,cl,vd),Hd=Pd[0][0],$d=Pd[0][1],Wd=Pd[1][0],mh=Pd[1][1],Dd=(vd?$d-Hd:mh-Wd)===0;Dd&&od&&B.getLineWidth(ls,cd)&&(Dd=!1),Dd||(Dd=!l(Hd)||!l($d)||!l(Wd)||!l(mh)),cd.isBlank=Dd,Dd&&(vd?$d=Hd:mh=Wd),Ad&&!Dd&&(vd?(Hd-=nl(Hd,$d)*Ad,$d+=nl(Hd,$d)*Ad):(Wd-=nl(Wd,mh)*Ad,mh+=nl(Wd,mh)*Ad));var bh,Dh;if(ls.type==="waterfall"){if(!Dd){var vh=ls[cd.dir].marker;bh=vh.line.width,Dh=vh.color}}else bh=B.getLineWidth(ls,cd),Dh=cd.mc||ls.marker.color;function Gh(qh){var bp=m.round(bh/2%1,2);return Bn.gap===0&&Bn.groupgap===0?m.round(Math.round(qh)-bp,2):qh}function Ql(qh,bp,wp){return wp&&qh===bp?qh:Math.abs(qh-bp)>=2?Gh(qh):qh>bp?Math.ceil(qh):Math.floor(qh)}var Ku=v.opacity(Dh),gl=Ku<1||bh>.01?Gh:Ql;El._context.staticPlot||(Hd=gl(Hd,$d,vd),$d=gl($d,Hd,vd),Wd=gl(Wd,mh,!vd),mh=gl(mh,Wd,!vd));var Dl=vd?X.c2p:cl.c2p,Vl;cd.s0>0?Vl=cd._sMax:cd.s0<0?Vl=cd._sMin:Vl=cd.s1>0?cd._sMax:cd._sMin;function Mu(qh,bp){if(!qh)return 0;var wp=Math.abs(vd?mh-Wd:$d-Hd),Sp=Math.abs(vd?$d-Hd:mh-Wd),mp=gl(Math.abs(Dl(Vl,!0)-Dl(0,!0))),af=cd.hasB?Math.min(wp/2,Sp/2):Math.min(wp/2,mp),_f;if(bp==="%"){var Lp=Math.min(50,qh);_f=wp*(Lp/100)}else _f=qh;return gl(Math.max(Math.min(_f,af),0))}var Nu=Vu||yu?Mu(_l.cornerradiusvalue,_l.cornerradiusform):0,ed,sd,Sd="M"+Hd+","+Wd+"V"+mh+"H"+$d+"V"+Wd+"Z",yd=0;if(Nu&&cd.s){var bd=Z(cd.s0)===0||Z(cd.s)===Z(cd.s0)?cd.s1:cd.s0;if(yd=gl(cd.hasB?0:Math.abs(Dl(Vl,!0)-Dl(bd,!0))),yd<Nu){var Kd=nl(Hd,$d),Jd=nl(Wd,mh),th=Kd===-Jd?1:0;if(vd)if(cd.hasB)ed="M"+(Hd+Nu*Kd)+","+Wd+"A "+Nu+","+Nu+" 0 0 "+th+" "+Hd+","+(Wd+Nu*Jd)+"V"+(mh-Nu*Jd)+"A "+Nu+","+Nu+" 0 0 "+th+" "+(Hd+Nu*Kd)+","+mh+"H"+($d-Nu*Kd)+"A "+Nu+","+Nu+" 0 0 "+th+" "+$d+","+(mh-Nu*Jd)+"V"+(Wd+Nu*Jd)+"A "+Nu+","+Nu+" 0 0 "+th+" "+($d-Nu*Kd)+","+Wd+"Z";else{sd=Math.abs($d-Hd)+yd;var Hh=sd<Nu?Nu-Math.sqrt(sd*(2*Nu-sd)):0,sp=yd>0?Math.sqrt(yd*(2*Nu-yd)):0,xp=Kd>0?Math.max:Math.min;ed="M"+Hd+","+Wd+"V"+(mh-Hh*Jd)+"H"+xp($d-(Nu-yd)*Kd,Hd)+"A "+Nu+","+Nu+" 0 0 "+th+" "+$d+","+(mh-Nu*Jd-sp)+"V"+(Wd+Nu*Jd+sp)+"A "+Nu+","+Nu+" 0 0 "+th+" "+xp($d-(Nu-yd)*Kd,Hd)+","+(Wd+Hh*Jd)+"Z"}else if(cd.hasB)ed="M"+(Hd+Nu*Kd)+","+Wd+"A "+Nu+","+Nu+" 0 0 "+th+" "+Hd+","+(Wd+Nu*Jd)+"V"+(mh-Nu*Jd)+"A "+Nu+","+Nu+" 0 0 "+th+" "+(Hd+Nu*Kd)+","+mh+"H"+($d-Nu*Kd)+"A "+Nu+","+Nu+" 0 0 "+th+" "+$d+","+(mh-Nu*Jd)+"V"+(Wd+Nu*Jd)+"A "+Nu+","+Nu+" 0 0 "+th+" "+($d-Nu*Kd)+","+Wd+"Z";else{sd=Math.abs(mh-Wd)+yd;var Pp=sd<Nu?Nu-Math.sqrt(sd*(2*Nu-sd)):0,Up=yd>0?Math.sqrt(yd*(2*Nu-yd)):0,fp=Jd>0?Math.max:Math.min;ed="M"+(Hd+Pp*Kd)+","+Wd+"V"+fp(mh-(Nu-yd)*Jd,Wd)+"A "+Nu+","+Nu+" 0 0 "+th+" "+(Hd+Nu*Kd-Up)+","+mh+"H"+($d-Nu*Kd+Up)+"A "+Nu+","+Nu+" 0 0 "+th+" "+($d-Pp*Kd)+","+fp(mh-(Nu-yd)*Jd,Wd)+"V"+Wd+"Z"}}else ed=Sd}else ed=Sd;var zh=se(d.ensureSingle(Td,"path"),Sl,Bn,il);if(zh.style("vector-effect",st?"none":"non-scaling-stroke").attr("d",isNaN(($d-Hd)*(mh-Wd))||Dd&&El._context.staticPlot?"M0,0Z":ed).call(y.setClipUrl,Ul.layerClipId,El),!Sl.uniformtext.mode&&fd){var kp=y.makePointStyleFns(ls);y.singlePointStyle(cd,zh,ls,kp,El)}nt(El,Ul,Td,re,xd,Hd,$d,Wd,mh,Nu,yd,Bn,il),Ul.layerClipId&&y.hideOutsideRangePoint(cd,Td.select("text"),X,cl,ls.xcalendar,ls.ycalendar)});var Wu=ls.cliponaxis===!1;y.setClipUrl(Ft,Wu?null:Ul.layerClipId,El)});w.getComponentMethod("errorbars","plot")(El,U,Ul,Bn)}function nt(El,Ul,ql,gu,Bn,il,X,cl,Sl,st,U,re,Ft){var ls=Ul.xaxis,_l=Ul.yaxis,Ll=El._fullLayout,zl;function yu(sd,Sd,yd){var bd=d.ensureSingle(sd,"text").text(Sd).attr({class:"bartext bartext-"+zl,"text-anchor":"middle","data-notex":1}).call(y.font,yd).call(x.convertToTspans,El);return bd}var Vu=gu[0].trace,od=Vu.orientation==="h",Ad=ll(Ll,gu,Bn,ls,_l);zl=ul(Vu,Bn);var vd=re.mode==="stack"||re.mode==="relative",fd=gu[Bn],Kl=!vd||fd._outmost,vu=fd.hasB,Rl=st&&st-U>A;if(!Ad||zl==="none"||(fd.isBlank||il===X||cl===Sl)&&(zl==="auto"||zl==="inside")){ql.select("text").remove();return}var Wu=Ll.font,cd=R.getBarColor(gu[Bn],Vu),xd=R.getInsideTextFont(Vu,Bn,Wu,cd),Td=R.getOutsideTextFont(Vu,Bn,Wu),Pd=Vu.insidetextanchor||"end",Hd=ql.datum();od?ls.type==="log"&&Hd.s0<=0&&(ls.range[0]<ls.range[1]?il=0:il=ls._length):_l.type==="log"&&Hd.s0<=0&&(_l.range[0]<_l.range[1]?cl=_l._length:cl=0);var $d=Math.abs(X-il),Wd=Math.abs(Sl-cl),mh=$d-2*A,Dd=Wd-2*A,bh,Dh,vh,Gh,Ql;if(zl==="outside"&&!Kl&&!fd.hasB&&(zl="inside"),zl==="auto")if(Kl){zl="inside",Ql=d.ensureUniformFontSize(El,xd),bh=yu(ql,Ad,Ql),Dh=y.bBox(bh.node()),vh=Dh.width,Gh=Dh.height;var Ku=vh>0&&Gh>0,gl;Rl?vu?gl=In(mh-2*st,Dd,vh,Gh,od)||In(mh,Dd-2*st,vh,Gh,od):od?gl=In(mh-(st-U),Dd,vh,Gh,od)||In(mh,Dd-2*(st-U),vh,Gh,od):gl=In(mh,Dd-(st-U),vh,Gh,od)||In(mh-2*(st-U),Dd,vh,Gh,od):gl=In(mh,Dd,vh,Gh,od),Ku&&gl?zl="inside":(zl="outside",bh.remove(),bh=null)}else zl="inside";if(!bh){Ql=d.ensureUniformFontSize(El,zl==="outside"?Td:xd),bh=yu(ql,Ad,Ql);var Dl=bh.attr("transform");if(bh.attr("transform",""),Dh=y.bBox(bh.node()),vh=Dh.width,Gh=Dh.height,bh.attr("transform",Dl),vh<=0||Gh<=0){bh.remove();return}}var Vl=Vu.textangle,Mu,Nu;zl==="outside"?(Nu=Vu.constraintext==="both"||Vu.constraintext==="outside",Mu=ce(il,X,cl,Sl,Dh,{isHorizontal:od,constrained:Nu,angle:Vl})):(Nu=Vu.constraintext==="both"||Vu.constraintext==="inside",Mu=al(il,X,cl,Sl,Dh,{isHorizontal:od,constrained:Nu,angle:Vl,anchor:Pd,hasB:vu,r:st,overhead:U})),Mu.fontSize=Ql.size,F(Vu.type==="histogram"?"bar":Vu.type,Mu,Ll),fd.transform=Mu;var ed=se(bh,Ll,re,Ft);d.setTransormAndDisplay(ed,Mu)}function In(El,Ul,ql,gu,Bn){if(El<0||Ul<0)return!1;var il=ql<=El&&gu<=Ul,X=ql<=Ul&&gu<=El,cl=Bn?El>=ql*(Ul/gu):Ul>=gu*(El/ql);return il||X||cl}function _t(El){return El==="auto"?0:El}function Fn(El,Ul){var ql=Math.PI/180*Ul,gu=Math.abs(Math.sin(ql)),Bn=Math.abs(Math.cos(ql));return{x:El.width*Bn+El.height*gu,y:El.width*gu+El.height*Bn}}function al(El,Ul,ql,gu,Bn,il){var X=!!il.isHorizontal,cl=!!il.constrained,Sl=il.angle||0,st=il.anchor,U=st==="end",re=st==="start",Ft=il.leftToRight||0,ls=(Ft+1)/2,_l=1-ls,Ll=il.hasB,zl=il.r,yu=il.overhead,Vu=Bn.width,od=Bn.height,Ad=Math.abs(Ul-El),vd=Math.abs(gu-ql),fd=Ad>2*A&&vd>2*A?A:0;Ad-=2*fd,vd-=2*fd;var Kl=_t(Sl);Sl==="auto"&&!(Vu<=Ad&&od<=vd)&&(Vu>Ad||od>vd)&&(!(Vu>vd||od>Ad)||Vu<od!=Ad<vd)&&(Kl+=90);var vu=Fn(Bn,Kl),Rl,Wu;if(zl&&zl-yu>A){var cd=sl(El,Ul,ql,gu,vu,zl,yu,X,Ll);Rl=cd.scale,Wu=cd.pad}else Rl=1,cl&&(Rl=Math.min(1,Ad/vu.x,vd/vu.y)),Wu=0;var xd=Bn.left*_l+Bn.right*ls,Td=(Bn.top+Bn.bottom)/2,Pd=(El+A)*_l+(Ul-A)*ls,Hd=(ql+gu)/2,$d=0,Wd=0;if(re||U){var mh=(X?vu.x:vu.y)/2;zl&&(U||Ll)&&(fd+=Wu);var Dd=X?nl(El,Ul):nl(ql,gu);X?re?(Pd=El+Dd*fd,$d=-Dd*mh):(Pd=Ul-Dd*fd,$d=Dd*mh):re?(Hd=ql+Dd*fd,Wd=-Dd*mh):(Hd=gu-Dd*fd,Wd=Dd*mh)}return{textX:xd,textY:Td,targetX:Pd,targetY:Hd,anchorX:$d,anchorY:Wd,scale:Rl,rotate:Kl}}function sl(El,Ul,ql,gu,Bn,il,X,cl,Sl){var st=Math.max(0,Math.abs(Ul-El)-2*A),U=Math.max(0,Math.abs(gu-ql)-2*A),re=il-A,Ft=X?re-Math.sqrt(re*re-(re-X)*(re-X)):re,ls=Sl?re*2:cl?re-X:2*Ft,_l=Sl?re*2:cl?2*Ft:re-X,Ll,zl,yu,Vu,od;return Bn.y/Bn.x>=U/(st-ls)?Vu=U/Bn.y:Bn.y/Bn.x<=(U-_l)/st?Vu=st/Bn.x:!Sl&&cl?(Ll=Bn.x*Bn.x+Bn.y*Bn.y/4,zl=-2*Bn.x*(st-re)-Bn.y*(U/2-re),yu=(st-re)*(st-re)+(U/2-re)*(U/2-re)-re*re,Vu=(-zl+Math.sqrt(zl*zl-4*Ll*yu))/(2*Ll)):Sl?(Ll=(Bn.x*Bn.x+Bn.y*Bn.y)/4,zl=-Bn.x*(st/2-re)-Bn.y*(U/2-re),yu=(st/2-re)*(st/2-re)+(U/2-re)*(U/2-re)-re*re,Vu=(-zl+Math.sqrt(zl*zl-4*Ll*yu))/(2*Ll)):(Ll=Bn.x*Bn.x/4+Bn.y*Bn.y,zl=-Bn.x*(st/2-re)-2*Bn.y*(U-re),yu=(st/2-re)*(st/2-re)+(U-re)*(U-re)-re*re,Vu=(-zl+Math.sqrt(zl*zl-4*Ll*yu))/(2*Ll)),Vu=Math.min(1,Vu),cl?od=Math.max(0,re-Math.sqrt(Math.max(0,re*re-(re-(U-Bn.y*Vu)/2)*(re-(U-Bn.y*Vu)/2)))-X):od=Math.max(0,re-Math.sqrt(Math.max(0,re*re-(re-(st-Bn.x*Vu)/2)*(re-(st-Bn.x*Vu)/2)))-X),{scale:Vu,pad:od}}function ce(El,Ul,ql,gu,Bn,il){var X=!!il.isHorizontal,cl=!!il.constrained,Sl=il.angle||0,st=Bn.width,U=Bn.height,re=Math.abs(Ul-El),Ft=Math.abs(gu-ql),ls;X?ls=Ft>2*A?A:0:ls=re>2*A?A:0;var _l=1;cl&&(_l=X?Math.min(1,Ft/U):Math.min(1,re/st));var Ll=_t(Sl),zl=Fn(Bn,Ll),yu=(X?zl.x:zl.y)/2,Vu=(Bn.left+Bn.right)/2,od=(Bn.top+Bn.bottom)/2,Ad=(El+Ul)/2,vd=(ql+gu)/2,fd=0,Kl=0,vu=X?nl(Ul,El):nl(ql,gu);return X?(Ad=Ul-vu*ls,fd=vu*yu):(vd=gu+vu*ls,Kl=-vu*yu),{textX:Vu,textY:od,targetX:Ad,targetY:vd,anchorX:fd,anchorY:Kl,scale:_l,rotate:Ll}}function ll(El,Ul,ql,gu,Bn){var il=Ul[0].trace,X=il.texttemplate,cl;return X?cl=fl(El,Ul,ql,gu,Bn):il.textinfo?cl=bl(Ul,ql,gu,Bn):cl=B.getValue(il.text,ql),B.coerceString(D,cl)}function ul(El,Ul){var ql=B.getValue(El.textposition,Ul);return B.coerceEnumerated(H,ql)}function fl(El,Ul,ql,gu,Bn){var il=Ul[0].trace,X=d.castOption(il,ql,"texttemplate");if(!X)return"";var cl=il.type==="histogram",Sl=il.type==="waterfall",st=il.type==="funnel",U=il.orientation==="h",re,Ft,ls,_l;U?(re="y",Ft=Bn,ls="x",_l=gu):(re="x",Ft=gu,ls="y",_l=Bn);function Ll(fd){return S(Ft,Ft.c2l(fd),!0).text}function zl(fd){return S(_l,_l.c2l(fd),!0).text}var yu=Ul[ql],Vu={};Vu.label=yu.p,Vu.labelLabel=Vu[re+"Label"]=Ll(yu.p);var od=d.castOption(il,yu.i,"text");(od===0||od)&&(Vu.text=od),Vu.value=yu.s,Vu.valueLabel=Vu[ls+"Label"]=zl(yu.s);var Ad={};C(Ad,il,yu.i),(cl||Ad.x===void 0)&&(Ad.x=U?Vu.value:Vu.label),(cl||Ad.y===void 0)&&(Ad.y=U?Vu.label:Vu.value),(cl||Ad.xLabel===void 0)&&(Ad.xLabel=U?Vu.valueLabel:Vu.labelLabel),(cl||Ad.yLabel===void 0)&&(Ad.yLabel=U?Vu.labelLabel:Vu.valueLabel),Sl&&(Vu.delta=+yu.rawS||yu.s,Vu.deltaLabel=zl(Vu.delta),Vu.final=yu.v,Vu.finalLabel=zl(Vu.final),Vu.initial=Vu.final-Vu.delta,Vu.initialLabel=zl(Vu.initial)),st&&(Vu.value=yu.s,Vu.valueLabel=zl(Vu.value),Vu.percentInitial=yu.begR,Vu.percentInitialLabel=d.formatPercent(yu.begR),Vu.percentPrevious=yu.difR,Vu.percentPreviousLabel=d.formatPercent(yu.difR),Vu.percentTotal=yu.sumR,Vu.percenTotalLabel=d.formatPercent(yu.sumR));var vd=d.castOption(il,yu.i,"customdata");return vd&&(Vu.customdata=vd),d.texttemplateString(X,Vu,El._d3locale,Ad,Vu,il._meta||{})}function bl(El,Ul,ql,gu){var Bn=El[0].trace,il=Bn.orientation==="h",X=Bn.type==="waterfall",cl=Bn.type==="funnel";function Sl(vd){var fd=il?gu:ql;return S(fd,vd,!0).text}function st(vd){var fd=il?ql:gu;return S(fd,+vd,!0).text}var U=Bn.textinfo,re=El[Ul],Ft=U.split("+"),ls=[],_l,Ll=function(vd){return Ft.indexOf(vd)!==-1};if(Ll("label")&&ls.push(Sl(El[Ul].p)),Ll("text")&&(_l=d.castOption(Bn,re.i,"text"),(_l===0||_l)&&ls.push(_l)),X){var zl=+re.rawS||re.s,yu=re.v,Vu=yu-zl;Ll("initial")&&ls.push(st(Vu)),Ll("delta")&&ls.push(st(zl)),Ll("final")&&ls.push(st(yu))}if(cl){Ll("value")&&ls.push(st(re.s));var od=0;Ll("percent initial")&&od++,Ll("percent previous")&&od++,Ll("percent total")&&od++;var Ad=od>1;Ll("percent initial")&&(_l=d.formatPercent(re.begR),Ad&&(_l+=" of initial"),ls.push(_l)),Ll("percent previous")&&(_l=d.formatPercent(re.difR),Ad&&(_l+=" of previous"),ls.push(_l)),Ll("percent total")&&(_l=d.formatPercent(re.sumR),Ad&&(_l+=" of total"),ls.push(_l))}return ls.join("<br>")}Me.exports={plot:ol,toMoveInsideBar:al}}),wv=s((ot,Me)=>{var m=Xf(),l=ff(),d=oh(),x=rt().fillText,v=$y().getLineWidth,y=Ud().hoverLabelText,w=Et().BADNUM;function S(b,R,B,O,P){var D=c(b,R,B,O,P);if(D){var H=D.cd,C=H[0].trace,A=H[D.index];return D.color=F(C,A),l.getComponentMethod("errorbars","hoverInfo")(A,C,D),[D]}}function c(b,R,B,O,P){var D=b.cd,H=D[0].trace,C=D[0].t,A=O==="closest",L=H.type==="waterfall",j=b.maxHoverDistance,Z=b.maxSpikeDistance,nl,Pe,se,q,ol,nt,In;H.orientation==="h"?(nl=B,Pe=R,se="y",q="x",ol=gu,nt=El):(nl=R,Pe=B,se="x",q="y",nt=gu,ol=El);var _t=H[se+"period"],Fn=A||_t;function al(_l){return ce(_l,-1)}function sl(_l){return ce(_l,1)}function ce(_l,Ll){var zl=_l.w;return _l[se]+Ll*zl/2}function ll(_l){return _l[se+"End"]-_l[se+"Start"]}var ul=A?al:_t?function(_l){return _l.p-ll(_l)/2}:function(_l){return Math.min(al(_l),_l.p-C.bardelta/2)},fl=A?sl:_t?function(_l){return _l.p+ll(_l)/2}:function(_l){return Math.max(sl(_l),_l.p+C.bardelta/2)};function bl(_l,Ll,zl){return P.finiteRange&&(zl=0),m.inbox(_l-nl,Ll-nl,zl+Math.min(1,Math.abs(Ll-_l)/In)-1)}function El(_l){return bl(ul(_l),fl(_l),j)}function Ul(_l){return bl(al(_l),sl(_l),Z)}function ql(_l){var Ll=_l[q];if(L){var zl=Math.abs(_l.rawS)||0;Pe>0?Ll+=zl:Pe<0&&(Ll-=zl)}return Ll}function gu(_l){var Ll=Pe,zl=_l.b,yu=ql(_l);return m.inbox(zl-Ll,yu-Ll,j+(yu-Ll)/(yu-zl)-1)}function Bn(_l){var Ll=Pe,zl=_l.b,yu=ql(_l);return m.inbox(zl-Ll,yu-Ll,Z+(yu-Ll)/(yu-zl)-1)}var il=b[se+"a"],X=b[q+"a"];In=Math.abs(il.r2c(il.range[1])-il.r2c(il.range[0]));function cl(_l){return(ol(_l)+nt(_l))/2}var Sl=m.getDistanceFunction(O,ol,nt,cl);if(m.getClosest(D,Sl,b),b.index!==!1&&D[b.index].p!==w){Fn||(ul=function(_l){return Math.min(al(_l),_l.p-C.bargroupwidth/2)},fl=function(_l){return Math.max(sl(_l),_l.p+C.bargroupwidth/2)});var st=b.index,U=D[st],re=H.base?U.b+U.s:U.s;b[q+"0"]=b[q+"1"]=X.c2p(U[q],!0),b[q+"LabelVal"]=re;var Ft=C.extents[C.extents.round(U.p)];b[se+"0"]=il.c2p(A?ul(U):Ft[0],!0),b[se+"1"]=il.c2p(A?fl(U):Ft[1],!0);var ls=U.orig_p!==void 0;return b[se+"LabelVal"]=ls?U.orig_p:U.p,b.labelLabel=y(il,b[se+"LabelVal"],H[se+"hoverformat"]),b.valueLabel=y(X,b[q+"LabelVal"],H[q+"hoverformat"]),b.baseLabel=y(X,U.b,H[q+"hoverformat"]),b.spikeDistance=(Bn(U)+Ul(U))/2,b[se+"Spike"]=il.c2p(U.p,!0),x(U,H,b),b.hovertemplate=H.hovertemplate,b}}function F(b,R){var B=R.mcc||b.marker.color,O=R.mlcc||b.marker.line.color,P=v(b,R);if(d.opacity(B))return B;if(d.opacity(O)&&P)return O}Me.exports={hoverPoints:S,hoverOnBars:c,getTraceColor:F}}),hy=s((ot,Me)=>{Me.exports=function(m,l,d){return m.x="xVal"in l?l.xVal:l.x,m.y="yVal"in l?l.yVal:l.y,l.xa&&(m.xaxis=l.xa),l.ya&&(m.yaxis=l.ya),d.orientation==="h"?(m.label=m.y,m.value=m.x):(m.label=m.x,m.value=m.y),m}}),py=s((ot,Me)=>{Me.exports=function(l,d){var x=l.cd,v=l.xaxis,y=l.yaxis,w=x[0].trace,S=w.type==="funnel",c=w.orientation==="h",F=[],b;if(d===!1)for(b=0;b<x.length;b++)x[b].selected=0;else for(b=0;b<x.length;b++){var R=x[b],B="ct"in R?R.ct:m(R,v,y,c,S);d.contains(B,!1,b,l)?(F.push({pointNumber:b,x:v.c2d(R.x),y:y.c2d(R.y)}),R.selected=1):R.selected=0}return F};function m(l,d,x,v,y){var w=d.c2p(v?l.s0:l.p0,!0),S=d.c2p(v?l.s1:l.p1,!0),c=x.c2p(v?l.p0:l.s0,!0),F=x.c2p(v?l.p1:l.s1,!0);return y?[(w+S)/2,(c+F)/2]:v?[S,(c+F)/2]:[(w+S)/2,F]}}),w1=s((ot,Me)=>{Me.exports={attributes:L1(),layoutAttributes:I1(),supplyDefaults:jv().supplyDefaults,crossTraceDefaults:jv().crossTraceDefaults,supplyLayoutDefaults:Wy(),calc:O1(),crossTraceCalc:mv().crossTraceCalc,colorbar:Av(),arraysToCalcdata:dy(),plot:kv().plot,style:qy().style,styleOnSelect:qy().styleOnSelect,hoverPoints:wv().hoverPoints,eventData:hy(),selectPoints:py(),moduleType:"trace",name:"bar",basePlotModule:W0(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}}),Tv=s((ot,Me)=>{Me.exports=w1()}),Yy=s((ot,Me)=>{var m=id(),l=o1().attributes,d=Pu(),x=qd(),v=Vg().hovertemplateAttrs,y=Vg().texttemplateAttrs,w=Bl().extendFlat,S=Gf().pattern,c=d({editType:"plot",arrayOk:!0,colorEditType:"plot"});Me.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:x.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:S,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:w({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:v({},{keys:["label","color","value","percent","text"]}),texttemplate:y({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:w({},c,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:w({},c,{}),outsidetextfont:w({},c,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:w({},c,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:l({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}}),Ky=s((ot,Me)=>{var m=zn(),l=rt(),d=Yy(),x=o1().defaults,v=jv().handleText,y=rt().coercePattern;function w(F,b){var R=l.isArrayOrTypedArray(F),B=l.isArrayOrTypedArray(b),O=Math.min(R?F.length:1/0,B?b.length:1/0);if(isFinite(O)||(O=0),O&&B){for(var P,D=0;D<O;D++){var H=b[D];if(m(H)&&H>0){P=!0;break}}P||(O=0)}return{hasLabels:R,hasValues:B,len:O}}function S(F,b,R,B,O){var P=B("marker.line.width");P&&B("marker.line.color",O?void 0:R.paper_bgcolor);var D=B("marker.colors");y(B,"marker.pattern",D),F.marker&&!b.marker.pattern.fgcolor&&(b.marker.pattern.fgcolor=F.marker.colors),b.marker.pattern.bgcolor||(b.marker.pattern.bgcolor=R.paper_bgcolor)}function c(F,b,R,B){function O(nt,In){return l.coerce(F,b,d,nt,In)}var P=O("labels"),D=O("values"),H=w(P,D),C=H.len;if(b._hasLabels=H.hasLabels,b._hasValues=H.hasValues,!b._hasLabels&&b._hasValues&&(O("label0"),O("dlabel")),!C){b.visible=!1;return}b._length=C,S(F,b,B,O,!0),O("scalegroup");var A=O("text"),L=O("texttemplate"),j;if(L||(j=O("textinfo",l.isArrayOrTypedArray(A)?"text+percent":"percent")),O("hovertext"),O("hovertemplate"),L||j&&j!=="none"){var Z=O("textposition");v(F,b,B,O,Z,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var nl=Array.isArray(Z)||Z==="auto",Pe=nl||Z==="outside";Pe&&O("automargin"),(Z==="inside"||Z==="auto"||Array.isArray(Z))&&O("insidetextorientation")}else j==="none"&&O("textposition","none");x(b,B,O);var se=O("hole"),q=O("title.text");if(q){var ol=O("title.position",se?"middle center":"top center");!se&&ol==="middle center"&&(b.title.position="top center"),l.coerceFont(O,"title.font",B.font)}O("sort"),O("direction"),O("rotation"),O("pull")}Me.exports={handleLabelsAndValues:w,handleMarkerDefaults:S,supplyDefaults:c}}),fy=s((ot,Me)=>{Me.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}}),tv=s((ot,Me)=>{var m=rt(),l=fy();Me.exports=function(d,x){function v(y,w){return m.coerce(d,x,l,y,w)}v("hiddenlabels"),v("piecolorway",x.colorway),v("extendpiecolors")}}),Y0=s((ot,Me)=>{var m=zn(),l=$l(),d=oh(),x={};function v(c,F){var b=[],R=c._fullLayout,B=R.hiddenlabels||[],O=F.labels,P=F.marker.colors||[],D=F.values,H=F._length,C=F._hasValues&&H,A,L;if(F.dlabel)for(O=new Array(H),A=0;A<H;A++)O[A]=String(F.label0+A*F.dlabel);var j={},Z=y(R["_"+F.type+"colormap"]),nl=0,Pe=!1;for(A=0;A<H;A++){var se,q,ol;if(C){if(se=D[A],!m(se))continue;se=+se}else se=1;q=O[A],(q===void 0||q==="")&&(q=A),q=String(q);var nt=j[q];nt===void 0?(j[q]=b.length,ol=B.indexOf(q)!==-1,ol||(nl+=se),b.push({v:se,label:q,color:Z(P[A],q),i:A,pts:[A],hidden:ol})):(Pe=!0,L=b[nt],L.v+=se,L.pts.push(A),L.hidden||(nl+=se),L.color===!1&&P[A]&&(L.color=Z(P[A],q)))}b=b.filter(function(_t){return _t.v>=0});var In=F.type==="funnelarea"?Pe:F.sort;return In&&b.sort(function(_t,Fn){return Fn.v-_t.v}),b[0]&&(b[0].vTotal=nl),b}function y(c){return function(F,b){return!F||(F=l(F),!F.isValid())?!1:(F=d.addOpacity(F,F.getAlpha()),c[b]||(c[b]=F),F)}}function w(c,F){var b=(F||{}).type;b||(b="pie");var R=c._fullLayout,B=c.calcdata,O=R[b+"colorway"],P=R["_"+b+"colormap"];R["extend"+b+"colors"]&&(O=S(O,x));for(var D=0,H=0;H<B.length;H++){var C=B[H],A=C[0].trace.type;if(A===b)for(var L=0;L<C.length;L++){var j=C[L];j.color===!1&&(P[j.label]?j.color=P[j.label]:(P[j.label]=j.color=O[D%O.length],D++))}}}function S(c,F){var b,R=JSON.stringify(c),B=F[R];if(!B){for(B=c.slice(),b=0;b<c.length;b++)B.push(l(c[b]).lighten(20).toHexString());for(b=0;b<c.length;b++)B.push(l(c[b]).darken(20).toHexString());F[R]=B}return B}Me.exports={calc:v,crossTraceCalc:w,makePullColorFn:y,generateExtendedColors:S}}),Uv=s((ot,Me)=>{var m=wd().appendArrayMultiPointValues;Me.exports=function(l,d){var x={curveNumber:d.index,pointNumbers:l.pts,data:d._input,fullData:d,label:l.label,color:l.color,value:l.v,percent:l.percent,text:l.text,bbox:l.bbox,v:l.v};return l.pts.length===1&&(x.pointNumber=x.i=l.pts[0]),m(x,d,l.pts),d.type==="funnelarea"&&(delete x.v,delete x.i),x}}),z1=s((ot,Me)=>{var m=$(),l=Vf(),d=Xf(),x=oh(),v=Qd(),y=rt(),w=y.strScale,S=y.strTranslate,c=Kg(),F=x1(),b=F.recordMinTextSize,R=F.clearMinTextSize,B=D1().TEXTPAD,O=Xh(),P=Uv(),D=rt().isValidTextValue;function H(il,X){var cl=il._context.staticPlot,Sl=il._fullLayout,st=Sl._size;R("pie",Sl),Z(X,il),bl(X,st);var U=y.makeTraceGroups(Sl._pielayer,X,"trace").each(function(re){var Ft=m.select(this),ls=re[0],_l=ls.trace;Ul(re),Ft.attr("stroke-linejoin","round"),Ft.each(function(){var Ll=m.select(this).selectAll("g.slice").data(re);Ll.enter().append("g").classed("slice",!0),Ll.exit().remove();var zl=[[[],[]],[[],[]]],yu=!1;Ll.each(function(Rl,Wu){if(Rl.hidden){m.select(this).selectAll("path,g").remove();return}Rl.pointNumber=Rl.i,Rl.curveNumber=_l.index,zl[Rl.pxmid[1]<0?0:1][Rl.pxmid[0]<0?0:1].push(Rl);var cd=ls.cx,xd=ls.cy,Td=m.select(this),Pd=Td.selectAll("path.surface").data([Rl]);if(Pd.enter().append("path").classed("surface",!0).style({"pointer-events":cl?"none":"all"}),Td.call(A,il,re),_l.pull){var Hd=+O.castOption(_l.pull,Rl.pts)||0;Hd>0&&(cd+=Hd*Rl.pxmid[0],xd+=Hd*Rl.pxmid[1])}Rl.cxFinal=cd,Rl.cyFinal=xd;function $d(Gh,Ql,Ku,gl){var Dl=gl*(Ql[0]-Gh[0]),Vl=gl*(Ql[1]-Gh[1]);return"a"+gl*ls.r+","+gl*ls.r+" 0 "+Rl.largeArc+(Ku?" 1 ":" 0 ")+Dl+","+Vl}var Wd=_l.hole;if(Rl.v===ls.vTotal){var mh="M"+(cd+Rl.px0[0])+","+(xd+Rl.px0[1])+$d(Rl.px0,Rl.pxmid,!0,1)+$d(Rl.pxmid,Rl.px0,!0,1)+"Z";Wd?Pd.attr("d","M"+(cd+Wd*Rl.px0[0])+","+(xd+Wd*Rl.px0[1])+$d(Rl.px0,Rl.pxmid,!1,Wd)+$d(Rl.pxmid,Rl.px0,!1,Wd)+"Z"+mh):Pd.attr("d",mh)}else{var Dd=$d(Rl.px0,Rl.px1,!0,1);if(Wd){var bh=1-Wd;Pd.attr("d","M"+(cd+Wd*Rl.px1[0])+","+(xd+Wd*Rl.px1[1])+$d(Rl.px1,Rl.px0,!1,Wd)+"l"+bh*Rl.px0[0]+","+bh*Rl.px0[1]+Dd+"Z")}else Pd.attr("d","M"+cd+","+xd+"l"+Rl.px0[0]+","+Rl.px0[1]+Dd+"Z")}gu(il,Rl,ls);var Dh=O.castOption(_l.textposition,Rl.pts),vh=Td.selectAll("g.slicetext").data(Rl.text&&Dh!=="none"?[0]:[]);vh.enter().append("g").classed("slicetext",!0),vh.exit().remove(),vh.each(function(){var Gh=y.ensureSingle(m.select(this),"text","",function(ed){ed.attr("data-notex",1)}),Ql=y.ensureUniformFontSize(il,Dh==="outside"?L(_l,Rl,Sl.font):j(_l,Rl,Sl.font));Gh.text(Rl.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(v.font,Ql).call(c.convertToTspans,il);var Ku=v.bBox(Gh.node()),gl;if(Dh==="outside")gl=Fn(Ku,Rl);else if(gl=nl(Ku,Rl,ls),Dh==="auto"&&gl.scale<1){var Dl=y.ensureUniformFontSize(il,_l.outsidetextfont);Gh.call(v.font,Dl),Ku=v.bBox(Gh.node()),gl=Fn(Ku,Rl)}var Vl=gl.textPosAngle,Mu=Vl===void 0?Rl.pxmid:ql(ls.r,Vl);if(gl.targetX=cd+Mu[0]*gl.rCenter+(gl.x||0),gl.targetY=xd+Mu[1]*gl.rCenter+(gl.y||0),Bn(gl,Ku),gl.outside){var Nu=gl.targetY;Rl.yLabelMin=Nu-Ku.height/2,Rl.yLabelMid=Nu,Rl.yLabelMax=Nu+Ku.height/2,Rl.labelExtraX=0,Rl.labelExtraY=0,yu=!0}gl.fontSize=Ql.size,b(_l.type,gl,Sl),re[Wu].transform=gl,y.setTransormAndDisplay(Gh,gl)})});var Vu=m.select(this).selectAll("g.titletext").data(_l.title.text?[0]:[]);if(Vu.enter().append("g").classed("titletext",!0),Vu.exit().remove(),Vu.each(function(){var Rl=y.ensureSingle(m.select(this),"text","",function(xd){xd.attr("data-notex",1)}),Wu=_l.title.text;_l._meta&&(Wu=y.templateString(Wu,_l._meta)),Rl.text(Wu).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(v.font,_l.title.font).call(c.convertToTspans,il);var cd;_l.title.position==="middle center"?cd=al(ls):cd=sl(ls,st),Rl.attr("transform",S(cd.x,cd.y)+w(Math.min(1,cd.scale))+S(cd.tx,cd.ty))}),yu&&fl(zl,_l),C(Ll,_l),yu&&_l.automargin){var od=v.bBox(Ft.node()),Ad=_l.domain,vd=st.w*(Ad.x[1]-Ad.x[0]),fd=st.h*(Ad.y[1]-Ad.y[0]),Kl=(.5*vd-ls.r)/st.w,vu=(.5*fd-ls.r)/st.h;l.autoMargin(il,"pie."+_l.uid+".automargin",{xl:Ad.x[0]-Kl,xr:Ad.x[1]+Kl,yb:Ad.y[0]-vu,yt:Ad.y[1]+vu,l:Math.max(ls.cx-ls.r-od.left,0),r:Math.max(od.right-(ls.cx+ls.r),0),b:Math.max(od.bottom-(ls.cy+ls.r),0),t:Math.max(ls.cy-ls.r-od.top,0),pad:5})}})});setTimeout(function(){U.selectAll("tspan").each(function(){var re=m.select(this);re.attr("dy")&&re.attr("dy",re.attr("dy"))})},0)}function C(il,X){il.each(function(cl){var Sl=m.select(this);if(!cl.labelExtraX&&!cl.labelExtraY){Sl.select("path.textline").remove();return}var st=Sl.select("g.slicetext text");cl.transform.targetX+=cl.labelExtraX,cl.transform.targetY+=cl.labelExtraY,y.setTransormAndDisplay(st,cl.transform);var U=cl.cxFinal+cl.pxmid[0],re=cl.cyFinal+cl.pxmid[1],Ft="M"+U+","+re,ls=(cl.yLabelMax-cl.yLabelMin)*(cl.pxmid[0]<0?-1:1)/4;if(cl.labelExtraX){var _l=cl.labelExtraX*cl.pxmid[1]/cl.pxmid[0],Ll=cl.yLabelMid+cl.labelExtraY-(cl.cyFinal+cl.pxmid[1]);Math.abs(_l)>Math.abs(Ll)?Ft+="l"+Ll*cl.pxmid[0]/cl.pxmid[1]+","+Ll+"H"+(U+cl.labelExtraX+ls):Ft+="l"+cl.labelExtraX+","+_l+"v"+(Ll-_l)+"h"+ls}else Ft+="V"+(cl.yLabelMid+cl.labelExtraY)+"h"+ls;y.ensureSingle(Sl,"path","textline").call(x.stroke,X.outsidetextfont.color).attr({"stroke-width":Math.min(2,X.outsidetextfont.size/8),d:Ft,fill:"none"})})}function A(il,X,cl){var Sl=cl[0],st=Sl.cx,U=Sl.cy,re=Sl.trace,Ft=re.type==="funnelarea";"_hasHoverLabel"in re||(re._hasHoverLabel=!1),"_hasHoverEvent"in re||(re._hasHoverEvent=!1),il.on("mouseover",function(ls){var _l=X._fullLayout,Ll=X._fullData[re.index];if(!(X._dragging||_l.hovermode===!1)){var zl=Ll.hoverinfo;if(Array.isArray(zl)&&(zl=d.castHoverinfo({hoverinfo:[O.castOption(zl,ls.pts)],_module:re._module},_l,0)),zl==="all"&&(zl="label+text+value+percent+name"),Ll.hovertemplate||zl!=="none"&&zl!=="skip"&&zl){var yu=ls.rInscribed||0,Vu=st+ls.pxmid[0]*(1-yu),od=U+ls.pxmid[1]*(1-yu),Ad=_l.separators,vd=[];if(zl&&zl.indexOf("label")!==-1&&vd.push(ls.label),ls.text=O.castOption(Ll.hovertext||Ll.text,ls.pts),zl&&zl.indexOf("text")!==-1){var fd=ls.text;y.isValidTextValue(fd)&&vd.push(fd)}ls.value=ls.v,ls.valueLabel=O.formatPieValue(ls.v,Ad),zl&&zl.indexOf("value")!==-1&&vd.push(ls.valueLabel),ls.percent=ls.v/Sl.vTotal,ls.percentLabel=O.formatPiePercent(ls.percent,Ad),zl&&zl.indexOf("percent")!==-1&&vd.push(ls.percentLabel);var Kl=Ll.hoverlabel,vu=Kl.font,Rl=[];d.loneHover({trace:re,x0:Vu-yu*Sl.r,x1:Vu+yu*Sl.r,y:od,_x0:Ft?st+ls.TL[0]:Vu-yu*Sl.r,_x1:Ft?st+ls.TR[0]:Vu+yu*Sl.r,_y0:Ft?U+ls.TL[1]:od-yu*Sl.r,_y1:Ft?U+ls.BL[1]:od+yu*Sl.r,text:vd.join("<br>"),name:Ll.hovertemplate||zl.indexOf("name")!==-1?Ll.name:void 0,idealAlign:ls.pxmid[0]<0?"left":"right",color:O.castOption(Kl.bgcolor,ls.pts)||ls.color,borderColor:O.castOption(Kl.bordercolor,ls.pts),fontFamily:O.castOption(vu.family,ls.pts),fontSize:O.castOption(vu.size,ls.pts),fontColor:O.castOption(vu.color,ls.pts),nameLength:O.castOption(Kl.namelength,ls.pts),textAlign:O.castOption(Kl.align,ls.pts),hovertemplate:O.castOption(Ll.hovertemplate,ls.pts),hovertemplateLabels:ls,eventData:[P(ls,Ll)]},{container:_l._hoverlayer.node(),outerContainer:_l._paper.node(),gd:X,inOut_bbox:Rl}),ls.bbox=Rl[0],re._hasHoverLabel=!0}re._hasHoverEvent=!0,X.emit("plotly_hover",{points:[P(ls,Ll)],event:m.event})}}),il.on("mouseout",function(ls){var _l=X._fullLayout,Ll=X._fullData[re.index],zl=m.select(this).datum();re._hasHoverEvent&&(ls.originalEvent=m.event,X.emit("plotly_unhover",{points:[P(zl,Ll)],event:m.event}),re._hasHoverEvent=!1),re._hasHoverLabel&&(d.loneUnhover(_l._hoverlayer.node()),re._hasHoverLabel=!1)}),il.on("click",function(ls){var _l=X._fullLayout,Ll=X._fullData[re.index];X._dragging||_l.hovermode===!1||(X._hoverdata=[P(ls,Ll)],d.click(X,m.event))})}function L(il,X,cl){var Sl=O.castOption(il.outsidetextfont.color,X.pts)||O.castOption(il.textfont.color,X.pts)||cl.color,st=O.castOption(il.outsidetextfont.family,X.pts)||O.castOption(il.textfont.family,X.pts)||cl.family,U=O.castOption(il.outsidetextfont.size,X.pts)||O.castOption(il.textfont.size,X.pts)||cl.size,re=O.castOption(il.outsidetextfont.weight,X.pts)||O.castOption(il.textfont.weight,X.pts)||cl.weight,Ft=O.castOption(il.outsidetextfont.style,X.pts)||O.castOption(il.textfont.style,X.pts)||cl.style,ls=O.castOption(il.outsidetextfont.variant,X.pts)||O.castOption(il.textfont.variant,X.pts)||cl.variant,_l=O.castOption(il.outsidetextfont.textcase,X.pts)||O.castOption(il.textfont.textcase,X.pts)||cl.textcase,Ll=O.castOption(il.outsidetextfont.lineposition,X.pts)||O.castOption(il.textfont.lineposition,X.pts)||cl.lineposition,zl=O.castOption(il.outsidetextfont.shadow,X.pts)||O.castOption(il.textfont.shadow,X.pts)||cl.shadow;return{color:Sl,family:st,size:U,weight:re,style:Ft,variant:ls,textcase:_l,lineposition:Ll,shadow:zl}}function j(il,X,cl){var Sl=O.castOption(il.insidetextfont.color,X.pts);!Sl&&il._input.textfont&&(Sl=O.castOption(il._input.textfont.color,X.pts));var st=O.castOption(il.insidetextfont.family,X.pts)||O.castOption(il.textfont.family,X.pts)||cl.family,U=O.castOption(il.insidetextfont.size,X.pts)||O.castOption(il.textfont.size,X.pts)||cl.size,re=O.castOption(il.insidetextfont.weight,X.pts)||O.castOption(il.textfont.weight,X.pts)||cl.weight,Ft=O.castOption(il.insidetextfont.style,X.pts)||O.castOption(il.textfont.style,X.pts)||cl.style,ls=O.castOption(il.insidetextfont.variant,X.pts)||O.castOption(il.textfont.variant,X.pts)||cl.variant,_l=O.castOption(il.insidetextfont.textcase,X.pts)||O.castOption(il.textfont.textcase,X.pts)||cl.textcase,Ll=O.castOption(il.insidetextfont.lineposition,X.pts)||O.castOption(il.textfont.lineposition,X.pts)||cl.lineposition,zl=O.castOption(il.insidetextfont.shadow,X.pts)||O.castOption(il.textfont.shadow,X.pts)||cl.shadow;return{color:Sl||x.contrast(X.color),family:st,size:U,weight:re,style:Ft,variant:ls,textcase:_l,lineposition:Ll,shadow:zl}}function Z(il,X){for(var cl,Sl,st=0;st<il.length;st++)if(cl=il[st][0],Sl=cl.trace,Sl.title.text){var U=Sl.title.text;Sl._meta&&(U=y.templateString(U,Sl._meta));var re=v.tester.append("text").attr("data-notex",1).text(U).call(v.font,Sl.title.font).call(c.convertToTspans,X),Ft=v.bBox(re.node(),!0);cl.titleBox={width:Ft.width,height:Ft.height},re.remove()}}function nl(il,X,cl){var Sl=cl.r||X.rpx1,st=X.rInscribed,U=X.startangle===X.stopangle;if(U)return{rCenter:1-st,scale:0,rotate:0,textPosAngle:0};var re=X.ring,Ft=re===1&&Math.abs(X.startangle-X.stopangle)===Math.PI*2,ls=X.halfangle,_l=X.midangle,Ll=cl.trace.insidetextorientation,zl=Ll==="horizontal",yu=Ll==="tangential",Vu=Ll==="radial",od=Ll==="auto",Ad=[],vd;if(!od){var fd=function(Td,Pd){if(Pe(X,Td)){var Hd=Math.abs(Td-X.startangle),$d=Math.abs(Td-X.stopangle),Wd=Hd<$d?Hd:$d;Pd==="tan"?vd=q(il,Sl,re,Wd,0):vd=se(il,Sl,re,Wd,Math.PI/2),vd.textPosAngle=Td,Ad.push(vd)}},Kl;if(zl||yu){for(Kl=4;Kl>=-4;Kl-=2)fd(Math.PI*Kl,"tan");for(Kl=4;Kl>=-4;Kl-=2)fd(Math.PI*(Kl+1),"tan")}if(zl||Vu){for(Kl=4;Kl>=-4;Kl-=2)fd(Math.PI*(Kl+1.5),"rad");for(Kl=4;Kl>=-4;Kl-=2)fd(Math.PI*(Kl+.5),"rad")}}if(Ft||od||zl){var vu=Math.sqrt(il.width*il.width+il.height*il.height);if(vd={scale:st*Sl*2/vu,rCenter:1-st,rotate:0},vd.textPosAngle=(X.startangle+X.stopangle)/2,vd.scale>=1)return vd;Ad.push(vd)}(od||Vu)&&(vd=se(il,Sl,re,ls,_l),vd.textPosAngle=(X.startangle+X.stopangle)/2,Ad.push(vd)),(od||yu)&&(vd=q(il,Sl,re,ls,_l),vd.textPosAngle=(X.startangle+X.stopangle)/2,Ad.push(vd));for(var Rl=0,Wu=0,cd=0;cd<Ad.length;cd++){var xd=Ad[cd].scale;if(Wu<xd&&(Wu=xd,Rl=cd),!od&&Wu>=1)break}return Ad[Rl]}function Pe(il,X){var cl=il.startangle,Sl=il.stopangle;return cl>X&&X>Sl||cl<X&&X<Sl}function se(il,X,cl,Sl,st){X=Math.max(0,X-2*B);var U=il.width/il.height,re=In(U,Sl,X,cl);return{scale:re*2/il.height,rCenter:ol(U,re/X),rotate:nt(st)}}function q(il,X,cl,Sl,st){X=Math.max(0,X-2*B);var U=il.height/il.width,re=In(U,Sl,X,cl);return{scale:re*2/il.width,rCenter:ol(U,re/X),rotate:nt(st+Math.PI/2)}}function ol(il,X){return Math.cos(X)-il*X}function nt(il){return(180/Math.PI*il+720)%180-90}function In(il,X,cl,Sl){var st=il+1/(2*Math.tan(X));return cl*Math.min(1/(Math.sqrt(st*st+.5)+st),Sl/(Math.sqrt(il*il+Sl/2)+il))}function _t(il,X){return il.v===X.vTotal&&!X.trace.hole?1:Math.min(1/(1+1/Math.sin(il.halfangle)),il.ring/2)}function Fn(il,X){var cl=X.pxmid[0],Sl=X.pxmid[1],st=il.width/2,U=il.height/2;return cl<0&&(st*=-1),Sl<0&&(U*=-1),{scale:1,rCenter:1,rotate:0,x:st+Math.abs(U)*(st>0?1:-1)/2,y:U/(1+cl*cl/(Sl*Sl)),outside:!0}}function al(il){var X=Math.sqrt(il.titleBox.width*il.titleBox.width+il.titleBox.height*il.titleBox.height);return{x:il.cx,y:il.cy,scale:il.trace.hole*il.r*2/X,tx:0,ty:-il.titleBox.height/2+il.trace.title.font.size}}function sl(il,X){var cl=1,Sl=1,st,U=il.trace,re={x:il.cx,y:il.cy},Ft={tx:0,ty:0};Ft.ty+=U.title.font.size,st=ul(U),U.title.position.indexOf("top")!==-1?(re.y-=(1+st)*il.r,Ft.ty-=il.titleBox.height):U.title.position.indexOf("bottom")!==-1&&(re.y+=(1+st)*il.r);var ls=ce(il.r,il.trace.aspectratio),_l=X.w*(U.domain.x[1]-U.domain.x[0])/2;return U.title.position.indexOf("left")!==-1?(_l=_l+ls,re.x-=(1+st)*ls,Ft.tx+=il.titleBox.width/2):U.title.position.indexOf("center")!==-1?_l*=2:U.title.position.indexOf("right")!==-1&&(_l=_l+ls,re.x+=(1+st)*ls,Ft.tx-=il.titleBox.width/2),cl=_l/il.titleBox.width,Sl=ll(il,X)/il.titleBox.height,{x:re.x,y:re.y,scale:Math.min(cl,Sl),tx:Ft.tx,ty:Ft.ty}}function ce(il,X){return il/(X===void 0?1:X)}function ll(il,X){var cl=il.trace,Sl=X.h*(cl.domain.y[1]-cl.domain.y[0]);return Math.min(il.titleBox.height,Sl/2)}function ul(il){var X=il.pull;if(!X)return 0;var cl;if(y.isArrayOrTypedArray(X))for(X=0,cl=0;cl<il.pull.length;cl++)il.pull[cl]>X&&(X=il.pull[cl]);return X}function fl(il,X){var cl,Sl,st,U,re,Ft,ls,_l,Ll,zl,yu,Vu,od;function Ad(vu,Rl){return vu.pxmid[1]-Rl.pxmid[1]}function vd(vu,Rl){return Rl.pxmid[1]-vu.pxmid[1]}function fd(vu,Rl){Rl||(Rl={});var Wu=Rl.labelExtraY+(Sl?Rl.yLabelMax:Rl.yLabelMin),cd=Sl?vu.yLabelMin:vu.yLabelMax,xd=Sl?vu.yLabelMax:vu.yLabelMin,Td=vu.cyFinal+re(vu.px0[1],vu.px1[1]),Pd=Wu-cd,Hd,$d,Wd,mh,Dd,bh;if(Pd*ls>0&&(vu.labelExtraY=Pd),!!y.isArrayOrTypedArray(X.pull))for($d=0;$d<zl.length;$d++)Wd=zl[$d],!(Wd===vu||(O.castOption(X.pull,vu.pts)||0)>=(O.castOption(X.pull,Wd.pts)||0))&&((vu.pxmid[1]-Wd.pxmid[1])*ls>0?(mh=Wd.cyFinal+re(Wd.px0[1],Wd.px1[1]),Pd=mh-cd-vu.labelExtraY,Pd*ls>0&&(vu.labelExtraY+=Pd)):(xd+vu.labelExtraY-Td)*ls>0&&(Hd=3*Ft*Math.abs($d-zl.indexOf(vu)),Dd=Wd.cxFinal+U(Wd.px0[0],Wd.px1[0]),bh=Dd+Hd-(vu.cxFinal+vu.pxmid[0])-vu.labelExtraX,bh*Ft>0&&(vu.labelExtraX+=bh)))}for(Sl=0;Sl<2;Sl++)for(st=Sl?Ad:vd,re=Sl?Math.max:Math.min,ls=Sl?1:-1,cl=0;cl<2;cl++){for(U=cl?Math.max:Math.min,Ft=cl?1:-1,_l=il[Sl][cl],_l.sort(st),Ll=il[1-Sl][cl],zl=Ll.concat(_l),Vu=[],yu=0;yu<_l.length;yu++)_l[yu].yLabelMid!==void 0&&Vu.push(_l[yu]);for(od=!1,yu=0;Sl&&yu<Ll.length;yu++)if(Ll[yu].yLabelMid!==void 0){od=Ll[yu];break}for(yu=0;yu<Vu.length;yu++){var Kl=yu&&Vu[yu-1];od&&!yu&&(Kl=od),fd(Vu[yu],Kl)}}}function bl(il,X){for(var cl=[],Sl=0;Sl<il.length;Sl++){var st=il[Sl][0],U=st.trace,re=U.domain,Ft=X.w*(re.x[1]-re.x[0]),ls=X.h*(re.y[1]-re.y[0]);U.title.text&&U.title.position!=="middle center"&&(ls-=ll(st,X));var _l=Ft/2,Ll=ls/2;U.type==="funnelarea"&&!U.scalegroup&&(Ll/=U.aspectratio),st.r=Math.min(_l,Ll)/(1+ul(U)),st.cx=X.l+X.w*(U.domain.x[1]+U.domain.x[0])/2,st.cy=X.t+X.h*(1-U.domain.y[0])-ls/2,U.title.text&&U.title.position.indexOf("bottom")!==-1&&(st.cy-=ll(st,X)),U.scalegroup&&cl.indexOf(U.scalegroup)===-1&&cl.push(U.scalegroup)}El(il,cl)}function El(il,X){for(var cl,Sl,st,U=0;U<X.length;U++){var re=1/0,Ft=X[U];for(Sl=0;Sl<il.length;Sl++)if(cl=il[Sl][0],st=cl.trace,st.scalegroup===Ft){var ls;if(st.type==="pie")ls=cl.r*cl.r;else if(st.type==="funnelarea"){var _l,Ll;st.aspectratio>1?(_l=cl.r,Ll=_l/st.aspectratio):(Ll=cl.r,_l=Ll*st.aspectratio),_l*=(1+st.baseratio)/2,ls=_l*Ll}re=Math.min(re,ls/cl.vTotal)}for(Sl=0;Sl<il.length;Sl++)if(cl=il[Sl][0],st=cl.trace,st.scalegroup===Ft){var zl=re*cl.vTotal;st.type==="funnelarea"&&(zl/=(1+st.baseratio)/2,zl/=st.aspectratio),cl.r=Math.sqrt(zl)}}}function Ul(il){var X=il[0],cl=X.r,Sl=X.trace,st=O.getRotationAngle(Sl.rotation),U=2*Math.PI/X.vTotal,re="px0",Ft="px1",ls,_l,Ll;if(Sl.direction==="counterclockwise"){for(ls=0;ls<il.length&&il[ls].hidden;ls++);if(ls===il.length)return;st+=U*il[ls].v,U*=-1,re="px1",Ft="px0"}for(Ll=ql(cl,st),ls=0;ls<il.length;ls++)_l=il[ls],!_l.hidden&&(_l[re]=Ll,_l.startangle=st,st+=U*_l.v/2,_l.pxmid=ql(cl,st),_l.midangle=st,st+=U*_l.v/2,Ll=ql(cl,st),_l.stopangle=st,_l[Ft]=Ll,_l.largeArc=_l.v>X.vTotal/2?1:0,_l.halfangle=Math.PI*Math.min(_l.v/X.vTotal,.5),_l.ring=1-Sl.hole,_l.rInscribed=_t(_l,X))}function ql(il,X){return[il*Math.sin(X),-il*Math.cos(X)]}function gu(il,X,cl){var Sl=il._fullLayout,st=cl.trace,U=st.texttemplate,re=st.textinfo;if(!U&&re&&re!=="none"){var Ft=re.split("+"),ls=function(Rl){return Ft.indexOf(Rl)!==-1},_l=ls("label"),Ll=ls("text"),zl=ls("value"),yu=ls("percent"),Vu=Sl.separators,od;if(od=_l?[X.label]:[],Ll){var Ad=O.getFirstFilled(st.text,X.pts);D(Ad)&&od.push(Ad)}zl&&od.push(O.formatPieValue(X.v,Vu)),yu&&od.push(O.formatPiePercent(X.v/cl.vTotal,Vu)),X.text=od.join("<br>")}function vd(Rl){return{label:Rl.label,value:Rl.v,valueLabel:O.formatPieValue(Rl.v,Sl.separators),percent:Rl.v/cl.vTotal,percentLabel:O.formatPiePercent(Rl.v/cl.vTotal,Sl.separators),color:Rl.color,text:Rl.text,customdata:y.castOption(st,Rl.i,"customdata")}}if(U){var fd=y.castOption(st,X.i,"texttemplate");if(!fd)X.text="";else{var Kl=vd(X),vu=O.getFirstFilled(st.text,X.pts);(D(vu)||vu==="")&&(Kl.text=vu),X.text=y.texttemplateString(fd,Kl,il._fullLayout._d3locale,Kl,st._meta||{})}}}function Bn(il,X){var cl=il.rotate*Math.PI/180,Sl=Math.cos(cl),st=Math.sin(cl),U=(X.left+X.right)/2,re=(X.top+X.bottom)/2;il.textX=U*Sl-re*st,il.textY=U*st+re*Sl,il.noCenter=!0}Me.exports={plot:H,formatSliceLabel:gu,transformInsideText:nl,determineInsideTextFont:j,positionTitleOutside:sl,prerenderTitles:Z,layoutAreas:bl,attachFxHandlers:A,computeTransform:Bn}}),F2=s((ot,Me)=>{var m=$(),l=Wp(),d=x1().resizeText;Me.exports=function(x){var v=x._fullLayout._pielayer.selectAll(".trace");d(x,v,"pie"),v.each(function(y){var w=y[0],S=w.trace,c=m.select(this);c.style({opacity:S.opacity}),c.selectAll("path.surface").each(function(F){m.select(this).call(l,F,S,x)})})}}),Fv=s(ot=>{var Me=Vf();ot.name="pie",ot.plot=function(m,l,d,x){Me.plotBasePlot(ot.name,m,l,d,x)},ot.clean=function(m,l,d,x){Me.cleanBasePlot(ot.name,m,l,d,x)}}),s1=s((ot,Me)=>{Me.exports={attributes:Yy(),supplyDefaults:Ky().supplyDefaults,supplyLayoutDefaults:tv(),layoutAttributes:fy(),calc:Y0().calc,crossTraceCalc:Y0().crossTraceCalc,plot:z1().plot,style:F2(),styleOne:Wp(),moduleType:"trace",name:"pie",basePlotModule:Fv(),categories:["pie-like","pie","showLegend"],meta:{}}}),Zy=s((ot,Me)=>{Me.exports=s1()}),f0=s((ot,Me)=>{var m=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;function x(y){if(y==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(y)}function v(){try{if(!Object.assign)return!1;var y=new String("abc");if(y[5]="de",Object.getOwnPropertyNames(y)[0]==="5")return!1;for(var w={},S=0;S<10;S++)w["_"+String.fromCharCode(S)]=S;var c=Object.getOwnPropertyNames(w).map(function(b){return w[b]});if(c.join("")!=="0123456789")return!1;var F={};return"abcdefghijklmnopqrst".split("").forEach(function(b){F[b]=b}),Object.keys(Object.assign({},F)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Me.exports=v()?Object.assign:function(y,w){for(var S,c=x(y),F,b=1;b<arguments.length;b++){S=Object(arguments[b]);for(var R in S)l.call(S,R)&&(c[R]=S[R]);if(m){F=m(S);for(var B=0;B<F.length;B++)d.call(S,F[B])&&(c[F[B]]=S[F[B]])}}return c}}),e0=s((ot,Me)=>{var m=f0();function l(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}m(l.prototype,{instance:function(S,c){S=(S||"gregorian").toLowerCase(),c=c||"";var F=this._localCals[S+"-"+c];if(!F&&this.calendars[S]&&(F=new this.calendars[S](c),this._localCals[S+"-"+c]=F),!F)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,S);return F},newDate:function(S,c,F,b,R){return b=(S!=null&&S.year?S.calendar():typeof b=="string"?this.instance(b,R):b)||this.instance(),b.newDate(S,c,F)},substituteDigits:function(S){return function(c){return(c+"").replace(/[0-9]/g,function(F){return S[F]})}},substituteChineseDigits:function(S,c){return function(F){for(var b="",R=0;F>0;){var B=F%10;b=(B===0?"":S[B]+c[R])+b,R++,F=Math.floor(F/10)}return b.indexOf(S[1]+c[1])===0&&(b=b.substr(1)),b||S[0]}}});function d(S,c,F,b){if(this._calendar=S,this._year=c,this._month=F,this._day=b,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(w.local.invalidDate||w.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function x(S,c){return S=""+S,"000000".substring(0,c-S.length)+S}m(d.prototype,{newDate:function(S,c,F){return this._calendar.newDate(S??this,c,F)},year:function(S){return arguments.length===0?this._year:this.set(S,"y")},month:function(S){return arguments.length===0?this._month:this.set(S,"m")},day:function(S){return arguments.length===0?this._day:this.set(S,"d")},date:function(S,c,F){if(!this._calendar.isValid(S,c,F))throw(w.local.invalidDate||w.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=S,this._month=c,this._day=F,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(S,c){return this._calendar.add(this,S,c)},set:function(S,c){return this._calendar.set(this,S,c)},compareTo:function(S){if(this._calendar.name!==S._calendar.name)throw(w.local.differentCalendars||w.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,S._calendar.local.name);var c=this._year!==S._year?this._year-S._year:this._month!==S._month?this.monthOfYear()-S.monthOfYear():this._day-S._day;return c===0?0:c<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(S){return this._calendar.fromJD(S)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(S){return this._calendar.fromJSDate(S)},toString:function(){return(this.year()<0?"-":"")+x(Math.abs(this.year()),4)+"-"+x(this.month(),2)+"-"+x(this.day(),2)}});function v(){this.shortYearCutoff="+10"}m(v.prototype,{_validateLevel:0,newDate:function(S,c,F){return S==null?this.today():(S.year&&(this._validate(S,c,F,w.local.invalidDate||w.regionalOptions[""].invalidDate),F=S.day(),c=S.month(),S=S.year()),new d(this,S,c,F))},today:function(){return this.fromJSDate(new Date)},epoch:function(S){var c=this._validate(S,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear);return c.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(S){var c=this._validate(S,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear);return(c.year()<0?"-":"")+x(Math.abs(c.year()),4)},monthsInYear:function(S){return this._validate(S,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear),12},monthOfYear:function(S,c){var F=this._validate(S,c,this.minDay,w.local.invalidMonth||w.regionalOptions[""].invalidMonth);return(F.month()+this.monthsInYear(F)-this.firstMonth)%this.monthsInYear(F)+this.minMonth},fromMonthOfYear:function(S,c){var F=(c+this.firstMonth-2*this.minMonth)%this.monthsInYear(S)+this.minMonth;return this._validate(S,F,this.minDay,w.local.invalidMonth||w.regionalOptions[""].invalidMonth),F},daysInYear:function(S){var c=this._validate(S,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear);return this.leapYear(c)?366:365},dayOfYear:function(S,c,F){var b=this._validate(S,c,F,w.local.invalidDate||w.regionalOptions[""].invalidDate);return b.toJD()-this.newDate(b.year(),this.fromMonthOfYear(b.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(S,c,F){var b=this._validate(S,c,F,w.local.invalidDate||w.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(b))+2)%this.daysInWeek()},extraInfo:function(S,c,F){return this._validate(S,c,F,w.local.invalidDate||w.regionalOptions[""].invalidDate),{}},add:function(S,c,F){return this._validate(S,this.minMonth,this.minDay,w.local.invalidDate||w.regionalOptions[""].invalidDate),this._correctAdd(S,this._add(S,c,F),c,F)},_add:function(S,c,F){if(this._validateLevel++,F==="d"||F==="w"){var b=S.toJD()+c*(F==="w"?this.daysInWeek():1),R=S.calendar().fromJD(b);return this._validateLevel--,[R.year(),R.month(),R.day()]}try{var B=S.year()+(F==="y"?c:0),O=S.monthOfYear()+(F==="m"?c:0),R=S.day(),P=function(C){for(;O<C.minMonth;)B--,O+=C.monthsInYear(B);for(var A=C.monthsInYear(B);O>A-1+C.minMonth;)B++,O-=A,A=C.monthsInYear(B)};F==="y"?(S.month()!==this.fromMonthOfYear(B,O)&&(O=this.newDate(B,S.month(),this.minDay).monthOfYear()),O=Math.min(O,this.monthsInYear(B)),R=Math.min(R,this.daysInMonth(B,this.fromMonthOfYear(B,O)))):F==="m"&&(P(this),R=Math.min(R,this.daysInMonth(B,this.fromMonthOfYear(B,O))));var D=[B,this.fromMonthOfYear(B,O),R];return this._validateLevel--,D}catch(H){throw this._validateLevel--,H}},_correctAdd:function(S,c,F,b){if(!this.hasYearZero&&(b==="y"||b==="m")&&(c[0]===0||S.year()>0!=c[0]>0)){var R={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[b],B=F<0?-1:1;c=this._add(S,F*R[0]+B*R[1],R[2])}return S.date(c[0],c[1],c[2])},set:function(S,c,F){this._validate(S,this.minMonth,this.minDay,w.local.invalidDate||w.regionalOptions[""].invalidDate);var b=F==="y"?c:S.year(),R=F==="m"?c:S.month(),B=F==="d"?c:S.day();return(F==="y"||F==="m")&&(B=Math.min(B,this.daysInMonth(b,R))),S.date(b,R,B)},isValid:function(S,c,F){this._validateLevel++;var b=this.hasYearZero||S!==0;if(b){var R=this.newDate(S,c,this.minDay);b=c>=this.minMonth&&c-this.minMonth<this.monthsInYear(R)&&F>=this.minDay&&F-this.minDay<this.daysInMonth(R)}return this._validateLevel--,b},toJSDate:function(S,c,F){var b=this._validate(S,c,F,w.local.invalidDate||w.regionalOptions[""].invalidDate);return w.instance().fromJD(this.toJD(b)).toJSDate()},fromJSDate:function(S){return this.fromJD(w.instance().fromJSDate(S).toJD())},_validate:function(S,c,F,b){if(S.year){if(this._validateLevel===0&&this.name!==S.calendar().name)throw(w.local.differentCalendars||w.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,S.calendar().local.name);return S}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(S,c,F))throw b.replace(/\{0\}/,this.local.name);var R=this.newDate(S,c,F);return this._validateLevel--,R}catch(B){throw this._validateLevel--,B}}});function y(S){this.local=this.regionalOptions[S]||this.regionalOptions[""]}y.prototype=new v,m(y.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(F){var c=this._validate(F,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear),F=c.year()+(c.year()<0?1:0);return F%4===0&&(F%100!==0||F%400===0)},weekOfYear:function(S,c,F){var b=this.newDate(S,c,F);return b.add(4-(b.dayOfWeek()||7),"d"),Math.floor((b.dayOfYear()-1)/7)+1},daysInMonth:function(S,c){var F=this._validate(S,c,this.minDay,w.local.invalidMonth||w.regionalOptions[""].invalidMonth);return this.daysPerMonth[F.month()-1]+(F.month()===2&&this.leapYear(F.year())?1:0)},weekDay:function(S,c,F){return(this.dayOfWeek(S,c,F)||7)<6},toJD:function(S,c,F){var b=this._validate(S,c,F,w.local.invalidDate||w.regionalOptions[""].invalidDate);S=b.year(),c=b.month(),F=b.day(),S<0&&S++,c<3&&(c+=12,S--);var R=Math.floor(S/100),B=2-R+Math.floor(R/4);return Math.floor(365.25*(S+4716))+Math.floor(30.6001*(c+1))+F+B-1524.5},fromJD:function(S){var c=Math.floor(S+.5),F=Math.floor((c-186721625e-2)/36524.25);F=c+1+F-Math.floor(F/4);var b=F+1524,R=Math.floor((b-122.1)/365.25),B=Math.floor(365.25*R),O=Math.floor((b-B)/30.6001),P=b-B-Math.floor(O*30.6001),D=O-(O>13.5?13:1),H=R-(D>2.5?4716:4715);return H<=0&&H--,this.newDate(H,D,P)},toJSDate:function(S,c,F){var b=this._validate(S,c,F,w.local.invalidDate||w.regionalOptions[""].invalidDate),R=new Date(b.year(),b.month()-1,b.day());return R.setHours(0),R.setMinutes(0),R.setSeconds(0),R.setMilliseconds(0),R.setHours(R.getHours()>12?R.getHours()+2:0),R},fromJSDate:function(S){return this.newDate(S.getFullYear(),S.getMonth()+1,S.getDate())}});var w=Me.exports=new l;w.cdate=d,w.baseCalendar=v,w.calendars.gregorian=y}),Wv=s(()=>{var ot=f0(),Me=e0();ot(Me.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),Me.local=Me.regionalOptions[""],ot(Me.cdate.prototype,{formatDate:function(m,l){return typeof m!="string"&&(l=m,m=""),this._calendar.formatDate(m||"",this,l)}}),ot(Me.baseCalendar.prototype,{UNIX_EPOCH:Me.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:1440*60,TICKS_EPOCH:Me.instance().jdEpoch,TICKS_PER_DAY:1440*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(m,l,d){if(typeof m!="string"&&(d=l,l=m,m=""),!l)return"";if(l.calendar()!==this)throw Me.local.invalidFormat||Me.regionalOptions[""].invalidFormat;m=m||this.local.dateFormat,d=d||{};for(var x=d.dayNamesShort||this.local.dayNamesShort,v=d.dayNames||this.local.dayNames,y=d.monthNumbers||this.local.monthNumbers,w=d.monthNamesShort||this.local.monthNamesShort,S=d.monthNames||this.local.monthNames,c=d.calculateWeek||this.local.calculateWeek,F=function(j,Z){for(var nl=1;L+nl<m.length&&m.charAt(L+nl)===j;)nl++;return L+=nl-1,Math.floor(nl/(Z||1))>1},b=function(j,Z,nl,Pe){var se=""+Z;if(F(j,Pe))for(;se.length<nl;)se="0"+se;return se},R=function(j,Z,nl,Pe){return F(j)?Pe[Z]:nl[Z]},B=this,O=function(j){return typeof y=="function"?y.call(B,j,F("m")):H(b("m",j.month(),2))},P=function(j,Z){return Z?typeof S=="function"?S.call(B,j):S[j.month()-B.minMonth]:typeof w=="function"?w.call(B,j):w[j.month()-B.minMonth]},D=this.local.digits,H=function(j){return d.localNumbers&&D?D(j):j},C="",A=!1,L=0;L<m.length;L++)if(A)m.charAt(L)==="'"&&!F("'")?A=!1:C+=m.charAt(L);else switch(m.charAt(L)){case"d":C+=H(b("d",l.day(),2));break;case"D":C+=R("D",l.dayOfWeek(),x,v);break;case"o":C+=b("o",l.dayOfYear(),3);break;case"w":C+=b("w",l.weekOfYear(),2);break;case"m":C+=O(l);break;case"M":C+=P(l,F("M"));break;case"y":C+=F("y",2)?l.year():(l.year()%100<10?"0":"")+l.year()%100;break;case"Y":F("Y",2),C+=l.formatYear();break;case"J":C+=l.toJD();break;case"@":C+=(l.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":C+=(l.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":F("'")?C+="'":A=!0;break;default:C+=m.charAt(L)}return C},parseDate:function(m,l,d){if(l==null)throw Me.local.invalidArguments||Me.regionalOptions[""].invalidArguments;if(l=typeof l=="object"?l.toString():l+"",l==="")return null;m=m||this.local.dateFormat,d=d||{};var x=d.shortYearCutoff||this.shortYearCutoff;x=typeof x!="string"?x:this.today().year()%100+parseInt(x,10);for(var v=d.dayNamesShort||this.local.dayNamesShort,y=d.dayNames||this.local.dayNames,w=d.parseMonth||this.local.parseMonth,S=d.monthNumbers||this.local.monthNumbers,c=d.monthNamesShort||this.local.monthNamesShort,F=d.monthNames||this.local.monthNames,b=-1,R=-1,B=-1,O=-1,P=-1,D=!1,H=!1,C=function(In,_t){for(var Fn=1;q+Fn<m.length&&m.charAt(q+Fn)===In;)Fn++;return q+=Fn-1,Math.floor(Fn/(_t||1))>1},A=function(In,_t){var Fn=C(In,_t),al=[2,3,Fn?4:2,Fn?4:2,10,11,20]["oyYJ@!".indexOf(In)+1],sl=new RegExp("^-?\\d{1,"+al+"}"),ce=l.substring(se).match(sl);if(!ce)throw(Me.local.missingNumberAt||Me.regionalOptions[""].missingNumberAt).replace(/\{0\}/,se);return se+=ce[0].length,parseInt(ce[0],10)},L=this,j=function(){if(typeof S=="function"){C("m");var In=S.call(L,l.substring(se));return se+=In.length,In}return A("m")},Z=function(In,_t,Fn,al){for(var sl=C(In,al)?Fn:_t,ce=0;ce<sl.length;ce++)if(l.substr(se,sl[ce].length).toLowerCase()===sl[ce].toLowerCase())return se+=sl[ce].length,ce+L.minMonth;throw(Me.local.unknownNameAt||Me.regionalOptions[""].unknownNameAt).replace(/\{0\}/,se)},nl=function(){if(typeof F=="function"){var In=C("M")?F.call(L,l.substring(se)):c.call(L,l.substring(se));return se+=In.length,In}return Z("M",c,F)},Pe=function(){if(l.charAt(se)!==m.charAt(q))throw(Me.local.unexpectedLiteralAt||Me.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,se);se++},se=0,q=0;q<m.length;q++)if(H)m.charAt(q)==="'"&&!C("'")?H=!1:Pe();else switch(m.charAt(q)){case"d":O=A("d");break;case"D":Z("D",v,y);break;case"o":P=A("o");break;case"w":A("w");break;case"m":B=j();break;case"M":B=nl();break;case"y":var ol=q;D=!C("y",2),q=ol,R=A("y",2);break;case"Y":R=A("Y",2);break;case"J":b=A("J")+.5,l.charAt(se)==="."&&(se++,A("J"));break;case"@":b=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":b=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":se=l.length;break;case"'":C("'")?Pe():H=!0;break;default:Pe()}if(se<l.length)throw Me.local.unexpectedText||Me.regionalOptions[""].unexpectedText;if(R===-1?R=this.today().year():R<100&&D&&(R+=x===-1?1900:this.today().year()-this.today().year()%100-(R<=x?0:100)),typeof B=="string"&&(B=w.call(this,R,B)),P>-1){B=1,O=P;for(var nt=this.daysInMonth(R,B);O>nt;nt=this.daysInMonth(R,B))B++,O-=nt}return b>-1?this.fromJD(b):this.newDate(R,B,O)},determineDate:function(m,l,d,x,v){d&&typeof d!="object"&&(v=x,x=d,d=null),typeof x!="string"&&(v=x,x="");var y=this,w=function(S){try{return y.parseDate(x,S,v)}catch{}S=S.toLowerCase();for(var c=(S.match(/^c/)&&d?d.newDate():null)||y.today(),F=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,b=F.exec(S);b;)c.add(parseInt(b[1],10),b[2]||"d"),b=F.exec(S);return c};return l=l?l.newDate():null,m=m==null?l:typeof m=="string"?w(m):typeof m=="number"?isNaN(m)||m===1/0||m===-1/0?l:y.today().add(m,"d"):y.newDate(m),m}})}),N1=s(()=>{var ot=e0(),Me=f0(),m=ot.instance();function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new ot.baseCalendar,Me(l.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(b,R){if(typeof b=="string"){var B=b.match(x);return B?B[0]:""}var O=this._validateYear(b),P=b.month(),D=""+this.toChineseMonth(O,P);return R&&D.length<2&&(D="0"+D),this.isIntercalaryMonth(O,P)&&(D+="i"),D},monthNames:function(b){if(typeof b=="string"){var R=b.match(v);return R?R[0]:""}var B=this._validateYear(b),O=b.month(),P=this.toChineseMonth(B,O),D=["","","","","","","","","","","",""][P-1];return this.isIntercalaryMonth(B,O)&&(D=""+D),D},monthNamesShort:function(b){if(typeof b=="string"){var R=b.match(y);return R?R[0]:""}var B=this._validateYear(b),O=b.month(),P=this.toChineseMonth(B,O),D=["","","","","","","","","","","",""][P-1];return this.isIntercalaryMonth(B,O)&&(D=""+D),D},parseMonth:function(b,R){b=this._validateYear(b);var B=parseInt(R),O;if(isNaN(B))R[0]===""&&(O=!0,R=R.substring(1)),R[R.length-1]===""&&(R=R.substring(0,R.length-1)),B=1+["","","","","","","","","","","",""].indexOf(R);else{var P=R[R.length-1];O=P==="i"||P==="I"}var D=this.toMonthIndex(b,B,O);return D},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(b,R){if(b.year&&(b=b.year()),typeof b!="number"||b<1888||b>2111)throw R.replace(/\{0\}/,this.local.name);return b},toMonthIndex:function(b,R,B){var O=this.intercalaryMonth(b),P=B&&R!==O;if(P||R<1||R>12)throw ot.local.invalidMonth.replace(/\{0\}/,this.local.name);var D;return O?!B&&R<=O?D=R-1:D=R:D=R-1,D},toChineseMonth:function(b,R){b.year&&(b=b.year(),R=b.month());var B=this.intercalaryMonth(b),O=B?12:11;if(R<0||R>O)throw ot.local.invalidMonth.replace(/\{0\}/,this.local.name);var P;return B?R<B?P=R+1:P=R:P=R+1,P},intercalaryMonth:function(b){b=this._validateYear(b);var R=w[b-w[0]],B=R>>13;return B},isIntercalaryMonth:function(b,R){b.year&&(b=b.year(),R=b.month());var B=this.intercalaryMonth(b);return!!B&&B===R},leapYear:function(b){return this.intercalaryMonth(b)!==0},weekOfYear:function(b,R,B){var O=this._validateYear(b,ot.local.invalidyear),P=S[O-S[0]],D=P>>9&4095,H=P>>5&15,C=P&31,A;A=m.newDate(D,H,C),A.add(4-(A.dayOfWeek()||7),"d");var L=this.toJD(b,R,B)-A.toJD();return 1+Math.floor(L/7)},monthsInYear:function(b){return this.leapYear(b)?13:12},daysInMonth:function(b,R){b.year&&(R=b.month(),b=b.year()),b=this._validateYear(b);var B=w[b-w[0]],O=B>>13,P=O?12:11;if(R>P)throw ot.local.invalidMonth.replace(/\{0\}/,this.local.name);var D=B&1<<12-R?30:29;return D},weekDay:function(b,R,B){return(this.dayOfWeek(b,R,B)||7)<6},toJD:function(b,R,B){var O=this._validate(b,D,B,ot.local.invalidDate);b=this._validateYear(O.year()),R=O.month(),B=O.day();var P=this.isIntercalaryMonth(b,R),D=this.toChineseMonth(b,R),H=F(b,D,B,P);return m.toJD(H.year,H.month,H.day)},fromJD:function(b){var R=m.fromJD(b),B=c(R.year(),R.month(),R.day()),O=this.toMonthIndex(B.year,B.month,B.isIntercalary);return this.newDate(B.year,O,B.day)},fromString:function(b){var R=b.match(d),B=this._validateYear(+R[1]),O=+R[2],P=!!R[3],D=this.toMonthIndex(B,O,P),H=+R[4];return this.newDate(B,D,H)},add:function(b,R,B){var O=b.year(),P=b.month(),D=this.isIntercalaryMonth(O,P),H=this.toChineseMonth(O,P),C=Object.getPrototypeOf(l.prototype).add.call(this,b,R,B);if(B==="y"){var A=C.year(),L=C.month(),j=this.isIntercalaryMonth(A,H),Z=D&&j?this.toMonthIndex(A,H,!0):this.toMonthIndex(A,H,!1);Z!==L&&C.month(Z)}return C}});var d=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,x=/^\d?\d[iI]?/m,v=/^??[]?/m,y=/^??[]?/m;ot.calendars.chinese=l;var w=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],S=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function c(b,R,B,O){var P,D;if(typeof b=="object")P=b,D=R||{};else{var H=typeof b=="number"&&b>=1888&&b<=2111;if(!H)throw new Error("Solar year outside range 1888-2111");var C=typeof R=="number"&&R>=1&&R<=12;if(!C)throw new Error("Solar month outside range 1 - 12");var A=typeof B=="number"&&B>=1&&B<=31;if(!A)throw new Error("Solar day outside range 1 - 31");P={year:b,month:R,day:B},D={}}var L=S[P.year-S[0]],j=P.year<<9|P.month<<5|P.day;D.year=j>=L?P.year:P.year-1,L=S[D.year-S[0]];var Z=L>>9&4095,nl=L>>5&15,Pe=L&31,se,q=new Date(Z,nl-1,Pe),ol=new Date(P.year,P.month-1,P.day);se=Math.round((ol-q)/(24*3600*1e3));var nt=w[D.year-w[0]],In;for(In=0;In<13;In++){var _t=nt&1<<12-In?30:29;if(se<_t)break;se-=_t}var Fn=nt>>13;return!Fn||In<Fn?(D.isIntercalary=!1,D.month=1+In):In===Fn?(D.isIntercalary=!0,D.month=In):(D.isIntercalary=!1,D.month=In),D.day=1+se,D}function F(b,R,B,O,P){var D,H;if(typeof b=="object")H=b,D=R||{};else{var C=typeof b=="number"&&b>=1888&&b<=2111;if(!C)throw new Error("Lunar year outside range 1888-2111");var A=typeof R=="number"&&R>=1&&R<=12;if(!A)throw new Error("Lunar month outside range 1 - 12");var L=typeof B=="number"&&B>=1&&B<=30;if(!L)throw new Error("Lunar day outside range 1 - 30");var j;typeof O=="object"?(j=!1,D=O):(j=!!O,D={}),H={year:b,month:R,day:B,isIntercalary:j}}var Z;Z=H.day-1;var nl=w[H.year-w[0]],Pe=nl>>13,se;Pe&&(H.month>Pe||H.isIntercalary)?se=H.month:se=H.month-1;for(var q=0;q<se;q++){var ol=nl&1<<12-q?30:29;Z+=ol}var nt=S[H.year-S[0]],In=nt>>9&4095,_t=nt>>5&15,Fn=nt&31,al=new Date(In,_t-1,Fn+Z);return D.year=al.getFullYear(),D.month=1+al.getMonth(),D.day=al.getDate(),D}}),Xy=s(()=>{var ot=e0(),Me=f0();function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}m.prototype=new ot.baseCalendar,Me(m.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,ot.local.invalidYear),x=d.year()+(d.year()<0?1:0);return x%4===3||x%4===-1},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,ot.local.invalidYear||ot.regionalOptions[""].invalidYear),13},weekOfYear:function(l,d,x){var v=this.newDate(l,d,x);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(l,d){var x=this._validate(l,d,this.minDay,ot.local.invalidMonth);return this.daysPerMonth[x.month()-1]+(x.month()===13&&this.leapYear(x.year())?1:0)},weekDay:function(l,d,x){return(this.dayOfWeek(l,d,x)||7)<6},toJD:function(l,d,x){var v=this._validate(l,d,x,ot.local.invalidDate);return l=v.year(),l<0&&l++,v.day()+(v.month()-1)*30+(l-1)*365+Math.floor(l/4)+this.jdEpoch-1},fromJD:function(l){var d=Math.floor(l)+.5-this.jdEpoch,x=Math.floor((d-Math.floor((d+366)/1461))/365)+1;x<=0&&x--,d=Math.floor(l)+.5-this.newDate(x,1,1).toJD();var v=Math.floor(d/30)+1,y=d-(v-1)*30+1;return this.newDate(x,v,y)}}),ot.calendars.coptic=m}),Qy=s(()=>{var ot=e0(),Me=f0();function m(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}m.prototype=new ot.baseCalendar,Me(m.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(d){return this._validate(d,this.minMonth,this.minDay,ot.local.invalidYear),!1},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,ot.local.invalidYear),13},daysInYear:function(d){return this._validate(d,this.minMonth,this.minDay,ot.local.invalidYear),400},weekOfYear:function(d,x,v){var y=this.newDate(d,x,v);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/8)+1},daysInMonth:function(d,x){var v=this._validate(d,x,this.minDay,ot.local.invalidMonth);return this.daysPerMonth[v.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(d,x,v){var y=this._validate(d,x,v,ot.local.invalidDate);return(y.day()+1)%8},weekDay:function(d,x,v){var y=this.dayOfWeek(d,x,v);return y>=2&&y<=6},extraInfo:function(d,x,v){var y=this._validate(d,x,v,ot.local.invalidDate);return{century:l[Math.floor((y.year()-1)/100)+1]||""}},toJD:function(d,x,v){var y=this._validate(d,x,v,ot.local.invalidDate);return d=y.year()+(y.year()<0?1:0),x=y.month(),v=y.day(),v+(x>1?16:0)+(x>2?(x-2)*32:0)+(d-1)*400+this.jdEpoch-1},fromJD:function(d){d=Math.floor(d+.5)-Math.floor(this.jdEpoch)-1;var x=Math.floor(d/400)+1;d-=(x-1)*400,d+=d>15?16:0;var v=Math.floor(d/32)+1,y=d-(v-1)*32+1;return this.newDate(x<=0?x-1:x,v,y)}});var l={20:"Fruitbat",21:"Anchovy"};ot.calendars.discworld=m}),t3=s(()=>{var ot=e0(),Me=f0();function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}m.prototype=new ot.baseCalendar,Me(m.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,ot.local.invalidYear),x=d.year()+(d.year()<0?1:0);return x%4===3||x%4===-1},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,ot.local.invalidYear||ot.regionalOptions[""].invalidYear),13},weekOfYear:function(l,d,x){var v=this.newDate(l,d,x);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(l,d){var x=this._validate(l,d,this.minDay,ot.local.invalidMonth);return this.daysPerMonth[x.month()-1]+(x.month()===13&&this.leapYear(x.year())?1:0)},weekDay:function(l,d,x){return(this.dayOfWeek(l,d,x)||7)<6},toJD:function(l,d,x){var v=this._validate(l,d,x,ot.local.invalidDate);return l=v.year(),l<0&&l++,v.day()+(v.month()-1)*30+(l-1)*365+Math.floor(l/4)+this.jdEpoch-1},fromJD:function(l){var d=Math.floor(l)+.5-this.jdEpoch,x=Math.floor((d-Math.floor((d+366)/1461))/365)+1;x<=0&&x--,d=Math.floor(l)+.5-this.newDate(x,1,1).toJD();var v=Math.floor(d/30)+1,y=d-(v-1)*30+1;return this.newDate(x,v,y)}}),ot.calendars.ethiopian=m}),gy=s(()=>{var ot=e0(),Me=f0();function m(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}m.prototype=new ot.baseCalendar,Me(m.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(d){var x=this._validate(d,this.minMonth,this.minDay,ot.local.invalidYear);return this._leapYear(x.year())},_leapYear:function(d){return d=d<0?d+1:d,l(d*7+1,19)<7},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,ot.local.invalidYear),this._leapYear(d.year?d.year():d)?13:12},weekOfYear:function(d,x,v){var y=this.newDate(d,x,v);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInYear:function(d){var x=this._validate(d,this.minMonth,this.minDay,ot.local.invalidYear);return d=x.year(),this.toJD(d===-1?1:d+1,7,1)-this.toJD(d,7,1)},daysInMonth:function(d,x){return d.year&&(x=d.month(),d=d.year()),this._validate(d,x,this.minDay,ot.local.invalidMonth),x===12&&this.leapYear(d)||x===8&&l(this.daysInYear(d),10)===5?30:x===9&&l(this.daysInYear(d),10)===3?29:this.daysPerMonth[x-1]},weekDay:function(d,x,v){return this.dayOfWeek(d,x,v)!==6},extraInfo:function(d,x,v){var y=this._validate(d,x,v,ot.local.invalidDate);return{yearType:(this.leapYear(y)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(y)%10-3]}},toJD:function(d,x,v){var y=this._validate(d,x,v,ot.local.invalidDate);d=y.year(),x=y.month(),v=y.day();var w=d<=0?d+1:d,S=this.jdEpoch+this._delay1(w)+this._delay2(w)+v+1;if(x<7){for(var c=7;c<=this.monthsInYear(d);c++)S+=this.daysInMonth(d,c);for(var c=1;c<x;c++)S+=this.daysInMonth(d,c)}else for(var c=7;c<x;c++)S+=this.daysInMonth(d,c);return S},_delay1:function(d){var x=Math.floor((235*d-234)/19),v=12084+13753*x,y=x*29+Math.floor(v/25920);return l(3*(y+1),7)<3&&y++,y},_delay2:function(d){var x=this._delay1(d-1),v=this._delay1(d),y=this._delay1(d+1);return y-v===356?2:v-x===382?1:0},fromJD:function(d){d=Math.floor(d)+.5;for(var x=Math.floor((d-this.jdEpoch)*98496/35975351)-1;d>=this.toJD(x===-1?1:x+1,7,1);)x++;for(var v=d<this.toJD(x,1,1)?7:1;d>this.toJD(x,v,this.daysInMonth(x,v));)v++;var y=d-this.toJD(x,v,1)+1;return this.newDate(x,v,y)}});function l(d,x){return d-x*Math.floor(d/x)}ot.calendars.hebrew=m}),Pv=s(()=>{var ot=e0(),Me=f0();function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}m.prototype=new ot.baseCalendar,Me(m.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(l){var d=this._validate(l,this.minMonth,this.minDay,ot.local.invalidYear);return(d.year()*11+14)%30<11},weekOfYear:function(l,d,x){var v=this.newDate(l,d,x);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(l){return this.leapYear(l)?355:354},daysInMonth:function(l,d){var x=this._validate(l,d,this.minDay,ot.local.invalidMonth);return this.daysPerMonth[x.month()-1]+(x.month()===12&&this.leapYear(x.year())?1:0)},weekDay:function(l,d,x){return this.dayOfWeek(l,d,x)!==5},toJD:function(l,d,x){var v=this._validate(l,d,x,ot.local.invalidDate);return l=v.year(),d=v.month(),x=v.day(),l=l<=0?l+1:l,x+Math.ceil(29.5*(d-1))+(l-1)*354+Math.floor((3+11*l)/30)+this.jdEpoch-1},fromJD:function(l){l=Math.floor(l)+.5;var d=Math.floor((30*(l-this.jdEpoch)+10646)/10631);d=d<=0?d-1:d;var x=Math.min(12,Math.ceil((l-29-this.toJD(d,1,1))/29.5)+1),v=l-this.toJD(d,x,1)+1;return this.newDate(d,x,v)}}),ot.calendars.islamic=m}),my=s(()=>{var ot=e0(),Me=f0();function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}m.prototype=new ot.baseCalendar,Me(m.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,ot.local.invalidYear),x=d.year()<0?d.year()+1:d.year();return x%4===0},weekOfYear:function(l,d,x){var v=this.newDate(l,d,x);return v.add(4-(v.dayOfWeek()||7),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(l,d){var x=this._validate(l,d,this.minDay,ot.local.invalidMonth);return this.daysPerMonth[x.month()-1]+(x.month()===2&&this.leapYear(x.year())?1:0)},weekDay:function(l,d,x){return(this.dayOfWeek(l,d,x)||7)<6},toJD:function(l,d,x){var v=this._validate(l,d,x,ot.local.invalidDate);return l=v.year(),d=v.month(),x=v.day(),l<0&&l++,d<=2&&(l--,d+=12),Math.floor(365.25*(l+4716))+Math.floor(30.6001*(d+1))+x-1524.5},fromJD:function(l){var d=Math.floor(l+.5),x=d+1524,v=Math.floor((x-122.1)/365.25),y=Math.floor(365.25*v),w=Math.floor((x-y)/30.6001),S=w-Math.floor(w<14?1:13),c=v-Math.floor(S>2?4716:4715),F=x-y-Math.floor(30.6001*w);return c<=0&&c--,this.newDate(c,S,F)}}),ot.calendars.julian=m}),vy=s(()=>{var ot=e0(),Me=f0();function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new ot.baseCalendar,Me(m.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(x){return this._validate(x,this.minMonth,this.minDay,ot.local.invalidYear),!1},formatYear:function(x){var v=this._validate(x,this.minMonth,this.minDay,ot.local.invalidYear);x=v.year();var y=Math.floor(x/400);x=x%400,x+=x<0?400:0;var w=Math.floor(x/20);return y+"."+w+"."+x%20},forYear:function(x){if(x=x.split("."),x.length<3)throw"Invalid Mayan year";for(var v=0,y=0;y<x.length;y++){var w=parseInt(x[y],10);if(Math.abs(w)>19||y>0&&w<0)throw"Invalid Mayan year";v=v*20+w}return v},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,ot.local.invalidYear),18},weekOfYear:function(x,v,y){return this._validate(x,v,y,ot.local.invalidDate),0},daysInYear:function(x){return this._validate(x,this.minMonth,this.minDay,ot.local.invalidYear),360},daysInMonth:function(x,v){return this._validate(x,v,this.minDay,ot.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(x,v,y){var w=this._validate(x,v,y,ot.local.invalidDate);return w.day()},weekDay:function(x,v,y){return this._validate(x,v,y,ot.local.invalidDate),!0},extraInfo:function(x,v,y){var w=this._validate(x,v,y,ot.local.invalidDate),S=w.toJD(),c=this._toHaab(S),F=this._toTzolkin(S);return{haabMonthName:this.local.haabMonths[c[0]-1],haabMonth:c[0],haabDay:c[1],tzolkinDayName:this.local.tzolkinMonths[F[0]-1],tzolkinDay:F[0],tzolkinTrecena:F[1]}},_toHaab:function(x){x-=this.jdEpoch;var v=l(x+8+340,365);return[Math.floor(v/20)+1,l(v,20)]},_toTzolkin:function(x){return x-=this.jdEpoch,[d(x+20,20),d(x+4,13)]},toJD:function(x,v,y){var w=this._validate(x,v,y,ot.local.invalidDate);return w.day()+w.month()*20+w.year()*360+this.jdEpoch},fromJD:function(x){x=Math.floor(x)+.5-this.jdEpoch;var v=Math.floor(x/360);x=x%360,x+=x<0?360:0;var y=Math.floor(x/20),w=x%20;return this.newDate(v,y,w)}});function l(x,v){return x-v*Math.floor(x/v)}function d(x,v){return l(x-1,v)+1}ot.calendars.mayan=m}),$v=s(()=>{var ot=e0(),Me=f0();function m(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}m.prototype=new ot.baseCalendar;var l=ot.instance("gregorian");Me(m.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(d){var x=this._validate(d,this.minMonth,this.minDay,ot.local.invalidYear||ot.regionalOptions[""].invalidYear);return l.leapYear(x.year()+(x.year()<1?1:0)+1469)},weekOfYear:function(d,x,v){var y=this.newDate(d,x,v);return y.add(1-(y.dayOfWeek()||7),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(d,x){var v=this._validate(d,x,this.minDay,ot.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(d,x,v){return(this.dayOfWeek(d,x,v)||7)<6},toJD:function(w,x,v){var y=this._validate(w,x,v,ot.local.invalidMonth),w=y.year();w<0&&w++;for(var S=y.day(),c=1;c<y.month();c++)S+=this.daysPerMonth[c-1];return S+l.toJD(w+1468,3,13)},fromJD:function(d){d=Math.floor(d+.5);for(var x=Math.floor((d-(this.jdEpoch-1))/366);d>=this.toJD(x+1,1,1);)x++;for(var v=d-Math.floor(this.toJD(x,1,1)+.5)+1,y=1;v>this.daysInMonth(x,y);)v-=this.daysInMonth(x,y),y++;return this.newDate(x,y,v)}}),ot.calendars.nanakshahi=m}),yy=s(()=>{var ot=e0(),Me=f0();function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}m.prototype=new ot.baseCalendar,Me(m.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(l){return this.daysInYear(l)!==this.daysPerYear},weekOfYear:function(l,d,x){var v=this.newDate(l,d,x);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(l){var d=this._validate(l,this.minMonth,this.minDay,ot.local.invalidYear);if(l=d.year(),typeof this.NEPALI_CALENDAR_DATA[l]>"u")return this.daysPerYear;for(var x=0,v=this.minMonth;v<=12;v++)x+=this.NEPALI_CALENDAR_DATA[l][v];return x},daysInMonth:function(l,d){return l.year&&(d=l.month(),l=l.year()),this._validate(l,d,this.minDay,ot.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[l]>"u"?this.daysPerMonth[d-1]:this.NEPALI_CALENDAR_DATA[l][d]},weekDay:function(l,d,x){return this.dayOfWeek(l,d,x)!==6},toJD:function(l,d,x){var v=this._validate(l,d,x,ot.local.invalidDate);l=v.year(),d=v.month(),x=v.day();var y=ot.instance(),w=0,S=d,c=l;this._createMissingCalendarData(l);var F=l-(S>9||S===9&&x>=this.NEPALI_CALENDAR_DATA[c][0]?56:57);for(d!==9&&(w=x,S--);S!==9;)S<=0&&(S=12,c--),w+=this.NEPALI_CALENDAR_DATA[c][S],S--;return d===9?(w+=x-this.NEPALI_CALENDAR_DATA[c][0],w<0&&(w+=y.daysInYear(F))):w+=this.NEPALI_CALENDAR_DATA[c][9]-this.NEPALI_CALENDAR_DATA[c][0],y.newDate(F,1,1).add(w,"d").toJD()},fromJD:function(l){var d=ot.instance(),x=d.fromJD(l),v=x.year(),y=x.dayOfYear(),w=v+56;this._createMissingCalendarData(w);for(var S=9,c=this.NEPALI_CALENDAR_DATA[w][0],F=this.NEPALI_CALENDAR_DATA[w][S]-c+1;y>F;)S++,S>12&&(S=1,w++),F+=this.NEPALI_CALENDAR_DATA[w][S];var b=this.NEPALI_CALENDAR_DATA[w][S]-(F-y);return this.newDate(w,S,b)},_createMissingCalendarData:function(l){var d=this.daysPerMonth.slice(0);d.unshift(17);for(var x=l-1;x<l+2;x++)typeof this.NEPALI_CALENDAR_DATA[x]>"u"&&(this.NEPALI_CALENDAR_DATA[x]=d)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),ot.calendars.nepali=m}),B1=s(()=>{var ot=e0(),Me=f0();function m(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}function l(d){var x=d-475;d<0&&x++;var v=.242197,y=v*x,w=v*(x+1),S=y-Math.floor(y),c=w-Math.floor(w);return S>c}m.prototype=new ot.baseCalendar,Me(m.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Dey","Bah","Esf"],dayNames:["Yekshanbeh","Doshanbeh","Seshanbeh","Chahrshanbeh","Panjshanbeh","Jom'eh","Shanbeh"],dayNamesShort:["Yek","Do","Se","Cha","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(d){var x=this._validate(d,this.minMonth,this.minDay,ot.local.invalidYear);return l(x.year())},weekOfYear:function(d,x,v){var y=this.newDate(d,x,v);return y.add(-((y.dayOfWeek()+1)%7),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(d,x){var v=this._validate(d,x,this.minDay,ot.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(d,x,v){return this.dayOfWeek(d,x,v)!==5},toJD:function(d,x,v){var y=this._validate(d,x,v,ot.local.invalidDate);d=y.year(),x=y.month(),v=y.day();var w=0;if(d>0)for(var S=1;S<d;S++)l(S)&&w++;else if(d<0)for(var S=d;S<0;S++)l(S)&&w--;return v+(x<=7?(x-1)*31:(x-1)*30+6)+(d>0?d-1:d)*365+w+this.jdEpoch-1},fromJD:function(d){d=Math.floor(d)+.5;var x=475+(d-this.toJD(475,1,1))/365.242197,v=Math.floor(x);v<=0&&v--,d>this.toJD(v,12,l(v)?30:29)&&(v++,v===0&&v++);var y=d-this.toJD(v,1,1)+1,w=y<=186?Math.ceil(y/31):Math.ceil((y-6)/30),S=d-this.toJD(v,w,1)+1;return this.newDate(v,w,S)}}),ot.calendars.persian=m,ot.calendars.jalali=m}),r3=s(()=>{var ot=e0(),Me=f0(),m=ot.instance();function l(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}l.prototype=new ot.baseCalendar,Me(l.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(v){var x=this._validate(v,this.minMonth,this.minDay,ot.local.invalidYear),v=this._t2gYear(x.year());return m.leapYear(v)},weekOfYear:function(w,x,v){var y=this._validate(w,this.minMonth,this.minDay,ot.local.invalidYear),w=this._t2gYear(y.year());return m.weekOfYear(w,y.month(),y.day())},daysInMonth:function(d,x){var v=this._validate(d,x,this.minDay,ot.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(d,x,v){return(this.dayOfWeek(d,x,v)||7)<6},toJD:function(w,x,v){var y=this._validate(w,x,v,ot.local.invalidDate),w=this._t2gYear(y.year());return m.toJD(w,y.month(),y.day())},fromJD:function(d){var x=m.fromJD(d),v=this._g2tYear(x.year());return this.newDate(v,x.month(),x.day())},_t2gYear:function(d){return d+this.yearsOffset+(d>=-this.yearsOffset&&d<=-1?1:0)},_g2tYear:function(d){return d-this.yearsOffset-(d>=1&&d<=this.yearsOffset?1:0)}}),ot.calendars.taiwan=l}),P2=s(()=>{var ot=e0(),Me=f0(),m=ot.instance();function l(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}l.prototype=new ot.baseCalendar,Me(l.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var x=this._validate(v,this.minMonth,this.minDay,ot.local.invalidYear),v=this._t2gYear(x.year());return m.leapYear(v)},weekOfYear:function(w,x,v){var y=this._validate(w,this.minMonth,this.minDay,ot.local.invalidYear),w=this._t2gYear(y.year());return m.weekOfYear(w,y.month(),y.day())},daysInMonth:function(d,x){var v=this._validate(d,x,this.minDay,ot.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(d,x,v){return(this.dayOfWeek(d,x,v)||7)<6},toJD:function(w,x,v){var y=this._validate(w,x,v,ot.local.invalidDate),w=this._t2gYear(y.year());return m.toJD(w,y.month(),y.day())},fromJD:function(d){var x=m.fromJD(d),v=this._g2tYear(x.year());return this.newDate(v,x.month(),x.day())},_t2gYear:function(d){return d-this.yearsOffset-(d>=1&&d<=this.yearsOffset?1:0)},_g2tYear:function(d){return d+this.yearsOffset+(d>=-this.yearsOffset&&d<=-1?1:0)}}),ot.calendars.thai=l}),zm=s(()=>{var ot=e0(),Me=f0();function m(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}m.prototype=new ot.baseCalendar,Me(m.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(d){var x=this._validate(d,this.minMonth,this.minDay,ot.local.invalidYear);return this.daysInYear(x.year())===355},weekOfYear:function(d,x,v){var y=this.newDate(d,x,v);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInYear:function(d){for(var x=0,v=1;v<=12;v++)x+=this.daysInMonth(d,v);return x},daysInMonth:function(d,x){for(var v=this._validate(d,x,this.minDay,ot.local.invalidMonth),y=v.toJD()-24e5+.5,w=0,S=0;S<l.length;S++){if(l[S]>y)return l[w]-l[w-1];w++}return 30},weekDay:function(d,x,v){return this.dayOfWeek(d,x,v)!==5},toJD:function(d,x,v){var y=this._validate(d,x,v,ot.local.invalidDate),w=12*(y.year()-1)+y.month()-15292,S=y.day()+l[w-1]-1;return S+24e5-.5},fromJD:function(d){for(var x=d-24e5+.5,v=0,y=0;y<l.length&&!(l[y]>x);y++)v++;var w=v+15292,S=Math.floor((w-1)/12),c=S+1,F=w-12*S,b=x-l[v-1]+1;return this.newDate(c,F,b)},isValid:function(d,x,v){var y=ot.baseCalendar.prototype.isValid.apply(this,arguments);return y&&(d=d.year!=null?d.year:d,y=d>=1276&&d<=1500),y},_validate:function(d,x,v,y){var w=ot.baseCalendar.prototype._validate.apply(this,arguments);if(w.year<1276||w.year>1500)throw y.replace(/\{0\}/,this.local.name);return w}}),ot.calendars.ummalqura=m;var l=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]}),l1=s((ot,Me)=>{Me.exports=e0(),Wv(),N1(),Xy(),Qy(),t3(),gy(),Pv(),my(),vy(),$v(),yy(),B1(),r3(),P2(),zm()}),H1=s((ot,Me)=>{var m=l1(),l=rt(),d=Et(),x=d.EPOCHJD,v=d.ONEDAY,y={valType:"enumerated",values:l.sortObjectKeys(m.calendars),editType:"calc",dflt:"gregorian"},w=function(nl,Pe,se,q){var ol={};return ol[se]=y,l.coerce(nl,Pe,ol,se,q)},S=function(nl,Pe,se,q){for(var ol=0;ol<se.length;ol++)w(nl,Pe,se[ol]+"calendar",q.calendar)},c={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},F={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},b={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},R="##",B={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:R,w:R,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function O(nl,Pe,se){for(var q=Math.floor((Pe+.05)/v)+x,ol=D(se).fromJD(q),nt=0,In,_t,Fn,al,sl;(nt=nl.indexOf("%",nt))!==-1;)In=nl.charAt(nt+1),In==="0"||In==="-"||In==="_"?(Fn=3,_t=nl.charAt(nt+2),In==="_"&&(In="-")):(_t=In,In="0",Fn=2),al=B[_t],al?(al===R?sl=R:sl=ol.formatDate(al[In]),nl=nl.substr(0,nt)+sl+nl.substr(nt+Fn),nt+=sl.length):nt+=Fn;return nl}var P={};function D(nl){var Pe=P[nl];return Pe||(Pe=P[nl]=m.instance(nl),Pe)}function H(nl){return l.extendFlat({},y,{description:nl})}function C(nl){return"Sets the calendar system to use with `"+nl+"` date data."}var A={xcalendar:H(C("x"))},L=l.extendFlat({},A,{ycalendar:H(C("y"))}),j=l.extendFlat({},L,{zcalendar:H(C("z"))}),Z=H(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));Me.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:L,bar:L,box:L,heatmap:L,contour:L,histogram:L,histogram2d:L,histogram2dcontour:L,scatter3d:j,surface:j,mesh3d:j,scattergl:L,ohlc:A,candlestick:A},layout:{calendar:H(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:Z},yaxis:{calendar:Z},scene:{xaxis:{calendar:Z},yaxis:{calendar:Z},zaxis:{calendar:Z}},polar:{radialaxis:{calendar:Z}}}},layoutAttributes:y,handleDefaults:w,handleTraceDefaults:S,CANONICAL_SUNDAY:F,CANONICAL_TICK:c,DFLTRANGE:b,getCal:D,worldCalFmt:O}}),Jy=s((ot,Me)=>{Me.exports=H1()}),xy=s((ot,Me)=>{var m=uy();m.register([Tv(),Zy(),Jy()]),Me.exports=m});return xy()})();/*! Bundled license information:

		native-promise-only/lib/npo.src.js:
		  (*! Native Promise Only
		      v0.8.1 (c) Kyle Simpson
		      MIT License: http://getify.mit-license.org
		  *)

		polybooljs/index.js:
		  (*
		   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
		   * @license MIT
		   * @preserve Project Home: https://github.com/voidqk/polybooljs
		   *)

		object-assign/index.js:
		  (*
		  object-assign
		  (c) Sindre Sorhus
		  @license MIT
		  *)
		*/return window.Plotly=h,h})})(plotlyBasic_min$1)),plotlyBasic_min$1.exports}var plotlyBasic_minExports=requirePlotlyBasic_min();const Plotly=getDefaultExportFromCjs(plotlyBasic_minExports);function wavelengthName(n){let h=n.slice(0,-1);return n.charAt(n.length-1)==="a"?h=h.concat(""):n.charAt(n.length-1)==="b"?h=h.concat(""):(console.log("wavelength name conversion failed!"),h=n),h}function makeArr(n,h,s){for(var _=[],M=(h-n)/(s-1),$=0;$<s;$++)_.push(n+M*$);return _}function gaussian(n,h,s,_){return n*Math.exp(-Math.pow((_-h)/s,2)/2)}function lorentz(n,h,s,_){return s*Math.pow(h,2)/(Math.pow(h,2)+Math.pow(_-n,2))}function gaussianBroadening(n,h,s,_){let M=n.slice(),$=s/2/Math.pow(2*Math.log(2),.5),V=new Array(_.length).fill(0);for(let oe=0;oe<h.length;oe++){let Y=2*h[oe]*Math.sqrt(Math.log(2))/s/Math.sqrt(Math.PI);for(let ie=0;ie<_.length;ie++)V[ie]+=gaussian(Y,M[oe],$,_[ie])}return V}function lorentzianBroadening(n,h,s,_){let M=n.slice(),$=s/2,V=new Array(_.length).fill(0);for(let oe=0;oe<h.length;oe++){let Y=h[oe]*2/s/Math.PI;for(let ie=0;ie<_.length;ie++)V[ie]+=lorentz(M[oe],$,Y,_[ie])}return V}function doFitting(n,h,s){let _=n.peaks_positions,M=Math.min(h/5,.1),$=Math.round((n.angular_range[1]-n.angular_range[0])/M),V=makeArr(n.angular_range[0],n.angular_range[1],$),oe=null;if(s==="Gaussian")oe=gaussianBroadening(_,n.intensities,h,V);else if(s==="Lorentzian")oe=lorentzianBroadening(_,n.intensities,h,V);else return console.log("Fit type not defined!"),null;return{x:V,curve:oe}}const getFittedCurve=(n,h,s)=>{let _=doFitting(n,h,s);return{x:_.x,y:_.curve,type:"scatter",mode:"lines+points",marker:{color:"red",size:.5},line:{width:2},hoverinfo:"none"}},getHistogram=n=>({x:n.peaks_positions,y:n.intensities,text:n.hkls,type:"bar",hovertemplate:"hkl: <b>%{text}</b><extra></extra>",width:.7,marker:{color:"black",opacity:.6}});function DataDownloadButton({data:n,filename:h="BlankData.json"}){const s=()=>{const _=JSON.stringify(n,null,2),M=new Blob([_],{type:"application/json"}),$=URL.createObjectURL(M),V=document.createElement("a");V.href=$,V.download=h,V.click(),URL.revokeObjectURL($)};return jsxRuntimeExports.jsx(Button,{size:"sm",style:{margin:"4px",padding:"2px 7px"},title:"Download",onClick:s,children:jsxRuntimeExports.jsx("span",{className:"bi bi-download"})})}const XrdPlot=({xrdData:n})=>{const h=reactExports.useRef(null),s=n?Object.keys(n):[],[_,M]=reactExports.useState(s[0]||""),[$,V]=reactExports.useState("Gaussian"),[oe,Y]=reactExports.useState(1),[ie,zn]=reactExports.useState(!0),[Et,ml]=reactExports.useState(!0),rl=["Gaussian","Lorentzian"],Ml=[];Et&&Ml.push(getHistogram(n[_])),ie&&Ml.push(getFittedCurve(n[_],oe,$));const kl=n[_].angular_range.slice(),_u=[0,null];return reactExports.useEffect(()=>{if(!h.current)return;const Hu={showlegend:!1,xaxis:{range:kl,title:"2 []",linecolor:"black",linewidth:1,tickwidth:1,tickcolor:"black",gridcolor:"lightgray",mirror:!0},yaxis:{range:_u,title:"Intensity [a.u.]",linecolor:"black",linewidth:1,tickwidth:1,tickcolor:"black",gridcolor:"lightgray",mirror:!0},margin:{l:50,r:20,b:40,t:20}},bu={responsive:!0};return Plotly.newPlot(h.current,Ml,Hu,bu),()=>{h.current&&Plotly.purge(h.current)}},[Ml,kl,_u]),n?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Row,{children:[jsxRuntimeExports.jsxs(Col,{style:{minWidth:"300px"},children:[jsxRuntimeExports.jsxs(Sa,{children:[jsxRuntimeExports.jsx(Sa.Label,{children:"Select the X-ray source"}),jsxRuntimeExports.jsx(Sa.Select,{value:_,onChange:Hu=>M(Hu.target.value),children:s.map(Hu=>jsxRuntimeExports.jsx("option",{value:Hu,children:wavelengthName(Hu)},Hu))})]}),jsxRuntimeExports.jsxs(Sa,{children:[jsxRuntimeExports.jsx(Sa.Label,{children:"Select peak broadening profile"}),jsxRuntimeExports.jsx(Sa.Select,{value:$,onChange:Hu=>V(Hu.target.value),children:rl.map(Hu=>jsxRuntimeExports.jsx("option",{value:Hu,children:Hu},Hu))})]}),jsxRuntimeExports.jsxs(Sa,{children:[jsxRuntimeExports.jsxs(Sa.Label,{children:["Select peak broadening FWHM (full width at half maximum)",jsxRuntimeExports.jsx("br",{})," value: ",oe.toFixed(2)]}),jsxRuntimeExports.jsx(Sa.Range,{min:.1,max:2,step:.05,value:oe,onInput:Hu=>Y(parseFloat(Hu.currentTarget.value))})]}),jsxRuntimeExports.jsxs(Sa,{children:[jsxRuntimeExports.jsx(Sa.Check,{checked:ie,onChange:Hu=>zn(Hu.target.checked),label:"Show broadened curve"}),jsxRuntimeExports.jsx(Sa.Check,{checked:Et,onChange:Hu=>ml(Hu.target.checked),label:"Show histogram"})]}),jsxRuntimeExports.jsxs("div",{children:["Download X-ray data",jsxRuntimeExports.jsx(DataDownloadButton,{data:n,filename:"xrdData.json"})]})]}),jsxRuntimeExports.jsx(Col,{children:jsxRuntimeExports.jsx("div",{ref:h,style:{width:"100%",height:"100%",minHeight:"400px",minWidth:"300px"}})})]})}):jsxRuntimeExports.jsx("p",{children:"Loading XRD data..."})},XrdSection=n=>{const[h,s]=reactExports.useState(null),[_,M]=reactExports.useState(!1);reactExports.useEffect(()=>{loadXrd(n.params.method,n.params.id).then(V=>{V?(console.log("Loaded XRD data",V),s(V)):M(!0)})},[n.params.method,n.params.id]);let $="";return _?$="Not available for this material.":h==null?$=jsxRuntimeExports.jsx("div",{style:{width:"150px",padding:"40px",margin:"0 auto"},children:jsxRuntimeExports.jsx(xu,{})}):$=jsxRuntimeExports.jsx(XrdPlot,{xrdData:h}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"section-heading",children:"X-ray diffraction pattern"}),jsxRuntimeExports.jsx(Container,{fluid:!0,className:"section-container",children:jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsx("div",{className:"xrd-section",children:$})})})]})};function MissingDataWarning({params:n,navigate:h}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MaterialsCloudHeader,{activeSection:"discover",breadcrumbsPath:[{name:"Discover",link:"https://www.materialscloud.org/discover"},{name:"Materials Cloud Three-Dimensional Structure Database",link:"/"},{name:`${n.id}/${n.method}`,link:null}]}),jsxRuntimeExports.jsxs(Container,{fluid:"xxl",children:[jsxRuntimeExports.jsx(TitleAndLogo,{}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",marginTop:"5rem",marginBottom:"10rem"},children:[jsxRuntimeExports.jsx("div",{style:{color:"red",fontSize:"1.2rem",marginBottom:"2rem"},children:`Warning: Fetching of data failed, suggesting that ${n.id} has not been calculated with ${n.method}`}),jsxRuntimeExports.jsx(Button,{variant:"primary",onClick:()=>h("/"),children:"Return to MC3D homepage"})]})]})]})}const VibrationalSection=reactExports.lazy(()=>__vitePreload(()=>import("./index-mRwp4eQM.js"),__vite__mapDeps([0,1]))),SuperconductivitySection=reactExports.lazy(()=>__vitePreload(()=>import("./index-baWZ5L4W.js"),__vite__mapDeps([2,3])));async function fetchCompoundData(n,h){try{const[s,_]=await Promise.all([loadMetadata(n,h),loadDetails(n,h)]),M=_?.general?.structure_uuid;if(!M)throw new Error("Missing structure UUID");const[$,V]=await Promise.all([loadAiidaAttributes(n,M),loadAiidaCif(n,M)]);return{metadata:s,details:_,structureInfo:{aiidaAttributes:$,cif:V},missingStructureWarning:null}}catch{return{metadata:null,details:null,structureInfo:{aiidaAttributes:null,cif:null},missingStructureWarning:!0}}}async function fetchCompoundDataOther(n,h){try{const[s,_]=await Promise.all([loadSuperConDetails(n,h),loadSuperConPhononVis(n,h)]);return{scDetails:s,scPhonon:_}}catch{return{scDetails:null,scPhonon:null}}}function DetailPage(){const[n,h]=reactExports.useState(null),[s,_]=reactExports.useState(null),M=useNavigate(),$=useParams();if(reactExports.useEffect(()=>{h(null),fetchCompoundData($.method,$.id).then(oe=>{console.log("Loaded general data",oe),h(oe)})},[$.id,$.method]),reactExports.useEffect(()=>{_(null),fetchCompoundDataOther($.method,$.id).then(oe=>{console.log("Loaded Other data",oe),_(oe)})},[$.id,$.method]),n===null)return jsxRuntimeExports.jsx(MaterialsCloudHeader,{activeSection:"discover",breadcrumbsPath:[{name:"Discover",link:"https://www.materialscloud.org/discover"},{name:"Materials Cloud Three-Dimensional Structure Database",link:"/"},{name:`${$.id}/${$.method}`,link:null}],children:jsxRuntimeExports.jsxs(Container,{fluid:"xxl",children:[jsxRuntimeExports.jsx(TitleAndLogo,{}),jsxRuntimeExports.jsx("div",{style:{width:"150px",padding:"40px",margin:"0 auto"},children:jsxRuntimeExports.jsx(xu,{})})]})});if(n?.missingStructureWarning)return jsxRuntimeExports.jsx(MissingDataWarning,{params:$,navigate:M});const V=formatTitle(n.details.general.formula,$.id,$.method);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MaterialsCloudHeader,{activeSection:"discover",breadcrumbsPath:[{name:"Discover",link:"https://www.materialscloud.org/discover"},{name:"Materials Cloud Three-Dimensional Structure Database",link:"/"},{name:`${$.id}/${$.method}`,link:null}]}),jsxRuntimeExports.jsxs(Container,{fluid:"xxl",children:[jsxRuntimeExports.jsx(TitleAndLogo,{}),jsxRuntimeExports.jsx("div",{className:"detail-page-heading",children:V}),jsxRuntimeExports.jsx(OverviewSection,{params:$,loadedData:n}),jsxRuntimeExports.jsx(StructureSection,{params:$,loadedData:n}),jsxRuntimeExports.jsx(ProvenanceSection,{params:$,loadedData:n}),jsxRuntimeExports.jsx(XrdSection,{params:$,loadedData:n}),s?.scPhonon&&jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx("div",{style:{width:"150px",padding:"40px",margin:"0 auto"},children:jsxRuntimeExports.jsx(xu,{})}),children:jsxRuntimeExports.jsx(VibrationalSection,{params:$,loadedData:n})}),s?.scDetails&&jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx("div",{style:{width:"150px",padding:"40px",margin:"0 auto"},children:jsxRuntimeExports.jsx(xu,{})}),children:jsxRuntimeExports.jsx(SuperconductivitySection,{params:$,loadedData:n,superconData:s.scDetails})})]})]})}function LoadingPage(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MaterialsCloudHeader,{activeSection:"discover",breadcrumbsPath:[{name:"Discover",link:"https://www.materialscloud.org/discover"},{name:"Materials Cloud Three-Dimensional Structure Database",link:"/"}]}),jsxRuntimeExports.jsxs(Container,{fluid:"xxl",children:[jsxRuntimeExports.jsx(TitleAndLogo,{}),jsxRuntimeExports.jsx("div",{style:{width:"150px",padding:"40px",margin:"0 auto"},children:jsxRuntimeExports.jsx(xu,{})})]})]})}const ContributionsPage=reactExports.lazy(()=>__vitePreload(()=>import("./index-CuZn4RrL.js"),__vite__mapDeps([4,5])));function App(){return jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(MainPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/details/:id/:method",element:jsxRuntimeExports.jsx(DetailPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/contributions",element:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(LoadingPage,{}),children:jsxRuntimeExports.jsx(ContributionsPage,{})})})]})})}ReactDOM$1.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(dm.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{Button as B,Container as C,EXPLORE_URLS as E,MaterialsCloudHeader as M,Ou as O,Plotly as P,Row as R,Sa as S,TitleAndLogo as T,context$1 as a,Col as b,classNames as c,dm as d,CitationsList as e,loadAiidaBands as f,getDefaultExportFromCjs as g,loadXY as h,jsxRuntimeExports as j,loadSuperConPhononVis as l,reactExports as r,useBootstrapPrefix as u,wu as w,xu as x};
