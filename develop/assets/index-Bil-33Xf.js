import{r as F,f as B,h as Z,j as a,P as D,x as ee,g as re,C as se,e as ae,w as oe,O as ie,E as le,R as C,b as z}from"./index-47FnBLxH.js";const ce={electronicEPW:{label:"EPW",colors:["#d62728"],dash:"4px",width:1.75,opacity:1,units:"eV"},electronicQE:{label:"QE",colors:["#6baed6"],dash:"solid",width:2.25,opacity:.95,units:"eV"},phononEPW:{label:"EPW",colors:["#d62728"],dash:"solid",width:1.75,opacity:1,units:"eV",showlegend:!1},unknownEntry:{label:"Unknown Data 1",colors:["#2ca02c","#98df8a"],dash:"dot",units:"eV"}},A={yaxis:{showgrid:!1,showline:!1,ticks:"inside",tickfont:{size:14,color:"#333"},title:{font:{size:16,color:"#333"},standoff:10}},xaxis:{showgrid:!0,ticks:"inside",tickfont:{size:14,color:"#333"},title:{font:{size:16,color:"#333"}}},legend:{orientation:"v",y:.985,x:.985,xanchor:"right",font:{size:14,color:"#333"},bgcolor:"rgba(250, 250, 250, 1.0)",bordercolor:"#ccc",borderwidth:1},margin:{l:65,r:10,t:10,b:50},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]},ue={...A,yaxis:{...A.yaxis,title:{...A.yaxis.title,text:"Energy [eV]"}}},de={...A,margin:{l:65,r:10,t:50,b:40},yaxis:{...A.yaxis,title:{...A.yaxis.title,text:"Energy [meV]"},autorange:!1,rangemode:"nonnegative"},yaxis2:{matches:"y",showticklabels:!1,ticks:"inside",showgrid:!1,rangemode:"nonnegative",autorange:!1,zeroline:!1},xaxis:{ticks:"inside",tickfont:{size:14,color:"#333"},title:{text:"q-path",font:{size:16,color:"#333"}}},xaxis2:{...A.xaxis,title:{...A.xaxis.title,text:"α<sup>2</sup>F(ω)"},showgrid:!1},xaxis3:{overlaying:"x2",side:"top",anchor:"y",title:{text:"λ(ω)",font:{size:16}},showgrid:!1,tickfont:{size:15,color:"#333"},ticks:"inside",tickmode:"auto"},legend2:{orientation:"v",y:.1,x:.585,xanchor:"right",zorder:-100,opacity:0,bgcolor:"rgba(0, 0, 0, 0)"},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:1.25},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]};function fe(e,n){e.paths.forEach(r=>{r.values.forEach(s=>{s.forEach((o,l,t)=>{t[l]+=n})})})}function he(e){const n=e.map(o=>{const l=o.bandsData?.paths;return l?l.reduce((t,i)=>!i.x||i.x.length===0?t:t+(i.x[i.x.length-1]-i.x[0]),0):0}),r=Math.max(...n);return e.map((o,l)=>{const t=o.bandsData?.paths;if(!t)return o;const i=n[l];if(i===0)return o;const u=r/i,p=t.map(d=>!d.x||d.x.length===0?d:{...d,x:d.x.map(y=>y*u)});return{...o,bandsData:{...o.bandsData,paths:p}}})}function xe(e,n=0,r="unknownEntry"){fe(e,n);let s=ce[r],o={bandsData:e,traceFormat:{label:`${s.label}`,name:s.label,hovertemplate:`<b>${s.label}</b>: %{y:.3f} ${s.units}<br><extra></extra>`,mode:s.mode,line:{color:s.colors[0],dash:s.dash,width:s.width,opacity:s.opacity}}};return r=="phononEPW"&&(o={bandsData:e,traceFormat:{label:`${s.label}`,name:s.label,hovertemplate:`<b>${s.label}</b>: %{y:.3f} ${s.units}<br><extra></extra>`,mode:s.mode,line:{color:s.colors[0],dash:s.dash,width:s.width,opacity:s.opacity},showlegend:!1}}),o}function V(e,n,r){return!e||typeof n!="number"?null:xe(e,-n,r)}function I(e,n=[]){const[r,s]=F.useState(null),[o,l]=F.useState(!1);return F.useEffect(()=>{let t=!1;async function i(){l(!0);try{const u=await e();t||s(u??null)}catch{t||s(null)}finally{t||l(!1)}}return i(),()=>{t=!0}},n),{data:r,loading:o}}async function pe(e,n){const[r,s,o]=await Promise.all([e.epw_el_band_structure_uuid?B(`${n}-supercon`,e.epw_el_band_structure_uuid):null,e.qe_el_band_structure_uuid?B(`${n}-supercon`,e.qe_el_band_structure_uuid):null,e.epw_ph_band_structure_uuid?B(`${n}-supercon`,e.epw_ph_band_structure_uuid):null]),l=V(r,e.fermi_energy_coarse,"electronicEPW"),t=V(s,e.fermi_energy_coarse,"electronicQE"),i=he([t,l].filter(Boolean)),u=V(o,0,"phononEPW");return{el:i,ph:u?[u]:[]}}async function ye(e,n){return e.aniso_gap_function_uuid?Z(`${n}-supercon`,e.aniso_gap_function_uuid):null}async function me(e,n){return e.a2f_uuid?Z(`${n}-supercon`,e.a2f_uuid):null}const ge=({childrenLeft:e,childrenRight:n,style:r=null})=>a.jsx("div",{style:r,children:a.jsxs("div",{className:"two-wide-container subsection-shadow overflow-auto rounded",children:[a.jsx("div",{className:"info-col",children:e}),a.jsx("div",{className:"info-col",children:n})]})}),be=a.jsxs(a.Fragment,{children:["ω",a.jsx("sub",{children:"log"}),a.jsx("span",{style:{marginLeft:"0.10em"}})]}),W=a.jsxs(a.Fragment,{children:["T",a.jsx("sub",{children:"c"}),a.jsx("span",{style:{marginLeft:"0.10em"}})]});function b(e,{decimals:n=3,format:r=o=>o,fallback:s=void 0}={}){if(typeof e=="number"&&!isNaN(e)){const o=Number(e.toFixed(n));return r(o)}else{if(Array.isArray(e))return r(e.join(" × "));if(e!=null)return r(e)}return s}function we({superconData:e,style:n={}}){const r=[{key:"Space group number",value:b(e.space_group_number,{format:t=>`${t}`,fallback:"Unknown Spacegroup"})},{key:"Total energy",value:b(e.total_energy,{format:t=>`${t} eV`,fallback:"Unknown Total energy"})},{key:"Cell volume",value:b(e.cell_volume,{format:t=>`${t} Å³`,fallback:"Unknown Spacegroup"})},{key:"Fermi energy",value:b(e.fermi_energy_coarse,{format:t=>`${t} eV`})},{key:a.jsxs(a.Fragment,{children:["ω",a.jsx("sup",{children:"max"})]}),value:b(e.highest_phonon_frequency,{format:t=>`${t} meV`})}],s=[{key:a.jsxs(a.Fragment,{children:["E",a.jsx("sub",{children:"cut"})]}),value:b(e.ecut,{format:t=>`${(t/13.605703976).toFixed(0)} Ry`,fallback:"No data"})},{key:"Smearing",value:b(e.scf_smearing,{format:t=>`${t} eV`,fallback:"No data"})},{key:a.jsxs(a.Fragment,{children:["DFPT ",a.jsx("b",{children:"k"}),"-grid"]}),value:b(e.kpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No DFPT kgrid data"})},{key:a.jsxs(a.Fragment,{children:["DFPT ",a.jsx("b",{children:"q"}),"-grid"]}),value:b(e.qpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No DFPT qgrid data"})}],o=[{key:"Type of anisotropy",value:b(e.type,{format:t=>`${t}`})},{key:"Number of Wannier functions",value:b(e.number_of_wannier_functions,{format:t=>`${t}`})},{key:a.jsxs(a.Fragment,{children:["Coarse ",a.jsx("b",{children:"k"}),"-grid"]}),value:b(e.kpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW coarse kgriddata"})},{key:a.jsxs(a.Fragment,{children:["Coarse ",a.jsx("b",{children:"q"}),"-grid"]}),value:b(e.qpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW coarse qgriddata"})},{key:a.jsxs(a.Fragment,{children:["Fine ",a.jsx("b",{children:"k"}),"-grid"]}),value:b(e.kfpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW fine kgriddata"})},{key:a.jsxs(a.Fragment,{children:["Fine ",a.jsx("b",{children:"q"}),"-grid"]}),value:b(e.qfpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW fine qgriddata"})},{key:"Smearing-q",value:b(e.smearing_q,{format:t=>`${t} meV`,fallback:"No data"})},{key:"Fermi window",value:b(e.fermi_window,{format:t=>`±${t} eV`,fallback:"No data"})}],l=[{key:be,value:b(e.omega_log,{format:t=>`${t} meV`,fallback:"Not calculated"})},{key:"λ",value:b(e.lambda,{format:t=>`${t}`,fallback:"Not calculated"})},{key:a.jsxs(a.Fragment,{children:["Allen-Dynes ",W]}),value:b(e.allen_dynes_tc,{format:t=>`${t} K`,fallback:"Not calculated"})},{key:a.jsxs(a.Fragment,{children:["Isotropic ",W]}),value:b(e.iso_tc,{format:t=>`${t} K`,fallback:"Not superconducting"})},{key:a.jsxs(a.Fragment,{children:["Δ",a.jsxs("sub",{children:["n",a.jsx("b",{children:"k"})]}),"(0)"]}),value:b(e.aniso_info?.delta0,{format:t=>`${t} K`,fallback:"No nk Data"})},{key:a.jsxs(a.Fragment,{children:["Anisotropic ",W]}),value:b(e.aniso_info?.Tc,{format:t=>`${t} K`,fallback:"Not superconducting"})}];return a.jsx(ge,{style:n,childrenLeft:a.jsxs("div",{children:[a.jsx("b",{children:"General properties"}),a.jsx("ul",{className:"no-bullets",children:r.filter(t=>t.value!==void 0).map((t,i)=>a.jsxs("li",{children:[t.key,": ",t.value]},i))}),a.jsx("b",{children:"Superconducting properties"}),a.jsx("ul",{className:"no-bullets",children:l.filter(t=>t.value!==void 0).map((t,i)=>a.jsxs("li",{children:[t.key,": ",t.value]},i))})]}),childrenRight:a.jsxs("div",{children:[a.jsx("b",{children:"DFT calculation details "}),a.jsx("ul",{className:"no-bullets",children:s.filter(t=>t.value!==void 0).map((t,i)=>a.jsxs("li",{children:[t.key,": ",t.value]},i))}),a.jsx("b",{children:"EPW calculation details"}),a.jsx("ul",{className:"no-bullets",children:o.filter(t=>t.value!==void 0).map((t,i)=>a.jsxs("li",{children:[t.key,": ",t.value]},i))})]})})}const X={color:"#d62728"},P={xaxis:{title:{text:"T [K]",font:{size:15,color:"#111"}},tickfont:{size:14},showgrid:!1,zeroline:!1,showline:!1,ticks:"inside",rangemode:"nonnegative"},yaxis:{title:{text:"Δ<sub>n<b>k</b></sub>(T) [meV]",font:{size:15,color:"#111"}},tickfont:{size:14},showgrid:!1,zeroline:!1,showline:!1,ticks:"inside",rangemode:"nonnegative"},legend:{visible:!1},margin:{t:10,b:40,l:65,r:2},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]};function je(e,n,r,s=200,o="Analytical Δ(T)"){const l=Array.from({length:s},(i,u)=>u*r/(s-1)),t=l.map(i=>e*Math.sqrt(1-Math.pow(i/r,n)));return{x:l,y:t,name:o,type:"scatter",mode:"lines",hovertemplate:"<b>Value of the fit of BCS gap at %{x:.2f}K:</b> %{y:.3f}<extra></extra>",line:{color:"#b22222",dash:"dash"}}}function ve({gapfuncData:e,loading:n=!1,loadingIconScale:r=8,Tc:s,verts:o,points:l,delta0:t,expo:i,resolution:u=1e3,minXVal:p=0,maxXVal:d=null,minYVal:y=null,maxYVal:w=0}){const j=F.useRef(null);return F.useEffect(()=>{if(!e||!j.current||n)return;const v=j.current,k=o??[],h=Object.entries(e).filter(([m])=>Array.isArray(m)).map(([m])=>{const g=m.map(([_])=>_),M=m.map(([_])=>_),{leftVerts:te,distances:ne}=g.reduce((_,G)=>{const K=k.filter(O=>O<=G);if(!K.length)_.leftVerts.push(null),_.distances.push(null);else{const O=Math.max(...K);_.leftVerts.push(O),_.distances.push(G-O)}return _},{leftVerts:[],distances:[]});return{x:g,y:M,customdata:ne,text:te,type:"scatter",mode:"lines",line:{color:X.color},hovertemplate:"<b>Histogram of Δ<sub>nk</sub>(%{text:.1f}K) at %{y:.2f} meV:</b> %{customdata:.2f} <extra></extra>"}}),c=(o||[]).map((m,g)=>({x:[m],y:[(l||[])[g]],name:`point ${g}`,type:"scatter",mode:"markers",hovertemplate:"<b>Weighted average at %{x:.0f}K:</b> %{y:.3f}<extra></extra>",marker:{color:X.color,size:12}}));h.push(...c);const f=je(t,i,s,u);h.push(f);const x={...P,xaxis:{...P.xaxis,range:p!=null&&d!=null?[p,d]:void 0},yaxis:{...P.yaxis,range:y!=null&&w!=null?[y,w]:void 0},shapes:[...P.shapes||[],...k.map(m=>({type:"line",x0:m,x1:m,y0:0,y1:1,yref:"paper",line:{color:"#111",width:1.25},layer:"below"}))]};return D.newPlot(v,h,x,{responsive:!0}),()=>D.purge(v)},[e,o,l,t,i,s,u,p,d,y,w,n]),a.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"450px",border:n?"2px solid #ccc":"none",borderRadius:n?"8px":"0"},children:n&&a.jsx("div",{style:{width:`${r}%`,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10},children:a.jsx(ee,{})})})}const T={color:"#d62728",dash:"solid",label:"α<sup>2</sup>F(ω)",hoverlabel:"Eliashberg spectral function",lineWidth:1.75,xaxis:"x2",yaxis:"y2"},E={color:"#111",dash:"solid",label:"λ(ω)",hoverlabel:"Cumulative electron-phonon coupling strength",lineWidth:1.75,xaxis:"x3",yaxis:"y2"};function ke({a2f:e,frequency:n,degaussq:r,selectedDegaussIndex:s=-1}){if(!e||!n||!r||r.length===0)return[];const o=s<0?r.length-1:s,l={x:e.map(d=>d[o]),y:n,type:"scatter",mode:"lines",name:T.label,hovertemplate:`<b>${T.hoverlabel} at %{y:.2f} meV:</b> %{y:.3f} <br><extra></extra>`,line:{color:T.color,dash:T.dash,width:T.lineWidth},xaxis:T.xaxis,yaxis:T.yaxis},t=n[1]-n[0];let i=0;const p={x:n.map((d,y)=>{const w=e[y][o];return i+=2*w/d*t,i}),y:n,type:"scatter",mode:"lines",name:E.label,label:`${E.label}`,hovertemplate:`<b>${E.hoverlabel} at %{y:.2f} meV:</b> %{x:.3f}<br><extra></extra>`,line:{color:E.color,dash:E.dash,width:E.lineWidth},xaxis:E.xaxis,yaxis:E.yaxis};return[l,p]}function Y(e){const n=e.length,r=e[0].length,s=new Array(r);for(let o=0;o<r;o++){s[o]=new Array(n);for(let l=0;l<n;l++)s[o][l]=e[l][o]}return s}const Q=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"];function q(e){return e<Q.length?Q[e]:`hsl(${e*47%360}, 70%, 50%)`}function _e(e){const n=new Set;return e.map(s=>{const o=s.name||"",l=!n.has(o);return l&&n.add(o),{...s,legendgroup:o,showlegend:l}})}function Ee(e){const n=[],r=[];let s=null;return e.paths.forEach((o,l)=>{const t=o.x,i=o.values;l>0&&(n.push(null),r.forEach(u=>u.push(null))),t.forEach((u,p)=>{u===s&&(n.push(null),r.forEach(d=>d.push(null))),n.push(u),s=u,i.forEach((d,y)=>{r[y]||(r[y]=[]),r[y].push(d[p])})})}),{xs:n,ys:r}}function Ae(e){const n={GAMMA:"Γ",DELTA:"Δ",SIGMA:"Σ",LAMBDA:"Λ"};Object.keys(n).forEach(s=>{const o=new RegExp(s,"gi");e=e.replace(o,n[s])}),e=e.replace(/\bG\b/g,"Γ"),e=e.replace(/-/g,"—");const r={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};return e=e.replace(/_(.)/g,(s,o)=>r[o]||s),e}function Fe(e=td.paths){const n=[0];for(const r of e)r.x.length<3||n.push(r.x[r.x.length-1]);return n}function Te(e){const n=e.flat(),r=[];r.push(n[0]);for(let s=1;s<n.length-1;s++)n[s]===n[s+1]?(r.push(n[s]),s++):(r.push(n[s]+"|"+n[s+1]),s++);return r.push(n[n.length-1]),r}function S(e,n="x",r="y"){let s=1/0,o=-1/0,l=1/0,t=-1/0;for(const i of e){const u=i.xaxis===n||!i.xaxis&&n==="x",p=i.yaxis===r||!i.yaxis&&r==="y";if(!(!u||!p)){for(const d of i.x??[])typeof d=="number"&&(s=Math.min(s,d),o=Math.max(o,d));for(const d of i.y??[])typeof d=="number"&&(l=Math.min(l,d),t=Math.max(t,d))}}return{x:s===1/0?null:[s,o],y:l===1/0?null:[l,t]}}function $(e,n,r,s={}){return{x:e,y:n,mode:"lines",type:"scatter",name:`Fermi [${r}eV]`,legendgroup:`fermi-${r}`,showlegend:s.showlegend??!0,line:{color:"green",width:1.25,dash:"dash"},...s}}function Ne(e,n,r,s){const o=[...n];if(r&&!s){const{y:l}=S(n);for(const t of e)o.push($([t,t],[l[0],l[1]],t))}else if(s&&!r){const{x:l}=S(n);for(const t of e)o.push($([l[0],l[1]],[t,t],t))}else if(s&&r){const{x:l}=S(n,"x2","y"),{x:t}=S(n,"x","y");for(const i of e)o.push($([t[0],t[1]],[i,i],i)),o.push($([l[0],l[1]],[i,i],i,{showlegend:!1,xaxis:"x2",yaxis:"y"}))}return o}var R,H;function Oe(){if(H)return R;H=1;var e=function(f){return n(f)&&!r(f)};function n(c){return!!c&&typeof c=="object"}function r(c){var f=Object.prototype.toString.call(c);return f==="[object RegExp]"||f==="[object Date]"||l(c)}var s=typeof Symbol=="function"&&Symbol.for,o=s?Symbol.for("react.element"):60103;function l(c){return c.$$typeof===o}function t(c){return Array.isArray(c)?[]:{}}function i(c,f){return f.clone!==!1&&f.isMergeableObject(c)?k(t(c),c,f):c}function u(c,f,x){return c.concat(f).map(function(m){return i(m,x)})}function p(c,f){if(!f.customMerge)return k;var x=f.customMerge(c);return typeof x=="function"?x:k}function d(c){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(c).filter(function(f){return Object.propertyIsEnumerable.call(c,f)}):[]}function y(c){return Object.keys(c).concat(d(c))}function w(c,f){try{return f in c}catch{return!1}}function j(c,f){return w(c,f)&&!(Object.hasOwnProperty.call(c,f)&&Object.propertyIsEnumerable.call(c,f))}function v(c,f,x){var m={};return x.isMergeableObject(c)&&y(c).forEach(function(g){m[g]=i(c[g],x)}),y(f).forEach(function(g){j(c,g)||(w(c,g)&&x.isMergeableObject(f[g])?m[g]=p(g,x)(c[g],f[g],x):m[g]=i(f[g],x))}),m}function k(c,f,x){x=x||{},x.arrayMerge=x.arrayMerge||u,x.isMergeableObject=x.isMergeableObject||e,x.cloneUnlessOtherwiseSpecified=i;var m=Array.isArray(f),g=Array.isArray(c),M=m===g;return M?m?x.arrayMerge(c,f,x):v(c,f,x):i(f,x)}k.all=function(f,x){if(!Array.isArray(f))throw new Error("first argument should be an array");return f.reduce(function(m,g){return k(m,g,x)},{})};var h=k;return R=h,R}var ze=Oe();const N=re(ze),U={title:"Multi Trace Plot with border",hovermode:"closest",uirevision:!0,shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],margin:{l:55,r:10,t:10,b:45},dragmode:"zoom",xaxis:{title:{text:"x-axis",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"y-axis",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}},legend:{x:1.01,y:1,xanchor:"left",yanchor:"top",orientation:"v"}},Pe=N(U,{title:"BSPlot",xaxis:{title:{text:"K-path",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}}}),Se=N(U,{title:"DOSPlot",xaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),$e=N(U,{title:"DOSPlot",xaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),L={shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:2},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],grid:{rows:1,columns:2,pattern:"independent"},xaxis:{domain:[0,.7],autorange:!0},xaxis2:{title:{text:"Energy [eV]",font:{size:18}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"},domain:[.73,1],autorange:!0,showgrid:!0},yaxis:{autorange:!0},margin:{l:60,r:30,b:40,t:40},showlegend:!0,legend:{}},Le={mode:"lines",dash:"solid",line:{color:"rgba(90, 60, 255, 0.85)",width:1},name:"Band Structure"},Me={name:"DOS",legendgroup:"DOS",showlegend:!0,type:"scatter",mode:"lines",dash:"dash",line:{color:"rgba(90, 60, 255, 0.85)",width:2},fill:"toself"};function Be(e,n,r={}){const s=[];return n.forEach((o,l)=>{s.push({name:r.name,legendgroup:r.name,showlegend:l===0,...Le,...r,x:e,y:o})}),s}function Ce(e=[],n=[]){return N.all([Pe,{xaxis:{tickvals:n,ticktext:e},yaxis:{}}])}function Ve(e){const r=Te(e[0].bandsData.path).map(Ae),s=Fe(e[0].bandsData.paths),o=Ce(r,s);let l=[];for(const[t,i]of e.entries()){let u=i.traceFormat;(!u||Object.keys(u).length===0)&&(u={name:`Band Structure ${t}`,line:{color:q(t),width:1}});const p=i.bandsData,{xs:d,ys:y}=Ee(p),w=Be(d,y,u);l.push(...w)}return{bandTraces:l,bandLayout:o}}function Ie(e="h"){let n;return e==="v"?n=$e:n=Se,n}function We(e,n="h",r={}){const s=n==="v"?e.y:e.x,o=n==="v"?e.x:e.y;return{...Me,...r,x:s,y:o}}function Re(e,n="h"){const r=[];for(const[o,l]of e.entries()){let t=l.traceFormat;(!t||Object.keys(t).length===0)&&(t={name:`DOS ${o}`,line:{color:q(o),width:2}});const i=l.dosData,u=We(i,n,t);r.push(u)}const s=Ie(n);return{dosTraces:r,dosLayout:s}}function De(e,n,r,s={},o=1){const l=Y(r),t=Y(n),i=[];return t.forEach((u,p)=>{const d=l[p],y=new Float64Array(u.length),w=new Float64Array(u.length);for(let h=0;h<u.length;h++){const c=d[h]*o;y[h]=u[h]+c,w[h]=u[h]-c}const j=e.length,v=new Float32Array(j*2),k=new Float32Array(j*2);for(let h=0;h<j;h++)v[h]=e[h],k[h]=w[h],v[2*j-1-h]=e[h],k[2*j-1-h]=y[h];i.push({name:s.name,legendgroup:s.name,type:"scatter",mode:"lines",fill:"toself",...s,showlegend:p===0,x:v,y:k})}),i}function qe(e,n){for(const r in e)e[r]!==null&&typeof e[r]=="object"&&!Array.isArray(e[r])&&n[r]&&typeof n[r]=="object"&&!Array.isArray(n[r])?n[r]=N(n[r],e[r]):n[r]=e[r]}function Ue(e,{bandsDataArray:n=[],dosDataArray:r=[],fermiLevels:s=[],customTraces:o=[],settings:l={}}){let t=[],i={},u=[],p=[],d={};typeof s=="number"&&(s=[s]);const y=n.length>0,w=r.length>0;if(y){const h=Ve(n);t=h.bandTraces,i=h.bandLayout;for(const[c,f]of n.entries())if(f.hasOwnProperty("projections"))for(const[x,m]of f.projections.entries()){const g=m.traceFormat&&Object.keys(m.traceFormat).length>0?m.traceFormat:{name:`Projection ${x}`,line:{color:q(x),width:0}};u.push(...De(f.bandsData.x,f.bandsData.y,m.projData.weights,g))}}if(w){const c=Re(r,y?"v":"h");p=c.dosTraces,d=c.dosLayout}let j={},v=[];if(w&&!y)v=p,j={...d,showlegend:d?.showlegend??!0};else if(y&&!w)v=[...t,...u],j={...i,showlegend:i?.showlegend??!0};else if(w&&y){p=p.map(c=>({...c,xaxis:"x2",yaxis:"y"}));const h=_e([...u,...p]);v=[...t,...h],j={...L,xaxis:{...L.xaxis||{},...i?.xaxis||{}},xaxis2:{...L.xaxis2||{},...d?.xaxis2||{}},yaxis:{...L.yaxis||{},...i?.yaxis||{},...d?.yaxis||{}}}}for(const h of o)console.log(h),h.target==="dos"?v.push({...h,xaxis:"x2",yaxis:"y"}):h.target==="bands"?v.push({...h,xaxis:"x",yaxis:"y"}):v.push({...h});const k=Ne(s,v,w,y);qe(l,j),D.react(e,k,j,{displaylogo:!1,responsive:!0})}function J({bandsDataArray:e,loading:n=!1,loadingIconScale:r=15,dosDataArray:s=void 0,customTraces:o=[],minYval:l=null,maxYval:t=null,layoutOverrides:i=null}){const u=F.useRef(null),p=F.useMemo(()=>{const d={...i??{}};return l!=null&&t!=null&&(d.yaxis={...d.yaxis??{},range:[l,t]}),d},[i,l,t]);return F.useEffect(()=>{n||!u.current||!e||Ue(u.current,{bandsDataArray:e,dosDataArray:s,customTraces:o,settings:p})},[e,s,o,p,n]),a.jsx("div",{ref:u,style:{position:"relative",width:"100%",height:"450px",border:n?"2px solid #ccc":"none",borderRadius:n?"8px":"0"},children:n&&a.jsx("div",{style:{width:`${r}%`,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10},children:a.jsx(ee,{})})})}function Ke({params:e,loadedData:n}){const r=n?.details?.supercon,s=e.method,{data:o,loading:l}=I(()=>pe(r,s),[r,s]),{data:t,loading:i}=I(()=>ye(r,s),[r,s]),{data:u}=I(()=>me(r,s),[r,s]),p=o?.el??[],d=o?.ph??[],y=!!p.length,w=!!d.length;return r?a.jsx("div",{children:a.jsxs(se,{fluid:!0,className:"section-container",children:[a.jsxs("div",{style:{margin:"10px 0px",padding:"20px 0px 10px",borderBottom:"1px solid #c4c4c4"},children:[a.jsx("div",{style:{fontSize:"24px"},children:"Superconductivity estimation"}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px",alignItems:"center"},children:[a.jsx(ae,{citationLabels:["MBercxSupercon25"]}),a.jsx(oe,{doi_id:"9w-az",label:"Data DOI"})]})]}),a.jsxs("div",{className:"alert alert-warning",style:{margin:"10px 10px 5px 10px"},role:"alert",children:["This contribution re-relaxes the structure with a different methodology. To see this structure, explore the AiiDA provenance"," ",r.a2f_uuid&&a.jsx(ie,{explore_url:le[e.method]+"-supercon",uuid:r.structure_uuid})]}),a.jsxs("div",{style:{padding:"10px 10px"},children:["This dataset provides results from a high-throughput search for phonon-mediated superconductivity, where electron–phonon interactions and critical temperatures were systematically computed to identify and characterize promising superconducting materials. This frontend section contains the final superconductivity estimation results, as well as the intermediate electronic and vibrational calculated properties. For further details regarding the methodology see the"," ",a.jsx("a",{href:"./#/contributions",target:"_blank",rel:"noopener noreferrer",children:"contribution details"}),"."]}),a.jsxs(C,{children:[a.jsx(z,{sm:12,md:6,className:"mt-2 mt-md-5",children:a.jsx(we,{superconData:r})}),a.jsxs(z,{sm:12,md:6,className:"mt-3 mt-md-0",children:[a.jsx("div",{className:"subsection-title",children:"Electronic band structure"}),a.jsx("div",{className:"mb-3 ms-2",children:"Electronic band structure calculated with Quantum ESPRESSO (QE) and EPW."}),a.jsx(J,{bandsDataArray:y?o.el:null,loading:l,minYval:-10.4,maxYval:10.8,layoutOverrides:ue})]})]}),r.a2f_uuid&&a.jsx(C,{children:a.jsxs(z,{className:"mt-4 mt-lg-0",children:[a.jsx("div",{className:"subsection-title",children:"Phonon bands and electron-phonon interaction"}),a.jsx("div",{style:{padding:"0px 10px"},children:"Phonon band structure calculated with EPW, Eliashberg spectral function [α²F(ω)], and electron-phonon coupling strength [λ(ω)]."}),a.jsx(J,{bandsDataArray:w?o.ph:null,loading:l,loadingIconScale:7,minYval:0,maxYval:r.highest_phonon_frequency!=null?Math.min(r.highest_phonon_frequency+2,100):100,dosDataArray:[{dosData:{x:[0],y:[0]},traceFormat:{name:"",legend:"legend2",showlegend:!1,opacity:0}}],layoutOverrides:de,customTraces:ke({a2f:u?.a2f,frequency:u?.frequency,degaussq:u?.degaussq,lambda:u?.lambda})})]})}),r.aniso_info&&a.jsx(C,{children:a.jsxs(z,{xs:12,style:{maxWidth:"1200px"},children:[a.jsx("div",{className:"subsection-title",children:"Anisotropic superconducting gap function"}),a.jsx(ve,{gapfuncData:t,loading:i,verts:r.aniso_info.temps,points:r.aniso_info.average_deltas,delta0:r.aniso_info.delta0,Tc:r.aniso_info.Tc,expo:r.aniso_info.expo,minXVal:0,maxXVal:null,minYVal:0,maxYVal:null})]})})]})}):a.jsx("div",{className:"empty-supercon-div"})}export{Ke as default};
