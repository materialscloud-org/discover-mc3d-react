import{r as F,f as V,h as te,j as s,P as U,x as ne,g as oe,C as ae,e as ie,w as le,O as N,E as O,R as I,b as S}from"./index-DLq1m3IW.js";const ce={electronicEPW:{label:"EPW",colors:["#d62728"],dash:"4px",width:1.75,opacity:1,units:"eV"},electronicQE:{label:"QE",colors:["#6baed6"],dash:"solid",width:2.25,opacity:.95,units:"eV"},phononEPW:{label:"EPW",colors:["#d62728"],dash:"solid",width:1.75,opacity:1,units:"eV",showlegend:!1},unknownEntry:{label:"Unknown Data 1",colors:["#2ca02c","#98df8a"],dash:"dot",units:"eV"}},A={yaxis:{showgrid:!1,showline:!1,ticks:"inside",tickfont:{size:14,color:"#333"},title:{font:{size:16,color:"#333"},standoff:10}},xaxis:{showgrid:!0,ticks:"inside",tickfont:{size:14,color:"#333"},title:{font:{size:16,color:"#333"}}},legend:{orientation:"v",y:.985,x:.985,xanchor:"right",font:{size:14,color:"#333"},bgcolor:"rgba(250, 250, 250, 1.0)",bordercolor:"#ccc",borderwidth:1},margin:{l:65,r:10,t:10,b:50},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]},ue={...A,yaxis:{...A.yaxis,title:{...A.yaxis.title,text:"Energy [eV]"}}},de={...A,margin:{l:65,r:10,t:50,b:40},yaxis:{...A.yaxis,title:{...A.yaxis.title,text:"Energy [meV]"},autorange:!1,rangemode:"nonnegative"},yaxis2:{matches:"y",showticklabels:!1,ticks:"inside",showgrid:!1,rangemode:"nonnegative",autorange:!1,zeroline:!1},xaxis:{ticks:"inside",tickfont:{size:14,color:"#333"},title:{text:"q-path",font:{size:16,color:"#333"}}},xaxis2:{...A.xaxis,title:{...A.xaxis.title,text:"α<sup>2</sup>F(ω)"},showgrid:!1},xaxis3:{overlaying:"x2",side:"top",anchor:"y",title:{text:"λ(ω)",font:{size:16}},showgrid:!1,tickfont:{size:15,color:"#333"},ticks:"inside",tickmode:"auto"},legend2:{orientation:"v",y:.1,x:.585,xanchor:"right",zorder:-100,opacity:0,bgcolor:"rgba(0, 0, 0, 0)"},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:1.25},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]};function fe(e,r){e.paths.forEach(o=>{o.values.forEach(n=>{n.forEach((a,l,t)=>{t[l]+=r})})})}function he(e){const r=e.map(a=>{const l=a.bandsData?.paths;return l?l.reduce((t,i)=>!i.x||i.x.length===0?t:t+(i.x[i.x.length-1]-i.x[0]),0):0}),o=Math.max(...r);return e.map((a,l)=>{const t=a.bandsData?.paths;if(!t)return a;const i=r[l];if(i===0)return a;const u=o/i,x=t.map(d=>!d.x||d.x.length===0?d:{...d,x:d.x.map(y=>y*u)});return{...a,bandsData:{...a.bandsData,paths:x}}})}function xe(e,r=0,o="unknownEntry"){fe(e,r);let n=ce[o],a={bandsData:e,traceFormat:{label:`${n.label}`,name:n.label,hovertemplate:`<b>${n.label}</b>: %{y:.3f} ${n.units}<br><extra></extra>`,mode:n.mode,line:{color:n.colors[0],dash:n.dash,width:n.width,opacity:n.opacity}}};return o=="phononEPW"&&(a={bandsData:e,traceFormat:{label:`${n.label}`,name:n.label,hovertemplate:`<b>${n.label}</b>: %{y:.3f} ${n.units}<br><extra></extra>`,mode:n.mode,line:{color:n.colors[0],dash:n.dash,width:n.width,opacity:n.opacity},showlegend:!1}}),a}function W(e,r,o){return!e||typeof r!="number"?null:xe(e,-r,o)}function D(e,r=[]){const[o,n]=F.useState(null),[a,l]=F.useState(!1);return F.useEffect(()=>{let t=!1;async function i(){l(!0);try{const u=await e();t||n(u??null)}catch{t||n(null)}finally{t||l(!1)}}return i(),()=>{t=!0}},r),{data:o,loading:a}}async function pe(e,r){console.log("supercon settings",e);const[o,n,a]=await Promise.all([e.epw_el_band_structure_uuid?V(`${r}-supercon`,e.epw_el_band_structure_uuid):null,e.qe_el_band_structure_uuid?V(`${r}-supercon`,e.qe_el_band_structure_uuid):null,e.epw_ph_band_structure_uuid?V(`${r}-supercon`,e.epw_ph_band_structure_uuid):null]),l=W(o,e.fermi_energy_coarse,"electronicEPW"),t=W(n,e.fermi_energy_coarse,"electronicQE"),i=he([t,l].filter(Boolean)),u=W(a,0,"phononEPW");return{el:i,ph:u?[u]:[]}}async function ye(e,r){return e.aniso_gap_function_uuid?te(`${r}-supercon`,e.aniso_gap_function_uuid):null}async function me(e,r){return e.a2f_uuid?te(`${r}-supercon`,e.a2f_uuid):null}const ge=({childrenLeft:e,childrenRight:r,style:o=null})=>s.jsx("div",{style:o,children:s.jsxs("div",{className:"two-wide-container subsection-shadow overflow-auto rounded",children:[s.jsx("div",{className:"info-col",children:e}),s.jsx("div",{className:"info-col",children:r})]})}),be=s.jsxs(s.Fragment,{children:["ω",s.jsx("sub",{children:"log"}),s.jsx("span",{style:{marginLeft:"0.10em"}})]}),R=s.jsxs(s.Fragment,{children:["T",s.jsx("sub",{children:"c"}),s.jsx("span",{style:{marginLeft:"0.10em"}})]});function b(e,{decimals:r=3,format:o=a=>a,fallback:n=void 0}={}){if(typeof e=="number"&&!isNaN(e)){const a=Number(e.toFixed(r));return o(a)}else{if(Array.isArray(e))return o(e.join(" × "));if(e!=null)return o(e)}return n}function _e({superconData:e,style:r={}}){const o=[{key:"Space group number",value:b(e.space_group_number,{format:t=>`${t}`,fallback:"Unknown Spacegroup"})},{key:"Total energy",value:b(e.total_energy,{format:t=>`${t} eV`,fallback:"Unknown Total energy"})},{key:"Cell volume",value:b(e.cell_volume,{format:t=>`${t} Å³`,fallback:"Unknown Spacegroup"})},{key:"Fermi energy",value:b(e.fermi_energy_coarse,{format:t=>`${t} eV`})},{key:s.jsxs(s.Fragment,{children:["ω",s.jsx("sup",{children:"max"})]}),value:b(e.highest_phonon_frequency,{format:t=>`${t} meV`})}],n=[{key:s.jsxs(s.Fragment,{children:["E",s.jsx("sub",{children:"cut"})]}),value:b(e.ecut,{format:t=>`${(t/13.605703976).toFixed(0)} Ry`,fallback:"No data"})},{key:"Smearing",value:b(e.scf_smearing,{format:t=>`${t} eV`,fallback:"No data"})},{key:s.jsxs(s.Fragment,{children:["DFPT ",s.jsx("b",{children:"k"}),"-grid"]}),value:b(e.kpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No DFPT kgrid data"})},{key:s.jsxs(s.Fragment,{children:["DFPT ",s.jsx("b",{children:"q"}),"-grid"]}),value:b(e.qpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No DFPT qgrid data"})}],a=[{key:"Type of anisotropy",value:b(e.type,{format:t=>`${t}`})},{key:"Number of Wannier functions",value:b(e.number_of_wannier_functions,{format:t=>`${t}`})},{key:s.jsxs(s.Fragment,{children:["Coarse ",s.jsx("b",{children:"k"}),"-grid"]}),value:b(e.kpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW coarse kgriddata"})},{key:s.jsxs(s.Fragment,{children:["Coarse ",s.jsx("b",{children:"q"}),"-grid"]}),value:b(e.qpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW coarse qgriddata"})},{key:s.jsxs(s.Fragment,{children:["Fine ",s.jsx("b",{children:"k"}),"-grid"]}),value:b(e.kfpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW fine kgriddata"})},{key:s.jsxs(s.Fragment,{children:["Fine ",s.jsx("b",{children:"q"}),"-grid"]}),value:b(e.qfpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW fine qgriddata"})},{key:"Smearing-q",value:b(e.smearing_q,{format:t=>`${t} meV`,fallback:"No data"})},{key:"Fermi window",value:b(e.fermi_window,{format:t=>`±${t} eV`,fallback:"No data"})}],l=[{key:be,value:b(e.omega_log,{format:t=>`${t} meV`,fallback:"Not calculated"})},{key:"λ",value:b(e.lambda,{format:t=>`${t}`,fallback:"Not calculated"})},{key:s.jsxs(s.Fragment,{children:["Allen-Dynes ",R]}),value:b(e.allen_dynes_tc,{format:t=>`${t} K`,fallback:"Not calculated"})},{key:s.jsxs(s.Fragment,{children:["Isotropic ",R]}),value:b(e.iso_tc,{format:t=>`${t} K`,fallback:"Not superconducting"})},{key:s.jsxs(s.Fragment,{children:["Δ",s.jsxs("sub",{children:["n",s.jsx("b",{children:"k"})]}),"(0)"]}),value:b(e.aniso_info?.delta0,{format:t=>`${t} K`,fallback:"No nk Data"})},{key:s.jsxs(s.Fragment,{children:["Anisotropic ",R]}),value:b(e.aniso_info?.Tc,{format:t=>`${t} K`,fallback:"Not superconducting"})}];return s.jsx(ge,{style:r,childrenLeft:s.jsxs("div",{children:[s.jsx("b",{children:"General properties"}),s.jsx("ul",{className:"no-bullets",children:o.filter(t=>t.value!==void 0).map((t,i)=>s.jsxs("li",{children:[t.key,": ",t.value]},i))}),s.jsx("b",{children:"Superconducting properties"}),s.jsx("ul",{className:"no-bullets",children:l.filter(t=>t.value!==void 0).map((t,i)=>s.jsxs("li",{children:[t.key,": ",t.value]},i))})]}),childrenRight:s.jsxs("div",{children:[s.jsx("b",{children:"DFT calculation details "}),s.jsx("ul",{className:"no-bullets",children:n.filter(t=>t.value!==void 0).map((t,i)=>s.jsxs("li",{children:[t.key,": ",t.value]},i))}),s.jsx("b",{children:"EPW calculation details"}),s.jsx("ul",{className:"no-bullets",children:a.filter(t=>t.value!==void 0).map((t,i)=>s.jsxs("li",{children:[t.key,": ",t.value]},i))})]})})}const Q={color:"#d62728"},$={xaxis:{title:{text:"T [K]",font:{size:15,color:"#111"}},tickfont:{size:14},showgrid:!1,zeroline:!1,showline:!1,ticks:"inside",rangemode:"nonnegative"},yaxis:{title:{text:"Δ<sub>n<b>k</b></sub>(T) [meV]",font:{size:15,color:"#111"}},tickfont:{size:14},showgrid:!1,zeroline:!1,showline:!1,ticks:"inside",rangemode:"nonnegative"},legend:{visible:!1},margin:{t:10,b:40,l:65,r:2},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]};function we(e,r,o,n=200,a="Analytical Δ(T)"){const l=Array.from({length:n},(i,u)=>u*o/(n-1)),t=l.map(i=>e*Math.sqrt(1-Math.pow(i/o,r)));return{x:l,y:t,name:a,type:"scatter",mode:"lines",hovertemplate:"<b>Value of the fit of BCS gap at %{x:.2f}K:</b> %{y:.3f}<extra></extra>",line:{color:"#b22222",dash:"dash"}}}function je({gapfuncData:e,loading:r=!1,loadingIconScale:o=8,Tc:n,verts:a,points:l,delta0:t,expo:i,resolution:u=1e3,minXVal:x=0,maxXVal:d=null,minYVal:y=null,maxYVal:_=0}){const w=F.useRef(null);return F.useEffect(()=>{if(!e||!w.current||r)return;const j=w.current,v=a??[],h=Object.entries(e).filter(([m])=>Array.isArray(m)).map(([m])=>{const g=m.map(([k])=>k),C=m.map(([k])=>k),{leftVerts:re,distances:se}=g.reduce((k,X)=>{const Y=v.filter(P=>P<=X);if(!Y.length)k.leftVerts.push(null),k.distances.push(null);else{const P=Math.max(...Y);k.leftVerts.push(P),k.distances.push(X-P)}return k},{leftVerts:[],distances:[]});return{x:g,y:C,customdata:se,text:re,type:"scatter",mode:"lines",line:{color:Q.color},hovertemplate:"<b>Histogram of Δ<sub>nk</sub>(%{text:.1f}K) at %{y:.2f} meV:</b> %{customdata:.2f} <extra></extra>"}}),c=(a||[]).map((m,g)=>({x:[m],y:[(l||[])[g]],name:`point ${g}`,type:"scatter",mode:"markers",hovertemplate:"<b>Weighted average at %{x:.0f}K:</b> %{y:.3f}<extra></extra>",marker:{color:Q.color,size:12}}));h.push(...c);const f=we(t,i,n,u);h.push(f);const p={...$,xaxis:{...$.xaxis,range:x!=null&&d!=null?[x,d]:void 0},yaxis:{...$.yaxis,range:y!=null&&_!=null?[y,_]:void 0},shapes:[...$.shapes||[],...v.map(m=>({type:"line",x0:m,x1:m,y0:0,y1:1,yref:"paper",line:{color:"#111",width:1.25},layer:"below"}))]};return U.newPlot(j,h,p,{responsive:!0}),()=>U.purge(j)},[e,a,l,t,i,n,u,x,d,y,_,r]),s.jsx("div",{ref:w,style:{position:"relative",width:"100%",height:"450px",border:r?"2px solid #ccc":"none",borderRadius:r?"8px":"0"},children:r&&s.jsx("div",{style:{width:`${o}%`,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10},children:s.jsx(ne,{})})})}const T={color:"#d62728",dash:"solid",label:"α<sup>2</sup>F(ω)",hoverlabel:"Eliashberg spectral function",lineWidth:1.75,xaxis:"x2",yaxis:"y2"},E={color:"#111",dash:"solid",label:"λ(ω)",hoverlabel:"Cumulative electron-phonon coupling strength",lineWidth:1.75,xaxis:"x3",yaxis:"y2"};function ve({a2f:e,frequency:r,degaussq:o,selectedDegaussIndex:n=-1}){if(!e||!r||!o||o.length===0)return[];const a=n<0?o.length-1:n,l={x:e.map(d=>d[a]),y:r,type:"scatter",mode:"lines",name:T.label,hovertemplate:`<b>${T.hoverlabel} at %{y:.2f} meV:</b> %{y:.3f} <br><extra></extra>`,line:{color:T.color,dash:T.dash,width:T.lineWidth},xaxis:T.xaxis,yaxis:T.yaxis},t=r[1]-r[0];let i=0;const x={x:r.map((d,y)=>{const _=e[y][a];return i+=2*_/d*t,i}),y:r,type:"scatter",mode:"lines",name:E.label,label:`${E.label}`,hovertemplate:`<b>${E.hoverlabel} at %{y:.2f} meV:</b> %{x:.3f}<br><extra></extra>`,line:{color:E.color,dash:E.dash,width:E.lineWidth},xaxis:E.xaxis,yaxis:E.yaxis};return[l,x]}function H(e){const r=e.length,o=e[0].length,n=new Array(o);for(let a=0;a<o;a++){n[a]=new Array(r);for(let l=0;l<r;l++)n[a][l]=e[l][a]}return n}const J=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"];function G(e){return e<J.length?J[e]:`hsl(${e*47%360}, 70%, 50%)`}function ke(e){const r=new Set;return e.map(n=>{const a=n.name||"",l=!r.has(a);return l&&r.add(a),{...n,legendgroup:a,showlegend:l}})}function Ee(e){const r=[],o=[];let n=null;return e.paths.forEach((a,l)=>{const t=a.x,i=a.values;l>0&&(r.push(null),o.forEach(u=>u.push(null))),t.forEach((u,x)=>{u===n&&(r.push(null),o.forEach(d=>d.push(null))),r.push(u),n=u,i.forEach((d,y)=>{o[y]||(o[y]=[]),o[y].push(d[x])})})}),{xs:r,ys:o}}function Ae(e){const r={GAMMA:"Γ",DELTA:"Δ",SIGMA:"Σ",LAMBDA:"Λ"};Object.keys(r).forEach(n=>{const a=new RegExp(n,"gi");e=e.replace(a,r[n])}),e=e.replace(/\bG\b/g,"Γ"),e=e.replace(/-/g,"—");const o={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};return e=e.replace(/_(.)/g,(n,a)=>o[a]||n),e}function Fe(e=td.paths){const r=[0];for(const o of e)o.x.length<3||r.push(o.x[o.x.length-1]);return r}function Te(e){const r=e.flat(),o=[];o.push(r[0]);for(let n=1;n<r.length-1;n++)r[n]===r[n+1]?(o.push(r[n]),n++):(o.push(r[n]+"|"+r[n+1]),n++);return o.push(r[r.length-1]),o}function L(e,r="x",o="y"){let n=1/0,a=-1/0,l=1/0,t=-1/0;for(const i of e){const u=i.xaxis===r||!i.xaxis&&r==="x",x=i.yaxis===o||!i.yaxis&&o==="y";if(!(!u||!x)){for(const d of i.x??[])typeof d=="number"&&(n=Math.min(n,d),a=Math.max(a,d));for(const d of i.y??[])typeof d=="number"&&(l=Math.min(l,d),t=Math.max(t,d))}}return{x:n===1/0?null:[n,a],y:l===1/0?null:[l,t]}}function M(e,r,o,n={}){return{x:e,y:r,mode:"lines",type:"scatter",name:`Fermi [${o}eV]`,legendgroup:`fermi-${o}`,showlegend:n.showlegend??!0,line:{color:"green",width:1.25,dash:"dash"},...n}}function Ne(e,r,o,n){const a=[...r];if(o&&!n){const{y:l}=L(r);for(const t of e)a.push(M([t,t],[l[0],l[1]],t))}else if(n&&!o){const{x:l}=L(r);for(const t of e)a.push(M([l[0],l[1]],[t,t],t))}else if(n&&o){const{x:l}=L(r,"x2","y"),{x:t}=L(r,"x","y");for(const i of e)a.push(M([t[0],t[1]],[i,i],i)),a.push(M([l[0],l[1]],[i,i],i,{showlegend:!1,xaxis:"x2",yaxis:"y"}))}return a}var q,Z;function Oe(){if(Z)return q;Z=1;var e=function(f){return r(f)&&!o(f)};function r(c){return!!c&&typeof c=="object"}function o(c){var f=Object.prototype.toString.call(c);return f==="[object RegExp]"||f==="[object Date]"||l(c)}var n=typeof Symbol=="function"&&Symbol.for,a=n?Symbol.for("react.element"):60103;function l(c){return c.$$typeof===a}function t(c){return Array.isArray(c)?[]:{}}function i(c,f){return f.clone!==!1&&f.isMergeableObject(c)?v(t(c),c,f):c}function u(c,f,p){return c.concat(f).map(function(m){return i(m,p)})}function x(c,f){if(!f.customMerge)return v;var p=f.customMerge(c);return typeof p=="function"?p:v}function d(c){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(c).filter(function(f){return Object.propertyIsEnumerable.call(c,f)}):[]}function y(c){return Object.keys(c).concat(d(c))}function _(c,f){try{return f in c}catch{return!1}}function w(c,f){return _(c,f)&&!(Object.hasOwnProperty.call(c,f)&&Object.propertyIsEnumerable.call(c,f))}function j(c,f,p){var m={};return p.isMergeableObject(c)&&y(c).forEach(function(g){m[g]=i(c[g],p)}),y(f).forEach(function(g){w(c,g)||(_(c,g)&&p.isMergeableObject(f[g])?m[g]=x(g,p)(c[g],f[g],p):m[g]=i(f[g],p))}),m}function v(c,f,p){p=p||{},p.arrayMerge=p.arrayMerge||u,p.isMergeableObject=p.isMergeableObject||e,p.cloneUnlessOtherwiseSpecified=i;var m=Array.isArray(f),g=Array.isArray(c),C=m===g;return C?m?p.arrayMerge(c,f,p):j(c,f,p):i(f,p)}v.all=function(f,p){if(!Array.isArray(f))throw new Error("first argument should be an array");return f.reduce(function(m,g){return v(m,g,p)},{})};var h=v;return q=h,q}var ze=Oe();const z=oe(ze),K={title:"Multi Trace Plot with border",hovermode:"closest",uirevision:!0,shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],margin:{l:55,r:10,t:10,b:45},dragmode:"zoom",xaxis:{title:{text:"x-axis",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"y-axis",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}},legend:{x:1.01,y:1,xanchor:"left",yanchor:"top",orientation:"v"}},Pe=z(K,{title:"BSPlot",xaxis:{title:{text:"K-path",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}}}),Se=z(K,{title:"DOSPlot",xaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),$e=z(K,{title:"DOSPlot",xaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),B={shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:2},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],grid:{rows:1,columns:2,pattern:"independent"},xaxis:{domain:[0,.7],autorange:!0},xaxis2:{title:{text:"Energy [eV]",font:{size:18}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"},domain:[.73,1],autorange:!0,showgrid:!0},yaxis:{autorange:!0},margin:{l:60,r:30,b:40,t:40},showlegend:!0,legend:{}},Le={mode:"lines",dash:"solid",line:{color:"rgba(90, 60, 255, 0.85)",width:1},name:"Band Structure"},Me={name:"DOS",legendgroup:"DOS",showlegend:!0,type:"scatter",mode:"lines",dash:"dash",line:{color:"rgba(90, 60, 255, 0.85)",width:2},fill:"toself"};function Be(e,r,o={}){const n=[];return r.forEach((a,l)=>{n.push({name:o.name,legendgroup:o.name,showlegend:l===0,...Le,...o,x:e,y:a})}),n}function Ce(e=[],r=[]){return z.all([Pe,{xaxis:{tickvals:r,ticktext:e},yaxis:{}}])}function Ve(e){const o=Te(e[0].bandsData.path).map(Ae),n=Fe(e[0].bandsData.paths),a=Ce(o,n);let l=[];for(const[t,i]of e.entries()){let u=i.traceFormat;(!u||Object.keys(u).length===0)&&(u={name:`Band Structure ${t}`,line:{color:G(t),width:1}});const x=i.bandsData,{xs:d,ys:y}=Ee(x),_=Be(d,y,u);l.push(..._)}return{bandTraces:l,bandLayout:a}}function Ie(e="h"){let r;return e==="v"?r=$e:r=Se,r}function We(e,r="h",o={}){const n=r==="v"?e.y:e.x,a=r==="v"?e.x:e.y;return{...Me,...o,x:n,y:a}}function De(e,r="h"){const o=[];for(const[a,l]of e.entries()){let t=l.traceFormat;(!t||Object.keys(t).length===0)&&(t={name:`DOS ${a}`,line:{color:G(a),width:2}});const i=l.dosData,u=We(i,r,t);o.push(u)}const n=Ie(r);return{dosTraces:o,dosLayout:n}}function Re(e,r,o,n={},a=1){const l=H(o),t=H(r),i=[];return t.forEach((u,x)=>{const d=l[x],y=new Float64Array(u.length),_=new Float64Array(u.length);for(let h=0;h<u.length;h++){const c=d[h]*a;y[h]=u[h]+c,_[h]=u[h]-c}const w=e.length,j=new Float32Array(w*2),v=new Float32Array(w*2);for(let h=0;h<w;h++)j[h]=e[h],v[h]=_[h],j[2*w-1-h]=e[h],v[2*w-1-h]=y[h];i.push({name:n.name,legendgroup:n.name,type:"scatter",mode:"lines",fill:"toself",...n,showlegend:x===0,x:j,y:v})}),i}function qe(e,r){for(const o in e)e[o]!==null&&typeof e[o]=="object"&&!Array.isArray(e[o])&&r[o]&&typeof r[o]=="object"&&!Array.isArray(r[o])?r[o]=z(r[o],e[o]):r[o]=e[o]}function Ue(e,{bandsDataArray:r=[],dosDataArray:o=[],fermiLevels:n=[],customTraces:a=[],settings:l={}}){let t=[],i={},u=[],x=[],d={};typeof n=="number"&&(n=[n]);const y=r.length>0,_=o.length>0;if(y){const h=Ve(r);t=h.bandTraces,i=h.bandLayout;for(const[c,f]of r.entries())if(f.hasOwnProperty("projections"))for(const[p,m]of f.projections.entries()){const g=m.traceFormat&&Object.keys(m.traceFormat).length>0?m.traceFormat:{name:`Projection ${p}`,line:{color:G(p),width:0}};u.push(...Re(f.bandsData.x,f.bandsData.y,m.projData.weights,g))}}if(_){const c=De(o,y?"v":"h");x=c.dosTraces,d=c.dosLayout}let w={},j=[];if(_&&!y)j=x,w={...d,showlegend:d?.showlegend??!0};else if(y&&!_)j=[...t,...u],w={...i,showlegend:i?.showlegend??!0};else if(_&&y){x=x.map(c=>({...c,xaxis:"x2",yaxis:"y"}));const h=ke([...u,...x]);j=[...t,...h],w={...B,xaxis:{...B.xaxis||{},...i?.xaxis||{}},xaxis2:{...B.xaxis2||{},...d?.xaxis2||{}},yaxis:{...B.yaxis||{},...i?.yaxis||{},...d?.yaxis||{}}}}for(const h of a)console.log(h),h.target==="dos"?j.push({...h,xaxis:"x2",yaxis:"y"}):h.target==="bands"?j.push({...h,xaxis:"x",yaxis:"y"}):j.push({...h});const v=Ne(n,j,_,y);qe(l,w),U.react(e,v,w,{displaylogo:!1,responsive:!0})}function ee({bandsDataArray:e,loading:r=!1,loadingIconScale:o=15,dosDataArray:n=void 0,customTraces:a=[],minYval:l=null,maxYval:t=null,layoutOverrides:i=null}){const u=F.useRef(null),x=F.useMemo(()=>{const d={...i??{}};return l!=null&&t!=null&&(d.yaxis={...d.yaxis??{},range:[l,t]}),d},[i,l,t]);return F.useEffect(()=>{r||!u.current||!e||Ue(u.current,{bandsDataArray:e,dosDataArray:n,customTraces:a,settings:x})},[e,n,a,x,r]),s.jsx("div",{ref:u,style:{position:"relative",width:"100%",height:"450px",border:r?"2px solid #ccc":"none",borderRadius:r?"8px":"0"},children:r&&s.jsx("div",{style:{width:`${o}%`,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10},children:s.jsx(ne,{})})})}function Ke({params:e,loadedData:r,superconData:o}){const n=o.supercon,a=e.method,{data:l,loading:t}=D(()=>pe(n,a),[n,a]),{data:i,loading:u}=D(()=>ye(n,a),[n,a]),{data:x}=D(()=>me(n,a),[n,a]),d=l?.el??[],y=l?.ph??[],_=!!d.length,w=!!y.length;return n?s.jsx("div",{children:s.jsxs(ae,{fluid:!0,className:"section-container",children:[s.jsxs("div",{style:{margin:"10px 0px",padding:"20px 0px 10px",borderBottom:"1px solid #c4c4c4"},children:[s.jsx("div",{style:{fontSize:"24px"},children:"Superconductivity estimation"}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px",alignItems:"center"},children:[s.jsx(ie,{citationLabels:["MBercxSupercon25"]}),s.jsx(le,{doi_id:"9w-az",label:"Data DOI"})]})]}),s.jsxs("div",{className:"alert alert-warning",style:{margin:"10px 10px 5px 10px"},role:"alert",children:["This contribution re-relaxes the structure with a different methodology. To see this structure, explore the AiiDA provenance"," ",n.structure_uuid&&s.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.structure_uuid})]}),s.jsxs("div",{style:{padding:"10px 10px"},children:["This dataset provides results from a high-throughput search for phonon-mediated superconductivity, where electron–phonon interactions and critical temperatures were systematically computed to identify and characterize promising superconducting materials. This frontend section contains the final superconductivity estimation results, as well as the intermediate electronic and vibrational calculated properties. For further details regarding the methodology see the"," ",s.jsx("a",{href:"./#/contributions",target:"_blank",rel:"noopener noreferrer",children:"contribution details"}),"."]}),s.jsxs(I,{children:[s.jsx(S,{sm:12,md:6,className:"mt-2 mt-md-5",children:s.jsx(_e,{superconData:n})}),s.jsxs(S,{sm:12,md:6,className:"mt-3 mt-md-0",children:[s.jsx("div",{className:"subsection-title",children:"Electronic band structure"}),s.jsxs("div",{className:"mb-3 ms-2",children:["Electronic band structure calculated with Quantum ESPRESSO (QE)"," ",n.qe_el_band_structure_uuid&&s.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.qe_el_band_structure_uuid})," ","and EPW"," ",n.epw_el_band_structure_uuid&&s.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.epw_el_band_structure_uuid})]}),s.jsx(ee,{bandsDataArray:_?l.el:null,loading:t,minYval:-10.4,maxYval:10.8,layoutOverrides:ue})]})]}),n.epw_ph_band_structure_uuid&&s.jsx(I,{children:s.jsxs(S,{className:"mt-4 mt-lg-0",children:[s.jsx("div",{className:"subsection-title",children:"Phonon bands and electron-phonon interaction"}),s.jsxs("div",{style:{padding:"0px 10px"},children:["Phonon band structure calculated with EPW"," ",n.epw_ph_band_structure_uuid&&s.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.epw_ph_band_structure_uuid})," ","Eliashberg spectral function [α²F(ω)], and electron-phonon coupling strength [λ(ω)]"," ",n.a2f_uuid&&s.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.a2f_uuid})," "]}),s.jsx(ee,{bandsDataArray:w?l.ph:null,loading:t,loadingIconScale:7,minYval:0,maxYval:n.highest_phonon_frequency!=null?Math.min(n.highest_phonon_frequency+2,100):100,dosDataArray:[{dosData:{x:[0],y:[0]},traceFormat:{name:"",legend:"legend2",showlegend:!1,opacity:0}}],layoutOverrides:de,customTraces:ve({a2f:x?.a2f,frequency:x?.frequency,degaussq:x?.degaussq,lambda:x?.lambda})})]})}),n.aniso_info&&s.jsx(I,{children:s.jsxs(S,{xs:12,style:{maxWidth:"1200px"},children:[s.jsxs("div",{className:"subsection-title",children:["Anisotropic superconducting gap function"," ",n.aniso_gap_function_uuid&&s.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.aniso_gap_function_uuid})," "]}),s.jsx(je,{gapfuncData:i,loading:u,verts:n.aniso_info.temps,points:n.aniso_info.average_deltas,delta0:n.aniso_info.delta0,Tc:n.aniso_info.Tc,expo:n.aniso_info.expo,minXVal:0,maxXVal:null,minYVal:0,maxYVal:null})]})})]})}):s.jsx("div",{className:"empty-supercon-div"})}export{Ke as default};
