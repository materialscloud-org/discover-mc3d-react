import{r as F,f as V,h as te,j as o,P as U,x as ne,g as oe,C as ae,e as ie,w as le,O as N,E as O,R as I,b as S}from"./index-Dvog2Mwb.js";const ce={electronicEPW:{label:"EPW",colors:["#d62728"],dash:"4px",width:1.75,opacity:1,units:"eV"},electronicQE:{label:"QE",colors:["#6baed6"],dash:"solid",width:2.25,opacity:.95,units:"eV"},phononEPW:{label:"EPW",colors:["#d62728"],dash:"solid",width:1.75,opacity:1,units:"eV",showlegend:!1},unknownEntry:{label:"Unknown Data 1",colors:["#2ca02c","#98df8a"],dash:"dot",units:"eV"}},A={yaxis:{showgrid:!1,showline:!1,ticks:"inside",tickfont:{size:14,color:"#333"},title:{font:{size:16,color:"#333"},standoff:10}},xaxis:{showgrid:!0,ticks:"inside",tickfont:{size:14,color:"#333"},title:{font:{size:16,color:"#333"}}},legend:{orientation:"v",y:.985,x:.985,xanchor:"right",font:{size:14,color:"#333"},bgcolor:"rgba(250, 250, 250, 1.0)",bordercolor:"#ccc",borderwidth:1},margin:{l:65,r:10,t:10,b:50},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]},ue={...A,yaxis:{...A.yaxis,title:{...A.yaxis.title,text:"Energy [eV]"}}},de={...A,margin:{l:65,r:10,t:50,b:40},yaxis:{...A.yaxis,title:{...A.yaxis.title,text:"Energy [meV]"},autorange:!1,rangemode:"nonnegative"},yaxis2:{matches:"y",showticklabels:!1,ticks:"inside",showgrid:!1,rangemode:"nonnegative",autorange:!1,zeroline:!1},xaxis:{ticks:"inside",tickfont:{size:14,color:"#333"},title:{text:"q-path",font:{size:16,color:"#333"}}},xaxis2:{...A.xaxis,title:{...A.xaxis.title,text:"α<sup>2</sup>F(ω)"},showgrid:!1},xaxis3:{overlaying:"x2",side:"top",anchor:"y",title:{text:"λ(ω)",font:{size:16}},showgrid:!1,tickfont:{size:15,color:"#333"},ticks:"inside",tickmode:"auto"},legend2:{orientation:"v",y:.1,x:.585,xanchor:"right",zorder:-100,opacity:0,bgcolor:"rgba(0, 0, 0, 0)"},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:1.25},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]};function fe(e,r){e.paths.forEach(n=>{n.values.forEach(s=>{s.forEach((a,l,t)=>{t[l]+=r})})})}function he(e){const r=e.map(a=>{const l=a.bandsData?.paths;return l?l.reduce((t,i)=>!i.x||i.x.length===0?t:t+(i.x[i.x.length-1]-i.x[0]),0):0}),n=Math.max(...r);return e.map((a,l)=>{const t=a.bandsData?.paths;if(!t)return a;const i=r[l];if(i===0)return a;const u=n/i,p=t.map(d=>!d.x||d.x.length===0?d:{...d,x:d.x.map(y=>y*u)});return{...a,bandsData:{...a.bandsData,paths:p}}})}function xe(e,r=0,n="unknownEntry"){fe(e,r);let s=ce[n],a={bandsData:e,traceFormat:{label:`${s.label}`,name:s.label,hovertemplate:`<b>${s.label}</b>: %{y:.3f} ${s.units}<br><extra></extra>`,mode:s.mode,line:{color:s.colors[0],dash:s.dash,width:s.width,opacity:s.opacity}}};return n=="phononEPW"&&(a={bandsData:e,traceFormat:{label:`${s.label}`,name:s.label,hovertemplate:`<b>${s.label}</b>: %{y:.3f} ${s.units}<br><extra></extra>`,mode:s.mode,line:{color:s.colors[0],dash:s.dash,width:s.width,opacity:s.opacity},showlegend:!1}}),a}function W(e,r,n){return!e||typeof r!="number"?null:xe(e,-r,n)}function R(e,r=[]){const[n,s]=F.useState(null),[a,l]=F.useState(!1);return F.useEffect(()=>{let t=!1;async function i(){l(!0);try{const u=await e();t||s(u??null)}catch{t||s(null)}finally{t||l(!1)}}return i(),()=>{t=!0}},r),{data:n,loading:a}}async function pe(e,r){const[n,s,a]=await Promise.all([e.epw_el_band_structure_uuid?V(`${r}-supercon`,e.epw_el_band_structure_uuid):null,e.qe_el_band_structure_uuid?V(`${r}-supercon`,e.qe_el_band_structure_uuid):null,e.epw_ph_band_structure_uuid?V(`${r}-supercon`,e.epw_ph_band_structure_uuid):null]),l=W(n,e.fermi_energy_coarse,"electronicEPW"),t=W(s,e.fermi_energy_coarse,"electronicQE"),i=he([t,l].filter(Boolean)),u=W(a,0,"phononEPW");return{el:i,ph:u?[u]:[]}}async function ye(e,r){return e.aniso_gap_function_uuid?te(`${r}-supercon`,e.aniso_gap_function_uuid):null}async function me(e,r){return e.a2f_uuid?te(`${r}-supercon`,e.a2f_uuid):null}const ge=({childrenLeft:e,childrenRight:r,style:n=null})=>o.jsx("div",{style:n,children:o.jsxs("div",{className:"two-wide-container subsection-shadow overflow-auto rounded",children:[o.jsx("div",{className:"info-col",children:e}),o.jsx("div",{className:"info-col",children:r})]})}),be=o.jsxs(o.Fragment,{children:["ω",o.jsx("sub",{children:"log"}),o.jsx("span",{style:{marginLeft:"0.10em"}})]}),D=o.jsxs(o.Fragment,{children:["T",o.jsx("sub",{children:"c"}),o.jsx("span",{style:{marginLeft:"0.10em"}})]});function b(e,{decimals:r=3,format:n=a=>a,fallback:s=void 0}={}){if(typeof e=="number"&&!isNaN(e)){const a=Number(e.toFixed(r));return n(a)}else{if(Array.isArray(e))return n(e.join(" × "));if(e!=null)return n(e)}return s}function _e({superconData:e,style:r={}}){const n=[{key:"Space group number",value:b(e.space_group_number,{format:t=>`${t}`,fallback:"Unknown Spacegroup"})},{key:"Total energy",value:b(e.total_energy,{format:t=>`${t} eV`,fallback:"Unknown Total energy"})},{key:"Cell volume",value:b(e.cell_volume,{format:t=>`${t} Å³`,fallback:"Unknown Spacegroup"})},{key:"Fermi energy",value:b(e.fermi_energy_coarse,{format:t=>`${t} eV`})},{key:o.jsxs(o.Fragment,{children:["ω",o.jsx("sup",{children:"max"})]}),value:b(e.highest_phonon_frequency,{format:t=>`${t} meV`})}],s=[{key:o.jsxs(o.Fragment,{children:["E",o.jsx("sub",{children:"cut"})]}),value:b(e.ecut,{format:t=>`${(t/13.605703976).toFixed(0)} Ry`,fallback:"No data"})},{key:"Smearing",value:b(e.scf_smearing,{format:t=>`${t} eV`,fallback:"No data"})},{key:o.jsxs(o.Fragment,{children:["DFPT ",o.jsx("b",{children:"k"}),"-grid"]}),value:b(e.kpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No DFPT kgrid data"})},{key:o.jsxs(o.Fragment,{children:["DFPT ",o.jsx("b",{children:"q"}),"-grid"]}),value:b(e.qpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No DFPT qgrid data"})}],a=[{key:"Type of anisotropy",value:b(e.type,{format:t=>`${t}`})},{key:"Number of Wannier functions",value:b(e.number_of_wannier_functions,{format:t=>`${t}`})},{key:o.jsxs(o.Fragment,{children:["Coarse ",o.jsx("b",{children:"k"}),"-grid"]}),value:b(e.kpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW coarse kgriddata"})},{key:o.jsxs(o.Fragment,{children:["Coarse ",o.jsx("b",{children:"q"}),"-grid"]}),value:b(e.qpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW coarse qgriddata"})},{key:o.jsxs(o.Fragment,{children:["Fine ",o.jsx("b",{children:"k"}),"-grid"]}),value:b(e.kfpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW fine kgriddata"})},{key:o.jsxs(o.Fragment,{children:["Fine ",o.jsx("b",{children:"q"}),"-grid"]}),value:b(e.qfpoints_mesh,{format:t=>Array.isArray(t)?t.join(" × "):`${t}`,fallback:"No EPW fine qgriddata"})},{key:"Smearing-q",value:b(e.smearing_q,{format:t=>`${t} meV`,fallback:"No data"})},{key:"Fermi window",value:b(e.fermi_window,{format:t=>`±${t} eV`,fallback:"No data"})}],l=[{key:be,value:b(e.omega_log,{format:t=>`${t} meV`,fallback:"Not calculated"})},{key:"λ",value:b(e.lambda,{format:t=>`${t}`,fallback:"Not calculated"})},{key:o.jsxs(o.Fragment,{children:["Allen-Dynes ",D]}),value:b(e.allen_dynes_tc,{format:t=>`${t} K`,fallback:"Not calculated"})},{key:o.jsxs(o.Fragment,{children:["Isotropic ",D]}),value:b(e.iso_tc,{format:t=>`${t} K`,fallback:"Not superconducting"})},{key:o.jsxs(o.Fragment,{children:["Δ",o.jsxs("sub",{children:["n",o.jsx("b",{children:"k"})]}),"(0)"]}),value:b(e.aniso_info?.delta0,{format:t=>`${t} K`,fallback:"No nk Data"})},{key:o.jsxs(o.Fragment,{children:["Anisotropic ",D]}),value:b(e.aniso_info?.Tc,{format:t=>`${t} K`,fallback:"Not superconducting"})}];return o.jsx(ge,{style:r,childrenLeft:o.jsxs("div",{children:[o.jsx("b",{children:"General properties"}),o.jsx("ul",{className:"no-bullets",children:n.filter(t=>t.value!==void 0).map((t,i)=>o.jsxs("li",{children:[t.key,": ",t.value]},i))}),o.jsx("b",{children:"Superconducting properties"}),o.jsx("ul",{className:"no-bullets",children:l.filter(t=>t.value!==void 0).map((t,i)=>o.jsxs("li",{children:[t.key,": ",t.value]},i))})]}),childrenRight:o.jsxs("div",{children:[o.jsx("b",{children:"DFT calculation details "}),o.jsx("ul",{className:"no-bullets",children:s.filter(t=>t.value!==void 0).map((t,i)=>o.jsxs("li",{children:[t.key,": ",t.value]},i))}),o.jsx("b",{children:"EPW calculation details"}),o.jsx("ul",{className:"no-bullets",children:a.filter(t=>t.value!==void 0).map((t,i)=>o.jsxs("li",{children:[t.key,": ",t.value]},i))})]})})}const Q={color:"#d62728"},$={xaxis:{title:{text:"T [K]",font:{size:15,color:"#111"}},tickfont:{size:14},showgrid:!1,zeroline:!1,showline:!1,ticks:"inside",rangemode:"nonnegative"},yaxis:{title:{text:"Δ<sub>n<b>k</b></sub>(T) [meV]",font:{size:15,color:"#111"}},tickfont:{size:14},showgrid:!1,zeroline:!1,showline:!1,ticks:"inside",rangemode:"nonnegative"},legend:{visible:!1},margin:{t:10,b:40,l:65,r:2},shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:1.25},layer:"above"}]};function we(e,r,n,s=200,a="Analytical Δ(T)"){const l=Array.from({length:s},(i,u)=>u*n/(s-1)),t=l.map(i=>e*Math.sqrt(1-Math.pow(i/n,r)));return{x:l,y:t,name:a,type:"scatter",mode:"lines",hovertemplate:"<b>Value of the fit of BCS gap at %{x:.2f}K:</b> %{y:.3f}<extra></extra>",line:{color:"#b22222",dash:"dash"}}}function je({gapfuncData:e,loading:r=!1,loadingIconScale:n=8,Tc:s,verts:a,points:l,delta0:t,expo:i,resolution:u=1e3,minXVal:p=0,maxXVal:d=null,minYVal:y=null,maxYVal:_=0}){const w=F.useRef(null);return F.useEffect(()=>{if(!e||!w.current||r)return;const j=w.current,v=a??[],h=Object.entries(e).filter(([m])=>Array.isArray(m)).map(([m])=>{const g=m.map(([k])=>k),C=m.map(([k])=>k),{leftVerts:re,distances:se}=g.reduce((k,X)=>{const Y=v.filter(P=>P<=X);if(!Y.length)k.leftVerts.push(null),k.distances.push(null);else{const P=Math.max(...Y);k.leftVerts.push(P),k.distances.push(X-P)}return k},{leftVerts:[],distances:[]});return{x:g,y:C,customdata:se,text:re,type:"scatter",mode:"lines",line:{color:Q.color},hovertemplate:"<b>Histogram of Δ<sub>nk</sub>(%{text:.1f}K) at %{y:.2f} meV:</b> %{customdata:.2f} <extra></extra>"}}),c=(a||[]).map((m,g)=>({x:[m],y:[(l||[])[g]],name:`point ${g}`,type:"scatter",mode:"markers",hovertemplate:"<b>Weighted average at %{x:.0f}K:</b> %{y:.3f}<extra></extra>",marker:{color:Q.color,size:12}}));h.push(...c);const f=we(t,i,s,u);h.push(f);const x={...$,xaxis:{...$.xaxis,range:p!=null&&d!=null?[p,d]:void 0},yaxis:{...$.yaxis,range:y!=null&&_!=null?[y,_]:void 0},shapes:[...$.shapes||[],...v.map(m=>({type:"line",x0:m,x1:m,y0:0,y1:1,yref:"paper",line:{color:"#111",width:1.25},layer:"below"}))]};return U.newPlot(j,h,x,{responsive:!0}),()=>U.purge(j)},[e,a,l,t,i,s,u,p,d,y,_,r]),o.jsx("div",{ref:w,style:{position:"relative",width:"100%",height:"450px",border:r?"2px solid #ccc":"none",borderRadius:r?"8px":"0"},children:r&&o.jsx("div",{style:{width:`${n}%`,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10},children:o.jsx(ne,{})})})}const T={color:"#d62728",dash:"solid",label:"α<sup>2</sup>F(ω)",hoverlabel:"Eliashberg spectral function",lineWidth:1.75,xaxis:"x2",yaxis:"y2"},E={color:"#111",dash:"solid",label:"λ(ω)",hoverlabel:"Cumulative electron-phonon coupling strength",lineWidth:1.75,xaxis:"x3",yaxis:"y2"};function ve({a2f:e,frequency:r,degaussq:n,selectedDegaussIndex:s=-1}){if(!e||!r||!n||n.length===0)return[];const a=s<0?n.length-1:s,l={x:e.map(d=>d[a]),y:r,type:"scatter",mode:"lines",name:T.label,hovertemplate:`<b>${T.hoverlabel} at %{y:.2f} meV:</b> %{y:.3f} <br><extra></extra>`,line:{color:T.color,dash:T.dash,width:T.lineWidth},xaxis:T.xaxis,yaxis:T.yaxis},t=r[1]-r[0];let i=0;const p={x:r.map((d,y)=>{const _=e[y][a];return i+=2*_/d*t,i}),y:r,type:"scatter",mode:"lines",name:E.label,label:`${E.label}`,hovertemplate:`<b>${E.hoverlabel} at %{y:.2f} meV:</b> %{x:.3f}<br><extra></extra>`,line:{color:E.color,dash:E.dash,width:E.lineWidth},xaxis:E.xaxis,yaxis:E.yaxis};return[l,p]}function H(e){const r=e.length,n=e[0].length,s=new Array(n);for(let a=0;a<n;a++){s[a]=new Array(r);for(let l=0;l<r;l++)s[a][l]=e[l][a]}return s}const J=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"];function G(e){return e<J.length?J[e]:`hsl(${e*47%360}, 70%, 50%)`}function ke(e){const r=new Set;return e.map(s=>{const a=s.name||"",l=!r.has(a);return l&&r.add(a),{...s,legendgroup:a,showlegend:l}})}function Ee(e){const r=[],n=[];let s=null;return e.paths.forEach((a,l)=>{const t=a.x,i=a.values;l>0&&(r.push(null),n.forEach(u=>u.push(null))),t.forEach((u,p)=>{u===s&&(r.push(null),n.forEach(d=>d.push(null))),r.push(u),s=u,i.forEach((d,y)=>{n[y]||(n[y]=[]),n[y].push(d[p])})})}),{xs:r,ys:n}}function Ae(e){const r={GAMMA:"Γ",DELTA:"Δ",SIGMA:"Σ",LAMBDA:"Λ"};Object.keys(r).forEach(s=>{const a=new RegExp(s,"gi");e=e.replace(a,r[s])}),e=e.replace(/\bG\b/g,"Γ"),e=e.replace(/-/g,"—");const n={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};return e=e.replace(/_(.)/g,(s,a)=>n[a]||s),e}function Fe(e=td.paths){const r=[0];for(const n of e)n.x.length<3||r.push(n.x[n.x.length-1]);return r}function Te(e){const r=e.flat(),n=[];n.push(r[0]);for(let s=1;s<r.length-1;s++)r[s]===r[s+1]?(n.push(r[s]),s++):(n.push(r[s]+"|"+r[s+1]),s++);return n.push(r[r.length-1]),n}function L(e,r="x",n="y"){let s=1/0,a=-1/0,l=1/0,t=-1/0;for(const i of e){const u=i.xaxis===r||!i.xaxis&&r==="x",p=i.yaxis===n||!i.yaxis&&n==="y";if(!(!u||!p)){for(const d of i.x??[])typeof d=="number"&&(s=Math.min(s,d),a=Math.max(a,d));for(const d of i.y??[])typeof d=="number"&&(l=Math.min(l,d),t=Math.max(t,d))}}return{x:s===1/0?null:[s,a],y:l===1/0?null:[l,t]}}function M(e,r,n,s={}){return{x:e,y:r,mode:"lines",type:"scatter",name:`Fermi [${n}eV]`,legendgroup:`fermi-${n}`,showlegend:s.showlegend??!0,line:{color:"green",width:1.25,dash:"dash"},...s}}function Ne(e,r,n,s){const a=[...r];if(n&&!s){const{y:l}=L(r);for(const t of e)a.push(M([t,t],[l[0],l[1]],t))}else if(s&&!n){const{x:l}=L(r);for(const t of e)a.push(M([l[0],l[1]],[t,t],t))}else if(s&&n){const{x:l}=L(r,"x2","y"),{x:t}=L(r,"x","y");for(const i of e)a.push(M([t[0],t[1]],[i,i],i)),a.push(M([l[0],l[1]],[i,i],i,{showlegend:!1,xaxis:"x2",yaxis:"y"}))}return a}var q,Z;function Oe(){if(Z)return q;Z=1;var e=function(f){return r(f)&&!n(f)};function r(c){return!!c&&typeof c=="object"}function n(c){var f=Object.prototype.toString.call(c);return f==="[object RegExp]"||f==="[object Date]"||l(c)}var s=typeof Symbol=="function"&&Symbol.for,a=s?Symbol.for("react.element"):60103;function l(c){return c.$$typeof===a}function t(c){return Array.isArray(c)?[]:{}}function i(c,f){return f.clone!==!1&&f.isMergeableObject(c)?v(t(c),c,f):c}function u(c,f,x){return c.concat(f).map(function(m){return i(m,x)})}function p(c,f){if(!f.customMerge)return v;var x=f.customMerge(c);return typeof x=="function"?x:v}function d(c){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(c).filter(function(f){return Object.propertyIsEnumerable.call(c,f)}):[]}function y(c){return Object.keys(c).concat(d(c))}function _(c,f){try{return f in c}catch{return!1}}function w(c,f){return _(c,f)&&!(Object.hasOwnProperty.call(c,f)&&Object.propertyIsEnumerable.call(c,f))}function j(c,f,x){var m={};return x.isMergeableObject(c)&&y(c).forEach(function(g){m[g]=i(c[g],x)}),y(f).forEach(function(g){w(c,g)||(_(c,g)&&x.isMergeableObject(f[g])?m[g]=p(g,x)(c[g],f[g],x):m[g]=i(f[g],x))}),m}function v(c,f,x){x=x||{},x.arrayMerge=x.arrayMerge||u,x.isMergeableObject=x.isMergeableObject||e,x.cloneUnlessOtherwiseSpecified=i;var m=Array.isArray(f),g=Array.isArray(c),C=m===g;return C?m?x.arrayMerge(c,f,x):j(c,f,x):i(f,x)}v.all=function(f,x){if(!Array.isArray(f))throw new Error("first argument should be an array");return f.reduce(function(m,g){return v(m,g,x)},{})};var h=v;return q=h,q}var ze=Oe();const z=oe(ze),K={title:"Multi Trace Plot with border",hovermode:"closest",uirevision:!0,shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],margin:{l:55,r:10,t:10,b:45},dragmode:"zoom",xaxis:{title:{text:"x-axis",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"y-axis",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}},legend:{x:1.01,y:1,xanchor:"left",yanchor:"top",orientation:"v"}},Pe=z(K,{title:"BSPlot",xaxis:{title:{text:"K-path",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}}}),Se=z(K,{title:"DOSPlot",xaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),$e=z(K,{title:"DOSPlot",xaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),B={shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:2},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],grid:{rows:1,columns:2,pattern:"independent"},xaxis:{domain:[0,.7],autorange:!0},xaxis2:{title:{text:"Energy [eV]",font:{size:18}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"},domain:[.73,1],autorange:!0,showgrid:!0},yaxis:{autorange:!0},margin:{l:60,r:30,b:40,t:40},showlegend:!0,legend:{}},Le={mode:"lines",dash:"solid",line:{color:"rgba(90, 60, 255, 0.85)",width:1},name:"Band Structure"},Me={name:"DOS",legendgroup:"DOS",showlegend:!0,type:"scatter",mode:"lines",dash:"dash",line:{color:"rgba(90, 60, 255, 0.85)",width:2},fill:"toself"};function Be(e,r,n={}){const s=[];return r.forEach((a,l)=>{s.push({name:n.name,legendgroup:n.name,showlegend:l===0,...Le,...n,x:e,y:a})}),s}function Ce(e=[],r=[]){return z.all([Pe,{xaxis:{tickvals:r,ticktext:e},yaxis:{}}])}function Ve(e){const n=Te(e[0].bandsData.path).map(Ae),s=Fe(e[0].bandsData.paths),a=Ce(n,s);let l=[];for(const[t,i]of e.entries()){let u=i.traceFormat;(!u||Object.keys(u).length===0)&&(u={name:`Band Structure ${t}`,line:{color:G(t),width:1}});const p=i.bandsData,{xs:d,ys:y}=Ee(p),_=Be(d,y,u);l.push(..._)}return{bandTraces:l,bandLayout:a}}function Ie(e="h"){let r;return e==="v"?r=$e:r=Se,r}function We(e,r="h",n={}){const s=r==="v"?e.y:e.x,a=r==="v"?e.x:e.y;return{...Me,...n,x:s,y:a}}function Re(e,r="h"){const n=[];for(const[a,l]of e.entries()){let t=l.traceFormat;(!t||Object.keys(t).length===0)&&(t={name:`DOS ${a}`,line:{color:G(a),width:2}});const i=l.dosData,u=We(i,r,t);n.push(u)}const s=Ie(r);return{dosTraces:n,dosLayout:s}}function De(e,r,n,s={},a=1){const l=H(n),t=H(r),i=[];return t.forEach((u,p)=>{const d=l[p],y=new Float64Array(u.length),_=new Float64Array(u.length);for(let h=0;h<u.length;h++){const c=d[h]*a;y[h]=u[h]+c,_[h]=u[h]-c}const w=e.length,j=new Float32Array(w*2),v=new Float32Array(w*2);for(let h=0;h<w;h++)j[h]=e[h],v[h]=_[h],j[2*w-1-h]=e[h],v[2*w-1-h]=y[h];i.push({name:s.name,legendgroup:s.name,type:"scatter",mode:"lines",fill:"toself",...s,showlegend:p===0,x:j,y:v})}),i}function qe(e,r){for(const n in e)e[n]!==null&&typeof e[n]=="object"&&!Array.isArray(e[n])&&r[n]&&typeof r[n]=="object"&&!Array.isArray(r[n])?r[n]=z(r[n],e[n]):r[n]=e[n]}function Ue(e,{bandsDataArray:r=[],dosDataArray:n=[],fermiLevels:s=[],customTraces:a=[],settings:l={}}){let t=[],i={},u=[],p=[],d={};typeof s=="number"&&(s=[s]);const y=r.length>0,_=n.length>0;if(y){const h=Ve(r);t=h.bandTraces,i=h.bandLayout;for(const[c,f]of r.entries())if(f.hasOwnProperty("projections"))for(const[x,m]of f.projections.entries()){const g=m.traceFormat&&Object.keys(m.traceFormat).length>0?m.traceFormat:{name:`Projection ${x}`,line:{color:G(x),width:0}};u.push(...De(f.bandsData.x,f.bandsData.y,m.projData.weights,g))}}if(_){const c=Re(n,y?"v":"h");p=c.dosTraces,d=c.dosLayout}let w={},j=[];if(_&&!y)j=p,w={...d,showlegend:d?.showlegend??!0};else if(y&&!_)j=[...t,...u],w={...i,showlegend:i?.showlegend??!0};else if(_&&y){p=p.map(c=>({...c,xaxis:"x2",yaxis:"y"}));const h=ke([...u,...p]);j=[...t,...h],w={...B,xaxis:{...B.xaxis||{},...i?.xaxis||{}},xaxis2:{...B.xaxis2||{},...d?.xaxis2||{}},yaxis:{...B.yaxis||{},...i?.yaxis||{},...d?.yaxis||{}}}}for(const h of a)console.log(h),h.target==="dos"?j.push({...h,xaxis:"x2",yaxis:"y"}):h.target==="bands"?j.push({...h,xaxis:"x",yaxis:"y"}):j.push({...h});const v=Ne(s,j,_,y);qe(l,w),U.react(e,v,w,{displaylogo:!1,responsive:!0})}function ee({bandsDataArray:e,loading:r=!1,loadingIconScale:n=15,dosDataArray:s=void 0,customTraces:a=[],minYval:l=null,maxYval:t=null,layoutOverrides:i=null}){const u=F.useRef(null),p=F.useMemo(()=>{const d={...i??{}};return l!=null&&t!=null&&(d.yaxis={...d.yaxis??{},range:[l,t]}),d},[i,l,t]);return F.useEffect(()=>{r||!u.current||!e||Ue(u.current,{bandsDataArray:e,dosDataArray:s,customTraces:a,settings:p})},[e,s,a,p,r]),o.jsx("div",{ref:u,style:{position:"relative",width:"100%",height:"450px",border:r?"2px solid #ccc":"none",borderRadius:r?"8px":"0"},children:r&&o.jsx("div",{style:{width:`${n}%`,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10},children:o.jsx(ne,{})})})}function Ke({params:e,loadedData:r}){const n=r?.details?.supercon,s=e.method,{data:a,loading:l}=R(()=>pe(n,s),[n,s]),{data:t,loading:i}=R(()=>ye(n,s),[n,s]),{data:u}=R(()=>me(n,s),[n,s]),p=a?.el??[],d=a?.ph??[],y=!!p.length,_=!!d.length;return n?o.jsx("div",{children:o.jsxs(ae,{fluid:!0,className:"section-container",children:[o.jsxs("div",{style:{margin:"10px 0px",padding:"20px 0px 10px",borderBottom:"1px solid #c4c4c4"},children:[o.jsx("div",{style:{fontSize:"24px"},children:"Superconductivity estimation"}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px",alignItems:"center"},children:[o.jsx(ie,{citationLabels:["MBercxSupercon25"]}),o.jsx(le,{doi_id:"9w-az",label:"Data DOI"})]})]}),o.jsxs("div",{className:"alert alert-warning",style:{margin:"10px 10px 5px 10px"},role:"alert",children:["This contribution re-relaxes the structure with a different methodology. To see this structure, explore the AiiDA provenance"," ",n.structure_uuid&&o.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.structure_uuid})]}),o.jsxs("div",{style:{padding:"10px 10px"},children:["This dataset provides results from a high-throughput search for phonon-mediated superconductivity, where electron–phonon interactions and critical temperatures were systematically computed to identify and characterize promising superconducting materials. This frontend section contains the final superconductivity estimation results, as well as the intermediate electronic and vibrational calculated properties. For further details regarding the methodology see the"," ",o.jsx("a",{href:"./#/contributions",target:"_blank",rel:"noopener noreferrer",children:"contribution details"}),"."]}),o.jsxs(I,{children:[o.jsx(S,{sm:12,md:6,className:"mt-2 mt-md-5",children:o.jsx(_e,{superconData:n})}),o.jsxs(S,{sm:12,md:6,className:"mt-3 mt-md-0",children:[o.jsx("div",{className:"subsection-title",children:"Electronic band structure"}),o.jsxs("div",{className:"mb-3 ms-2",children:["Electronic band structure calculated with Quantum ESPRESSO (QE)"," ",n.qe_el_band_structure_uuid&&o.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.qe_el_band_structure_uuid})," ","and EPW"," ",n.epw_el_band_structure_uuid&&o.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.epw_el_band_structure_uuid})]}),o.jsx(ee,{bandsDataArray:y?a.el:null,loading:l,minYval:-10.4,maxYval:10.8,layoutOverrides:ue})]})]}),n.epw_ph_band_structure_uuid&&o.jsx(I,{children:o.jsxs(S,{className:"mt-4 mt-lg-0",children:[o.jsx("div",{className:"subsection-title",children:"Phonon bands and electron-phonon interaction"}),o.jsxs("div",{style:{padding:"0px 10px"},children:["Phonon band structure calculated with EPW"," ",n.epw_ph_band_structure_uuid&&o.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.epw_ph_band_structure_uuid})," ","Eliashberg spectral function [α²F(ω)], and electron-phonon coupling strength [λ(ω)]"," ",n.a2f_uuid&&o.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.a2f_uuid})," "]}),o.jsx(ee,{bandsDataArray:_?a.ph:null,loading:l,loadingIconScale:7,minYval:0,maxYval:n.highest_phonon_frequency!=null?Math.min(n.highest_phonon_frequency+2,100):100,dosDataArray:[{dosData:{x:[0],y:[0]},traceFormat:{name:"",legend:"legend2",showlegend:!1,opacity:0}}],layoutOverrides:de,customTraces:ve({a2f:u?.a2f,frequency:u?.frequency,degaussq:u?.degaussq,lambda:u?.lambda})})]})}),n.aniso_info&&o.jsx(I,{children:o.jsxs(S,{xs:12,style:{maxWidth:"1200px"},children:[o.jsxs("div",{className:"subsection-title",children:["Anisotropic superconducting gap function"," ",n.aniso_gap_function_uuid&&o.jsx(N,{explore_url:O[e.method]+"-supercon",uuid:n.aniso_gap_function_uuid})," "]}),o.jsx(je,{gapfuncData:t,loading:i,verts:n.aniso_info.temps,points:n.aniso_info.average_deltas,delta0:n.aniso_info.delta0,Tc:n.aniso_info.Tc,expo:n.aniso_info.expo,minXVal:0,maxXVal:null,minYVal:0,maxYVal:null})]})})]})}):o.jsx("div",{className:"empty-supercon-div"})}export{Ke as default};
